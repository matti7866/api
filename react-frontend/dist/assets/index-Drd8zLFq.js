(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function a(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(r){if(r.ep)return;r.ep=!0;const i=a(r);fetch(r.href,i)}})();var g9=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function gv(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}function yD(s){if(Object.prototype.hasOwnProperty.call(s,"__esModule"))return s;var t=s.default;if(typeof t=="function"){var a=function n(){var r=!1;try{r=this instanceof n}catch{}return r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};a.prototype=t.prototype}else a={};return Object.defineProperty(a,"__esModule",{value:!0}),Object.keys(s).forEach(function(n){var r=Object.getOwnPropertyDescriptor(s,n);Object.defineProperty(a,n,r.get?r:{enumerable:!0,get:function(){return s[n]}})}),a}var wb={exports:{}},Df={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PN;function vD(){if(PN)return Df;PN=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function a(n,r,i){var o=null;if(i!==void 0&&(o=""+i),r.key!==void 0&&(o=""+r.key),"key"in r){i={};for(var c in r)c!=="key"&&(i[c]=r[c])}else i=r;return r=i.ref,{$$typeof:s,type:n,key:o,ref:r!==void 0?r:null,props:i}}return Df.Fragment=t,Df.jsx=a,Df.jsxs=a,Df}var FN;function jD(){return FN||(FN=1,wb.exports=vD()),wb.exports}var e=jD(),_b={exports:{}},Cs={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IN;function ND(){if(IN)return Cs;IN=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),p=Symbol.for("react.activity"),y=Symbol.iterator;function g(D){return D===null||typeof D!="object"?null:(D=y&&D[y]||D["@@iterator"],typeof D=="function"?D:null)}var j={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,N={};function v(D,U,le){this.props=D,this.context=U,this.refs=N,this.updater=le||j}v.prototype.isReactComponent={},v.prototype.setState=function(D,U){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,U,"setState")},v.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function S(){}S.prototype=v.prototype;function E(D,U,le){this.props=D,this.context=U,this.refs=N,this.updater=le||j}var L=E.prototype=new S;L.constructor=E,b(L,v.prototype),L.isPureReactComponent=!0;var z=Array.isArray;function V(){}var te={H:null,A:null,T:null,S:null},q=Object.prototype.hasOwnProperty;function B(D,U,le){var de=le.ref;return{$$typeof:s,type:D,key:U,ref:de!==void 0?de:null,props:le}}function J(D,U){return B(D.type,U,D.props)}function P(D){return typeof D=="object"&&D!==null&&D.$$typeof===s}function K(D){var U={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(le){return U[le]})}var H=/\/+/g;function se(D,U){return typeof D=="object"&&D!==null&&D.key!=null?K(""+D.key):U.toString(36)}function X(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(V,V):(D.status="pending",D.then(function(U){D.status==="pending"&&(D.status="fulfilled",D.value=U)},function(U){D.status==="pending"&&(D.status="rejected",D.reason=U)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function R(D,U,le,de,G){var je=typeof D;(je==="undefined"||je==="boolean")&&(D=null);var De=!1;if(D===null)De=!0;else switch(je){case"bigint":case"string":case"number":De=!0;break;case"object":switch(D.$$typeof){case s:case t:De=!0;break;case m:return De=D._init,R(De(D._payload),U,le,de,G)}}if(De)return G=G(D),De=de===""?"."+se(D,0):de,z(G)?(le="",De!=null&&(le=De.replace(H,"$&/")+"/"),R(G,U,le,"",function(Ye){return Ye})):G!=null&&(P(G)&&(G=J(G,le+(G.key==null||D&&D.key===G.key?"":(""+G.key).replace(H,"$&/")+"/")+De)),U.push(G)),1;De=0;var Pe=de===""?".":de+":";if(z(D))for(var ke=0;ke<D.length;ke++)de=D[ke],je=Pe+se(de,ke),De+=R(de,U,le,je,G);else if(ke=g(D),typeof ke=="function")for(D=ke.call(D),ke=0;!(de=D.next()).done;)de=de.value,je=Pe+se(de,ke++),De+=R(de,U,le,je,G);else if(je==="object"){if(typeof D.then=="function")return R(X(D),U,le,de,G);throw U=String(D),Error("Objects are not valid as a React child (found: "+(U==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":U)+"). If you meant to render a collection of children, use an array instead.")}return De}function Q(D,U,le){if(D==null)return D;var de=[],G=0;return R(D,de,"","",function(je){return U.call(le,je,G++)}),de}function Y(D){if(D._status===-1){var U=D._result;U=U(),U.then(function(le){(D._status===0||D._status===-1)&&(D._status=1,D._result=le)},function(le){(D._status===0||D._status===-1)&&(D._status=2,D._result=le)}),D._status===-1&&(D._status=0,D._result=U)}if(D._status===1)return D._result.default;throw D._result}var $=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var U=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(U))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)},me={map:Q,forEach:function(D,U,le){Q(D,function(){U.apply(this,arguments)},le)},count:function(D){var U=0;return Q(D,function(){U++}),U},toArray:function(D){return Q(D,function(U){return U})||[]},only:function(D){if(!P(D))throw Error("React.Children.only expected to receive a single React element child.");return D}};return Cs.Activity=p,Cs.Children=me,Cs.Component=v,Cs.Fragment=a,Cs.Profiler=r,Cs.PureComponent=E,Cs.StrictMode=n,Cs.Suspense=u,Cs.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=te,Cs.__COMPILER_RUNTIME={__proto__:null,c:function(D){return te.H.useMemoCache(D)}},Cs.cache=function(D){return function(){return D.apply(null,arguments)}},Cs.cacheSignal=function(){return null},Cs.cloneElement=function(D,U,le){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var de=b({},D.props),G=D.key;if(U!=null)for(je in U.key!==void 0&&(G=""+U.key),U)!q.call(U,je)||je==="key"||je==="__self"||je==="__source"||je==="ref"&&U.ref===void 0||(de[je]=U[je]);var je=arguments.length-2;if(je===1)de.children=le;else if(1<je){for(var De=Array(je),Pe=0;Pe<je;Pe++)De[Pe]=arguments[Pe+2];de.children=De}return B(D.type,G,de)},Cs.createContext=function(D){return D={$$typeof:o,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:i,_context:D},D},Cs.createElement=function(D,U,le){var de,G={},je=null;if(U!=null)for(de in U.key!==void 0&&(je=""+U.key),U)q.call(U,de)&&de!=="key"&&de!=="__self"&&de!=="__source"&&(G[de]=U[de]);var De=arguments.length-2;if(De===1)G.children=le;else if(1<De){for(var Pe=Array(De),ke=0;ke<De;ke++)Pe[ke]=arguments[ke+2];G.children=Pe}if(D&&D.defaultProps)for(de in De=D.defaultProps,De)G[de]===void 0&&(G[de]=De[de]);return B(D,je,G)},Cs.createRef=function(){return{current:null}},Cs.forwardRef=function(D){return{$$typeof:c,render:D}},Cs.isValidElement=P,Cs.lazy=function(D){return{$$typeof:m,_payload:{_status:-1,_result:D},_init:Y}},Cs.memo=function(D,U){return{$$typeof:h,type:D,compare:U===void 0?null:U}},Cs.startTransition=function(D){var U=te.T,le={};te.T=le;try{var de=D(),G=te.S;G!==null&&G(le,de),typeof de=="object"&&de!==null&&typeof de.then=="function"&&de.then(V,$)}catch(je){$(je)}finally{U!==null&&le.types!==null&&(U.types=le.types),te.T=U}},Cs.unstable_useCacheRefresh=function(){return te.H.useCacheRefresh()},Cs.use=function(D){return te.H.use(D)},Cs.useActionState=function(D,U,le){return te.H.useActionState(D,U,le)},Cs.useCallback=function(D,U){return te.H.useCallback(D,U)},Cs.useContext=function(D){return te.H.useContext(D)},Cs.useDebugValue=function(){},Cs.useDeferredValue=function(D,U){return te.H.useDeferredValue(D,U)},Cs.useEffect=function(D,U){return te.H.useEffect(D,U)},Cs.useEffectEvent=function(D){return te.H.useEffectEvent(D)},Cs.useId=function(){return te.H.useId()},Cs.useImperativeHandle=function(D,U,le){return te.H.useImperativeHandle(D,U,le)},Cs.useInsertionEffect=function(D,U){return te.H.useInsertionEffect(D,U)},Cs.useLayoutEffect=function(D,U){return te.H.useLayoutEffect(D,U)},Cs.useMemo=function(D,U){return te.H.useMemo(D,U)},Cs.useOptimistic=function(D,U){return te.H.useOptimistic(D,U)},Cs.useReducer=function(D,U,le){return te.H.useReducer(D,U,le)},Cs.useRef=function(D){return te.H.useRef(D)},Cs.useState=function(D){return te.H.useState(D)},Cs.useSyncExternalStore=function(D,U,le){return te.H.useSyncExternalStore(D,U,le)},Cs.useTransition=function(){return te.H.useTransition()},Cs.version="19.2.0",Cs}var ON;function Vg(){return ON||(ON=1,_b.exports=ND()),_b.exports}var A=Vg();const Wg=gv(A);var Sb={exports:{}},Ef={},Cb={exports:{}},Ab={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MN;function wD(){return MN||(MN=1,(function(s){function t(R,Q){var Y=R.length;R.push(Q);e:for(;0<Y;){var $=Y-1>>>1,me=R[$];if(0<r(me,Q))R[$]=Q,R[Y]=me,Y=$;else break e}}function a(R){return R.length===0?null:R[0]}function n(R){if(R.length===0)return null;var Q=R[0],Y=R.pop();if(Y!==Q){R[0]=Y;e:for(var $=0,me=R.length,D=me>>>1;$<D;){var U=2*($+1)-1,le=R[U],de=U+1,G=R[de];if(0>r(le,Y))de<me&&0>r(G,le)?(R[$]=G,R[de]=Y,$=de):(R[$]=le,R[U]=Y,$=U);else if(de<me&&0>r(G,Y))R[$]=G,R[de]=Y,$=de;else break e}}return Q}function r(R,Q){var Y=R.sortIndex-Q.sortIndex;return Y!==0?Y:R.id-Q.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;s.unstable_now=function(){return i.now()}}else{var o=Date,c=o.now();s.unstable_now=function(){return o.now()-c}}var u=[],h=[],m=1,p=null,y=3,g=!1,j=!1,b=!1,N=!1,v=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;function L(R){for(var Q=a(h);Q!==null;){if(Q.callback===null)n(h);else if(Q.startTime<=R)n(h),Q.sortIndex=Q.expirationTime,t(u,Q);else break;Q=a(h)}}function z(R){if(b=!1,L(R),!j)if(a(u)!==null)j=!0,V||(V=!0,K());else{var Q=a(h);Q!==null&&X(z,Q.startTime-R)}}var V=!1,te=-1,q=5,B=-1;function J(){return N?!0:!(s.unstable_now()-B<q)}function P(){if(N=!1,V){var R=s.unstable_now();B=R;var Q=!0;try{e:{j=!1,b&&(b=!1,S(te),te=-1),g=!0;var Y=y;try{t:{for(L(R),p=a(u);p!==null&&!(p.expirationTime>R&&J());){var $=p.callback;if(typeof $=="function"){p.callback=null,y=p.priorityLevel;var me=$(p.expirationTime<=R);if(R=s.unstable_now(),typeof me=="function"){p.callback=me,L(R),Q=!0;break t}p===a(u)&&n(u),L(R)}else n(u);p=a(u)}if(p!==null)Q=!0;else{var D=a(h);D!==null&&X(z,D.startTime-R),Q=!1}}break e}finally{p=null,y=Y,g=!1}Q=void 0}}finally{Q?K():V=!1}}}var K;if(typeof E=="function")K=function(){E(P)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,se=H.port2;H.port1.onmessage=P,K=function(){se.postMessage(null)}}else K=function(){v(P,0)};function X(R,Q){te=v(function(){R(s.unstable_now())},Q)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(R){R.callback=null},s.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<R?Math.floor(1e3/R):5},s.unstable_getCurrentPriorityLevel=function(){return y},s.unstable_next=function(R){switch(y){case 1:case 2:case 3:var Q=3;break;default:Q=y}var Y=y;y=Q;try{return R()}finally{y=Y}},s.unstable_requestPaint=function(){N=!0},s.unstable_runWithPriority=function(R,Q){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var Y=y;y=R;try{return Q()}finally{y=Y}},s.unstable_scheduleCallback=function(R,Q,Y){var $=s.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?$+Y:$):Y=$,R){case 1:var me=-1;break;case 2:me=250;break;case 5:me=1073741823;break;case 4:me=1e4;break;default:me=5e3}return me=Y+me,R={id:m++,callback:Q,priorityLevel:R,startTime:Y,expirationTime:me,sortIndex:-1},Y>$?(R.sortIndex=Y,t(h,R),a(u)===null&&R===a(h)&&(b?(S(te),te=-1):b=!0,X(z,Y-$))):(R.sortIndex=me,t(u,R),j||g||(j=!0,V||(V=!0,K()))),R},s.unstable_shouldYield=J,s.unstable_wrapCallback=function(R){var Q=y;return function(){var Y=y;y=Q;try{return R.apply(this,arguments)}finally{y=Y}}}})(Ab)),Ab}var RN;function _D(){return RN||(RN=1,Cb.exports=wD()),Cb.exports}var kb={exports:{}},Vr={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BN;function SD(){if(BN)return Vr;BN=1;var s=Vg();function t(u){var h="https://react.dev/errors/"+u;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)h+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+u+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(){}var n={d:{f:a,r:function(){throw Error(t(522))},D:a,C:a,L:a,m:a,X:a,S:a,M:a},p:0,findDOMNode:null},r=Symbol.for("react.portal");function i(u,h,m){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:p==null?null:""+p,children:u,containerInfo:h,implementation:m}}var o=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(u,h){if(u==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return Vr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,Vr.createPortal=function(u,h){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(t(299));return i(u,h,null,m)},Vr.flushSync=function(u){var h=o.T,m=n.p;try{if(o.T=null,n.p=2,u)return u()}finally{o.T=h,n.p=m,n.d.f()}},Vr.preconnect=function(u,h){typeof u=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,n.d.C(u,h))},Vr.prefetchDNS=function(u){typeof u=="string"&&n.d.D(u)},Vr.preinit=function(u,h){if(typeof u=="string"&&h&&typeof h.as=="string"){var m=h.as,p=c(m,h.crossOrigin),y=typeof h.integrity=="string"?h.integrity:void 0,g=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;m==="style"?n.d.S(u,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:p,integrity:y,fetchPriority:g}):m==="script"&&n.d.X(u,{crossOrigin:p,integrity:y,fetchPriority:g,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},Vr.preinitModule=function(u,h){if(typeof u=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var m=c(h.as,h.crossOrigin);n.d.M(u,{crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&n.d.M(u)},Vr.preload=function(u,h){if(typeof u=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var m=h.as,p=c(m,h.crossOrigin);n.d.L(u,m,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},Vr.preloadModule=function(u,h){if(typeof u=="string")if(h){var m=c(h.as,h.crossOrigin);n.d.m(u,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else n.d.m(u)},Vr.requestFormReset=function(u){n.d.r(u)},Vr.unstable_batchedUpdates=function(u,h){return u(h)},Vr.useFormState=function(u,h,m){return o.H.useFormState(u,h,m)},Vr.useFormStatus=function(){return o.H.useHostTransitionStatus()},Vr.version="19.2.0",Vr}var zN;function CD(){if(zN)return kb.exports;zN=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),kb.exports=SD(),kb.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qN;function AD(){if(qN)return Ef;qN=1;var s=_D(),t=Vg(),a=CD();function n(l){var d="https://react.dev/errors/"+l;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)d+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+l+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function i(l){var d=l,f=l;if(l.alternate)for(;d.return;)d=d.return;else{l=d;do d=l,(d.flags&4098)!==0&&(f=d.return),l=d.return;while(l)}return d.tag===3?f:null}function o(l){if(l.tag===13){var d=l.memoizedState;if(d===null&&(l=l.alternate,l!==null&&(d=l.memoizedState)),d!==null)return d.dehydrated}return null}function c(l){if(l.tag===31){var d=l.memoizedState;if(d===null&&(l=l.alternate,l!==null&&(d=l.memoizedState)),d!==null)return d.dehydrated}return null}function u(l){if(i(l)!==l)throw Error(n(188))}function h(l){var d=l.alternate;if(!d){if(d=i(l),d===null)throw Error(n(188));return d!==l?null:l}for(var f=l,x=d;;){var C=f.return;if(C===null)break;var T=C.alternate;if(T===null){if(x=C.return,x!==null){f=x;continue}break}if(C.child===T.child){for(T=C.child;T;){if(T===f)return u(C),l;if(T===x)return u(C),d;T=T.sibling}throw Error(n(188))}if(f.return!==x.return)f=C,x=T;else{for(var ae=!1,pe=C.child;pe;){if(pe===f){ae=!0,f=C,x=T;break}if(pe===x){ae=!0,x=C,f=T;break}pe=pe.sibling}if(!ae){for(pe=T.child;pe;){if(pe===f){ae=!0,f=T,x=C;break}if(pe===x){ae=!0,x=T,f=C;break}pe=pe.sibling}if(!ae)throw Error(n(189))}}if(f.alternate!==x)throw Error(n(190))}if(f.tag!==3)throw Error(n(188));return f.stateNode.current===f?l:d}function m(l){var d=l.tag;if(d===5||d===26||d===27||d===6)return l;for(l=l.child;l!==null;){if(d=m(l),d!==null)return d;l=l.sibling}return null}var p=Object.assign,y=Symbol.for("react.element"),g=Symbol.for("react.transitional.element"),j=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),v=Symbol.for("react.profiler"),S=Symbol.for("react.consumer"),E=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),z=Symbol.for("react.suspense"),V=Symbol.for("react.suspense_list"),te=Symbol.for("react.memo"),q=Symbol.for("react.lazy"),B=Symbol.for("react.activity"),J=Symbol.for("react.memo_cache_sentinel"),P=Symbol.iterator;function K(l){return l===null||typeof l!="object"?null:(l=P&&l[P]||l["@@iterator"],typeof l=="function"?l:null)}var H=Symbol.for("react.client.reference");function se(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===H?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case b:return"Fragment";case v:return"Profiler";case N:return"StrictMode";case z:return"Suspense";case V:return"SuspenseList";case B:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case j:return"Portal";case E:return l.displayName||"Context";case S:return(l._context.displayName||"Context")+".Consumer";case L:var d=l.render;return l=l.displayName,l||(l=d.displayName||d.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case te:return d=l.displayName||null,d!==null?d:se(l.type)||"Memo";case q:d=l._payload,l=l._init;try{return se(l(d))}catch{}}return null}var X=Array.isArray,R=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y={pending:!1,data:null,method:null,action:null},$=[],me=-1;function D(l){return{current:l}}function U(l){0>me||(l.current=$[me],$[me]=null,me--)}function le(l,d){me++,$[me]=l.current,l.current=d}var de=D(null),G=D(null),je=D(null),De=D(null);function Pe(l,d){switch(le(je,d),le(G,l),le(de,null),d.nodeType){case 9:case 11:l=(l=d.documentElement)&&(l=l.namespaceURI)?sN(l):0;break;default:if(l=d.tagName,d=d.namespaceURI)d=sN(d),l=aN(d,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}U(de),le(de,l)}function ke(){U(de),U(G),U(je)}function Ye(l){l.memoizedState!==null&&le(De,l);var d=de.current,f=aN(d,l.type);d!==f&&(le(G,l),le(de,f))}function Qe(l){G.current===l&&(U(de),U(G)),De.current===l&&(U(De),Sf._currentValue=Y)}var et,Xe;function re(l){if(et===void 0)try{throw Error()}catch(f){var d=f.stack.trim().match(/\n( *(at )?)/);et=d&&d[1]||"",Xe=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+et+l+Xe}var ne=!1;function Se(l,d){if(!l||ne)return"";ne=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var x={DetermineComponentFrameRoot:function(){try{if(d){var ft=function(){throw Error()};if(Object.defineProperty(ft.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ft,[])}catch(at){var Ge=at}Reflect.construct(l,[],ft)}else{try{ft.call()}catch(at){Ge=at}l.call(ft.prototype)}}else{try{throw Error()}catch(at){Ge=at}(ft=l())&&typeof ft.catch=="function"&&ft.catch(function(){})}}catch(at){if(at&&Ge&&typeof at.stack=="string")return[at.stack,Ge.stack]}return[null,null]}};x.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var C=Object.getOwnPropertyDescriptor(x.DetermineComponentFrameRoot,"name");C&&C.configurable&&Object.defineProperty(x.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var T=x.DetermineComponentFrameRoot(),ae=T[0],pe=T[1];if(ae&&pe){var Ee=ae.split(`
`),Ke=pe.split(`
`);for(C=x=0;x<Ee.length&&!Ee[x].includes("DetermineComponentFrameRoot");)x++;for(;C<Ke.length&&!Ke[C].includes("DetermineComponentFrameRoot");)C++;if(x===Ee.length||C===Ke.length)for(x=Ee.length-1,C=Ke.length-1;1<=x&&0<=C&&Ee[x]!==Ke[C];)C--;for(;1<=x&&0<=C;x--,C--)if(Ee[x]!==Ke[C]){if(x!==1||C!==1)do if(x--,C--,0>C||Ee[x]!==Ke[C]){var ct=`
`+Ee[x].replace(" at new "," at ");return l.displayName&&ct.includes("<anonymous>")&&(ct=ct.replace("<anonymous>",l.displayName)),ct}while(1<=x&&0<=C);break}}}finally{ne=!1,Error.prepareStackTrace=f}return(f=l?l.displayName||l.name:"")?re(f):""}function Ve(l,d){switch(l.tag){case 26:case 27:case 5:return re(l.type);case 16:return re("Lazy");case 13:return l.child!==d&&d!==null?re("Suspense Fallback"):re("Suspense");case 19:return re("SuspenseList");case 0:case 15:return Se(l.type,!1);case 11:return Se(l.type.render,!1);case 1:return Se(l.type,!0);case 31:return re("Activity");default:return""}}function xt(l){try{var d="",f=null;do d+=Ve(l,f),f=l,l=l.return;while(l);return d}catch(x){return`
Error generating stack: `+x.message+`
`+x.stack}}var ee=Object.prototype.hasOwnProperty,Ie=s.unstable_scheduleCallback,He=s.unstable_cancelCallback,Lt=s.unstable_shouldYield,Dt=s.unstable_requestPaint,Mt=s.unstable_now,At=s.unstable_getCurrentPriorityLevel,Bt=s.unstable_ImmediatePriority,rs=s.unstable_UserBlockingPriority,kt=s.unstable_NormalPriority,zt=s.unstable_LowPriority,$t=s.unstable_IdlePriority,bt=s.log,ys=s.unstable_setDisableYieldValue,Te=null,Je=null;function be(l){if(typeof bt=="function"&&ys(l),Je&&typeof Je.setStrictMode=="function")try{Je.setStrictMode(Te,l)}catch{}}var Re=Math.clz32?Math.clz32:Et,lt=Math.log,tt=Math.LN2;function Et(l){return l>>>=0,l===0?32:31-(lt(l)/tt|0)|0}var is=256,qt=262144,Pt=4194304;function Tt(l){var d=l&42;if(d!==0)return d;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return l&261888;case 262144:case 524288:case 1048576:case 2097152:return l&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function Ue(l,d,f){var x=l.pendingLanes;if(x===0)return 0;var C=0,T=l.suspendedLanes,ae=l.pingedLanes;l=l.warmLanes;var pe=x&134217727;return pe!==0?(x=pe&~T,x!==0?C=Tt(x):(ae&=pe,ae!==0?C=Tt(ae):f||(f=pe&~l,f!==0&&(C=Tt(f))))):(pe=x&~T,pe!==0?C=Tt(pe):ae!==0?C=Tt(ae):f||(f=x&~l,f!==0&&(C=Tt(f)))),C===0?0:d!==0&&d!==C&&(d&T)===0&&(T=C&-C,f=d&-d,T>=f||T===32&&(f&4194048)!==0)?d:C}function yt(l,d){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&d)===0}function vt(l,d){switch(l){case 1:case 2:case 4:case 8:case 64:return d+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ce(){var l=Pt;return Pt<<=1,(Pt&62914560)===0&&(Pt=4194304),l}function ve(l){for(var d=[],f=0;31>f;f++)d.push(l);return d}function Ze(l,d){l.pendingLanes|=d,d!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function Wt(l,d,f,x,C,T){var ae=l.pendingLanes;l.pendingLanes=f,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=f,l.entangledLanes&=f,l.errorRecoveryDisabledLanes&=f,l.shellSuspendCounter=0;var pe=l.entanglements,Ee=l.expirationTimes,Ke=l.hiddenUpdates;for(f=ae&~f;0<f;){var ct=31-Re(f),ft=1<<ct;pe[ct]=0,Ee[ct]=-1;var Ge=Ke[ct];if(Ge!==null)for(Ke[ct]=null,ct=0;ct<Ge.length;ct++){var at=Ge[ct];at!==null&&(at.lane&=-536870913)}f&=~ft}x!==0&&Fs(l,x,0),T!==0&&C===0&&l.tag!==0&&(l.suspendedLanes|=T&~(ae&~d))}function Fs(l,d,f){l.pendingLanes|=d,l.suspendedLanes&=~d;var x=31-Re(d);l.entangledLanes|=d,l.entanglements[x]=l.entanglements[x]|1073741824|f&261930}function Ts(l,d){var f=l.entangledLanes|=d;for(l=l.entanglements;f;){var x=31-Re(f),C=1<<x;C&d|l[x]&d&&(l[x]|=d),f&=~C}}function aa(l,d){var f=d&-d;return f=(f&42)!==0?1:Os(f),(f&(l.suspendedLanes|d))!==0?0:f}function Os(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function $s(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function ja(){var l=Q.p;return l!==0?l:(l=window.event,l===void 0?32:CN(l.type))}function Ln(l,d){var f=Q.p;try{return Q.p=l,d()}finally{Q.p=f}}var La=Math.random().toString(36).slice(2),Zs="__reactFiber$"+La,Sa="__reactProps$"+La,cn="__reactContainer$"+La,yr="__reactEvents$"+La,Ar="__reactListeners$"+La,kr="__reactHandles$"+La,pa="__reactResources$"+La,Ca="__reactMarker$"+La;function Ya(l){delete l[Zs],delete l[Sa],delete l[yr],delete l[Ar],delete l[kr]}function ga(l){var d=l[Zs];if(d)return d;for(var f=l.parentNode;f;){if(d=f[cn]||f[Zs]){if(f=d.alternate,d.child!==null||f!==null&&f.child!==null)for(l=dN(l);l!==null;){if(f=l[Zs])return f;l=dN(l)}return d}l=f,f=l.parentNode}return null}function ir(l){if(l=l[Zs]||l[cn]){var d=l.tag;if(d===5||d===6||d===13||d===31||d===26||d===27||d===3)return l}return null}function Dr(l){var d=l.tag;if(d===5||d===26||d===27||d===6)return l.stateNode;throw Error(n(33))}function Pn(l){var d=l[pa];return d||(d=l[pa]={hoistableStyles:new Map,hoistableScripts:new Map}),d}function ua(l){l[Ca]=!0}var Co=new Set,Wn={};function Fn(l,d){hi(l,d),hi(l+"Capture",d)}function hi(l,d){for(Wn[l]=d,l=0;l<d.length;l++)Co.add(d[l])}var Wl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Yl={},Ao={};function lc(l){return ee.call(Ao,l)?!0:ee.call(Yl,l)?!1:Wl.test(l)?Ao[l]=!0:(Yl[l]=!0,!1)}function fi(l,d,f){if(lc(d))if(f===null)l.removeAttribute(d);else{switch(typeof f){case"undefined":case"function":case"symbol":l.removeAttribute(d);return;case"boolean":var x=d.toLowerCase().slice(0,5);if(x!=="data-"&&x!=="aria-"){l.removeAttribute(d);return}}l.setAttribute(d,""+f)}}function Kl(l,d,f){if(f===null)l.removeAttribute(d);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(d);return}l.setAttribute(d,""+f)}}function ta(l,d,f,x){if(x===null)l.removeAttribute(f);else{switch(typeof x){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(f);return}l.setAttributeNS(d,f,""+x)}}function In(l){switch(typeof l){case"bigint":case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function ko(l){var d=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(d==="checkbox"||d==="radio")}function mi(l,d,f){var x=Object.getOwnPropertyDescriptor(l.constructor.prototype,d);if(!l.hasOwnProperty(d)&&typeof x<"u"&&typeof x.get=="function"&&typeof x.set=="function"){var C=x.get,T=x.set;return Object.defineProperty(l,d,{configurable:!0,get:function(){return C.call(this)},set:function(ae){f=""+ae,T.call(this,ae)}}),Object.defineProperty(l,d,{enumerable:x.enumerable}),{getValue:function(){return f},setValue:function(ae){f=""+ae},stopTracking:function(){l._valueTracker=null,delete l[d]}}}}function pi(l){if(!l._valueTracker){var d=ko(l)?"checked":"value";l._valueTracker=mi(l,d,""+l[d])}}function vr(l){if(!l)return!1;var d=l._valueTracker;if(!d)return!0;var f=d.getValue(),x="";return l&&(x=ko(l)?l.checked?"true":"false":l.value),l=x,l!==f?(d.setValue(l),!0):!1}function an(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}var zs=/[\n"\\]/g;function Pa(l){return l.replace(zs,function(d){return"\\"+d.charCodeAt(0).toString(16)+" "})}function On(l,d,f,x,C,T,ae,pe){l.name="",ae!=null&&typeof ae!="function"&&typeof ae!="symbol"&&typeof ae!="boolean"?l.type=ae:l.removeAttribute("type"),d!=null?ae==="number"?(d===0&&l.value===""||l.value!=d)&&(l.value=""+In(d)):l.value!==""+In(d)&&(l.value=""+In(d)):ae!=="submit"&&ae!=="reset"||l.removeAttribute("value"),d!=null?Xl(l,ae,In(d)):f!=null?Xl(l,ae,In(f)):x!=null&&l.removeAttribute("value"),C==null&&T!=null&&(l.defaultChecked=!!T),C!=null&&(l.checked=C&&typeof C!="function"&&typeof C!="symbol"),pe!=null&&typeof pe!="function"&&typeof pe!="symbol"&&typeof pe!="boolean"?l.name=""+In(pe):l.removeAttribute("name")}function Do(l,d,f,x,C,T,ae,pe){if(T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(l.type=T),d!=null||f!=null){if(!(T!=="submit"&&T!=="reset"||d!=null)){pi(l);return}f=f!=null?""+In(f):"",d=d!=null?""+In(d):f,pe||d===l.value||(l.value=d),l.defaultValue=d}x=x??C,x=typeof x!="function"&&typeof x!="symbol"&&!!x,l.checked=pe?l.checked:!!x,l.defaultChecked=!!x,ae!=null&&typeof ae!="function"&&typeof ae!="symbol"&&typeof ae!="boolean"&&(l.name=ae),pi(l)}function Xl(l,d,f){d==="number"&&an(l.ownerDocument)===l||l.defaultValue===""+f||(l.defaultValue=""+f)}function Na(l,d,f,x){if(l=l.options,d){d={};for(var C=0;C<f.length;C++)d["$"+f[C]]=!0;for(f=0;f<l.length;f++)C=d.hasOwnProperty("$"+l[f].value),l[f].selected!==C&&(l[f].selected=C),C&&x&&(l[f].defaultSelected=!0)}else{for(f=""+In(f),d=null,C=0;C<l.length;C++){if(l[C].value===f){l[C].selected=!0,x&&(l[C].defaultSelected=!0);return}d!==null||l[C].disabled||(d=l[C])}d!==null&&(d.selected=!0)}}function si(l,d,f){if(d!=null&&(d=""+In(d),d!==l.value&&(l.value=d),f==null)){l.defaultValue!==d&&(l.defaultValue=d);return}l.defaultValue=f!=null?""+In(f):""}function bl(l,d,f,x){if(d==null){if(x!=null){if(f!=null)throw Error(n(92));if(X(x)){if(1<x.length)throw Error(n(93));x=x[0]}f=x}f==null&&(f=""),d=f}f=In(d),l.defaultValue=f,x=l.textContent,x===f&&x!==""&&x!==null&&(l.value=x),pi(l)}function dn(l,d){if(d){var f=l.firstChild;if(f&&f===l.lastChild&&f.nodeType===3){f.nodeValue=d;return}}l.textContent=d}var Gl=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function oc(l,d,f){var x=d.indexOf("--")===0;f==null||typeof f=="boolean"||f===""?x?l.setProperty(d,""):d==="float"?l.cssFloat="":l[d]="":x?l.setProperty(d,f):typeof f!="number"||f===0||Gl.has(d)?d==="float"?l.cssFloat=f:l[d]=(""+f).trim():l[d]=f+"px"}function Ki(l,d,f){if(d!=null&&typeof d!="object")throw Error(n(62));if(l=l.style,f!=null){for(var x in f)!f.hasOwnProperty(x)||d!=null&&d.hasOwnProperty(x)||(x.indexOf("--")===0?l.setProperty(x,""):x==="float"?l.cssFloat="":l[x]="");for(var C in d)x=d[C],d.hasOwnProperty(C)&&f[C]!==x&&oc(l,C,x)}else for(var T in d)d.hasOwnProperty(T)&&oc(l,T,d[T])}function Ql(l){if(l.indexOf("-")===-1)return!1;switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Eo=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Yn=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ai(l){return Yn.test(""+l)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":l}function un(){}var Er=null;function yl(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var es=null,gi=null;function vl(l){var d=ir(l);if(d&&(l=d.stateNode)){var f=l[Sa]||null;e:switch(l=d.stateNode,d.type){case"input":if(On(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name),d=f.name,f.type==="radio"&&d!=null){for(f=l;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll('input[name="'+Pa(""+d)+'"][type="radio"]'),d=0;d<f.length;d++){var x=f[d];if(x!==l&&x.form===l.form){var C=x[Sa]||null;if(!C)throw Error(n(90));On(x,C.value,C.defaultValue,C.defaultValue,C.checked,C.defaultChecked,C.type,C.name)}}for(d=0;d<f.length;d++)x=f[d],x.form===l.form&&vr(x)}break e;case"textarea":si(l,f.value,f.defaultValue);break e;case"select":d=f.value,d!=null&&Na(l,!!f.multiple,d,!1)}}}var To=!1;function cc(l,d,f){if(To)return l(d,f);To=!0;try{var x=l(d);return x}finally{if(To=!1,(es!==null||gi!==null)&&(Gm(),es&&(d=es,l=gi,gi=es=null,vl(d),l)))for(d=0;d<l.length;d++)vl(l[d])}}function lr(l,d){var f=l.stateNode;if(f===null)return null;var x=f[Sa]||null;if(x===null)return null;f=x[d];e:switch(d){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(x=!x.disabled)||(l=l.type,x=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!x;break e;default:l=!1}if(l)return null;if(f&&typeof f!="function")throw Error(n(231,d,typeof f));return f}var Fa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),dc=!1;if(Fa)try{var jl={};Object.defineProperty(jl,"passive",{get:function(){dc=!0}}),window.addEventListener("test",jl,jl),window.removeEventListener("test",jl,jl)}catch{dc=!1}var Kn=null,xi=null,Tr=null;function Jl(){if(Tr)return Tr;var l,d=xi,f=d.length,x,C="value"in Kn?Kn.value:Kn.textContent,T=C.length;for(l=0;l<f&&d[l]===C[l];l++);var ae=f-l;for(x=1;x<=ae&&d[f-x]===C[T-x];x++);return Tr=C.slice(l,1<x?1-x:void 0)}function Lr(l){var d=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&d===13&&(l=13)):l=d,l===10&&(l=13),32<=l||l===13?l:0}function Lo(){return!0}function Zl(){return!1}function Ka(l){function d(f,x,C,T,ae){this._reactName=f,this._targetInst=C,this.type=x,this.nativeEvent=T,this.target=ae,this.currentTarget=null;for(var pe in l)l.hasOwnProperty(pe)&&(f=l[pe],this[pe]=f?f(T):T[pe]);return this.isDefaultPrevented=(T.defaultPrevented!=null?T.defaultPrevented:T.returnValue===!1)?Lo:Zl,this.isPropagationStopped=Zl,this}return p(d.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=Lo)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=Lo)},persist:function(){},isPersistent:Lo}),d}var Xn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Pr=Ka(Xn),bi=p({},Xn,{view:0,detail:0}),yi=Ka(bi),Xi,vi,Gi,Fr=p({},bi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ls,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==Gi&&(Gi&&l.type==="mousemove"?(Xi=l.screenX-Gi.screenX,vi=l.screenY-Gi.screenY):vi=Xi=0,Gi=l),Xi)},movementY:function(l){return"movementY"in l?l.movementY:vi}}),ji=Ka(Fr),Ni=p({},Fr,{dataTransfer:0}),uc=Ka(Ni),hc=p({},bi,{relatedTarget:0}),wi=Ka(hc),fc=p({},Xn,{animationName:0,elapsedTime:0,pseudoElement:0}),F=Ka(fc),oe=p({},Xn,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),_e=Ka(oe),Le=p({},Xn,{data:0}),ze=Ka(Le),ot={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Yt={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Gt(l){var d=this.nativeEvent;return d.getModifierState?d.getModifierState(l):(l=Yt[l])?!!d[l]:!1}function ls(){return Gt}var xs=p({},bi,{key:function(l){if(l.key){var d=ot[l.key]||l.key;if(d!=="Unidentified")return d}return l.type==="keypress"?(l=Lr(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?mt[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ls,charCode:function(l){return l.type==="keypress"?Lr(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?Lr(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),Vs=Ka(xs),sa=p({},Fr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Aa=Ka(sa),ha=p({},bi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ls}),Xa=Ka(ha),Ga=p({},Xn,{propertyName:0,elapsedTime:0,pseudoElement:0}),xn=Ka(Ga),Ir=p({},Fr,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),or=Ka(Ir),mc=p({},Xn,{newState:0,oldState:0}),eo=Ka(mc),to=[9,13,27,32],Gn=Fa&&"CompositionEvent"in window,bn=null;Fa&&"documentMode"in document&&(bn=document.documentMode);var so=Fa&&"TextEvent"in window&&!bn,ni=Fa&&(!Gn||bn&&8<bn&&11>=bn),yn=" ",Nl=!1;function wl(l,d){switch(l){case"keyup":return to.indexOf(d.keyCode)!==-1;case"keydown":return d.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Po(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var _i=!1;function Ia(l,d){switch(l){case"compositionend":return Po(d);case"keypress":return d.which!==32?null:(Nl=!0,yn);case"textInput":return l=d.data,l===yn&&Nl?null:l;default:return null}}function Qi(l,d){if(_i)return l==="compositionend"||!Gn&&wl(l,d)?(l=Jl(),Tr=xi=Kn=null,_i=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(d.ctrlKey||d.altKey||d.metaKey)||d.ctrlKey&&d.altKey){if(d.char&&1<d.char.length)return d.char;if(d.which)return String.fromCharCode(d.which)}return null;case"compositionend":return ni&&d.locale!=="ko"?null:d.data;default:return null}}var Fo={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Qn(l){var d=l&&l.nodeName&&l.nodeName.toLowerCase();return d==="input"?!!Fo[l.type]:d==="textarea"}function cr(l,d,f,x){es?gi?gi.push(x):gi=[x]:es=x,d=ap(d,"onChange"),0<d.length&&(f=new Pr("onChange","change",null,f,x),l.push({event:f,listeners:d}))}var Or=null,Si=null;function pc(l){Gj(l,0)}function ri(l){var d=Dr(l);if(vr(d))return l}function Ji(l,d){if(l==="change")return d}var vn=!1;if(Fa){var Jn;if(Fa){var Ci="oninput"in document;if(!Ci){var ii=document.createElement("div");ii.setAttribute("oninput","return;"),Ci=typeof ii.oninput=="function"}Jn=Ci}else Jn=!1;vn=Jn&&(!document.documentMode||9<document.documentMode)}function Zi(){Or&&(Or.detachEvent("onpropertychange",Io),Si=Or=null)}function Io(l){if(l.propertyName==="value"&&ri(Si)){var d=[];cr(d,Si,l,yl(l)),cc(pc,d)}}function ao(l,d,f){l==="focusin"?(Zi(),Or=d,Si=f,Or.attachEvent("onpropertychange",Io)):l==="focusout"&&Zi()}function Oa(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return ri(Si)}function gc(l,d){if(l==="click")return ri(d)}function jr(l,d){if(l==="input"||l==="change")return ri(d)}function li(l,d){return l===d&&(l!==0||1/l===1/d)||l!==l&&d!==d}var nn=typeof Object.is=="function"?Object.is:li;function Qa(l,d){if(nn(l,d))return!0;if(typeof l!="object"||l===null||typeof d!="object"||d===null)return!1;var f=Object.keys(l),x=Object.keys(d);if(f.length!==x.length)return!1;for(x=0;x<f.length;x++){var C=f[x];if(!ee.call(d,C)||!nn(l[C],d[C]))return!1}return!0}function Oo(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function Mo(l,d){var f=Oo(l);l=0;for(var x;f;){if(f.nodeType===3){if(x=l+f.textContent.length,l<=d&&x>=d)return{node:f,offset:d-l};l=x}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=Oo(f)}}function Ai(l,d){return l&&d?l===d?!0:l&&l.nodeType===3?!1:d&&d.nodeType===3?Ai(l,d.parentNode):"contains"in l?l.contains(d):l.compareDocumentPosition?!!(l.compareDocumentPosition(d)&16):!1:!1}function ki(l){l=l!=null&&l.ownerDocument!=null&&l.ownerDocument.defaultView!=null?l.ownerDocument.defaultView:window;for(var d=an(l.document);d instanceof l.HTMLIFrameElement;){try{var f=typeof d.contentWindow.location.href=="string"}catch{f=!1}if(f)l=d.contentWindow;else break;d=an(l.document)}return d}function Di(l){var d=l&&l.nodeName&&l.nodeName.toLowerCase();return d&&(d==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||d==="textarea"||l.contentEditable==="true")}var no=Fa&&"documentMode"in document&&11>=document.documentMode,Nr=null,el=null,Mn=null,Mr=!1;function Ws(l,d,f){var x=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;Mr||Nr==null||Nr!==an(x)||(x=Nr,"selectionStart"in x&&Di(x)?x={start:x.selectionStart,end:x.selectionEnd}:(x=(x.ownerDocument&&x.ownerDocument.defaultView||window).getSelection(),x={anchorNode:x.anchorNode,anchorOffset:x.anchorOffset,focusNode:x.focusNode,focusOffset:x.focusOffset}),Mn&&Qa(Mn,x)||(Mn=x,x=ap(el,"onSelect"),0<x.length&&(d=new Pr("onSelect","select",null,d,f),l.push({event:d,listeners:x}),d.target=Nr)))}function Ms(l,d){var f={};return f[l.toLowerCase()]=d.toLowerCase(),f["Webkit"+l]="webkit"+d,f["Moz"+l]="moz"+d,f}var na={animationend:Ms("Animation","AnimationEnd"),animationiteration:Ms("Animation","AnimationIteration"),animationstart:Ms("Animation","AnimationStart"),transitionrun:Ms("Transition","TransitionRun"),transitionstart:Ms("Transition","TransitionStart"),transitioncancel:Ms("Transition","TransitionCancel"),transitionend:Ms("Transition","TransitionEnd")},za={},Ei={};Fa&&(Ei=document.createElement("div").style,"AnimationEvent"in window||(delete na.animationend.animation,delete na.animationiteration.animation,delete na.animationstart.animation),"TransitionEvent"in window||delete na.transitionend.transition);function jn(l){if(za[l])return za[l];if(!na[l])return l;var d=na[l],f;for(f in d)if(d.hasOwnProperty(f)&&f in Ei)return za[l]=d[f];return l}var Zn=jn("animationend"),Ro=jn("animationiteration"),eu=jn("animationstart"),tu=jn("transitionrun"),su=jn("transitionstart"),au=jn("transitioncancel"),id=jn("transitionend"),nu=new Map,ro="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ro.push("scrollEnd");function Rr(l,d){nu.set(l,d),Fn(d,[l])}var Bo=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var d=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(d))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)},dr=[],io=0,ld=0;function xc(){for(var l=io,d=ld=io=0;d<l;){var f=dr[d];dr[d++]=null;var x=dr[d];dr[d++]=null;var C=dr[d];dr[d++]=null;var T=dr[d];if(dr[d++]=null,x!==null&&C!==null){var ae=x.pending;ae===null?C.next=C:(C.next=ae.next,ae.next=C),x.pending=C}T!==0&&zo(f,C,T)}}function bc(l,d,f,x){dr[io++]=l,dr[io++]=d,dr[io++]=f,dr[io++]=x,ld|=x,l.lanes|=x,l=l.alternate,l!==null&&(l.lanes|=x)}function od(l,d,f,x){return bc(l,d,f,x),Rn(l)}function Nn(l,d){return bc(l,null,null,d),Rn(l)}function zo(l,d,f){l.lanes|=f;var x=l.alternate;x!==null&&(x.lanes|=f);for(var C=!1,T=l.return;T!==null;)T.childLanes|=f,x=T.alternate,x!==null&&(x.childLanes|=f),T.tag===22&&(l=T.stateNode,l===null||l._visibility&1||(C=!0)),l=T,T=T.return;return l.tag===3?(T=l.stateNode,C&&d!==null&&(C=31-Re(f),l=T.hiddenUpdates,x=l[C],x===null?l[C]=[d]:x.push(d),d.lane=f|536870912),T):null}function Rn(l){if(50<bf)throw bf=0,Yx=null,Error(n(185));for(var d=l.return;d!==null;)l=d,d=l.return;return l.tag===3?l.stateNode:null}var wn={};function cd(l,d,f,x){this.tag=l,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=x,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bn(l,d,f,x){return new cd(l,d,f,x)}function dd(l){return l=l.prototype,!(!l||!l.isReactComponent)}function Br(l,d){var f=l.alternate;return f===null?(f=Bn(l.tag,d,l.key,l.mode),f.elementType=l.elementType,f.type=l.type,f.stateNode=l.stateNode,f.alternate=l,l.alternate=f):(f.pendingProps=d,f.type=l.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=l.flags&65011712,f.childLanes=l.childLanes,f.lanes=l.lanes,f.child=l.child,f.memoizedProps=l.memoizedProps,f.memoizedState=l.memoizedState,f.updateQueue=l.updateQueue,d=l.dependencies,f.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},f.sibling=l.sibling,f.index=l.index,f.ref=l.ref,f.refCleanup=l.refCleanup,f}function yc(l,d){l.flags&=65011714;var f=l.alternate;return f===null?(l.childLanes=0,l.lanes=d,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=f.childLanes,l.lanes=f.lanes,l.child=f.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=f.memoizedProps,l.memoizedState=f.memoizedState,l.updateQueue=f.updateQueue,l.type=f.type,d=f.dependencies,l.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext}),l}function qo(l,d,f,x,C,T){var ae=0;if(x=l,typeof l=="function")dd(l)&&(ae=1);else if(typeof l=="string")ae=lD(l,f,de.current)?26:l==="html"||l==="head"||l==="body"?27:5;else e:switch(l){case B:return l=Bn(31,f,d,C),l.elementType=B,l.lanes=T,l;case b:return Ti(f.children,C,T,d);case N:ae=8,C|=24;break;case v:return l=Bn(12,f,d,C|2),l.elementType=v,l.lanes=T,l;case z:return l=Bn(13,f,d,C),l.elementType=z,l.lanes=T,l;case V:return l=Bn(19,f,d,C),l.elementType=V,l.lanes=T,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case E:ae=10;break e;case S:ae=9;break e;case L:ae=11;break e;case te:ae=14;break e;case q:ae=16,x=null;break e}ae=29,f=Error(n(130,l===null?"null":typeof l,"")),x=null}return d=Bn(ae,f,d,C),d.elementType=l,d.type=x,d.lanes=T,d}function Ti(l,d,f,x){return l=Bn(7,l,x,d),l.lanes=f,l}function _l(l,d,f){return l=Bn(6,l,null,d),l.lanes=f,l}function ud(l){var d=Bn(18,null,null,0);return d.stateNode=l,d}function lo(l,d,f){return d=Bn(4,l.children!==null?l.children:[],l.key,d),d.lanes=f,d.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},d}var vc=new WeakMap;function zn(l,d){if(typeof l=="object"&&l!==null){var f=vc.get(l);return f!==void 0?f:(d={value:l,source:d,stack:xt(d)},vc.set(l,d),d)}return{value:l,source:d,stack:xt(d)}}var Sl=[],tl=0,hd=null,jc=0,zr=[],hn=0,Cl=null,qr=1,Ur="";function wr(l,d){Sl[tl++]=jc,Sl[tl++]=hd,hd=l,jc=d}function Nc(l,d,f){zr[hn++]=qr,zr[hn++]=Ur,zr[hn++]=Cl,Cl=l;var x=qr;l=Ur;var C=32-Re(x)-1;x&=~(1<<C),f+=1;var T=32-Re(d)+C;if(30<T){var ae=C-C%5;T=(x&(1<<ae)-1).toString(32),x>>=ae,C-=ae,qr=1<<32-Re(d)+C|f<<C|x,Ur=T+l}else qr=1<<T|f<<C|x,Ur=l}function wc(l){l.return!==null&&(wr(l,1),Nc(l,1,0))}function fd(l){for(;l===hd;)hd=Sl[--tl],Sl[tl]=null,jc=Sl[--tl],Sl[tl]=null;for(;l===Cl;)Cl=zr[--hn],zr[hn]=null,Ur=zr[--hn],zr[hn]=null,qr=zr[--hn],zr[hn]=null}function ru(l,d){zr[hn++]=qr,zr[hn++]=Ur,zr[hn++]=Cl,qr=d.id,Ur=d.overflow,Cl=l}var _n=null,ea=null,Ls=!1,qn=null,Ma=!1,oi=Error(n(519));function Al(l){var d=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Uo(zn(d,l)),oi}function oo(l){var d=l.stateNode,f=l.type,x=l.memoizedProps;switch(d[Zs]=l,d[Sa]=x,f){case"dialog":Us("cancel",d),Us("close",d);break;case"iframe":case"object":case"embed":Us("load",d);break;case"video":case"audio":for(f=0;f<vf.length;f++)Us(vf[f],d);break;case"source":Us("error",d);break;case"img":case"image":case"link":Us("error",d),Us("load",d);break;case"details":Us("toggle",d);break;case"input":Us("invalid",d),Do(d,x.value,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name,!0);break;case"select":Us("invalid",d);break;case"textarea":Us("invalid",d),bl(d,x.value,x.defaultValue,x.children)}f=x.children,typeof f!="string"&&typeof f!="number"&&typeof f!="bigint"||d.textContent===""+f||x.suppressHydrationWarning===!0||eN(d.textContent,f)?(x.popover!=null&&(Us("beforetoggle",d),Us("toggle",d)),x.onScroll!=null&&Us("scroll",d),x.onScrollEnd!=null&&Us("scrollend",d),x.onClick!=null&&(d.onclick=un),d=!0):d=!1,d||Al(l,!0)}function er(l){for(_n=l.return;_n;)switch(_n.tag){case 5:case 31:case 13:Ma=!1;return;case 27:case 3:Ma=!0;return;default:_n=_n.return}}function Sn(l){if(l!==_n)return!1;if(!Ls)return er(l),Ls=!0,!1;var d=l.tag,f;if((f=d!==3&&d!==27)&&((f=d===5)&&(f=l.type,f=!(f!=="form"&&f!=="button")||ob(l.type,l.memoizedProps)),f=!f),f&&ea&&Al(l),er(l),d===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(n(317));ea=cN(l)}else if(d===31){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(n(317));ea=cN(l)}else d===27?(d=ea,Ad(l.type)?(l=fb,fb=null,ea=l):ea=d):ea=_n?Ml(l.stateNode.nextSibling):null;return!0}function co(){ea=_n=null,Ls=!1}function iu(){var l=qn;return l!==null&&(Ri===null?Ri=l:Ri.push.apply(Ri,l),qn=null),l}function Uo(l){qn===null?qn=[l]:qn.push(l)}var md=D(null),kl=null,Li=null;function Dl(l,d,f){le(md,d._currentValue),d._currentValue=f}function _r(l){l._currentValue=md.current,U(md)}function Ho(l,d,f){for(;l!==null;){var x=l.alternate;if((l.childLanes&d)!==d?(l.childLanes|=d,x!==null&&(x.childLanes|=d)):x!==null&&(x.childLanes&d)!==d&&(x.childLanes|=d),l===f)break;l=l.return}}function El(l,d,f,x){var C=l.child;for(C!==null&&(C.return=l);C!==null;){var T=C.dependencies;if(T!==null){var ae=C.child;T=T.firstContext;e:for(;T!==null;){var pe=T;T=C;for(var Ee=0;Ee<d.length;Ee++)if(pe.context===d[Ee]){T.lanes|=f,pe=T.alternate,pe!==null&&(pe.lanes|=f),Ho(T.return,f,l),x||(ae=null);break e}T=pe.next}}else if(C.tag===18){if(ae=C.return,ae===null)throw Error(n(341));ae.lanes|=f,T=ae.alternate,T!==null&&(T.lanes|=f),Ho(ae,f,l),ae=null}else ae=C.child;if(ae!==null)ae.return=C;else for(ae=C;ae!==null;){if(ae===l){ae=null;break}if(C=ae.sibling,C!==null){C.return=ae.return,ae=C;break}ae=ae.return}C=ae}}function Pi(l,d,f,x){l=null;for(var C=d,T=!1;C!==null;){if(!T){if((C.flags&524288)!==0)T=!0;else if((C.flags&262144)!==0)break}if(C.tag===10){var ae=C.alternate;if(ae===null)throw Error(n(387));if(ae=ae.memoizedProps,ae!==null){var pe=C.type;nn(C.pendingProps.value,ae.value)||(l!==null?l.push(pe):l=[pe])}}else if(C===De.current){if(ae=C.alternate,ae===null)throw Error(n(387));ae.memoizedState.memoizedState!==C.memoizedState.memoizedState&&(l!==null?l.push(Sf):l=[Sf])}C=C.return}l!==null&&El(d,l,f,x),d.flags|=262144}function _c(l){for(l=l.firstContext;l!==null;){if(!nn(l.context._currentValue,l.memoizedValue))return!0;l=l.next}return!1}function ur(l){kl=l,Li=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function fn(l){return lu(kl,l)}function $o(l,d){return kl===null&&ur(l),lu(l,d)}function lu(l,d){var f=d._currentValue;if(d={context:d,memoizedValue:f,next:null},Li===null){if(l===null)throw Error(n(308));Li=d,l.dependencies={lanes:0,firstContext:d},l.flags|=524288}else Li=Li.next=d;return f}var ou=typeof AbortController<"u"?AbortController:function(){var l=[],d=this.signal={aborted:!1,addEventListener:function(f,x){l.push(x)}};this.abort=function(){d.aborted=!0,l.forEach(function(f){return f()})}},Ku=s.unstable_scheduleCallback,cu=s.unstable_NormalPriority,qa={$$typeof:E,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Hr(){return{controller:new ou,data:new Map,refCount:0}}function $r(l){l.refCount--,l.refCount===0&&Ku(cu,function(){l.controller.abort()})}var Sc=null,pd=0,w=0,k=null;function M(l,d){if(Sc===null){var f=Sc=[];pd=0,w=Zx(),k={status:"pending",value:void 0,then:function(x){f.push(x)}}}return pd++,d.then(Z,Z),d}function Z(){if(--pd===0&&Sc!==null){k!==null&&(k.status="fulfilled");var l=Sc;Sc=null,w=0,k=null;for(var d=0;d<l.length;d++)(0,l[d])()}}function ce(l,d){var f=[],x={status:"pending",value:null,reason:null,then:function(C){f.push(C)}};return l.then(function(){x.status="fulfilled",x.value=d;for(var C=0;C<f.length;C++)(0,f[C])(d)},function(C){for(x.status="rejected",x.reason=C,C=0;C<f.length;C++)(0,f[C])(void 0)}),x}var ue=R.S;R.S=function(l,d){_j=Mt(),typeof d=="object"&&d!==null&&typeof d.then=="function"&&M(l,d),ue!==null&&ue(l,d)};var he=D(null);function ge(){var l=he.current;return l!==null?l:Ea.pooledCache}function xe(l,d){d===null?le(he,he.current):le(he,d.pool)}function we(){var l=ge();return l===null?null:{parent:qa._currentValue,pool:l}}var Fe=Error(n(460)),$e=Error(n(474)),O=Error(n(542)),_={then:function(){}};function I(l){return l=l.status,l==="fulfilled"||l==="rejected"}function ie(l,d,f){switch(f=l[f],f===void 0?l.push(d):f!==d&&(d.then(un,un),d=f),d.status){case"fulfilled":return d.value;case"rejected":throw l=d.reason,Oe(l),l;default:if(typeof d.status=="string")d.then(un,un);else{if(l=Ea,l!==null&&100<l.shellSuspendCounter)throw Error(n(482));l=d,l.status="pending",l.then(function(x){if(d.status==="pending"){var C=d;C.status="fulfilled",C.value=x}},function(x){if(d.status==="pending"){var C=d;C.status="rejected",C.reason=x}})}switch(d.status){case"fulfilled":return d.value;case"rejected":throw l=d.reason,Oe(l),l}throw ye=d,Fe}}function fe(l){try{var d=l._init;return d(l._payload)}catch(f){throw f!==null&&typeof f=="object"&&typeof f.then=="function"?(ye=f,Fe):f}}var ye=null;function Ae(){if(ye===null)throw Error(n(459));var l=ye;return ye=null,l}function Oe(l){if(l===Fe||l===O)throw Error(n(483))}var Be=null,it=0;function nt(l){var d=it;return it+=1,Be===null&&(Be=[]),ie(Be,l,d)}function dt(l,d){d=d.props.ref,l.ref=d!==void 0?d:null}function gt(l,d){throw d.$$typeof===y?Error(n(525)):(l=Object.prototype.toString.call(d),Error(n(31,l==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":l)))}function St(l){function d(qe,Me){if(l){var We=qe.deletions;We===null?(qe.deletions=[Me],qe.flags|=16):We.push(Me)}}function f(qe,Me){if(!l)return null;for(;Me!==null;)d(qe,Me),Me=Me.sibling;return null}function x(qe){for(var Me=new Map;qe!==null;)qe.key!==null?Me.set(qe.key,qe):Me.set(qe.index,qe),qe=qe.sibling;return Me}function C(qe,Me){return qe=Br(qe,Me),qe.index=0,qe.sibling=null,qe}function T(qe,Me,We){return qe.index=We,l?(We=qe.alternate,We!==null?(We=We.index,We<Me?(qe.flags|=67108866,Me):We):(qe.flags|=67108866,Me)):(qe.flags|=1048576,Me)}function ae(qe){return l&&qe.alternate===null&&(qe.flags|=67108866),qe}function pe(qe,Me,We,ut){return Me===null||Me.tag!==6?(Me=_l(We,qe.mode,ut),Me.return=qe,Me):(Me=C(Me,We),Me.return=qe,Me)}function Ee(qe,Me,We,ut){var ns=We.type;return ns===b?ct(qe,Me,We.props.children,ut,We.key):Me!==null&&(Me.elementType===ns||typeof ns=="object"&&ns!==null&&ns.$$typeof===q&&fe(ns)===Me.type)?(Me=C(Me,We.props),dt(Me,We),Me.return=qe,Me):(Me=qo(We.type,We.key,We.props,null,qe.mode,ut),dt(Me,We),Me.return=qe,Me)}function Ke(qe,Me,We,ut){return Me===null||Me.tag!==4||Me.stateNode.containerInfo!==We.containerInfo||Me.stateNode.implementation!==We.implementation?(Me=lo(We,qe.mode,ut),Me.return=qe,Me):(Me=C(Me,We.children||[]),Me.return=qe,Me)}function ct(qe,Me,We,ut,ns){return Me===null||Me.tag!==7?(Me=Ti(We,qe.mode,ut,ns),Me.return=qe,Me):(Me=C(Me,We),Me.return=qe,Me)}function ft(qe,Me,We){if(typeof Me=="string"&&Me!==""||typeof Me=="number"||typeof Me=="bigint")return Me=_l(""+Me,qe.mode,We),Me.return=qe,Me;if(typeof Me=="object"&&Me!==null){switch(Me.$$typeof){case g:return We=qo(Me.type,Me.key,Me.props,null,qe.mode,We),dt(We,Me),We.return=qe,We;case j:return Me=lo(Me,qe.mode,We),Me.return=qe,Me;case q:return Me=fe(Me),ft(qe,Me,We)}if(X(Me)||K(Me))return Me=Ti(Me,qe.mode,We,null),Me.return=qe,Me;if(typeof Me.then=="function")return ft(qe,nt(Me),We);if(Me.$$typeof===E)return ft(qe,$o(qe,Me),We);gt(qe,Me)}return null}function Ge(qe,Me,We,ut){var ns=Me!==null?Me.key:null;if(typeof We=="string"&&We!==""||typeof We=="number"||typeof We=="bigint")return ns!==null?null:pe(qe,Me,""+We,ut);if(typeof We=="object"&&We!==null){switch(We.$$typeof){case g:return We.key===ns?Ee(qe,Me,We,ut):null;case j:return We.key===ns?Ke(qe,Me,We,ut):null;case q:return We=fe(We),Ge(qe,Me,We,ut)}if(X(We)||K(We))return ns!==null?null:ct(qe,Me,We,ut,null);if(typeof We.then=="function")return Ge(qe,Me,nt(We),ut);if(We.$$typeof===E)return Ge(qe,Me,$o(qe,We),ut);gt(qe,We)}return null}function at(qe,Me,We,ut,ns){if(typeof ut=="string"&&ut!==""||typeof ut=="number"||typeof ut=="bigint")return qe=qe.get(We)||null,pe(Me,qe,""+ut,ns);if(typeof ut=="object"&&ut!==null){switch(ut.$$typeof){case g:return qe=qe.get(ut.key===null?We:ut.key)||null,Ee(Me,qe,ut,ns);case j:return qe=qe.get(ut.key===null?We:ut.key)||null,Ke(Me,qe,ut,ns);case q:return ut=fe(ut),at(qe,Me,We,ut,ns)}if(X(ut)||K(ut))return qe=qe.get(We)||null,ct(Me,qe,ut,ns,null);if(typeof ut.then=="function")return at(qe,Me,We,nt(ut),ns);if(ut.$$typeof===E)return at(qe,Me,We,$o(Me,ut),ns);gt(Me,ut)}return null}function Kt(qe,Me,We,ut){for(var ns=null,ra=null,Qt=Me,Ps=Me=0,Qs=null;Qt!==null&&Ps<We.length;Ps++){Qt.index>Ps?(Qs=Qt,Qt=null):Qs=Qt.sibling;var ia=Ge(qe,Qt,We[Ps],ut);if(ia===null){Qt===null&&(Qt=Qs);break}l&&Qt&&ia.alternate===null&&d(qe,Qt),Me=T(ia,Me,Ps),ra===null?ns=ia:ra.sibling=ia,ra=ia,Qt=Qs}if(Ps===We.length)return f(qe,Qt),Ls&&wr(qe,Ps),ns;if(Qt===null){for(;Ps<We.length;Ps++)Qt=ft(qe,We[Ps],ut),Qt!==null&&(Me=T(Qt,Me,Ps),ra===null?ns=Qt:ra.sibling=Qt,ra=Qt);return Ls&&wr(qe,Ps),ns}for(Qt=x(Qt);Ps<We.length;Ps++)Qs=at(Qt,qe,Ps,We[Ps],ut),Qs!==null&&(l&&Qs.alternate!==null&&Qt.delete(Qs.key===null?Ps:Qs.key),Me=T(Qs,Me,Ps),ra===null?ns=Qs:ra.sibling=Qs,ra=Qs);return l&&Qt.forEach(function(Ld){return d(qe,Ld)}),Ls&&wr(qe,Ps),ns}function hs(qe,Me,We,ut){if(We==null)throw Error(n(151));for(var ns=null,ra=null,Qt=Me,Ps=Me=0,Qs=null,ia=We.next();Qt!==null&&!ia.done;Ps++,ia=We.next()){Qt.index>Ps?(Qs=Qt,Qt=null):Qs=Qt.sibling;var Ld=Ge(qe,Qt,ia.value,ut);if(Ld===null){Qt===null&&(Qt=Qs);break}l&&Qt&&Ld.alternate===null&&d(qe,Qt),Me=T(Ld,Me,Ps),ra===null?ns=Ld:ra.sibling=Ld,ra=Ld,Qt=Qs}if(ia.done)return f(qe,Qt),Ls&&wr(qe,Ps),ns;if(Qt===null){for(;!ia.done;Ps++,ia=We.next())ia=ft(qe,ia.value,ut),ia!==null&&(Me=T(ia,Me,Ps),ra===null?ns=ia:ra.sibling=ia,ra=ia);return Ls&&wr(qe,Ps),ns}for(Qt=x(Qt);!ia.done;Ps++,ia=We.next())ia=at(Qt,qe,Ps,ia.value,ut),ia!==null&&(l&&ia.alternate!==null&&Qt.delete(ia.key===null?Ps:ia.key),Me=T(ia,Me,Ps),ra===null?ns=ia:ra.sibling=ia,ra=ia);return l&&Qt.forEach(function(bD){return d(qe,bD)}),Ls&&wr(qe,Ps),ns}function _a(qe,Me,We,ut){if(typeof We=="object"&&We!==null&&We.type===b&&We.key===null&&(We=We.props.children),typeof We=="object"&&We!==null){switch(We.$$typeof){case g:e:{for(var ns=We.key;Me!==null;){if(Me.key===ns){if(ns=We.type,ns===b){if(Me.tag===7){f(qe,Me.sibling),ut=C(Me,We.props.children),ut.return=qe,qe=ut;break e}}else if(Me.elementType===ns||typeof ns=="object"&&ns!==null&&ns.$$typeof===q&&fe(ns)===Me.type){f(qe,Me.sibling),ut=C(Me,We.props),dt(ut,We),ut.return=qe,qe=ut;break e}f(qe,Me);break}else d(qe,Me);Me=Me.sibling}We.type===b?(ut=Ti(We.props.children,qe.mode,ut,We.key),ut.return=qe,qe=ut):(ut=qo(We.type,We.key,We.props,null,qe.mode,ut),dt(ut,We),ut.return=qe,qe=ut)}return ae(qe);case j:e:{for(ns=We.key;Me!==null;){if(Me.key===ns)if(Me.tag===4&&Me.stateNode.containerInfo===We.containerInfo&&Me.stateNode.implementation===We.implementation){f(qe,Me.sibling),ut=C(Me,We.children||[]),ut.return=qe,qe=ut;break e}else{f(qe,Me);break}else d(qe,Me);Me=Me.sibling}ut=lo(We,qe.mode,ut),ut.return=qe,qe=ut}return ae(qe);case q:return We=fe(We),_a(qe,Me,We,ut)}if(X(We))return Kt(qe,Me,We,ut);if(K(We)){if(ns=K(We),typeof ns!="function")throw Error(n(150));return We=ns.call(We),hs(qe,Me,We,ut)}if(typeof We.then=="function")return _a(qe,Me,nt(We),ut);if(We.$$typeof===E)return _a(qe,Me,$o(qe,We),ut);gt(qe,We)}return typeof We=="string"&&We!==""||typeof We=="number"||typeof We=="bigint"?(We=""+We,Me!==null&&Me.tag===6?(f(qe,Me.sibling),ut=C(Me,We),ut.return=qe,qe=ut):(f(qe,Me),ut=_l(We,qe.mode,ut),ut.return=qe,qe=ut),ae(qe)):f(qe,Me)}return function(qe,Me,We,ut){try{it=0;var ns=_a(qe,Me,We,ut);return Be=null,ns}catch(Qt){if(Qt===Fe||Qt===O)throw Qt;var ra=Bn(29,Qt,null,qe.mode);return ra.lanes=ut,ra.return=qe,ra}finally{}}}var Ut=St(!0),jt=St(!1),ht=!1;function pt(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function os(l,d){l=l.updateQueue,d.updateQueue===l&&(d.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function Nt(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function Ot(l,d,f){var x=l.updateQueue;if(x===null)return null;if(x=x.shared,(ca&2)!==0){var C=x.pending;return C===null?d.next=d:(d.next=C.next,C.next=d),x.pending=d,d=Rn(l),zo(l,null,f),d}return bc(l,x,d,f),Rn(l)}function Ht(l,d,f){if(d=d.updateQueue,d!==null&&(d=d.shared,(f&4194048)!==0)){var x=d.lanes;x&=l.pendingLanes,f|=x,d.lanes=f,Ts(l,f)}}function ss(l,d){var f=l.updateQueue,x=l.alternate;if(x!==null&&(x=x.updateQueue,f===x)){var C=null,T=null;if(f=f.firstBaseUpdate,f!==null){do{var ae={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};T===null?C=T=ae:T=T.next=ae,f=f.next}while(f!==null);T===null?C=T=d:T=T.next=d}else C=T=d;f={baseState:x.baseState,firstBaseUpdate:C,lastBaseUpdate:T,shared:x.shared,callbacks:x.callbacks},l.updateQueue=f;return}l=f.lastBaseUpdate,l===null?f.firstBaseUpdate=d:l.next=d,f.lastBaseUpdate=d}var bs=!1;function as(){if(bs){var l=k;if(l!==null)throw l}}function cs(l,d,f,x){bs=!1;var C=l.updateQueue;ht=!1;var T=C.firstBaseUpdate,ae=C.lastBaseUpdate,pe=C.shared.pending;if(pe!==null){C.shared.pending=null;var Ee=pe,Ke=Ee.next;Ee.next=null,ae===null?T=Ke:ae.next=Ke,ae=Ee;var ct=l.alternate;ct!==null&&(ct=ct.updateQueue,pe=ct.lastBaseUpdate,pe!==ae&&(pe===null?ct.firstBaseUpdate=Ke:pe.next=Ke,ct.lastBaseUpdate=Ee))}if(T!==null){var ft=C.baseState;ae=0,ct=Ke=Ee=null,pe=T;do{var Ge=pe.lane&-536870913,at=Ge!==pe.lane;if(at?(Gs&Ge)===Ge:(x&Ge)===Ge){Ge!==0&&Ge===w&&(bs=!0),ct!==null&&(ct=ct.next={lane:0,tag:pe.tag,payload:pe.payload,callback:null,next:null});e:{var Kt=l,hs=pe;Ge=d;var _a=f;switch(hs.tag){case 1:if(Kt=hs.payload,typeof Kt=="function"){ft=Kt.call(_a,ft,Ge);break e}ft=Kt;break e;case 3:Kt.flags=Kt.flags&-65537|128;case 0:if(Kt=hs.payload,Ge=typeof Kt=="function"?Kt.call(_a,ft,Ge):Kt,Ge==null)break e;ft=p({},ft,Ge);break e;case 2:ht=!0}}Ge=pe.callback,Ge!==null&&(l.flags|=64,at&&(l.flags|=8192),at=C.callbacks,at===null?C.callbacks=[Ge]:at.push(Ge))}else at={lane:Ge,tag:pe.tag,payload:pe.payload,callback:pe.callback,next:null},ct===null?(Ke=ct=at,Ee=ft):ct=ct.next=at,ae|=Ge;if(pe=pe.next,pe===null){if(pe=C.shared.pending,pe===null)break;at=pe,pe=at.next,at.next=null,C.lastBaseUpdate=at,C.shared.pending=null}}while(!0);ct===null&&(Ee=ft),C.baseState=Ee,C.firstBaseUpdate=Ke,C.lastBaseUpdate=ct,T===null&&(C.shared.lanes=0),Nd|=ae,l.lanes=ae,l.memoizedState=ft}}function Is(l,d){if(typeof l!="function")throw Error(n(191,l));l.call(d)}function Ys(l,d){var f=l.callbacks;if(f!==null)for(l.callbacks=null,l=0;l<f.length;l++)Is(f[l],d)}var ds=D(null),fs=D(0);function Rs(l,d){l=Rc,le(fs,l),le(ds,d),Rc=l|d.baseLanes}function Ns(){le(fs,Rc),le(ds,ds.current)}function _s(){Rc=fs.current,U(ds),U(fs)}var Ks=D(null),ws=null;function fa(l){var d=l.alternate;le(Ss,Ss.current&1),le(Ks,l),ws===null&&(d===null||ds.current!==null||d.memoizedState!==null)&&(ws=l)}function ms(l){le(Ss,Ss.current),le(Ks,l),ws===null&&(ws=l)}function ps(l){l.tag===22?(le(Ss,Ss.current),le(Ks,l),ws===null&&(ws=l)):Bs()}function Bs(){le(Ss,Ss.current),le(Ks,Ks.current)}function Ds(l){U(Ks),ws===l&&(ws=null),U(Ss)}var Ss=D(0);function rn(l){for(var d=l;d!==null;){if(d.tag===13){var f=d.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||ub(f)||hb(f)))return d}else if(d.tag===19&&(d.memoizedProps.revealOrder==="forwards"||d.memoizedProps.revealOrder==="backwards"||d.memoizedProps.revealOrder==="unstable_legacy-backwards"||d.memoizedProps.revealOrder==="together")){if((d.flags&128)!==0)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}var ka=0,Zt=null,Jt=null,Xs=null,hr=!1,fr=!1,tr=!1,Ua=0,Tl=0,sl=null,Cc=0;function ma(){throw Error(n(321))}function du(l,d){if(d===null)return!1;for(var f=0;f<d.length&&f<l.length;f++)if(!nn(l[f],d[f]))return!1;return!0}function al(l,d,f,x,C,T){return ka=T,Zt=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,R.H=l===null||l.memoizedState===null?I0:Nx,tr=!1,T=f(x,C),tr=!1,fr&&(T=Fi(d,f,x,C)),uo(l),T}function uo(l){R.H=cf;var d=Jt!==null&&Jt.next!==null;if(ka=0,Xs=Jt=Zt=null,hr=!1,Tl=0,sl=null,d)throw Error(n(300));l===null||Un||(l=l.dependencies,l!==null&&_c(l)&&(Un=!0))}function Fi(l,d,f,x){Zt=l;var C=0;do{if(fr&&(sl=null),Tl=0,fr=!1,25<=C)throw Error(n(301));if(C+=1,Xs=Jt=null,l.updateQueue!=null){var T=l.updateQueue;T.lastEffect=null,T.events=null,T.stores=null,T.memoCache!=null&&(T.memoCache.index=0)}R.H=O0,T=d(f,x)}while(fr);return T}function Xu(){var l=R.H,d=l.useState()[0];return d=typeof d.then=="function"?Ll(d):d,l=l.useState()[0],(Jt!==null?Jt.memoizedState:null)!==l&&(Zt.flags|=1024),d}function Ac(){var l=Ua!==0;return Ua=0,l}function gd(l,d,f){d.updateQueue=l.updateQueue,d.flags&=-2053,l.lanes&=~f}function kc(l){if(hr){for(l=l.memoizedState;l!==null;){var d=l.queue;d!==null&&(d.pending=null),l=l.next}hr=!1}ka=0,Xs=Jt=Zt=null,fr=!1,Tl=Ua=0,sl=null}function ln(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xs===null?Zt.memoizedState=Xs=l:Xs=Xs.next=l,Xs}function Da(){if(Jt===null){var l=Zt.alternate;l=l!==null?l.memoizedState:null}else l=Jt.next;var d=Xs===null?Zt.memoizedState:Xs.next;if(d!==null)Xs=d,Jt=l;else{if(l===null)throw Zt.alternate===null?Error(n(467)):Error(n(310));Jt=l,l={memoizedState:Jt.memoizedState,baseState:Jt.baseState,baseQueue:Jt.baseQueue,queue:Jt.queue,next:null},Xs===null?Zt.memoizedState=Xs=l:Xs=Xs.next=l}return Xs}function Dc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ll(l){var d=Tl;return Tl+=1,sl===null&&(sl=[]),l=ie(sl,l,d),d=Zt,(Xs===null?d.memoizedState:Xs.next)===null&&(d=d.alternate,R.H=d===null||d.memoizedState===null?I0:Nx),l}function Pl(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return Ll(l);if(l.$$typeof===E)return fn(l)}throw Error(n(438,String(l)))}function Fl(l){var d=null,f=Zt.updateQueue;if(f!==null&&(d=f.memoCache),d==null){var x=Zt.alternate;x!==null&&(x=x.updateQueue,x!==null&&(x=x.memoCache,x!=null&&(d={data:x.data.map(function(C){return C.slice()}),index:0})))}if(d==null&&(d={data:[],index:0}),f===null&&(f=Dc(),Zt.updateQueue=f),f.memoCache=d,f=d.data[d.index],f===void 0)for(f=d.data[d.index]=Array(l),x=0;x<l;x++)f[x]=J;return d.index++,f}function Il(l,d){return typeof d=="function"?d(l):d}function Gu(l){var d=Da();return xd(d,Jt,l)}function xd(l,d,f){var x=l.queue;if(x===null)throw Error(n(311));x.lastRenderedReducer=f;var C=l.baseQueue,T=x.pending;if(T!==null){if(C!==null){var ae=C.next;C.next=T.next,T.next=ae}d.baseQueue=C=T,x.pending=null}if(T=l.baseState,C===null)l.memoizedState=T;else{d=C.next;var pe=ae=null,Ee=null,Ke=d,ct=!1;do{var ft=Ke.lane&-536870913;if(ft!==Ke.lane?(Gs&ft)===ft:(ka&ft)===ft){var Ge=Ke.revertLane;if(Ge===0)Ee!==null&&(Ee=Ee.next={lane:0,revertLane:0,gesture:null,action:Ke.action,hasEagerState:Ke.hasEagerState,eagerState:Ke.eagerState,next:null}),ft===w&&(ct=!0);else if((ka&Ge)===Ge){Ke=Ke.next,Ge===w&&(ct=!0);continue}else ft={lane:0,revertLane:Ke.revertLane,gesture:null,action:Ke.action,hasEagerState:Ke.hasEagerState,eagerState:Ke.eagerState,next:null},Ee===null?(pe=Ee=ft,ae=T):Ee=Ee.next=ft,Zt.lanes|=Ge,Nd|=Ge;ft=Ke.action,tr&&f(T,ft),T=Ke.hasEagerState?Ke.eagerState:f(T,ft)}else Ge={lane:ft,revertLane:Ke.revertLane,gesture:Ke.gesture,action:Ke.action,hasEagerState:Ke.hasEagerState,eagerState:Ke.eagerState,next:null},Ee===null?(pe=Ee=Ge,ae=T):Ee=Ee.next=Ge,Zt.lanes|=ft,Nd|=ft;Ke=Ke.next}while(Ke!==null&&Ke!==d);if(Ee===null?ae=T:Ee.next=pe,!nn(T,l.memoizedState)&&(Un=!0,ct&&(f=k,f!==null)))throw f;l.memoizedState=T,l.baseState=ae,l.baseQueue=Ee,x.lastRenderedState=T}return C===null&&(x.lanes=0),[l.memoizedState,x.dispatch]}function Qu(l){var d=Da(),f=d.queue;if(f===null)throw Error(n(311));f.lastRenderedReducer=l;var x=f.dispatch,C=f.pending,T=d.memoizedState;if(C!==null){f.pending=null;var ae=C=C.next;do T=l(T,ae.action),ae=ae.next;while(ae!==C);nn(T,d.memoizedState)||(Un=!0),d.memoizedState=T,d.baseQueue===null&&(d.baseState=T),f.lastRenderedState=T}return[T,x]}function Ju(l,d,f){var x=Zt,C=Da(),T=Ls;if(T){if(f===void 0)throw Error(n(407));f=f()}else f=d();var ae=!nn((Jt||C).memoizedState,f);if(ae&&(C.memoizedState=f,Un=!0),C=C.queue,gx(nf.bind(null,x,C,l),[l]),C.getSnapshot!==d||ae||Xs!==null&&Xs.memoizedState.tag&1){if(x.flags|=2048,Tc(9,{destroy:void 0},af.bind(null,x,C,f,d),null),Ea===null)throw Error(n(349));T||(ka&127)!==0||ho(x,d,f)}return f}function ho(l,d,f){l.flags|=16384,l={getSnapshot:d,value:f},d=Zt.updateQueue,d===null?(d=Dc(),Zt.updateQueue=d,d.stores=[l]):(f=d.stores,f===null?d.stores=[l]:f.push(l))}function af(l,d,f,x){d.value=f,d.getSnapshot=x,Lm(d)&&rf(l)}function nf(l,d,f){return f(function(){Lm(d)&&rf(l)})}function Lm(l){var d=l.getSnapshot;l=l.value;try{var f=d();return!nn(l,f)}catch{return!0}}function rf(l){var d=Nn(l,2);d!==null&&Bi(d,l,2)}function Vo(l){var d=ln();if(typeof l=="function"){var f=l;if(l=f(),tr){be(!0);try{f()}finally{be(!1)}}}return d.memoizedState=d.baseState=l,d.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Il,lastRenderedState:l},d}function Pm(l,d,f,x){return l.baseState=f,xd(l,Jt,typeof x=="function"?x:Il)}function Fm(l,d,f,x,C){if(Rm(l))throw Error(n(485));if(l=d.action,l!==null){var T={payload:C,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(ae){T.listeners.push(ae)}};R.T!==null?f(!0):T.isTransition=!1,x(T),f=d.pending,f===null?(T.next=d.pending=T,Im(d,T)):(T.next=f.next,d.pending=f.next=T)}}function Im(l,d){var f=d.action,x=d.payload,C=l.state;if(d.isTransition){var T=R.T,ae={};R.T=ae;try{var pe=f(C,x),Ee=R.S;Ee!==null&&Ee(ae,pe),lf(l,d,pe)}catch(Ke){Ec(l,d,Ke)}finally{T!==null&&ae.types!==null&&(T.types=ae.types),R.T=T}}else try{T=f(C,x),lf(l,d,T)}catch(Ke){Ec(l,d,Ke)}}function lf(l,d,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(x){Om(l,d,x)},function(x){return Ec(l,d,x)}):Om(l,d,f)}function Om(l,d,f){d.status="fulfilled",d.value=f,Zu(d),l.state=f,d=l.pending,d!==null&&(f=d.next,f===d?l.pending=null:(f=f.next,d.next=f,Im(l,f)))}function Ec(l,d,f){var x=l.pending;if(l.pending=null,x!==null){x=x.next;do d.status="rejected",d.reason=f,Zu(d),d=d.next;while(d!==x)}l.action=null}function Zu(l){l=l.listeners;for(var d=0;d<l.length;d++)(0,l[d])()}function uu(l,d){return d}function Ol(l,d){if(Ls){var f=Ea.formState;if(f!==null){e:{var x=Zt;if(Ls){if(ea){t:{for(var C=ea,T=Ma;C.nodeType!==8;){if(!T){C=null;break t}if(C=Ml(C.nextSibling),C===null){C=null;break t}}T=C.data,C=T==="F!"||T==="F"?C:null}if(C){ea=Ml(C.nextSibling),x=C.data==="F!";break e}}Al(x)}x=!1}x&&(d=f[0])}}return f=ln(),f.memoizedState=f.baseState=d,x={pending:null,lanes:0,dispatch:null,lastRenderedReducer:uu,lastRenderedState:d},f.queue=x,f=L0.bind(null,Zt,x),x.dispatch=f,x=Vo(!1),T=jx.bind(null,Zt,!1,x.queue),x=ln(),C={state:d,dispatch:null,action:l,pending:null},x.queue=C,f=Fm.bind(null,Zt,C,T,f),C.dispatch=f,x.memoizedState=l,[d,f,!1]}function fo(l){var d=Da();return mo(d,Jt,l)}function mo(l,d,f){if(d=xd(l,d,uu)[0],l=Gu(Il)[0],typeof d=="object"&&d!==null&&typeof d.then=="function")try{var x=Ll(d)}catch(ae){throw ae===Fe?O:ae}else x=d;d=Da();var C=d.queue,T=C.dispatch;return f!==d.memoizedState&&(Zt.flags|=2048,Tc(9,{destroy:void 0},eh.bind(null,C,f),null)),[x,T,l]}function eh(l,d){l.action=d}function th(l){var d=Da(),f=Jt;if(f!==null)return mo(d,f,l);Da(),d=d.memoizedState,f=Da();var x=f.queue.dispatch;return f.memoizedState=l,[d,x,!1]}function Tc(l,d,f,x){return l={tag:l,create:f,deps:x,inst:d,next:null},d=Zt.updateQueue,d===null&&(d=Dc(),Zt.updateQueue=d),f=d.lastEffect,f===null?d.lastEffect=l.next=l:(x=f.next,f.next=l,l.next=x,d.lastEffect=l),l}function Mm(){return Da().memoizedState}function bd(l,d,f,x){var C=ln();Zt.flags|=l,C.memoizedState=Tc(1|d,{destroy:void 0},f,x===void 0?null:x)}function yd(l,d,f,x){var C=Da();x=x===void 0?null:x;var T=C.memoizedState.inst;Jt!==null&&x!==null&&du(x,Jt.memoizedState.deps)?C.memoizedState=Tc(d,T,f,x):(Zt.flags|=l,C.memoizedState=Tc(1|d,T,f,x))}function b0(l,d){bd(8390656,8,l,d)}function gx(l,d){yd(2048,8,l,d)}function hk(l){Zt.flags|=4;var d=Zt.updateQueue;if(d===null)d=Dc(),Zt.updateQueue=d,d.events=[l];else{var f=d.events;f===null?d.events=[l]:f.push(l)}}function y0(l){var d=Da().memoizedState;return hk({ref:d,nextImpl:l}),function(){if((ca&2)!==0)throw Error(n(440));return d.impl.apply(void 0,arguments)}}function v0(l,d){return yd(4,2,l,d)}function j0(l,d){return yd(4,4,l,d)}function N0(l,d){if(typeof d=="function"){l=l();var f=d(l);return function(){typeof f=="function"?f():d(null)}}if(d!=null)return l=l(),d.current=l,function(){d.current=null}}function w0(l,d,f){f=f!=null?f.concat([l]):null,yd(4,4,N0.bind(null,d,l),f)}function xx(){}function _0(l,d){var f=Da();d=d===void 0?null:d;var x=f.memoizedState;return d!==null&&du(d,x[1])?x[0]:(f.memoizedState=[l,d],l)}function S0(l,d){var f=Da();d=d===void 0?null:d;var x=f.memoizedState;if(d!==null&&du(d,x[1]))return x[0];if(x=l(),tr){be(!0);try{l()}finally{be(!1)}}return f.memoizedState=[x,d],x}function bx(l,d,f){return f===void 0||(ka&1073741824)!==0&&(Gs&261930)===0?l.memoizedState=d:(l.memoizedState=f,l=Cj(),Zt.lanes|=l,Nd|=l,f)}function C0(l,d,f,x){return nn(f,d)?f:ds.current!==null?(l=bx(l,f,x),nn(l,d)||(Un=!0),l):(ka&42)===0||(ka&1073741824)!==0&&(Gs&261930)===0?(Un=!0,l.memoizedState=f):(l=Cj(),Zt.lanes|=l,Nd|=l,d)}function A0(l,d,f,x,C){var T=Q.p;Q.p=T!==0&&8>T?T:8;var ae=R.T,pe={};R.T=pe,jx(l,!1,d,f);try{var Ee=C(),Ke=R.S;if(Ke!==null&&Ke(pe,Ee),Ee!==null&&typeof Ee=="object"&&typeof Ee.then=="function"){var ct=ce(Ee,x);of(l,d,ct,il(l))}else of(l,d,x,il(l))}catch(ft){of(l,d,{then:function(){},status:"rejected",reason:ft},il())}finally{Q.p=T,ae!==null&&pe.types!==null&&(ae.types=pe.types),R.T=ae}}function fk(){}function yx(l,d,f,x){if(l.tag!==5)throw Error(n(476));var C=k0(l).queue;A0(l,C,d,Y,f===null?fk:function(){return D0(l),f(x)})}function k0(l){var d=l.memoizedState;if(d!==null)return d;d={memoizedState:Y,baseState:Y,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Il,lastRenderedState:Y},next:null};var f={};return d.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Il,lastRenderedState:f},next:null},l.memoizedState=d,l=l.alternate,l!==null&&(l.memoizedState=d),d}function D0(l){var d=k0(l);d.next===null&&(d=l.alternate.memoizedState),of(l,d.next.queue,{},il())}function vx(){return fn(Sf)}function E0(){return Da().memoizedState}function T0(){return Da().memoizedState}function mk(l){for(var d=l.return;d!==null;){switch(d.tag){case 24:case 3:var f=il();l=Nt(f);var x=Ot(d,l,f);x!==null&&(Bi(x,d,f),Ht(x,d,f)),d={cache:Hr()},l.payload=d;return}d=d.return}}function pk(l,d,f){var x=il();f={lane:x,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},Rm(l)?P0(d,f):(f=od(l,d,f,x),f!==null&&(Bi(f,l,x),F0(f,d,x)))}function L0(l,d,f){var x=il();of(l,d,f,x)}function of(l,d,f,x){var C={lane:x,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null};if(Rm(l))P0(d,C);else{var T=l.alternate;if(l.lanes===0&&(T===null||T.lanes===0)&&(T=d.lastRenderedReducer,T!==null))try{var ae=d.lastRenderedState,pe=T(ae,f);if(C.hasEagerState=!0,C.eagerState=pe,nn(pe,ae))return bc(l,d,C,0),Ea===null&&xc(),!1}catch{}finally{}if(f=od(l,d,C,x),f!==null)return Bi(f,l,x),F0(f,d,x),!0}return!1}function jx(l,d,f,x){if(x={lane:2,revertLane:Zx(),gesture:null,action:x,hasEagerState:!1,eagerState:null,next:null},Rm(l)){if(d)throw Error(n(479))}else d=od(l,f,x,2),d!==null&&Bi(d,l,2)}function Rm(l){var d=l.alternate;return l===Zt||d!==null&&d===Zt}function P0(l,d){fr=hr=!0;var f=l.pending;f===null?d.next=d:(d.next=f.next,f.next=d),l.pending=d}function F0(l,d,f){if((f&4194048)!==0){var x=d.lanes;x&=l.pendingLanes,f|=x,d.lanes=f,Ts(l,f)}}var cf={readContext:fn,use:Pl,useCallback:ma,useContext:ma,useEffect:ma,useImperativeHandle:ma,useLayoutEffect:ma,useInsertionEffect:ma,useMemo:ma,useReducer:ma,useRef:ma,useState:ma,useDebugValue:ma,useDeferredValue:ma,useTransition:ma,useSyncExternalStore:ma,useId:ma,useHostTransitionStatus:ma,useFormState:ma,useActionState:ma,useOptimistic:ma,useMemoCache:ma,useCacheRefresh:ma};cf.useEffectEvent=ma;var I0={readContext:fn,use:Pl,useCallback:function(l,d){return ln().memoizedState=[l,d===void 0?null:d],l},useContext:fn,useEffect:b0,useImperativeHandle:function(l,d,f){f=f!=null?f.concat([l]):null,bd(4194308,4,N0.bind(null,d,l),f)},useLayoutEffect:function(l,d){return bd(4194308,4,l,d)},useInsertionEffect:function(l,d){bd(4,2,l,d)},useMemo:function(l,d){var f=ln();d=d===void 0?null:d;var x=l();if(tr){be(!0);try{l()}finally{be(!1)}}return f.memoizedState=[x,d],x},useReducer:function(l,d,f){var x=ln();if(f!==void 0){var C=f(d);if(tr){be(!0);try{f(d)}finally{be(!1)}}}else C=d;return x.memoizedState=x.baseState=C,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:C},x.queue=l,l=l.dispatch=pk.bind(null,Zt,l),[x.memoizedState,l]},useRef:function(l){var d=ln();return l={current:l},d.memoizedState=l},useState:function(l){l=Vo(l);var d=l.queue,f=L0.bind(null,Zt,d);return d.dispatch=f,[l.memoizedState,f]},useDebugValue:xx,useDeferredValue:function(l,d){var f=ln();return bx(f,l,d)},useTransition:function(){var l=Vo(!1);return l=A0.bind(null,Zt,l.queue,!0,!1),ln().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,d,f){var x=Zt,C=ln();if(Ls){if(f===void 0)throw Error(n(407));f=f()}else{if(f=d(),Ea===null)throw Error(n(349));(Gs&127)!==0||ho(x,d,f)}C.memoizedState=f;var T={value:f,getSnapshot:d};return C.queue=T,b0(nf.bind(null,x,T,l),[l]),x.flags|=2048,Tc(9,{destroy:void 0},af.bind(null,x,T,f,d),null),f},useId:function(){var l=ln(),d=Ea.identifierPrefix;if(Ls){var f=Ur,x=qr;f=(x&~(1<<32-Re(x)-1)).toString(32)+f,d="_"+d+"R_"+f,f=Ua++,0<f&&(d+="H"+f.toString(32)),d+="_"}else f=Cc++,d="_"+d+"r_"+f.toString(32)+"_";return l.memoizedState=d},useHostTransitionStatus:vx,useFormState:Ol,useActionState:Ol,useOptimistic:function(l){var d=ln();d.memoizedState=d.baseState=l;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return d.queue=f,d=jx.bind(null,Zt,!0,f),f.dispatch=d,[l,d]},useMemoCache:Fl,useCacheRefresh:function(){return ln().memoizedState=mk.bind(null,Zt)},useEffectEvent:function(l){var d=ln(),f={impl:l};return d.memoizedState=f,function(){if((ca&2)!==0)throw Error(n(440));return f.impl.apply(void 0,arguments)}}},Nx={readContext:fn,use:Pl,useCallback:_0,useContext:fn,useEffect:gx,useImperativeHandle:w0,useInsertionEffect:v0,useLayoutEffect:j0,useMemo:S0,useReducer:Gu,useRef:Mm,useState:function(){return Gu(Il)},useDebugValue:xx,useDeferredValue:function(l,d){var f=Da();return C0(f,Jt.memoizedState,l,d)},useTransition:function(){var l=Gu(Il)[0],d=Da().memoizedState;return[typeof l=="boolean"?l:Ll(l),d]},useSyncExternalStore:Ju,useId:E0,useHostTransitionStatus:vx,useFormState:fo,useActionState:fo,useOptimistic:function(l,d){var f=Da();return Pm(f,Jt,l,d)},useMemoCache:Fl,useCacheRefresh:T0};Nx.useEffectEvent=y0;var O0={readContext:fn,use:Pl,useCallback:_0,useContext:fn,useEffect:gx,useImperativeHandle:w0,useInsertionEffect:v0,useLayoutEffect:j0,useMemo:S0,useReducer:Qu,useRef:Mm,useState:function(){return Qu(Il)},useDebugValue:xx,useDeferredValue:function(l,d){var f=Da();return Jt===null?bx(f,l,d):C0(f,Jt.memoizedState,l,d)},useTransition:function(){var l=Qu(Il)[0],d=Da().memoizedState;return[typeof l=="boolean"?l:Ll(l),d]},useSyncExternalStore:Ju,useId:E0,useHostTransitionStatus:vx,useFormState:th,useActionState:th,useOptimistic:function(l,d){var f=Da();return Jt!==null?Pm(f,Jt,l,d):(f.baseState=l,[l,f.queue.dispatch])},useMemoCache:Fl,useCacheRefresh:T0};O0.useEffectEvent=y0;function wx(l,d,f,x){d=l.memoizedState,f=f(x,d),f=f==null?d:p({},d,f),l.memoizedState=f,l.lanes===0&&(l.updateQueue.baseState=f)}var _x={enqueueSetState:function(l,d,f){l=l._reactInternals;var x=il(),C=Nt(x);C.payload=d,f!=null&&(C.callback=f),d=Ot(l,C,x),d!==null&&(Bi(d,l,x),Ht(d,l,x))},enqueueReplaceState:function(l,d,f){l=l._reactInternals;var x=il(),C=Nt(x);C.tag=1,C.payload=d,f!=null&&(C.callback=f),d=Ot(l,C,x),d!==null&&(Bi(d,l,x),Ht(d,l,x))},enqueueForceUpdate:function(l,d){l=l._reactInternals;var f=il(),x=Nt(f);x.tag=2,d!=null&&(x.callback=d),d=Ot(l,x,f),d!==null&&(Bi(d,l,f),Ht(d,l,f))}};function M0(l,d,f,x,C,T,ae){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(x,T,ae):d.prototype&&d.prototype.isPureReactComponent?!Qa(f,x)||!Qa(C,T):!0}function R0(l,d,f,x){l=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(f,x),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(f,x),d.state!==l&&_x.enqueueReplaceState(d,d.state,null)}function hu(l,d){var f=d;if("ref"in d){f={};for(var x in d)x!=="ref"&&(f[x]=d[x])}if(l=l.defaultProps){f===d&&(f=p({},f));for(var C in l)f[C]===void 0&&(f[C]=l[C])}return f}function B0(l){Bo(l)}function z0(l){console.error(l)}function q0(l){Bo(l)}function Bm(l,d){try{var f=l.onUncaughtError;f(d.value,{componentStack:d.stack})}catch(x){setTimeout(function(){throw x})}}function U0(l,d,f){try{var x=l.onCaughtError;x(f.value,{componentStack:f.stack,errorBoundary:d.tag===1?d.stateNode:null})}catch(C){setTimeout(function(){throw C})}}function Sx(l,d,f){return f=Nt(f),f.tag=3,f.payload={element:null},f.callback=function(){Bm(l,d)},f}function H0(l){return l=Nt(l),l.tag=3,l}function $0(l,d,f,x){var C=f.type.getDerivedStateFromError;if(typeof C=="function"){var T=x.value;l.payload=function(){return C(T)},l.callback=function(){U0(d,f,x)}}var ae=f.stateNode;ae!==null&&typeof ae.componentDidCatch=="function"&&(l.callback=function(){U0(d,f,x),typeof C!="function"&&(wd===null?wd=new Set([this]):wd.add(this));var pe=x.stack;this.componentDidCatch(x.value,{componentStack:pe!==null?pe:""})})}function gk(l,d,f,x,C){if(f.flags|=32768,x!==null&&typeof x=="object"&&typeof x.then=="function"){if(d=f.alternate,d!==null&&Pi(d,f,C,!0),f=Ks.current,f!==null){switch(f.tag){case 31:case 13:return ws===null?Qm():f.alternate===null&&mn===0&&(mn=3),f.flags&=-257,f.flags|=65536,f.lanes=C,x===_?f.flags|=16384:(d=f.updateQueue,d===null?f.updateQueue=new Set([x]):d.add(x),Gx(l,x,C)),!1;case 22:return f.flags|=65536,x===_?f.flags|=16384:(d=f.updateQueue,d===null?(d={transitions:null,markerInstances:null,retryQueue:new Set([x])},f.updateQueue=d):(f=d.retryQueue,f===null?d.retryQueue=new Set([x]):f.add(x)),Gx(l,x,C)),!1}throw Error(n(435,f.tag))}return Gx(l,x,C),Qm(),!1}if(Ls)return d=Ks.current,d!==null?((d.flags&65536)===0&&(d.flags|=256),d.flags|=65536,d.lanes=C,x!==oi&&(l=Error(n(422),{cause:x}),Uo(zn(l,f)))):(x!==oi&&(d=Error(n(423),{cause:x}),Uo(zn(d,f))),l=l.current.alternate,l.flags|=65536,C&=-C,l.lanes|=C,x=zn(x,f),C=Sx(l.stateNode,x,C),ss(l,C),mn!==4&&(mn=2)),!1;var T=Error(n(520),{cause:x});if(T=zn(T,f),xf===null?xf=[T]:xf.push(T),mn!==4&&(mn=2),d===null)return!0;x=zn(x,f),f=d;do{switch(f.tag){case 3:return f.flags|=65536,l=C&-C,f.lanes|=l,l=Sx(f.stateNode,x,l),ss(f,l),!1;case 1:if(d=f.type,T=f.stateNode,(f.flags&128)===0&&(typeof d.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(wd===null||!wd.has(T))))return f.flags|=65536,C&=-C,f.lanes|=C,C=H0(C),$0(C,l,f,x),ss(f,C),!1}f=f.return}while(f!==null);return!1}var Cx=Error(n(461)),Un=!1;function Sr(l,d,f,x){d.child=l===null?jt(d,null,f,x):Ut(d,l.child,f,x)}function V0(l,d,f,x,C){f=f.render;var T=d.ref;if("ref"in x){var ae={};for(var pe in x)pe!=="ref"&&(ae[pe]=x[pe])}else ae=x;return ur(d),x=al(l,d,f,ae,T,C),pe=Ac(),l!==null&&!Un?(gd(l,d,C),Lc(l,d,C)):(Ls&&pe&&wc(d),d.flags|=1,Sr(l,d,x,C),d.child)}function W0(l,d,f,x,C){if(l===null){var T=f.type;return typeof T=="function"&&!dd(T)&&T.defaultProps===void 0&&f.compare===null?(d.tag=15,d.type=T,Y0(l,d,T,x,C)):(l=qo(f.type,null,x,d,d.mode,C),l.ref=d.ref,l.return=d,d.child=l)}if(T=l.child,!Fx(l,C)){var ae=T.memoizedProps;if(f=f.compare,f=f!==null?f:Qa,f(ae,x)&&l.ref===d.ref)return Lc(l,d,C)}return d.flags|=1,l=Br(T,x),l.ref=d.ref,l.return=d,d.child=l}function Y0(l,d,f,x,C){if(l!==null){var T=l.memoizedProps;if(Qa(T,x)&&l.ref===d.ref)if(Un=!1,d.pendingProps=x=T,Fx(l,C))(l.flags&131072)!==0&&(Un=!0);else return d.lanes=l.lanes,Lc(l,d,C)}return Ax(l,d,f,x,C)}function K0(l,d,f,x){var C=x.children,T=l!==null?l.memoizedState:null;if(l===null&&d.stateNode===null&&(d.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),x.mode==="hidden"){if((d.flags&128)!==0){if(T=T!==null?T.baseLanes|f:f,l!==null){for(x=d.child=l.child,C=0;x!==null;)C=C|x.lanes|x.childLanes,x=x.sibling;x=C&~T}else x=0,d.child=null;return X0(l,d,T,f,x)}if((f&536870912)!==0)d.memoizedState={baseLanes:0,cachePool:null},l!==null&&xe(d,T!==null?T.cachePool:null),T!==null?Rs(d,T):Ns(),ps(d);else return x=d.lanes=536870912,X0(l,d,T!==null?T.baseLanes|f:f,f,x)}else T!==null?(xe(d,T.cachePool),Rs(d,T),Bs(),d.memoizedState=null):(l!==null&&xe(d,null),Ns(),Bs());return Sr(l,d,C,f),d.child}function df(l,d){return l!==null&&l.tag===22||d.stateNode!==null||(d.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.sibling}function X0(l,d,f,x,C){var T=ge();return T=T===null?null:{parent:qa._currentValue,pool:T},d.memoizedState={baseLanes:f,cachePool:T},l!==null&&xe(d,null),Ns(),ps(d),l!==null&&Pi(l,d,x,!0),d.childLanes=C,null}function zm(l,d){return d=Um({mode:d.mode,children:d.children},l.mode),d.ref=l.ref,l.child=d,d.return=l,d}function G0(l,d,f){return Ut(d,l.child,null,f),l=zm(d,d.pendingProps),l.flags|=2,Ds(d),d.memoizedState=null,l}function xk(l,d,f){var x=d.pendingProps,C=(d.flags&128)!==0;if(d.flags&=-129,l===null){if(Ls){if(x.mode==="hidden")return l=zm(d,x),d.lanes=536870912,df(null,l);if(ms(d),(l=ea)?(l=oN(l,Ma),l=l!==null&&l.data==="&"?l:null,l!==null&&(d.memoizedState={dehydrated:l,treeContext:Cl!==null?{id:qr,overflow:Ur}:null,retryLane:536870912,hydrationErrors:null},f=ud(l),f.return=d,d.child=f,_n=d,ea=null)):l=null,l===null)throw Al(d);return d.lanes=536870912,null}return zm(d,x)}var T=l.memoizedState;if(T!==null){var ae=T.dehydrated;if(ms(d),C)if(d.flags&256)d.flags&=-257,d=G0(l,d,f);else if(d.memoizedState!==null)d.child=l.child,d.flags|=128,d=null;else throw Error(n(558));else if(Un||Pi(l,d,f,!1),C=(f&l.childLanes)!==0,Un||C){if(x=Ea,x!==null&&(ae=aa(x,f),ae!==0&&ae!==T.retryLane))throw T.retryLane=ae,Nn(l,ae),Bi(x,l,ae),Cx;Qm(),d=G0(l,d,f)}else l=T.treeContext,ea=Ml(ae.nextSibling),_n=d,Ls=!0,qn=null,Ma=!1,l!==null&&ru(d,l),d=zm(d,x),d.flags|=4096;return d}return l=Br(l.child,{mode:x.mode,children:x.children}),l.ref=d.ref,d.child=l,l.return=d,l}function qm(l,d){var f=d.ref;if(f===null)l!==null&&l.ref!==null&&(d.flags|=4194816);else{if(typeof f!="function"&&typeof f!="object")throw Error(n(284));(l===null||l.ref!==f)&&(d.flags|=4194816)}}function Ax(l,d,f,x,C){return ur(d),f=al(l,d,f,x,void 0,C),x=Ac(),l!==null&&!Un?(gd(l,d,C),Lc(l,d,C)):(Ls&&x&&wc(d),d.flags|=1,Sr(l,d,f,C),d.child)}function Q0(l,d,f,x,C,T){return ur(d),d.updateQueue=null,f=Fi(d,x,f,C),uo(l),x=Ac(),l!==null&&!Un?(gd(l,d,T),Lc(l,d,T)):(Ls&&x&&wc(d),d.flags|=1,Sr(l,d,f,T),d.child)}function J0(l,d,f,x,C){if(ur(d),d.stateNode===null){var T=wn,ae=f.contextType;typeof ae=="object"&&ae!==null&&(T=fn(ae)),T=new f(x,T),d.memoizedState=T.state!==null&&T.state!==void 0?T.state:null,T.updater=_x,d.stateNode=T,T._reactInternals=d,T=d.stateNode,T.props=x,T.state=d.memoizedState,T.refs={},pt(d),ae=f.contextType,T.context=typeof ae=="object"&&ae!==null?fn(ae):wn,T.state=d.memoizedState,ae=f.getDerivedStateFromProps,typeof ae=="function"&&(wx(d,f,ae,x),T.state=d.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof T.getSnapshotBeforeUpdate=="function"||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(ae=T.state,typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount(),ae!==T.state&&_x.enqueueReplaceState(T,T.state,null),cs(d,x,T,C),as(),T.state=d.memoizedState),typeof T.componentDidMount=="function"&&(d.flags|=4194308),x=!0}else if(l===null){T=d.stateNode;var pe=d.memoizedProps,Ee=hu(f,pe);T.props=Ee;var Ke=T.context,ct=f.contextType;ae=wn,typeof ct=="object"&&ct!==null&&(ae=fn(ct));var ft=f.getDerivedStateFromProps;ct=typeof ft=="function"||typeof T.getSnapshotBeforeUpdate=="function",pe=d.pendingProps!==pe,ct||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(pe||Ke!==ae)&&R0(d,T,x,ae),ht=!1;var Ge=d.memoizedState;T.state=Ge,cs(d,x,T,C),as(),Ke=d.memoizedState,pe||Ge!==Ke||ht?(typeof ft=="function"&&(wx(d,f,ft,x),Ke=d.memoizedState),(Ee=ht||M0(d,f,Ee,x,Ge,Ke,ae))?(ct||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount()),typeof T.componentDidMount=="function"&&(d.flags|=4194308)):(typeof T.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=x,d.memoizedState=Ke),T.props=x,T.state=Ke,T.context=ae,x=Ee):(typeof T.componentDidMount=="function"&&(d.flags|=4194308),x=!1)}else{T=d.stateNode,os(l,d),ae=d.memoizedProps,ct=hu(f,ae),T.props=ct,ft=d.pendingProps,Ge=T.context,Ke=f.contextType,Ee=wn,typeof Ke=="object"&&Ke!==null&&(Ee=fn(Ke)),pe=f.getDerivedStateFromProps,(Ke=typeof pe=="function"||typeof T.getSnapshotBeforeUpdate=="function")||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(ae!==ft||Ge!==Ee)&&R0(d,T,x,Ee),ht=!1,Ge=d.memoizedState,T.state=Ge,cs(d,x,T,C),as();var at=d.memoizedState;ae!==ft||Ge!==at||ht||l!==null&&l.dependencies!==null&&_c(l.dependencies)?(typeof pe=="function"&&(wx(d,f,pe,x),at=d.memoizedState),(ct=ht||M0(d,f,ct,x,Ge,at,Ee)||l!==null&&l.dependencies!==null&&_c(l.dependencies))?(Ke||typeof T.UNSAFE_componentWillUpdate!="function"&&typeof T.componentWillUpdate!="function"||(typeof T.componentWillUpdate=="function"&&T.componentWillUpdate(x,at,Ee),typeof T.UNSAFE_componentWillUpdate=="function"&&T.UNSAFE_componentWillUpdate(x,at,Ee)),typeof T.componentDidUpdate=="function"&&(d.flags|=4),typeof T.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof T.componentDidUpdate!="function"||ae===l.memoizedProps&&Ge===l.memoizedState||(d.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||ae===l.memoizedProps&&Ge===l.memoizedState||(d.flags|=1024),d.memoizedProps=x,d.memoizedState=at),T.props=x,T.state=at,T.context=Ee,x=ct):(typeof T.componentDidUpdate!="function"||ae===l.memoizedProps&&Ge===l.memoizedState||(d.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||ae===l.memoizedProps&&Ge===l.memoizedState||(d.flags|=1024),x=!1)}return T=x,qm(l,d),x=(d.flags&128)!==0,T||x?(T=d.stateNode,f=x&&typeof f.getDerivedStateFromError!="function"?null:T.render(),d.flags|=1,l!==null&&x?(d.child=Ut(d,l.child,null,C),d.child=Ut(d,null,f,C)):Sr(l,d,f,C),d.memoizedState=T.state,l=d.child):l=Lc(l,d,C),l}function Z0(l,d,f,x){return co(),d.flags|=256,Sr(l,d,f,x),d.child}var kx={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Dx(l){return{baseLanes:l,cachePool:we()}}function Ex(l,d,f){return l=l!==null?l.childLanes&~f:0,d&&(l|=rl),l}function ej(l,d,f){var x=d.pendingProps,C=!1,T=(d.flags&128)!==0,ae;if((ae=T)||(ae=l!==null&&l.memoizedState===null?!1:(Ss.current&2)!==0),ae&&(C=!0,d.flags&=-129),ae=(d.flags&32)!==0,d.flags&=-33,l===null){if(Ls){if(C?fa(d):Bs(),(l=ea)?(l=oN(l,Ma),l=l!==null&&l.data!=="&"?l:null,l!==null&&(d.memoizedState={dehydrated:l,treeContext:Cl!==null?{id:qr,overflow:Ur}:null,retryLane:536870912,hydrationErrors:null},f=ud(l),f.return=d,d.child=f,_n=d,ea=null)):l=null,l===null)throw Al(d);return hb(l)?d.lanes=32:d.lanes=536870912,null}var pe=x.children;return x=x.fallback,C?(Bs(),C=d.mode,pe=Um({mode:"hidden",children:pe},C),x=Ti(x,C,f,null),pe.return=d,x.return=d,pe.sibling=x,d.child=pe,x=d.child,x.memoizedState=Dx(f),x.childLanes=Ex(l,ae,f),d.memoizedState=kx,df(null,x)):(fa(d),Tx(d,pe))}var Ee=l.memoizedState;if(Ee!==null&&(pe=Ee.dehydrated,pe!==null)){if(T)d.flags&256?(fa(d),d.flags&=-257,d=Lx(l,d,f)):d.memoizedState!==null?(Bs(),d.child=l.child,d.flags|=128,d=null):(Bs(),pe=x.fallback,C=d.mode,x=Um({mode:"visible",children:x.children},C),pe=Ti(pe,C,f,null),pe.flags|=2,x.return=d,pe.return=d,x.sibling=pe,d.child=x,Ut(d,l.child,null,f),x=d.child,x.memoizedState=Dx(f),x.childLanes=Ex(l,ae,f),d.memoizedState=kx,d=df(null,x));else if(fa(d),hb(pe)){if(ae=pe.nextSibling&&pe.nextSibling.dataset,ae)var Ke=ae.dgst;ae=Ke,x=Error(n(419)),x.stack="",x.digest=ae,Uo({value:x,source:null,stack:null}),d=Lx(l,d,f)}else if(Un||Pi(l,d,f,!1),ae=(f&l.childLanes)!==0,Un||ae){if(ae=Ea,ae!==null&&(x=aa(ae,f),x!==0&&x!==Ee.retryLane))throw Ee.retryLane=x,Nn(l,x),Bi(ae,l,x),Cx;ub(pe)||Qm(),d=Lx(l,d,f)}else ub(pe)?(d.flags|=192,d.child=l.child,d=null):(l=Ee.treeContext,ea=Ml(pe.nextSibling),_n=d,Ls=!0,qn=null,Ma=!1,l!==null&&ru(d,l),d=Tx(d,x.children),d.flags|=4096);return d}return C?(Bs(),pe=x.fallback,C=d.mode,Ee=l.child,Ke=Ee.sibling,x=Br(Ee,{mode:"hidden",children:x.children}),x.subtreeFlags=Ee.subtreeFlags&65011712,Ke!==null?pe=Br(Ke,pe):(pe=Ti(pe,C,f,null),pe.flags|=2),pe.return=d,x.return=d,x.sibling=pe,d.child=x,df(null,x),x=d.child,pe=l.child.memoizedState,pe===null?pe=Dx(f):(C=pe.cachePool,C!==null?(Ee=qa._currentValue,C=C.parent!==Ee?{parent:Ee,pool:Ee}:C):C=we(),pe={baseLanes:pe.baseLanes|f,cachePool:C}),x.memoizedState=pe,x.childLanes=Ex(l,ae,f),d.memoizedState=kx,df(l.child,x)):(fa(d),f=l.child,l=f.sibling,f=Br(f,{mode:"visible",children:x.children}),f.return=d,f.sibling=null,l!==null&&(ae=d.deletions,ae===null?(d.deletions=[l],d.flags|=16):ae.push(l)),d.child=f,d.memoizedState=null,f)}function Tx(l,d){return d=Um({mode:"visible",children:d},l.mode),d.return=l,l.child=d}function Um(l,d){return l=Bn(22,l,null,d),l.lanes=0,l}function Lx(l,d,f){return Ut(d,l.child,null,f),l=Tx(d,d.pendingProps.children),l.flags|=2,d.memoizedState=null,l}function tj(l,d,f){l.lanes|=d;var x=l.alternate;x!==null&&(x.lanes|=d),Ho(l.return,d,f)}function Px(l,d,f,x,C,T){var ae=l.memoizedState;ae===null?l.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:x,tail:f,tailMode:C,treeForkCount:T}:(ae.isBackwards=d,ae.rendering=null,ae.renderingStartTime=0,ae.last=x,ae.tail=f,ae.tailMode=C,ae.treeForkCount=T)}function sj(l,d,f){var x=d.pendingProps,C=x.revealOrder,T=x.tail;x=x.children;var ae=Ss.current,pe=(ae&2)!==0;if(pe?(ae=ae&1|2,d.flags|=128):ae&=1,le(Ss,ae),Sr(l,d,x,f),x=Ls?jc:0,!pe&&l!==null&&(l.flags&128)!==0)e:for(l=d.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&tj(l,f,d);else if(l.tag===19)tj(l,f,d);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===d)break e;for(;l.sibling===null;){if(l.return===null||l.return===d)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}switch(C){case"forwards":for(f=d.child,C=null;f!==null;)l=f.alternate,l!==null&&rn(l)===null&&(C=f),f=f.sibling;f=C,f===null?(C=d.child,d.child=null):(C=f.sibling,f.sibling=null),Px(d,!1,C,f,T,x);break;case"backwards":case"unstable_legacy-backwards":for(f=null,C=d.child,d.child=null;C!==null;){if(l=C.alternate,l!==null&&rn(l)===null){d.child=C;break}l=C.sibling,C.sibling=f,f=C,C=l}Px(d,!0,f,null,T,x);break;case"together":Px(d,!1,null,null,void 0,x);break;default:d.memoizedState=null}return d.child}function Lc(l,d,f){if(l!==null&&(d.dependencies=l.dependencies),Nd|=d.lanes,(f&d.childLanes)===0)if(l!==null){if(Pi(l,d,f,!1),(f&d.childLanes)===0)return null}else return null;if(l!==null&&d.child!==l.child)throw Error(n(153));if(d.child!==null){for(l=d.child,f=Br(l,l.pendingProps),d.child=f,f.return=d;l.sibling!==null;)l=l.sibling,f=f.sibling=Br(l,l.pendingProps),f.return=d;f.sibling=null}return d.child}function Fx(l,d){return(l.lanes&d)!==0?!0:(l=l.dependencies,!!(l!==null&&_c(l)))}function bk(l,d,f){switch(d.tag){case 3:Pe(d,d.stateNode.containerInfo),Dl(d,qa,l.memoizedState.cache),co();break;case 27:case 5:Ye(d);break;case 4:Pe(d,d.stateNode.containerInfo);break;case 10:Dl(d,d.type,d.memoizedProps.value);break;case 31:if(d.memoizedState!==null)return d.flags|=128,ms(d),null;break;case 13:var x=d.memoizedState;if(x!==null)return x.dehydrated!==null?(fa(d),d.flags|=128,null):(f&d.child.childLanes)!==0?ej(l,d,f):(fa(d),l=Lc(l,d,f),l!==null?l.sibling:null);fa(d);break;case 19:var C=(l.flags&128)!==0;if(x=(f&d.childLanes)!==0,x||(Pi(l,d,f,!1),x=(f&d.childLanes)!==0),C){if(x)return sj(l,d,f);d.flags|=128}if(C=d.memoizedState,C!==null&&(C.rendering=null,C.tail=null,C.lastEffect=null),le(Ss,Ss.current),x)break;return null;case 22:return d.lanes=0,K0(l,d,f,d.pendingProps);case 24:Dl(d,qa,l.memoizedState.cache)}return Lc(l,d,f)}function aj(l,d,f){if(l!==null)if(l.memoizedProps!==d.pendingProps)Un=!0;else{if(!Fx(l,f)&&(d.flags&128)===0)return Un=!1,bk(l,d,f);Un=(l.flags&131072)!==0}else Un=!1,Ls&&(d.flags&1048576)!==0&&Nc(d,jc,d.index);switch(d.lanes=0,d.tag){case 16:e:{var x=d.pendingProps;if(l=fe(d.elementType),d.type=l,typeof l=="function")dd(l)?(x=hu(l,x),d.tag=1,d=J0(null,d,l,x,f)):(d.tag=0,d=Ax(null,d,l,x,f));else{if(l!=null){var C=l.$$typeof;if(C===L){d.tag=11,d=V0(null,d,l,x,f);break e}else if(C===te){d.tag=14,d=W0(null,d,l,x,f);break e}}throw d=se(l)||l,Error(n(306,d,""))}}return d;case 0:return Ax(l,d,d.type,d.pendingProps,f);case 1:return x=d.type,C=hu(x,d.pendingProps),J0(l,d,x,C,f);case 3:e:{if(Pe(d,d.stateNode.containerInfo),l===null)throw Error(n(387));x=d.pendingProps;var T=d.memoizedState;C=T.element,os(l,d),cs(d,x,null,f);var ae=d.memoizedState;if(x=ae.cache,Dl(d,qa,x),x!==T.cache&&El(d,[qa],f,!0),as(),x=ae.element,T.isDehydrated)if(T={element:x,isDehydrated:!1,cache:ae.cache},d.updateQueue.baseState=T,d.memoizedState=T,d.flags&256){d=Z0(l,d,x,f);break e}else if(x!==C){C=zn(Error(n(424)),d),Uo(C),d=Z0(l,d,x,f);break e}else{switch(l=d.stateNode.containerInfo,l.nodeType){case 9:l=l.body;break;default:l=l.nodeName==="HTML"?l.ownerDocument.body:l}for(ea=Ml(l.firstChild),_n=d,Ls=!0,qn=null,Ma=!0,f=jt(d,null,x,f),d.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling}else{if(co(),x===C){d=Lc(l,d,f);break e}Sr(l,d,x,f)}d=d.child}return d;case 26:return qm(l,d),l===null?(f=mN(d.type,null,d.pendingProps,null))?d.memoizedState=f:Ls||(f=d.type,l=d.pendingProps,x=np(je.current).createElement(f),x[Zs]=d,x[Sa]=l,Cr(x,f,l),ua(x),d.stateNode=x):d.memoizedState=mN(d.type,l.memoizedProps,d.pendingProps,l.memoizedState),null;case 27:return Ye(d),l===null&&Ls&&(x=d.stateNode=uN(d.type,d.pendingProps,je.current),_n=d,Ma=!0,C=ea,Ad(d.type)?(fb=C,ea=Ml(x.firstChild)):ea=C),Sr(l,d,d.pendingProps.children,f),qm(l,d),l===null&&(d.flags|=4194304),d.child;case 5:return l===null&&Ls&&((C=x=ea)&&(x=Kk(x,d.type,d.pendingProps,Ma),x!==null?(d.stateNode=x,_n=d,ea=Ml(x.firstChild),Ma=!1,C=!0):C=!1),C||Al(d)),Ye(d),C=d.type,T=d.pendingProps,ae=l!==null?l.memoizedProps:null,x=T.children,ob(C,T)?x=null:ae!==null&&ob(C,ae)&&(d.flags|=32),d.memoizedState!==null&&(C=al(l,d,Xu,null,null,f),Sf._currentValue=C),qm(l,d),Sr(l,d,x,f),d.child;case 6:return l===null&&Ls&&((l=f=ea)&&(f=Xk(f,d.pendingProps,Ma),f!==null?(d.stateNode=f,_n=d,ea=null,l=!0):l=!1),l||Al(d)),null;case 13:return ej(l,d,f);case 4:return Pe(d,d.stateNode.containerInfo),x=d.pendingProps,l===null?d.child=Ut(d,null,x,f):Sr(l,d,x,f),d.child;case 11:return V0(l,d,d.type,d.pendingProps,f);case 7:return Sr(l,d,d.pendingProps,f),d.child;case 8:return Sr(l,d,d.pendingProps.children,f),d.child;case 12:return Sr(l,d,d.pendingProps.children,f),d.child;case 10:return x=d.pendingProps,Dl(d,d.type,x.value),Sr(l,d,x.children,f),d.child;case 9:return C=d.type._context,x=d.pendingProps.children,ur(d),C=fn(C),x=x(C),d.flags|=1,Sr(l,d,x,f),d.child;case 14:return W0(l,d,d.type,d.pendingProps,f);case 15:return Y0(l,d,d.type,d.pendingProps,f);case 19:return sj(l,d,f);case 31:return xk(l,d,f);case 22:return K0(l,d,f,d.pendingProps);case 24:return ur(d),x=fn(qa),l===null?(C=ge(),C===null&&(C=Ea,T=Hr(),C.pooledCache=T,T.refCount++,T!==null&&(C.pooledCacheLanes|=f),C=T),d.memoizedState={parent:x,cache:C},pt(d),Dl(d,qa,C)):((l.lanes&f)!==0&&(os(l,d),cs(d,null,null,f),as()),C=l.memoizedState,T=d.memoizedState,C.parent!==x?(C={parent:x,cache:x},d.memoizedState=C,d.lanes===0&&(d.memoizedState=d.updateQueue.baseState=C),Dl(d,qa,x)):(x=T.cache,Dl(d,qa,x),x!==C.cache&&El(d,[qa],f,!0))),Sr(l,d,d.pendingProps.children,f),d.child;case 29:throw d.pendingProps}throw Error(n(156,d.tag))}function Pc(l){l.flags|=4}function Ix(l,d,f,x,C){if((d=(l.mode&32)!==0)&&(d=!1),d){if(l.flags|=16777216,(C&335544128)===C)if(l.stateNode.complete)l.flags|=8192;else if(Ej())l.flags|=8192;else throw ye=_,$e}else l.flags&=-16777217}function nj(l,d){if(d.type!=="stylesheet"||(d.state.loading&4)!==0)l.flags&=-16777217;else if(l.flags|=16777216,!yN(d))if(Ej())l.flags|=8192;else throw ye=_,$e}function Hm(l,d){d!==null&&(l.flags|=4),l.flags&16384&&(d=l.tag!==22?Ce():536870912,l.lanes|=d,rh|=d)}function uf(l,d){if(!Ls)switch(l.tailMode){case"hidden":d=l.tail;for(var f=null;d!==null;)d.alternate!==null&&(f=d),d=d.sibling;f===null?l.tail=null:f.sibling=null;break;case"collapsed":f=l.tail;for(var x=null;f!==null;)f.alternate!==null&&(x=f),f=f.sibling;x===null?d||l.tail===null?l.tail=null:l.tail.sibling=null:x.sibling=null}}function Ha(l){var d=l.alternate!==null&&l.alternate.child===l.child,f=0,x=0;if(d)for(var C=l.child;C!==null;)f|=C.lanes|C.childLanes,x|=C.subtreeFlags&65011712,x|=C.flags&65011712,C.return=l,C=C.sibling;else for(C=l.child;C!==null;)f|=C.lanes|C.childLanes,x|=C.subtreeFlags,x|=C.flags,C.return=l,C=C.sibling;return l.subtreeFlags|=x,l.childLanes=f,d}function yk(l,d,f){var x=d.pendingProps;switch(fd(d),d.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ha(d),null;case 1:return Ha(d),null;case 3:return f=d.stateNode,x=null,l!==null&&(x=l.memoizedState.cache),d.memoizedState.cache!==x&&(d.flags|=2048),_r(qa),ke(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(l===null||l.child===null)&&(Sn(d)?Pc(d):l===null||l.memoizedState.isDehydrated&&(d.flags&256)===0||(d.flags|=1024,iu())),Ha(d),null;case 26:var C=d.type,T=d.memoizedState;return l===null?(Pc(d),T!==null?(Ha(d),nj(d,T)):(Ha(d),Ix(d,C,null,x,f))):T?T!==l.memoizedState?(Pc(d),Ha(d),nj(d,T)):(Ha(d),d.flags&=-16777217):(l=l.memoizedProps,l!==x&&Pc(d),Ha(d),Ix(d,C,l,x,f)),null;case 27:if(Qe(d),f=je.current,C=d.type,l!==null&&d.stateNode!=null)l.memoizedProps!==x&&Pc(d);else{if(!x){if(d.stateNode===null)throw Error(n(166));return Ha(d),null}l=de.current,Sn(d)?oo(d):(l=uN(C,x,f),d.stateNode=l,Pc(d))}return Ha(d),null;case 5:if(Qe(d),C=d.type,l!==null&&d.stateNode!=null)l.memoizedProps!==x&&Pc(d);else{if(!x){if(d.stateNode===null)throw Error(n(166));return Ha(d),null}if(T=de.current,Sn(d))oo(d);else{var ae=np(je.current);switch(T){case 1:T=ae.createElementNS("http://www.w3.org/2000/svg",C);break;case 2:T=ae.createElementNS("http://www.w3.org/1998/Math/MathML",C);break;default:switch(C){case"svg":T=ae.createElementNS("http://www.w3.org/2000/svg",C);break;case"math":T=ae.createElementNS("http://www.w3.org/1998/Math/MathML",C);break;case"script":T=ae.createElement("div"),T.innerHTML="<script><\/script>",T=T.removeChild(T.firstChild);break;case"select":T=typeof x.is=="string"?ae.createElement("select",{is:x.is}):ae.createElement("select"),x.multiple?T.multiple=!0:x.size&&(T.size=x.size);break;default:T=typeof x.is=="string"?ae.createElement(C,{is:x.is}):ae.createElement(C)}}T[Zs]=d,T[Sa]=x;e:for(ae=d.child;ae!==null;){if(ae.tag===5||ae.tag===6)T.appendChild(ae.stateNode);else if(ae.tag!==4&&ae.tag!==27&&ae.child!==null){ae.child.return=ae,ae=ae.child;continue}if(ae===d)break e;for(;ae.sibling===null;){if(ae.return===null||ae.return===d)break e;ae=ae.return}ae.sibling.return=ae.return,ae=ae.sibling}d.stateNode=T;e:switch(Cr(T,C,x),C){case"button":case"input":case"select":case"textarea":x=!!x.autoFocus;break e;case"img":x=!0;break e;default:x=!1}x&&Pc(d)}}return Ha(d),Ix(d,d.type,l===null?null:l.memoizedProps,d.pendingProps,f),null;case 6:if(l&&d.stateNode!=null)l.memoizedProps!==x&&Pc(d);else{if(typeof x!="string"&&d.stateNode===null)throw Error(n(166));if(l=je.current,Sn(d)){if(l=d.stateNode,f=d.memoizedProps,x=null,C=_n,C!==null)switch(C.tag){case 27:case 5:x=C.memoizedProps}l[Zs]=d,l=!!(l.nodeValue===f||x!==null&&x.suppressHydrationWarning===!0||eN(l.nodeValue,f)),l||Al(d,!0)}else l=np(l).createTextNode(x),l[Zs]=d,d.stateNode=l}return Ha(d),null;case 31:if(f=d.memoizedState,l===null||l.memoizedState!==null){if(x=Sn(d),f!==null){if(l===null){if(!x)throw Error(n(318));if(l=d.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(n(557));l[Zs]=d}else co(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;Ha(d),l=!1}else f=iu(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=f),l=!0;if(!l)return d.flags&256?(Ds(d),d):(Ds(d),null);if((d.flags&128)!==0)throw Error(n(558))}return Ha(d),null;case 13:if(x=d.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(C=Sn(d),x!==null&&x.dehydrated!==null){if(l===null){if(!C)throw Error(n(318));if(C=d.memoizedState,C=C!==null?C.dehydrated:null,!C)throw Error(n(317));C[Zs]=d}else co(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;Ha(d),C=!1}else C=iu(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=C),C=!0;if(!C)return d.flags&256?(Ds(d),d):(Ds(d),null)}return Ds(d),(d.flags&128)!==0?(d.lanes=f,d):(f=x!==null,l=l!==null&&l.memoizedState!==null,f&&(x=d.child,C=null,x.alternate!==null&&x.alternate.memoizedState!==null&&x.alternate.memoizedState.cachePool!==null&&(C=x.alternate.memoizedState.cachePool.pool),T=null,x.memoizedState!==null&&x.memoizedState.cachePool!==null&&(T=x.memoizedState.cachePool.pool),T!==C&&(x.flags|=2048)),f!==l&&f&&(d.child.flags|=8192),Hm(d,d.updateQueue),Ha(d),null);case 4:return ke(),l===null&&ab(d.stateNode.containerInfo),Ha(d),null;case 10:return _r(d.type),Ha(d),null;case 19:if(U(Ss),x=d.memoizedState,x===null)return Ha(d),null;if(C=(d.flags&128)!==0,T=x.rendering,T===null)if(C)uf(x,!1);else{if(mn!==0||l!==null&&(l.flags&128)!==0)for(l=d.child;l!==null;){if(T=rn(l),T!==null){for(d.flags|=128,uf(x,!1),l=T.updateQueue,d.updateQueue=l,Hm(d,l),d.subtreeFlags=0,l=f,f=d.child;f!==null;)yc(f,l),f=f.sibling;return le(Ss,Ss.current&1|2),Ls&&wr(d,x.treeForkCount),d.child}l=l.sibling}x.tail!==null&&Mt()>Km&&(d.flags|=128,C=!0,uf(x,!1),d.lanes=4194304)}else{if(!C)if(l=rn(T),l!==null){if(d.flags|=128,C=!0,l=l.updateQueue,d.updateQueue=l,Hm(d,l),uf(x,!0),x.tail===null&&x.tailMode==="hidden"&&!T.alternate&&!Ls)return Ha(d),null}else 2*Mt()-x.renderingStartTime>Km&&f!==536870912&&(d.flags|=128,C=!0,uf(x,!1),d.lanes=4194304);x.isBackwards?(T.sibling=d.child,d.child=T):(l=x.last,l!==null?l.sibling=T:d.child=T,x.last=T)}return x.tail!==null?(l=x.tail,x.rendering=l,x.tail=l.sibling,x.renderingStartTime=Mt(),l.sibling=null,f=Ss.current,le(Ss,C?f&1|2:f&1),Ls&&wr(d,x.treeForkCount),l):(Ha(d),null);case 22:case 23:return Ds(d),_s(),x=d.memoizedState!==null,l!==null?l.memoizedState!==null!==x&&(d.flags|=8192):x&&(d.flags|=8192),x?(f&536870912)!==0&&(d.flags&128)===0&&(Ha(d),d.subtreeFlags&6&&(d.flags|=8192)):Ha(d),f=d.updateQueue,f!==null&&Hm(d,f.retryQueue),f=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),x=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(x=d.memoizedState.cachePool.pool),x!==f&&(d.flags|=2048),l!==null&&U(he),null;case 24:return f=null,l!==null&&(f=l.memoizedState.cache),d.memoizedState.cache!==f&&(d.flags|=2048),_r(qa),Ha(d),null;case 25:return null;case 30:return null}throw Error(n(156,d.tag))}function vk(l,d){switch(fd(d),d.tag){case 1:return l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 3:return _r(qa),ke(),l=d.flags,(l&65536)!==0&&(l&128)===0?(d.flags=l&-65537|128,d):null;case 26:case 27:case 5:return Qe(d),null;case 31:if(d.memoizedState!==null){if(Ds(d),d.alternate===null)throw Error(n(340));co()}return l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 13:if(Ds(d),l=d.memoizedState,l!==null&&l.dehydrated!==null){if(d.alternate===null)throw Error(n(340));co()}return l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 19:return U(Ss),null;case 4:return ke(),null;case 10:return _r(d.type),null;case 22:case 23:return Ds(d),_s(),l!==null&&U(he),l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 24:return _r(qa),null;case 25:return null;default:return null}}function rj(l,d){switch(fd(d),d.tag){case 3:_r(qa),ke();break;case 26:case 27:case 5:Qe(d);break;case 4:ke();break;case 31:d.memoizedState!==null&&Ds(d);break;case 13:Ds(d);break;case 19:U(Ss);break;case 10:_r(d.type);break;case 22:case 23:Ds(d),_s(),l!==null&&U(he);break;case 24:_r(qa)}}function hf(l,d){try{var f=d.updateQueue,x=f!==null?f.lastEffect:null;if(x!==null){var C=x.next;f=C;do{if((f.tag&l)===l){x=void 0;var T=f.create,ae=f.inst;x=T(),ae.destroy=x}f=f.next}while(f!==C)}}catch(pe){ba(d,d.return,pe)}}function vd(l,d,f){try{var x=d.updateQueue,C=x!==null?x.lastEffect:null;if(C!==null){var T=C.next;x=T;do{if((x.tag&l)===l){var ae=x.inst,pe=ae.destroy;if(pe!==void 0){ae.destroy=void 0,C=d;var Ee=f,Ke=pe;try{Ke()}catch(ct){ba(C,Ee,ct)}}}x=x.next}while(x!==T)}}catch(ct){ba(d,d.return,ct)}}function ij(l){var d=l.updateQueue;if(d!==null){var f=l.stateNode;try{Ys(d,f)}catch(x){ba(l,l.return,x)}}}function lj(l,d,f){f.props=hu(l.type,l.memoizedProps),f.state=l.memoizedState;try{f.componentWillUnmount()}catch(x){ba(l,d,x)}}function ff(l,d){try{var f=l.ref;if(f!==null){switch(l.tag){case 26:case 27:case 5:var x=l.stateNode;break;case 30:x=l.stateNode;break;default:x=l.stateNode}typeof f=="function"?l.refCleanup=f(x):f.current=x}}catch(C){ba(l,d,C)}}function Wo(l,d){var f=l.ref,x=l.refCleanup;if(f!==null)if(typeof x=="function")try{x()}catch(C){ba(l,d,C)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(C){ba(l,d,C)}else f.current=null}function oj(l){var d=l.type,f=l.memoizedProps,x=l.stateNode;try{e:switch(d){case"button":case"input":case"select":case"textarea":f.autoFocus&&x.focus();break e;case"img":f.src?x.src=f.src:f.srcSet&&(x.srcset=f.srcSet)}}catch(C){ba(l,l.return,C)}}function Ox(l,d,f){try{var x=l.stateNode;Uk(x,l.type,f,d),x[Sa]=d}catch(C){ba(l,l.return,C)}}function cj(l){return l.tag===5||l.tag===3||l.tag===26||l.tag===27&&Ad(l.type)||l.tag===4}function Mx(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||cj(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.tag===27&&Ad(l.type)||l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function Rx(l,d,f){var x=l.tag;if(x===5||x===6)l=l.stateNode,d?(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f).insertBefore(l,d):(d=f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,d.appendChild(l),f=f._reactRootContainer,f!=null||d.onclick!==null||(d.onclick=un));else if(x!==4&&(x===27&&Ad(l.type)&&(f=l.stateNode,d=null),l=l.child,l!==null))for(Rx(l,d,f),l=l.sibling;l!==null;)Rx(l,d,f),l=l.sibling}function $m(l,d,f){var x=l.tag;if(x===5||x===6)l=l.stateNode,d?f.insertBefore(l,d):f.appendChild(l);else if(x!==4&&(x===27&&Ad(l.type)&&(f=l.stateNode),l=l.child,l!==null))for($m(l,d,f),l=l.sibling;l!==null;)$m(l,d,f),l=l.sibling}function dj(l){var d=l.stateNode,f=l.memoizedProps;try{for(var x=l.type,C=d.attributes;C.length;)d.removeAttributeNode(C[0]);Cr(d,x,f),d[Zs]=l,d[Sa]=f}catch(T){ba(l,l.return,T)}}var Fc=!1,Hn=!1,Bx=!1,uj=typeof WeakSet=="function"?WeakSet:Set,mr=null;function jk(l,d){if(l=l.containerInfo,ib=up,l=ki(l),Di(l)){if("selectionStart"in l)var f={start:l.selectionStart,end:l.selectionEnd};else e:{f=(f=l.ownerDocument)&&f.defaultView||window;var x=f.getSelection&&f.getSelection();if(x&&x.rangeCount!==0){f=x.anchorNode;var C=x.anchorOffset,T=x.focusNode;x=x.focusOffset;try{f.nodeType,T.nodeType}catch{f=null;break e}var ae=0,pe=-1,Ee=-1,Ke=0,ct=0,ft=l,Ge=null;t:for(;;){for(var at;ft!==f||C!==0&&ft.nodeType!==3||(pe=ae+C),ft!==T||x!==0&&ft.nodeType!==3||(Ee=ae+x),ft.nodeType===3&&(ae+=ft.nodeValue.length),(at=ft.firstChild)!==null;)Ge=ft,ft=at;for(;;){if(ft===l)break t;if(Ge===f&&++Ke===C&&(pe=ae),Ge===T&&++ct===x&&(Ee=ae),(at=ft.nextSibling)!==null)break;ft=Ge,Ge=ft.parentNode}ft=at}f=pe===-1||Ee===-1?null:{start:pe,end:Ee}}else f=null}f=f||{start:0,end:0}}else f=null;for(lb={focusedElem:l,selectionRange:f},up=!1,mr=d;mr!==null;)if(d=mr,l=d.child,(d.subtreeFlags&1028)!==0&&l!==null)l.return=d,mr=l;else for(;mr!==null;){switch(d=mr,T=d.alternate,l=d.flags,d.tag){case 0:if((l&4)!==0&&(l=d.updateQueue,l=l!==null?l.events:null,l!==null))for(f=0;f<l.length;f++)C=l[f],C.ref.impl=C.nextImpl;break;case 11:case 15:break;case 1:if((l&1024)!==0&&T!==null){l=void 0,f=d,C=T.memoizedProps,T=T.memoizedState,x=f.stateNode;try{var Kt=hu(f.type,C);l=x.getSnapshotBeforeUpdate(Kt,T),x.__reactInternalSnapshotBeforeUpdate=l}catch(hs){ba(f,f.return,hs)}}break;case 3:if((l&1024)!==0){if(l=d.stateNode.containerInfo,f=l.nodeType,f===9)db(l);else if(f===1)switch(l.nodeName){case"HEAD":case"HTML":case"BODY":db(l);break;default:l.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((l&1024)!==0)throw Error(n(163))}if(l=d.sibling,l!==null){l.return=d.return,mr=l;break}mr=d.return}}function hj(l,d,f){var x=f.flags;switch(f.tag){case 0:case 11:case 15:Oc(l,f),x&4&&hf(5,f);break;case 1:if(Oc(l,f),x&4)if(l=f.stateNode,d===null)try{l.componentDidMount()}catch(ae){ba(f,f.return,ae)}else{var C=hu(f.type,d.memoizedProps);d=d.memoizedState;try{l.componentDidUpdate(C,d,l.__reactInternalSnapshotBeforeUpdate)}catch(ae){ba(f,f.return,ae)}}x&64&&ij(f),x&512&&ff(f,f.return);break;case 3:if(Oc(l,f),x&64&&(l=f.updateQueue,l!==null)){if(d=null,f.child!==null)switch(f.child.tag){case 27:case 5:d=f.child.stateNode;break;case 1:d=f.child.stateNode}try{Ys(l,d)}catch(ae){ba(f,f.return,ae)}}break;case 27:d===null&&x&4&&dj(f);case 26:case 5:Oc(l,f),d===null&&x&4&&oj(f),x&512&&ff(f,f.return);break;case 12:Oc(l,f);break;case 31:Oc(l,f),x&4&&pj(l,f);break;case 13:Oc(l,f),x&4&&gj(l,f),x&64&&(l=f.memoizedState,l!==null&&(l=l.dehydrated,l!==null&&(f=Ek.bind(null,f),Gk(l,f))));break;case 22:if(x=f.memoizedState!==null||Fc,!x){d=d!==null&&d.memoizedState!==null||Hn,C=Fc;var T=Hn;Fc=x,(Hn=d)&&!T?Mc(l,f,(f.subtreeFlags&8772)!==0):Oc(l,f),Fc=C,Hn=T}break;case 30:break;default:Oc(l,f)}}function fj(l){var d=l.alternate;d!==null&&(l.alternate=null,fj(d)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(d=l.stateNode,d!==null&&Ya(d)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}var Ja=null,Ii=!1;function Ic(l,d,f){for(f=f.child;f!==null;)mj(l,d,f),f=f.sibling}function mj(l,d,f){if(Je&&typeof Je.onCommitFiberUnmount=="function")try{Je.onCommitFiberUnmount(Te,f)}catch{}switch(f.tag){case 26:Hn||Wo(f,d),Ic(l,d,f),f.memoizedState?f.memoizedState.count--:f.stateNode&&(f=f.stateNode,f.parentNode.removeChild(f));break;case 27:Hn||Wo(f,d);var x=Ja,C=Ii;Ad(f.type)&&(Ja=f.stateNode,Ii=!1),Ic(l,d,f),Nf(f.stateNode),Ja=x,Ii=C;break;case 5:Hn||Wo(f,d);case 6:if(x=Ja,C=Ii,Ja=null,Ic(l,d,f),Ja=x,Ii=C,Ja!==null)if(Ii)try{(Ja.nodeType===9?Ja.body:Ja.nodeName==="HTML"?Ja.ownerDocument.body:Ja).removeChild(f.stateNode)}catch(T){ba(f,d,T)}else try{Ja.removeChild(f.stateNode)}catch(T){ba(f,d,T)}break;case 18:Ja!==null&&(Ii?(l=Ja,iN(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,f.stateNode),fh(l)):iN(Ja,f.stateNode));break;case 4:x=Ja,C=Ii,Ja=f.stateNode.containerInfo,Ii=!0,Ic(l,d,f),Ja=x,Ii=C;break;case 0:case 11:case 14:case 15:vd(2,f,d),Hn||vd(4,f,d),Ic(l,d,f);break;case 1:Hn||(Wo(f,d),x=f.stateNode,typeof x.componentWillUnmount=="function"&&lj(f,d,x)),Ic(l,d,f);break;case 21:Ic(l,d,f);break;case 22:Hn=(x=Hn)||f.memoizedState!==null,Ic(l,d,f),Hn=x;break;default:Ic(l,d,f)}}function pj(l,d){if(d.memoizedState===null&&(l=d.alternate,l!==null&&(l=l.memoizedState,l!==null))){l=l.dehydrated;try{fh(l)}catch(f){ba(d,d.return,f)}}}function gj(l,d){if(d.memoizedState===null&&(l=d.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{fh(l)}catch(f){ba(d,d.return,f)}}function Nk(l){switch(l.tag){case 31:case 13:case 19:var d=l.stateNode;return d===null&&(d=l.stateNode=new uj),d;case 22:return l=l.stateNode,d=l._retryCache,d===null&&(d=l._retryCache=new uj),d;default:throw Error(n(435,l.tag))}}function Vm(l,d){var f=Nk(l);d.forEach(function(x){if(!f.has(x)){f.add(x);var C=Tk.bind(null,l,x);x.then(C,C)}})}function Oi(l,d){var f=d.deletions;if(f!==null)for(var x=0;x<f.length;x++){var C=f[x],T=l,ae=d,pe=ae;e:for(;pe!==null;){switch(pe.tag){case 27:if(Ad(pe.type)){Ja=pe.stateNode,Ii=!1;break e}break;case 5:Ja=pe.stateNode,Ii=!1;break e;case 3:case 4:Ja=pe.stateNode.containerInfo,Ii=!0;break e}pe=pe.return}if(Ja===null)throw Error(n(160));mj(T,ae,C),Ja=null,Ii=!1,T=C.alternate,T!==null&&(T.return=null),C.return=null}if(d.subtreeFlags&13886)for(d=d.child;d!==null;)xj(d,l),d=d.sibling}var po=null;function xj(l,d){var f=l.alternate,x=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:Oi(d,l),Mi(l),x&4&&(vd(3,l,l.return),hf(3,l),vd(5,l,l.return));break;case 1:Oi(d,l),Mi(l),x&512&&(Hn||f===null||Wo(f,f.return)),x&64&&Fc&&(l=l.updateQueue,l!==null&&(x=l.callbacks,x!==null&&(f=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=f===null?x:f.concat(x))));break;case 26:var C=po;if(Oi(d,l),Mi(l),x&512&&(Hn||f===null||Wo(f,f.return)),x&4){var T=f!==null?f.memoizedState:null;if(x=l.memoizedState,f===null)if(x===null)if(l.stateNode===null){e:{x=l.type,f=l.memoizedProps,C=C.ownerDocument||C;t:switch(x){case"title":T=C.getElementsByTagName("title")[0],(!T||T[Ca]||T[Zs]||T.namespaceURI==="http://www.w3.org/2000/svg"||T.hasAttribute("itemprop"))&&(T=C.createElement(x),C.head.insertBefore(T,C.querySelector("head > title"))),Cr(T,x,f),T[Zs]=l,ua(T),x=T;break e;case"link":var ae=xN("link","href",C).get(x+(f.href||""));if(ae){for(var pe=0;pe<ae.length;pe++)if(T=ae[pe],T.getAttribute("href")===(f.href==null||f.href===""?null:f.href)&&T.getAttribute("rel")===(f.rel==null?null:f.rel)&&T.getAttribute("title")===(f.title==null?null:f.title)&&T.getAttribute("crossorigin")===(f.crossOrigin==null?null:f.crossOrigin)){ae.splice(pe,1);break t}}T=C.createElement(x),Cr(T,x,f),C.head.appendChild(T);break;case"meta":if(ae=xN("meta","content",C).get(x+(f.content||""))){for(pe=0;pe<ae.length;pe++)if(T=ae[pe],T.getAttribute("content")===(f.content==null?null:""+f.content)&&T.getAttribute("name")===(f.name==null?null:f.name)&&T.getAttribute("property")===(f.property==null?null:f.property)&&T.getAttribute("http-equiv")===(f.httpEquiv==null?null:f.httpEquiv)&&T.getAttribute("charset")===(f.charSet==null?null:f.charSet)){ae.splice(pe,1);break t}}T=C.createElement(x),Cr(T,x,f),C.head.appendChild(T);break;default:throw Error(n(468,x))}T[Zs]=l,ua(T),x=T}l.stateNode=x}else bN(C,l.type,l.stateNode);else l.stateNode=gN(C,x,l.memoizedProps);else T!==x?(T===null?f.stateNode!==null&&(f=f.stateNode,f.parentNode.removeChild(f)):T.count--,x===null?bN(C,l.type,l.stateNode):gN(C,x,l.memoizedProps)):x===null&&l.stateNode!==null&&Ox(l,l.memoizedProps,f.memoizedProps)}break;case 27:Oi(d,l),Mi(l),x&512&&(Hn||f===null||Wo(f,f.return)),f!==null&&x&4&&Ox(l,l.memoizedProps,f.memoizedProps);break;case 5:if(Oi(d,l),Mi(l),x&512&&(Hn||f===null||Wo(f,f.return)),l.flags&32){C=l.stateNode;try{dn(C,"")}catch(Kt){ba(l,l.return,Kt)}}x&4&&l.stateNode!=null&&(C=l.memoizedProps,Ox(l,C,f!==null?f.memoizedProps:C)),x&1024&&(Bx=!0);break;case 6:if(Oi(d,l),Mi(l),x&4){if(l.stateNode===null)throw Error(n(162));x=l.memoizedProps,f=l.stateNode;try{f.nodeValue=x}catch(Kt){ba(l,l.return,Kt)}}break;case 3:if(lp=null,C=po,po=rp(d.containerInfo),Oi(d,l),po=C,Mi(l),x&4&&f!==null&&f.memoizedState.isDehydrated)try{fh(d.containerInfo)}catch(Kt){ba(l,l.return,Kt)}Bx&&(Bx=!1,bj(l));break;case 4:x=po,po=rp(l.stateNode.containerInfo),Oi(d,l),Mi(l),po=x;break;case 12:Oi(d,l),Mi(l);break;case 31:Oi(d,l),Mi(l),x&4&&(x=l.updateQueue,x!==null&&(l.updateQueue=null,Vm(l,x)));break;case 13:Oi(d,l),Mi(l),l.child.flags&8192&&l.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(Ym=Mt()),x&4&&(x=l.updateQueue,x!==null&&(l.updateQueue=null,Vm(l,x)));break;case 22:C=l.memoizedState!==null;var Ee=f!==null&&f.memoizedState!==null,Ke=Fc,ct=Hn;if(Fc=Ke||C,Hn=ct||Ee,Oi(d,l),Hn=ct,Fc=Ke,Mi(l),x&8192)e:for(d=l.stateNode,d._visibility=C?d._visibility&-2:d._visibility|1,C&&(f===null||Ee||Fc||Hn||fu(l)),f=null,d=l;;){if(d.tag===5||d.tag===26){if(f===null){Ee=f=d;try{if(T=Ee.stateNode,C)ae=T.style,typeof ae.setProperty=="function"?ae.setProperty("display","none","important"):ae.display="none";else{pe=Ee.stateNode;var ft=Ee.memoizedProps.style,Ge=ft!=null&&ft.hasOwnProperty("display")?ft.display:null;pe.style.display=Ge==null||typeof Ge=="boolean"?"":(""+Ge).trim()}}catch(Kt){ba(Ee,Ee.return,Kt)}}}else if(d.tag===6){if(f===null){Ee=d;try{Ee.stateNode.nodeValue=C?"":Ee.memoizedProps}catch(Kt){ba(Ee,Ee.return,Kt)}}}else if(d.tag===18){if(f===null){Ee=d;try{var at=Ee.stateNode;C?lN(at,!0):lN(Ee.stateNode,!1)}catch(Kt){ba(Ee,Ee.return,Kt)}}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===l)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===l)break e;for(;d.sibling===null;){if(d.return===null||d.return===l)break e;f===d&&(f=null),d=d.return}f===d&&(f=null),d.sibling.return=d.return,d=d.sibling}x&4&&(x=l.updateQueue,x!==null&&(f=x.retryQueue,f!==null&&(x.retryQueue=null,Vm(l,f))));break;case 19:Oi(d,l),Mi(l),x&4&&(x=l.updateQueue,x!==null&&(l.updateQueue=null,Vm(l,x)));break;case 30:break;case 21:break;default:Oi(d,l),Mi(l)}}function Mi(l){var d=l.flags;if(d&2){try{for(var f,x=l.return;x!==null;){if(cj(x)){f=x;break}x=x.return}if(f==null)throw Error(n(160));switch(f.tag){case 27:var C=f.stateNode,T=Mx(l);$m(l,T,C);break;case 5:var ae=f.stateNode;f.flags&32&&(dn(ae,""),f.flags&=-33);var pe=Mx(l);$m(l,pe,ae);break;case 3:case 4:var Ee=f.stateNode.containerInfo,Ke=Mx(l);Rx(l,Ke,Ee);break;default:throw Error(n(161))}}catch(ct){ba(l,l.return,ct)}l.flags&=-3}d&4096&&(l.flags&=-4097)}function bj(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var d=l;bj(d),d.tag===5&&d.flags&1024&&d.stateNode.reset(),l=l.sibling}}function Oc(l,d){if(d.subtreeFlags&8772)for(d=d.child;d!==null;)hj(l,d.alternate,d),d=d.sibling}function fu(l){for(l=l.child;l!==null;){var d=l;switch(d.tag){case 0:case 11:case 14:case 15:vd(4,d,d.return),fu(d);break;case 1:Wo(d,d.return);var f=d.stateNode;typeof f.componentWillUnmount=="function"&&lj(d,d.return,f),fu(d);break;case 27:Nf(d.stateNode);case 26:case 5:Wo(d,d.return),fu(d);break;case 22:d.memoizedState===null&&fu(d);break;case 30:fu(d);break;default:fu(d)}l=l.sibling}}function Mc(l,d,f){for(f=f&&(d.subtreeFlags&8772)!==0,d=d.child;d!==null;){var x=d.alternate,C=l,T=d,ae=T.flags;switch(T.tag){case 0:case 11:case 15:Mc(C,T,f),hf(4,T);break;case 1:if(Mc(C,T,f),x=T,C=x.stateNode,typeof C.componentDidMount=="function")try{C.componentDidMount()}catch(Ke){ba(x,x.return,Ke)}if(x=T,C=x.updateQueue,C!==null){var pe=x.stateNode;try{var Ee=C.shared.hiddenCallbacks;if(Ee!==null)for(C.shared.hiddenCallbacks=null,C=0;C<Ee.length;C++)Is(Ee[C],pe)}catch(Ke){ba(x,x.return,Ke)}}f&&ae&64&&ij(T),ff(T,T.return);break;case 27:dj(T);case 26:case 5:Mc(C,T,f),f&&x===null&&ae&4&&oj(T),ff(T,T.return);break;case 12:Mc(C,T,f);break;case 31:Mc(C,T,f),f&&ae&4&&pj(C,T);break;case 13:Mc(C,T,f),f&&ae&4&&gj(C,T);break;case 22:T.memoizedState===null&&Mc(C,T,f),ff(T,T.return);break;case 30:break;default:Mc(C,T,f)}d=d.sibling}}function zx(l,d){var f=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),l=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(l=d.memoizedState.cachePool.pool),l!==f&&(l!=null&&l.refCount++,f!=null&&$r(f))}function qx(l,d){l=null,d.alternate!==null&&(l=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==l&&(d.refCount++,l!=null&&$r(l))}function go(l,d,f,x){if(d.subtreeFlags&10256)for(d=d.child;d!==null;)yj(l,d,f,x),d=d.sibling}function yj(l,d,f,x){var C=d.flags;switch(d.tag){case 0:case 11:case 15:go(l,d,f,x),C&2048&&hf(9,d);break;case 1:go(l,d,f,x);break;case 3:go(l,d,f,x),C&2048&&(l=null,d.alternate!==null&&(l=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==l&&(d.refCount++,l!=null&&$r(l)));break;case 12:if(C&2048){go(l,d,f,x),l=d.stateNode;try{var T=d.memoizedProps,ae=T.id,pe=T.onPostCommit;typeof pe=="function"&&pe(ae,d.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(Ee){ba(d,d.return,Ee)}}else go(l,d,f,x);break;case 31:go(l,d,f,x);break;case 13:go(l,d,f,x);break;case 23:break;case 22:T=d.stateNode,ae=d.alternate,d.memoizedState!==null?T._visibility&2?go(l,d,f,x):mf(l,d):T._visibility&2?go(l,d,f,x):(T._visibility|=2,sh(l,d,f,x,(d.subtreeFlags&10256)!==0||!1)),C&2048&&zx(ae,d);break;case 24:go(l,d,f,x),C&2048&&qx(d.alternate,d);break;default:go(l,d,f,x)}}function sh(l,d,f,x,C){for(C=C&&((d.subtreeFlags&10256)!==0||!1),d=d.child;d!==null;){var T=l,ae=d,pe=f,Ee=x,Ke=ae.flags;switch(ae.tag){case 0:case 11:case 15:sh(T,ae,pe,Ee,C),hf(8,ae);break;case 23:break;case 22:var ct=ae.stateNode;ae.memoizedState!==null?ct._visibility&2?sh(T,ae,pe,Ee,C):mf(T,ae):(ct._visibility|=2,sh(T,ae,pe,Ee,C)),C&&Ke&2048&&zx(ae.alternate,ae);break;case 24:sh(T,ae,pe,Ee,C),C&&Ke&2048&&qx(ae.alternate,ae);break;default:sh(T,ae,pe,Ee,C)}d=d.sibling}}function mf(l,d){if(d.subtreeFlags&10256)for(d=d.child;d!==null;){var f=l,x=d,C=x.flags;switch(x.tag){case 22:mf(f,x),C&2048&&zx(x.alternate,x);break;case 24:mf(f,x),C&2048&&qx(x.alternate,x);break;default:mf(f,x)}d=d.sibling}}var pf=8192;function ah(l,d,f){if(l.subtreeFlags&pf)for(l=l.child;l!==null;)vj(l,d,f),l=l.sibling}function vj(l,d,f){switch(l.tag){case 26:ah(l,d,f),l.flags&pf&&l.memoizedState!==null&&oD(f,po,l.memoizedState,l.memoizedProps);break;case 5:ah(l,d,f);break;case 3:case 4:var x=po;po=rp(l.stateNode.containerInfo),ah(l,d,f),po=x;break;case 22:l.memoizedState===null&&(x=l.alternate,x!==null&&x.memoizedState!==null?(x=pf,pf=16777216,ah(l,d,f),pf=x):ah(l,d,f));break;default:ah(l,d,f)}}function jj(l){var d=l.alternate;if(d!==null&&(l=d.child,l!==null)){d.child=null;do d=l.sibling,l.sibling=null,l=d;while(l!==null)}}function gf(l){var d=l.deletions;if((l.flags&16)!==0){if(d!==null)for(var f=0;f<d.length;f++){var x=d[f];mr=x,wj(x,l)}jj(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)Nj(l),l=l.sibling}function Nj(l){switch(l.tag){case 0:case 11:case 15:gf(l),l.flags&2048&&vd(9,l,l.return);break;case 3:gf(l);break;case 12:gf(l);break;case 22:var d=l.stateNode;l.memoizedState!==null&&d._visibility&2&&(l.return===null||l.return.tag!==13)?(d._visibility&=-3,Wm(l)):gf(l);break;default:gf(l)}}function Wm(l){var d=l.deletions;if((l.flags&16)!==0){if(d!==null)for(var f=0;f<d.length;f++){var x=d[f];mr=x,wj(x,l)}jj(l)}for(l=l.child;l!==null;){switch(d=l,d.tag){case 0:case 11:case 15:vd(8,d,d.return),Wm(d);break;case 22:f=d.stateNode,f._visibility&2&&(f._visibility&=-3,Wm(d));break;default:Wm(d)}l=l.sibling}}function wj(l,d){for(;mr!==null;){var f=mr;switch(f.tag){case 0:case 11:case 15:vd(8,f,d);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var x=f.memoizedState.cachePool.pool;x!=null&&x.refCount++}break;case 24:$r(f.memoizedState.cache)}if(x=f.child,x!==null)x.return=f,mr=x;else e:for(f=l;mr!==null;){x=mr;var C=x.sibling,T=x.return;if(fj(x),x===f){mr=null;break e}if(C!==null){C.return=T,mr=C;break e}mr=T}}}var wk={getCacheForType:function(l){var d=fn(qa),f=d.data.get(l);return f===void 0&&(f=l(),d.data.set(l,f)),f},cacheSignal:function(){return fn(qa).controller.signal}},_k=typeof WeakMap=="function"?WeakMap:Map,ca=0,Ea=null,qs=null,Gs=0,xa=0,nl=null,jd=!1,nh=!1,Ux=!1,Rc=0,mn=0,Nd=0,mu=0,Hx=0,rl=0,rh=0,xf=null,Ri=null,$x=!1,Ym=0,_j=0,Km=1/0,Xm=null,wd=null,sr=0,_d=null,ih=null,Bc=0,Vx=0,Wx=null,Sj=null,bf=0,Yx=null;function il(){return(ca&2)!==0&&Gs!==0?Gs&-Gs:R.T!==null?Zx():ja()}function Cj(){if(rl===0)if((Gs&536870912)===0||Ls){var l=qt;qt<<=1,(qt&3932160)===0&&(qt=262144),rl=l}else rl=536870912;return l=Ks.current,l!==null&&(l.flags|=32),rl}function Bi(l,d,f){(l===Ea&&(xa===2||xa===9)||l.cancelPendingCommit!==null)&&(lh(l,0),Sd(l,Gs,rl,!1)),Ze(l,f),((ca&2)===0||l!==Ea)&&(l===Ea&&((ca&2)===0&&(mu|=f),mn===4&&Sd(l,Gs,rl,!1)),Yo(l))}function Aj(l,d,f){if((ca&6)!==0)throw Error(n(327));var x=!f&&(d&127)===0&&(d&l.expiredLanes)===0||yt(l,d),C=x?Ak(l,d):Xx(l,d,!0),T=x;do{if(C===0){nh&&!x&&Sd(l,d,0,!1);break}else{if(f=l.current.alternate,T&&!Sk(f)){C=Xx(l,d,!1),T=!1;continue}if(C===2){if(T=d,l.errorRecoveryDisabledLanes&T)var ae=0;else ae=l.pendingLanes&-536870913,ae=ae!==0?ae:ae&536870912?536870912:0;if(ae!==0){d=ae;e:{var pe=l;C=xf;var Ee=pe.current.memoizedState.isDehydrated;if(Ee&&(lh(pe,ae).flags|=256),ae=Xx(pe,ae,!1),ae!==2){if(Ux&&!Ee){pe.errorRecoveryDisabledLanes|=T,mu|=T,C=4;break e}T=Ri,Ri=C,T!==null&&(Ri===null?Ri=T:Ri.push.apply(Ri,T))}C=ae}if(T=!1,C!==2)continue}}if(C===1){lh(l,0),Sd(l,d,0,!0);break}e:{switch(x=l,T=C,T){case 0:case 1:throw Error(n(345));case 4:if((d&4194048)!==d)break;case 6:Sd(x,d,rl,!jd);break e;case 2:Ri=null;break;case 3:case 5:break;default:throw Error(n(329))}if((d&62914560)===d&&(C=Ym+300-Mt(),10<C)){if(Sd(x,d,rl,!jd),Ue(x,0,!0)!==0)break e;Bc=d,x.timeoutHandle=nN(kj.bind(null,x,f,Ri,Xm,$x,d,rl,mu,rh,jd,T,"Throttled",-0,0),C);break e}kj(x,f,Ri,Xm,$x,d,rl,mu,rh,jd,T,null,-0,0)}}break}while(!0);Yo(l)}function kj(l,d,f,x,C,T,ae,pe,Ee,Ke,ct,ft,Ge,at){if(l.timeoutHandle=-1,ft=d.subtreeFlags,ft&8192||(ft&16785408)===16785408){ft={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:un},vj(d,T,ft);var Kt=(T&62914560)===T?Ym-Mt():(T&4194048)===T?_j-Mt():0;if(Kt=cD(ft,Kt),Kt!==null){Bc=T,l.cancelPendingCommit=Kt(Oj.bind(null,l,d,T,f,x,C,ae,pe,Ee,ct,ft,null,Ge,at)),Sd(l,T,ae,!Ke);return}}Oj(l,d,T,f,x,C,ae,pe,Ee)}function Sk(l){for(var d=l;;){var f=d.tag;if((f===0||f===11||f===15)&&d.flags&16384&&(f=d.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var x=0;x<f.length;x++){var C=f[x],T=C.getSnapshot;C=C.value;try{if(!nn(T(),C))return!1}catch{return!1}}if(f=d.child,d.subtreeFlags&16384&&f!==null)f.return=d,d=f;else{if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function Sd(l,d,f,x){d&=~Hx,d&=~mu,l.suspendedLanes|=d,l.pingedLanes&=~d,x&&(l.warmLanes|=d),x=l.expirationTimes;for(var C=d;0<C;){var T=31-Re(C),ae=1<<T;x[T]=-1,C&=~ae}f!==0&&Fs(l,f,d)}function Gm(){return(ca&6)===0?(yf(0),!1):!0}function Kx(){if(qs!==null){if(xa===0)var l=qs.return;else l=qs,Li=kl=null,kc(l),Be=null,it=0,l=qs;for(;l!==null;)rj(l.alternate,l),l=l.return;qs=null}}function lh(l,d){var f=l.timeoutHandle;f!==-1&&(l.timeoutHandle=-1,Vk(f)),f=l.cancelPendingCommit,f!==null&&(l.cancelPendingCommit=null,f()),Bc=0,Kx(),Ea=l,qs=f=Br(l.current,null),Gs=d,xa=0,nl=null,jd=!1,nh=yt(l,d),Ux=!1,rh=rl=Hx=mu=Nd=mn=0,Ri=xf=null,$x=!1,(d&8)!==0&&(d|=d&32);var x=l.entangledLanes;if(x!==0)for(l=l.entanglements,x&=d;0<x;){var C=31-Re(x),T=1<<C;d|=l[C],x&=~T}return Rc=d,xc(),f}function Dj(l,d){Zt=null,R.H=cf,d===Fe||d===O?(d=Ae(),xa=3):d===$e?(d=Ae(),xa=4):xa=d===Cx?8:d!==null&&typeof d=="object"&&typeof d.then=="function"?6:1,nl=d,qs===null&&(mn=1,Bm(l,zn(d,l.current)))}function Ej(){var l=Ks.current;return l===null?!0:(Gs&4194048)===Gs?ws===null:(Gs&62914560)===Gs||(Gs&536870912)!==0?l===ws:!1}function Tj(){var l=R.H;return R.H=cf,l===null?cf:l}function Lj(){var l=R.A;return R.A=wk,l}function Qm(){mn=4,jd||(Gs&4194048)!==Gs&&Ks.current!==null||(nh=!0),(Nd&134217727)===0&&(mu&134217727)===0||Ea===null||Sd(Ea,Gs,rl,!1)}function Xx(l,d,f){var x=ca;ca|=2;var C=Tj(),T=Lj();(Ea!==l||Gs!==d)&&(Xm=null,lh(l,d)),d=!1;var ae=mn;e:do try{if(xa!==0&&qs!==null){var pe=qs,Ee=nl;switch(xa){case 8:Kx(),ae=6;break e;case 3:case 2:case 9:case 6:Ks.current===null&&(d=!0);var Ke=xa;if(xa=0,nl=null,oh(l,pe,Ee,Ke),f&&nh){ae=0;break e}break;default:Ke=xa,xa=0,nl=null,oh(l,pe,Ee,Ke)}}Ck(),ae=mn;break}catch(ct){Dj(l,ct)}while(!0);return d&&l.shellSuspendCounter++,Li=kl=null,ca=x,R.H=C,R.A=T,qs===null&&(Ea=null,Gs=0,xc()),ae}function Ck(){for(;qs!==null;)Pj(qs)}function Ak(l,d){var f=ca;ca|=2;var x=Tj(),C=Lj();Ea!==l||Gs!==d?(Xm=null,Km=Mt()+500,lh(l,d)):nh=yt(l,d);e:do try{if(xa!==0&&qs!==null){d=qs;var T=nl;t:switch(xa){case 1:xa=0,nl=null,oh(l,d,T,1);break;case 2:case 9:if(I(T)){xa=0,nl=null,Fj(d);break}d=function(){xa!==2&&xa!==9||Ea!==l||(xa=7),Yo(l)},T.then(d,d);break e;case 3:xa=7;break e;case 4:xa=5;break e;case 7:I(T)?(xa=0,nl=null,Fj(d)):(xa=0,nl=null,oh(l,d,T,7));break;case 5:var ae=null;switch(qs.tag){case 26:ae=qs.memoizedState;case 5:case 27:var pe=qs;if(ae?yN(ae):pe.stateNode.complete){xa=0,nl=null;var Ee=pe.sibling;if(Ee!==null)qs=Ee;else{var Ke=pe.return;Ke!==null?(qs=Ke,Jm(Ke)):qs=null}break t}}xa=0,nl=null,oh(l,d,T,5);break;case 6:xa=0,nl=null,oh(l,d,T,6);break;case 8:Kx(),mn=6;break e;default:throw Error(n(462))}}kk();break}catch(ct){Dj(l,ct)}while(!0);return Li=kl=null,R.H=x,R.A=C,ca=f,qs!==null?0:(Ea=null,Gs=0,xc(),mn)}function kk(){for(;qs!==null&&!Lt();)Pj(qs)}function Pj(l){var d=aj(l.alternate,l,Rc);l.memoizedProps=l.pendingProps,d===null?Jm(l):qs=d}function Fj(l){var d=l,f=d.alternate;switch(d.tag){case 15:case 0:d=Q0(f,d,d.pendingProps,d.type,void 0,Gs);break;case 11:d=Q0(f,d,d.pendingProps,d.type.render,d.ref,Gs);break;case 5:kc(d);default:rj(f,d),d=qs=yc(d,Rc),d=aj(f,d,Rc)}l.memoizedProps=l.pendingProps,d===null?Jm(l):qs=d}function oh(l,d,f,x){Li=kl=null,kc(d),Be=null,it=0;var C=d.return;try{if(gk(l,C,d,f,Gs)){mn=1,Bm(l,zn(f,l.current)),qs=null;return}}catch(T){if(C!==null)throw qs=C,T;mn=1,Bm(l,zn(f,l.current)),qs=null;return}d.flags&32768?(Ls||x===1?l=!0:nh||(Gs&536870912)!==0?l=!1:(jd=l=!0,(x===2||x===9||x===3||x===6)&&(x=Ks.current,x!==null&&x.tag===13&&(x.flags|=16384))),Ij(d,l)):Jm(d)}function Jm(l){var d=l;do{if((d.flags&32768)!==0){Ij(d,jd);return}l=d.return;var f=yk(d.alternate,d,Rc);if(f!==null){qs=f;return}if(d=d.sibling,d!==null){qs=d;return}qs=d=l}while(d!==null);mn===0&&(mn=5)}function Ij(l,d){do{var f=vk(l.alternate,l);if(f!==null){f.flags&=32767,qs=f;return}if(f=l.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!d&&(l=l.sibling,l!==null)){qs=l;return}qs=l=f}while(l!==null);mn=6,qs=null}function Oj(l,d,f,x,C,T,ae,pe,Ee){l.cancelPendingCommit=null;do Zm();while(sr!==0);if((ca&6)!==0)throw Error(n(327));if(d!==null){if(d===l.current)throw Error(n(177));if(T=d.lanes|d.childLanes,T|=ld,Wt(l,f,T,ae,pe,Ee),l===Ea&&(qs=Ea=null,Gs=0),ih=d,_d=l,Bc=f,Vx=T,Wx=C,Sj=x,(d.subtreeFlags&10256)!==0||(d.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,Lk(kt,function(){return qj(),null})):(l.callbackNode=null,l.callbackPriority=0),x=(d.flags&13878)!==0,(d.subtreeFlags&13878)!==0||x){x=R.T,R.T=null,C=Q.p,Q.p=2,ae=ca,ca|=4;try{jk(l,d,f)}finally{ca=ae,Q.p=C,R.T=x}}sr=1,Mj(),Rj(),Bj()}}function Mj(){if(sr===1){sr=0;var l=_d,d=ih,f=(d.flags&13878)!==0;if((d.subtreeFlags&13878)!==0||f){f=R.T,R.T=null;var x=Q.p;Q.p=2;var C=ca;ca|=4;try{xj(d,l);var T=lb,ae=ki(l.containerInfo),pe=T.focusedElem,Ee=T.selectionRange;if(ae!==pe&&pe&&pe.ownerDocument&&Ai(pe.ownerDocument.documentElement,pe)){if(Ee!==null&&Di(pe)){var Ke=Ee.start,ct=Ee.end;if(ct===void 0&&(ct=Ke),"selectionStart"in pe)pe.selectionStart=Ke,pe.selectionEnd=Math.min(ct,pe.value.length);else{var ft=pe.ownerDocument||document,Ge=ft&&ft.defaultView||window;if(Ge.getSelection){var at=Ge.getSelection(),Kt=pe.textContent.length,hs=Math.min(Ee.start,Kt),_a=Ee.end===void 0?hs:Math.min(Ee.end,Kt);!at.extend&&hs>_a&&(ae=_a,_a=hs,hs=ae);var qe=Mo(pe,hs),Me=Mo(pe,_a);if(qe&&Me&&(at.rangeCount!==1||at.anchorNode!==qe.node||at.anchorOffset!==qe.offset||at.focusNode!==Me.node||at.focusOffset!==Me.offset)){var We=ft.createRange();We.setStart(qe.node,qe.offset),at.removeAllRanges(),hs>_a?(at.addRange(We),at.extend(Me.node,Me.offset)):(We.setEnd(Me.node,Me.offset),at.addRange(We))}}}}for(ft=[],at=pe;at=at.parentNode;)at.nodeType===1&&ft.push({element:at,left:at.scrollLeft,top:at.scrollTop});for(typeof pe.focus=="function"&&pe.focus(),pe=0;pe<ft.length;pe++){var ut=ft[pe];ut.element.scrollLeft=ut.left,ut.element.scrollTop=ut.top}}up=!!ib,lb=ib=null}finally{ca=C,Q.p=x,R.T=f}}l.current=d,sr=2}}function Rj(){if(sr===2){sr=0;var l=_d,d=ih,f=(d.flags&8772)!==0;if((d.subtreeFlags&8772)!==0||f){f=R.T,R.T=null;var x=Q.p;Q.p=2;var C=ca;ca|=4;try{hj(l,d.alternate,d)}finally{ca=C,Q.p=x,R.T=f}}sr=3}}function Bj(){if(sr===4||sr===3){sr=0,Dt();var l=_d,d=ih,f=Bc,x=Sj;(d.subtreeFlags&10256)!==0||(d.flags&10256)!==0?sr=5:(sr=0,ih=_d=null,zj(l,l.pendingLanes));var C=l.pendingLanes;if(C===0&&(wd=null),$s(f),d=d.stateNode,Je&&typeof Je.onCommitFiberRoot=="function")try{Je.onCommitFiberRoot(Te,d,void 0,(d.current.flags&128)===128)}catch{}if(x!==null){d=R.T,C=Q.p,Q.p=2,R.T=null;try{for(var T=l.onRecoverableError,ae=0;ae<x.length;ae++){var pe=x[ae];T(pe.value,{componentStack:pe.stack})}}finally{R.T=d,Q.p=C}}(Bc&3)!==0&&Zm(),Yo(l),C=l.pendingLanes,(f&261930)!==0&&(C&42)!==0?l===Yx?bf++:(bf=0,Yx=l):bf=0,yf(0)}}function zj(l,d){(l.pooledCacheLanes&=d)===0&&(d=l.pooledCache,d!=null&&(l.pooledCache=null,$r(d)))}function Zm(){return Mj(),Rj(),Bj(),qj()}function qj(){if(sr!==5)return!1;var l=_d,d=Vx;Vx=0;var f=$s(Bc),x=R.T,C=Q.p;try{Q.p=32>f?32:f,R.T=null,f=Wx,Wx=null;var T=_d,ae=Bc;if(sr=0,ih=_d=null,Bc=0,(ca&6)!==0)throw Error(n(331));var pe=ca;if(ca|=4,Nj(T.current),yj(T,T.current,ae,f),ca=pe,yf(0,!1),Je&&typeof Je.onPostCommitFiberRoot=="function")try{Je.onPostCommitFiberRoot(Te,T)}catch{}return!0}finally{Q.p=C,R.T=x,zj(l,d)}}function Uj(l,d,f){d=zn(f,d),d=Sx(l.stateNode,d,2),l=Ot(l,d,2),l!==null&&(Ze(l,2),Yo(l))}function ba(l,d,f){if(l.tag===3)Uj(l,l,f);else for(;d!==null;){if(d.tag===3){Uj(d,l,f);break}else if(d.tag===1){var x=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof x.componentDidCatch=="function"&&(wd===null||!wd.has(x))){l=zn(f,l),f=H0(2),x=Ot(d,f,2),x!==null&&($0(f,x,d,l),Ze(x,2),Yo(x));break}}d=d.return}}function Gx(l,d,f){var x=l.pingCache;if(x===null){x=l.pingCache=new _k;var C=new Set;x.set(d,C)}else C=x.get(d),C===void 0&&(C=new Set,x.set(d,C));C.has(f)||(Ux=!0,C.add(f),l=Dk.bind(null,l,d,f),d.then(l,l))}function Dk(l,d,f){var x=l.pingCache;x!==null&&x.delete(d),l.pingedLanes|=l.suspendedLanes&f,l.warmLanes&=~f,Ea===l&&(Gs&f)===f&&(mn===4||mn===3&&(Gs&62914560)===Gs&&300>Mt()-Ym?(ca&2)===0&&lh(l,0):Hx|=f,rh===Gs&&(rh=0)),Yo(l)}function Hj(l,d){d===0&&(d=Ce()),l=Nn(l,d),l!==null&&(Ze(l,d),Yo(l))}function Ek(l){var d=l.memoizedState,f=0;d!==null&&(f=d.retryLane),Hj(l,f)}function Tk(l,d){var f=0;switch(l.tag){case 31:case 13:var x=l.stateNode,C=l.memoizedState;C!==null&&(f=C.retryLane);break;case 19:x=l.stateNode;break;case 22:x=l.stateNode._retryCache;break;default:throw Error(n(314))}x!==null&&x.delete(d),Hj(l,f)}function Lk(l,d){return Ie(l,d)}var ep=null,ch=null,Qx=!1,tp=!1,Jx=!1,Cd=0;function Yo(l){l!==ch&&l.next===null&&(ch===null?ep=ch=l:ch=ch.next=l),tp=!0,Qx||(Qx=!0,Fk())}function yf(l,d){if(!Jx&&tp){Jx=!0;do for(var f=!1,x=ep;x!==null;){if(l!==0){var C=x.pendingLanes;if(C===0)var T=0;else{var ae=x.suspendedLanes,pe=x.pingedLanes;T=(1<<31-Re(42|l)+1)-1,T&=C&~(ae&~pe),T=T&201326741?T&201326741|1:T?T|2:0}T!==0&&(f=!0,Yj(x,T))}else T=Gs,T=Ue(x,x===Ea?T:0,x.cancelPendingCommit!==null||x.timeoutHandle!==-1),(T&3)===0||yt(x,T)||(f=!0,Yj(x,T));x=x.next}while(f);Jx=!1}}function Pk(){$j()}function $j(){tp=Qx=!1;var l=0;Cd!==0&&$k()&&(l=Cd);for(var d=Mt(),f=null,x=ep;x!==null;){var C=x.next,T=Vj(x,d);T===0?(x.next=null,f===null?ep=C:f.next=C,C===null&&(ch=f)):(f=x,(l!==0||(T&3)!==0)&&(tp=!0)),x=C}sr!==0&&sr!==5||yf(l),Cd!==0&&(Cd=0)}function Vj(l,d){for(var f=l.suspendedLanes,x=l.pingedLanes,C=l.expirationTimes,T=l.pendingLanes&-62914561;0<T;){var ae=31-Re(T),pe=1<<ae,Ee=C[ae];Ee===-1?((pe&f)===0||(pe&x)!==0)&&(C[ae]=vt(pe,d)):Ee<=d&&(l.expiredLanes|=pe),T&=~pe}if(d=Ea,f=Gs,f=Ue(l,l===d?f:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),x=l.callbackNode,f===0||l===d&&(xa===2||xa===9)||l.cancelPendingCommit!==null)return x!==null&&x!==null&&He(x),l.callbackNode=null,l.callbackPriority=0;if((f&3)===0||yt(l,f)){if(d=f&-f,d===l.callbackPriority)return d;switch(x!==null&&He(x),$s(f)){case 2:case 8:f=rs;break;case 32:f=kt;break;case 268435456:f=$t;break;default:f=kt}return x=Wj.bind(null,l),f=Ie(f,x),l.callbackPriority=d,l.callbackNode=f,d}return x!==null&&x!==null&&He(x),l.callbackPriority=2,l.callbackNode=null,2}function Wj(l,d){if(sr!==0&&sr!==5)return l.callbackNode=null,l.callbackPriority=0,null;var f=l.callbackNode;if(Zm()&&l.callbackNode!==f)return null;var x=Gs;return x=Ue(l,l===Ea?x:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),x===0?null:(Aj(l,x,d),Vj(l,Mt()),l.callbackNode!=null&&l.callbackNode===f?Wj.bind(null,l):null)}function Yj(l,d){if(Zm())return null;Aj(l,d,!0)}function Fk(){Wk(function(){(ca&6)!==0?Ie(Bt,Pk):$j()})}function Zx(){if(Cd===0){var l=w;l===0&&(l=is,is<<=1,(is&261888)===0&&(is=256)),Cd=l}return Cd}function Kj(l){return l==null||typeof l=="symbol"||typeof l=="boolean"?null:typeof l=="function"?l:ai(""+l)}function Xj(l,d){var f=d.ownerDocument.createElement("input");return f.name=d.name,f.value=d.value,l.id&&f.setAttribute("form",l.id),d.parentNode.insertBefore(f,d),l=new FormData(l),f.parentNode.removeChild(f),l}function Ik(l,d,f,x,C){if(d==="submit"&&f&&f.stateNode===C){var T=Kj((C[Sa]||null).action),ae=x.submitter;ae&&(d=(d=ae[Sa]||null)?Kj(d.formAction):ae.getAttribute("formAction"),d!==null&&(T=d,ae=null));var pe=new Pr("action","action",null,x,C);l.push({event:pe,listeners:[{instance:null,listener:function(){if(x.defaultPrevented){if(Cd!==0){var Ee=ae?Xj(C,ae):new FormData(C);yx(f,{pending:!0,data:Ee,method:C.method,action:T},null,Ee)}}else typeof T=="function"&&(pe.preventDefault(),Ee=ae?Xj(C,ae):new FormData(C),yx(f,{pending:!0,data:Ee,method:C.method,action:T},T,Ee))},currentTarget:C}]})}}for(var eb=0;eb<ro.length;eb++){var tb=ro[eb],Ok=tb.toLowerCase(),Mk=tb[0].toUpperCase()+tb.slice(1);Rr(Ok,"on"+Mk)}Rr(Zn,"onAnimationEnd"),Rr(Ro,"onAnimationIteration"),Rr(eu,"onAnimationStart"),Rr("dblclick","onDoubleClick"),Rr("focusin","onFocus"),Rr("focusout","onBlur"),Rr(tu,"onTransitionRun"),Rr(su,"onTransitionStart"),Rr(au,"onTransitionCancel"),Rr(id,"onTransitionEnd"),hi("onMouseEnter",["mouseout","mouseover"]),hi("onMouseLeave",["mouseout","mouseover"]),hi("onPointerEnter",["pointerout","pointerover"]),hi("onPointerLeave",["pointerout","pointerover"]),Fn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Fn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Fn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Fn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Fn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Fn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Rk=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(vf));function Gj(l,d){d=(d&4)!==0;for(var f=0;f<l.length;f++){var x=l[f],C=x.event;x=x.listeners;e:{var T=void 0;if(d)for(var ae=x.length-1;0<=ae;ae--){var pe=x[ae],Ee=pe.instance,Ke=pe.currentTarget;if(pe=pe.listener,Ee!==T&&C.isPropagationStopped())break e;T=pe,C.currentTarget=Ke;try{T(C)}catch(ct){Bo(ct)}C.currentTarget=null,T=Ee}else for(ae=0;ae<x.length;ae++){if(pe=x[ae],Ee=pe.instance,Ke=pe.currentTarget,pe=pe.listener,Ee!==T&&C.isPropagationStopped())break e;T=pe,C.currentTarget=Ke;try{T(C)}catch(ct){Bo(ct)}C.currentTarget=null,T=Ee}}}}function Us(l,d){var f=d[yr];f===void 0&&(f=d[yr]=new Set);var x=l+"__bubble";f.has(x)||(Qj(d,l,2,!1),f.add(x))}function sb(l,d,f){var x=0;d&&(x|=4),Qj(f,l,x,d)}var sp="_reactListening"+Math.random().toString(36).slice(2);function ab(l){if(!l[sp]){l[sp]=!0,Co.forEach(function(f){f!=="selectionchange"&&(Rk.has(f)||sb(f,!1,l),sb(f,!0,l))});var d=l.nodeType===9?l:l.ownerDocument;d===null||d[sp]||(d[sp]=!0,sb("selectionchange",!1,d))}}function Qj(l,d,f,x){switch(CN(d)){case 2:var C=hD;break;case 8:C=fD;break;default:C=bb}f=C.bind(null,d,f,l),C=void 0,!dc||d!=="touchstart"&&d!=="touchmove"&&d!=="wheel"||(C=!0),x?C!==void 0?l.addEventListener(d,f,{capture:!0,passive:C}):l.addEventListener(d,f,!0):C!==void 0?l.addEventListener(d,f,{passive:C}):l.addEventListener(d,f,!1)}function nb(l,d,f,x,C){var T=x;if((d&1)===0&&(d&2)===0&&x!==null)e:for(;;){if(x===null)return;var ae=x.tag;if(ae===3||ae===4){var pe=x.stateNode.containerInfo;if(pe===C)break;if(ae===4)for(ae=x.return;ae!==null;){var Ee=ae.tag;if((Ee===3||Ee===4)&&ae.stateNode.containerInfo===C)return;ae=ae.return}for(;pe!==null;){if(ae=ga(pe),ae===null)return;if(Ee=ae.tag,Ee===5||Ee===6||Ee===26||Ee===27){x=T=ae;continue e}pe=pe.parentNode}}x=x.return}cc(function(){var Ke=T,ct=yl(f),ft=[];e:{var Ge=nu.get(l);if(Ge!==void 0){var at=Pr,Kt=l;switch(l){case"keypress":if(Lr(f)===0)break e;case"keydown":case"keyup":at=Vs;break;case"focusin":Kt="focus",at=wi;break;case"focusout":Kt="blur",at=wi;break;case"beforeblur":case"afterblur":at=wi;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":at=ji;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":at=uc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":at=Xa;break;case Zn:case Ro:case eu:at=F;break;case id:at=xn;break;case"scroll":case"scrollend":at=yi;break;case"wheel":at=or;break;case"copy":case"cut":case"paste":at=_e;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":at=Aa;break;case"toggle":case"beforetoggle":at=eo}var hs=(d&4)!==0,_a=!hs&&(l==="scroll"||l==="scrollend"),qe=hs?Ge!==null?Ge+"Capture":null:Ge;hs=[];for(var Me=Ke,We;Me!==null;){var ut=Me;if(We=ut.stateNode,ut=ut.tag,ut!==5&&ut!==26&&ut!==27||We===null||qe===null||(ut=lr(Me,qe),ut!=null&&hs.push(jf(Me,ut,We))),_a)break;Me=Me.return}0<hs.length&&(Ge=new at(Ge,Kt,null,f,ct),ft.push({event:Ge,listeners:hs}))}}if((d&7)===0){e:{if(Ge=l==="mouseover"||l==="pointerover",at=l==="mouseout"||l==="pointerout",Ge&&f!==Er&&(Kt=f.relatedTarget||f.fromElement)&&(ga(Kt)||Kt[cn]))break e;if((at||Ge)&&(Ge=ct.window===ct?ct:(Ge=ct.ownerDocument)?Ge.defaultView||Ge.parentWindow:window,at?(Kt=f.relatedTarget||f.toElement,at=Ke,Kt=Kt?ga(Kt):null,Kt!==null&&(_a=i(Kt),hs=Kt.tag,Kt!==_a||hs!==5&&hs!==27&&hs!==6)&&(Kt=null)):(at=null,Kt=Ke),at!==Kt)){if(hs=ji,ut="onMouseLeave",qe="onMouseEnter",Me="mouse",(l==="pointerout"||l==="pointerover")&&(hs=Aa,ut="onPointerLeave",qe="onPointerEnter",Me="pointer"),_a=at==null?Ge:Dr(at),We=Kt==null?Ge:Dr(Kt),Ge=new hs(ut,Me+"leave",at,f,ct),Ge.target=_a,Ge.relatedTarget=We,ut=null,ga(ct)===Ke&&(hs=new hs(qe,Me+"enter",Kt,f,ct),hs.target=We,hs.relatedTarget=_a,ut=hs),_a=ut,at&&Kt)t:{for(hs=Bk,qe=at,Me=Kt,We=0,ut=qe;ut;ut=hs(ut))We++;ut=0;for(var ns=Me;ns;ns=hs(ns))ut++;for(;0<We-ut;)qe=hs(qe),We--;for(;0<ut-We;)Me=hs(Me),ut--;for(;We--;){if(qe===Me||Me!==null&&qe===Me.alternate){hs=qe;break t}qe=hs(qe),Me=hs(Me)}hs=null}else hs=null;at!==null&&Jj(ft,Ge,at,hs,!1),Kt!==null&&_a!==null&&Jj(ft,_a,Kt,hs,!0)}}e:{if(Ge=Ke?Dr(Ke):window,at=Ge.nodeName&&Ge.nodeName.toLowerCase(),at==="select"||at==="input"&&Ge.type==="file")var ra=Ji;else if(Qn(Ge))if(vn)ra=jr;else{ra=Oa;var Qt=ao}else at=Ge.nodeName,!at||at.toLowerCase()!=="input"||Ge.type!=="checkbox"&&Ge.type!=="radio"?Ke&&Ql(Ke.elementType)&&(ra=Ji):ra=gc;if(ra&&(ra=ra(l,Ke))){cr(ft,ra,f,ct);break e}Qt&&Qt(l,Ge,Ke),l==="focusout"&&Ke&&Ge.type==="number"&&Ke.memoizedProps.value!=null&&Xl(Ge,"number",Ge.value)}switch(Qt=Ke?Dr(Ke):window,l){case"focusin":(Qn(Qt)||Qt.contentEditable==="true")&&(Nr=Qt,el=Ke,Mn=null);break;case"focusout":Mn=el=Nr=null;break;case"mousedown":Mr=!0;break;case"contextmenu":case"mouseup":case"dragend":Mr=!1,Ws(ft,f,ct);break;case"selectionchange":if(no)break;case"keydown":case"keyup":Ws(ft,f,ct)}var Ps;if(Gn)e:{switch(l){case"compositionstart":var Qs="onCompositionStart";break e;case"compositionend":Qs="onCompositionEnd";break e;case"compositionupdate":Qs="onCompositionUpdate";break e}Qs=void 0}else _i?wl(l,f)&&(Qs="onCompositionEnd"):l==="keydown"&&f.keyCode===229&&(Qs="onCompositionStart");Qs&&(ni&&f.locale!=="ko"&&(_i||Qs!=="onCompositionStart"?Qs==="onCompositionEnd"&&_i&&(Ps=Jl()):(Kn=ct,xi="value"in Kn?Kn.value:Kn.textContent,_i=!0)),Qt=ap(Ke,Qs),0<Qt.length&&(Qs=new ze(Qs,l,null,f,ct),ft.push({event:Qs,listeners:Qt}),Ps?Qs.data=Ps:(Ps=Po(f),Ps!==null&&(Qs.data=Ps)))),(Ps=so?Ia(l,f):Qi(l,f))&&(Qs=ap(Ke,"onBeforeInput"),0<Qs.length&&(Qt=new ze("onBeforeInput","beforeinput",null,f,ct),ft.push({event:Qt,listeners:Qs}),Qt.data=Ps)),Ik(ft,l,Ke,f,ct)}Gj(ft,d)})}function jf(l,d,f){return{instance:l,listener:d,currentTarget:f}}function ap(l,d){for(var f=d+"Capture",x=[];l!==null;){var C=l,T=C.stateNode;if(C=C.tag,C!==5&&C!==26&&C!==27||T===null||(C=lr(l,f),C!=null&&x.unshift(jf(l,C,T)),C=lr(l,d),C!=null&&x.push(jf(l,C,T))),l.tag===3)return x;l=l.return}return[]}function Bk(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5&&l.tag!==27);return l||null}function Jj(l,d,f,x,C){for(var T=d._reactName,ae=[];f!==null&&f!==x;){var pe=f,Ee=pe.alternate,Ke=pe.stateNode;if(pe=pe.tag,Ee!==null&&Ee===x)break;pe!==5&&pe!==26&&pe!==27||Ke===null||(Ee=Ke,C?(Ke=lr(f,T),Ke!=null&&ae.unshift(jf(f,Ke,Ee))):C||(Ke=lr(f,T),Ke!=null&&ae.push(jf(f,Ke,Ee)))),f=f.return}ae.length!==0&&l.push({event:d,listeners:ae})}var zk=/\r\n?/g,qk=/\u0000|\uFFFD/g;function Zj(l){return(typeof l=="string"?l:""+l).replace(zk,`
`).replace(qk,"")}function eN(l,d){return d=Zj(d),Zj(l)===d}function wa(l,d,f,x,C,T){switch(f){case"children":typeof x=="string"?d==="body"||d==="textarea"&&x===""||dn(l,x):(typeof x=="number"||typeof x=="bigint")&&d!=="body"&&dn(l,""+x);break;case"className":Kl(l,"class",x);break;case"tabIndex":Kl(l,"tabindex",x);break;case"dir":case"role":case"viewBox":case"width":case"height":Kl(l,f,x);break;case"style":Ki(l,x,T);break;case"data":if(d!=="object"){Kl(l,"data",x);break}case"src":case"href":if(x===""&&(d!=="a"||f!=="href")){l.removeAttribute(f);break}if(x==null||typeof x=="function"||typeof x=="symbol"||typeof x=="boolean"){l.removeAttribute(f);break}x=ai(""+x),l.setAttribute(f,x);break;case"action":case"formAction":if(typeof x=="function"){l.setAttribute(f,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof T=="function"&&(f==="formAction"?(d!=="input"&&wa(l,d,"name",C.name,C,null),wa(l,d,"formEncType",C.formEncType,C,null),wa(l,d,"formMethod",C.formMethod,C,null),wa(l,d,"formTarget",C.formTarget,C,null)):(wa(l,d,"encType",C.encType,C,null),wa(l,d,"method",C.method,C,null),wa(l,d,"target",C.target,C,null)));if(x==null||typeof x=="symbol"||typeof x=="boolean"){l.removeAttribute(f);break}x=ai(""+x),l.setAttribute(f,x);break;case"onClick":x!=null&&(l.onclick=un);break;case"onScroll":x!=null&&Us("scroll",l);break;case"onScrollEnd":x!=null&&Us("scrollend",l);break;case"dangerouslySetInnerHTML":if(x!=null){if(typeof x!="object"||!("__html"in x))throw Error(n(61));if(f=x.__html,f!=null){if(C.children!=null)throw Error(n(60));l.innerHTML=f}}break;case"multiple":l.multiple=x&&typeof x!="function"&&typeof x!="symbol";break;case"muted":l.muted=x&&typeof x!="function"&&typeof x!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(x==null||typeof x=="function"||typeof x=="boolean"||typeof x=="symbol"){l.removeAttribute("xlink:href");break}f=ai(""+x),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":x!=null&&typeof x!="function"&&typeof x!="symbol"?l.setAttribute(f,""+x):l.removeAttribute(f);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":x&&typeof x!="function"&&typeof x!="symbol"?l.setAttribute(f,""):l.removeAttribute(f);break;case"capture":case"download":x===!0?l.setAttribute(f,""):x!==!1&&x!=null&&typeof x!="function"&&typeof x!="symbol"?l.setAttribute(f,x):l.removeAttribute(f);break;case"cols":case"rows":case"size":case"span":x!=null&&typeof x!="function"&&typeof x!="symbol"&&!isNaN(x)&&1<=x?l.setAttribute(f,x):l.removeAttribute(f);break;case"rowSpan":case"start":x==null||typeof x=="function"||typeof x=="symbol"||isNaN(x)?l.removeAttribute(f):l.setAttribute(f,x);break;case"popover":Us("beforetoggle",l),Us("toggle",l),fi(l,"popover",x);break;case"xlinkActuate":ta(l,"http://www.w3.org/1999/xlink","xlink:actuate",x);break;case"xlinkArcrole":ta(l,"http://www.w3.org/1999/xlink","xlink:arcrole",x);break;case"xlinkRole":ta(l,"http://www.w3.org/1999/xlink","xlink:role",x);break;case"xlinkShow":ta(l,"http://www.w3.org/1999/xlink","xlink:show",x);break;case"xlinkTitle":ta(l,"http://www.w3.org/1999/xlink","xlink:title",x);break;case"xlinkType":ta(l,"http://www.w3.org/1999/xlink","xlink:type",x);break;case"xmlBase":ta(l,"http://www.w3.org/XML/1998/namespace","xml:base",x);break;case"xmlLang":ta(l,"http://www.w3.org/XML/1998/namespace","xml:lang",x);break;case"xmlSpace":ta(l,"http://www.w3.org/XML/1998/namespace","xml:space",x);break;case"is":fi(l,"is",x);break;case"innerText":case"textContent":break;default:(!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(f=Eo.get(f)||f,fi(l,f,x))}}function rb(l,d,f,x,C,T){switch(f){case"style":Ki(l,x,T);break;case"dangerouslySetInnerHTML":if(x!=null){if(typeof x!="object"||!("__html"in x))throw Error(n(61));if(f=x.__html,f!=null){if(C.children!=null)throw Error(n(60));l.innerHTML=f}}break;case"children":typeof x=="string"?dn(l,x):(typeof x=="number"||typeof x=="bigint")&&dn(l,""+x);break;case"onScroll":x!=null&&Us("scroll",l);break;case"onScrollEnd":x!=null&&Us("scrollend",l);break;case"onClick":x!=null&&(l.onclick=un);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Wn.hasOwnProperty(f))e:{if(f[0]==="o"&&f[1]==="n"&&(C=f.endsWith("Capture"),d=f.slice(2,C?f.length-7:void 0),T=l[Sa]||null,T=T!=null?T[f]:null,typeof T=="function"&&l.removeEventListener(d,T,C),typeof x=="function")){typeof T!="function"&&T!==null&&(f in l?l[f]=null:l.hasAttribute(f)&&l.removeAttribute(f)),l.addEventListener(d,x,C);break e}f in l?l[f]=x:x===!0?l.setAttribute(f,""):fi(l,f,x)}}}function Cr(l,d,f){switch(d){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Us("error",l),Us("load",l);var x=!1,C=!1,T;for(T in f)if(f.hasOwnProperty(T)){var ae=f[T];if(ae!=null)switch(T){case"src":x=!0;break;case"srcSet":C=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,d));default:wa(l,d,T,ae,f,null)}}C&&wa(l,d,"srcSet",f.srcSet,f,null),x&&wa(l,d,"src",f.src,f,null);return;case"input":Us("invalid",l);var pe=T=ae=C=null,Ee=null,Ke=null;for(x in f)if(f.hasOwnProperty(x)){var ct=f[x];if(ct!=null)switch(x){case"name":C=ct;break;case"type":ae=ct;break;case"checked":Ee=ct;break;case"defaultChecked":Ke=ct;break;case"value":T=ct;break;case"defaultValue":pe=ct;break;case"children":case"dangerouslySetInnerHTML":if(ct!=null)throw Error(n(137,d));break;default:wa(l,d,x,ct,f,null)}}Do(l,T,pe,Ee,Ke,ae,C,!1);return;case"select":Us("invalid",l),x=ae=T=null;for(C in f)if(f.hasOwnProperty(C)&&(pe=f[C],pe!=null))switch(C){case"value":T=pe;break;case"defaultValue":ae=pe;break;case"multiple":x=pe;default:wa(l,d,C,pe,f,null)}d=T,f=ae,l.multiple=!!x,d!=null?Na(l,!!x,d,!1):f!=null&&Na(l,!!x,f,!0);return;case"textarea":Us("invalid",l),T=C=x=null;for(ae in f)if(f.hasOwnProperty(ae)&&(pe=f[ae],pe!=null))switch(ae){case"value":x=pe;break;case"defaultValue":C=pe;break;case"children":T=pe;break;case"dangerouslySetInnerHTML":if(pe!=null)throw Error(n(91));break;default:wa(l,d,ae,pe,f,null)}bl(l,x,C,T);return;case"option":for(Ee in f)if(f.hasOwnProperty(Ee)&&(x=f[Ee],x!=null))switch(Ee){case"selected":l.selected=x&&typeof x!="function"&&typeof x!="symbol";break;default:wa(l,d,Ee,x,f,null)}return;case"dialog":Us("beforetoggle",l),Us("toggle",l),Us("cancel",l),Us("close",l);break;case"iframe":case"object":Us("load",l);break;case"video":case"audio":for(x=0;x<vf.length;x++)Us(vf[x],l);break;case"image":Us("error",l),Us("load",l);break;case"details":Us("toggle",l);break;case"embed":case"source":case"link":Us("error",l),Us("load",l);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Ke in f)if(f.hasOwnProperty(Ke)&&(x=f[Ke],x!=null))switch(Ke){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,d));default:wa(l,d,Ke,x,f,null)}return;default:if(Ql(d)){for(ct in f)f.hasOwnProperty(ct)&&(x=f[ct],x!==void 0&&rb(l,d,ct,x,f,void 0));return}}for(pe in f)f.hasOwnProperty(pe)&&(x=f[pe],x!=null&&wa(l,d,pe,x,f,null))}function Uk(l,d,f,x){switch(d){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var C=null,T=null,ae=null,pe=null,Ee=null,Ke=null,ct=null;for(at in f){var ft=f[at];if(f.hasOwnProperty(at)&&ft!=null)switch(at){case"checked":break;case"value":break;case"defaultValue":Ee=ft;default:x.hasOwnProperty(at)||wa(l,d,at,null,x,ft)}}for(var Ge in x){var at=x[Ge];if(ft=f[Ge],x.hasOwnProperty(Ge)&&(at!=null||ft!=null))switch(Ge){case"type":T=at;break;case"name":C=at;break;case"checked":Ke=at;break;case"defaultChecked":ct=at;break;case"value":ae=at;break;case"defaultValue":pe=at;break;case"children":case"dangerouslySetInnerHTML":if(at!=null)throw Error(n(137,d));break;default:at!==ft&&wa(l,d,Ge,at,x,ft)}}On(l,ae,pe,Ee,Ke,ct,T,C);return;case"select":at=ae=pe=Ge=null;for(T in f)if(Ee=f[T],f.hasOwnProperty(T)&&Ee!=null)switch(T){case"value":break;case"multiple":at=Ee;default:x.hasOwnProperty(T)||wa(l,d,T,null,x,Ee)}for(C in x)if(T=x[C],Ee=f[C],x.hasOwnProperty(C)&&(T!=null||Ee!=null))switch(C){case"value":Ge=T;break;case"defaultValue":pe=T;break;case"multiple":ae=T;default:T!==Ee&&wa(l,d,C,T,x,Ee)}d=pe,f=ae,x=at,Ge!=null?Na(l,!!f,Ge,!1):!!x!=!!f&&(d!=null?Na(l,!!f,d,!0):Na(l,!!f,f?[]:"",!1));return;case"textarea":at=Ge=null;for(pe in f)if(C=f[pe],f.hasOwnProperty(pe)&&C!=null&&!x.hasOwnProperty(pe))switch(pe){case"value":break;case"children":break;default:wa(l,d,pe,null,x,C)}for(ae in x)if(C=x[ae],T=f[ae],x.hasOwnProperty(ae)&&(C!=null||T!=null))switch(ae){case"value":Ge=C;break;case"defaultValue":at=C;break;case"children":break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(n(91));break;default:C!==T&&wa(l,d,ae,C,x,T)}si(l,Ge,at);return;case"option":for(var Kt in f)if(Ge=f[Kt],f.hasOwnProperty(Kt)&&Ge!=null&&!x.hasOwnProperty(Kt))switch(Kt){case"selected":l.selected=!1;break;default:wa(l,d,Kt,null,x,Ge)}for(Ee in x)if(Ge=x[Ee],at=f[Ee],x.hasOwnProperty(Ee)&&Ge!==at&&(Ge!=null||at!=null))switch(Ee){case"selected":l.selected=Ge&&typeof Ge!="function"&&typeof Ge!="symbol";break;default:wa(l,d,Ee,Ge,x,at)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var hs in f)Ge=f[hs],f.hasOwnProperty(hs)&&Ge!=null&&!x.hasOwnProperty(hs)&&wa(l,d,hs,null,x,Ge);for(Ke in x)if(Ge=x[Ke],at=f[Ke],x.hasOwnProperty(Ke)&&Ge!==at&&(Ge!=null||at!=null))switch(Ke){case"children":case"dangerouslySetInnerHTML":if(Ge!=null)throw Error(n(137,d));break;default:wa(l,d,Ke,Ge,x,at)}return;default:if(Ql(d)){for(var _a in f)Ge=f[_a],f.hasOwnProperty(_a)&&Ge!==void 0&&!x.hasOwnProperty(_a)&&rb(l,d,_a,void 0,x,Ge);for(ct in x)Ge=x[ct],at=f[ct],!x.hasOwnProperty(ct)||Ge===at||Ge===void 0&&at===void 0||rb(l,d,ct,Ge,x,at);return}}for(var qe in f)Ge=f[qe],f.hasOwnProperty(qe)&&Ge!=null&&!x.hasOwnProperty(qe)&&wa(l,d,qe,null,x,Ge);for(ft in x)Ge=x[ft],at=f[ft],!x.hasOwnProperty(ft)||Ge===at||Ge==null&&at==null||wa(l,d,ft,Ge,x,at)}function tN(l){switch(l){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Hk(){if(typeof performance.getEntriesByType=="function"){for(var l=0,d=0,f=performance.getEntriesByType("resource"),x=0;x<f.length;x++){var C=f[x],T=C.transferSize,ae=C.initiatorType,pe=C.duration;if(T&&pe&&tN(ae)){for(ae=0,pe=C.responseEnd,x+=1;x<f.length;x++){var Ee=f[x],Ke=Ee.startTime;if(Ke>pe)break;var ct=Ee.transferSize,ft=Ee.initiatorType;ct&&tN(ft)&&(Ee=Ee.responseEnd,ae+=ct*(Ee<pe?1:(pe-Ke)/(Ee-Ke)))}if(--x,d+=8*(T+ae)/(C.duration/1e3),l++,10<l)break}}if(0<l)return d/l/1e6}return navigator.connection&&(l=navigator.connection.downlink,typeof l=="number")?l:5}var ib=null,lb=null;function np(l){return l.nodeType===9?l:l.ownerDocument}function sN(l){switch(l){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function aN(l,d){if(l===0)switch(d){case"svg":return 1;case"math":return 2;default:return 0}return l===1&&d==="foreignObject"?0:l}function ob(l,d){return l==="textarea"||l==="noscript"||typeof d.children=="string"||typeof d.children=="number"||typeof d.children=="bigint"||typeof d.dangerouslySetInnerHTML=="object"&&d.dangerouslySetInnerHTML!==null&&d.dangerouslySetInnerHTML.__html!=null}var cb=null;function $k(){var l=window.event;return l&&l.type==="popstate"?l===cb?!1:(cb=l,!0):(cb=null,!1)}var nN=typeof setTimeout=="function"?setTimeout:void 0,Vk=typeof clearTimeout=="function"?clearTimeout:void 0,rN=typeof Promise=="function"?Promise:void 0,Wk=typeof queueMicrotask=="function"?queueMicrotask:typeof rN<"u"?function(l){return rN.resolve(null).then(l).catch(Yk)}:nN;function Yk(l){setTimeout(function(){throw l})}function Ad(l){return l==="head"}function iN(l,d){var f=d,x=0;do{var C=f.nextSibling;if(l.removeChild(f),C&&C.nodeType===8)if(f=C.data,f==="/$"||f==="/&"){if(x===0){l.removeChild(C),fh(d);return}x--}else if(f==="$"||f==="$?"||f==="$~"||f==="$!"||f==="&")x++;else if(f==="html")Nf(l.ownerDocument.documentElement);else if(f==="head"){f=l.ownerDocument.head,Nf(f);for(var T=f.firstChild;T;){var ae=T.nextSibling,pe=T.nodeName;T[Ca]||pe==="SCRIPT"||pe==="STYLE"||pe==="LINK"&&T.rel.toLowerCase()==="stylesheet"||f.removeChild(T),T=ae}}else f==="body"&&Nf(l.ownerDocument.body);f=C}while(f);fh(d)}function lN(l,d){var f=l;l=0;do{var x=f.nextSibling;if(f.nodeType===1?d?(f._stashedDisplay=f.style.display,f.style.display="none"):(f.style.display=f._stashedDisplay||"",f.getAttribute("style")===""&&f.removeAttribute("style")):f.nodeType===3&&(d?(f._stashedText=f.nodeValue,f.nodeValue=""):f.nodeValue=f._stashedText||""),x&&x.nodeType===8)if(f=x.data,f==="/$"){if(l===0)break;l--}else f!=="$"&&f!=="$?"&&f!=="$~"&&f!=="$!"||l++;f=x}while(f)}function db(l){var d=l.firstChild;for(d&&d.nodeType===10&&(d=d.nextSibling);d;){var f=d;switch(d=d.nextSibling,f.nodeName){case"HTML":case"HEAD":case"BODY":db(f),Ya(f);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(f.rel.toLowerCase()==="stylesheet")continue}l.removeChild(f)}}function Kk(l,d,f,x){for(;l.nodeType===1;){var C=f;if(l.nodeName.toLowerCase()!==d.toLowerCase()){if(!x&&(l.nodeName!=="INPUT"||l.type!=="hidden"))break}else if(x){if(!l[Ca])switch(d){case"meta":if(!l.hasAttribute("itemprop"))break;return l;case"link":if(T=l.getAttribute("rel"),T==="stylesheet"&&l.hasAttribute("data-precedence"))break;if(T!==C.rel||l.getAttribute("href")!==(C.href==null||C.href===""?null:C.href)||l.getAttribute("crossorigin")!==(C.crossOrigin==null?null:C.crossOrigin)||l.getAttribute("title")!==(C.title==null?null:C.title))break;return l;case"style":if(l.hasAttribute("data-precedence"))break;return l;case"script":if(T=l.getAttribute("src"),(T!==(C.src==null?null:C.src)||l.getAttribute("type")!==(C.type==null?null:C.type)||l.getAttribute("crossorigin")!==(C.crossOrigin==null?null:C.crossOrigin))&&T&&l.hasAttribute("async")&&!l.hasAttribute("itemprop"))break;return l;default:return l}}else if(d==="input"&&l.type==="hidden"){var T=C.name==null?null:""+C.name;if(C.type==="hidden"&&l.getAttribute("name")===T)return l}else return l;if(l=Ml(l.nextSibling),l===null)break}return null}function Xk(l,d,f){if(d==="")return null;for(;l.nodeType!==3;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!f||(l=Ml(l.nextSibling),l===null))return null;return l}function oN(l,d){for(;l.nodeType!==8;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!d||(l=Ml(l.nextSibling),l===null))return null;return l}function ub(l){return l.data==="$?"||l.data==="$~"}function hb(l){return l.data==="$!"||l.data==="$?"&&l.ownerDocument.readyState!=="loading"}function Gk(l,d){var f=l.ownerDocument;if(l.data==="$~")l._reactRetry=d;else if(l.data!=="$?"||f.readyState!=="loading")d();else{var x=function(){d(),f.removeEventListener("DOMContentLoaded",x)};f.addEventListener("DOMContentLoaded",x),l._reactRetry=x}}function Ml(l){for(;l!=null;l=l.nextSibling){var d=l.nodeType;if(d===1||d===3)break;if(d===8){if(d=l.data,d==="$"||d==="$!"||d==="$?"||d==="$~"||d==="&"||d==="F!"||d==="F")break;if(d==="/$"||d==="/&")return null}}return l}var fb=null;function cN(l){l=l.nextSibling;for(var d=0;l;){if(l.nodeType===8){var f=l.data;if(f==="/$"||f==="/&"){if(d===0)return Ml(l.nextSibling);d--}else f!=="$"&&f!=="$!"&&f!=="$?"&&f!=="$~"&&f!=="&"||d++}l=l.nextSibling}return null}function dN(l){l=l.previousSibling;for(var d=0;l;){if(l.nodeType===8){var f=l.data;if(f==="$"||f==="$!"||f==="$?"||f==="$~"||f==="&"){if(d===0)return l;d--}else f!=="/$"&&f!=="/&"||d++}l=l.previousSibling}return null}function uN(l,d,f){switch(d=np(f),l){case"html":if(l=d.documentElement,!l)throw Error(n(452));return l;case"head":if(l=d.head,!l)throw Error(n(453));return l;case"body":if(l=d.body,!l)throw Error(n(454));return l;default:throw Error(n(451))}}function Nf(l){for(var d=l.attributes;d.length;)l.removeAttributeNode(d[0]);Ya(l)}var Rl=new Map,hN=new Set;function rp(l){return typeof l.getRootNode=="function"?l.getRootNode():l.nodeType===9?l:l.ownerDocument}var zc=Q.d;Q.d={f:Qk,r:Jk,D:Zk,C:eD,L:tD,m:sD,X:nD,S:aD,M:rD};function Qk(){var l=zc.f(),d=Gm();return l||d}function Jk(l){var d=ir(l);d!==null&&d.tag===5&&d.type==="form"?D0(d):zc.r(l)}var dh=typeof document>"u"?null:document;function fN(l,d,f){var x=dh;if(x&&typeof d=="string"&&d){var C=Pa(d);C='link[rel="'+l+'"][href="'+C+'"]',typeof f=="string"&&(C+='[crossorigin="'+f+'"]'),hN.has(C)||(hN.add(C),l={rel:l,crossOrigin:f,href:d},x.querySelector(C)===null&&(d=x.createElement("link"),Cr(d,"link",l),ua(d),x.head.appendChild(d)))}}function Zk(l){zc.D(l),fN("dns-prefetch",l,null)}function eD(l,d){zc.C(l,d),fN("preconnect",l,d)}function tD(l,d,f){zc.L(l,d,f);var x=dh;if(x&&l&&d){var C='link[rel="preload"][as="'+Pa(d)+'"]';d==="image"&&f&&f.imageSrcSet?(C+='[imagesrcset="'+Pa(f.imageSrcSet)+'"]',typeof f.imageSizes=="string"&&(C+='[imagesizes="'+Pa(f.imageSizes)+'"]')):C+='[href="'+Pa(l)+'"]';var T=C;switch(d){case"style":T=uh(l);break;case"script":T=hh(l)}Rl.has(T)||(l=p({rel:"preload",href:d==="image"&&f&&f.imageSrcSet?void 0:l,as:d},f),Rl.set(T,l),x.querySelector(C)!==null||d==="style"&&x.querySelector(wf(T))||d==="script"&&x.querySelector(_f(T))||(d=x.createElement("link"),Cr(d,"link",l),ua(d),x.head.appendChild(d)))}}function sD(l,d){zc.m(l,d);var f=dh;if(f&&l){var x=d&&typeof d.as=="string"?d.as:"script",C='link[rel="modulepreload"][as="'+Pa(x)+'"][href="'+Pa(l)+'"]',T=C;switch(x){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":T=hh(l)}if(!Rl.has(T)&&(l=p({rel:"modulepreload",href:l},d),Rl.set(T,l),f.querySelector(C)===null)){switch(x){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(f.querySelector(_f(T)))return}x=f.createElement("link"),Cr(x,"link",l),ua(x),f.head.appendChild(x)}}}function aD(l,d,f){zc.S(l,d,f);var x=dh;if(x&&l){var C=Pn(x).hoistableStyles,T=uh(l);d=d||"default";var ae=C.get(T);if(!ae){var pe={loading:0,preload:null};if(ae=x.querySelector(wf(T)))pe.loading=5;else{l=p({rel:"stylesheet",href:l,"data-precedence":d},f),(f=Rl.get(T))&&mb(l,f);var Ee=ae=x.createElement("link");ua(Ee),Cr(Ee,"link",l),Ee._p=new Promise(function(Ke,ct){Ee.onload=Ke,Ee.onerror=ct}),Ee.addEventListener("load",function(){pe.loading|=1}),Ee.addEventListener("error",function(){pe.loading|=2}),pe.loading|=4,ip(ae,d,x)}ae={type:"stylesheet",instance:ae,count:1,state:pe},C.set(T,ae)}}}function nD(l,d){zc.X(l,d);var f=dh;if(f&&l){var x=Pn(f).hoistableScripts,C=hh(l),T=x.get(C);T||(T=f.querySelector(_f(C)),T||(l=p({src:l,async:!0},d),(d=Rl.get(C))&&pb(l,d),T=f.createElement("script"),ua(T),Cr(T,"link",l),f.head.appendChild(T)),T={type:"script",instance:T,count:1,state:null},x.set(C,T))}}function rD(l,d){zc.M(l,d);var f=dh;if(f&&l){var x=Pn(f).hoistableScripts,C=hh(l),T=x.get(C);T||(T=f.querySelector(_f(C)),T||(l=p({src:l,async:!0,type:"module"},d),(d=Rl.get(C))&&pb(l,d),T=f.createElement("script"),ua(T),Cr(T,"link",l),f.head.appendChild(T)),T={type:"script",instance:T,count:1,state:null},x.set(C,T))}}function mN(l,d,f,x){var C=(C=je.current)?rp(C):null;if(!C)throw Error(n(446));switch(l){case"meta":case"title":return null;case"style":return typeof f.precedence=="string"&&typeof f.href=="string"?(d=uh(f.href),f=Pn(C).hoistableStyles,x=f.get(d),x||(x={type:"style",instance:null,count:0,state:null},f.set(d,x)),x):{type:"void",instance:null,count:0,state:null};case"link":if(f.rel==="stylesheet"&&typeof f.href=="string"&&typeof f.precedence=="string"){l=uh(f.href);var T=Pn(C).hoistableStyles,ae=T.get(l);if(ae||(C=C.ownerDocument||C,ae={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},T.set(l,ae),(T=C.querySelector(wf(l)))&&!T._p&&(ae.instance=T,ae.state.loading=5),Rl.has(l)||(f={rel:"preload",as:"style",href:f.href,crossOrigin:f.crossOrigin,integrity:f.integrity,media:f.media,hrefLang:f.hrefLang,referrerPolicy:f.referrerPolicy},Rl.set(l,f),T||iD(C,l,f,ae.state))),d&&x===null)throw Error(n(528,""));return ae}if(d&&x!==null)throw Error(n(529,""));return null;case"script":return d=f.async,f=f.src,typeof f=="string"&&d&&typeof d!="function"&&typeof d!="symbol"?(d=hh(f),f=Pn(C).hoistableScripts,x=f.get(d),x||(x={type:"script",instance:null,count:0,state:null},f.set(d,x)),x):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,l))}}function uh(l){return'href="'+Pa(l)+'"'}function wf(l){return'link[rel="stylesheet"]['+l+"]"}function pN(l){return p({},l,{"data-precedence":l.precedence,precedence:null})}function iD(l,d,f,x){l.querySelector('link[rel="preload"][as="style"]['+d+"]")?x.loading=1:(d=l.createElement("link"),x.preload=d,d.addEventListener("load",function(){return x.loading|=1}),d.addEventListener("error",function(){return x.loading|=2}),Cr(d,"link",f),ua(d),l.head.appendChild(d))}function hh(l){return'[src="'+Pa(l)+'"]'}function _f(l){return"script[async]"+l}function gN(l,d,f){if(d.count++,d.instance===null)switch(d.type){case"style":var x=l.querySelector('style[data-href~="'+Pa(f.href)+'"]');if(x)return d.instance=x,ua(x),x;var C=p({},f,{"data-href":f.href,"data-precedence":f.precedence,href:null,precedence:null});return x=(l.ownerDocument||l).createElement("style"),ua(x),Cr(x,"style",C),ip(x,f.precedence,l),d.instance=x;case"stylesheet":C=uh(f.href);var T=l.querySelector(wf(C));if(T)return d.state.loading|=4,d.instance=T,ua(T),T;x=pN(f),(C=Rl.get(C))&&mb(x,C),T=(l.ownerDocument||l).createElement("link"),ua(T);var ae=T;return ae._p=new Promise(function(pe,Ee){ae.onload=pe,ae.onerror=Ee}),Cr(T,"link",x),d.state.loading|=4,ip(T,f.precedence,l),d.instance=T;case"script":return T=hh(f.src),(C=l.querySelector(_f(T)))?(d.instance=C,ua(C),C):(x=f,(C=Rl.get(T))&&(x=p({},f),pb(x,C)),l=l.ownerDocument||l,C=l.createElement("script"),ua(C),Cr(C,"link",x),l.head.appendChild(C),d.instance=C);case"void":return null;default:throw Error(n(443,d.type))}else d.type==="stylesheet"&&(d.state.loading&4)===0&&(x=d.instance,d.state.loading|=4,ip(x,f.precedence,l));return d.instance}function ip(l,d,f){for(var x=f.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),C=x.length?x[x.length-1]:null,T=C,ae=0;ae<x.length;ae++){var pe=x[ae];if(pe.dataset.precedence===d)T=pe;else if(T!==C)break}T?T.parentNode.insertBefore(l,T.nextSibling):(d=f.nodeType===9?f.head:f,d.insertBefore(l,d.firstChild))}function mb(l,d){l.crossOrigin==null&&(l.crossOrigin=d.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=d.referrerPolicy),l.title==null&&(l.title=d.title)}function pb(l,d){l.crossOrigin==null&&(l.crossOrigin=d.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=d.referrerPolicy),l.integrity==null&&(l.integrity=d.integrity)}var lp=null;function xN(l,d,f){if(lp===null){var x=new Map,C=lp=new Map;C.set(f,x)}else C=lp,x=C.get(f),x||(x=new Map,C.set(f,x));if(x.has(l))return x;for(x.set(l,null),f=f.getElementsByTagName(l),C=0;C<f.length;C++){var T=f[C];if(!(T[Ca]||T[Zs]||l==="link"&&T.getAttribute("rel")==="stylesheet")&&T.namespaceURI!=="http://www.w3.org/2000/svg"){var ae=T.getAttribute(d)||"";ae=l+ae;var pe=x.get(ae);pe?pe.push(T):x.set(ae,[T])}}return x}function bN(l,d,f){l=l.ownerDocument||l,l.head.insertBefore(f,d==="title"?l.querySelector("head > title"):null)}function lD(l,d,f){if(f===1||d.itemProp!=null)return!1;switch(l){case"meta":case"title":return!0;case"style":if(typeof d.precedence!="string"||typeof d.href!="string"||d.href==="")break;return!0;case"link":if(typeof d.rel!="string"||typeof d.href!="string"||d.href===""||d.onLoad||d.onError)break;switch(d.rel){case"stylesheet":return l=d.disabled,typeof d.precedence=="string"&&l==null;default:return!0}case"script":if(d.async&&typeof d.async!="function"&&typeof d.async!="symbol"&&!d.onLoad&&!d.onError&&d.src&&typeof d.src=="string")return!0}return!1}function yN(l){return!(l.type==="stylesheet"&&(l.state.loading&3)===0)}function oD(l,d,f,x){if(f.type==="stylesheet"&&(typeof x.media!="string"||matchMedia(x.media).matches!==!1)&&(f.state.loading&4)===0){if(f.instance===null){var C=uh(x.href),T=d.querySelector(wf(C));if(T){d=T._p,d!==null&&typeof d=="object"&&typeof d.then=="function"&&(l.count++,l=op.bind(l),d.then(l,l)),f.state.loading|=4,f.instance=T,ua(T);return}T=d.ownerDocument||d,x=pN(x),(C=Rl.get(C))&&mb(x,C),T=T.createElement("link"),ua(T);var ae=T;ae._p=new Promise(function(pe,Ee){ae.onload=pe,ae.onerror=Ee}),Cr(T,"link",x),f.instance=T}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(f,d),(d=f.state.preload)&&(f.state.loading&3)===0&&(l.count++,f=op.bind(l),d.addEventListener("load",f),d.addEventListener("error",f))}}var gb=0;function cD(l,d){return l.stylesheets&&l.count===0&&dp(l,l.stylesheets),0<l.count||0<l.imgCount?function(f){var x=setTimeout(function(){if(l.stylesheets&&dp(l,l.stylesheets),l.unsuspend){var T=l.unsuspend;l.unsuspend=null,T()}},6e4+d);0<l.imgBytes&&gb===0&&(gb=62500*Hk());var C=setTimeout(function(){if(l.waitingForImages=!1,l.count===0&&(l.stylesheets&&dp(l,l.stylesheets),l.unsuspend)){var T=l.unsuspend;l.unsuspend=null,T()}},(l.imgBytes>gb?50:800)+d);return l.unsuspend=f,function(){l.unsuspend=null,clearTimeout(x),clearTimeout(C)}}:null}function op(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)dp(this,this.stylesheets);else if(this.unsuspend){var l=this.unsuspend;this.unsuspend=null,l()}}}var cp=null;function dp(l,d){l.stylesheets=null,l.unsuspend!==null&&(l.count++,cp=new Map,d.forEach(dD,l),cp=null,op.call(l))}function dD(l,d){if(!(d.state.loading&4)){var f=cp.get(l);if(f)var x=f.get(null);else{f=new Map,cp.set(l,f);for(var C=l.querySelectorAll("link[data-precedence],style[data-precedence]"),T=0;T<C.length;T++){var ae=C[T];(ae.nodeName==="LINK"||ae.getAttribute("media")!=="not all")&&(f.set(ae.dataset.precedence,ae),x=ae)}x&&f.set(null,x)}C=d.instance,ae=C.getAttribute("data-precedence"),T=f.get(ae)||x,T===x&&f.set(null,C),f.set(ae,C),this.count++,x=op.bind(this),C.addEventListener("load",x),C.addEventListener("error",x),T?T.parentNode.insertBefore(C,T.nextSibling):(l=l.nodeType===9?l.head:l,l.insertBefore(C,l.firstChild)),d.state.loading|=4}}var Sf={$$typeof:E,Provider:null,Consumer:null,_currentValue:Y,_currentValue2:Y,_threadCount:0};function uD(l,d,f,x,C,T,ae,pe,Ee){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ve(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ve(0),this.hiddenUpdates=ve(null),this.identifierPrefix=x,this.onUncaughtError=C,this.onCaughtError=T,this.onRecoverableError=ae,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Ee,this.incompleteTransitions=new Map}function vN(l,d,f,x,C,T,ae,pe,Ee,Ke,ct,ft){return l=new uD(l,d,f,ae,Ee,Ke,ct,ft,pe),d=1,T===!0&&(d|=24),T=Bn(3,null,null,d),l.current=T,T.stateNode=l,d=Hr(),d.refCount++,l.pooledCache=d,d.refCount++,T.memoizedState={element:x,isDehydrated:f,cache:d},pt(T),l}function jN(l){return l?(l=wn,l):wn}function NN(l,d,f,x,C,T){C=jN(C),x.context===null?x.context=C:x.pendingContext=C,x=Nt(d),x.payload={element:f},T=T===void 0?null:T,T!==null&&(x.callback=T),f=Ot(l,x,d),f!==null&&(Bi(f,l,d),Ht(f,l,d))}function wN(l,d){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var f=l.retryLane;l.retryLane=f!==0&&f<d?f:d}}function xb(l,d){wN(l,d),(l=l.alternate)&&wN(l,d)}function _N(l){if(l.tag===13||l.tag===31){var d=Nn(l,67108864);d!==null&&Bi(d,l,67108864),xb(l,67108864)}}function SN(l){if(l.tag===13||l.tag===31){var d=il();d=Os(d);var f=Nn(l,d);f!==null&&Bi(f,l,d),xb(l,d)}}var up=!0;function hD(l,d,f,x){var C=R.T;R.T=null;var T=Q.p;try{Q.p=2,bb(l,d,f,x)}finally{Q.p=T,R.T=C}}function fD(l,d,f,x){var C=R.T;R.T=null;var T=Q.p;try{Q.p=8,bb(l,d,f,x)}finally{Q.p=T,R.T=C}}function bb(l,d,f,x){if(up){var C=yb(x);if(C===null)nb(l,d,x,hp,f),AN(l,x);else if(pD(C,l,d,f,x))x.stopPropagation();else if(AN(l,x),d&4&&-1<mD.indexOf(l)){for(;C!==null;){var T=ir(C);if(T!==null)switch(T.tag){case 3:if(T=T.stateNode,T.current.memoizedState.isDehydrated){var ae=Tt(T.pendingLanes);if(ae!==0){var pe=T;for(pe.pendingLanes|=2,pe.entangledLanes|=2;ae;){var Ee=1<<31-Re(ae);pe.entanglements[1]|=Ee,ae&=~Ee}Yo(T),(ca&6)===0&&(Km=Mt()+500,yf(0))}}break;case 31:case 13:pe=Nn(T,2),pe!==null&&Bi(pe,T,2),Gm(),xb(T,2)}if(T=yb(x),T===null&&nb(l,d,x,hp,f),T===C)break;C=T}C!==null&&x.stopPropagation()}else nb(l,d,x,null,f)}}function yb(l){return l=yl(l),vb(l)}var hp=null;function vb(l){if(hp=null,l=ga(l),l!==null){var d=i(l);if(d===null)l=null;else{var f=d.tag;if(f===13){if(l=o(d),l!==null)return l;l=null}else if(f===31){if(l=c(d),l!==null)return l;l=null}else if(f===3){if(d.stateNode.current.memoizedState.isDehydrated)return d.tag===3?d.stateNode.containerInfo:null;l=null}else d!==l&&(l=null)}}return hp=l,null}function CN(l){switch(l){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(At()){case Bt:return 2;case rs:return 8;case kt:case zt:return 32;case $t:return 268435456;default:return 32}default:return 32}}var jb=!1,kd=null,Dd=null,Ed=null,Cf=new Map,Af=new Map,Td=[],mD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function AN(l,d){switch(l){case"focusin":case"focusout":kd=null;break;case"dragenter":case"dragleave":Dd=null;break;case"mouseover":case"mouseout":Ed=null;break;case"pointerover":case"pointerout":Cf.delete(d.pointerId);break;case"gotpointercapture":case"lostpointercapture":Af.delete(d.pointerId)}}function kf(l,d,f,x,C,T){return l===null||l.nativeEvent!==T?(l={blockedOn:d,domEventName:f,eventSystemFlags:x,nativeEvent:T,targetContainers:[C]},d!==null&&(d=ir(d),d!==null&&_N(d)),l):(l.eventSystemFlags|=x,d=l.targetContainers,C!==null&&d.indexOf(C)===-1&&d.push(C),l)}function pD(l,d,f,x,C){switch(d){case"focusin":return kd=kf(kd,l,d,f,x,C),!0;case"dragenter":return Dd=kf(Dd,l,d,f,x,C),!0;case"mouseover":return Ed=kf(Ed,l,d,f,x,C),!0;case"pointerover":var T=C.pointerId;return Cf.set(T,kf(Cf.get(T)||null,l,d,f,x,C)),!0;case"gotpointercapture":return T=C.pointerId,Af.set(T,kf(Af.get(T)||null,l,d,f,x,C)),!0}return!1}function kN(l){var d=ga(l.target);if(d!==null){var f=i(d);if(f!==null){if(d=f.tag,d===13){if(d=o(f),d!==null){l.blockedOn=d,Ln(l.priority,function(){SN(f)});return}}else if(d===31){if(d=c(f),d!==null){l.blockedOn=d,Ln(l.priority,function(){SN(f)});return}}else if(d===3&&f.stateNode.current.memoizedState.isDehydrated){l.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}l.blockedOn=null}function fp(l){if(l.blockedOn!==null)return!1;for(var d=l.targetContainers;0<d.length;){var f=yb(l.nativeEvent);if(f===null){f=l.nativeEvent;var x=new f.constructor(f.type,f);Er=x,f.target.dispatchEvent(x),Er=null}else return d=ir(f),d!==null&&_N(d),l.blockedOn=f,!1;d.shift()}return!0}function DN(l,d,f){fp(l)&&f.delete(d)}function gD(){jb=!1,kd!==null&&fp(kd)&&(kd=null),Dd!==null&&fp(Dd)&&(Dd=null),Ed!==null&&fp(Ed)&&(Ed=null),Cf.forEach(DN),Af.forEach(DN)}function mp(l,d){l.blockedOn===d&&(l.blockedOn=null,jb||(jb=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,gD)))}var pp=null;function EN(l){pp!==l&&(pp=l,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){pp===l&&(pp=null);for(var d=0;d<l.length;d+=3){var f=l[d],x=l[d+1],C=l[d+2];if(typeof x!="function"){if(vb(x||f)===null)continue;break}var T=ir(f);T!==null&&(l.splice(d,3),d-=3,yx(T,{pending:!0,data:C,method:f.method,action:x},x,C))}}))}function fh(l){function d(Ee){return mp(Ee,l)}kd!==null&&mp(kd,l),Dd!==null&&mp(Dd,l),Ed!==null&&mp(Ed,l),Cf.forEach(d),Af.forEach(d);for(var f=0;f<Td.length;f++){var x=Td[f];x.blockedOn===l&&(x.blockedOn=null)}for(;0<Td.length&&(f=Td[0],f.blockedOn===null);)kN(f),f.blockedOn===null&&Td.shift();if(f=(l.ownerDocument||l).$$reactFormReplay,f!=null)for(x=0;x<f.length;x+=3){var C=f[x],T=f[x+1],ae=C[Sa]||null;if(typeof T=="function")ae||EN(f);else if(ae){var pe=null;if(T&&T.hasAttribute("formAction")){if(C=T,ae=T[Sa]||null)pe=ae.formAction;else if(vb(C)!==null)continue}else pe=ae.action;typeof pe=="function"?f[x+1]=pe:(f.splice(x,3),x-=3),EN(f)}}}function TN(){function l(T){T.canIntercept&&T.info==="react-transition"&&T.intercept({handler:function(){return new Promise(function(ae){return C=ae})},focusReset:"manual",scroll:"manual"})}function d(){C!==null&&(C(),C=null),x||setTimeout(f,20)}function f(){if(!x&&!navigation.transition){var T=navigation.currentEntry;T&&T.url!=null&&navigation.navigate(T.url,{state:T.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var x=!1,C=null;return navigation.addEventListener("navigate",l),navigation.addEventListener("navigatesuccess",d),navigation.addEventListener("navigateerror",d),setTimeout(f,100),function(){x=!0,navigation.removeEventListener("navigate",l),navigation.removeEventListener("navigatesuccess",d),navigation.removeEventListener("navigateerror",d),C!==null&&(C(),C=null)}}}function Nb(l){this._internalRoot=l}gp.prototype.render=Nb.prototype.render=function(l){var d=this._internalRoot;if(d===null)throw Error(n(409));var f=d.current,x=il();NN(f,x,l,d,null,null)},gp.prototype.unmount=Nb.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var d=l.containerInfo;NN(l.current,2,null,l,null,null),Gm(),d[cn]=null}};function gp(l){this._internalRoot=l}gp.prototype.unstable_scheduleHydration=function(l){if(l){var d=ja();l={blockedOn:null,target:l,priority:d};for(var f=0;f<Td.length&&d!==0&&d<Td[f].priority;f++);Td.splice(f,0,l),f===0&&kN(l)}};var LN=t.version;if(LN!=="19.2.0")throw Error(n(527,LN,"19.2.0"));Q.findDOMNode=function(l){var d=l._reactInternals;if(d===void 0)throw typeof l.render=="function"?Error(n(188)):(l=Object.keys(l).join(","),Error(n(268,l)));return l=h(d),l=l!==null?m(l):null,l=l===null?null:l.stateNode,l};var xD={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:R,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xp.isDisabled&&xp.supportsFiber)try{Te=xp.inject(xD),Je=xp}catch{}}return Ef.createRoot=function(l,d){if(!r(l))throw Error(n(299));var f=!1,x="",C=B0,T=z0,ae=q0;return d!=null&&(d.unstable_strictMode===!0&&(f=!0),d.identifierPrefix!==void 0&&(x=d.identifierPrefix),d.onUncaughtError!==void 0&&(C=d.onUncaughtError),d.onCaughtError!==void 0&&(T=d.onCaughtError),d.onRecoverableError!==void 0&&(ae=d.onRecoverableError)),d=vN(l,1,!1,null,null,f,x,null,C,T,ae,TN),l[cn]=d.current,ab(l),new Nb(d)},Ef.hydrateRoot=function(l,d,f){if(!r(l))throw Error(n(299));var x=!1,C="",T=B0,ae=z0,pe=q0,Ee=null;return f!=null&&(f.unstable_strictMode===!0&&(x=!0),f.identifierPrefix!==void 0&&(C=f.identifierPrefix),f.onUncaughtError!==void 0&&(T=f.onUncaughtError),f.onCaughtError!==void 0&&(ae=f.onCaughtError),f.onRecoverableError!==void 0&&(pe=f.onRecoverableError),f.formState!==void 0&&(Ee=f.formState)),d=vN(l,1,!0,d,f??null,x,C,Ee,T,ae,pe,TN),d.context=jN(null),f=d.current,x=il(),x=Os(x),C=Nt(x),C.callback=null,Ot(f,C,x),f=x,d.current.lanes=f,Ze(d,f),Yo(d),l[cn]=d.current,ab(l),new gp(d)},Ef.version="19.2.0",Ef}var UN;function kD(){if(UN)return Sb.exports;UN=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),Sb.exports=AD(),Sb.exports}var DD=kD();const ED=gv(DD);/**
 * react-router v7.9.4
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var HN="popstate";function TD(s={}){function t(n,r){let{pathname:i,search:o,hash:c}=n.location;return ky("",{pathname:i,search:o,hash:c},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function a(n,r){return typeof r=="string"?r:am(r)}return PD(t,a,null,s)}function sn(s,t){if(s===!1||s===null||typeof s>"u")throw new Error(t)}function ql(s,t){if(!s){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function LD(){return Math.random().toString(36).substring(2,10)}function $N(s,t){return{usr:s.state,key:s.key,idx:t}}function ky(s,t,a=null,n){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof t=="string"?$h(t):t,state:a,key:t&&t.key||n||LD()}}function am({pathname:s="/",search:t="",hash:a=""}){return t&&t!=="?"&&(s+=t.charAt(0)==="?"?t:"?"+t),a&&a!=="#"&&(s+=a.charAt(0)==="#"?a:"#"+a),s}function $h(s){let t={};if(s){let a=s.indexOf("#");a>=0&&(t.hash=s.substring(a),s=s.substring(0,a));let n=s.indexOf("?");n>=0&&(t.search=s.substring(n),s=s.substring(0,n)),s&&(t.pathname=s)}return t}function PD(s,t,a,n={}){let{window:r=document.defaultView,v5Compat:i=!1}=n,o=r.history,c="POP",u=null,h=m();h==null&&(h=0,o.replaceState({...o.state,idx:h},""));function m(){return(o.state||{idx:null}).idx}function p(){c="POP";let N=m(),v=N==null?null:N-h;h=N,u&&u({action:c,location:b.location,delta:v})}function y(N,v){c="PUSH";let S=ky(b.location,N,v);h=m()+1;let E=$N(S,h),L=b.createHref(S);try{o.pushState(E,"",L)}catch(z){if(z instanceof DOMException&&z.name==="DataCloneError")throw z;r.location.assign(L)}i&&u&&u({action:c,location:b.location,delta:1})}function g(N,v){c="REPLACE";let S=ky(b.location,N,v);h=m();let E=$N(S,h),L=b.createHref(S);o.replaceState(E,"",L),i&&u&&u({action:c,location:b.location,delta:0})}function j(N){return FD(N)}let b={get action(){return c},get location(){return s(r,o)},listen(N){if(u)throw new Error("A history only accepts one active listener");return r.addEventListener(HN,p),u=N,()=>{r.removeEventListener(HN,p),u=null}},createHref(N){return t(r,N)},createURL:j,encodeLocation(N){let v=j(N);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:y,replace:g,go(N){return o.go(N)}};return b}function FD(s,t=!1){let a="http://localhost";typeof window<"u"&&(a=window.location.origin!=="null"?window.location.origin:window.location.href),sn(a,"No window.location.(origin|href) available to create URL");let n=typeof s=="string"?s:am(s);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=a+n),new URL(n,a)}function z_(s,t,a="/"){return ID(s,t,a,!1)}function ID(s,t,a,n){let r=typeof t=="string"?$h(t):t,i=sd(r.pathname||"/",a);if(i==null)return null;let o=q_(s);OD(o);let c=null;for(let u=0;c==null&&u<o.length;++u){let h=YD(i);c=VD(o[u],h,n)}return c}function q_(s,t=[],a=[],n="",r=!1){let i=(o,c,u=r,h)=>{let m={relativePath:h===void 0?o.path||"":h,caseSensitive:o.caseSensitive===!0,childrenIndex:c,route:o};if(m.relativePath.startsWith("/")){if(!m.relativePath.startsWith(n)&&u)return;sn(m.relativePath.startsWith(n),`Absolute route path "${m.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),m.relativePath=m.relativePath.slice(n.length)}let p=ed([n,m.relativePath]),y=a.concat(m);o.children&&o.children.length>0&&(sn(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),q_(o.children,t,y,p,u)),!(o.path==null&&!o.index)&&t.push({path:p,score:HD(p,o.index),routesMeta:y})};return s.forEach((o,c)=>{if(o.path===""||!o.path?.includes("?"))i(o,c);else for(let u of U_(o.path))i(o,c,!0,u)}),t}function U_(s){let t=s.split("/");if(t.length===0)return[];let[a,...n]=t,r=a.endsWith("?"),i=a.replace(/\?$/,"");if(n.length===0)return r?[i,""]:[i];let o=U_(n.join("/")),c=[];return c.push(...o.map(u=>u===""?i:[i,u].join("/"))),r&&c.push(...o),c.map(u=>s.startsWith("/")&&u===""?"/":u)}function OD(s){s.sort((t,a)=>t.score!==a.score?a.score-t.score:$D(t.routesMeta.map(n=>n.childrenIndex),a.routesMeta.map(n=>n.childrenIndex)))}var MD=/^:[\w-]+$/,RD=3,BD=2,zD=1,qD=10,UD=-2,VN=s=>s==="*";function HD(s,t){let a=s.split("/"),n=a.length;return a.some(VN)&&(n+=UD),t&&(n+=BD),a.filter(r=>!VN(r)).reduce((r,i)=>r+(MD.test(i)?RD:i===""?zD:qD),n)}function $D(s,t){return s.length===t.length&&s.slice(0,-1).every((n,r)=>n===t[r])?s[s.length-1]-t[t.length-1]:0}function VD(s,t,a=!1){let{routesMeta:n}=s,r={},i="/",o=[];for(let c=0;c<n.length;++c){let u=n[c],h=c===n.length-1,m=i==="/"?t:t.slice(i.length)||"/",p=gg({path:u.relativePath,caseSensitive:u.caseSensitive,end:h},m),y=u.route;if(!p&&h&&a&&!n[n.length-1].route.index&&(p=gg({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},m)),!p)return null;Object.assign(r,p.params),o.push({params:r,pathname:ed([i,p.pathname]),pathnameBase:QD(ed([i,p.pathnameBase])),route:y}),p.pathnameBase!=="/"&&(i=ed([i,p.pathnameBase]))}return o}function gg(s,t){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[a,n]=WD(s.path,s.caseSensitive,s.end),r=t.match(a);if(!r)return null;let i=r[0],o=i.replace(/(.)\/+$/,"$1"),c=r.slice(1);return{params:n.reduce((h,{paramName:m,isOptional:p},y)=>{if(m==="*"){let j=c[y]||"";o=i.slice(0,i.length-j.length).replace(/(.)\/+$/,"$1")}const g=c[y];return p&&!g?h[m]=void 0:h[m]=(g||"").replace(/%2F/g,"/"),h},{}),pathname:i,pathnameBase:o,pattern:s}}function WD(s,t=!1,a=!0){ql(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let n=[],r="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,u)=>(n.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return s.endsWith("*")?(n.push({paramName:"*"}),r+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):a?r+="\\/*$":s!==""&&s!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,t?void 0:"i"),n]}function YD(s){try{return s.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return ql(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),s}}function sd(s,t){if(t==="/")return s;if(!s.toLowerCase().startsWith(t.toLowerCase()))return null;let a=t.endsWith("/")?t.length-1:t.length,n=s.charAt(a);return n&&n!=="/"?null:s.slice(a)||"/"}function KD(s,t="/"){let{pathname:a,search:n="",hash:r=""}=typeof s=="string"?$h(s):s;return{pathname:a?a.startsWith("/")?a:XD(a,t):t,search:JD(n),hash:ZD(r)}}function XD(s,t){let a=t.replace(/\/+$/,"").split("/");return s.split("/").forEach(r=>{r===".."?a.length>1&&a.pop():r!=="."&&a.push(r)}),a.length>1?a.join("/"):"/"}function Db(s,t,a,n){return`Cannot include a '${s}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${a}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function GD(s){return s.filter((t,a)=>a===0||t.route.path&&t.route.path.length>0)}function xv(s){let t=GD(s);return t.map((a,n)=>n===t.length-1?a.pathname:a.pathnameBase)}function bv(s,t,a,n=!1){let r;typeof s=="string"?r=$h(s):(r={...s},sn(!r.pathname||!r.pathname.includes("?"),Db("?","pathname","search",r)),sn(!r.pathname||!r.pathname.includes("#"),Db("#","pathname","hash",r)),sn(!r.search||!r.search.includes("#"),Db("#","search","hash",r)));let i=s===""||r.pathname==="",o=i?"/":r.pathname,c;if(o==null)c=a;else{let p=t.length-1;if(!n&&o.startsWith("..")){let y=o.split("/");for(;y[0]==="..";)y.shift(),p-=1;r.pathname=y.join("/")}c=p>=0?t[p]:"/"}let u=KD(r,c),h=o&&o!=="/"&&o.endsWith("/"),m=(i||o===".")&&a.endsWith("/");return!u.pathname.endsWith("/")&&(h||m)&&(u.pathname+="/"),u}var ed=s=>s.join("/").replace(/\/\/+/g,"/"),QD=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),JD=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,ZD=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s;function e3(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}var H_=["POST","PUT","PATCH","DELETE"];new Set(H_);var t3=["GET",...H_];new Set(t3);var Vh=A.createContext(null);Vh.displayName="DataRouter";var Yg=A.createContext(null);Yg.displayName="DataRouterState";A.createContext(!1);var $_=A.createContext({isTransitioning:!1});$_.displayName="ViewTransition";var s3=A.createContext(new Map);s3.displayName="Fetchers";var a3=A.createContext(null);a3.displayName="Await";var No=A.createContext(null);No.displayName="Navigation";var mm=A.createContext(null);mm.displayName="Location";var $l=A.createContext({outlet:null,matches:[],isDataRoute:!1});$l.displayName="Route";var yv=A.createContext(null);yv.displayName="RouteError";function n3(s,{relative:t}={}){sn(Wh(),"useHref() may be used only in the context of a <Router> component.");let{basename:a,navigator:n}=A.useContext(No),{hash:r,pathname:i,search:o}=pm(s,{relative:t}),c=i;return a!=="/"&&(c=i==="/"?a:ed([a,i])),n.createHref({pathname:c,search:o,hash:r})}function Wh(){return A.useContext(mm)!=null}function Vl(){return sn(Wh(),"useLocation() may be used only in the context of a <Router> component."),A.useContext(mm).location}var V_="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function W_(s){A.useContext(No).static||A.useLayoutEffect(s)}function Vn(){let{isDataRoute:s}=A.useContext($l);return s?y3():r3()}function r3(){sn(Wh(),"useNavigate() may be used only in the context of a <Router> component.");let s=A.useContext(Vh),{basename:t,navigator:a}=A.useContext(No),{matches:n}=A.useContext($l),{pathname:r}=Vl(),i=JSON.stringify(xv(n)),o=A.useRef(!1);return W_(()=>{o.current=!0}),A.useCallback((u,h={})=>{if(ql(o.current,V_),!o.current)return;if(typeof u=="number"){a.go(u);return}let m=bv(u,JSON.parse(i),r,h.relative==="path");s==null&&t!=="/"&&(m.pathname=m.pathname==="/"?t:ed([t,m.pathname])),(h.replace?a.replace:a.push)(m,h.state,h)},[t,a,i,r,s])}var i3=A.createContext(null);function l3(s){let t=A.useContext($l).outlet;return A.useMemo(()=>t&&A.createElement(i3.Provider,{value:s},t),[t,s])}function vv(){let{matches:s}=A.useContext($l),t=s[s.length-1];return t?t.params:{}}function pm(s,{relative:t}={}){let{matches:a}=A.useContext($l),{pathname:n}=Vl(),r=JSON.stringify(xv(a));return A.useMemo(()=>bv(s,JSON.parse(r),n,t==="path"),[s,r,n,t])}function o3(s,t){return Y_(s,t)}function Y_(s,t,a,n,r){sn(Wh(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=A.useContext(No),{matches:o}=A.useContext($l),c=o[o.length-1],u=c?c.params:{},h=c?c.pathname:"/",m=c?c.pathnameBase:"/",p=c&&c.route;{let S=p&&p.path||"";K_(h,!p||S.endsWith("*")||S.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${S}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${S}"> to <Route path="${S==="/"?"*":`${S}/*`}">.`)}let y=Vl(),g;if(t){let S=typeof t=="string"?$h(t):t;sn(m==="/"||S.pathname?.startsWith(m),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${m}" but pathname "${S.pathname}" was given in the \`location\` prop.`),g=S}else g=y;let j=g.pathname||"/",b=j;if(m!=="/"){let S=m.replace(/^\//,"").split("/");b="/"+j.replace(/^\//,"").split("/").slice(S.length).join("/")}let N=z_(s,{pathname:b});ql(p||N!=null,`No routes matched location "${g.pathname}${g.search}${g.hash}" `),ql(N==null||N[N.length-1].route.element!==void 0||N[N.length-1].route.Component!==void 0||N[N.length-1].route.lazy!==void 0,`Matched leaf route at location "${g.pathname}${g.search}${g.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let v=f3(N&&N.map(S=>Object.assign({},S,{params:Object.assign({},u,S.params),pathname:ed([m,i.encodeLocation?i.encodeLocation(S.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?m:ed([m,i.encodeLocation?i.encodeLocation(S.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:S.pathnameBase])})),o,a,n,r);return t&&v?A.createElement(mm.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...g},navigationType:"POP"}},v):v}function c3(){let s=b3(),t=e3(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),a=s instanceof Error?s.stack:null,n="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:n},i={padding:"2px 4px",backgroundColor:n},o=null;return console.error("Error handled by React Router default ErrorBoundary:",s),o=A.createElement(A.Fragment,null,A.createElement("p",null," Hey developer "),A.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",A.createElement("code",{style:i},"ErrorBoundary")," or"," ",A.createElement("code",{style:i},"errorElement")," prop on your route.")),A.createElement(A.Fragment,null,A.createElement("h2",null,"Unexpected Application Error!"),A.createElement("h3",{style:{fontStyle:"italic"}},t),a?A.createElement("pre",{style:r},a):null,o)}var d3=A.createElement(c3,null),u3=class extends A.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,t){return t.location!==s.location||t.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:t.error,location:t.location,revalidation:s.revalidation||t.revalidation}}componentDidCatch(s,t){this.props.unstable_onError?this.props.unstable_onError(s,t):console.error("React Router caught the following error during render",s)}render(){return this.state.error!==void 0?A.createElement($l.Provider,{value:this.props.routeContext},A.createElement(yv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function h3({routeContext:s,match:t,children:a}){let n=A.useContext(Vh);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),A.createElement($l.Provider,{value:s},a)}function f3(s,t=[],a=null,n=null,r=null){if(s==null){if(!a)return null;if(a.errors)s=a.matches;else if(t.length===0&&!a.initialized&&a.matches.length>0)s=a.matches;else return null}let i=s,o=a?.errors;if(o!=null){let h=i.findIndex(m=>m.route.id&&o?.[m.route.id]!==void 0);sn(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,h+1))}let c=!1,u=-1;if(a)for(let h=0;h<i.length;h++){let m=i[h];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(u=h),m.route.id){let{loaderData:p,errors:y}=a,g=m.route.loader&&!p.hasOwnProperty(m.route.id)&&(!y||y[m.route.id]===void 0);if(m.route.lazy||g){c=!0,u>=0?i=i.slice(0,u+1):i=[i[0]];break}}}return i.reduceRight((h,m,p)=>{let y,g=!1,j=null,b=null;a&&(y=o&&m.route.id?o[m.route.id]:void 0,j=m.route.errorElement||d3,c&&(u<0&&p===0?(K_("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),g=!0,b=null):u===p&&(g=!0,b=m.route.hydrateFallbackElement||null)));let N=t.concat(i.slice(0,p+1)),v=()=>{let S;return y?S=j:g?S=b:m.route.Component?S=A.createElement(m.route.Component,null):m.route.element?S=m.route.element:S=h,A.createElement(h3,{match:m,routeContext:{outlet:h,matches:N,isDataRoute:a!=null},children:S})};return a&&(m.route.ErrorBoundary||m.route.errorElement||p===0)?A.createElement(u3,{location:a.location,revalidation:a.revalidation,component:j,error:y,children:v(),routeContext:{outlet:null,matches:N,isDataRoute:!0},unstable_onError:n}):v()},null)}function jv(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function m3(s){let t=A.useContext(Vh);return sn(t,jv(s)),t}function p3(s){let t=A.useContext(Yg);return sn(t,jv(s)),t}function g3(s){let t=A.useContext($l);return sn(t,jv(s)),t}function Nv(s){let t=g3(s),a=t.matches[t.matches.length-1];return sn(a.route.id,`${s} can only be used on routes that contain a unique "id"`),a.route.id}function x3(){return Nv("useRouteId")}function b3(){let s=A.useContext(yv),t=p3("useRouteError"),a=Nv("useRouteError");return s!==void 0?s:t.errors?.[a]}function y3(){let{router:s}=m3("useNavigate"),t=Nv("useNavigate"),a=A.useRef(!1);return W_(()=>{a.current=!0}),A.useCallback(async(r,i={})=>{ql(a.current,V_),a.current&&(typeof r=="number"?s.navigate(r):await s.navigate(r,{fromRouteId:t,...i}))},[s,t])}var WN={};function K_(s,t,a){!t&&!WN[s]&&(WN[s]=!0,ql(!1,a))}A.memo(v3);function v3({routes:s,future:t,state:a,unstable_onError:n}){return Y_(s,void 0,a,n,t)}function X_({to:s,replace:t,state:a,relative:n}){sn(Wh(),"<Navigate> may be used only in the context of a <Router> component.");let{static:r}=A.useContext(No);ql(!r,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=A.useContext($l),{pathname:o}=Vl(),c=Vn(),u=bv(s,xv(i),o,n==="path"),h=JSON.stringify(u);return A.useEffect(()=>{c(JSON.parse(h),{replace:t,state:a,relative:n})},[c,h,n,t,a]),null}function j3(s){return l3(s.context)}function Vt(s){sn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function N3({basename:s="/",children:t=null,location:a,navigationType:n="POP",navigator:r,static:i=!1}){sn(!Wh(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=s.replace(/^\/*/,"/"),c=A.useMemo(()=>({basename:o,navigator:r,static:i,future:{}}),[o,r,i]);typeof a=="string"&&(a=$h(a));let{pathname:u="/",search:h="",hash:m="",state:p=null,key:y="default"}=a,g=A.useMemo(()=>{let j=sd(u,o);return j==null?null:{location:{pathname:j,search:h,hash:m,state:p,key:y},navigationType:n}},[o,u,h,m,p,y,n]);return ql(g!=null,`<Router basename="${o}"> is not able to match the URL "${u}${h}${m}" because it does not start with the basename, so the <Router> won't render anything.`),g==null?null:A.createElement(No.Provider,{value:c},A.createElement(mm.Provider,{children:t,value:g}))}function w3({children:s,location:t}){return o3(Dy(s),t)}function Dy(s,t=[]){let a=[];return A.Children.forEach(s,(n,r)=>{if(!A.isValidElement(n))return;let i=[...t,r];if(n.type===A.Fragment){a.push.apply(a,Dy(n.props.children,i));return}sn(n.type===Vt,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),sn(!n.props.index||!n.props.children,"An index route cannot have child routes.");let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=Dy(n.props.children,i)),a.push(o)}),a}var tg="get",sg="application/x-www-form-urlencoded";function Kg(s){return s!=null&&typeof s.tagName=="string"}function _3(s){return Kg(s)&&s.tagName.toLowerCase()==="button"}function S3(s){return Kg(s)&&s.tagName.toLowerCase()==="form"}function C3(s){return Kg(s)&&s.tagName.toLowerCase()==="input"}function A3(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function k3(s,t){return s.button===0&&(!t||t==="_self")&&!A3(s)}function Ey(s=""){return new URLSearchParams(typeof s=="string"||Array.isArray(s)||s instanceof URLSearchParams?s:Object.keys(s).reduce((t,a)=>{let n=s[a];return t.concat(Array.isArray(n)?n.map(r=>[a,r]):[[a,n]])},[]))}function D3(s,t){let a=Ey(s);return t&&t.forEach((n,r)=>{a.has(r)||t.getAll(r).forEach(i=>{a.append(r,i)})}),a}var bp=null;function E3(){if(bp===null)try{new FormData(document.createElement("form"),0),bp=!1}catch{bp=!0}return bp}var T3=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Eb(s){return s!=null&&!T3.has(s)?(ql(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${sg}"`),null):s}function L3(s,t){let a,n,r,i,o;if(S3(s)){let c=s.getAttribute("action");n=c?sd(c,t):null,a=s.getAttribute("method")||tg,r=Eb(s.getAttribute("enctype"))||sg,i=new FormData(s)}else if(_3(s)||C3(s)&&(s.type==="submit"||s.type==="image")){let c=s.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=s.getAttribute("formaction")||c.getAttribute("action");if(n=u?sd(u,t):null,a=s.getAttribute("formmethod")||c.getAttribute("method")||tg,r=Eb(s.getAttribute("formenctype"))||Eb(c.getAttribute("enctype"))||sg,i=new FormData(c,s),!E3()){let{name:h,type:m,value:p}=s;if(m==="image"){let y=h?`${h}.`:"";i.append(`${y}x`,"0"),i.append(`${y}y`,"0")}else h&&i.append(h,p)}}else{if(Kg(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');a=tg,n=null,r=sg,o=s}return i&&r==="text/plain"&&(o=i,i=void 0),{action:n,method:a.toLowerCase(),encType:r,formData:i,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function wv(s,t){if(s===!1||s===null||typeof s>"u")throw new Error(t)}function P3(s,t,a){let n=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return n.pathname==="/"?n.pathname=`_root.${a}`:t&&sd(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.${a}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${a}`,n}async function F3(s,t){if(s.id in t)return t[s.id];try{let a=await import(s.module);return t[s.id]=a,a}catch(a){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(a),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function I3(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function O3(s,t,a){let n=await Promise.all(s.map(async r=>{let i=t.routes[r.route.id];if(i){let o=await F3(i,a);return o.links?o.links():[]}return[]}));return z3(n.flat(1).filter(I3).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function YN(s,t,a,n,r,i){let o=(u,h)=>a[h]?u.route.id!==a[h].route.id:!0,c=(u,h)=>a[h].pathname!==u.pathname||a[h].route.path?.endsWith("*")&&a[h].params["*"]!==u.params["*"];return i==="assets"?t.filter((u,h)=>o(u,h)||c(u,h)):i==="data"?t.filter((u,h)=>{let m=n.routes[u.route.id];if(!m||!m.hasLoader)return!1;if(o(u,h)||c(u,h))return!0;if(u.route.shouldRevalidate){let p=u.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:a[0]?.params||{},nextUrl:new URL(s,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function M3(s,t,{includeHydrateFallback:a}={}){return R3(s.map(n=>{let r=t.routes[n.route.id];if(!r)return[];let i=[r.module];return r.clientActionModule&&(i=i.concat(r.clientActionModule)),r.clientLoaderModule&&(i=i.concat(r.clientLoaderModule)),a&&r.hydrateFallbackModule&&(i=i.concat(r.hydrateFallbackModule)),r.imports&&(i=i.concat(r.imports)),i}).flat(1))}function R3(s){return[...new Set(s)]}function B3(s){let t={},a=Object.keys(s).sort();for(let n of a)t[n]=s[n];return t}function z3(s,t){let a=new Set;return new Set(t),s.reduce((n,r)=>{let i=JSON.stringify(B3(r));return a.has(i)||(a.add(i),n.push({key:i,link:r})),n},[])}function G_(){let s=A.useContext(Vh);return wv(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function q3(){let s=A.useContext(Yg);return wv(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var _v=A.createContext(void 0);_v.displayName="FrameworkContext";function Q_(){let s=A.useContext(_v);return wv(s,"You must render this element inside a <HydratedRouter> element"),s}function U3(s,t){let a=A.useContext(_v),[n,r]=A.useState(!1),[i,o]=A.useState(!1),{onFocus:c,onBlur:u,onMouseEnter:h,onMouseLeave:m,onTouchStart:p}=t,y=A.useRef(null);A.useEffect(()=>{if(s==="render"&&o(!0),s==="viewport"){let b=v=>{v.forEach(S=>{o(S.isIntersecting)})},N=new IntersectionObserver(b,{threshold:.5});return y.current&&N.observe(y.current),()=>{N.disconnect()}}},[s]),A.useEffect(()=>{if(n){let b=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(b)}}},[n]);let g=()=>{r(!0)},j=()=>{r(!1),o(!1)};return a?s!=="intent"?[i,y,{}]:[i,y,{onFocus:Tf(c,g),onBlur:Tf(u,j),onMouseEnter:Tf(h,g),onMouseLeave:Tf(m,j),onTouchStart:Tf(p,g)}]:[!1,y,{}]}function Tf(s,t){return a=>{s&&s(a),a.defaultPrevented||t(a)}}function H3({page:s,...t}){let{router:a}=G_(),n=A.useMemo(()=>z_(a.routes,s,a.basename),[a.routes,s,a.basename]);return n?A.createElement(V3,{page:s,matches:n,...t}):null}function $3(s){let{manifest:t,routeModules:a}=Q_(),[n,r]=A.useState([]);return A.useEffect(()=>{let i=!1;return O3(s,t,a).then(o=>{i||r(o)}),()=>{i=!0}},[s,t,a]),n}function V3({page:s,matches:t,...a}){let n=Vl(),{manifest:r,routeModules:i}=Q_(),{basename:o}=G_(),{loaderData:c,matches:u}=q3(),h=A.useMemo(()=>YN(s,t,u,r,n,"data"),[s,t,u,r,n]),m=A.useMemo(()=>YN(s,t,u,r,n,"assets"),[s,t,u,r,n]),p=A.useMemo(()=>{if(s===n.pathname+n.search+n.hash)return[];let j=new Set,b=!1;if(t.forEach(v=>{let S=r.routes[v.route.id];!S||!S.hasLoader||(!h.some(E=>E.route.id===v.route.id)&&v.route.id in c&&i[v.route.id]?.shouldRevalidate||S.hasClientLoader?b=!0:j.add(v.route.id))}),j.size===0)return[];let N=P3(s,o,"data");return b&&j.size>0&&N.searchParams.set("_routes",t.filter(v=>j.has(v.route.id)).map(v=>v.route.id).join(",")),[N.pathname+N.search]},[o,c,n,r,h,t,s,i]),y=A.useMemo(()=>M3(m,r),[m,r]),g=$3(m);return A.createElement(A.Fragment,null,p.map(j=>A.createElement("link",{key:j,rel:"prefetch",as:"fetch",href:j,...a})),y.map(j=>A.createElement("link",{key:j,rel:"modulepreload",href:j,...a})),g.map(({key:j,link:b})=>A.createElement("link",{key:j,nonce:a.nonce,...b})))}function W3(...s){return t=>{s.forEach(a=>{typeof a=="function"?a(t):a!=null&&(a.current=t)})}}var J_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{J_&&(window.__reactRouterVersion="7.9.4")}catch{}function Y3({basename:s,children:t,window:a}){let n=A.useRef();n.current==null&&(n.current=TD({window:a,v5Compat:!0}));let r=n.current,[i,o]=A.useState({action:r.action,location:r.location}),c=A.useCallback(u=>{A.startTransition(()=>o(u))},[o]);return A.useLayoutEffect(()=>r.listen(c),[r,c]),A.createElement(N3,{basename:s,children:t,location:i.location,navigationType:i.action,navigator:r})}var Z_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,dl=A.forwardRef(function({onClick:t,discover:a="render",prefetch:n="none",relative:r,reloadDocument:i,replace:o,state:c,target:u,to:h,preventScrollReset:m,viewTransition:p,...y},g){let{basename:j}=A.useContext(No),b=typeof h=="string"&&Z_.test(h),N,v=!1;if(typeof h=="string"&&b&&(N=h,J_))try{let B=new URL(window.location.href),J=h.startsWith("//")?new URL(B.protocol+h):new URL(h),P=sd(J.pathname,j);J.origin===B.origin&&P!=null?h=P+J.search+J.hash:v=!0}catch{ql(!1,`<Link to="${h}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let S=n3(h,{relative:r}),[E,L,z]=U3(n,y),V=Q3(h,{replace:o,state:c,target:u,preventScrollReset:m,relative:r,viewTransition:p});function te(B){t&&t(B),B.defaultPrevented||V(B)}let q=A.createElement("a",{...y,...z,href:N||S,onClick:v||i?t:te,ref:W3(g,L),target:u,"data-discover":!b&&a==="render"?"true":void 0});return E&&!b?A.createElement(A.Fragment,null,q,A.createElement(H3,{page:S})):q});dl.displayName="Link";var K3=A.forwardRef(function({"aria-current":t="page",caseSensitive:a=!1,className:n="",end:r=!1,style:i,to:o,viewTransition:c,children:u,...h},m){let p=pm(o,{relative:h.relative}),y=Vl(),g=A.useContext(Yg),{navigator:j,basename:b}=A.useContext(No),N=g!=null&&sE(p)&&c===!0,v=j.encodeLocation?j.encodeLocation(p).pathname:p.pathname,S=y.pathname,E=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;a||(S=S.toLowerCase(),E=E?E.toLowerCase():null,v=v.toLowerCase()),E&&b&&(E=sd(E,b)||E);const L=v!=="/"&&v.endsWith("/")?v.length-1:v.length;let z=S===v||!r&&S.startsWith(v)&&S.charAt(L)==="/",V=E!=null&&(E===v||!r&&E.startsWith(v)&&E.charAt(v.length)==="/"),te={isActive:z,isPending:V,isTransitioning:N},q=z?t:void 0,B;typeof n=="function"?B=n(te):B=[n,z?"active":null,V?"pending":null,N?"transitioning":null].filter(Boolean).join(" ");let J=typeof i=="function"?i(te):i;return A.createElement(dl,{...h,"aria-current":q,className:B,ref:m,style:J,to:o,viewTransition:c},typeof u=="function"?u(te):u)});K3.displayName="NavLink";var X3=A.forwardRef(({discover:s="render",fetcherKey:t,navigate:a,reloadDocument:n,replace:r,state:i,method:o=tg,action:c,onSubmit:u,relative:h,preventScrollReset:m,viewTransition:p,...y},g)=>{let j=eE(),b=tE(c,{relative:h}),N=o.toLowerCase()==="get"?"get":"post",v=typeof c=="string"&&Z_.test(c),S=E=>{if(u&&u(E),E.defaultPrevented)return;E.preventDefault();let L=E.nativeEvent.submitter,z=L?.getAttribute("formmethod")||o;j(L||E.currentTarget,{fetcherKey:t,method:z,navigate:a,replace:r,state:i,relative:h,preventScrollReset:m,viewTransition:p})};return A.createElement("form",{ref:g,method:N,action:b,onSubmit:n?u:S,...y,"data-discover":!v&&s==="render"?"true":void 0})});X3.displayName="Form";function G3(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function eS(s){let t=A.useContext(Vh);return sn(t,G3(s)),t}function Q3(s,{target:t,replace:a,state:n,preventScrollReset:r,relative:i,viewTransition:o}={}){let c=Vn(),u=Vl(),h=pm(s,{relative:i});return A.useCallback(m=>{if(k3(m,t)){m.preventDefault();let p=a!==void 0?a:am(u)===am(h);c(s,{replace:p,state:n,preventScrollReset:r,relative:i,viewTransition:o})}},[u,c,h,a,n,t,s,r,i,o])}function rc(s){ql(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=A.useRef(Ey(s)),a=A.useRef(!1),n=Vl(),r=A.useMemo(()=>D3(n.search,a.current?null:t.current),[n.search]),i=Vn(),o=A.useCallback((c,u)=>{const h=Ey(typeof c=="function"?c(new URLSearchParams(r)):c);a.current=!0,i("?"+h,u)},[i,r]);return[r,o]}var J3=0,Z3=()=>`__${String(++J3)}__`;function eE(){let{router:s}=eS("useSubmit"),{basename:t}=A.useContext(No),a=x3();return A.useCallback(async(n,r={})=>{let{action:i,method:o,encType:c,formData:u,body:h}=L3(n,t);if(r.navigate===!1){let m=r.fetcherKey||Z3();await s.fetch(m,a,r.action||i,{preventScrollReset:r.preventScrollReset,formData:u,body:h,formMethod:r.method||o,formEncType:r.encType||c,flushSync:r.flushSync})}else await s.navigate(r.action||i,{preventScrollReset:r.preventScrollReset,formData:u,body:h,formMethod:r.method||o,formEncType:r.encType||c,replace:r.replace,state:r.state,fromRouteId:a,flushSync:r.flushSync,viewTransition:r.viewTransition})},[s,t,a])}function tE(s,{relative:t}={}){let{basename:a}=A.useContext(No),n=A.useContext($l);sn(n,"useFormAction must be used inside a RouteContext");let[r]=n.matches.slice(-1),i={...pm(s||".",{relative:t})},o=Vl();if(s==null){i.search=o.search;let c=new URLSearchParams(i.search),u=c.getAll("index");if(u.some(m=>m==="")){c.delete("index"),u.filter(p=>p).forEach(p=>c.append("index",p));let m=c.toString();i.search=m?`?${m}`:""}}return(!s||s===".")&&r.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),a!=="/"&&(i.pathname=i.pathname==="/"?a:ed([a,i.pathname])),am(i)}function sE(s,{relative:t}={}){let a=A.useContext($_);sn(a!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=eS("useViewTransitionState"),r=pm(s,{relative:t});if(!a.isTransitioning)return!1;let i=sd(a.currentLocation.pathname,n)||a.currentLocation.pathname,o=sd(a.nextLocation.pathname,n)||a.nextLocation.pathname;return gg(r.pathname,o)!=null||gg(r.pathname,i)!=null}var Yh=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(s){return this.listeners.add(s),this.onSubscribe(),()=>{this.listeners.delete(s),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},aE={setTimeout:(s,t)=>setTimeout(s,t),clearTimeout:s=>clearTimeout(s),setInterval:(s,t)=>setInterval(s,t),clearInterval:s=>clearInterval(s)},nE=class{#e=aE;#t=!1;setTimeoutProvider(s){this.#e=s}setTimeout(s,t){return this.#e.setTimeout(s,t)}clearTimeout(s){this.#e.clearTimeout(s)}setInterval(s,t){return this.#e.setInterval(s,t)}clearInterval(s){this.#e.clearInterval(s)}},ku=new nE;function rE(s){setTimeout(s,0)}var Iu=typeof window>"u"||"Deno"in globalThis;function ci(){}function iE(s,t){return typeof s=="function"?s(t):s}function Ty(s){return typeof s=="number"&&s>=0&&s!==1/0}function tS(s,t){return Math.max(s+(t||0)-Date.now(),0)}function Yd(s,t){return typeof s=="function"?s(t):s}function zl(s,t){return typeof s=="function"?s(t):s}function KN(s,t){const{type:a="all",exact:n,fetchStatus:r,predicate:i,queryKey:o,stale:c}=s;if(o){if(n){if(t.queryHash!==Sv(o,t.options))return!1}else if(!nm(t.queryKey,o))return!1}if(a!=="all"){const u=t.isActive();if(a==="active"&&!u||a==="inactive"&&u)return!1}return!(typeof c=="boolean"&&t.isStale()!==c||r&&r!==t.state.fetchStatus||i&&!i(t))}function XN(s,t){const{exact:a,status:n,predicate:r,mutationKey:i}=s;if(i){if(!t.options.mutationKey)return!1;if(a){if(Ou(t.options.mutationKey)!==Ou(i))return!1}else if(!nm(t.options.mutationKey,i))return!1}return!(n&&t.state.status!==n||r&&!r(t))}function Sv(s,t){return(t?.queryKeyHashFn||Ou)(s)}function Ou(s){return JSON.stringify(s,(t,a)=>Ly(a)?Object.keys(a).sort().reduce((n,r)=>(n[r]=a[r],n),{}):a)}function nm(s,t){return s===t?!0:typeof s!=typeof t?!1:s&&t&&typeof s=="object"&&typeof t=="object"?Object.keys(t).every(a=>nm(s[a],t[a])):!1}var lE=Object.prototype.hasOwnProperty;function sS(s,t){if(s===t)return s;const a=GN(s)&&GN(t);if(!a&&!(Ly(s)&&Ly(t)))return t;const r=(a?s:Object.keys(s)).length,i=a?t:Object.keys(t),o=i.length,c=a?new Array(o):{};let u=0;for(let h=0;h<o;h++){const m=a?h:i[h],p=s[m],y=t[m];if(p===y){c[m]=p,(a?h<r:lE.call(s,m))&&u++;continue}if(p===null||y===null||typeof p!="object"||typeof y!="object"){c[m]=y;continue}const g=sS(p,y);c[m]=g,g===p&&u++}return r===o&&u===r?s:c}function xg(s,t){if(!t||Object.keys(s).length!==Object.keys(t).length)return!1;for(const a in s)if(s[a]!==t[a])return!1;return!0}function GN(s){return Array.isArray(s)&&s.length===Object.keys(s).length}function Ly(s){if(!QN(s))return!1;const t=s.constructor;if(t===void 0)return!0;const a=t.prototype;return!(!QN(a)||!a.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(s)!==Object.prototype)}function QN(s){return Object.prototype.toString.call(s)==="[object Object]"}function oE(s){return new Promise(t=>{ku.setTimeout(t,s)})}function Py(s,t,a){return typeof a.structuralSharing=="function"?a.structuralSharing(s,t):a.structuralSharing!==!1?sS(s,t):t}function cE(s,t,a=0){const n=[...s,t];return a&&n.length>a?n.slice(1):n}function dE(s,t,a=0){const n=[t,...s];return a&&n.length>a?n.slice(0,-1):n}var Cv=Symbol();function aS(s,t){return!s.queryFn&&t?.initialPromise?()=>t.initialPromise:!s.queryFn||s.queryFn===Cv?()=>Promise.reject(new Error(`Missing queryFn: '${s.queryHash}'`)):s.queryFn}function nS(s,t){return typeof s=="function"?s(...t):!!s}var uE=class extends Yh{#e;#t;#s;constructor(){super(),this.#s=s=>{if(!Iu&&window.addEventListener){const t=()=>s();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}}}onSubscribe(){this.#t||this.setEventListener(this.#s)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(s){this.#s=s,this.#t?.(),this.#t=s(t=>{typeof t=="boolean"?this.setFocused(t):this.onFocus()})}setFocused(s){this.#e!==s&&(this.#e=s,this.onFocus())}onFocus(){const s=this.isFocused();this.listeners.forEach(t=>{t(s)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},Av=new uE;function Fy(){let s,t;const a=new Promise((r,i)=>{s=r,t=i});a.status="pending",a.catch(()=>{});function n(r){Object.assign(a,r),delete a.resolve,delete a.reject}return a.resolve=r=>{n({status:"fulfilled",value:r}),s(r)},a.reject=r=>{n({status:"rejected",reason:r}),t(r)},a}var hE=rE;function fE(){let s=[],t=0,a=c=>{c()},n=c=>{c()},r=hE;const i=c=>{t?s.push(c):r(()=>{a(c)})},o=()=>{const c=s;s=[],c.length&&r(()=>{n(()=>{c.forEach(u=>{a(u)})})})};return{batch:c=>{let u;t++;try{u=c()}finally{t--,t||o()}return u},batchCalls:c=>(...u)=>{i(()=>{c(...u)})},schedule:i,setNotifyFunction:c=>{a=c},setBatchNotifyFunction:c=>{n=c},setScheduler:c=>{r=c}}}var nr=fE(),mE=class extends Yh{#e=!0;#t;#s;constructor(){super(),this.#s=s=>{if(!Iu&&window.addEventListener){const t=()=>s(!0),a=()=>s(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",a,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",a)}}}}onSubscribe(){this.#t||this.setEventListener(this.#s)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(s){this.#s=s,this.#t?.(),this.#t=s(this.setOnline.bind(this))}setOnline(s){this.#e!==s&&(this.#e=s,this.listeners.forEach(a=>{a(s)}))}isOnline(){return this.#e}},bg=new mE;function pE(s){return Math.min(1e3*2**s,3e4)}function rS(s){return(s??"online")==="online"?bg.isOnline():!0}var Iy=class extends Error{constructor(s){super("CancelledError"),this.revert=s?.revert,this.silent=s?.silent}};function iS(s){let t=!1,a=0,n;const r=Fy(),i=()=>r.status!=="pending",o=b=>{if(!i()){const N=new Iy(b);y(N),s.onCancel?.(N)}},c=()=>{t=!0},u=()=>{t=!1},h=()=>Av.isFocused()&&(s.networkMode==="always"||bg.isOnline())&&s.canRun(),m=()=>rS(s.networkMode)&&s.canRun(),p=b=>{i()||(n?.(),r.resolve(b))},y=b=>{i()||(n?.(),r.reject(b))},g=()=>new Promise(b=>{n=N=>{(i()||h())&&b(N)},s.onPause?.()}).then(()=>{n=void 0,i()||s.onContinue?.()}),j=()=>{if(i())return;let b;const N=a===0?s.initialPromise:void 0;try{b=N??s.fn()}catch(v){b=Promise.reject(v)}Promise.resolve(b).then(p).catch(v=>{if(i())return;const S=s.retry??(Iu?0:3),E=s.retryDelay??pE,L=typeof E=="function"?E(a,v):E,z=S===!0||typeof S=="number"&&a<S||typeof S=="function"&&S(a,v);if(t||!z){y(v);return}a++,s.onFail?.(a,v),oE(L).then(()=>h()?void 0:g()).then(()=>{t?y(v):j()})})};return{promise:r,status:()=>r.status,cancel:o,continue:()=>(n?.(),r),cancelRetry:c,continueRetry:u,canStart:m,start:()=>(m()?j():g().then(j),r)}}var lS=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Ty(this.gcTime)&&(this.#e=ku.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(s){this.gcTime=Math.max(this.gcTime||0,s??(Iu?1/0:300*1e3))}clearGcTimeout(){this.#e&&(ku.clearTimeout(this.#e),this.#e=void 0)}},gE=class extends lS{#e;#t;#s;#n;#a;#i;#l;constructor(s){super(),this.#l=!1,this.#i=s.defaultOptions,this.setOptions(s.options),this.observers=[],this.#n=s.client,this.#s=this.#n.getQueryCache(),this.queryKey=s.queryKey,this.queryHash=s.queryHash,this.#e=JN(this.options),this.state=s.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#a?.promise}setOptions(s){if(this.options={...this.#i,...s},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const t=JN(this.options);t.data!==void 0&&(this.setData(t.data,{updatedAt:t.dataUpdatedAt,manual:!0}),this.#e=t)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#s.remove(this)}setData(s,t){const a=Py(this.state.data,s,this.options);return this.#r({data:a,type:"success",dataUpdatedAt:t?.updatedAt,manual:t?.manual}),a}setState(s,t){this.#r({type:"setState",state:s,setStateOptions:t})}cancel(s){const t=this.#a?.promise;return this.#a?.cancel(s),t?t.then(ci).catch(ci):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(s=>zl(s.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Cv||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(s=>Yd(s.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(s=>s.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(s=0){return this.state.data===void 0?!0:s==="static"?!1:this.state.isInvalidated?!0:!tS(this.state.dataUpdatedAt,s)}onFocus(){this.observers.find(t=>t.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#a?.continue()}onOnline(){this.observers.find(t=>t.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#a?.continue()}addObserver(s){this.observers.includes(s)||(this.observers.push(s),this.clearGcTimeout(),this.#s.notify({type:"observerAdded",query:this,observer:s}))}removeObserver(s){this.observers.includes(s)&&(this.observers=this.observers.filter(t=>t!==s),this.observers.length||(this.#a&&(this.#l?this.#a.cancel({revert:!0}):this.#a.cancelRetry()),this.scheduleGc()),this.#s.notify({type:"observerRemoved",query:this,observer:s}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#r({type:"invalidate"})}async fetch(s,t){if(this.state.fetchStatus!=="idle"&&this.#a?.status()!=="rejected"){if(this.state.data!==void 0&&t?.cancelRefetch)this.cancel({silent:!0});else if(this.#a)return this.#a.continueRetry(),this.#a.promise}if(s&&this.setOptions(s),!this.options.queryFn){const c=this.observers.find(u=>u.options.queryFn);c&&this.setOptions(c.options)}const a=new AbortController,n=c=>{Object.defineProperty(c,"signal",{enumerable:!0,get:()=>(this.#l=!0,a.signal)})},r=()=>{const c=aS(this.options,t),h=(()=>{const m={client:this.#n,queryKey:this.queryKey,meta:this.meta};return n(m),m})();return this.#l=!1,this.options.persister?this.options.persister(c,h,this):c(h)},o=(()=>{const c={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:this.#n,state:this.state,fetchFn:r};return n(c),c})();this.options.behavior?.onFetch(o,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==o.fetchOptions?.meta)&&this.#r({type:"fetch",meta:o.fetchOptions?.meta}),this.#a=iS({initialPromise:t?.initialPromise,fn:o.fetchFn,onCancel:c=>{c instanceof Iy&&c.revert&&this.setState({...this.#t,fetchStatus:"idle"}),a.abort()},onFail:(c,u)=>{this.#r({type:"failed",failureCount:c,error:u})},onPause:()=>{this.#r({type:"pause"})},onContinue:()=>{this.#r({type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0});try{const c=await this.#a.start();if(c===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(c),this.#s.config.onSuccess?.(c,this),this.#s.config.onSettled?.(c,this.state.error,this),c}catch(c){if(c instanceof Iy){if(c.silent)return this.#a.promise;if(c.revert){if(this.state.data===void 0)throw c;return this.state.data}}throw this.#r({type:"error",error:c}),this.#s.config.onError?.(c,this),this.#s.config.onSettled?.(this.state.data,c,this),c}finally{this.scheduleGc()}}#r(s){const t=a=>{switch(s.type){case"failed":return{...a,fetchFailureCount:s.failureCount,fetchFailureReason:s.error};case"pause":return{...a,fetchStatus:"paused"};case"continue":return{...a,fetchStatus:"fetching"};case"fetch":return{...a,...oS(a.data,this.options),fetchMeta:s.meta??null};case"success":const n={...a,data:s.data,dataUpdateCount:a.dataUpdateCount+1,dataUpdatedAt:s.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!s.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=s.manual?n:void 0,n;case"error":const r=s.error;return{...a,error:r,errorUpdateCount:a.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:a.fetchFailureCount+1,fetchFailureReason:r,fetchStatus:"idle",status:"error"};case"invalidate":return{...a,isInvalidated:!0};case"setState":return{...a,...s.state}}};this.state=t(this.state),nr.batch(()=>{this.observers.forEach(a=>{a.onQueryUpdate()}),this.#s.notify({query:this,type:"updated",action:s})})}};function oS(s,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:rS(t.networkMode)?"fetching":"paused",...s===void 0&&{error:null,status:"pending"}}}function JN(s){const t=typeof s.initialData=="function"?s.initialData():s.initialData,a=t!==void 0,n=a?typeof s.initialDataUpdatedAt=="function"?s.initialDataUpdatedAt():s.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:a?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:a?"success":"pending",fetchStatus:"idle"}}var xE=class extends Yh{constructor(s,t){super(),this.options=t,this.#e=s,this.#r=null,this.#l=Fy(),this.bindMethods(),this.setOptions(t)}#e;#t=void 0;#s=void 0;#n=void 0;#a;#i;#l;#r;#p;#h;#f;#c;#d;#o;#m=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),ZN(this.#t,this.options)?this.#u():this.updateResult(),this.#y())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Oy(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Oy(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#v(),this.#j(),this.#t.removeObserver(this)}setOptions(s){const t=this.options,a=this.#t;if(this.options=this.#e.defaultQueryOptions(s),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof zl(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#N(),this.#t.setOptions(this.options),t._defaulted&&!xg(this.options,t)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const n=this.hasListeners();n&&e1(this.#t,a,this.options,t)&&this.#u(),this.updateResult(),n&&(this.#t!==a||zl(this.options.enabled,this.#t)!==zl(t.enabled,this.#t)||Yd(this.options.staleTime,this.#t)!==Yd(t.staleTime,this.#t))&&this.#g();const r=this.#x();n&&(this.#t!==a||zl(this.options.enabled,this.#t)!==zl(t.enabled,this.#t)||r!==this.#o)&&this.#b(r)}getOptimisticResult(s){const t=this.#e.getQueryCache().build(this.#e,s),a=this.createResult(t,s);return yE(this,a)&&(this.#n=a,this.#i=this.options,this.#a=this.#t.state),a}getCurrentResult(){return this.#n}trackResult(s,t){return new Proxy(s,{get:(a,n)=>(this.trackProp(n),t?.(n),n==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&this.#l.status==="pending"&&this.#l.reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(a,n))})}trackProp(s){this.#m.add(s)}getCurrentQuery(){return this.#t}refetch({...s}={}){return this.fetch({...s})}fetchOptimistic(s){const t=this.#e.defaultQueryOptions(s),a=this.#e.getQueryCache().build(this.#e,t);return a.fetch().then(()=>this.createResult(a,t))}fetch(s){return this.#u({...s,cancelRefetch:s.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#n))}#u(s){this.#N();let t=this.#t.fetch(this.options,s);return s?.throwOnError||(t=t.catch(ci)),t}#g(){this.#v();const s=Yd(this.options.staleTime,this.#t);if(Iu||this.#n.isStale||!Ty(s))return;const a=tS(this.#n.dataUpdatedAt,s)+1;this.#c=ku.setTimeout(()=>{this.#n.isStale||this.updateResult()},a)}#x(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#b(s){this.#j(),this.#o=s,!(Iu||zl(this.options.enabled,this.#t)===!1||!Ty(this.#o)||this.#o===0)&&(this.#d=ku.setInterval(()=>{(this.options.refetchIntervalInBackground||Av.isFocused())&&this.#u()},this.#o))}#y(){this.#g(),this.#b(this.#x())}#v(){this.#c&&(ku.clearTimeout(this.#c),this.#c=void 0)}#j(){this.#d&&(ku.clearInterval(this.#d),this.#d=void 0)}createResult(s,t){const a=this.#t,n=this.options,r=this.#n,i=this.#a,o=this.#i,u=s!==a?s.state:this.#s,{state:h}=s;let m={...h},p=!1,y;if(t._optimisticResults){const q=this.hasListeners(),B=!q&&ZN(s,t),J=q&&e1(s,a,t,n);(B||J)&&(m={...m,...oS(h.data,s.options)}),t._optimisticResults==="isRestoring"&&(m.fetchStatus="idle")}let{error:g,errorUpdatedAt:j,status:b}=m;y=m.data;let N=!1;if(t.placeholderData!==void 0&&y===void 0&&b==="pending"){let q;r?.isPlaceholderData&&t.placeholderData===o?.placeholderData?(q=r.data,N=!0):q=typeof t.placeholderData=="function"?t.placeholderData(this.#f?.state.data,this.#f):t.placeholderData,q!==void 0&&(b="success",y=Py(r?.data,q,t),p=!0)}if(t.select&&y!==void 0&&!N)if(r&&y===i?.data&&t.select===this.#p)y=this.#h;else try{this.#p=t.select,y=t.select(y),y=Py(r?.data,y,t),this.#h=y,this.#r=null}catch(q){this.#r=q}this.#r&&(g=this.#r,y=this.#h,j=Date.now(),b="error");const v=m.fetchStatus==="fetching",S=b==="pending",E=b==="error",L=S&&v,z=y!==void 0,te={status:b,fetchStatus:m.fetchStatus,isPending:S,isSuccess:b==="success",isError:E,isInitialLoading:L,isLoading:L,data:y,dataUpdatedAt:m.dataUpdatedAt,error:g,errorUpdatedAt:j,failureCount:m.fetchFailureCount,failureReason:m.fetchFailureReason,errorUpdateCount:m.errorUpdateCount,isFetched:m.dataUpdateCount>0||m.errorUpdateCount>0,isFetchedAfterMount:m.dataUpdateCount>u.dataUpdateCount||m.errorUpdateCount>u.errorUpdateCount,isFetching:v,isRefetching:v&&!S,isLoadingError:E&&!z,isPaused:m.fetchStatus==="paused",isPlaceholderData:p,isRefetchError:E&&z,isStale:kv(s,t),refetch:this.refetch,promise:this.#l,isEnabled:zl(t.enabled,s)!==!1};if(this.options.experimental_prefetchInRender){const q=P=>{te.status==="error"?P.reject(te.error):te.data!==void 0&&P.resolve(te.data)},B=()=>{const P=this.#l=te.promise=Fy();q(P)},J=this.#l;switch(J.status){case"pending":s.queryHash===a.queryHash&&q(J);break;case"fulfilled":(te.status==="error"||te.data!==J.value)&&B();break;case"rejected":(te.status!=="error"||te.error!==J.reason)&&B();break}}return te}updateResult(){const s=this.#n,t=this.createResult(this.#t,this.options);if(this.#a=this.#t.state,this.#i=this.options,this.#a.data!==void 0&&(this.#f=this.#t),xg(t,s))return;this.#n=t;const a=()=>{if(!s)return!0;const{notifyOnChangeProps:n}=this.options,r=typeof n=="function"?n():n;if(r==="all"||!r&&!this.#m.size)return!0;const i=new Set(r??this.#m);return this.options.throwOnError&&i.add("error"),Object.keys(this.#n).some(o=>{const c=o;return this.#n[c]!==s[c]&&i.has(c)})};this.#w({listeners:a()})}#N(){const s=this.#e.getQueryCache().build(this.#e,this.options);if(s===this.#t)return;const t=this.#t;this.#t=s,this.#s=s.state,this.hasListeners()&&(t?.removeObserver(this),s.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#y()}#w(s){nr.batch(()=>{s.listeners&&this.listeners.forEach(t=>{t(this.#n)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function bE(s,t){return zl(t.enabled,s)!==!1&&s.state.data===void 0&&!(s.state.status==="error"&&t.retryOnMount===!1)}function ZN(s,t){return bE(s,t)||s.state.data!==void 0&&Oy(s,t,t.refetchOnMount)}function Oy(s,t,a){if(zl(t.enabled,s)!==!1&&Yd(t.staleTime,s)!=="static"){const n=typeof a=="function"?a(s):a;return n==="always"||n!==!1&&kv(s,t)}return!1}function e1(s,t,a,n){return(s!==t||zl(n.enabled,s)===!1)&&(!a.suspense||s.state.status!=="error")&&kv(s,a)}function kv(s,t){return zl(t.enabled,s)!==!1&&s.isStaleByTime(Yd(t.staleTime,s))}function yE(s,t){return!xg(s.getCurrentResult(),t)}function t1(s){return{onFetch:(t,a)=>{const n=t.options,r=t.fetchOptions?.meta?.fetchMore?.direction,i=t.state.data?.pages||[],o=t.state.data?.pageParams||[];let c={pages:[],pageParams:[]},u=0;const h=async()=>{let m=!1;const p=j=>{Object.defineProperty(j,"signal",{enumerable:!0,get:()=>(t.signal.aborted?m=!0:t.signal.addEventListener("abort",()=>{m=!0}),t.signal)})},y=aS(t.options,t.fetchOptions),g=async(j,b,N)=>{if(m)return Promise.reject();if(b==null&&j.pages.length)return Promise.resolve(j);const S=(()=>{const V={client:t.client,queryKey:t.queryKey,pageParam:b,direction:N?"backward":"forward",meta:t.options.meta};return p(V),V})(),E=await y(S),{maxPages:L}=t.options,z=N?dE:cE;return{pages:z(j.pages,E,L),pageParams:z(j.pageParams,b,L)}};if(r&&i.length){const j=r==="backward",b=j?vE:s1,N={pages:i,pageParams:o},v=b(n,N);c=await g(N,v,j)}else{const j=s??i.length;do{const b=u===0?o[0]??n.initialPageParam:s1(n,c);if(u>0&&b==null)break;c=await g(c,b),u++}while(u<j)}return c};t.options.persister?t.fetchFn=()=>t.options.persister?.(h,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},a):t.fetchFn=h}}}function s1(s,{pages:t,pageParams:a}){const n=t.length-1;return t.length>0?s.getNextPageParam(t[n],t,a[n],a):void 0}function vE(s,{pages:t,pageParams:a}){return t.length>0?s.getPreviousPageParam?.(t[0],t,a[0],a):void 0}var jE=class extends lS{#e;#t;#s;#n;constructor(s){super(),this.#e=s.client,this.mutationId=s.mutationId,this.#s=s.mutationCache,this.#t=[],this.state=s.state||cS(),this.setOptions(s.options),this.scheduleGc()}setOptions(s){this.options=s,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(s){this.#t.includes(s)||(this.#t.push(s),this.clearGcTimeout(),this.#s.notify({type:"observerAdded",mutation:this,observer:s}))}removeObserver(s){this.#t=this.#t.filter(t=>t!==s),this.scheduleGc(),this.#s.notify({type:"observerRemoved",mutation:this,observer:s})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#s.remove(this))}continue(){return this.#n?.continue()??this.execute(this.state.variables)}async execute(s){const t=()=>{this.#a({type:"continue"})},a={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#n=iS({fn:()=>this.options.mutationFn?this.options.mutationFn(s,a):Promise.reject(new Error("No mutationFn found")),onFail:(i,o)=>{this.#a({type:"failed",failureCount:i,error:o})},onPause:()=>{this.#a({type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#s.canRun(this)});const n=this.state.status==="pending",r=!this.#n.canStart();try{if(n)t();else{this.#a({type:"pending",variables:s,isPaused:r}),await this.#s.config.onMutate?.(s,this,a);const o=await this.options.onMutate?.(s,a);o!==this.state.context&&this.#a({type:"pending",context:o,variables:s,isPaused:r})}const i=await this.#n.start();return await this.#s.config.onSuccess?.(i,s,this.state.context,this,a),await this.options.onSuccess?.(i,s,this.state.context,a),await this.#s.config.onSettled?.(i,null,this.state.variables,this.state.context,this,a),await this.options.onSettled?.(i,null,s,this.state.context,a),this.#a({type:"success",data:i}),i}catch(i){try{throw await this.#s.config.onError?.(i,s,this.state.context,this,a),await this.options.onError?.(i,s,this.state.context,a),await this.#s.config.onSettled?.(void 0,i,this.state.variables,this.state.context,this,a),await this.options.onSettled?.(void 0,i,s,this.state.context,a),i}finally{this.#a({type:"error",error:i})}}finally{this.#s.runNext(this)}}#a(s){const t=a=>{switch(s.type){case"failed":return{...a,failureCount:s.failureCount,failureReason:s.error};case"pause":return{...a,isPaused:!0};case"continue":return{...a,isPaused:!1};case"pending":return{...a,context:s.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:s.isPaused,status:"pending",variables:s.variables,submittedAt:Date.now()};case"success":return{...a,data:s.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...a,data:void 0,error:s.error,failureCount:a.failureCount+1,failureReason:s.error,isPaused:!1,status:"error"}}};this.state=t(this.state),nr.batch(()=>{this.#t.forEach(a=>{a.onMutationUpdate(s)}),this.#s.notify({mutation:this,type:"updated",action:s})})}};function cS(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var NE=class extends Yh{constructor(s={}){super(),this.config=s,this.#e=new Set,this.#t=new Map,this.#s=0}#e;#t;#s;build(s,t,a){const n=new jE({client:s,mutationCache:this,mutationId:++this.#s,options:s.defaultMutationOptions(t),state:a});return this.add(n),n}add(s){this.#e.add(s);const t=yp(s);if(typeof t=="string"){const a=this.#t.get(t);a?a.push(s):this.#t.set(t,[s])}this.notify({type:"added",mutation:s})}remove(s){if(this.#e.delete(s)){const t=yp(s);if(typeof t=="string"){const a=this.#t.get(t);if(a)if(a.length>1){const n=a.indexOf(s);n!==-1&&a.splice(n,1)}else a[0]===s&&this.#t.delete(t)}}this.notify({type:"removed",mutation:s})}canRun(s){const t=yp(s);if(typeof t=="string"){const n=this.#t.get(t)?.find(r=>r.state.status==="pending");return!n||n===s}else return!0}runNext(s){const t=yp(s);return typeof t=="string"?this.#t.get(t)?.find(n=>n!==s&&n.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){nr.batch(()=>{this.#e.forEach(s=>{this.notify({type:"removed",mutation:s})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(s){const t={exact:!0,...s};return this.getAll().find(a=>XN(t,a))}findAll(s={}){return this.getAll().filter(t=>XN(s,t))}notify(s){nr.batch(()=>{this.listeners.forEach(t=>{t(s)})})}resumePausedMutations(){const s=this.getAll().filter(t=>t.state.isPaused);return nr.batch(()=>Promise.all(s.map(t=>t.continue().catch(ci))))}};function yp(s){return s.options.scope?.id}var wE=class extends Yh{#e;#t=void 0;#s;#n;constructor(t,a){super(),this.#e=t,this.setOptions(a),this.bindMethods(),this.#a()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){const a=this.options;this.options=this.#e.defaultMutationOptions(t),xg(this.options,a)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#s,observer:this}),a?.mutationKey&&this.options.mutationKey&&Ou(a.mutationKey)!==Ou(this.options.mutationKey)?this.reset():this.#s?.state.status==="pending"&&this.#s.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#s?.removeObserver(this)}onMutationUpdate(t){this.#a(),this.#i(t)}getCurrentResult(){return this.#t}reset(){this.#s?.removeObserver(this),this.#s=void 0,this.#a(),this.#i()}mutate(t,a){return this.#n=a,this.#s?.removeObserver(this),this.#s=this.#e.getMutationCache().build(this.#e,this.options),this.#s.addObserver(this),this.#s.execute(t)}#a(){const t=this.#s?.state??cS();this.#t={...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset}}#i(t){nr.batch(()=>{if(this.#n&&this.hasListeners()){const a=this.#t.variables,n=this.#t.context,r={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};t?.type==="success"?(this.#n.onSuccess?.(t.data,a,n,r),this.#n.onSettled?.(t.data,null,a,n,r)):t?.type==="error"&&(this.#n.onError?.(t.error,a,n,r),this.#n.onSettled?.(void 0,t.error,a,n,r))}this.listeners.forEach(a=>{a(this.#t)})})}},_E=class extends Yh{constructor(s={}){super(),this.config=s,this.#e=new Map}#e;build(s,t,a){const n=t.queryKey,r=t.queryHash??Sv(n,t);let i=this.get(r);return i||(i=new gE({client:s,queryKey:n,queryHash:r,options:s.defaultQueryOptions(t),state:a,defaultOptions:s.getQueryDefaults(n)}),this.add(i)),i}add(s){this.#e.has(s.queryHash)||(this.#e.set(s.queryHash,s),this.notify({type:"added",query:s}))}remove(s){const t=this.#e.get(s.queryHash);t&&(s.destroy(),t===s&&this.#e.delete(s.queryHash),this.notify({type:"removed",query:s}))}clear(){nr.batch(()=>{this.getAll().forEach(s=>{this.remove(s)})})}get(s){return this.#e.get(s)}getAll(){return[...this.#e.values()]}find(s){const t={exact:!0,...s};return this.getAll().find(a=>KN(t,a))}findAll(s={}){const t=this.getAll();return Object.keys(s).length>0?t.filter(a=>KN(s,a)):t}notify(s){nr.batch(()=>{this.listeners.forEach(t=>{t(s)})})}onFocus(){nr.batch(()=>{this.getAll().forEach(s=>{s.onFocus()})})}onOnline(){nr.batch(()=>{this.getAll().forEach(s=>{s.onOnline()})})}},SE=class{#e;#t;#s;#n;#a;#i;#l;#r;constructor(s={}){this.#e=s.queryCache||new _E,this.#t=s.mutationCache||new NE,this.#s=s.defaultOptions||{},this.#n=new Map,this.#a=new Map,this.#i=0}mount(){this.#i++,this.#i===1&&(this.#l=Av.subscribe(async s=>{s&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#r=bg.subscribe(async s=>{s&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#i--,this.#i===0&&(this.#l?.(),this.#l=void 0,this.#r?.(),this.#r=void 0)}isFetching(s){return this.#e.findAll({...s,fetchStatus:"fetching"}).length}isMutating(s){return this.#t.findAll({...s,status:"pending"}).length}getQueryData(s){const t=this.defaultQueryOptions({queryKey:s});return this.#e.get(t.queryHash)?.state.data}ensureQueryData(s){const t=this.defaultQueryOptions(s),a=this.#e.build(this,t),n=a.state.data;return n===void 0?this.fetchQuery(s):(s.revalidateIfStale&&a.isStaleByTime(Yd(t.staleTime,a))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(s){return this.#e.findAll(s).map(({queryKey:t,state:a})=>{const n=a.data;return[t,n]})}setQueryData(s,t,a){const n=this.defaultQueryOptions({queryKey:s}),i=this.#e.get(n.queryHash)?.state.data,o=iE(t,i);if(o!==void 0)return this.#e.build(this,n).setData(o,{...a,manual:!0})}setQueriesData(s,t,a){return nr.batch(()=>this.#e.findAll(s).map(({queryKey:n})=>[n,this.setQueryData(n,t,a)]))}getQueryState(s){const t=this.defaultQueryOptions({queryKey:s});return this.#e.get(t.queryHash)?.state}removeQueries(s){const t=this.#e;nr.batch(()=>{t.findAll(s).forEach(a=>{t.remove(a)})})}resetQueries(s,t){const a=this.#e;return nr.batch(()=>(a.findAll(s).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...s},t)))}cancelQueries(s,t={}){const a={revert:!0,...t},n=nr.batch(()=>this.#e.findAll(s).map(r=>r.cancel(a)));return Promise.all(n).then(ci).catch(ci)}invalidateQueries(s,t={}){return nr.batch(()=>(this.#e.findAll(s).forEach(a=>{a.invalidate()}),s?.refetchType==="none"?Promise.resolve():this.refetchQueries({...s,type:s?.refetchType??s?.type??"active"},t)))}refetchQueries(s,t={}){const a={...t,cancelRefetch:t.cancelRefetch??!0},n=nr.batch(()=>this.#e.findAll(s).filter(r=>!r.isDisabled()&&!r.isStatic()).map(r=>{let i=r.fetch(void 0,a);return a.throwOnError||(i=i.catch(ci)),r.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(n).then(ci)}fetchQuery(s){const t=this.defaultQueryOptions(s);t.retry===void 0&&(t.retry=!1);const a=this.#e.build(this,t);return a.isStaleByTime(Yd(t.staleTime,a))?a.fetch(t):Promise.resolve(a.state.data)}prefetchQuery(s){return this.fetchQuery(s).then(ci).catch(ci)}fetchInfiniteQuery(s){return s.behavior=t1(s.pages),this.fetchQuery(s)}prefetchInfiniteQuery(s){return this.fetchInfiniteQuery(s).then(ci).catch(ci)}ensureInfiniteQueryData(s){return s.behavior=t1(s.pages),this.ensureQueryData(s)}resumePausedMutations(){return bg.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#s}setDefaultOptions(s){this.#s=s}setQueryDefaults(s,t){this.#n.set(Ou(s),{queryKey:s,defaultOptions:t})}getQueryDefaults(s){const t=[...this.#n.values()],a={};return t.forEach(n=>{nm(s,n.queryKey)&&Object.assign(a,n.defaultOptions)}),a}setMutationDefaults(s,t){this.#a.set(Ou(s),{mutationKey:s,defaultOptions:t})}getMutationDefaults(s){const t=[...this.#a.values()],a={};return t.forEach(n=>{nm(s,n.mutationKey)&&Object.assign(a,n.defaultOptions)}),a}defaultQueryOptions(s){if(s._defaulted)return s;const t={...this.#s.queries,...this.getQueryDefaults(s.queryKey),...s,_defaulted:!0};return t.queryHash||(t.queryHash=Sv(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===Cv&&(t.enabled=!1),t}defaultMutationOptions(s){return s?._defaulted?s:{...this.#s.mutations,...s?.mutationKey&&this.getMutationDefaults(s.mutationKey),...s,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},dS=A.createContext(void 0),Wa=s=>{const t=A.useContext(dS);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},CE=({client:s,children:t})=>(A.useEffect(()=>(s.mount(),()=>{s.unmount()}),[s]),e.jsx(dS.Provider,{value:s,children:t})),uS=A.createContext(!1),AE=()=>A.useContext(uS);uS.Provider;function kE(){let s=!1;return{clearReset:()=>{s=!1},reset:()=>{s=!0},isReset:()=>s}}var DE=A.createContext(kE()),EE=()=>A.useContext(DE),TE=(s,t)=>{(s.suspense||s.throwOnError||s.experimental_prefetchInRender)&&(t.isReset()||(s.retryOnMount=!1))},LE=s=>{A.useEffect(()=>{s.clearReset()},[s])},PE=({result:s,errorResetBoundary:t,throwOnError:a,query:n,suspense:r})=>s.isError&&!t.isReset()&&!s.isFetching&&n&&(r&&s.data===void 0||nS(a,[s.error,n])),FE=s=>{if(s.suspense){const a=r=>r==="static"?r:Math.max(r??1e3,1e3),n=s.staleTime;s.staleTime=typeof n=="function"?(...r)=>a(n(...r)):a(n),typeof s.gcTime=="number"&&(s.gcTime=Math.max(s.gcTime,1e3))}},IE=(s,t)=>s.isLoading&&s.isFetching&&!t,OE=(s,t)=>s?.suspense&&t.isPending,a1=(s,t,a)=>t.fetchOptimistic(s).catch(()=>{a.clearReset()});function ME(s,t,a){const n=AE(),r=EE(),i=Wa(),o=i.defaultQueryOptions(s);i.getDefaultOptions().queries?._experimental_beforeQuery?.(o),o._optimisticResults=n?"isRestoring":"optimistic",FE(o),TE(o,r),LE(r);const c=!i.getQueryCache().get(o.queryHash),[u]=A.useState(()=>new t(i,o)),h=u.getOptimisticResult(o),m=!n&&s.subscribed!==!1;if(A.useSyncExternalStore(A.useCallback(p=>{const y=m?u.subscribe(nr.batchCalls(p)):ci;return u.updateResult(),y},[u,m]),()=>u.getCurrentResult(),()=>u.getCurrentResult()),A.useEffect(()=>{u.setOptions(o)},[o,u]),OE(o,h))throw a1(o,u,r);if(PE({result:h,errorResetBoundary:r,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw h.error;return i.getDefaultOptions().queries?._experimental_afterQuery?.(o,h),o.experimental_prefetchInRender&&!Iu&&IE(h,n)&&(c?a1(o,u,r):i.getQueryCache().get(o.queryHash)?.promise)?.catch(ci).finally(()=>{u.updateResult()}),o.notifyOnChangeProps?h:u.trackResult(h)}function Rt(s,t){return ME(s,xE)}function wt(s,t){const a=Wa(),[n]=A.useState(()=>new wE(a,s));A.useEffect(()=>{n.setOptions(s)},[n,s]);const r=A.useSyncExternalStore(A.useCallback(o=>n.subscribe(nr.batchCalls(o)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),i=A.useCallback((o,c)=>{n.mutate(o,c).catch(ci)},[n]);if(r.error&&nS(n.options.throwOnError,[r.error]))throw r.error;return{...r,mutate:i,mutateAsync:r.mutate}}function hS(s,t){return function(){return s.apply(t,arguments)}}const{toString:RE}=Object.prototype,{getPrototypeOf:Dv}=Object,{iterator:Xg,toStringTag:fS}=Symbol,Gg=(s=>t=>{const a=RE.call(t);return s[a]||(s[a]=a.slice(8,-1).toLowerCase())})(Object.create(null)),wo=s=>(s=s.toLowerCase(),t=>Gg(t)===s),Qg=s=>t=>typeof t===s,{isArray:Kh}=Array,Rh=Qg("undefined");function gm(s){return s!==null&&!Rh(s)&&s.constructor!==null&&!Rh(s.constructor)&&$i(s.constructor.isBuffer)&&s.constructor.isBuffer(s)}const mS=wo("ArrayBuffer");function BE(s){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(s):t=s&&s.buffer&&mS(s.buffer),t}const zE=Qg("string"),$i=Qg("function"),pS=Qg("number"),xm=s=>s!==null&&typeof s=="object",qE=s=>s===!0||s===!1,ag=s=>{if(Gg(s)!=="object")return!1;const t=Dv(s);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(fS in s)&&!(Xg in s)},UE=s=>{if(!xm(s)||gm(s))return!1;try{return Object.keys(s).length===0&&Object.getPrototypeOf(s)===Object.prototype}catch{return!1}},HE=wo("Date"),$E=wo("File"),VE=wo("Blob"),WE=wo("FileList"),YE=s=>xm(s)&&$i(s.pipe),KE=s=>{let t;return s&&(typeof FormData=="function"&&s instanceof FormData||$i(s.append)&&((t=Gg(s))==="formdata"||t==="object"&&$i(s.toString)&&s.toString()==="[object FormData]"))},XE=wo("URLSearchParams"),[GE,QE,JE,ZE]=["ReadableStream","Request","Response","Headers"].map(wo),e4=s=>s.trim?s.trim():s.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function bm(s,t,{allOwnKeys:a=!1}={}){if(s===null||typeof s>"u")return;let n,r;if(typeof s!="object"&&(s=[s]),Kh(s))for(n=0,r=s.length;n<r;n++)t.call(null,s[n],n,s);else{if(gm(s))return;const i=a?Object.getOwnPropertyNames(s):Object.keys(s),o=i.length;let c;for(n=0;n<o;n++)c=i[n],t.call(null,s[c],c,s)}}function gS(s,t){if(gm(s))return null;t=t.toLowerCase();const a=Object.keys(s);let n=a.length,r;for(;n-- >0;)if(r=a[n],t===r.toLowerCase())return r;return null}const Du=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,xS=s=>!Rh(s)&&s!==Du;function My(){const{caseless:s,skipUndefined:t}=xS(this)&&this||{},a={},n=(r,i)=>{const o=s&&gS(a,i)||i;ag(a[o])&&ag(r)?a[o]=My(a[o],r):ag(r)?a[o]=My({},r):Kh(r)?a[o]=r.slice():(!t||!Rh(r))&&(a[o]=r)};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&bm(arguments[r],n);return a}const t4=(s,t,a,{allOwnKeys:n}={})=>(bm(t,(r,i)=>{a&&$i(r)?s[i]=hS(r,a):s[i]=r},{allOwnKeys:n}),s),s4=s=>(s.charCodeAt(0)===65279&&(s=s.slice(1)),s),a4=(s,t,a,n)=>{s.prototype=Object.create(t.prototype,n),s.prototype.constructor=s,Object.defineProperty(s,"super",{value:t.prototype}),a&&Object.assign(s.prototype,a)},n4=(s,t,a,n)=>{let r,i,o;const c={};if(t=t||{},s==null)return t;do{for(r=Object.getOwnPropertyNames(s),i=r.length;i-- >0;)o=r[i],(!n||n(o,s,t))&&!c[o]&&(t[o]=s[o],c[o]=!0);s=a!==!1&&Dv(s)}while(s&&(!a||a(s,t))&&s!==Object.prototype);return t},r4=(s,t,a)=>{s=String(s),(a===void 0||a>s.length)&&(a=s.length),a-=t.length;const n=s.indexOf(t,a);return n!==-1&&n===a},i4=s=>{if(!s)return null;if(Kh(s))return s;let t=s.length;if(!pS(t))return null;const a=new Array(t);for(;t-- >0;)a[t]=s[t];return a},l4=(s=>t=>s&&t instanceof s)(typeof Uint8Array<"u"&&Dv(Uint8Array)),o4=(s,t)=>{const n=(s&&s[Xg]).call(s);let r;for(;(r=n.next())&&!r.done;){const i=r.value;t.call(s,i[0],i[1])}},c4=(s,t)=>{let a;const n=[];for(;(a=s.exec(t))!==null;)n.push(a);return n},d4=wo("HTMLFormElement"),u4=s=>s.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(a,n,r){return n.toUpperCase()+r}),n1=(({hasOwnProperty:s})=>(t,a)=>s.call(t,a))(Object.prototype),h4=wo("RegExp"),bS=(s,t)=>{const a=Object.getOwnPropertyDescriptors(s),n={};bm(a,(r,i)=>{let o;(o=t(r,i,s))!==!1&&(n[i]=o||r)}),Object.defineProperties(s,n)},f4=s=>{bS(s,(t,a)=>{if($i(s)&&["arguments","caller","callee"].indexOf(a)!==-1)return!1;const n=s[a];if($i(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+a+"'")})}})},m4=(s,t)=>{const a={},n=r=>{r.forEach(i=>{a[i]=!0})};return Kh(s)?n(s):n(String(s).split(t)),a},p4=()=>{},g4=(s,t)=>s!=null&&Number.isFinite(s=+s)?s:t;function x4(s){return!!(s&&$i(s.append)&&s[fS]==="FormData"&&s[Xg])}const b4=s=>{const t=new Array(10),a=(n,r)=>{if(xm(n)){if(t.indexOf(n)>=0)return;if(gm(n))return n;if(!("toJSON"in n)){t[r]=n;const i=Kh(n)?[]:{};return bm(n,(o,c)=>{const u=a(o,r+1);!Rh(u)&&(i[c]=u)}),t[r]=void 0,i}}return n};return a(s,0)},y4=wo("AsyncFunction"),v4=s=>s&&(xm(s)||$i(s))&&$i(s.then)&&$i(s.catch),yS=((s,t)=>s?setImmediate:t?((a,n)=>(Du.addEventListener("message",({source:r,data:i})=>{r===Du&&i===a&&n.length&&n.shift()()},!1),r=>{n.push(r),Du.postMessage(a,"*")}))(`axios@${Math.random()}`,[]):a=>setTimeout(a))(typeof setImmediate=="function",$i(Du.postMessage)),j4=typeof queueMicrotask<"u"?queueMicrotask.bind(Du):typeof process<"u"&&process.nextTick||yS,N4=s=>s!=null&&$i(s[Xg]),st={isArray:Kh,isArrayBuffer:mS,isBuffer:gm,isFormData:KE,isArrayBufferView:BE,isString:zE,isNumber:pS,isBoolean:qE,isObject:xm,isPlainObject:ag,isEmptyObject:UE,isReadableStream:GE,isRequest:QE,isResponse:JE,isHeaders:ZE,isUndefined:Rh,isDate:HE,isFile:$E,isBlob:VE,isRegExp:h4,isFunction:$i,isStream:YE,isURLSearchParams:XE,isTypedArray:l4,isFileList:WE,forEach:bm,merge:My,extend:t4,trim:e4,stripBOM:s4,inherits:a4,toFlatObject:n4,kindOf:Gg,kindOfTest:wo,endsWith:r4,toArray:i4,forEachEntry:o4,matchAll:c4,isHTMLForm:d4,hasOwnProperty:n1,hasOwnProp:n1,reduceDescriptors:bS,freezeMethods:f4,toObjectSet:m4,toCamelCase:u4,noop:p4,toFiniteNumber:g4,findKey:gS,global:Du,isContextDefined:xS,isSpecCompliantForm:x4,toJSONObject:b4,isAsyncFn:y4,isThenable:v4,setImmediate:yS,asap:j4,isIterable:N4};function Es(s,t,a,n,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=s,this.name="AxiosError",t&&(this.code=t),a&&(this.config=a),n&&(this.request=n),r&&(this.response=r,this.status=r.status?r.status:null)}st.inherits(Es,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:st.toJSONObject(this.config),code:this.code,status:this.status}}});const vS=Es.prototype,jS={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(s=>{jS[s]={value:s}});Object.defineProperties(Es,jS);Object.defineProperty(vS,"isAxiosError",{value:!0});Es.from=(s,t,a,n,r,i)=>{const o=Object.create(vS);st.toFlatObject(s,o,function(m){return m!==Error.prototype},h=>h!=="isAxiosError");const c=s&&s.message?s.message:"Error",u=t==null&&s?s.code:t;return Es.call(o,c,u,a,n,r),s&&o.cause==null&&Object.defineProperty(o,"cause",{value:s,configurable:!0}),o.name=s&&s.name||"Error",i&&Object.assign(o,i),o};const w4=null;function Ry(s){return st.isPlainObject(s)||st.isArray(s)}function NS(s){return st.endsWith(s,"[]")?s.slice(0,-2):s}function r1(s,t,a){return s?s.concat(t).map(function(r,i){return r=NS(r),!a&&i?"["+r+"]":r}).join(a?".":""):t}function _4(s){return st.isArray(s)&&!s.some(Ry)}const S4=st.toFlatObject(st,{},null,function(t){return/^is[A-Z]/.test(t)});function Jg(s,t,a){if(!st.isObject(s))throw new TypeError("target must be an object");t=t||new FormData,a=st.toFlatObject(a,{metaTokens:!0,dots:!1,indexes:!1},!1,function(b,N){return!st.isUndefined(N[b])});const n=a.metaTokens,r=a.visitor||m,i=a.dots,o=a.indexes,u=(a.Blob||typeof Blob<"u"&&Blob)&&st.isSpecCompliantForm(t);if(!st.isFunction(r))throw new TypeError("visitor must be a function");function h(j){if(j===null)return"";if(st.isDate(j))return j.toISOString();if(st.isBoolean(j))return j.toString();if(!u&&st.isBlob(j))throw new Es("Blob is not supported. Use a Buffer instead.");return st.isArrayBuffer(j)||st.isTypedArray(j)?u&&typeof Blob=="function"?new Blob([j]):Buffer.from(j):j}function m(j,b,N){let v=j;if(j&&!N&&typeof j=="object"){if(st.endsWith(b,"{}"))b=n?b:b.slice(0,-2),j=JSON.stringify(j);else if(st.isArray(j)&&_4(j)||(st.isFileList(j)||st.endsWith(b,"[]"))&&(v=st.toArray(j)))return b=NS(b),v.forEach(function(E,L){!(st.isUndefined(E)||E===null)&&t.append(o===!0?r1([b],L,i):o===null?b:b+"[]",h(E))}),!1}return Ry(j)?!0:(t.append(r1(N,b,i),h(j)),!1)}const p=[],y=Object.assign(S4,{defaultVisitor:m,convertValue:h,isVisitable:Ry});function g(j,b){if(!st.isUndefined(j)){if(p.indexOf(j)!==-1)throw Error("Circular reference detected in "+b.join("."));p.push(j),st.forEach(j,function(v,S){(!(st.isUndefined(v)||v===null)&&r.call(t,v,st.isString(S)?S.trim():S,b,y))===!0&&g(v,b?b.concat(S):[S])}),p.pop()}}if(!st.isObject(s))throw new TypeError("data must be an object");return g(s),t}function i1(s){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(s).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function Ev(s,t){this._pairs=[],s&&Jg(s,this,t)}const wS=Ev.prototype;wS.append=function(t,a){this._pairs.push([t,a])};wS.toString=function(t){const a=t?function(n){return t.call(this,n,i1)}:i1;return this._pairs.map(function(r){return a(r[0])+"="+a(r[1])},"").join("&")};function C4(s){return encodeURIComponent(s).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function _S(s,t,a){if(!t)return s;const n=a&&a.encode||C4;st.isFunction(a)&&(a={serialize:a});const r=a&&a.serialize;let i;if(r?i=r(t,a):i=st.isURLSearchParams(t)?t.toString():new Ev(t,a).toString(n),i){const o=s.indexOf("#");o!==-1&&(s=s.slice(0,o)),s+=(s.indexOf("?")===-1?"?":"&")+i}return s}class l1{constructor(){this.handlers=[]}use(t,a,n){return this.handlers.push({fulfilled:t,rejected:a,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){st.forEach(this.handlers,function(n){n!==null&&t(n)})}}const SS={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},A4=typeof URLSearchParams<"u"?URLSearchParams:Ev,k4=typeof FormData<"u"?FormData:null,D4=typeof Blob<"u"?Blob:null,E4={isBrowser:!0,classes:{URLSearchParams:A4,FormData:k4,Blob:D4},protocols:["http","https","file","blob","url","data"]},Tv=typeof window<"u"&&typeof document<"u",By=typeof navigator=="object"&&navigator||void 0,T4=Tv&&(!By||["ReactNative","NativeScript","NS"].indexOf(By.product)<0),L4=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",P4=Tv&&window.location.href||"http://localhost",F4=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Tv,hasStandardBrowserEnv:T4,hasStandardBrowserWebWorkerEnv:L4,navigator:By,origin:P4},Symbol.toStringTag,{value:"Module"})),Jr={...F4,...E4};function I4(s,t){return Jg(s,new Jr.classes.URLSearchParams,{visitor:function(a,n,r,i){return Jr.isNode&&st.isBuffer(a)?(this.append(n,a.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...t})}function O4(s){return st.matchAll(/\w+|\[(\w*)]/g,s).map(t=>t[0]==="[]"?"":t[1]||t[0])}function M4(s){const t={},a=Object.keys(s);let n;const r=a.length;let i;for(n=0;n<r;n++)i=a[n],t[i]=s[i];return t}function CS(s){function t(a,n,r,i){let o=a[i++];if(o==="__proto__")return!0;const c=Number.isFinite(+o),u=i>=a.length;return o=!o&&st.isArray(r)?r.length:o,u?(st.hasOwnProp(r,o)?r[o]=[r[o],n]:r[o]=n,!c):((!r[o]||!st.isObject(r[o]))&&(r[o]=[]),t(a,n,r[o],i)&&st.isArray(r[o])&&(r[o]=M4(r[o])),!c)}if(st.isFormData(s)&&st.isFunction(s.entries)){const a={};return st.forEachEntry(s,(n,r)=>{t(O4(n),r,a,0)}),a}return null}function R4(s,t,a){if(st.isString(s))try{return(t||JSON.parse)(s),st.trim(s)}catch(n){if(n.name!=="SyntaxError")throw n}return(a||JSON.stringify)(s)}const ym={transitional:SS,adapter:["xhr","http","fetch"],transformRequest:[function(t,a){const n=a.getContentType()||"",r=n.indexOf("application/json")>-1,i=st.isObject(t);if(i&&st.isHTMLForm(t)&&(t=new FormData(t)),st.isFormData(t))return r?JSON.stringify(CS(t)):t;if(st.isArrayBuffer(t)||st.isBuffer(t)||st.isStream(t)||st.isFile(t)||st.isBlob(t)||st.isReadableStream(t))return t;if(st.isArrayBufferView(t))return t.buffer;if(st.isURLSearchParams(t))return a.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let c;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return I4(t,this.formSerializer).toString();if((c=st.isFileList(t))||n.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return Jg(c?{"files[]":t}:t,u&&new u,this.formSerializer)}}return i||r?(a.setContentType("application/json",!1),R4(t)):t}],transformResponse:[function(t){const a=this.transitional||ym.transitional,n=a&&a.forcedJSONParsing,r=this.responseType==="json";if(st.isResponse(t)||st.isReadableStream(t))return t;if(t&&st.isString(t)&&(n&&!this.responseType||r)){const o=!(a&&a.silentJSONParsing)&&r;try{return JSON.parse(t,this.parseReviver)}catch(c){if(o)throw c.name==="SyntaxError"?Es.from(c,Es.ERR_BAD_RESPONSE,this,null,this.response):c}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Jr.classes.FormData,Blob:Jr.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};st.forEach(["delete","get","head","post","put","patch"],s=>{ym.headers[s]={}});const B4=st.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),z4=s=>{const t={};let a,n,r;return s&&s.split(`
`).forEach(function(o){r=o.indexOf(":"),a=o.substring(0,r).trim().toLowerCase(),n=o.substring(r+1).trim(),!(!a||t[a]&&B4[a])&&(a==="set-cookie"?t[a]?t[a].push(n):t[a]=[n]:t[a]=t[a]?t[a]+", "+n:n)}),t},o1=Symbol("internals");function Lf(s){return s&&String(s).trim().toLowerCase()}function ng(s){return s===!1||s==null?s:st.isArray(s)?s.map(ng):String(s)}function q4(s){const t=Object.create(null),a=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=a.exec(s);)t[n[1]]=n[2];return t}const U4=s=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(s.trim());function Tb(s,t,a,n,r){if(st.isFunction(n))return n.call(this,t,a);if(r&&(t=a),!!st.isString(t)){if(st.isString(n))return t.indexOf(n)!==-1;if(st.isRegExp(n))return n.test(t)}}function H4(s){return s.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,a,n)=>a.toUpperCase()+n)}function $4(s,t){const a=st.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(s,n+a,{value:function(r,i,o){return this[n].call(this,t,r,i,o)},configurable:!0})})}let Vi=class{constructor(t){t&&this.set(t)}set(t,a,n){const r=this;function i(c,u,h){const m=Lf(u);if(!m)throw new Error("header name must be a non-empty string");const p=st.findKey(r,m);(!p||r[p]===void 0||h===!0||h===void 0&&r[p]!==!1)&&(r[p||u]=ng(c))}const o=(c,u)=>st.forEach(c,(h,m)=>i(h,m,u));if(st.isPlainObject(t)||t instanceof this.constructor)o(t,a);else if(st.isString(t)&&(t=t.trim())&&!U4(t))o(z4(t),a);else if(st.isObject(t)&&st.isIterable(t)){let c={},u,h;for(const m of t){if(!st.isArray(m))throw TypeError("Object iterator must return a key-value pair");c[h=m[0]]=(u=c[h])?st.isArray(u)?[...u,m[1]]:[u,m[1]]:m[1]}o(c,a)}else t!=null&&i(a,t,n);return this}get(t,a){if(t=Lf(t),t){const n=st.findKey(this,t);if(n){const r=this[n];if(!a)return r;if(a===!0)return q4(r);if(st.isFunction(a))return a.call(this,r,n);if(st.isRegExp(a))return a.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,a){if(t=Lf(t),t){const n=st.findKey(this,t);return!!(n&&this[n]!==void 0&&(!a||Tb(this,this[n],n,a)))}return!1}delete(t,a){const n=this;let r=!1;function i(o){if(o=Lf(o),o){const c=st.findKey(n,o);c&&(!a||Tb(n,n[c],c,a))&&(delete n[c],r=!0)}}return st.isArray(t)?t.forEach(i):i(t),r}clear(t){const a=Object.keys(this);let n=a.length,r=!1;for(;n--;){const i=a[n];(!t||Tb(this,this[i],i,t,!0))&&(delete this[i],r=!0)}return r}normalize(t){const a=this,n={};return st.forEach(this,(r,i)=>{const o=st.findKey(n,i);if(o){a[o]=ng(r),delete a[i];return}const c=t?H4(i):String(i).trim();c!==i&&delete a[i],a[c]=ng(r),n[c]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const a=Object.create(null);return st.forEach(this,(n,r)=>{n!=null&&n!==!1&&(a[r]=t&&st.isArray(n)?n.join(", "):n)}),a}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,a])=>t+": "+a).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...a){const n=new this(t);return a.forEach(r=>n.set(r)),n}static accessor(t){const n=(this[o1]=this[o1]={accessors:{}}).accessors,r=this.prototype;function i(o){const c=Lf(o);n[c]||($4(r,o),n[c]=!0)}return st.isArray(t)?t.forEach(i):i(t),this}};Vi.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);st.reduceDescriptors(Vi.prototype,({value:s},t)=>{let a=t[0].toUpperCase()+t.slice(1);return{get:()=>s,set(n){this[a]=n}}});st.freezeMethods(Vi);function Lb(s,t){const a=this||ym,n=t||a,r=Vi.from(n.headers);let i=n.data;return st.forEach(s,function(c){i=c.call(a,i,r.normalize(),t?t.status:void 0)}),r.normalize(),i}function AS(s){return!!(s&&s.__CANCEL__)}function Xh(s,t,a){Es.call(this,s??"canceled",Es.ERR_CANCELED,t,a),this.name="CanceledError"}st.inherits(Xh,Es,{__CANCEL__:!0});function kS(s,t,a){const n=a.config.validateStatus;!a.status||!n||n(a.status)?s(a):t(new Es("Request failed with status code "+a.status,[Es.ERR_BAD_REQUEST,Es.ERR_BAD_RESPONSE][Math.floor(a.status/100)-4],a.config,a.request,a))}function V4(s){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(s);return t&&t[1]||""}function W4(s,t){s=s||10;const a=new Array(s),n=new Array(s);let r=0,i=0,o;return t=t!==void 0?t:1e3,function(u){const h=Date.now(),m=n[i];o||(o=h),a[r]=u,n[r]=h;let p=i,y=0;for(;p!==r;)y+=a[p++],p=p%s;if(r=(r+1)%s,r===i&&(i=(i+1)%s),h-o<t)return;const g=m&&h-m;return g?Math.round(y*1e3/g):void 0}}function Y4(s,t){let a=0,n=1e3/t,r,i;const o=(h,m=Date.now())=>{a=m,r=null,i&&(clearTimeout(i),i=null),s(...h)};return[(...h)=>{const m=Date.now(),p=m-a;p>=n?o(h,m):(r=h,i||(i=setTimeout(()=>{i=null,o(r)},n-p)))},()=>r&&o(r)]}const yg=(s,t,a=3)=>{let n=0;const r=W4(50,250);return Y4(i=>{const o=i.loaded,c=i.lengthComputable?i.total:void 0,u=o-n,h=r(u),m=o<=c;n=o;const p={loaded:o,total:c,progress:c?o/c:void 0,bytes:u,rate:h||void 0,estimated:h&&c&&m?(c-o)/h:void 0,event:i,lengthComputable:c!=null,[t?"download":"upload"]:!0};s(p)},a)},c1=(s,t)=>{const a=s!=null;return[n=>t[0]({lengthComputable:a,total:s,loaded:n}),t[1]]},d1=s=>(...t)=>st.asap(()=>s(...t)),K4=Jr.hasStandardBrowserEnv?((s,t)=>a=>(a=new URL(a,Jr.origin),s.protocol===a.protocol&&s.host===a.host&&(t||s.port===a.port)))(new URL(Jr.origin),Jr.navigator&&/(msie|trident)/i.test(Jr.navigator.userAgent)):()=>!0,X4=Jr.hasStandardBrowserEnv?{write(s,t,a,n,r,i){const o=[s+"="+encodeURIComponent(t)];st.isNumber(a)&&o.push("expires="+new Date(a).toGMTString()),st.isString(n)&&o.push("path="+n),st.isString(r)&&o.push("domain="+r),i===!0&&o.push("secure"),document.cookie=o.join("; ")},read(s){const t=document.cookie.match(new RegExp("(^|;\\s*)("+s+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(s){this.write(s,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function G4(s){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(s)}function Q4(s,t){return t?s.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):s}function DS(s,t,a){let n=!G4(t);return s&&(n||a==!1)?Q4(s,t):t}const u1=s=>s instanceof Vi?{...s}:s;function Mu(s,t){t=t||{};const a={};function n(h,m,p,y){return st.isPlainObject(h)&&st.isPlainObject(m)?st.merge.call({caseless:y},h,m):st.isPlainObject(m)?st.merge({},m):st.isArray(m)?m.slice():m}function r(h,m,p,y){if(st.isUndefined(m)){if(!st.isUndefined(h))return n(void 0,h,p,y)}else return n(h,m,p,y)}function i(h,m){if(!st.isUndefined(m))return n(void 0,m)}function o(h,m){if(st.isUndefined(m)){if(!st.isUndefined(h))return n(void 0,h)}else return n(void 0,m)}function c(h,m,p){if(p in t)return n(h,m);if(p in s)return n(void 0,h)}const u={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:c,headers:(h,m,p)=>r(u1(h),u1(m),p,!0)};return st.forEach(Object.keys({...s,...t}),function(m){const p=u[m]||r,y=p(s[m],t[m],m);st.isUndefined(y)&&p!==c||(a[m]=y)}),a}const ES=s=>{const t=Mu({},s);let{data:a,withXSRFToken:n,xsrfHeaderName:r,xsrfCookieName:i,headers:o,auth:c}=t;if(t.headers=o=Vi.from(o),t.url=_S(DS(t.baseURL,t.url,t.allowAbsoluteUrls),s.params,s.paramsSerializer),c&&o.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):""))),st.isFormData(a)){if(Jr.hasStandardBrowserEnv||Jr.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(st.isFunction(a.getHeaders)){const u=a.getHeaders(),h=["content-type","content-length"];Object.entries(u).forEach(([m,p])=>{h.includes(m.toLowerCase())&&o.set(m,p)})}}if(Jr.hasStandardBrowserEnv&&(n&&st.isFunction(n)&&(n=n(t)),n||n!==!1&&K4(t.url))){const u=r&&i&&X4.read(i);u&&o.set(r,u)}return t},J4=typeof XMLHttpRequest<"u",Z4=J4&&function(s){return new Promise(function(a,n){const r=ES(s);let i=r.data;const o=Vi.from(r.headers).normalize();let{responseType:c,onUploadProgress:u,onDownloadProgress:h}=r,m,p,y,g,j;function b(){g&&g(),j&&j(),r.cancelToken&&r.cancelToken.unsubscribe(m),r.signal&&r.signal.removeEventListener("abort",m)}let N=new XMLHttpRequest;N.open(r.method.toUpperCase(),r.url,!0),N.timeout=r.timeout;function v(){if(!N)return;const E=Vi.from("getAllResponseHeaders"in N&&N.getAllResponseHeaders()),z={data:!c||c==="text"||c==="json"?N.responseText:N.response,status:N.status,statusText:N.statusText,headers:E,config:s,request:N};kS(function(te){a(te),b()},function(te){n(te),b()},z),N=null}"onloadend"in N?N.onloadend=v:N.onreadystatechange=function(){!N||N.readyState!==4||N.status===0&&!(N.responseURL&&N.responseURL.indexOf("file:")===0)||setTimeout(v)},N.onabort=function(){N&&(n(new Es("Request aborted",Es.ECONNABORTED,s,N)),N=null)},N.onerror=function(L){const z=L&&L.message?L.message:"Network Error",V=new Es(z,Es.ERR_NETWORK,s,N);V.event=L||null,n(V),N=null},N.ontimeout=function(){let L=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const z=r.transitional||SS;r.timeoutErrorMessage&&(L=r.timeoutErrorMessage),n(new Es(L,z.clarifyTimeoutError?Es.ETIMEDOUT:Es.ECONNABORTED,s,N)),N=null},i===void 0&&o.setContentType(null),"setRequestHeader"in N&&st.forEach(o.toJSON(),function(L,z){N.setRequestHeader(z,L)}),st.isUndefined(r.withCredentials)||(N.withCredentials=!!r.withCredentials),c&&c!=="json"&&(N.responseType=r.responseType),h&&([y,j]=yg(h,!0),N.addEventListener("progress",y)),u&&N.upload&&([p,g]=yg(u),N.upload.addEventListener("progress",p),N.upload.addEventListener("loadend",g)),(r.cancelToken||r.signal)&&(m=E=>{N&&(n(!E||E.type?new Xh(null,s,N):E),N.abort(),N=null)},r.cancelToken&&r.cancelToken.subscribe(m),r.signal&&(r.signal.aborted?m():r.signal.addEventListener("abort",m)));const S=V4(r.url);if(S&&Jr.protocols.indexOf(S)===-1){n(new Es("Unsupported protocol "+S+":",Es.ERR_BAD_REQUEST,s));return}N.send(i||null)})},eT=(s,t)=>{const{length:a}=s=s?s.filter(Boolean):[];if(t||a){let n=new AbortController,r;const i=function(h){if(!r){r=!0,c();const m=h instanceof Error?h:this.reason;n.abort(m instanceof Es?m:new Xh(m instanceof Error?m.message:m))}};let o=t&&setTimeout(()=>{o=null,i(new Es(`timeout ${t} of ms exceeded`,Es.ETIMEDOUT))},t);const c=()=>{s&&(o&&clearTimeout(o),o=null,s.forEach(h=>{h.unsubscribe?h.unsubscribe(i):h.removeEventListener("abort",i)}),s=null)};s.forEach(h=>h.addEventListener("abort",i));const{signal:u}=n;return u.unsubscribe=()=>st.asap(c),u}},tT=function*(s,t){let a=s.byteLength;if(a<t){yield s;return}let n=0,r;for(;n<a;)r=n+t,yield s.slice(n,r),n=r},sT=async function*(s,t){for await(const a of aT(s))yield*tT(a,t)},aT=async function*(s){if(s[Symbol.asyncIterator]){yield*s;return}const t=s.getReader();try{for(;;){const{done:a,value:n}=await t.read();if(a)break;yield n}}finally{await t.cancel()}},h1=(s,t,a,n)=>{const r=sT(s,t);let i=0,o,c=u=>{o||(o=!0,n&&n(u))};return new ReadableStream({async pull(u){try{const{done:h,value:m}=await r.next();if(h){c(),u.close();return}let p=m.byteLength;if(a){let y=i+=p;a(y)}u.enqueue(new Uint8Array(m))}catch(h){throw c(h),h}},cancel(u){return c(u),r.return()}},{highWaterMark:2})},f1=64*1024,{isFunction:vp}=st,nT=(({Request:s,Response:t})=>({Request:s,Response:t}))(st.global),{ReadableStream:m1,TextEncoder:p1}=st.global,g1=(s,...t)=>{try{return!!s(...t)}catch{return!1}},rT=s=>{s=st.merge.call({skipUndefined:!0},nT,s);const{fetch:t,Request:a,Response:n}=s,r=t?vp(t):typeof fetch=="function",i=vp(a),o=vp(n);if(!r)return!1;const c=r&&vp(m1),u=r&&(typeof p1=="function"?(j=>b=>j.encode(b))(new p1):async j=>new Uint8Array(await new a(j).arrayBuffer())),h=i&&c&&g1(()=>{let j=!1;const b=new a(Jr.origin,{body:new m1,method:"POST",get duplex(){return j=!0,"half"}}).headers.has("Content-Type");return j&&!b}),m=o&&c&&g1(()=>st.isReadableStream(new n("").body)),p={stream:m&&(j=>j.body)};r&&["text","arrayBuffer","blob","formData","stream"].forEach(j=>{!p[j]&&(p[j]=(b,N)=>{let v=b&&b[j];if(v)return v.call(b);throw new Es(`Response type '${j}' is not supported`,Es.ERR_NOT_SUPPORT,N)})});const y=async j=>{if(j==null)return 0;if(st.isBlob(j))return j.size;if(st.isSpecCompliantForm(j))return(await new a(Jr.origin,{method:"POST",body:j}).arrayBuffer()).byteLength;if(st.isArrayBufferView(j)||st.isArrayBuffer(j))return j.byteLength;if(st.isURLSearchParams(j)&&(j=j+""),st.isString(j))return(await u(j)).byteLength},g=async(j,b)=>{const N=st.toFiniteNumber(j.getContentLength());return N??y(b)};return async j=>{let{url:b,method:N,data:v,signal:S,cancelToken:E,timeout:L,onDownloadProgress:z,onUploadProgress:V,responseType:te,headers:q,withCredentials:B="same-origin",fetchOptions:J}=ES(j),P=t||fetch;te=te?(te+"").toLowerCase():"text";let K=eT([S,E&&E.toAbortSignal()],L),H=null;const se=K&&K.unsubscribe&&(()=>{K.unsubscribe()});let X;try{if(V&&h&&N!=="get"&&N!=="head"&&(X=await g(q,v))!==0){let D=new a(b,{method:"POST",body:v,duplex:"half"}),U;if(st.isFormData(v)&&(U=D.headers.get("content-type"))&&q.setContentType(U),D.body){const[le,de]=c1(X,yg(d1(V)));v=h1(D.body,f1,le,de)}}st.isString(B)||(B=B?"include":"omit");const R=i&&"credentials"in a.prototype,Q={...J,signal:K,method:N.toUpperCase(),headers:q.normalize().toJSON(),body:v,duplex:"half",credentials:R?B:void 0};H=i&&new a(b,Q);let Y=await(i?P(H,J):P(b,Q));const $=m&&(te==="stream"||te==="response");if(m&&(z||$&&se)){const D={};["status","statusText","headers"].forEach(G=>{D[G]=Y[G]});const U=st.toFiniteNumber(Y.headers.get("content-length")),[le,de]=z&&c1(U,yg(d1(z),!0))||[];Y=new n(h1(Y.body,f1,le,()=>{de&&de(),se&&se()}),D)}te=te||"text";let me=await p[st.findKey(p,te)||"text"](Y,j);return!$&&se&&se(),await new Promise((D,U)=>{kS(D,U,{data:me,headers:Vi.from(Y.headers),status:Y.status,statusText:Y.statusText,config:j,request:H})})}catch(R){throw se&&se(),R&&R.name==="TypeError"&&/Load failed|fetch/i.test(R.message)?Object.assign(new Es("Network Error",Es.ERR_NETWORK,j,H),{cause:R.cause||R}):Es.from(R,R&&R.code,j,H)}}},iT=new Map,TS=s=>{let t=s?s.env:{};const{fetch:a,Request:n,Response:r}=t,i=[n,r,a];let o=i.length,c=o,u,h,m=iT;for(;c--;)u=i[c],h=m.get(u),h===void 0&&m.set(u,h=c?new Map:rT(t)),m=h;return h};TS();const zy={http:w4,xhr:Z4,fetch:{get:TS}};st.forEach(zy,(s,t)=>{if(s){try{Object.defineProperty(s,"name",{value:t})}catch{}Object.defineProperty(s,"adapterName",{value:t})}});const x1=s=>`- ${s}`,lT=s=>st.isFunction(s)||s===null||s===!1,LS={getAdapter:(s,t)=>{s=st.isArray(s)?s:[s];const{length:a}=s;let n,r;const i={};for(let o=0;o<a;o++){n=s[o];let c;if(r=n,!lT(n)&&(r=zy[(c=String(n)).toLowerCase()],r===void 0))throw new Es(`Unknown adapter '${c}'`);if(r&&(st.isFunction(r)||(r=r.get(t))))break;i[c||"#"+o]=r}if(!r){const o=Object.entries(i).map(([u,h])=>`adapter ${u} `+(h===!1?"is not supported by the environment":"is not available in the build"));let c=a?o.length>1?`since :
`+o.map(x1).join(`
`):" "+x1(o[0]):"as no adapter specified";throw new Es("There is no suitable adapter to dispatch the request "+c,"ERR_NOT_SUPPORT")}return r},adapters:zy};function Pb(s){if(s.cancelToken&&s.cancelToken.throwIfRequested(),s.signal&&s.signal.aborted)throw new Xh(null,s)}function b1(s){return Pb(s),s.headers=Vi.from(s.headers),s.data=Lb.call(s,s.transformRequest),["post","put","patch"].indexOf(s.method)!==-1&&s.headers.setContentType("application/x-www-form-urlencoded",!1),LS.getAdapter(s.adapter||ym.adapter,s)(s).then(function(n){return Pb(s),n.data=Lb.call(s,s.transformResponse,n),n.headers=Vi.from(n.headers),n},function(n){return AS(n)||(Pb(s),n&&n.response&&(n.response.data=Lb.call(s,s.transformResponse,n.response),n.response.headers=Vi.from(n.response.headers))),Promise.reject(n)})}const PS="1.12.2",Zg={};["object","boolean","number","function","string","symbol"].forEach((s,t)=>{Zg[s]=function(n){return typeof n===s||"a"+(t<1?"n ":" ")+s}});const y1={};Zg.transitional=function(t,a,n){function r(i,o){return"[Axios v"+PS+"] Transitional option '"+i+"'"+o+(n?". "+n:"")}return(i,o,c)=>{if(t===!1)throw new Es(r(o," has been removed"+(a?" in "+a:"")),Es.ERR_DEPRECATED);return a&&!y1[o]&&(y1[o]=!0,console.warn(r(o," has been deprecated since v"+a+" and will be removed in the near future"))),t?t(i,o,c):!0}};Zg.spelling=function(t){return(a,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};function oT(s,t,a){if(typeof s!="object")throw new Es("options must be an object",Es.ERR_BAD_OPTION_VALUE);const n=Object.keys(s);let r=n.length;for(;r-- >0;){const i=n[r],o=t[i];if(o){const c=s[i],u=c===void 0||o(c,i,s);if(u!==!0)throw new Es("option "+i+" must be "+u,Es.ERR_BAD_OPTION_VALUE);continue}if(a!==!0)throw new Es("Unknown option "+i,Es.ERR_BAD_OPTION)}}const rg={assertOptions:oT,validators:Zg},Ko=rg.validators;let Eu=class{constructor(t){this.defaults=t||{},this.interceptors={request:new l1,response:new l1}}async request(t,a){try{return await this._request(t,a)}catch(n){if(n instanceof Error){let r={};Error.captureStackTrace?Error.captureStackTrace(r):r=new Error;const i=r.stack?r.stack.replace(/^.+\n/,""):"";try{n.stack?i&&!String(n.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+i):n.stack=i}catch{}}throw n}}_request(t,a){typeof t=="string"?(a=a||{},a.url=t):a=t||{},a=Mu(this.defaults,a);const{transitional:n,paramsSerializer:r,headers:i}=a;n!==void 0&&rg.assertOptions(n,{silentJSONParsing:Ko.transitional(Ko.boolean),forcedJSONParsing:Ko.transitional(Ko.boolean),clarifyTimeoutError:Ko.transitional(Ko.boolean)},!1),r!=null&&(st.isFunction(r)?a.paramsSerializer={serialize:r}:rg.assertOptions(r,{encode:Ko.function,serialize:Ko.function},!0)),a.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?a.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:a.allowAbsoluteUrls=!0),rg.assertOptions(a,{baseUrl:Ko.spelling("baseURL"),withXsrfToken:Ko.spelling("withXSRFToken")},!0),a.method=(a.method||this.defaults.method||"get").toLowerCase();let o=i&&st.merge(i.common,i[a.method]);i&&st.forEach(["delete","get","head","post","put","patch","common"],j=>{delete i[j]}),a.headers=Vi.concat(o,i);const c=[];let u=!0;this.interceptors.request.forEach(function(b){typeof b.runWhen=="function"&&b.runWhen(a)===!1||(u=u&&b.synchronous,c.unshift(b.fulfilled,b.rejected))});const h=[];this.interceptors.response.forEach(function(b){h.push(b.fulfilled,b.rejected)});let m,p=0,y;if(!u){const j=[b1.bind(this),void 0];for(j.unshift(...c),j.push(...h),y=j.length,m=Promise.resolve(a);p<y;)m=m.then(j[p++],j[p++]);return m}y=c.length;let g=a;for(;p<y;){const j=c[p++],b=c[p++];try{g=j(g)}catch(N){b.call(this,N);break}}try{m=b1.call(this,g)}catch(j){return Promise.reject(j)}for(p=0,y=h.length;p<y;)m=m.then(h[p++],h[p++]);return m}getUri(t){t=Mu(this.defaults,t);const a=DS(t.baseURL,t.url,t.allowAbsoluteUrls);return _S(a,t.params,t.paramsSerializer)}};st.forEach(["delete","get","head","options"],function(t){Eu.prototype[t]=function(a,n){return this.request(Mu(n||{},{method:t,url:a,data:(n||{}).data}))}});st.forEach(["post","put","patch"],function(t){function a(n){return function(i,o,c){return this.request(Mu(c||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}Eu.prototype[t]=a(),Eu.prototype[t+"Form"]=a(!0)});let cT=class FS{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let a;this.promise=new Promise(function(i){a=i});const n=this;this.promise.then(r=>{if(!n._listeners)return;let i=n._listeners.length;for(;i-- >0;)n._listeners[i](r);n._listeners=null}),this.promise.then=r=>{let i;const o=new Promise(c=>{n.subscribe(c),i=c}).then(r);return o.cancel=function(){n.unsubscribe(i)},o},t(function(i,o,c){n.reason||(n.reason=new Xh(i,o,c),a(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const a=this._listeners.indexOf(t);a!==-1&&this._listeners.splice(a,1)}toAbortSignal(){const t=new AbortController,a=n=>{t.abort(n)};return this.subscribe(a),t.signal.unsubscribe=()=>this.unsubscribe(a),t.signal}static source(){let t;return{token:new FS(function(r){t=r}),cancel:t}}};function dT(s){return function(a){return s.apply(null,a)}}function uT(s){return st.isObject(s)&&s.isAxiosError===!0}const qy={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(qy).forEach(([s,t])=>{qy[t]=s});function IS(s){const t=new Eu(s),a=hS(Eu.prototype.request,t);return st.extend(a,Eu.prototype,t,{allOwnKeys:!0}),st.extend(a,t,null,{allOwnKeys:!0}),a.create=function(r){return IS(Mu(s,r))},a}const gs=IS(ym);gs.Axios=Eu;gs.CanceledError=Xh;gs.CancelToken=cT;gs.isCancel=AS;gs.VERSION=PS;gs.toFormData=Jg;gs.AxiosError=Es;gs.Cancel=gs.CanceledError;gs.all=function(t){return Promise.all(t)};gs.spread=dT;gs.isAxiosError=uT;gs.mergeConfig=Mu;gs.AxiosHeaders=Vi;gs.formToJSON=s=>CS(st.isHTMLForm(s)?new FormData(s):s);gs.getAdapter=LS.getAdapter;gs.HttpStatusCode=qy;gs.default=gs;const{Axios:v9,AxiosError:j9,CanceledError:N9,isCancel:w9,CancelToken:_9,VERSION:S9,all:C9,Cancel:A9,isAxiosError:k9,spread:D9,toFormData:E9,AxiosHeaders:T9,HttpStatusCode:L9,formToJSON:P9,getAdapter:F9,mergeConfig:I9}=gs,Ct={apiBaseUrl:"https://app.sntrips.com/api",baseUrl:"https://app.sntrips.com",appName:"Selab Nadiry",appVersion:"2.0.0",tokenKey:"snt_auth_token",userKey:"snt_user_data"},ar={get:s=>{try{const t=localStorage.getItem(s);return t?JSON.parse(t):null}catch(t){return console.error(`Error getting item ${s} from localStorage:`,t),null}},set:(s,t)=>{try{localStorage.setItem(s,JSON.stringify(t))}catch(a){console.error(`Error setting item ${s} in localStorage:`,a)}},remove:s=>{try{localStorage.removeItem(s)}catch(t){console.error(`Error removing item ${s} from localStorage:`,t)}},clear:()=>{try{localStorage.clear()}catch(s){console.error("Error clearing localStorage:",s)}}},Ne=gs.create({baseURL:Ct.apiBaseUrl,timeout:3e4,withCredentials:!0,headers:{"Content-Type":"application/json"}});Ne.interceptors.request.use(s=>{const t=ar.get(Ct.tokenKey);return t&&s.headers&&(s.headers.Authorization=`Bearer ${t}`),s},s=>Promise.reject(s));Ne.interceptors.response.use(s=>s,s=>{if(s.response){const t=s.response.data?.status==="success";if(t)return console.log("API returned success with non-2xx status:",s.response.status),Promise.resolve(s.response);switch(s.response.status){case 401:s.config?.url?.includes("/auth/verify.php")||s.config?.url?.includes("/auth/me.php")||(ar.remove(Ct.tokenKey),ar.remove(Ct.userKey),window.location.pathname.includes("/login")||(window.location.href="/login"));break;case 403:console.error("Access forbidden");break;case 404:console.error("Resource not found");break;case 500:console.error("Server error");break;default:t||console.error("An error occurred:",s.response.data)}}else s.request?console.error("Network error - no response received"):console.error("Error:",s.message);return Promise.reject(s)});class hT{async get(t,a){return(await Ne.get(t,a)).data}async post(t,a,n){return(await Ne.post(t,a,n)).data}async put(t,a,n){return(await Ne.put(t,a,n)).data}async patch(t,a,n){return(await Ne.patch(t,a,n)).data}async delete(t,a){return(await Ne.delete(t,a)).data}}const pu=new hT;class fT{async login(t){try{if(t.password&&t.password.length===6&&/^\d+$/.test(t.password)){const a=await pu.post("/auth/verify-otp.php",{email:t.username,otp:t.password});return a.success&&a.token&&a.user&&(ar.set(Ct.tokenKey,a.token),ar.set(Ct.userKey,a.user)),a}else{const a=await pu.post("/auth/login.php",t);return a.success&&a.token&&a.user&&(ar.set(Ct.tokenKey,a.token),ar.set(Ct.userKey,a.user)),a}}catch(a){return{success:!1,message:a.response?.data?.message||"Login failed"}}}async sendOTP(t){try{return await pu.post("/auth/send-otp.php",{email:t})}catch(a){return{success:!1,message:a.response?.data?.message||"Failed to send OTP"}}}async verifyOTP(t,a){try{const n=await pu.post("/auth/verify-otp.php",{email:t,otp:a});return n.success&&n.token&&n.user&&(ar.set(Ct.tokenKey,n.token),ar.set(Ct.userKey,n.user)),n}catch(n){return{success:!1,message:n.response?.data?.message||"OTP verification failed"}}}async logout(){try{await pu.post("/auth/logout.php")}catch(t){console.error("Logout error:",t)}finally{ar.remove(Ct.tokenKey),ar.remove(Ct.userKey)}}async getCurrentUser(){try{const t=ar.get(Ct.userKey);if(!t)return null;const a=await pu.get("/auth/me.php");return a.success&&a.user?(ar.set(Ct.userKey,a.user),a.user):t}catch(t){return console.error("Get current user error:",t),this.clearAuth(),null}}async verifyToken(){try{return ar.get(Ct.tokenKey)?(await pu.get("/auth/verify.php")).success:!1}catch{return!1}}getToken(){return ar.get(Ct.tokenKey)}getStoredUser(){return ar.get(Ct.userKey)}clearAuth(){ar.remove(Ct.tokenKey),ar.remove(Ct.userKey)}isAuthenticated(){return!!this.getToken()}}const Cu=new fT,OS=A.createContext(void 0),mT=({children:s})=>{const[t,a]=A.useState({user:null,token:null,isAuthenticated:!1,isLoading:!0});A.useEffect(()=>{(async()=>{try{const c=Cu.getToken(),u=Cu.getStoredUser();a(c&&u?{user:u,token:c,isAuthenticated:!0,isLoading:!1}:{user:null,token:null,isAuthenticated:!1,isLoading:!1})}catch(c){console.error("Auth initialization error:",c),a({user:null,token:null,isAuthenticated:!1,isLoading:!1})}})()},[]);const n=async o=>{try{const c=await Cu.login(o);return c.success&&c.token&&c.user&&a({user:c.user,token:c.token,isAuthenticated:!0,isLoading:!1}),{success:c.success,message:c.message||(c.success?"Login successful":"Login failed")}}catch{return{success:!1,message:"An error occurred during login"}}},r=async()=>{await Cu.logout(),a({user:null,token:null,isAuthenticated:!1,isLoading:!1})},i=async()=>{try{const o=await Cu.getCurrentUser();o&&a(c=>({...c,user:o}))}catch(o){console.error("Error refreshing user:",o)}};return e.jsx(OS.Provider,{value:{...t,login:n,logout:r,refreshUser:i},children:s})},Gh=()=>{const s=A.useContext(OS);if(s===void 0)throw new Error("useAuth must be used within an AuthProvider");return s},MS={appHeaderNone:!1,appHeaderInverse:!0,appHeaderMegaMenu:!1,appHeaderLanguageBar:!1,hasScroll:!1,appSidebarNone:!1,appSidebarWide:!1,appSidebarLight:!1,appSidebarMinify:!1,appSidebarMobileToggled:!1,appSidebarTransparent:!1,appSidebarSearch:!1,appSidebarFloatSubMenuActive:!1,appSidebarFloatSubMenu:"",appSidebarFloatSubMenuTop:"auto",appSidebarFloatSubMenuLeft:"auto",appSidebarFloatSubMenuBottom:"auto",appSidebarFloatSubMenuLineTop:"auto",appSidebarFloatSubMenuLineBottom:"auto",appSidebarFloatSubMenuArrowTop:"auto",appSidebarFloatSubMenuArrowBottom:"auto",appSidebarFloatSubMenuOffset:"",appContentNone:!1,appContentClass:"",appContentFullHeight:!1,appTopMenu:!1,appTopMenuMobileToggled:!1,appSidebarTwo:!1,appSidebarEnd:!1,appSidebarEndToggled:!1,appSidebarEndMobileToggled:!1,toggleAppSidebarMinify:()=>{},toggleAppSidebarMobile:()=>{},toggleAppSidebarEnd:()=>{},toggleAppSidebarEndMobile:()=>{},toggleAppTopMenuMobile:()=>{},handleSetAppHeaderNone:()=>{},handleSetAppHeaderInverse:()=>{},handleSetAppHeaderMegaMenu:()=>{},handleSetAppHeaderLanguageBar:()=>{},handleSetAppSidebarNone:()=>{},handleSetAppSidebarWide:()=>{},handleSetAppSidebarLight:()=>{},handleSetAppSidebarMinified:()=>{},handleSetAppSidebarTransparent:()=>{},handleSetAppSidebarSearch:()=>{},handleAppSidebarOnMouseOut:()=>{},handleAppSidebarOnMouseOver:()=>{},handleAppSidebarFloatSubMenuOnMouseOver:()=>{},handleAppSidebarFloatSubMenuOnMouseOut:()=>{},handleAppSidebarFloatSubMenuClick:()=>{},handleSetAppContentNone:()=>{},handleSetAppContentClass:()=>{},handleSetAppContentFullHeight:()=>{},handleSetAppTopMenu:()=>{},handleSetAppSidebarTwo:()=>{},handleSetAppSidebarEnd:()=>{},handleSetAppBoxedLayout:()=>{}},RS=A.createContext(MS),pT=({children:s})=>{const[t,a]=A.useState(MS),u={toggleAppSidebarMinify:h=>{h.preventDefault(),a(m=>({...m,appSidebarMinify:!m.appSidebarMinify}))},toggleAppSidebarMobile:h=>{h.preventDefault(),a(m=>({...m,appSidebarMobileToggled:!m.appSidebarMobileToggled}))},toggleAppSidebarEnd:h=>{h.preventDefault(),a(m=>({...m,appSidebarEndToggled:!m.appSidebarEndToggled}))},toggleAppSidebarEndMobile:h=>{h.preventDefault(),a(m=>({...m,appSidebarEndMobileToggled:!m.appSidebarEndMobileToggled}))},toggleAppTopMenuMobile:h=>{h.preventDefault(),a(m=>({...m,appTopMenuMobileToggled:!m.appTopMenuMobileToggled}))},handleSetAppHeaderNone:h=>a(m=>({...m,appHeaderNone:h})),handleSetAppHeaderInverse:h=>a(m=>({...m,appHeaderInverse:h})),handleSetAppHeaderMegaMenu:h=>a(m=>({...m,appHeaderMegaMenu:h})),handleSetAppHeaderLanguageBar:h=>a(m=>({...m,appHeaderLanguageBar:h})),handleSetAppSidebarNone:h=>a(m=>({...m,appSidebarNone:h})),handleSetAppSidebarWide:h=>a(m=>({...m,appSidebarWide:h})),handleSetAppSidebarLight:h=>a(m=>({...m,appSidebarLight:h})),handleSetAppSidebarMinified:h=>a(m=>({...m,appSidebarMinify:h})),handleSetAppSidebarTransparent:h=>a(m=>({...m,appSidebarTransparent:h})),handleSetAppSidebarSearch:h=>a(m=>({...m,appSidebarSearch:h})),handleAppSidebarOnMouseOut:()=>{},handleAppSidebarOnMouseOver:()=>{},handleAppSidebarFloatSubMenuOnMouseOver:()=>{},handleAppSidebarFloatSubMenuOnMouseOut:()=>{},handleAppSidebarFloatSubMenuClick:()=>{},handleSetAppContentNone:h=>a(m=>({...m,appContentNone:h})),handleSetAppContentClass:h=>a(m=>({...m,appContentClass:h})),handleSetAppContentFullHeight:h=>a(m=>({...m,appContentFullHeight:h})),handleSetAppTopMenu:h=>a(m=>({...m,appTopMenu:h})),handleSetAppSidebarTwo:h=>{a(m=>({...m,appSidebarTwo:h,appSidebarEndToggled:h}))},handleSetAppSidebarEnd:h=>a(m=>({...m,appSidebarEnd:h})),handleSetAppBoxedLayout:h=>{h?document.body.classList.add("boxed-layout"):document.body.classList.remove("boxed-layout")}};return e.jsx(RS.Provider,{value:{...t,...u},children:s})},Lv=()=>A.useContext(RS),gT=new SE({defaultOptions:{queries:{retry:1,refetchOnWindowFocus:!1,staleTime:300*1e3}}});function xT(){const{user:s,logout:t}=Gh(),{toggleAppSidebarMobile:a,appHeaderInverse:n,appSidebarNone:r}=Lv(),[i,o]=A.useState(""),[c,u]=A.useState("");A.useEffect(()=>{const p=()=>{const g=new Date,j=String(g.getHours()).padStart(2,"0"),b=String(g.getMinutes()).padStart(2,"0"),N=String(g.getSeconds()).padStart(2,"0");o(`${j}:${b}:${N}`)};p();const y=setInterval(p,1e3);return()=>clearInterval(y)},[]);const h=()=>{window.confirm("Are you sure you want to logout?")&&t()},m=p=>{p.preventDefault(),console.log("Search:",c)};return e.jsxs("div",{id:"header",className:"app-header "+(n?"app-header-inverse":""),children:[e.jsxs("div",{className:"navbar-header",children:[e.jsx("img",{src:"/assets/logo-white.png",className:"app-header-logo ms-2",alt:"Logo"}),!r&&e.jsxs("button",{type:"button",className:"navbar-mobile-toggler",onClick:a,children:[e.jsx("span",{className:"icon-bar"}),e.jsx("span",{className:"icon-bar"}),e.jsx("span",{className:"icon-bar"})]})]}),e.jsxs("div",{className:"navbar-nav",children:[e.jsx("div",{className:"navbar-item",children:e.jsx("div",{style:{fontFamily:"Arial, sans-serif",fontSize:"14px",color:"#fff",background:"rgba(0, 0, 0, 0.3)",padding:"4px 12px",borderRadius:"20px",boxShadow:"0 2px 5px rgba(0, 0, 0, 0.2)",position:"relative",zIndex:1},children:e.jsx("span",{id:"digital-clock",children:i})})}),e.jsx("div",{className:"navbar-item d-none d-md-block",children:e.jsxs("div",{style:{fontFamily:"Arial, sans-serif",fontSize:"12px",color:"#fff",padding:"4px 12px",position:"relative",zIndex:1},children:[e.jsx("span",{className:"badge bg-secondary me-1",style:{fontSize:"10px"},children:"Absent"}),e.jsxs("span",{style:{fontSize:"11px"},children:["Check-in: ",e.jsx("strong",{children:"--:--"})]}),e.jsx("span",{className:"mx-1",children:"|"}),e.jsxs("span",{style:{fontSize:"11px"},children:["Check-out: ",e.jsx("strong",{children:"--:--"})]}),e.jsx("span",{className:"mx-1",children:"|"}),e.jsxs("span",{style:{fontSize:"11px"},children:["Break: ",e.jsx("strong",{children:"--"})]}),e.jsx("small",{className:"ms-1 text-muted",style:{fontSize:"10px"},children:"(Dubai Time)"})]})}),e.jsx("div",{className:"navbar-item navbar-form",children:e.jsx("form",{onSubmit:m,children:e.jsxs("div",{className:"form-group",children:[e.jsx("input",{type:"text",className:"form-control",placeholder:"Enter keyword",value:c,onChange:p=>u(p.target.value)}),e.jsx("button",{type:"submit",className:"btn btn-search",children:e.jsx("i",{className:"fa fa-search"})})]})})}),e.jsx("div",{className:"navbar-item",children:e.jsx(dl,{to:"/chatroom",className:"navbar-link",title:"Chatroom",children:e.jsx("i",{className:"fa fa-comments"})})}),e.jsx("div",{className:"navbar-item",children:e.jsx(dl,{to:"/attachments",className:"navbar-link",title:"File Attachments",children:e.jsx("i",{className:"fa fa-paperclip"})})}),e.jsx("div",{className:"navbar-item",children:e.jsx(dl,{to:"/notes",className:"navbar-link",title:"Notes",children:e.jsx("i",{className:"fa fa-sticky-note"})})}),e.jsxs("div",{className:"navbar-item dropdown",children:[e.jsxs("a",{href:"#","data-bs-toggle":"dropdown",className:"navbar-link dropdown-toggle icon",style:{position:"relative",zIndex:10},children:[e.jsx("i",{className:"fa fa-bell"}),e.jsx("span",{className:"badge",children:"5"})]}),e.jsxs("div",{className:"dropdown-menu media-list dropdown-menu-end",children:[e.jsx("div",{className:"dropdown-header",children:"NOTIFICATIONS (5)"}),e.jsxs("a",{href:"#",className:"dropdown-item media",children:[e.jsx("div",{className:"media-left",children:e.jsx("i",{className:"fa fa-plus media-object bg-gray-500"})}),e.jsxs("div",{className:"media-body",children:[e.jsx("h6",{className:"media-heading",children:"New User Registered"}),e.jsx("div",{className:"text-muted fs-10px",children:"1 hour ago"})]})]}),e.jsxs("a",{href:"#",className:"dropdown-item media",children:[e.jsx("div",{className:"media-left",children:e.jsx("i",{className:"fa fa-envelope media-object bg-gray-500"})}),e.jsxs("div",{className:"media-body",children:[e.jsx("h6",{className:"media-heading",children:"New Email"}),e.jsx("div",{className:"text-muted fs-10px",children:"2 hour ago"})]})]}),e.jsx("div",{className:"dropdown-footer text-center",children:e.jsx(dl,{to:"/notifications",className:"text-decoration-none",children:"View more"})})]})]}),e.jsxs("div",{className:"navbar-item navbar-user dropdown",children:[e.jsxs("a",{href:"#",className:"navbar-link dropdown-toggle d-flex align-items-center","data-bs-toggle":"dropdown",style:{position:"relative",zIndex:10},children:[s?.staff_pic?e.jsx("img",{src:s.staff_pic.startsWith("http")?s.staff_pic:`${Ct.baseUrl}/${s.staff_pic}`,alt:s?.staff_name||"User",style:{width:"28px",height:"28px",objectFit:"cover",marginRight:"8px",borderRadius:"50%"},onError:p=>{p.currentTarget.style.display="none"}}):e.jsx("div",{className:"image image-icon bg-gray-800 text-gray-600",children:e.jsx("i",{className:"fa fa-user"})}),e.jsxs("span",{children:[e.jsx("span",{className:"d-none d-md-inline",children:s?.staff_name||"User"}),e.jsx("b",{className:"caret"})]})]}),e.jsxs("div",{className:"dropdown-menu dropdown-menu-end me-1",children:[e.jsx("div",{className:"dropdown-header",children:e.jsxs("div",{className:"d-flex align-items-center",children:[s?.staff_pic?e.jsx("img",{src:s.staff_pic.startsWith("http")?s.staff_pic:`${Ct.baseUrl}/${s.staff_pic}`,alt:s?.staff_name||"User",style:{width:"40px",height:"40px",objectFit:"cover",borderRadius:"50%"},onError:p=>{p.currentTarget.style.display="none"}}):e.jsx("div",{className:"image image-icon bg-gray-800 text-gray-600",children:e.jsx("i",{className:"fa fa-user"})}),e.jsxs("div",{className:"ms-2",children:[e.jsx("div",{className:"fw-bold",children:s?.staff_name||"User"}),e.jsx("div",{className:"text-gray-600 small",children:s?.staff_email})]})]})}),e.jsx("div",{className:"dropdown-divider"}),e.jsxs(dl,{to:"/profile",className:"dropdown-item",children:[e.jsx("i",{className:"fa fa-user fa-fw me-2"})," Profile"]}),e.jsxs(dl,{to:"/days-calculator",className:"dropdown-item",children:[e.jsx("i",{className:"fa fa-calculator fa-fw me-2"})," Days Calculator"]}),e.jsxs(dl,{to:"/change-password",className:"dropdown-item",children:[e.jsx("i",{className:"fa fa-key fa-fw me-2"})," Change Password"]}),e.jsx("div",{className:"dropdown-divider"}),e.jsxs("button",{onClick:h,className:"dropdown-item",children:[e.jsx("i",{className:"fa fa-sign-out-alt fa-fw me-2"})," Log Out"]})]})]})]})]})}var jp={exports:{}},Np={exports:{}},Fb={exports:{}},Ib,v1;function bT(){if(v1)return Ib;v1=1;var s="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Ib=s,Ib}var Ob,j1;function yT(){if(j1)return Ob;j1=1;var s=bT();function t(){}function a(){}return a.resetWarningCache=t,Ob=function(){function n(o,c,u,h,m,p){if(p!==s){var y=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw y.name="Invariant Violation",y}}n.isRequired=n;function r(){return n}var i={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:r,element:n,elementType:n,instanceOf:r,node:n,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:a,resetWarningCache:t};return i.PropTypes=i,i},Ob}var N1;function vT(){return N1||(N1=1,Fb.exports=yT()()),Fb.exports}/*!
 * perfect-scrollbar v1.5.6
 * Copyright 2024 Hyunje Jun, MDBootstrap and Contributors
 * Licensed under MIT
 */function tc(s){return getComputedStyle(s)}function Ui(s,t){for(var a in t){var n=t[a];typeof n=="number"&&(n=n+"px"),s.style[a]=n}return s}function wp(s){var t=document.createElement("div");return t.className=s,t}var w1=typeof Element<"u"&&(Element.prototype.matches||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector);function Bd(s,t){if(!w1)throw new Error("No element matching method supported");return w1.call(s,t)}function Ah(s){s.remove?s.remove():s.parentNode&&s.parentNode.removeChild(s)}function _1(s,t){return Array.prototype.filter.call(s.children,function(a){return Bd(a,t)})}var $n={main:"ps",rtl:"ps__rtl",element:{thumb:function(s){return"ps__thumb-"+s},rail:function(s){return"ps__rail-"+s},consuming:"ps__child--consume"},state:{focus:"ps--focus",clicking:"ps--clicking",active:function(s){return"ps--active-"+s},scrolling:function(s){return"ps--scrolling-"+s}}},BS={x:null,y:null};function zS(s,t){var a=s.element.classList,n=$n.state.scrolling(t);a.contains(n)?clearTimeout(BS[t]):a.add(n)}function qS(s,t){BS[t]=setTimeout(function(){return s.isAlive&&s.element.classList.remove($n.state.scrolling(t))},s.settings.scrollingThreshold)}function jT(s,t){zS(s,t),qS(s,t)}var vm=function(t){this.element=t,this.handlers={}},US={isEmpty:{configurable:!0}};vm.prototype.bind=function(t,a){typeof this.handlers[t]>"u"&&(this.handlers[t]=[]),this.handlers[t].push(a),this.element.addEventListener(t,a,!1)};vm.prototype.unbind=function(t,a){var n=this;this.handlers[t]=this.handlers[t].filter(function(r){return a&&r!==a?!0:(n.element.removeEventListener(t,r,!1),!1)})};vm.prototype.unbindAll=function(){for(var t in this.handlers)this.unbind(t)};US.isEmpty.get=function(){var s=this;return Object.keys(this.handlers).every(function(t){return s.handlers[t].length===0})};Object.defineProperties(vm.prototype,US);var Qh=function(){this.eventElements=[]};Qh.prototype.eventElement=function(t){var a=this.eventElements.filter(function(n){return n.element===t})[0];return a||(a=new vm(t),this.eventElements.push(a)),a};Qh.prototype.bind=function(t,a,n){this.eventElement(t).bind(a,n)};Qh.prototype.unbind=function(t,a,n){var r=this.eventElement(t);r.unbind(a,n),r.isEmpty&&this.eventElements.splice(this.eventElements.indexOf(r),1)};Qh.prototype.unbindAll=function(){this.eventElements.forEach(function(t){return t.unbindAll()}),this.eventElements=[]};Qh.prototype.once=function(t,a,n){var r=this.eventElement(t),i=function(o){r.unbind(a,i),n(o)};r.bind(a,i)};function _p(s){if(typeof window.CustomEvent=="function")return new CustomEvent(s);var t=document.createEvent("CustomEvent");return t.initCustomEvent(s,!1,!1,void 0),t}function vg(s,t,a,n,r){n===void 0&&(n=!0),r===void 0&&(r=!1);var i;if(t==="top")i=["contentHeight","containerHeight","scrollTop","y","up","down"];else if(t==="left")i=["contentWidth","containerWidth","scrollLeft","x","left","right"];else throw new Error("A proper axis should be provided");NT(s,a,i,n,r)}function NT(s,t,a,n,r){var i=a[0],o=a[1],c=a[2],u=a[3],h=a[4],m=a[5];n===void 0&&(n=!0),r===void 0&&(r=!1);var p=s.element;s.reach[u]=null,p[c]<1&&(s.reach[u]="start"),p[c]>s[i]-s[o]-1&&(s.reach[u]="end"),t&&(p.dispatchEvent(_p("ps-scroll-"+u)),t<0?p.dispatchEvent(_p("ps-scroll-"+h)):t>0&&p.dispatchEvent(_p("ps-scroll-"+m)),n&&jT(s,u)),s.reach[u]&&(t||r)&&p.dispatchEvent(_p("ps-"+u+"-reach-"+s.reach[u]))}function on(s){return parseInt(s,10)||0}function wT(s){return Bd(s,"input,[contenteditable]")||Bd(s,"select,[contenteditable]")||Bd(s,"textarea,[contenteditable]")||Bd(s,"button,[contenteditable]")}function _T(s){var t=tc(s);return on(t.width)+on(t.paddingLeft)+on(t.paddingRight)+on(t.borderLeftWidth)+on(t.borderRightWidth)}var _h={isWebKit:typeof document<"u"&&"WebkitAppearance"in document.documentElement.style,supportsTouch:typeof window<"u"&&("ontouchstart"in window||"maxTouchPoints"in window.navigator&&window.navigator.maxTouchPoints>0||window.DocumentTouch&&document instanceof window.DocumentTouch),supportsIePointer:typeof navigator<"u"&&navigator.msMaxTouchPoints,isChrome:typeof navigator<"u"&&/Chrome/i.test(navigator&&navigator.userAgent)};function ad(s){var t=s.element,a=Math.floor(t.scrollTop),n=t.getBoundingClientRect();s.containerWidth=Math.floor(n.width),s.containerHeight=Math.floor(n.height),s.contentWidth=t.scrollWidth,s.contentHeight=t.scrollHeight,t.contains(s.scrollbarXRail)||(_1(t,$n.element.rail("x")).forEach(function(r){return Ah(r)}),t.appendChild(s.scrollbarXRail)),t.contains(s.scrollbarYRail)||(_1(t,$n.element.rail("y")).forEach(function(r){return Ah(r)}),t.appendChild(s.scrollbarYRail)),!s.settings.suppressScrollX&&s.containerWidth+s.settings.scrollXMarginOffset<s.contentWidth?(s.scrollbarXActive=!0,s.railXWidth=s.containerWidth-s.railXMarginWidth,s.railXRatio=s.containerWidth/s.railXWidth,s.scrollbarXWidth=S1(s,on(s.railXWidth*s.containerWidth/s.contentWidth)),s.scrollbarXLeft=on((s.negativeScrollAdjustment+t.scrollLeft)*(s.railXWidth-s.scrollbarXWidth)/(s.contentWidth-s.containerWidth))):s.scrollbarXActive=!1,!s.settings.suppressScrollY&&s.containerHeight+s.settings.scrollYMarginOffset<s.contentHeight?(s.scrollbarYActive=!0,s.railYHeight=s.containerHeight-s.railYMarginHeight,s.railYRatio=s.containerHeight/s.railYHeight,s.scrollbarYHeight=S1(s,on(s.railYHeight*s.containerHeight/s.contentHeight)),s.scrollbarYTop=on(a*(s.railYHeight-s.scrollbarYHeight)/(s.contentHeight-s.containerHeight))):s.scrollbarYActive=!1,s.scrollbarXLeft>=s.railXWidth-s.scrollbarXWidth&&(s.scrollbarXLeft=s.railXWidth-s.scrollbarXWidth),s.scrollbarYTop>=s.railYHeight-s.scrollbarYHeight&&(s.scrollbarYTop=s.railYHeight-s.scrollbarYHeight),ST(t,s),s.scrollbarXActive?t.classList.add($n.state.active("x")):(t.classList.remove($n.state.active("x")),s.scrollbarXWidth=0,s.scrollbarXLeft=0,t.scrollLeft=s.isRtl===!0?s.contentWidth:0),s.scrollbarYActive?t.classList.add($n.state.active("y")):(t.classList.remove($n.state.active("y")),s.scrollbarYHeight=0,s.scrollbarYTop=0,t.scrollTop=0)}function S1(s,t){return s.settings.minScrollbarLength&&(t=Math.max(t,s.settings.minScrollbarLength)),s.settings.maxScrollbarLength&&(t=Math.min(t,s.settings.maxScrollbarLength)),t}function ST(s,t){var a={width:t.railXWidth},n=Math.floor(s.scrollTop);t.isRtl?a.left=t.negativeScrollAdjustment+s.scrollLeft+t.containerWidth-t.contentWidth:a.left=s.scrollLeft,t.isScrollbarXUsingBottom?a.bottom=t.scrollbarXBottom-n:a.top=t.scrollbarXTop+n,Ui(t.scrollbarXRail,a);var r={top:n,height:t.railYHeight};t.isScrollbarYUsingRight?t.isRtl?r.right=t.contentWidth-(t.negativeScrollAdjustment+s.scrollLeft)-t.scrollbarYRight-t.scrollbarYOuterWidth-9:r.right=t.scrollbarYRight-s.scrollLeft:t.isRtl?r.left=t.negativeScrollAdjustment+s.scrollLeft+t.containerWidth*2-t.contentWidth-t.scrollbarYLeft-t.scrollbarYOuterWidth:r.left=t.scrollbarYLeft+s.scrollLeft,Ui(t.scrollbarYRail,r),Ui(t.scrollbarX,{left:t.scrollbarXLeft,width:t.scrollbarXWidth-t.railBorderXWidth}),Ui(t.scrollbarY,{top:t.scrollbarYTop,height:t.scrollbarYHeight-t.railBorderYWidth})}function CT(s){s.event.bind(s.scrollbarY,"mousedown",function(t){return t.stopPropagation()}),s.event.bind(s.scrollbarYRail,"mousedown",function(t){var a=t.pageY-window.pageYOffset-s.scrollbarYRail.getBoundingClientRect().top,n=a>s.scrollbarYTop?1:-1;s.element.scrollTop+=n*s.containerHeight,ad(s),t.stopPropagation()}),s.event.bind(s.scrollbarX,"mousedown",function(t){return t.stopPropagation()}),s.event.bind(s.scrollbarXRail,"mousedown",function(t){var a=t.pageX-window.pageXOffset-s.scrollbarXRail.getBoundingClientRect().left,n=a>s.scrollbarXLeft?1:-1;s.element.scrollLeft+=n*s.containerWidth,ad(s),t.stopPropagation()})}var Sp=null;function AT(s){C1(s,["containerHeight","contentHeight","pageY","railYHeight","scrollbarY","scrollbarYHeight","scrollTop","y","scrollbarYRail"]),C1(s,["containerWidth","contentWidth","pageX","railXWidth","scrollbarX","scrollbarXWidth","scrollLeft","x","scrollbarXRail"])}function C1(s,t){var a=t[0],n=t[1],r=t[2],i=t[3],o=t[4],c=t[5],u=t[6],h=t[7],m=t[8],p=s.element,y=null,g=null,j=null;function b(S){S.touches&&S.touches[0]&&(S[r]=S.touches[0]["page"+h.toUpperCase()]),Sp===o&&(p[u]=y+j*(S[r]-g),zS(s,h),ad(s),S.stopPropagation(),S.preventDefault())}function N(){qS(s,h),s[m].classList.remove($n.state.clicking),document.removeEventListener("mousemove",b),document.removeEventListener("mouseup",N),document.removeEventListener("touchmove",b),document.removeEventListener("touchend",N),Sp=null}function v(S){Sp===null&&(Sp=o,y=p[u],S.touches&&(S[r]=S.touches[0]["page"+h.toUpperCase()]),g=S[r],j=(s[n]-s[a])/(s[i]-s[c]),S.touches?(document.addEventListener("touchmove",b,{passive:!1}),document.addEventListener("touchend",N)):(document.addEventListener("mousemove",b),document.addEventListener("mouseup",N)),s[m].classList.add($n.state.clicking)),S.stopPropagation(),S.cancelable&&S.preventDefault()}s[o].addEventListener("mousedown",v),s[o].addEventListener("touchstart",v)}function kT(s){var t=s.element,a=function(){return Bd(t,":hover")},n=function(){return Bd(s.scrollbarX,":focus")||Bd(s.scrollbarY,":focus")};function r(i,o){var c=Math.floor(t.scrollTop);if(i===0){if(!s.scrollbarYActive)return!1;if(c===0&&o>0||c>=s.contentHeight-s.containerHeight&&o<0)return!s.settings.wheelPropagation}var u=t.scrollLeft;if(o===0){if(!s.scrollbarXActive)return!1;if(u===0&&i<0||u>=s.contentWidth-s.containerWidth&&i>0)return!s.settings.wheelPropagation}return!0}s.event.bind(s.ownerDocument,"keydown",function(i){if(!(i.isDefaultPrevented&&i.isDefaultPrevented()||i.defaultPrevented)&&!(!a()&&!n())){var o=document.activeElement?document.activeElement:s.ownerDocument.activeElement;if(o){if(o.tagName==="IFRAME")o=o.contentDocument.activeElement;else for(;o.shadowRoot;)o=o.shadowRoot.activeElement;if(wT(o))return}var c=0,u=0;switch(i.which){case 37:i.metaKey?c=-s.contentWidth:i.altKey?c=-s.containerWidth:c=-30;break;case 38:i.metaKey?u=s.contentHeight:i.altKey?u=s.containerHeight:u=30;break;case 39:i.metaKey?c=s.contentWidth:i.altKey?c=s.containerWidth:c=30;break;case 40:i.metaKey?u=-s.contentHeight:i.altKey?u=-s.containerHeight:u=-30;break;case 32:i.shiftKey?u=s.containerHeight:u=-s.containerHeight;break;case 33:u=s.containerHeight;break;case 34:u=-s.containerHeight;break;case 36:u=s.contentHeight;break;case 35:u=-s.contentHeight;break;default:return}s.settings.suppressScrollX&&c!==0||s.settings.suppressScrollY&&u!==0||(t.scrollTop-=u,t.scrollLeft+=c,ad(s),r(c,u)&&i.preventDefault())}})}function DT(s){var t=s.element;function a(o,c){var u=Math.floor(t.scrollTop),h=t.scrollTop===0,m=u+t.offsetHeight===t.scrollHeight,p=t.scrollLeft===0,y=t.scrollLeft+t.offsetWidth===t.scrollWidth,g;return Math.abs(c)>Math.abs(o)?g=h||m:g=p||y,g?!s.settings.wheelPropagation:!0}function n(o){var c=o.deltaX,u=-1*o.deltaY;return(typeof c>"u"||typeof u>"u")&&(c=-1*o.wheelDeltaX/6,u=o.wheelDeltaY/6),o.deltaMode&&o.deltaMode===1&&(c*=10,u*=10),c!==c&&u!==u&&(c=0,u=o.wheelDelta),o.shiftKey?[-u,-c]:[c,u]}function r(o,c,u){if(!_h.isWebKit&&t.querySelector("select:focus"))return!0;if(!t.contains(o))return!1;for(var h=o;h&&h!==t;){if(h.classList.contains($n.element.consuming))return!0;var m=tc(h);if(u&&m.overflowY.match(/(scroll|auto)/)){var p=h.scrollHeight-h.clientHeight;if(p>0&&(h.scrollTop>0&&u<0||h.scrollTop<p&&u>0))return!0}if(c&&m.overflowX.match(/(scroll|auto)/)){var y=h.scrollWidth-h.clientWidth;if(y>0&&(h.scrollLeft>0&&c<0||h.scrollLeft<y&&c>0))return!0}h=h.parentNode}return!1}function i(o){var c=n(o),u=c[0],h=c[1];if(!r(o.target,u,h)){var m=!1;s.settings.useBothWheelAxes?s.scrollbarYActive&&!s.scrollbarXActive?(h?t.scrollTop-=h*s.settings.wheelSpeed:t.scrollTop+=u*s.settings.wheelSpeed,m=!0):s.scrollbarXActive&&!s.scrollbarYActive&&(u?t.scrollLeft+=u*s.settings.wheelSpeed:t.scrollLeft-=h*s.settings.wheelSpeed,m=!0):(t.scrollTop-=h*s.settings.wheelSpeed,t.scrollLeft+=u*s.settings.wheelSpeed),ad(s),m=m||a(u,h),m&&!o.ctrlKey&&(o.stopPropagation(),o.preventDefault())}}typeof window.onwheel<"u"?s.event.bind(t,"wheel",i):typeof window.onmousewheel<"u"&&s.event.bind(t,"mousewheel",i)}function ET(s){if(!_h.supportsTouch&&!_h.supportsIePointer)return;var t=s.element,a={startOffset:{},startTime:0,speed:{},easingLoop:null};function n(p,y){var g=Math.floor(t.scrollTop),j=t.scrollLeft,b=Math.abs(p),N=Math.abs(y);if(N>b){if(y<0&&g===s.contentHeight-s.containerHeight||y>0&&g===0)return window.scrollY===0&&y>0&&_h.isChrome}else if(b>N&&(p<0&&j===s.contentWidth-s.containerWidth||p>0&&j===0))return!0;return!0}function r(p,y){t.scrollTop-=y,t.scrollLeft-=p,ad(s)}function i(p){return p.targetTouches?p.targetTouches[0]:p}function o(p){return p.target===s.scrollbarX||p.target===s.scrollbarY||p.pointerType&&p.pointerType==="pen"&&p.buttons===0?!1:!!(p.targetTouches&&p.targetTouches.length===1||p.pointerType&&p.pointerType!=="mouse"&&p.pointerType!==p.MSPOINTER_TYPE_MOUSE)}function c(p){if(o(p)){var y=i(p);a.startOffset.pageX=y.pageX,a.startOffset.pageY=y.pageY,a.startTime=new Date().getTime(),a.easingLoop!==null&&clearInterval(a.easingLoop)}}function u(p,y,g){if(!t.contains(p))return!1;for(var j=p;j&&j!==t;){if(j.classList.contains($n.element.consuming))return!0;var b=tc(j);if(g&&b.overflowY.match(/(scroll|auto)/)){var N=j.scrollHeight-j.clientHeight;if(N>0&&(j.scrollTop>0&&g<0||j.scrollTop<N&&g>0))return!0}if(y&&b.overflowX.match(/(scroll|auto)/)){var v=j.scrollWidth-j.clientWidth;if(v>0&&(j.scrollLeft>0&&y<0||j.scrollLeft<v&&y>0))return!0}j=j.parentNode}return!1}function h(p){if(o(p)){var y=i(p),g={pageX:y.pageX,pageY:y.pageY},j=g.pageX-a.startOffset.pageX,b=g.pageY-a.startOffset.pageY;if(u(p.target,j,b))return;r(j,b),a.startOffset=g;var N=new Date().getTime(),v=N-a.startTime;v>0&&(a.speed.x=j/v,a.speed.y=b/v,a.startTime=N),n(j,b)&&p.cancelable&&p.preventDefault()}}function m(){s.settings.swipeEasing&&(clearInterval(a.easingLoop),a.easingLoop=setInterval(function(){if(s.isInitialized){clearInterval(a.easingLoop);return}if(!a.speed.x&&!a.speed.y){clearInterval(a.easingLoop);return}if(Math.abs(a.speed.x)<.01&&Math.abs(a.speed.y)<.01){clearInterval(a.easingLoop);return}r(a.speed.x*30,a.speed.y*30),a.speed.x*=.8,a.speed.y*=.8},10))}_h.supportsTouch?(s.event.bind(t,"touchstart",c),s.event.bind(t,"touchmove",h),s.event.bind(t,"touchend",m)):_h.supportsIePointer&&(window.PointerEvent?(s.event.bind(t,"pointerdown",c),s.event.bind(t,"pointermove",h),s.event.bind(t,"pointerup",m)):window.MSPointerEvent&&(s.event.bind(t,"MSPointerDown",c),s.event.bind(t,"MSPointerMove",h),s.event.bind(t,"MSPointerUp",m)))}var TT=function(){return{handlers:["click-rail","drag-thumb","keyboard","wheel","touch"],maxScrollbarLength:null,minScrollbarLength:null,scrollingThreshold:1e3,scrollXMarginOffset:0,scrollYMarginOffset:0,suppressScrollX:!1,suppressScrollY:!1,swipeEasing:!0,useBothWheelAxes:!1,wheelPropagation:!0,wheelSpeed:1}},LT={"click-rail":CT,"drag-thumb":AT,keyboard:kT,wheel:DT,touch:ET},jm=function(t,a){var n=this;if(a===void 0&&(a={}),typeof t=="string"&&(t=document.querySelector(t)),!t||!t.nodeName)throw new Error("no element is specified to initialize PerfectScrollbar");this.element=t,t.classList.add($n.main),this.settings=TT();for(var r in a)this.settings[r]=a[r];this.containerWidth=null,this.containerHeight=null,this.contentWidth=null,this.contentHeight=null;var i=function(){return t.classList.add($n.state.focus)},o=function(){return t.classList.remove($n.state.focus)};this.isRtl=tc(t).direction==="rtl",this.isRtl===!0&&t.classList.add($n.rtl),this.isNegativeScroll=(function(){var h=t.scrollLeft,m=null;return t.scrollLeft=-1,m=t.scrollLeft<0,t.scrollLeft=h,m})(),this.negativeScrollAdjustment=this.isNegativeScroll?t.scrollWidth-t.clientWidth:0,this.event=new Qh,this.ownerDocument=t.ownerDocument||document,this.scrollbarXRail=wp($n.element.rail("x")),t.appendChild(this.scrollbarXRail),this.scrollbarX=wp($n.element.thumb("x")),this.scrollbarXRail.appendChild(this.scrollbarX),this.scrollbarX.setAttribute("tabindex",0),this.event.bind(this.scrollbarX,"focus",i),this.event.bind(this.scrollbarX,"blur",o),this.scrollbarXActive=null,this.scrollbarXWidth=null,this.scrollbarXLeft=null;var c=tc(this.scrollbarXRail);this.scrollbarXBottom=parseInt(c.bottom,10),isNaN(this.scrollbarXBottom)?(this.isScrollbarXUsingBottom=!1,this.scrollbarXTop=on(c.top)):this.isScrollbarXUsingBottom=!0,this.railBorderXWidth=on(c.borderLeftWidth)+on(c.borderRightWidth),Ui(this.scrollbarXRail,{display:"block"}),this.railXMarginWidth=on(c.marginLeft)+on(c.marginRight),Ui(this.scrollbarXRail,{display:""}),this.railXWidth=null,this.railXRatio=null,this.scrollbarYRail=wp($n.element.rail("y")),t.appendChild(this.scrollbarYRail),this.scrollbarY=wp($n.element.thumb("y")),this.scrollbarYRail.appendChild(this.scrollbarY),this.scrollbarY.setAttribute("tabindex",0),this.event.bind(this.scrollbarY,"focus",i),this.event.bind(this.scrollbarY,"blur",o),this.scrollbarYActive=null,this.scrollbarYHeight=null,this.scrollbarYTop=null;var u=tc(this.scrollbarYRail);this.scrollbarYRight=parseInt(u.right,10),isNaN(this.scrollbarYRight)?(this.isScrollbarYUsingRight=!1,this.scrollbarYLeft=on(u.left)):this.isScrollbarYUsingRight=!0,this.scrollbarYOuterWidth=this.isRtl?_T(this.scrollbarY):null,this.railBorderYWidth=on(u.borderTopWidth)+on(u.borderBottomWidth),Ui(this.scrollbarYRail,{display:"block"}),this.railYMarginHeight=on(u.marginTop)+on(u.marginBottom),Ui(this.scrollbarYRail,{display:""}),this.railYHeight=null,this.railYRatio=null,this.reach={x:t.scrollLeft<=0?"start":t.scrollLeft>=this.contentWidth-this.containerWidth?"end":null,y:t.scrollTop<=0?"start":t.scrollTop>=this.contentHeight-this.containerHeight?"end":null},this.isAlive=!0,this.settings.handlers.forEach(function(h){return LT[h](n)}),this.lastScrollTop=Math.floor(t.scrollTop),this.lastScrollLeft=t.scrollLeft,this.event.bind(this.element,"scroll",function(h){return n.onScroll(h)}),ad(this)};jm.prototype.update=function(){this.isAlive&&(this.negativeScrollAdjustment=this.isNegativeScroll?this.element.scrollWidth-this.element.clientWidth:0,Ui(this.scrollbarXRail,{display:"block"}),Ui(this.scrollbarYRail,{display:"block"}),this.railXMarginWidth=on(tc(this.scrollbarXRail).marginLeft)+on(tc(this.scrollbarXRail).marginRight),this.railYMarginHeight=on(tc(this.scrollbarYRail).marginTop)+on(tc(this.scrollbarYRail).marginBottom),Ui(this.scrollbarXRail,{display:"none"}),Ui(this.scrollbarYRail,{display:"none"}),ad(this),vg(this,"top",0,!1,!0),vg(this,"left",0,!1,!0),Ui(this.scrollbarXRail,{display:""}),Ui(this.scrollbarYRail,{display:""}))};jm.prototype.onScroll=function(t){this.isAlive&&(ad(this),vg(this,"top",this.element.scrollTop-this.lastScrollTop),vg(this,"left",this.element.scrollLeft-this.lastScrollLeft),this.lastScrollTop=Math.floor(this.element.scrollTop),this.lastScrollLeft=this.element.scrollLeft)};jm.prototype.destroy=function(){this.isAlive&&(this.event.unbindAll(),Ah(this.scrollbarX),Ah(this.scrollbarY),Ah(this.scrollbarXRail),Ah(this.scrollbarYRail),this.removePsClasses(),this.element=null,this.scrollbarX=null,this.scrollbarY=null,this.scrollbarXRail=null,this.scrollbarYRail=null,this.isAlive=!1)};jm.prototype.removePsClasses=function(){this.element.className=this.element.className.split(" ").filter(function(t){return!t.match(/^ps([-_].+|)$/)}).join(" ")};const PT=Object.freeze(Object.defineProperty({__proto__:null,default:jm},Symbol.toStringTag,{value:"Module"})),FT=yD(PT);var A1;function IT(){return A1||(A1=1,(function(s,t){Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(N){for(var v=1;v<arguments.length;v++){var S=arguments[v];for(var E in S)Object.prototype.hasOwnProperty.call(S,E)&&(N[E]=S[E])}return N},n=(function(){function N(v,S){for(var E=0;E<S.length;E++){var L=S[E];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(v,L.key,L)}}return function(v,S,E){return S&&N(v.prototype,S),E&&N(v,E),v}})(),r=Vg(),i=h(r),o=vT(),c=FT,u=h(c);function h(N){return N&&N.__esModule?N:{default:N}}function m(N,v){var S={};for(var E in N)v.indexOf(E)>=0||Object.prototype.hasOwnProperty.call(N,E)&&(S[E]=N[E]);return S}function p(N,v){if(!(N instanceof v))throw new TypeError("Cannot call a class as a function")}function y(N,v){if(!N)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:N}function g(N,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);N.prototype=Object.create(v&&v.prototype,{constructor:{value:N,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(N,v):N.__proto__=v)}var j={"ps-scroll-y":"onScrollY","ps-scroll-x":"onScrollX","ps-scroll-up":"onScrollUp","ps-scroll-down":"onScrollDown","ps-scroll-left":"onScrollLeft","ps-scroll-right":"onScrollRight","ps-y-reach-start":"onYReachStart","ps-y-reach-end":"onYReachEnd","ps-x-reach-start":"onXReachStart","ps-x-reach-end":"onXReachEnd"};Object.freeze(j);var b=(function(N){g(v,N);function v(S){p(this,v);var E=y(this,(v.__proto__||Object.getPrototypeOf(v)).call(this,S));return E.handleRef=E.handleRef.bind(E),E._handlerByEvent={},E}return n(v,[{key:"componentDidMount",value:function(){this.props.option&&console.warn('react-perfect-scrollbar: the "option" prop has been deprecated in favor of "options"'),this._ps=new u.default(this._container,this.props.options||this.props.option),this._updateEventHook(),this._updateClassName()}},{key:"componentDidUpdate",value:function(E){this._updateEventHook(E),this.updateScroll(),E.className!==this.props.className&&this._updateClassName()}},{key:"componentWillUnmount",value:function(){var E=this;Object.keys(this._handlerByEvent).forEach(function(L){var z=E._handlerByEvent[L];z&&E._container.removeEventListener(L,z,!1)}),this._handlerByEvent={},this._ps.destroy(),this._ps=null}},{key:"_updateEventHook",value:function(){var E=this,L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.keys(j).forEach(function(z){var V=E.props[j[z]],te=L[j[z]];if(V!==te){if(te){var q=E._handlerByEvent[z];E._container.removeEventListener(z,q,!1),E._handlerByEvent[z]=null}if(V){var B=function(){return V(E._container)};E._container.addEventListener(z,B,!1),E._handlerByEvent[z]=B}}})}},{key:"_updateClassName",value:function(){var E=this.props.className,L=this._container.className.split(" ").filter(function(z){return z.match(/^ps([-_].+|)$/)}).join(" ");this._container&&(this._container.className="scrollbar-container"+(E?" "+E:"")+(L?" "+L:""))}},{key:"updateScroll",value:function(){this.props.onSync(this._ps)}},{key:"handleRef",value:function(E){this._container=E,this.props.containerRef(E)}},{key:"render",value:function(){var E=this.props;E.className;var L=E.style;E.option,E.options,E.containerRef,E.onScrollY,E.onScrollX,E.onScrollUp,E.onScrollDown,E.onScrollLeft,E.onScrollRight,E.onYReachStart,E.onYReachEnd,E.onXReachStart,E.onXReachEnd;var z=E.component;E.onSync;var V=E.children,te=m(E,["className","style","option","options","containerRef","onScrollY","onScrollX","onScrollUp","onScrollDown","onScrollLeft","onScrollRight","onYReachStart","onYReachEnd","onXReachStart","onXReachEnd","component","onSync","children"]),q=z;return i.default.createElement(q,a({style:L,ref:this.handleRef},te),V)}}]),v})(r.Component);t.default=b,b.defaultProps={className:"",style:void 0,option:void 0,options:void 0,containerRef:function(){},onScrollY:void 0,onScrollX:void 0,onScrollUp:void 0,onScrollDown:void 0,onScrollLeft:void 0,onScrollRight:void 0,onYReachStart:void 0,onYReachEnd:void 0,onXReachStart:void 0,onXReachEnd:void 0,onSync:function(v){return v.update()},component:"div"},b.propTypes={children:o.PropTypes.node.isRequired,className:o.PropTypes.string,style:o.PropTypes.object,option:o.PropTypes.object,options:o.PropTypes.object,containerRef:o.PropTypes.func,onScrollY:o.PropTypes.func,onScrollX:o.PropTypes.func,onScrollUp:o.PropTypes.func,onScrollDown:o.PropTypes.func,onScrollLeft:o.PropTypes.func,onScrollRight:o.PropTypes.func,onYReachStart:o.PropTypes.func,onYReachEnd:o.PropTypes.func,onXReachStart:o.PropTypes.func,onXReachEnd:o.PropTypes.func,onSync:o.PropTypes.func,component:o.PropTypes.string},s.exports=t.default})(Np,Np.exports)),Np.exports}var k1;function OT(){return k1||(k1=1,(function(s,t){Object.defineProperty(t,"__esModule",{value:!0});var a=IT(),n=r(a);function r(i){return i&&i.__esModule?i:{default:i}}t.default=n.default,s.exports=t.default})(jp,jp.exports)),jp.exports}var MT=OT();const RT=gv(MT),BT=[{title:"Navigation",isHeader:!0},{icon:"fa fa-th-large",title:"Dashboard",children:[{path:"/dashboard",title:"Main Dashboard"},{path:"/dashboard/analytics",title:"Analytics Dashboard",adminOnly:!0}]},{icon:"fa fa-plane",title:"Ticket",children:[{path:"/ticket/new",title:"New Ticket"},{path:"/ticket/report",title:"Ticket Report"}]},{icon:"fa fa-ticket",title:"Visa",children:[{path:"/visa/new",title:"New Visa"},{path:"/residence",title:"Residence"},{path:"/residence/tasks",title:"Residence Tasks"},{path:"/residence/family",title:"Family Residence Tasks"},{path:"/residence/report",title:"Residence Report"},{path:"/visa/report",title:"Visa Report"},{path:"/visa/pending",title:"Pending Visa"},{path:"/visa/supplier-prices",title:"Supplier Visa Prices"},{path:"/visa/customer-prices",title:"Customer Visa Prices"},{path:"/establishments/manage",title:"Manage Establishments"}]},{icon:"fa fa-spinner",title:"Visa Tasks",children:[{path:"/visa-tasks/mainland",title:"Mainland"},{path:"/visa-tasks/freezone",title:"Free Zone"},{path:"/visa-tasks/emirates-id",title:"Emirates ID"},{path:"/visa-tasks/dashboard",title:"Visa Dashboard"}]},{icon:"fa fa-bank",title:"Amer",children:[{path:"/amer/transactions",title:"Transactions"}]},{icon:"fa fa-simplybuilt",title:"Loan",children:[{path:"/loan/new",title:"New Loan"},{path:"/loan/view",title:"View Loan"}]},{icon:"fa fa-hotel",title:"Hotel",children:[{path:"/hotel/new",title:"New Booking"},{path:"/hotel/view",title:"View Bookings"}]},{icon:"fa fa-car",title:"Rental Car",children:[{path:"/car-rental/new",title:"New Booking"},{path:"/car-rental/view",title:"View Bookings"}]},{path:"/service",icon:"fab fa-servicestack",title:"Service"},{path:"/supplier",icon:"fa fa-truck",title:"Supplier"},{icon:"fa fa-dollar",title:"Expenses",children:[{path:"/expenses",title:"Expense Management"}]},{icon:"fa fa-dollar",title:"Make Payment",children:[{path:"/payment/supplier",title:"Supplier"},{path:"/payment/customer",title:"Customer"}]},{icon:"fa fa-user",title:"Customers",children:[{path:"/customers",title:"Customer Report"},{path:"/agents",title:"Manage Agents"}]},{icon:"fa fa-dollar",title:"Ledgers",children:[{path:"/ledger/customer",title:"Customer"},{path:"/ledger/supplier",title:"Supplier"},{path:"/ledger/affiliate",title:"Affiliate Business"}]},{icon:"fa fa-user",title:"Manage User",children:[{path:"/staff",title:"Employee"},{path:"/role",title:"Role"},{path:"/permission",title:"Permission"}]},{path:"/cheques",icon:"fa fa-bank",title:"Cheques"},{path:"/tasheel",icon:"fa fa-bank",title:"TASHEEL"},{icon:"fa fa-user",title:"Manage Accounts",children:[{path:"/accounts",title:"Accounts"},{path:"/accounts/deposits",title:"Deposits"},{path:"/accounts/withdrawals",title:"Withdrawals"},{path:"/accounts/transfers",title:"Transfers"},{path:"/accounts/report",title:"Accounts Report"}]},{path:"/salary",icon:"fa fa-dollar",title:"Manage Salaries"},{icon:"fa fa-hdd",title:"Email",children:[{path:"/email/inbox",title:"Inbox"},{path:"/email/compose",title:"Compose"},{path:"/email/sent",title:"Sent"}]},{icon:"fa fa-file-text",title:"Reports",children:[{path:"/reports/residence-ledger",title:"Residence Ledger"}]},{path:"/company-documents",icon:"fa fa-files-o",title:"Company Documents"},{path:"/reminder",icon:"fa fa-clock",title:"Set Reminder"},{path:"/currency",icon:"fa fa-money",title:"Currency"},{path:"/delete-requests",icon:"fa fa-trash",title:"Delete Requests",adminOnly:!0},{path:"/settings",icon:"fa fa-gears",title:"Settings",adminOnly:!0}];function zT(){const s=Vl(),{user:t}=Gh(),{appSidebarMinify:a,appSidebarLight:n,appSidebarTransparent:r,toggleAppSidebarMinify:i}=Lv(),[o,c]=A.useState({}),u=p=>s.pathname===p||s.pathname.startsWith(p+"/"),h=p=>{c(y=>({...y,[p]:!y[p]}))},m=(p,y)=>{if(p.adminOnly&&t?.staff_id!==1)return null;if(p.isHeader)return e.jsx("div",{className:"menu-header",children:p.title},y);const g=p.path?u(p.path):!1,j=p.children&&p.children.length>0,b=o[p.title]||!1;return j?e.jsxs("div",{className:"menu-item has-sub "+(g||b?"active":""),children:[e.jsxs("a",{href:"#",className:"menu-link",onClick:N=>{N.preventDefault(),h(p.title)},children:[p.icon&&e.jsx("div",{className:"menu-icon",children:e.jsx("i",{className:p.icon})}),e.jsxs("div",{className:"menu-text",children:[p.title,p.badge&&e.jsx("span",{className:"menu-badge",children:p.badge})]}),e.jsx("div",{className:"menu-caret"})]}),e.jsx("div",{className:"menu-submenu "+(b?"d-block":""),children:p.children.map((N,v)=>{if(N.adminOnly&&t?.staff_id!==1)return null;const S=N.path&&u(N.path);return e.jsx("div",{className:"menu-item "+(S?"active":""),children:N.path?e.jsx(dl,{to:N.path,className:"menu-link",children:e.jsx("div",{className:"menu-text",children:N.title})}):e.jsx("a",{href:"#",className:"menu-link",children:e.jsx("div",{className:"menu-text",children:N.title})})},v)})})]},y):e.jsx("div",{className:"menu-item "+(g?"active":""),children:p.path?e.jsxs(dl,{to:p.path,className:"menu-link",children:[p.icon&&e.jsx("div",{className:"menu-icon",children:e.jsx("i",{className:p.icon})}),e.jsxs("div",{className:"menu-text",children:[p.title,p.badge&&e.jsx("span",{className:"menu-badge",children:p.badge})]})]}):e.jsxs("a",{href:"#",className:"menu-link",children:[p.icon&&e.jsx("div",{className:"menu-icon",children:e.jsx("i",{className:p.icon})}),e.jsxs("div",{className:"menu-text",children:[p.title,p.badge&&e.jsx("span",{className:"menu-badge",children:p.badge})]})]})},y)};return e.jsx("div",{id:"sidebar",className:"app-sidebar "+(n?"app-sidebar-light ":"")+(r?"app-sidebar-transparent":""),children:e.jsx(RT,{className:"app-sidebar-content",options:{suppressScrollX:!0},children:e.jsxs("div",{className:"menu",children:[e.jsxs("div",{className:"menu-profile",children:[e.jsx("div",{className:"menu-profile-cover with-shadow"}),e.jsx("div",{className:"menu-profile-image",children:t?.staff_pic?e.jsx("img",{src:t.staff_pic.startsWith("http")?t.staff_pic:`${Ct.baseUrl}/${t.staff_pic}`,alt:t?.staff_name||"User",style:{objectFit:"cover",borderRadius:"50%"},onError:p=>{p.currentTarget.style.display="none",p.currentTarget.parentElement.innerHTML='<div class="image image-icon bg-gray-900 text-white"><i class="fa fa-user"></i></div>'}}):e.jsx("div",{className:"image image-icon bg-gray-900 text-white",children:e.jsx("i",{className:"fa fa-user"})})}),e.jsxs("div",{className:"menu-profile-info",children:[e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("div",{className:"flex-grow-1",children:t?.staff_name||"User"}),e.jsx("div",{className:"menu-caret ms-auto"})]}),e.jsx("small",{children:t?.role_name||"Staff"})]})]}),BT.map((p,y)=>m(p,y)),e.jsx("div",{className:"menu-item d-flex",children:e.jsx("a",{href:"#",className:"app-sidebar-minify-btn ms-auto",onClick:i,children:e.jsx("i",{className:"fa fa-angle-double-left"})})})]})})})}function qT(){const{appHeaderNone:s,appSidebarNone:t,appSidebarMinify:a,appSidebarMobileToggled:n,appContentFullHeight:r,appContentClass:i,hasScroll:o}=Lv();return A.useEffect(()=>{const c=()=>{};return window.addEventListener("scroll",c),()=>window.removeEventListener("scroll",c)},[]),e.jsxs("div",{className:"app app-sidebar-fixed app-header-fixed "+(s?"app-without-header ":"")+(t?"app-without-sidebar ":"")+(a?"app-sidebar-minified ":"")+(n?"app-sidebar-mobile-toggled ":"")+(r?"app-content-full-height ":"")+(o?"has-scroll ":""),children:[!s&&e.jsx(xT,{}),!t&&e.jsx(zT,{}),e.jsx("div",{id:"content",className:"app-content "+i,children:e.jsx(j3,{})})]})}const UT=({children:s})=>{const{isAuthenticated:t,isLoading:a}=Gh(),n=Vl();return a?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-900",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-primary-red"}),e.jsx("p",{className:"mt-4 text-gray-300",children:"Loading..."})]})}):t?e.jsx(e.Fragment,{children:s}):e.jsx(X_,{to:"/login",state:{from:n},replace:!0})},HT=()=>{const[s,t]=A.useState(""),[a,n]=A.useState(["","","","","",""]),[r,i]=A.useState("email"),[o,c]=A.useState(""),[u,h]=A.useState(""),[m,p]=A.useState(!1),[y,g]=A.useState(!1),[j,b]=A.useState(!1),N=Vn(),v=Vl(),{isAuthenticated:S}=Gh(),E=A.useRef([]);A.useEffect(()=>{if(S){const J=v.state?.from?.pathname||"/dashboard";N(J,{replace:!0})}},[S,N,v]),A.useEffect(()=>{r==="otp"&&E.current[0]&&setTimeout(()=>{E.current[0]?.focus()},100)},[r]);const L=async J=>{J.preventDefault(),c(""),h(""),p(!0);try{const P=await Cu.sendOTP(s);P.success?(h("OTP sent successfully! Please check your email."),g(!0),setTimeout(()=>{i("otp"),h("")},1500)):c(P.message||"Failed to send OTP")}catch{c("An error occurred. Please try again.")}finally{p(!1)}},z=(J,P)=>{if(P&&!/^\d$/.test(P))return;const K=[...a];K[J]=P,n(K),P&&J<5&&E.current[J+1]?.focus()},V=(J,P)=>{P.key==="Backspace"&&!a[J]&&J>0&&E.current[J-1]?.focus()},te=J=>{J.preventDefault();const P=J.clipboardData.getData("text").slice(0,6);if(/^\d+$/.test(P)){const K=[...a];for(let se=0;se<6;se++)K[se]=P[se]||"";n(K);const H=Math.min(P.length-1,5);E.current[H]?.focus()}},q=async J=>{J.preventDefault(),c(""),p(!0);const P=a.join("");if(P.length!==6){c("Please enter the complete 6-digit OTP"),p(!1);return}try{const K=await Cu.verifyOTP(s,P);if(K.success){const H=v.state?.from?.pathname||"/dashboard";N(H,{replace:!0}),window.location.reload()}else c(K.message||"Invalid OTP"),n(["","","","","",""]),E.current[0]?.focus()}catch{c("An error occurred. Please try again."),n(["","","","","",""]),E.current[0]?.focus()}finally{p(!1)}},B=()=>{i("email"),n(["","","","","",""]),c(""),h(""),g(!1)};return e.jsxs("div",{className:"login-container",children:[e.jsxs("div",{className:"login-background",children:[e.jsx("div",{className:"gradient-orb orb-1"}),e.jsx("div",{className:"gradient-orb orb-2"}),e.jsx("div",{className:"gradient-orb orb-3"}),e.jsx("div",{className:"grid-pattern"})]}),e.jsx("div",{className:"login-card-wrapper",children:e.jsxs("div",{className:`login-card ${r==="otp"?"card-expanded":""}`,children:[e.jsx("div",{className:"logo-section",children:e.jsxs("div",{className:"logo-container",children:[e.jsx("img",{src:"/assets/logo-white.png",alt:"Selab Nadiry Logo",className:"company-logo",onError:J=>{const P=J.target;P.style.display="none";const K=P.parentElement;if(K&&!K.querySelector(".logo-fallback")){const H=document.createElement("div");H.className="logo-fallback",H.textContent="SN",K.appendChild(H)}}}),e.jsx("div",{className:"logo-fallback",style:{display:"none"},children:"SN"})]})}),o&&e.jsxs("div",{className:"alert-message alert-error",children:[e.jsx("svg",{className:"alert-icon",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),e.jsx("span",{children:o})]}),u&&e.jsxs("div",{className:"alert-message alert-success",children:[e.jsx("svg",{className:"alert-icon",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),e.jsx("span",{children:u})]}),r==="email"&&e.jsxs("form",{onSubmit:L,className:"login-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"email",className:"form-label",children:"Email Address"}),e.jsxs("div",{className:"input-wrapper",children:[e.jsx("div",{className:"input-icon",children:e.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),e.jsx("input",{id:"email",type:"email",value:s,onChange:J=>t(J.target.value),className:"form-input",placeholder:"Enter your email address",required:!0,disabled:m,autoFocus:!0})]})]}),e.jsx("button",{type:"submit",disabled:m,className:"btn-primary",children:m?e.jsxs("span",{className:"btn-loading",children:[e.jsx("svg",{className:"spinner",viewBox:"0 0 24 24",children:e.jsx("circle",{className:"spinner-circle",cx:"12",cy:"12",r:"10"})}),"Sending OTP..."]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Send OTP"}),e.jsx("svg",{className:"btn-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M5 12h14M12 5l7 7-7 7"})})]})})]}),r==="otp"&&e.jsxs("form",{onSubmit:q,className:"login-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label text-center",children:"Enter 6-Digit OTP"}),e.jsxs("p",{className:"otp-email-hint",children:["OTP sent to ",e.jsx("span",{className:"email-highlight",children:s})]}),e.jsx("div",{className:"otp-container",onPaste:te,children:a.map((J,P)=>e.jsx("input",{ref:K=>E.current[P]=K,type:"text",inputMode:"numeric",maxLength:1,value:J,onChange:K=>z(P,K.target.value),onKeyDown:K=>V(P,K),className:"otp-input",disabled:m},P))})]}),e.jsxs("div",{className:"form-actions",children:[e.jsxs("button",{type:"button",onClick:B,disabled:m,className:"btn-secondary",children:[e.jsx("svg",{className:"btn-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M19 12H5M12 19l-7-7 7-7"})}),e.jsx("span",{children:"Back"})]}),e.jsx("button",{type:"submit",disabled:m,className:"btn-primary",children:m?e.jsxs("span",{className:"btn-loading",children:[e.jsx("svg",{className:"spinner",viewBox:"0 0 24 24",children:e.jsx("circle",{className:"spinner-circle",cx:"12",cy:"12",r:"10"})}),"Verifying..."]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Verify OTP"}),e.jsx("svg",{className:"btn-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M5 13l4 4L19 7"})})]})})]})]}),e.jsx("div",{className:"login-footer",children:e.jsxs("p",{children:[" ",new Date().getFullYear()," Selab Nadiry Travel & Tourism. All rights reserved."]})})]})})]})},vs={log:(...s)=>{},error:(...s)=>{console.error(...s)},warn:(...s)=>{},info:(...s)=>{},debug:(...s)=>{}},D1={getTodayStats:async()=>{const s=await Ne.get("/dashboard/todayStats.php");if(vs.debug("Raw API response:",s.data),s.data.success===!1)throw new Error(s.data.message||"Failed to fetch statistics");const{success:t,message:a,...n}=s.data;return n},getDailyEntries:async s=>{const t=await Ne.get("/dashboard/dailyEntries.php",{params:s});if(vs.debug("Daily entries API response:",t.data),t.data.success===!1)throw new Error(t.data.message||"Failed to fetch daily entries");let a=[];return t.data.data?Array.isArray(t.data.data)?a=t.data.data:typeof t.data.data=="object"&&(a=Object.values(t.data.data)):Array.isArray(t.data)?a=t.data:typeof t.data=="object"&&!t.data.success&&(a=Object.values(t.data)),vs.debug(`Extracted ${a.length} daily entries`),a},getEvents:async()=>[]},Mb={getCheques:async()=>{const s=await Ne.get("/calendar/cheques.php");if(vs.debug("Cheques API response:",s.data),s.data.success===!1)throw new Error(s.data.message||"Failed to fetch cheques");return s.data.cheques&&Array.isArray(s.data.cheques)?s.data.cheques:[]},getFlights:async()=>{const s=await Ne.get("/calendar/flights.php");if(vs.debug("Flights API response:",s.data),s.data.success===!1)throw new Error(s.data.message||"Failed to fetch flights");return s.data.flights&&Array.isArray(s.data.flights)?s.data.flights:[]},getCustomEvents:async()=>{const s=await Ne.get("/calendar/events.php");if(vs.debug("Custom events API response:",s.data),s.data.success===!1)throw new Error(s.data.message||"Failed to fetch custom events");return s.data.events&&Array.isArray(s.data.events)?s.data.events:[]}};/*!
* sweetalert2 v11.26.3
* Released under the MIT License.
*/function HS(s,t,a){if(typeof s=="function"?s===t:s.has(t))return arguments.length<3?t:a;throw new TypeError("Private element is not present on this object")}function $T(s,t){if(t.has(s))throw new TypeError("Cannot initialize the same private elements twice on an object")}function E1(s,t){return s.get(HS(s,t))}function VT(s,t,a){$T(s,t),t.set(s,a)}function WT(s,t,a){return s.set(HS(s,t),a),a}const YT=100,us={},KT=()=>{us.previousActiveElement instanceof HTMLElement?(us.previousActiveElement.focus(),us.previousActiveElement=null):document.body&&document.body.focus()},XT=s=>new Promise(t=>{if(!s)return t();const a=window.scrollX,n=window.scrollY;us.restoreFocusTimeout=setTimeout(()=>{KT(),t()},YT),window.scrollTo(a,n)}),$S="swal2-",GT=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error","draggable","dragging"],rt=GT.reduce((s,t)=>(s[t]=$S+t,s),{}),QT=["success","warning","info","question","error"],jg=QT.reduce((s,t)=>(s[t]=$S+t,s),{}),VS="SweetAlert2:",Pv=s=>s.charAt(0).toUpperCase()+s.slice(1),di=s=>{console.warn(`${VS} ${typeof s=="object"?s.join(" "):s}`)},Hu=s=>{console.error(`${VS} ${s}`)},T1=[],JT=s=>{T1.includes(s)||(T1.push(s),di(s))},WS=(s,t=null)=>{JT(`"${s}" is deprecated and will be removed in the next major release.${t?` Use "${t}" instead.`:""}`)},ex=s=>typeof s=="function"?s():s,Fv=s=>s&&typeof s.toPromise=="function",Nm=s=>Fv(s)?s.toPromise():Promise.resolve(s),Iv=s=>s&&Promise.resolve(s)===s,ui=()=>document.body.querySelector(`.${rt.container}`),wm=s=>{const t=ui();return t?t.querySelector(s):null},gl=s=>wm(`.${s}`),oa=()=>gl(rt.popup),Jh=()=>gl(rt.icon),ZT=()=>gl(rt["icon-content"]),YS=()=>gl(rt.title),Ov=()=>gl(rt["html-container"]),KS=()=>gl(rt.image),Mv=()=>gl(rt["progress-steps"]),tx=()=>gl(rt["validation-message"]),nc=()=>wm(`.${rt.actions} .${rt.confirm}`),Zh=()=>wm(`.${rt.actions} .${rt.cancel}`),$u=()=>wm(`.${rt.actions} .${rt.deny}`),e6=()=>gl(rt["input-label"]),ef=()=>wm(`.${rt.loader}`),_m=()=>gl(rt.actions),XS=()=>gl(rt.footer),sx=()=>gl(rt["timer-progress-bar"]),Rv=()=>gl(rt.close),t6=`
  a[href],
  area[href],
  input:not([disabled]),
  select:not([disabled]),
  textarea:not([disabled]),
  button:not([disabled]),
  iframe,
  object,
  embed,
  [tabindex="0"],
  [contenteditable],
  audio[controls],
  video[controls],
  summary
`,Bv=()=>{const s=oa();if(!s)return[];const t=s.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),a=Array.from(t).sort((i,o)=>{const c=parseInt(i.getAttribute("tabindex")||"0"),u=parseInt(o.getAttribute("tabindex")||"0");return c>u?1:c<u?-1:0}),n=s.querySelectorAll(t6),r=Array.from(n).filter(i=>i.getAttribute("tabindex")!=="-1");return[...new Set(a.concat(r))].filter(i=>Wi(i))},zv=()=>td(document.body,rt.shown)&&!td(document.body,rt["toast-shown"])&&!td(document.body,rt["no-backdrop"]),ax=()=>{const s=oa();return s?td(s,rt.toast):!1},s6=()=>{const s=oa();return s?s.hasAttribute("data-loading"):!1},xl=(s,t)=>{if(s.textContent="",t){const n=new DOMParser().parseFromString(t,"text/html"),r=n.querySelector("head");r&&Array.from(r.childNodes).forEach(o=>{s.appendChild(o)});const i=n.querySelector("body");i&&Array.from(i.childNodes).forEach(o=>{o instanceof HTMLVideoElement||o instanceof HTMLAudioElement?s.appendChild(o.cloneNode(!0)):s.appendChild(o)})}},td=(s,t)=>{if(!t)return!1;const a=t.split(/\s+/);for(let n=0;n<a.length;n++)if(!s.classList.contains(a[n]))return!1;return!0},a6=(s,t)=>{Array.from(s.classList).forEach(a=>{!Object.values(rt).includes(a)&&!Object.values(jg).includes(a)&&!Object.values(t.showClass||{}).includes(a)&&s.classList.remove(a)})},pl=(s,t,a)=>{if(a6(s,t),!t.customClass)return;const n=t.customClass[a];if(n){if(typeof n!="string"&&!n.forEach){di(`Invalid type of customClass.${a}! Expected string or iterable object, got "${typeof n}"`);return}da(s,n)}},nx=(s,t)=>{if(!t)return null;switch(t){case"select":case"textarea":case"file":return s.querySelector(`.${rt.popup} > .${rt[t]}`);case"checkbox":return s.querySelector(`.${rt.popup} > .${rt.checkbox} input`);case"radio":return s.querySelector(`.${rt.popup} > .${rt.radio} input:checked`)||s.querySelector(`.${rt.popup} > .${rt.radio} input:first-child`);case"range":return s.querySelector(`.${rt.popup} > .${rt.range} input`);default:return s.querySelector(`.${rt.popup} > .${rt.input}`)}},GS=s=>{if(s.focus(),s.type!=="file"){const t=s.value;s.value="",s.value=t}},QS=(s,t,a)=>{!s||!t||(typeof t=="string"&&(t=t.split(/\s+/).filter(Boolean)),t.forEach(n=>{Array.isArray(s)?s.forEach(r=>{a?r.classList.add(n):r.classList.remove(n)}):a?s.classList.add(n):s.classList.remove(n)}))},da=(s,t)=>{QS(s,t,!0)},Ul=(s,t)=>{QS(s,t,!1)},zd=(s,t)=>{const a=Array.from(s.children);for(let n=0;n<a.length;n++){const r=a[n];if(r instanceof HTMLElement&&td(r,t))return r}},Tu=(s,t,a)=>{a===`${parseInt(`${a}`)}`&&(a=parseInt(a)),a||parseInt(`${a}`)===0?s.style.setProperty(t,typeof a=="number"?`${a}px`:a):s.style.removeProperty(t)},br=(s,t="flex")=>{s&&(s.style.display=t)},ei=s=>{s&&(s.style.display="none")},qv=(s,t="block")=>{s&&new MutationObserver(()=>{Sm(s,s.innerHTML,t)}).observe(s,{childList:!0,subtree:!0})},L1=(s,t,a,n)=>{const r=s.querySelector(t);r&&r.style.setProperty(a,n)},Sm=(s,t,a="flex")=>{t?br(s,a):ei(s)},Wi=s=>!!(s&&(s.offsetWidth||s.offsetHeight||s.getClientRects().length)),n6=()=>!Wi(nc())&&!Wi($u())&&!Wi(Zh()),Uy=s=>s.scrollHeight>s.clientHeight,r6=(s,t)=>{let a=s;for(;a&&a!==t;){if(Uy(a))return!0;a=a.parentElement}return!1},JS=s=>{const t=window.getComputedStyle(s),a=parseFloat(t.getPropertyValue("animation-duration")||"0"),n=parseFloat(t.getPropertyValue("transition-duration")||"0");return a>0||n>0},Uv=(s,t=!1)=>{const a=sx();a&&Wi(a)&&(t&&(a.style.transition="none",a.style.width="100%"),setTimeout(()=>{a.style.transition=`width ${s/1e3}s linear`,a.style.width="0%"},10))},i6=()=>{const s=sx();if(!s)return;const t=parseInt(window.getComputedStyle(s).width);s.style.removeProperty("transition"),s.style.width="100%";const a=parseInt(window.getComputedStyle(s).width),n=t/a*100;s.style.width=`${n}%`},l6=()=>typeof window>"u"||typeof document>"u",o6=`
 <div aria-labelledby="${rt.title}" aria-describedby="${rt["html-container"]}" class="${rt.popup}" tabindex="-1">
   <button type="button" class="${rt.close}"></button>
   <ul class="${rt["progress-steps"]}"></ul>
   <div class="${rt.icon}"></div>
   <img class="${rt.image}" />
   <h2 class="${rt.title}" id="${rt.title}"></h2>
   <div class="${rt["html-container"]}" id="${rt["html-container"]}"></div>
   <input class="${rt.input}" id="${rt.input}" />
   <input type="file" class="${rt.file}" />
   <div class="${rt.range}">
     <input type="range" />
     <output></output>
   </div>
   <select class="${rt.select}" id="${rt.select}"></select>
   <div class="${rt.radio}"></div>
   <label class="${rt.checkbox}">
     <input type="checkbox" id="${rt.checkbox}" />
     <span class="${rt.label}"></span>
   </label>
   <textarea class="${rt.textarea}" id="${rt.textarea}"></textarea>
   <div class="${rt["validation-message"]}" id="${rt["validation-message"]}"></div>
   <div class="${rt.actions}">
     <div class="${rt.loader}"></div>
     <button type="button" class="${rt.confirm}"></button>
     <button type="button" class="${rt.deny}"></button>
     <button type="button" class="${rt.cancel}"></button>
   </div>
   <div class="${rt.footer}"></div>
   <div class="${rt["timer-progress-bar-container"]}">
     <div class="${rt["timer-progress-bar"]}"></div>
   </div>
 </div>
`.replace(/(^|\n)\s*/g,""),c6=()=>{const s=ui();return s?(s.remove(),Ul([document.documentElement,document.body],[rt["no-backdrop"],rt["toast-shown"],rt["has-column"]]),!0):!1},gu=()=>{us.currentInstance.resetValidationMessage()},d6=()=>{const s=oa(),t=zd(s,rt.input),a=zd(s,rt.file),n=s.querySelector(`.${rt.range} input`),r=s.querySelector(`.${rt.range} output`),i=zd(s,rt.select),o=s.querySelector(`.${rt.checkbox} input`),c=zd(s,rt.textarea);t.oninput=gu,a.onchange=gu,i.onchange=gu,o.onchange=gu,c.oninput=gu,n.oninput=()=>{gu(),r.value=n.value},n.onchange=()=>{gu(),r.value=n.value}},u6=s=>typeof s=="string"?document.querySelector(s):s,h6=s=>{const t=oa();t.setAttribute("role",s.toast?"alert":"dialog"),t.setAttribute("aria-live",s.toast?"polite":"assertive"),s.toast||t.setAttribute("aria-modal","true")},f6=s=>{window.getComputedStyle(s).direction==="rtl"&&da(ui(),rt.rtl)},m6=s=>{const t=c6();if(l6()){Hu("SweetAlert2 requires document to initialize");return}const a=document.createElement("div");a.className=rt.container,t&&da(a,rt["no-transition"]),xl(a,o6),a.dataset.swal2Theme=s.theme;const n=u6(s.target);n.appendChild(a),s.topLayer&&(a.setAttribute("popover",""),a.showPopover()),h6(s),f6(n),d6()},Hv=(s,t)=>{s instanceof HTMLElement?t.appendChild(s):typeof s=="object"?p6(s,t):s&&xl(t,s)},p6=(s,t)=>{s.jquery?g6(t,s):xl(t,s.toString())},g6=(s,t)=>{if(s.textContent="",0 in t)for(let a=0;a in t;a++)s.appendChild(t[a].cloneNode(!0));else s.appendChild(t.cloneNode(!0))},x6=(s,t)=>{const a=_m(),n=ef();!a||!n||(!t.showConfirmButton&&!t.showDenyButton&&!t.showCancelButton?ei(a):br(a),pl(a,t,"actions"),b6(a,n,t),xl(n,t.loaderHtml||""),pl(n,t,"loader"))};function b6(s,t,a){const n=nc(),r=$u(),i=Zh();!n||!r||!i||(Bb(n,"confirm",a),Bb(r,"deny",a),Bb(i,"cancel",a),y6(n,r,i,a),a.reverseButtons&&(a.toast?(s.insertBefore(i,n),s.insertBefore(r,n)):(s.insertBefore(i,t),s.insertBefore(r,t),s.insertBefore(n,t))))}function y6(s,t,a,n){if(!n.buttonsStyling){Ul([s,t,a],rt.styled);return}da([s,t,a],rt.styled),n.confirmButtonColor&&s.style.setProperty("--swal2-confirm-button-background-color",n.confirmButtonColor),n.denyButtonColor&&t.style.setProperty("--swal2-deny-button-background-color",n.denyButtonColor),n.cancelButtonColor&&a.style.setProperty("--swal2-cancel-button-background-color",n.cancelButtonColor),Rb(s),Rb(t),Rb(a)}function Rb(s){const t=window.getComputedStyle(s);if(t.getPropertyValue("--swal2-action-button-focus-box-shadow"))return;const a=t.backgroundColor.replace(/rgba?\((\d+), (\d+), (\d+).*/,"rgba($1, $2, $3, 0.5)");s.style.setProperty("--swal2-action-button-focus-box-shadow",t.getPropertyValue("--swal2-outline").replace(/ rgba\(.*/,` ${a}`))}function Bb(s,t,a){const n=Pv(t);Sm(s,a[`show${n}Button`],"inline-block"),xl(s,a[`${t}ButtonText`]||""),s.setAttribute("aria-label",a[`${t}ButtonAriaLabel`]||""),s.className=rt[t],pl(s,a,`${t}Button`)}const v6=(s,t)=>{const a=Rv();a&&(xl(a,t.closeButtonHtml||""),pl(a,t,"closeButton"),Sm(a,t.showCloseButton),a.setAttribute("aria-label",t.closeButtonAriaLabel||""))},j6=(s,t)=>{const a=ui();a&&(N6(a,t.backdrop),w6(a,t.position),_6(a,t.grow),pl(a,t,"container"))};function N6(s,t){typeof t=="string"?s.style.background=t:t||da([document.documentElement,document.body],rt["no-backdrop"])}function w6(s,t){t&&(t in rt?da(s,rt[t]):(di('The "position" parameter is not valid, defaulting to "center"'),da(s,rt.center)))}function _6(s,t){t&&da(s,rt[`grow-${t}`])}var Ba={innerParams:new WeakMap,domCache:new WeakMap};const S6=["input","file","range","select","radio","checkbox","textarea"],C6=(s,t)=>{const a=oa();if(!a)return;const n=Ba.innerParams.get(s),r=!n||t.input!==n.input;S6.forEach(i=>{const o=zd(a,rt[i]);o&&(D6(i,t.inputAttributes),o.className=rt[i],r&&ei(o))}),t.input&&(r&&A6(t),E6(t))},A6=s=>{if(!s.input)return;if(!Cn[s.input]){Hu(`Unexpected type of input! Expected ${Object.keys(Cn).join(" | ")}, got "${s.input}"`);return}const t=ZS(s.input);if(!t)return;const a=Cn[s.input](t,s);br(t),s.inputAutoFocus&&setTimeout(()=>{GS(a)})},k6=s=>{for(let t=0;t<s.attributes.length;t++){const a=s.attributes[t].name;["id","type","value","style"].includes(a)||s.removeAttribute(a)}},D6=(s,t)=>{const a=oa();if(!a)return;const n=nx(a,s);if(n){k6(n);for(const r in t)n.setAttribute(r,t[r])}},E6=s=>{if(!s.input)return;const t=ZS(s.input);t&&pl(t,s,"input")},$v=(s,t)=>{!s.placeholder&&t.inputPlaceholder&&(s.placeholder=t.inputPlaceholder)},Cm=(s,t,a)=>{if(a.inputLabel){const n=document.createElement("label"),r=rt["input-label"];n.setAttribute("for",s.id),n.className=r,typeof a.customClass=="object"&&da(n,a.customClass.inputLabel),n.innerText=a.inputLabel,t.insertAdjacentElement("beforebegin",n)}},ZS=s=>{const t=oa();if(t)return zd(t,rt[s]||rt.input)},Ng=(s,t)=>{["string","number"].includes(typeof t)?s.value=`${t}`:Iv(t)||di(`Unexpected type of inputValue! Expected "string", "number" or "Promise", got "${typeof t}"`)},Cn={};Cn.text=Cn.email=Cn.password=Cn.number=Cn.tel=Cn.url=Cn.search=Cn.date=Cn["datetime-local"]=Cn.time=Cn.week=Cn.month=(s,t)=>(Ng(s,t.inputValue),Cm(s,s,t),$v(s,t),s.type=t.input,s);Cn.file=(s,t)=>(Cm(s,s,t),$v(s,t),s);Cn.range=(s,t)=>{const a=s.querySelector("input"),n=s.querySelector("output");return Ng(a,t.inputValue),a.type=t.input,Ng(n,t.inputValue),Cm(a,s,t),s};Cn.select=(s,t)=>{if(s.textContent="",t.inputPlaceholder){const a=document.createElement("option");xl(a,t.inputPlaceholder),a.value="",a.disabled=!0,a.selected=!0,s.appendChild(a)}return Cm(s,s,t),s};Cn.radio=s=>(s.textContent="",s);Cn.checkbox=(s,t)=>{const a=nx(oa(),"checkbox");a.value="1",a.checked=!!t.inputValue;const n=s.querySelector("span");return xl(n,t.inputPlaceholder||t.inputLabel),a};Cn.textarea=(s,t)=>{Ng(s,t.inputValue),$v(s,t),Cm(s,s,t);const a=n=>parseInt(window.getComputedStyle(n).marginLeft)+parseInt(window.getComputedStyle(n).marginRight);return setTimeout(()=>{if("MutationObserver"in window){const n=parseInt(window.getComputedStyle(oa()).width),r=()=>{if(!document.body.contains(s))return;const i=s.offsetWidth+a(s);i>n?oa().style.width=`${i}px`:Tu(oa(),"width",t.width)};new MutationObserver(r).observe(s,{attributes:!0,attributeFilter:["style"]})}}),s};const T6=(s,t)=>{const a=Ov();a&&(qv(a),pl(a,t,"htmlContainer"),t.html?(Hv(t.html,a),br(a,"block")):t.text?(a.textContent=t.text,br(a,"block")):ei(a),C6(s,t))},L6=(s,t)=>{const a=XS();a&&(qv(a),Sm(a,!!t.footer,"block"),t.footer&&Hv(t.footer,a),pl(a,t,"footer"))},P6=(s,t)=>{const a=Ba.innerParams.get(s),n=Jh();if(!n)return;if(a&&t.icon===a.icon){F1(n,t),P1(n,t);return}if(!t.icon&&!t.iconHtml){ei(n);return}if(t.icon&&Object.keys(jg).indexOf(t.icon)===-1){Hu(`Unknown icon! Expected "success", "error", "warning", "info" or "question", got "${t.icon}"`),ei(n);return}br(n),F1(n,t),P1(n,t),da(n,t.showClass&&t.showClass.icon),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",eC)},P1=(s,t)=>{for(const[a,n]of Object.entries(jg))t.icon!==a&&Ul(s,n);da(s,t.icon&&jg[t.icon]),O6(s,t),eC(),pl(s,t,"icon")},eC=()=>{const s=oa();if(!s)return;const t=window.getComputedStyle(s).getPropertyValue("background-color"),a=s.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let n=0;n<a.length;n++)a[n].style.backgroundColor=t},F6=s=>`
  ${s.animation?'<div class="swal2-success-circular-line-left"></div>':""}
  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>
  <div class="swal2-success-ring"></div>
  ${s.animation?'<div class="swal2-success-fix"></div>':""}
  ${s.animation?'<div class="swal2-success-circular-line-right"></div>':""}
`,I6=`
  <span class="swal2-x-mark">
    <span class="swal2-x-mark-line-left"></span>
    <span class="swal2-x-mark-line-right"></span>
  </span>
`,F1=(s,t)=>{if(!t.icon&&!t.iconHtml)return;let a=s.innerHTML,n="";t.iconHtml?n=I1(t.iconHtml):t.icon==="success"?(n=F6(t),a=a.replace(/ style=".*?"/g,"")):t.icon==="error"?n=I6:t.icon&&(n=I1({question:"?",warning:"!",info:"i"}[t.icon])),a.trim()!==n.trim()&&xl(s,n)},O6=(s,t)=>{if(t.iconColor){s.style.color=t.iconColor,s.style.borderColor=t.iconColor;for(const a of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])L1(s,a,"background-color",t.iconColor);L1(s,".swal2-success-ring","border-color",t.iconColor)}},I1=s=>`<div class="${rt["icon-content"]}">${s}</div>`,M6=(s,t)=>{const a=KS();if(a){if(!t.imageUrl){ei(a);return}br(a,""),a.setAttribute("src",t.imageUrl),a.setAttribute("alt",t.imageAlt||""),Tu(a,"width",t.imageWidth),Tu(a,"height",t.imageHeight),a.className=rt.image,pl(a,t,"image")}};let Vv=!1,tC=0,sC=0,aC=0,nC=0;const R6=s=>{s.addEventListener("mousedown",wg),document.body.addEventListener("mousemove",_g),s.addEventListener("mouseup",Sg),s.addEventListener("touchstart",wg),document.body.addEventListener("touchmove",_g),s.addEventListener("touchend",Sg)},B6=s=>{s.removeEventListener("mousedown",wg),document.body.removeEventListener("mousemove",_g),s.removeEventListener("mouseup",Sg),s.removeEventListener("touchstart",wg),document.body.removeEventListener("touchmove",_g),s.removeEventListener("touchend",Sg)},wg=s=>{const t=oa();if(s.target===t||Jh().contains(s.target)){Vv=!0;const a=rC(s);tC=a.clientX,sC=a.clientY,aC=parseInt(t.style.insetInlineStart)||0,nC=parseInt(t.style.insetBlockStart)||0,da(t,"swal2-dragging")}},_g=s=>{const t=oa();if(Vv){let{clientX:a,clientY:n}=rC(s);t.style.insetInlineStart=`${aC+(a-tC)}px`,t.style.insetBlockStart=`${nC+(n-sC)}px`}},Sg=()=>{const s=oa();Vv=!1,Ul(s,"swal2-dragging")},rC=s=>{let t=0,a=0;return s.type.startsWith("mouse")?(t=s.clientX,a=s.clientY):s.type.startsWith("touch")&&(t=s.touches[0].clientX,a=s.touches[0].clientY),{clientX:t,clientY:a}},z6=(s,t)=>{const a=ui(),n=oa();if(!(!a||!n)){if(t.toast){Tu(a,"width",t.width),n.style.width="100%";const r=ef();r&&n.insertBefore(r,Jh())}else Tu(n,"width",t.width);Tu(n,"padding",t.padding),t.color&&(n.style.color=t.color),t.background&&(n.style.background=t.background),ei(tx()),q6(n,t),t.draggable&&!t.toast?(da(n,rt.draggable),R6(n)):(Ul(n,rt.draggable),B6(n))}},q6=(s,t)=>{const a=t.showClass||{};s.className=`${rt.popup} ${Wi(s)?a.popup:""}`,t.toast?(da([document.documentElement,document.body],rt["toast-shown"]),da(s,rt.toast)):da(s,rt.modal),pl(s,t,"popup"),typeof t.customClass=="string"&&da(s,t.customClass),t.icon&&da(s,rt[`icon-${t.icon}`])},U6=(s,t)=>{const a=Mv();if(!a)return;const{progressSteps:n,currentProgressStep:r}=t;if(!n||n.length===0||r===void 0){ei(a);return}br(a),a.textContent="",r>=n.length&&di("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),n.forEach((i,o)=>{const c=H6(i);if(a.appendChild(c),o===r&&da(c,rt["active-progress-step"]),o!==n.length-1){const u=$6(t);a.appendChild(u)}})},H6=s=>{const t=document.createElement("li");return da(t,rt["progress-step"]),xl(t,s),t},$6=s=>{const t=document.createElement("li");return da(t,rt["progress-step-line"]),s.progressStepsDistance&&Tu(t,"width",s.progressStepsDistance),t},V6=(s,t)=>{const a=YS();a&&(qv(a),Sm(a,!!(t.title||t.titleText),"block"),t.title&&Hv(t.title,a),t.titleText&&(a.innerText=t.titleText),pl(a,t,"title"))},iC=(s,t)=>{z6(s,t),j6(s,t),U6(s,t),P6(s,t),M6(s,t),V6(s,t),v6(s,t),T6(s,t),x6(s,t),L6(s,t);const a=oa();typeof t.didRender=="function"&&a&&t.didRender(a),us.eventEmitter.emit("didRender",a)},W6=()=>Wi(oa()),lC=()=>{var s;return(s=nc())===null||s===void 0?void 0:s.click()},Y6=()=>{var s;return(s=$u())===null||s===void 0?void 0:s.click()},K6=()=>{var s;return(s=Zh())===null||s===void 0?void 0:s.click()},tf=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),oC=s=>{s.keydownTarget&&s.keydownHandlerAdded&&(s.keydownTarget.removeEventListener("keydown",s.keydownHandler,{capture:s.keydownListenerCapture}),s.keydownHandlerAdded=!1)},X6=(s,t,a)=>{oC(s),t.toast||(s.keydownHandler=n=>Q6(t,n,a),s.keydownTarget=t.keydownListenerCapture?window:oa(),s.keydownListenerCapture=t.keydownListenerCapture,s.keydownTarget.addEventListener("keydown",s.keydownHandler,{capture:s.keydownListenerCapture}),s.keydownHandlerAdded=!0)},Hy=(s,t)=>{var a;const n=Bv();if(n.length){s=s+t,s===-2&&(s=n.length-1),s===n.length?s=0:s===-1&&(s=n.length-1),n[s].focus();return}(a=oa())===null||a===void 0||a.focus()},cC=["ArrowRight","ArrowDown"],G6=["ArrowLeft","ArrowUp"],Q6=(s,t,a)=>{s&&(t.isComposing||t.keyCode===229||(s.stopKeydownPropagation&&t.stopPropagation(),t.key==="Enter"?J6(t,s):t.key==="Tab"?Z6(t):[...cC,...G6].includes(t.key)?eL(t.key):t.key==="Escape"&&tL(t,s,a)))},J6=(s,t)=>{if(!ex(t.allowEnterKey))return;const a=nx(oa(),t.input);if(s.target&&a&&s.target instanceof HTMLElement&&s.target.outerHTML===a.outerHTML){if(["textarea","file"].includes(t.input))return;lC(),s.preventDefault()}},Z6=s=>{const t=s.target,a=Bv();let n=-1;for(let r=0;r<a.length;r++)if(t===a[r]){n=r;break}s.shiftKey?Hy(n,-1):Hy(n,1),s.stopPropagation(),s.preventDefault()},eL=s=>{const t=_m(),a=nc(),n=$u(),r=Zh();if(!t||!a||!n||!r)return;const i=[a,n,r];if(document.activeElement instanceof HTMLElement&&!i.includes(document.activeElement))return;const o=cC.includes(s)?"nextElementSibling":"previousElementSibling";let c=document.activeElement;if(c){for(let u=0;u<t.children.length;u++){if(c=c[o],!c)return;if(c instanceof HTMLButtonElement&&Wi(c))break}c instanceof HTMLButtonElement&&c.focus()}},tL=(s,t,a)=>{s.preventDefault(),ex(t.allowEscapeKey)&&a(tf.esc)};var Bh={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};const sL=()=>{const s=ui();Array.from(document.body.children).forEach(a=>{a.contains(s)||(a.hasAttribute("aria-hidden")&&a.setAttribute("data-previous-aria-hidden",a.getAttribute("aria-hidden")||""),a.setAttribute("aria-hidden","true"))})},dC=()=>{Array.from(document.body.children).forEach(t=>{t.hasAttribute("data-previous-aria-hidden")?(t.setAttribute("aria-hidden",t.getAttribute("data-previous-aria-hidden")||""),t.removeAttribute("data-previous-aria-hidden")):t.removeAttribute("aria-hidden")})},uC=typeof window<"u"&&!!window.GestureEvent,aL=()=>{if(uC&&!td(document.body,rt.iosfix)){const s=document.body.scrollTop;document.body.style.top=`${s*-1}px`,da(document.body,rt.iosfix),nL()}},nL=()=>{const s=ui();if(!s)return;let t;s.ontouchstart=a=>{t=rL(a)},s.ontouchmove=a=>{t&&(a.preventDefault(),a.stopPropagation())}},rL=s=>{const t=s.target,a=ui(),n=Ov();return!a||!n||iL(s)||lL(s)?!1:t===a||!Uy(a)&&t instanceof HTMLElement&&!r6(t,n)&&t.tagName!=="INPUT"&&t.tagName!=="TEXTAREA"&&!(Uy(n)&&n.contains(t))},iL=s=>s.touches&&s.touches.length&&s.touches[0].touchType==="stylus",lL=s=>s.touches&&s.touches.length>1,oL=()=>{if(td(document.body,rt.iosfix)){const s=parseInt(document.body.style.top,10);Ul(document.body,rt.iosfix),document.body.style.top="",document.body.scrollTop=s*-1}},cL=()=>{const s=document.createElement("div");s.className=rt["scrollbar-measure"],document.body.appendChild(s);const t=s.getBoundingClientRect().width-s.clientWidth;return document.body.removeChild(s),t};let Eh=null;const dL=s=>{Eh===null&&(document.body.scrollHeight>window.innerHeight||s==="scroll")&&(Eh=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight=`${Eh+cL()}px`)},uL=()=>{Eh!==null&&(document.body.style.paddingRight=`${Eh}px`,Eh=null)};function hC(s,t,a,n){ax()?O1(s,n):(XT(a).then(()=>O1(s,n)),oC(us)),uC?(t.setAttribute("style","display:none !important"),t.removeAttribute("class"),t.innerHTML=""):t.remove(),zv()&&(uL(),oL(),dC()),hL()}function hL(){Ul([document.documentElement,document.body],[rt.shown,rt["height-auto"],rt["no-backdrop"],rt["toast-shown"]])}function qd(s){s=mL(s);const t=Bh.swalPromiseResolve.get(this),a=fL(this);this.isAwaitingPromise?s.isDismissed||(Am(this),t(s)):a&&t(s)}const fL=s=>{const t=oa();if(!t)return!1;const a=Ba.innerParams.get(s);if(!a||td(t,a.hideClass.popup))return!1;Ul(t,a.showClass.popup),da(t,a.hideClass.popup);const n=ui();return Ul(n,a.showClass.backdrop),da(n,a.hideClass.backdrop),pL(s,t,a),!0};function fC(s){const t=Bh.swalPromiseReject.get(this);Am(this),t&&t(s)}const Am=s=>{s.isAwaitingPromise&&(delete s.isAwaitingPromise,Ba.innerParams.get(s)||s._destroy())},mL=s=>typeof s>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},s),pL=(s,t,a)=>{var n;const r=ui(),i=JS(t);typeof a.willClose=="function"&&a.willClose(t),(n=us.eventEmitter)===null||n===void 0||n.emit("willClose",t),i?gL(s,t,r,a.returnFocus,a.didClose):hC(s,r,a.returnFocus,a.didClose)},gL=(s,t,a,n,r)=>{us.swalCloseEventFinishedCallback=hC.bind(null,s,a,n,r);const i=function(o){if(o.target===t){var c;(c=us.swalCloseEventFinishedCallback)===null||c===void 0||c.call(us),delete us.swalCloseEventFinishedCallback,t.removeEventListener("animationend",i),t.removeEventListener("transitionend",i)}};t.addEventListener("animationend",i),t.addEventListener("transitionend",i)},O1=(s,t)=>{setTimeout(()=>{var a;typeof t=="function"&&t.bind(s.params)(),(a=us.eventEmitter)===null||a===void 0||a.emit("didClose"),s._destroy&&s._destroy()})},zh=s=>{let t=oa();if(t||new W,t=oa(),!t)return;const a=ef();ax()?ei(Jh()):xL(t,s),br(a),t.setAttribute("data-loading","true"),t.setAttribute("aria-busy","true"),t.focus()},xL=(s,t)=>{const a=_m(),n=ef();!a||!n||(!t&&Wi(nc())&&(t=nc()),br(a),t&&(ei(t),n.setAttribute("data-button-to-replace",t.className),a.insertBefore(n,t)),da([s,a],rt.loading))},bL=(s,t)=>{t.input==="select"||t.input==="radio"?wL(s,t):["text","email","number","tel","textarea"].some(a=>a===t.input)&&(Fv(t.inputValue)||Iv(t.inputValue))&&(zh(nc()),_L(s,t))},yL=(s,t)=>{const a=s.getInput();if(!a)return null;switch(t.input){case"checkbox":return vL(a);case"radio":return jL(a);case"file":return NL(a);default:return t.inputAutoTrim?a.value.trim():a.value}},vL=s=>s.checked?1:0,jL=s=>s.checked?s.value:null,NL=s=>s.files&&s.files.length?s.getAttribute("multiple")!==null?s.files:s.files[0]:null,wL=(s,t)=>{const a=oa();if(!a)return;const n=r=>{t.input==="select"?SL(a,Cg(r),t):t.input==="radio"&&CL(a,Cg(r),t)};Fv(t.inputOptions)||Iv(t.inputOptions)?(zh(nc()),Nm(t.inputOptions).then(r=>{s.hideLoading(),n(r)})):typeof t.inputOptions=="object"?n(t.inputOptions):Hu(`Unexpected type of inputOptions! Expected object, Map or Promise, got ${typeof t.inputOptions}`)},_L=(s,t)=>{const a=s.getInput();a&&(ei(a),Nm(t.inputValue).then(n=>{a.value=t.input==="number"?`${parseFloat(n)||0}`:`${n}`,br(a),a.focus(),s.hideLoading()}).catch(n=>{Hu(`Error in inputValue promise: ${n}`),a.value="",br(a),a.focus(),s.hideLoading()}))};function SL(s,t,a){const n=zd(s,rt.select);if(!n)return;const r=(i,o,c)=>{const u=document.createElement("option");u.value=c,xl(u,o),u.selected=mC(c,a.inputValue),i.appendChild(u)};t.forEach(i=>{const o=i[0],c=i[1];if(Array.isArray(c)){const u=document.createElement("optgroup");u.label=o,u.disabled=!1,n.appendChild(u),c.forEach(h=>r(u,h[1],h[0]))}else r(n,c,o)}),n.focus()}function CL(s,t,a){const n=zd(s,rt.radio);if(!n)return;t.forEach(i=>{const o=i[0],c=i[1],u=document.createElement("input"),h=document.createElement("label");u.type="radio",u.name=rt.radio,u.value=o,mC(o,a.inputValue)&&(u.checked=!0);const m=document.createElement("span");xl(m,c),m.className=rt.label,h.appendChild(u),h.appendChild(m),n.appendChild(h)});const r=n.querySelectorAll("input");r.length&&r[0].focus()}const Cg=s=>{const t=[];return s instanceof Map?s.forEach((a,n)=>{let r=a;typeof r=="object"&&(r=Cg(r)),t.push([n,r])}):Object.keys(s).forEach(a=>{let n=s[a];typeof n=="object"&&(n=Cg(n)),t.push([a,n])}),t},mC=(s,t)=>!!t&&t.toString()===s.toString(),AL=s=>{const t=Ba.innerParams.get(s);s.disableButtons(),t.input?pC(s,"confirm"):Yv(s,!0)},kL=s=>{const t=Ba.innerParams.get(s);s.disableButtons(),t.returnInputValueOnDeny?pC(s,"deny"):Wv(s,!1)},DL=(s,t)=>{s.disableButtons(),t(tf.cancel)},pC=(s,t)=>{const a=Ba.innerParams.get(s);if(!a.input){Hu(`The "input" parameter is needed to be set when using returnInputValueOn${Pv(t)}`);return}const n=s.getInput(),r=yL(s,a);a.inputValidator?EL(s,r,t):n&&!n.checkValidity()?(s.enableButtons(),s.showValidationMessage(a.validationMessage||n.validationMessage)):t==="deny"?Wv(s,r):Yv(s,r)},EL=(s,t,a)=>{const n=Ba.innerParams.get(s);s.disableInput(),Promise.resolve().then(()=>Nm(n.inputValidator(t,n.validationMessage))).then(i=>{s.enableButtons(),s.enableInput(),i?s.showValidationMessage(i):a==="deny"?Wv(s,t):Yv(s,t)})},Wv=(s,t)=>{const a=Ba.innerParams.get(s||void 0);a.showLoaderOnDeny&&zh($u()),a.preDeny?(s.isAwaitingPromise=!0,Promise.resolve().then(()=>Nm(a.preDeny(t,a.validationMessage))).then(r=>{r===!1?(s.hideLoading(),Am(s)):s.close({isDenied:!0,value:typeof r>"u"?t:r})}).catch(r=>gC(s||void 0,r))):s.close({isDenied:!0,value:t})},M1=(s,t)=>{s.close({isConfirmed:!0,value:t})},gC=(s,t)=>{s.rejectPromise(t)},Yv=(s,t)=>{const a=Ba.innerParams.get(s||void 0);a.showLoaderOnConfirm&&zh(),a.preConfirm?(s.resetValidationMessage(),s.isAwaitingPromise=!0,Promise.resolve().then(()=>Nm(a.preConfirm(t,a.validationMessage))).then(r=>{Wi(tx())||r===!1?(s.hideLoading(),Am(s)):M1(s,typeof r>"u"?t:r)}).catch(r=>gC(s||void 0,r))):M1(s,t)};function Ag(){const s=Ba.innerParams.get(this);if(!s)return;const t=Ba.domCache.get(this);ei(t.loader),ax()?s.icon&&br(Jh()):TL(t),Ul([t.popup,t.actions],rt.loading),t.popup.removeAttribute("aria-busy"),t.popup.removeAttribute("data-loading"),t.confirmButton.disabled=!1,t.denyButton.disabled=!1,t.cancelButton.disabled=!1}const TL=s=>{const t=s.popup.getElementsByClassName(s.loader.getAttribute("data-button-to-replace"));t.length?br(t[0],"inline-block"):n6()&&ei(s.actions)};function xC(){const s=Ba.innerParams.get(this),t=Ba.domCache.get(this);return t?nx(t.popup,s.input):null}function bC(s,t,a){const n=Ba.domCache.get(s);t.forEach(r=>{n[r].disabled=a})}function yC(s,t){const a=oa();if(!(!a||!s))if(s.type==="radio"){const n=a.querySelectorAll(`[name="${rt.radio}"]`);for(let r=0;r<n.length;r++)n[r].disabled=t}else s.disabled=t}function vC(){bC(this,["confirmButton","denyButton","cancelButton"],!1)}function jC(){bC(this,["confirmButton","denyButton","cancelButton"],!0)}function NC(){yC(this.getInput(),!1)}function wC(){yC(this.getInput(),!0)}function _C(s){const t=Ba.domCache.get(this),a=Ba.innerParams.get(this);xl(t.validationMessage,s),t.validationMessage.className=rt["validation-message"],a.customClass&&a.customClass.validationMessage&&da(t.validationMessage,a.customClass.validationMessage),br(t.validationMessage);const n=this.getInput();n&&(n.setAttribute("aria-invalid","true"),n.setAttribute("aria-describedby",rt["validation-message"]),GS(n),da(n,rt.inputerror))}function SC(){const s=Ba.domCache.get(this);s.validationMessage&&ei(s.validationMessage);const t=this.getInput();t&&(t.removeAttribute("aria-invalid"),t.removeAttribute("aria-describedby"),Ul(t,rt.inputerror))}const Th={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,draggable:!1,animation:!0,theme:"light",showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0,topLayer:!1},LL=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","draggable","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","theme","willClose"],PL={allowEnterKey:void 0},FL=["allowOutsideClick","allowEnterKey","backdrop","draggable","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],CC=s=>Object.prototype.hasOwnProperty.call(Th,s),AC=s=>LL.indexOf(s)!==-1,kC=s=>PL[s],IL=s=>{CC(s)||di(`Unknown parameter "${s}"`)},OL=s=>{FL.includes(s)&&di(`The parameter "${s}" is incompatible with toasts`)},ML=s=>{const t=kC(s);t&&WS(s,t)},DC=s=>{s.backdrop===!1&&s.allowOutsideClick&&di('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`'),s.theme&&!["light","dark","auto","minimal","borderless","bootstrap-4","bootstrap-4-light","bootstrap-4-dark","bootstrap-5","bootstrap-5-light","bootstrap-5-dark","material-ui","material-ui-light","material-ui-dark","embed-iframe","bulma","bulma-light","bulma-dark"].includes(s.theme)&&di(`Invalid theme "${s.theme}"`);for(const t in s)IL(t),s.toast&&OL(t),ML(t)};function EC(s){const t=ui(),a=oa(),n=Ba.innerParams.get(this);if(!a||td(a,n.hideClass.popup)){di("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");return}const r=RL(s),i=Object.assign({},n,r);DC(i),t.dataset.swal2Theme=i.theme,iC(this,i),Ba.innerParams.set(this,i),Object.defineProperties(this,{params:{value:Object.assign({},this.params,s),writable:!1,enumerable:!0}})}const RL=s=>{const t={};return Object.keys(s).forEach(a=>{AC(a)?t[a]=s[a]:di(`Invalid parameter to update: ${a}`)}),t};function TC(){const s=Ba.domCache.get(this),t=Ba.innerParams.get(this);if(!t){LC(this);return}s.popup&&us.swalCloseEventFinishedCallback&&(us.swalCloseEventFinishedCallback(),delete us.swalCloseEventFinishedCallback),typeof t.didDestroy=="function"&&t.didDestroy(),us.eventEmitter.emit("didDestroy"),BL(this)}const BL=s=>{LC(s),delete s.params,delete us.keydownHandler,delete us.keydownTarget,delete us.currentInstance},LC=s=>{s.isAwaitingPromise?(zb(Ba,s),s.isAwaitingPromise=!0):(zb(Bh,s),zb(Ba,s),delete s.isAwaitingPromise,delete s.disableButtons,delete s.enableButtons,delete s.getInput,delete s.disableInput,delete s.enableInput,delete s.hideLoading,delete s.disableLoading,delete s.showValidationMessage,delete s.resetValidationMessage,delete s.close,delete s.closePopup,delete s.closeModal,delete s.closeToast,delete s.rejectPromise,delete s.update,delete s._destroy)},zb=(s,t)=>{for(const a in s)s[a].delete(t)};var zL=Object.freeze({__proto__:null,_destroy:TC,close:qd,closeModal:qd,closePopup:qd,closeToast:qd,disableButtons:jC,disableInput:wC,disableLoading:Ag,enableButtons:vC,enableInput:NC,getInput:xC,handleAwaitingPromise:Am,hideLoading:Ag,rejectPromise:fC,resetValidationMessage:SC,showValidationMessage:_C,update:EC});const qL=(s,t,a)=>{s.toast?UL(s,t,a):($L(t),VL(t),WL(s,t,a))},UL=(s,t,a)=>{t.popup.onclick=()=>{s&&(HL(s)||s.timer||s.input)||a(tf.close)}},HL=s=>!!(s.showConfirmButton||s.showDenyButton||s.showCancelButton||s.showCloseButton);let kg=!1;const $L=s=>{s.popup.onmousedown=()=>{s.container.onmouseup=function(t){s.container.onmouseup=()=>{},t.target===s.container&&(kg=!0)}}},VL=s=>{s.container.onmousedown=t=>{t.target===s.container&&t.preventDefault(),s.popup.onmouseup=function(a){s.popup.onmouseup=()=>{},(a.target===s.popup||a.target instanceof HTMLElement&&s.popup.contains(a.target))&&(kg=!0)}}},WL=(s,t,a)=>{t.container.onclick=n=>{if(kg){kg=!1;return}n.target===t.container&&ex(s.allowOutsideClick)&&a(tf.backdrop)}},YL=s=>typeof s=="object"&&s.jquery,R1=s=>s instanceof Element||YL(s),KL=s=>{const t={};return typeof s[0]=="object"&&!R1(s[0])?Object.assign(t,s[0]):["title","html","icon"].forEach((a,n)=>{const r=s[n];typeof r=="string"||R1(r)?t[a]=r:r!==void 0&&Hu(`Unexpected type of ${a}! Expected "string" or "Element", got ${typeof r}`)}),t};function XL(...s){return new this(...s)}function GL(s){class t extends this{_main(n,r){return super._main(n,Object.assign({},s,r))}}return t}const QL=()=>us.timeout&&us.timeout.getTimerLeft(),PC=()=>{if(us.timeout)return i6(),us.timeout.stop()},FC=()=>{if(us.timeout){const s=us.timeout.start();return Uv(s),s}},JL=()=>{const s=us.timeout;return s&&(s.running?PC():FC())},ZL=s=>{if(us.timeout){const t=us.timeout.increase(s);return Uv(t,!0),t}},eP=()=>!!(us.timeout&&us.timeout.isRunning());let B1=!1;const $y={};function tP(s="data-swal-template"){$y[s]=this,B1||(document.body.addEventListener("click",sP),B1=!0)}const sP=s=>{for(let t=s.target;t&&t!==document;t=t.parentNode)for(const a in $y){const n=t.getAttribute(a);if(n){$y[a].fire({template:n});return}}};class aP{constructor(){this.events={}}_getHandlersByEventName(t){return typeof this.events[t]>"u"&&(this.events[t]=[]),this.events[t]}on(t,a){const n=this._getHandlersByEventName(t);n.includes(a)||n.push(a)}once(t,a){const n=(...r)=>{this.removeListener(t,n),a.apply(this,r)};this.on(t,n)}emit(t,...a){this._getHandlersByEventName(t).forEach(n=>{try{n.apply(this,a)}catch(r){console.error(r)}})}removeListener(t,a){const n=this._getHandlersByEventName(t),r=n.indexOf(a);r>-1&&n.splice(r,1)}removeAllListeners(t){this.events[t]!==void 0&&(this.events[t].length=0)}reset(){this.events={}}}us.eventEmitter=new aP;const nP=(s,t)=>{us.eventEmitter.on(s,t)},rP=(s,t)=>{us.eventEmitter.once(s,t)},iP=(s,t)=>{if(!s){us.eventEmitter.reset();return}t?us.eventEmitter.removeListener(s,t):us.eventEmitter.removeAllListeners(s)};var lP=Object.freeze({__proto__:null,argsToParams:KL,bindClickHandler:tP,clickCancel:K6,clickConfirm:lC,clickDeny:Y6,enableLoading:zh,fire:XL,getActions:_m,getCancelButton:Zh,getCloseButton:Rv,getConfirmButton:nc,getContainer:ui,getDenyButton:$u,getFocusableElements:Bv,getFooter:XS,getHtmlContainer:Ov,getIcon:Jh,getIconContent:ZT,getImage:KS,getInputLabel:e6,getLoader:ef,getPopup:oa,getProgressSteps:Mv,getTimerLeft:QL,getTimerProgressBar:sx,getTitle:YS,getValidationMessage:tx,increaseTimer:ZL,isDeprecatedParameter:kC,isLoading:s6,isTimerRunning:eP,isUpdatableParameter:AC,isValidParameter:CC,isVisible:W6,mixin:GL,off:iP,on:nP,once:rP,resumeTimer:FC,showLoading:zh,stopTimer:PC,toggleTimer:JL});class oP{constructor(t,a){this.callback=t,this.remaining=a,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date().getTime()-this.started.getTime()),this.remaining}increase(t){const a=this.running;return a&&this.stop(),this.remaining+=t,a&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const IC=["swal-title","swal-html","swal-footer"],cP=s=>{const t=typeof s.template=="string"?document.querySelector(s.template):s.template;if(!t)return{};const a=t.content;return xP(a),Object.assign(dP(a),uP(a),hP(a),fP(a),mP(a),pP(a),gP(a,IC))},dP=s=>{const t={};return Array.from(s.querySelectorAll("swal-param")).forEach(n=>{Ru(n,["name","value"]);const r=n.getAttribute("name"),i=n.getAttribute("value");!r||!i||(typeof Th[r]=="boolean"?t[r]=i!=="false":typeof Th[r]=="object"?t[r]=JSON.parse(i):t[r]=i)}),t},uP=s=>{const t={};return Array.from(s.querySelectorAll("swal-function-param")).forEach(n=>{const r=n.getAttribute("name"),i=n.getAttribute("value");!r||!i||(t[r]=new Function(`return ${i}`)())}),t},hP=s=>{const t={};return Array.from(s.querySelectorAll("swal-button")).forEach(n=>{Ru(n,["type","color","aria-label"]);const r=n.getAttribute("type");!r||!["confirm","cancel","deny"].includes(r)||(t[`${r}ButtonText`]=n.innerHTML,t[`show${Pv(r)}Button`]=!0,n.hasAttribute("color")&&(t[`${r}ButtonColor`]=n.getAttribute("color")),n.hasAttribute("aria-label")&&(t[`${r}ButtonAriaLabel`]=n.getAttribute("aria-label")))}),t},fP=s=>{const t={},a=s.querySelector("swal-image");return a&&(Ru(a,["src","width","height","alt"]),a.hasAttribute("src")&&(t.imageUrl=a.getAttribute("src")||void 0),a.hasAttribute("width")&&(t.imageWidth=a.getAttribute("width")||void 0),a.hasAttribute("height")&&(t.imageHeight=a.getAttribute("height")||void 0),a.hasAttribute("alt")&&(t.imageAlt=a.getAttribute("alt")||void 0)),t},mP=s=>{const t={},a=s.querySelector("swal-icon");return a&&(Ru(a,["type","color"]),a.hasAttribute("type")&&(t.icon=a.getAttribute("type")),a.hasAttribute("color")&&(t.iconColor=a.getAttribute("color")),t.iconHtml=a.innerHTML),t},pP=s=>{const t={},a=s.querySelector("swal-input");a&&(Ru(a,["type","label","placeholder","value"]),t.input=a.getAttribute("type")||"text",a.hasAttribute("label")&&(t.inputLabel=a.getAttribute("label")),a.hasAttribute("placeholder")&&(t.inputPlaceholder=a.getAttribute("placeholder")),a.hasAttribute("value")&&(t.inputValue=a.getAttribute("value")));const n=Array.from(s.querySelectorAll("swal-input-option"));return n.length&&(t.inputOptions={},n.forEach(r=>{Ru(r,["value"]);const i=r.getAttribute("value");if(!i)return;const o=r.innerHTML;t.inputOptions[i]=o})),t},gP=(s,t)=>{const a={};for(const n in t){const r=t[n],i=s.querySelector(r);i&&(Ru(i,[]),a[r.replace(/^swal-/,"")]=i.innerHTML.trim())}return a},xP=s=>{const t=IC.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(s.children).forEach(a=>{const n=a.tagName.toLowerCase();t.includes(n)||di(`Unrecognized element <${n}>`)})},Ru=(s,t)=>{Array.from(s.attributes).forEach(a=>{t.indexOf(a.name)===-1&&di([`Unrecognized attribute "${a.name}" on <${s.tagName.toLowerCase()}>.`,`${t.length?`Allowed attributes are: ${t.join(", ")}`:"To set the value, use HTML within the element."}`])})},OC=10,bP=s=>{const t=ui(),a=oa();typeof s.willOpen=="function"&&s.willOpen(a),us.eventEmitter.emit("willOpen",a);const r=window.getComputedStyle(document.body).overflowY;jP(t,a,s),setTimeout(()=>{yP(t,a)},OC),zv()&&(vP(t,s.scrollbarPadding,r),sL()),!ax()&&!us.previousActiveElement&&(us.previousActiveElement=document.activeElement),typeof s.didOpen=="function"&&setTimeout(()=>s.didOpen(a)),us.eventEmitter.emit("didOpen",a)},Dg=s=>{const t=oa();if(s.target!==t)return;const a=ui();t.removeEventListener("animationend",Dg),t.removeEventListener("transitionend",Dg),a.style.overflowY="auto",Ul(a,rt["no-transition"])},yP=(s,t)=>{JS(t)?(s.style.overflowY="hidden",t.addEventListener("animationend",Dg),t.addEventListener("transitionend",Dg)):s.style.overflowY="auto"},vP=(s,t,a)=>{aL(),t&&a!=="hidden"&&dL(a),setTimeout(()=>{s.scrollTop=0})},jP=(s,t,a)=>{da(s,a.showClass.backdrop),a.animation?(t.style.setProperty("opacity","0","important"),br(t,"grid"),setTimeout(()=>{da(t,a.showClass.popup),t.style.removeProperty("opacity")},OC)):br(t,"grid"),da([document.documentElement,document.body],rt.shown),a.heightAuto&&a.backdrop&&!a.toast&&da([document.documentElement,document.body],rt["height-auto"])};var z1={email:(s,t)=>/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(s)?Promise.resolve():Promise.resolve(t||"Invalid email address"),url:(s,t)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(s)?Promise.resolve():Promise.resolve(t||"Invalid URL")};function NP(s){s.inputValidator||(s.input==="email"&&(s.inputValidator=z1.email),s.input==="url"&&(s.inputValidator=z1.url))}function wP(s){(!s.target||typeof s.target=="string"&&!document.querySelector(s.target)||typeof s.target!="string"&&!s.target.appendChild)&&(di('Target parameter is not valid, defaulting to "body"'),s.target="body")}function _P(s){NP(s),s.showLoaderOnConfirm&&!s.preConfirm&&di(`showLoaderOnConfirm is set to true, but preConfirm is not defined.
showLoaderOnConfirm should be used together with preConfirm, see usage example:
https://sweetalert2.github.io/#ajax-request`),wP(s),typeof s.title=="string"&&(s.title=s.title.split(`
`).join("<br />")),m6(s)}let ec;var Cp=new WeakMap;class Tn{constructor(...t){if(VT(this,Cp,void 0),typeof window>"u")return;ec=this;const a=Object.freeze(this.constructor.argsToParams(t));this.params=a,this.isAwaitingPromise=!1,WT(Cp,this,this._main(ec.params))}_main(t,a={}){if(DC(Object.assign({},a,t)),us.currentInstance){const i=Bh.swalPromiseResolve.get(us.currentInstance),{isAwaitingPromise:o}=us.currentInstance;us.currentInstance._destroy(),o||i({isDismissed:!0}),zv()&&dC()}us.currentInstance=ec;const n=CP(t,a);_P(n),Object.freeze(n),us.timeout&&(us.timeout.stop(),delete us.timeout),clearTimeout(us.restoreFocusTimeout);const r=AP(ec);return iC(ec,n),Ba.innerParams.set(ec,n),SP(ec,r,n)}then(t){return E1(Cp,this).then(t)}finally(t){return E1(Cp,this).finally(t)}}const SP=(s,t,a)=>new Promise((n,r)=>{const i=o=>{s.close({isDismissed:!0,dismiss:o,isConfirmed:!1,isDenied:!1})};Bh.swalPromiseResolve.set(s,n),Bh.swalPromiseReject.set(s,r),t.confirmButton.onclick=()=>{AL(s)},t.denyButton.onclick=()=>{kL(s)},t.cancelButton.onclick=()=>{DL(s,i)},t.closeButton.onclick=()=>{i(tf.close)},qL(a,t,i),X6(us,a,i),bL(s,a),bP(a),kP(us,a,i),DP(t,a),setTimeout(()=>{t.container.scrollTop=0})}),CP=(s,t)=>{const a=cP(s),n=Object.assign({},Th,t,a,s);return n.showClass=Object.assign({},Th.showClass,n.showClass),n.hideClass=Object.assign({},Th.hideClass,n.hideClass),n.animation===!1&&(n.showClass={backdrop:"swal2-noanimation"},n.hideClass={}),n},AP=s=>{const t={popup:oa(),container:ui(),actions:_m(),confirmButton:nc(),denyButton:$u(),cancelButton:Zh(),loader:ef(),closeButton:Rv(),validationMessage:tx(),progressSteps:Mv()};return Ba.domCache.set(s,t),t},kP=(s,t,a)=>{const n=sx();ei(n),t.timer&&(s.timeout=new oP(()=>{a("timer"),delete s.timeout},t.timer),t.timerProgressBar&&(br(n),pl(n,t,"timerProgressBar"),setTimeout(()=>{s.timeout&&s.timeout.running&&Uv(t.timer)})))},DP=(s,t)=>{if(!t.toast){if(!ex(t.allowEnterKey)){WS("allowEnterKey"),LP();return}EP(s)||TP(s,t)||Hy(-1,1)}},EP=s=>{const t=Array.from(s.popup.querySelectorAll("[autofocus]"));for(const a of t)if(a instanceof HTMLElement&&Wi(a))return a.focus(),!0;return!1},TP=(s,t)=>t.focusDeny&&Wi(s.denyButton)?(s.denyButton.focus(),!0):t.focusCancel&&Wi(s.cancelButton)?(s.cancelButton.focus(),!0):t.focusConfirm&&Wi(s.confirmButton)?(s.confirmButton.focus(),!0):!1,LP=()=>{document.activeElement instanceof HTMLElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur()};Tn.prototype.disableButtons=jC;Tn.prototype.enableButtons=vC;Tn.prototype.getInput=xC;Tn.prototype.disableInput=wC;Tn.prototype.enableInput=NC;Tn.prototype.hideLoading=Ag;Tn.prototype.disableLoading=Ag;Tn.prototype.showValidationMessage=_C;Tn.prototype.resetValidationMessage=SC;Tn.prototype.close=qd;Tn.prototype.closePopup=qd;Tn.prototype.closeModal=qd;Tn.prototype.closeToast=qd;Tn.prototype.rejectPromise=fC;Tn.prototype.update=EC;Tn.prototype._destroy=TC;Object.assign(Tn,lP);Object.keys(zL).forEach(s=>{Tn[s]=function(...t){return ec&&ec[s]?ec[s](...t):null}});Tn.DismissReason=tf;Tn.version="11.26.3";const W=Tn;W.default=W;typeof document<"u"&&(function(s,t){var a=s.createElement("style");if(s.getElementsByTagName("head")[0].appendChild(a),a.styleSheet)a.styleSheet.disabled||(a.styleSheet.cssText=t);else try{a.innerHTML=t}catch{a.innerText=t}})(document,':root{--swal2-outline: 0 0 0 3px rgba(100, 150, 200, 0.5);--swal2-container-padding: 0.625em;--swal2-backdrop: rgba(0, 0, 0, 0.4);--swal2-backdrop-transition: background-color 0.15s;--swal2-width: 32em;--swal2-padding: 0 0 1.25em;--swal2-border: none;--swal2-border-radius: 0.3125rem;--swal2-background: white;--swal2-color: #545454;--swal2-show-animation: swal2-show 0.3s;--swal2-hide-animation: swal2-hide 0.15s forwards;--swal2-icon-zoom: 1;--swal2-icon-animations: true;--swal2-title-padding: 0.8em 1em 0;--swal2-html-container-padding: 1em 1.6em 0.3em;--swal2-input-border: 1px solid #d9d9d9;--swal2-input-border-radius: 0.1875em;--swal2-input-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px transparent;--swal2-input-background: transparent;--swal2-input-transition: border-color 0.2s, box-shadow 0.2s;--swal2-input-hover-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px transparent;--swal2-input-focus-border: 1px solid #b4dbed;--swal2-input-focus-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px rgba(100, 150, 200, 0.5);--swal2-progress-step-background: #add8e6;--swal2-validation-message-background: #f0f0f0;--swal2-validation-message-color: #666;--swal2-footer-border-color: #eee;--swal2-footer-background: transparent;--swal2-footer-color: inherit;--swal2-timer-progress-bar-background: rgba(0, 0, 0, 0.3);--swal2-close-button-position: initial;--swal2-close-button-inset: auto;--swal2-close-button-font-size: 2.5em;--swal2-close-button-color: #ccc;--swal2-close-button-transition: color 0.2s, box-shadow 0.2s;--swal2-close-button-outline: initial;--swal2-close-button-box-shadow: inset 0 0 0 3px transparent;--swal2-close-button-focus-box-shadow: inset var(--swal2-outline);--swal2-close-button-hover-transform: none;--swal2-actions-justify-content: center;--swal2-actions-width: auto;--swal2-actions-margin: 1.25em auto 0;--swal2-actions-padding: 0;--swal2-actions-border-radius: 0;--swal2-actions-background: transparent;--swal2-action-button-transition: background-color 0.2s, box-shadow 0.2s;--swal2-action-button-hover: black 10%;--swal2-action-button-active: black 10%;--swal2-confirm-button-box-shadow: none;--swal2-confirm-button-border-radius: 0.25em;--swal2-confirm-button-background-color: #7066e0;--swal2-confirm-button-color: #fff;--swal2-deny-button-box-shadow: none;--swal2-deny-button-border-radius: 0.25em;--swal2-deny-button-background-color: #dc3741;--swal2-deny-button-color: #fff;--swal2-cancel-button-box-shadow: none;--swal2-cancel-button-border-radius: 0.25em;--swal2-cancel-button-background-color: #6e7881;--swal2-cancel-button-color: #fff;--swal2-toast-show-animation: swal2-toast-show 0.5s;--swal2-toast-hide-animation: swal2-toast-hide 0.1s forwards;--swal2-toast-border: none;--swal2-toast-box-shadow: 0 0 1px hsl(0deg 0% 0% / 0.075), 0 1px 2px hsl(0deg 0% 0% / 0.075), 1px 2px 4px hsl(0deg 0% 0% / 0.075), 1px 3px 8px hsl(0deg 0% 0% / 0.075), 2px 4px 16px hsl(0deg 0% 0% / 0.075)}[data-swal2-theme=dark]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white);--swal2-timer-progress-bar-background: rgba(255, 255, 255, 0.7)}@media(prefers-color-scheme: dark){[data-swal2-theme=auto]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white);--swal2-timer-progress-bar-background: rgba(255, 255, 255, 0.7)}}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px var(--swal2-backdrop)}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}@media print{body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown) .swal2-container{position:static !important}}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:var(--swal2-container-padding);overflow-x:hidden;transition:var(--swal2-backdrop-transition);-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:var(--swal2-backdrop)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container)[popover]{width:auto;border:0}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:var(--swal2-width);max-width:100%;padding:var(--swal2-padding);border:var(--swal2-border);border-radius:var(--swal2-border-radius);background:var(--swal2-background);color:var(--swal2-color);font-family:inherit;font-size:1rem;container-name:swal2-popup}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable{cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable div:where(.swal2-icon){cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging{cursor:grabbing}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging div:where(.swal2-icon){cursor:grabbing}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:var(--swal2-title-padding);color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;overflow-wrap:break-word;cursor:initial}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:var(--swal2-actions-justify-content);width:var(--swal2-actions-width);margin:var(--swal2-actions-margin);padding:var(--swal2-actions-padding);border-radius:var(--swal2-actions-border-radius);background:var(--swal2-actions-background)}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:var(--swal2-action-button-transition);border:none;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm){border-radius:var(--swal2-confirm-button-border-radius);background:initial;background-color:var(--swal2-confirm-button-background-color);box-shadow:var(--swal2-confirm-button-box-shadow);color:var(--swal2-confirm-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):hover{background-color:color-mix(in srgb, var(--swal2-confirm-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):active{background-color:color-mix(in srgb, var(--swal2-confirm-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny){border-radius:var(--swal2-deny-button-border-radius);background:initial;background-color:var(--swal2-deny-button-background-color);box-shadow:var(--swal2-deny-button-box-shadow);color:var(--swal2-deny-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):hover{background-color:color-mix(in srgb, var(--swal2-deny-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):active{background-color:color-mix(in srgb, var(--swal2-deny-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel){border-radius:var(--swal2-cancel-button-border-radius);background:initial;background-color:var(--swal2-cancel-button-background-color);box-shadow:var(--swal2-cancel-button-box-shadow);color:var(--swal2-cancel-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):hover{background-color:color-mix(in srgb, var(--swal2-cancel-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):active{background-color:color-mix(in srgb, var(--swal2-cancel-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):focus-visible{outline:none;box-shadow:var(--swal2-action-button-focus-box-shadow)}div:where(.swal2-container) button:where(.swal2-styled)[disabled]:not(.swal2-loading){opacity:.4}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid var(--swal2-footer-border-color);background:var(--swal2-footer-background);color:var(--swal2-footer-color);font-size:1em;text-align:center;cursor:initial}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:var(--swal2-border-radius);border-bottom-left-radius:var(--swal2-border-radius)}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:var(--swal2-timer-progress-bar-background)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em;cursor:initial}div:where(.swal2-container) button:where(.swal2-close){position:var(--swal2-close-button-position);inset:var(--swal2-close-button-inset);z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:var(--swal2-close-button-transition);border:none;border-radius:var(--swal2-border-radius);outline:var(--swal2-close-button-outline);background:rgba(0,0,0,0);color:var(--swal2-close-button-color);font-family:monospace;font-size:var(--swal2-close-button-font-size);cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:var(--swal2-close-button-hover-transform);background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus-visible{outline:none;box-shadow:var(--swal2-close-button-focus-box-shadow)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-html-container){z-index:1;justify-content:center;margin:0;padding:var(--swal2-html-container-padding);overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;overflow-wrap:break-word;word-break:break-word;cursor:initial}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:var(--swal2-input-transition);border:var(--swal2-input-border);border-radius:var(--swal2-input-border-radius);background:var(--swal2-input-background);box-shadow:var(--swal2-input-box-shadow);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):hover,div:where(.swal2-container) input:where(.swal2-file):hover,div:where(.swal2-container) textarea:where(.swal2-textarea):hover{box-shadow:var(--swal2-input-hover-box-shadow)}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:var(--swal2-input-focus-border);outline:none;box-shadow:var(--swal2-input-focus-box-shadow)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:var(--swal2-background)}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:var(--swal2-input-background);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:var(--swal2-input-background);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:var(--swal2-background);color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:var(--swal2-validation-message-background);color:var(--swal2-validation-message-color);font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:var(--swal2-progress-step-background);color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:var(--swal2-progress-step-background)}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;zoom:var(--swal2-icon-zoom);border:.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}}div:where(.swal2-icon).swal2-warning{border-color:#f8bb86;color:#f8bb86}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}}div:where(.swal2-icon).swal2-info{border-color:#3fc3ee;color:#3fc3ee}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}}div:where(.swal2-icon).swal2-question{border-color:#87adbd;color:#87adbd}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:var(--swal2-show-animation)}.swal2-hide{animation:var(--swal2-hide-animation)}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;border:var(--swal2-toast-border);background:var(--swal2-background);box-shadow:var(--swal2-toast-box-shadow);pointer-events:all}.swal2-toast>*{grid-column:2}.swal2-toast h2:where(.swal2-title){margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-toast .swal2-loading{justify-content:center}.swal2-toast input:where(.swal2-input){height:2em;margin:.5em;font-size:1em}.swal2-toast .swal2-validation-message{font-size:1em}.swal2-toast div:where(.swal2-footer){margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-toast button:where(.swal2-close){grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-toast div:where(.swal2-html-container){margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-toast div:where(.swal2-html-container):empty{padding:0}.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-toast div:where(.swal2-actions){justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-toast button:where(.swal2-styled){margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}@container swal2-popup style(--swal2-icon-animations:true){.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}}.swal2-toast.swal2-show{animation:var(--swal2-toast-show-animation)}.swal2-toast.swal2-hide{animation:var(--swal2-toast-hide-animation)}@keyframes swal2-show{0%{transform:translate3d(0, -50px, 0) scale(0.9);opacity:0}100%{transform:translate3d(0, 0, 0) scale(1);opacity:1}}@keyframes swal2-hide{0%{transform:translate3d(0, 0, 0) scale(1);opacity:1}100%{transform:translate3d(0, -50px, 0) scale(0.9);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}');const PP=()=>{const[s,t]=A.useState(new Date),[a,n]=A.useState([]),[r,i]=A.useState(!0),o=new Date;A.useEffect(()=>{c()},[]);const c=async()=>{try{i(!0);const[E,L,z]=await Promise.all([Mb.getCheques().catch(()=>[]),Mb.getFlights().catch(()=>[]),Mb.getCustomEvents().catch(()=>[])]),V=[];E.forEach(te=>{V.push({date:new Date(te.date).toDateString(),title:`Cheque: ${te.payee} - .${Number(te.amount).toLocaleString()}`,type:"cheque",details:te})}),L.forEach(te=>{try{const q=te.date_of_travel.replace(",",""),B=new Date(q);isNaN(B.getTime())||V.push({date:B.toDateString(),title:`Flight: ${te.from_place}  ${te.to_place} (${te.Pnr})`,type:"flight",details:te})}catch{console.log("Date parsing error for flight:",te.date_of_travel)}}),z.forEach(te=>{V.push({date:new Date(te.date).toDateString(),title:te.title,type:"custom",details:te})}),console.log(`Loaded ${V.length} total events`),n(V)}catch(E){console.error("Error loading calendar events:",E)}finally{i(!1)}},u=E=>["January","February","March","April","May","June","July","August","September","October","November","December"][E],h=(E,L)=>E.toDateString()===L.toDateString(),m=E=>{const L=E.toDateString(),z=a.filter(V=>V.date===L);return{hasEvent:z.length>0,hasCheque:z.some(V=>V.type==="cheque"),hasFlight:z.some(V=>V.type==="flight"),hasCustomEvent:z.some(V=>V.type==="custom"),events:z}},p=E=>{const L=m(E),z=E.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"});if(L.events.length>0){let V='<div style="text-align: left;">';L.events.forEach(te=>{let q="",B="";switch(te.type){case"cheque":const J=te.details;q="",B=J.type==="payable"?"#dc2626":"#10b981",V+=`
              <div style="margin-bottom: 15px; padding: 10px; border-left: 4px solid ${B}; background: rgba(248, 249, 250, 0.5);">
                <strong>${q} ${te.title}</strong><br>
                <small>Cheque #${J.number} - ${J.type}</small>
              </div>`;break;case"flight":const P=te.details;q="",B="#3b82f6",V+=`
              <div style="margin-bottom: 15px; padding: 10px; border-left: 4px solid ${B}; background: rgba(59, 130, 246, 0.1);">
                <strong>${q} ${te.title}</strong><br>
                <small>Customer: ${P.customer_name}<br>
                Passenger: ${P.passenger_name}<br>
                Departure: ${P.date_of_travel}</small>
              </div>`;break;case"custom":const K=te.details;switch(K.subtype){case"meeting":q="",B="#8b5cf6";break;case"deadline":q="",B="#ef4444";break;case"task":q="",B="#10b981";break;case"appointment":q="",B="#f59e0b";break;default:q="",B=K.color||"#6b7280"}V+=`
              <div style="margin-bottom: 15px; padding: 10px; border-left: 4px solid ${B}; background: rgba(107, 114, 128, 0.1);">
                <strong>${q} ${te.title}</strong><br>
                <small>${K.description||""}<br>
                ${K.time?`Time: ${K.time}`:"All Day"}<br>
                Priority: ${K.priority}</small>
              </div>`;break}}),V+="</div>",W.fire({title:z,html:V,icon:"info",showCancelButton:!0,confirmButtonText:'<i class="fas fa-plus me-1"></i> Add New Event',cancelButtonText:"Close",confirmButtonColor:"#dc2626",cancelButtonColor:"#6b7280"}).then(te=>{te.isConfirmed&&y(E)})}else W.fire({title:z,text:"No events scheduled for this day.",icon:"info",showCancelButton:!0,confirmButtonText:'<i class="fas fa-plus me-1"></i> Add Event',cancelButtonText:"Close",confirmButtonColor:"#dc2626",cancelButtonColor:"#6b7280"}).then(V=>{V.isConfirmed&&y(E)})},y=async E=>{const L=E.toISOString().split("T")[0],{value:z}=await W.fire({title:"Add New Event",html:`
        <div style="text-align: left;">
          <div style="margin-bottom: 15px;">
            <label style="display: block; margin-bottom: 5px; font-weight: 600;">Event Title *</label>
            <input id="event-title" class="swal2-input" placeholder="Enter event title" style="width: 100%; margin: 0;">
          </div>
          
          <div style="margin-bottom: 15px;">
            <label style="display: block; margin-bottom: 5px; font-weight: 600;">Description</label>
            <textarea id="event-description" class="swal2-textarea" placeholder="Event description" style="width: 100%; margin: 0;"></textarea>
          </div>
          
          <div style="margin-bottom: 15px;">
            <label style="display: block; margin-bottom: 5px; font-weight: 600;">Date *</label>
            <input id="event-date" type="date" class="swal2-input" value="${L}" style="width: 100%; margin: 0;">
          </div>
          
          <div style="margin-bottom: 15px;">
            <label style="display: block; margin-bottom: 5px; font-weight: 600;">Time</label>
            <input id="event-time" type="time" class="swal2-input" style="width: 100%; margin: 0;">
          </div>
          
          <div style="margin-bottom: 15px;">
            <label style="display: block; margin-bottom: 5px; font-weight: 600;">Event Type *</label>
            <select id="event-type" class="swal2-select" style="width: 100%; margin: 0;">
              <option value="general">General</option>
              <option value="meeting">Meeting</option>
              <option value="deadline">Deadline</option>
              <option value="task">Task</option>
              <option value="appointment">Appointment</option>
              <option value="reminder">Reminder</option>
            </select>
          </div>
          
          <div style="margin-bottom: 15px;">
            <label style="display: block; margin-bottom: 5px; font-weight: 600;">Priority *</label>
            <select id="event-priority" class="swal2-select" style="width: 100%; margin: 0;">
              <option value="low">Low</option>
              <option value="medium" selected>Medium</option>
              <option value="high">High</option>
              <option value="urgent">Urgent</option>
            </select>
          </div>
          
          <div style="margin-bottom: 15px;">
            <label style="display: block; margin-bottom: 5px; font-weight: 600;">Color</label>
            <input id="event-color" type="color" value="#dc2626" class="swal2-input" style="width: 100%; margin: 0; height: 50px;">
          </div>
        </div>
      `,focusConfirm:!1,showCancelButton:!0,confirmButtonText:'<i class="fas fa-save me-1"></i> Save Event',cancelButtonText:"Cancel",confirmButtonColor:"#dc2626",cancelButtonColor:"#6b7280",width:"600px",preConfirm:()=>{const V=document.getElementById("event-title").value,te=document.getElementById("event-description").value,q=document.getElementById("event-date").value,B=document.getElementById("event-time").value,J=document.getElementById("event-type").value,P=document.getElementById("event-priority").value,K=document.getElementById("event-color").value;return!V||!q?(W.showValidationMessage("Please fill in all required fields (Title and Date)"),!1):{title:V,description:te,eventDate:q,time:B,type:J,priority:P,color:K}}});z&&await g(z)},g=async E=>{try{W.fire({title:"Saving Event...",allowOutsideClick:!1,didOpen:()=>{W.showLoading()}});const L=new FormData;L.append("action","add_event"),L.append("title",E.title),L.append("description",E.description||""),L.append("event_date",E.eventDate),L.append("event_time",E.time||""),L.append("event_type",E.type),L.append("priority",E.priority),L.append("color",E.color);const z=ar.get(Ct.tokenKey),V={};z&&(V.Authorization=`Bearer ${z}`);const q=await(await fetch(`${Ct.baseUrl}/calendarController.php`,{method:"POST",body:L,headers:V})).json();if(q.status==="success")W.fire({icon:"success",title:"Event Added!",text:"The event has been successfully added to the calendar.",confirmButtonColor:"#dc2626"}),c();else throw new Error(q.message||"Failed to save event")}catch(L){W.fire({icon:"error",title:"Error",text:L.message||"Failed to save event. Please try again.",confirmButtonColor:"#dc2626"})}},j=()=>{const E=s.getFullYear(),L=s.getMonth(),z=new Date(E,L,1),V=new Date(z);V.setDate(V.getDate()-z.getDay());const te=[];let q=new Date(V);for(let B=0;B<42;B++){const J=q.getMonth()===L,P=h(q,o),K=m(q);let H="calendar-day";J||(H+=" other-month"),P&&(H+=" today"),K.hasEvent&&(H+=" has-event",K.hasCheque&&(H+=" has-cheque-event"),K.hasFlight&&(H+=" has-flight-event"),K.hasCustomEvent&&(H+=" has-custom-event"));const se=new Date(q);te.push(e.jsx("div",{className:H,onClick:()=>p(se),style:{cursor:"pointer"},children:q.getDate()},B)),q.setDate(q.getDate()+1)}return te},b=()=>{const E=new Date,L=a.filter(z=>new Date(z.date)>=E);return L.sort((z,V)=>new Date(z.date).getTime()-new Date(V.date).getTime()),L.slice(0,10)},N=E=>{const L=new Date(E),z=new Date,V=new Date(z);return V.setDate(V.getDate()+1),h(L,z)?"Today":h(L,V)?"Tomorrow":L.toLocaleDateString("en-US",{month:"short",day:"numeric"})},v=()=>{t(new Date(s.getFullYear(),s.getMonth()-1,1))},S=()=>{t(new Date(s.getFullYear(),s.getMonth()+1,1))};return e.jsxs("div",{className:"card dashboard-card",children:[e.jsx("div",{className:"card-header",children:e.jsxs("h5",{className:"mb-0",children:[e.jsx("i",{className:"fas fa-calendar-alt me-2"}),"Calendar Overview"]})}),e.jsxs("div",{className:"card-body p-0",children:[e.jsx("div",{className:"modern-calendar",children:r?e.jsxs("div",{className:"text-center py-5",children:[e.jsx("i",{className:"fas fa-spinner fa-spin fa-2x mb-3",style:{color:"#dc2626"}}),e.jsx("p",{children:"Loading calendar..."})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"calendar-header",children:[e.jsx("button",{className:"calendar-nav-btn",onClick:v,children:e.jsx("i",{className:"fas fa-chevron-left"})}),e.jsxs("h3",{className:"calendar-title",children:[u(s.getMonth())," ",s.getFullYear()]}),e.jsx("button",{className:"calendar-nav-btn",onClick:S,children:e.jsx("i",{className:"fas fa-chevron-right"})})]}),e.jsxs("div",{className:"calendar-grid",children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(E=>e.jsx("div",{className:"calendar-day-header",children:E},E)),j()]})]})}),e.jsxs("div",{className:"calendar-events",children:[e.jsxs("h6",{className:"mb-2 text-red",children:[e.jsx("i",{className:"fas fa-list me-2"}),"Upcoming Events"]}),e.jsx("div",{className:"upcoming-events",children:b().length>0?b().map((E,L)=>{let z="event-item";return E.type==="cheque"&&(z+=" cheque-event"),E.type==="flight"&&(z+=" flight-event"),E.type==="custom"&&(z+=" custom-event"),e.jsx("div",{className:z,children:e.jsxs("div",{children:[e.jsx("span",{className:"event-date",children:N(E.date)}),e.jsx("div",{className:"event-title",children:E.title})]})},L)}):e.jsxs("div",{className:"text-center text-muted py-3",children:[e.jsx("i",{className:"fas fa-calendar-check fa-2x mb-2"}),e.jsx("p",{className:"mb-0",children:"No upcoming events"})]})})]})]})]})},FP=()=>{const{user:s}=Gh(),[t,a]=A.useState(null),[n,r]=A.useState([]),[i,o]=A.useState(!0),[c,u]=A.useState("today"),[h,m]=A.useState(1),p=10,y=()=>{const P=new Date;return P.setDate(P.getDate()-30),P.toISOString().split("T")[0]},[g,j]=A.useState({fromDate:y(),toDate:new Date().toISOString().split("T")[0]});A.useEffect(()=>{b()},[g]);const b=async()=>{try{o(!0);const[P,K]=await Promise.all([D1.getTodayStats(),D1.getDailyEntries(g)]);a(P),r(K)}catch(P){console.error("Dashboard error:",P)}finally{o(!1)}},N=P=>{u(P),m(1);const K=new Date,H=new Date;P==="today"?H.setDate(K.getDate()-30):P==="week"?H.setDate(K.getDate()-7):P==="month"&&H.setMonth(K.getMonth()-1),j({fromDate:H.toISOString().split("T")[0],toDate:K.toISOString().split("T")[0]})},v=(P=0)=>P.toLocaleString("en-AE",{minimumFractionDigits:2,maximumFractionDigits:2}),S=(t?.Todays_Ticket||0)+(t?.Todays_Visa||0),E=(t?.ticket_profit||0)+(t?.Visa_Profit||0),L=Math.ceil(n.length/p),z=(h-1)*p,V=z+p,te=n.slice(z,V),q=()=>{h>1&&m(h-1)},B=()=>{h<L&&m(h+1)},J=P=>{m(P)};return A.useEffect(()=>{const P=K=>{K.key==="ArrowLeft"&&h>1?m(H=>H-1):K.key==="ArrowRight"&&h<L&&m(H=>H+1)};if(n.length>p)return window.addEventListener("keydown",P),()=>window.removeEventListener("keydown",P)},[h,L,n.length,p]),i&&!t?e.jsxs("div",{className:"dashboard-loading",children:[e.jsx("div",{className:"loading-spinner-large"}),e.jsx("p",{children:"Loading your dashboard..."})]}):e.jsxs("div",{className:"dashboard-redesigned",children:[e.jsxs("div",{className:"stats-grid",children:[e.jsxs("div",{className:"stat-card stat-card-primary",children:[e.jsx("div",{className:"stat-card-bg"}),e.jsxs("div",{className:"stat-card-content",children:[e.jsxs("div",{className:"stat-icon-wrapper",children:[e.jsx("div",{className:"stat-icon stat-icon-primary",children:e.jsx("i",{className:"fas fa-plane-departure"})}),e.jsx("div",{className:"stat-pulse"})]}),e.jsxs("div",{className:"stat-info",children:[e.jsx("div",{className:"stat-value",children:t?.Todays_Ticket||0}),e.jsx("div",{className:"stat-label",children:"Today's Tickets"}),e.jsxs("div",{className:"stat-revenue",children:[e.jsx("i",{className:"fas fa-coins"}),".",v(t?.ticket_profit)]})]})]}),e.jsx("div",{className:"stat-progress-wrapper",children:e.jsx("div",{className:"stat-progress-fill stat-progress-primary",style:{width:`${Math.min((t?.Todays_Ticket||0)*10,100)}%`}})})]}),e.jsxs("div",{className:"stat-card stat-card-success",children:[e.jsx("div",{className:"stat-card-bg"}),e.jsxs("div",{className:"stat-card-content",children:[e.jsxs("div",{className:"stat-icon-wrapper",children:[e.jsx("div",{className:"stat-icon stat-icon-success",children:e.jsx("i",{className:"fas fa-passport"})}),e.jsx("div",{className:"stat-pulse"})]}),e.jsxs("div",{className:"stat-info",children:[e.jsx("div",{className:"stat-value",children:t?.Todays_Visa||0}),e.jsx("div",{className:"stat-label",children:"Today's Visas"}),e.jsxs("div",{className:"stat-revenue",children:[e.jsx("i",{className:"fas fa-coins"}),".",v(t?.Visa_Profit)]})]})]}),e.jsx("div",{className:"stat-progress-wrapper",children:e.jsx("div",{className:"stat-progress-fill stat-progress-success",style:{width:`${Math.min((t?.Todays_Visa||0)*10,100)}%`}})})]}),e.jsxs("div",{className:"stat-card stat-card-warning",children:[e.jsx("div",{className:"stat-card-bg"}),e.jsxs("div",{className:"stat-card-content",children:[e.jsxs("div",{className:"stat-icon-wrapper",children:[e.jsx("div",{className:"stat-icon stat-icon-warning",children:e.jsx("i",{className:"fas fa-receipt"})}),e.jsx("div",{className:"stat-pulse"})]}),e.jsxs("div",{className:"stat-info",children:[e.jsxs("div",{className:"stat-value",children:[".",v(t?.Total_Expense)]}),e.jsx("div",{className:"stat-label",children:"Total Expenses"}),e.jsxs("div",{className:"stat-revenue stat-expense",children:[e.jsx("i",{className:"fas fa-arrow-down"}),"Today's Spending"]})]})]}),e.jsx("div",{className:"stat-progress-wrapper",children:e.jsx("div",{className:"stat-progress-fill stat-progress-warning",style:{width:`${Math.min((t?.Total_Expense||0)/50,100)}%`}})})]}),e.jsxs("div",{className:"stat-card stat-card-info",children:[e.jsx("div",{className:"stat-card-bg"}),e.jsxs("div",{className:"stat-card-content",children:[e.jsxs("div",{className:"stat-icon-wrapper",children:[e.jsx("div",{className:"stat-icon stat-icon-info",children:e.jsx("i",{className:"fas fa-chart-line"})}),e.jsx("div",{className:"stat-pulse"})]}),e.jsxs("div",{className:"stat-info",children:[e.jsx("div",{className:"stat-value",children:S}),e.jsx("div",{className:"stat-label",children:"Total Transactions"}),e.jsxs("div",{className:"stat-revenue stat-positive",children:[e.jsx("i",{className:"fas fa-arrow-up"}),".",v(E)]})]})]}),e.jsx("div",{className:"stat-progress-wrapper",children:e.jsx("div",{className:"stat-progress-fill stat-progress-info",style:{width:`${Math.min(Math.abs(S*5),100)}%`}})})]})]}),e.jsxs("div",{className:"dashboard-content-grid",children:[e.jsxs("div",{className:"dashboard-section calendar-section",children:[e.jsx("div",{className:"section-header",children:e.jsxs("h2",{className:"section-title",children:[e.jsx("i",{className:"far fa-calendar-alt"}),"Calendar Overview"]})}),e.jsx("div",{className:"section-body",children:e.jsx(PP,{})})]}),(s?.role_name==="Admin"||s?.role_id===1)&&e.jsxs("div",{className:"dashboard-section entries-section",children:[e.jsxs("div",{className:"section-header",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"section-title",children:[e.jsx("i",{className:"fas fa-clipboard-list"}),"Daily Report"]}),e.jsxs("p",{className:"section-subtitle",children:["Showing ",z+1,"-",Math.min(V,n.length)," of ",n.length," entries"]})]}),e.jsxs("div",{className:"period-selector",children:[e.jsx("button",{className:`period-btn ${c==="today"?"active":""}`,onClick:()=>N("today"),children:"Recent"}),e.jsx("button",{className:`period-btn ${c==="week"?"active":""}`,onClick:()=>N("week"),children:"Week"}),e.jsx("button",{className:`period-btn ${c==="month"?"active":""}`,onClick:()=>N("month"),children:"Month"})]})]}),e.jsx("div",{className:"section-body",children:n.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"entries-table-wrapper",children:e.jsxs("table",{className:"entries-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Date"}),e.jsx("th",{children:"Type"}),e.jsx("th",{children:"Details"}),e.jsx("th",{children:"Amount"}),e.jsx("th",{children:"Staff"})]})}),e.jsx("tbody",{children:te.map((P,K)=>e.jsxs("tr",{className:"entry-row",children:[e.jsx("td",{className:"entry-date",children:new Date(P.datetime||P.date).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),e.jsx("td",{children:e.jsx("span",{className:`entry-type entry-type-${(P.EntryType||P.type||"other").toLowerCase()}`,children:P.EntryType||P.type||"Entry"})}),e.jsx("td",{className:"entry-details",children:P.Details||P.details||"-"}),e.jsx("td",{className:"entry-amount",children:e.jsxs("span",{className:"amount-positive",children:[".",v(P.amount||0)]})}),e.jsx("td",{className:"entry-staff",children:P.staff_name||"N/A"})]},z+K))})]})}),n.length>p&&e.jsxs("div",{className:"pagination-controls",children:[e.jsxs("button",{className:"pagination-btn pagination-btn-prev",onClick:q,disabled:h===1,children:[e.jsx("i",{className:"fas fa-chevron-left"}),"Previous"]}),e.jsx("div",{className:"pagination-pages",children:Array.from({length:Math.min(L,5)},(P,K)=>{let H;return L<=5||h<=3?H=K+1:h>=L-2?H=L-4+K:H=h-2+K,e.jsx("button",{className:`pagination-page ${h===H?"active":""}`,onClick:()=>J(H),children:H},H)})}),e.jsxs("button",{className:"pagination-btn pagination-btn-next",onClick:B,disabled:h===L,children:["Next",e.jsx("i",{className:"fas fa-chevron-right"})]})]})]}):e.jsxs("div",{className:"no-entries",children:[e.jsx("i",{className:"fas fa-inbox"}),e.jsx("p",{children:"No entries found for this period"})]})})]})]}),e.jsxs("div",{className:"quick-actions",children:[e.jsxs("button",{className:"action-btn action-btn-primary",children:[e.jsx("i",{className:"fas fa-plus-circle"}),"New Ticket"]}),e.jsxs("button",{className:"action-btn action-btn-success",children:[e.jsx("i",{className:"fas fa-passport"}),"New Visa"]}),e.jsxs("button",{className:"action-btn action-btn-warning",children:[e.jsx("i",{className:"fas fa-file-invoice-dollar"}),"New Expense"]}),e.jsxs("button",{className:"action-btn action-btn-info",children:[e.jsx("i",{className:"fas fa-chart-bar"}),"View Reports"]})]})]})};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function km(s){return s+.5|0}const Ud=(s,t,a)=>Math.max(Math.min(s,a),t);function Wf(s){return Ud(km(s*2.55),0,255)}function Kd(s){return Ud(km(s*255),0,255)}function Kc(s){return Ud(km(s/2.55)/100,0,1)}function q1(s){return Ud(km(s*100),0,100)}const Bl={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Vy=[..."0123456789ABCDEF"],IP=s=>Vy[s&15],OP=s=>Vy[(s&240)>>4]+Vy[s&15],Ap=s=>(s&240)>>4===(s&15),MP=s=>Ap(s.r)&&Ap(s.g)&&Ap(s.b)&&Ap(s.a);function RP(s){var t=s.length,a;return s[0]==="#"&&(t===4||t===5?a={r:255&Bl[s[1]]*17,g:255&Bl[s[2]]*17,b:255&Bl[s[3]]*17,a:t===5?Bl[s[4]]*17:255}:(t===7||t===9)&&(a={r:Bl[s[1]]<<4|Bl[s[2]],g:Bl[s[3]]<<4|Bl[s[4]],b:Bl[s[5]]<<4|Bl[s[6]],a:t===9?Bl[s[7]]<<4|Bl[s[8]]:255})),a}const BP=(s,t)=>s<255?t(s):"";function zP(s){var t=MP(s)?IP:OP;return s?"#"+t(s.r)+t(s.g)+t(s.b)+BP(s.a,t):void 0}const qP=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function MC(s,t,a){const n=t*Math.min(a,1-a),r=(i,o=(i+s/30)%12)=>a-n*Math.max(Math.min(o-3,9-o,1),-1);return[r(0),r(8),r(4)]}function UP(s,t,a){const n=(r,i=(r+s/60)%6)=>a-a*t*Math.max(Math.min(i,4-i,1),0);return[n(5),n(3),n(1)]}function HP(s,t,a){const n=MC(s,1,.5);let r;for(t+a>1&&(r=1/(t+a),t*=r,a*=r),r=0;r<3;r++)n[r]*=1-t-a,n[r]+=t;return n}function $P(s,t,a,n,r){return s===r?(t-a)/n+(t<a?6:0):t===r?(a-s)/n+2:(s-t)/n+4}function Kv(s){const a=s.r/255,n=s.g/255,r=s.b/255,i=Math.max(a,n,r),o=Math.min(a,n,r),c=(i+o)/2;let u,h,m;return i!==o&&(m=i-o,h=c>.5?m/(2-i-o):m/(i+o),u=$P(a,n,r,m,i),u=u*60+.5),[u|0,h||0,c]}function Xv(s,t,a,n){return(Array.isArray(t)?s(t[0],t[1],t[2]):s(t,a,n)).map(Kd)}function Gv(s,t,a){return Xv(MC,s,t,a)}function VP(s,t,a){return Xv(HP,s,t,a)}function WP(s,t,a){return Xv(UP,s,t,a)}function RC(s){return(s%360+360)%360}function YP(s){const t=qP.exec(s);let a=255,n;if(!t)return;t[5]!==n&&(a=t[6]?Wf(+t[5]):Kd(+t[5]));const r=RC(+t[2]),i=+t[3]/100,o=+t[4]/100;return t[1]==="hwb"?n=VP(r,i,o):t[1]==="hsv"?n=WP(r,i,o):n=Gv(r,i,o),{r:n[0],g:n[1],b:n[2],a}}function KP(s,t){var a=Kv(s);a[0]=RC(a[0]+t),a=Gv(a),s.r=a[0],s.g=a[1],s.b=a[2]}function XP(s){if(!s)return;const t=Kv(s),a=t[0],n=q1(t[1]),r=q1(t[2]);return s.a<255?`hsla(${a}, ${n}%, ${r}%, ${Kc(s.a)})`:`hsl(${a}, ${n}%, ${r}%)`}const U1={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},H1={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function GP(){const s={},t=Object.keys(H1),a=Object.keys(U1);let n,r,i,o,c;for(n=0;n<t.length;n++){for(o=c=t[n],r=0;r<a.length;r++)i=a[r],c=c.replace(i,U1[i]);i=parseInt(H1[o],16),s[c]=[i>>16&255,i>>8&255,i&255]}return s}let kp;function QP(s){kp||(kp=GP(),kp.transparent=[0,0,0,0]);const t=kp[s.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const JP=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function ZP(s){const t=JP.exec(s);let a=255,n,r,i;if(t){if(t[7]!==n){const o=+t[7];a=t[8]?Wf(o):Ud(o*255,0,255)}return n=+t[1],r=+t[3],i=+t[5],n=255&(t[2]?Wf(n):Ud(n,0,255)),r=255&(t[4]?Wf(r):Ud(r,0,255)),i=255&(t[6]?Wf(i):Ud(i,0,255)),{r:n,g:r,b:i,a}}}function eF(s){return s&&(s.a<255?`rgba(${s.r}, ${s.g}, ${s.b}, ${Kc(s.a)})`:`rgb(${s.r}, ${s.g}, ${s.b})`)}const qb=s=>s<=.0031308?s*12.92:Math.pow(s,1/2.4)*1.055-.055,mh=s=>s<=.04045?s/12.92:Math.pow((s+.055)/1.055,2.4);function tF(s,t,a){const n=mh(Kc(s.r)),r=mh(Kc(s.g)),i=mh(Kc(s.b));return{r:Kd(qb(n+a*(mh(Kc(t.r))-n))),g:Kd(qb(r+a*(mh(Kc(t.g))-r))),b:Kd(qb(i+a*(mh(Kc(t.b))-i))),a:s.a+a*(t.a-s.a)}}function Dp(s,t,a){if(s){let n=Kv(s);n[t]=Math.max(0,Math.min(n[t]+n[t]*a,t===0?360:1)),n=Gv(n),s.r=n[0],s.g=n[1],s.b=n[2]}}function BC(s,t){return s&&Object.assign(t||{},s)}function $1(s){var t={r:0,g:0,b:0,a:255};return Array.isArray(s)?s.length>=3&&(t={r:s[0],g:s[1],b:s[2],a:255},s.length>3&&(t.a=Kd(s[3]))):(t=BC(s,{r:0,g:0,b:0,a:1}),t.a=Kd(t.a)),t}function sF(s){return s.charAt(0)==="r"?ZP(s):YP(s)}class rm{constructor(t){if(t instanceof rm)return t;const a=typeof t;let n;a==="object"?n=$1(t):a==="string"&&(n=RP(t)||QP(t)||sF(t)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var t=BC(this._rgb);return t&&(t.a=Kc(t.a)),t}set rgb(t){this._rgb=$1(t)}rgbString(){return this._valid?eF(this._rgb):void 0}hexString(){return this._valid?zP(this._rgb):void 0}hslString(){return this._valid?XP(this._rgb):void 0}mix(t,a){if(t){const n=this.rgb,r=t.rgb;let i;const o=a===i?.5:a,c=2*o-1,u=n.a-r.a,h=((c*u===-1?c:(c+u)/(1+c*u))+1)/2;i=1-h,n.r=255&h*n.r+i*r.r+.5,n.g=255&h*n.g+i*r.g+.5,n.b=255&h*n.b+i*r.b+.5,n.a=o*n.a+(1-o)*r.a,this.rgb=n}return this}interpolate(t,a){return t&&(this._rgb=tF(this._rgb,t._rgb,a)),this}clone(){return new rm(this.rgb)}alpha(t){return this._rgb.a=Kd(t),this}clearer(t){const a=this._rgb;return a.a*=1-t,this}greyscale(){const t=this._rgb,a=km(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=a,this}opaquer(t){const a=this._rgb;return a.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return Dp(this._rgb,2,t),this}darken(t){return Dp(this._rgb,2,-t),this}saturate(t){return Dp(this._rgb,1,t),this}desaturate(t){return Dp(this._rgb,1,-t),this}rotate(t){return KP(this._rgb,t),this}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function qc(){}const aF=(()=>{let s=0;return()=>s++})();function Hs(s){return s==null}function en(s){if(Array.isArray&&Array.isArray(s))return!0;const t=Object.prototype.toString.call(s);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function Js(s){return s!==null&&Object.prototype.toString.call(s)==="[object Object]"}function gn(s){return(typeof s=="number"||s instanceof Number)&&isFinite(+s)}function cl(s,t){return gn(s)?s:t}function ks(s,t){return typeof s>"u"?t:s}const nF=(s,t)=>typeof s=="string"&&s.endsWith("%")?parseFloat(s)/100:+s/t,zC=(s,t)=>typeof s=="string"&&s.endsWith("%")?parseFloat(s)/100*t:+s;function Ra(s,t,a){if(s&&typeof s.call=="function")return s.apply(a,t)}function ya(s,t,a,n){let r,i,o;if(en(s))for(i=s.length,r=0;r<i;r++)t.call(a,s[r],r);else if(Js(s))for(o=Object.keys(s),i=o.length,r=0;r<i;r++)t.call(a,s[o[r]],o[r])}function Eg(s,t){let a,n,r,i;if(!s||!t||s.length!==t.length)return!1;for(a=0,n=s.length;a<n;++a)if(r=s[a],i=t[a],r.datasetIndex!==i.datasetIndex||r.index!==i.index)return!1;return!0}function Tg(s){if(en(s))return s.map(Tg);if(Js(s)){const t=Object.create(null),a=Object.keys(s),n=a.length;let r=0;for(;r<n;++r)t[a[r]]=Tg(s[a[r]]);return t}return s}function qC(s){return["__proto__","prototype","constructor"].indexOf(s)===-1}function rF(s,t,a,n){if(!qC(s))return;const r=t[s],i=a[s];Js(r)&&Js(i)?im(r,i,n):t[s]=Tg(i)}function im(s,t,a){const n=en(t)?t:[t],r=n.length;if(!Js(s))return s;a=a||{};const i=a.merger||rF;let o;for(let c=0;c<r;++c){if(o=n[c],!Js(o))continue;const u=Object.keys(o);for(let h=0,m=u.length;h<m;++h)i(u[h],s,o,a)}return s}function Gf(s,t){return im(s,t,{merger:iF})}function iF(s,t,a){if(!qC(s))return;const n=t[s],r=a[s];Js(n)&&Js(r)?Gf(n,r):Object.prototype.hasOwnProperty.call(t,s)||(t[s]=Tg(r))}const V1={"":s=>s,x:s=>s.x,y:s=>s.y};function lF(s){const t=s.split("."),a=[];let n="";for(const r of t)n+=r,n.endsWith("\\")?n=n.slice(0,-1)+".":(a.push(n),n="");return a}function oF(s){const t=lF(s);return a=>{for(const n of t){if(n==="")break;a=a&&a[n]}return a}}function Xd(s,t){return(V1[t]||(V1[t]=oF(t)))(s)}function Qv(s){return s.charAt(0).toUpperCase()+s.slice(1)}const lm=s=>typeof s<"u",Gd=s=>typeof s=="function",W1=(s,t)=>{if(s.size!==t.size)return!1;for(const a of s)if(!t.has(a))return!1;return!0};function cF(s){return s.type==="mouseup"||s.type==="click"||s.type==="contextmenu"}const la=Math.PI,Va=2*la,dF=Va+la,Lg=Number.POSITIVE_INFINITY,uF=la/180,En=la/2,xu=la/4,Y1=la*2/3,Hd=Math.log10,ac=Math.sign;function Qf(s,t,a){return Math.abs(s-t)<a}function K1(s){const t=Math.round(s);s=Qf(s,t,s/1e3)?t:s;const a=Math.pow(10,Math.floor(Hd(s))),n=s/a;return(n<=1?1:n<=2?2:n<=5?5:10)*a}function hF(s){const t=[],a=Math.sqrt(s);let n;for(n=1;n<a;n++)s%n===0&&(t.push(n),t.push(s/n));return a===(a|0)&&t.push(a),t.sort((r,i)=>r-i).pop(),t}function fF(s){return typeof s=="symbol"||typeof s=="object"&&s!==null&&!(Symbol.toPrimitive in s||"toString"in s||"valueOf"in s)}function qh(s){return!fF(s)&&!isNaN(parseFloat(s))&&isFinite(s)}function mF(s,t){const a=Math.round(s);return a-t<=s&&a+t>=s}function UC(s,t,a){let n,r,i;for(n=0,r=s.length;n<r;n++)i=s[n][a],isNaN(i)||(t.min=Math.min(t.min,i),t.max=Math.max(t.max,i))}function vo(s){return s*(la/180)}function Jv(s){return s*(180/la)}function X1(s){if(!gn(s))return;let t=1,a=0;for(;Math.round(s*t)/t!==s;)t*=10,a++;return a}function HC(s,t){const a=t.x-s.x,n=t.y-s.y,r=Math.sqrt(a*a+n*n);let i=Math.atan2(n,a);return i<-.5*la&&(i+=Va),{angle:i,distance:r}}function Wy(s,t){return Math.sqrt(Math.pow(t.x-s.x,2)+Math.pow(t.y-s.y,2))}function pF(s,t){return(s-t+dF)%Va-la}function Qr(s){return(s%Va+Va)%Va}function om(s,t,a,n){const r=Qr(s),i=Qr(t),o=Qr(a),c=Qr(i-r),u=Qr(o-r),h=Qr(r-i),m=Qr(r-o);return r===i||r===o||n&&i===o||c>u&&h<m}function xr(s,t,a){return Math.max(t,Math.min(a,s))}function gF(s){return xr(s,-32768,32767)}function Gc(s,t,a,n=1e-6){return s>=Math.min(t,a)-n&&s<=Math.max(t,a)+n}function Zv(s,t,a){a=a||(o=>s[o]<t);let n=s.length-1,r=0,i;for(;n-r>1;)i=r+n>>1,a(i)?r=i:n=i;return{lo:r,hi:n}}const Qc=(s,t,a,n)=>Zv(s,a,n?r=>{const i=s[r][t];return i<a||i===a&&s[r+1][t]===a}:r=>s[r][t]<a),xF=(s,t,a)=>Zv(s,a,n=>s[n][t]>=a);function bF(s,t,a){let n=0,r=s.length;for(;n<r&&s[n]<t;)n++;for(;r>n&&s[r-1]>a;)r--;return n>0||r<s.length?s.slice(n,r):s}const $C=["push","pop","shift","splice","unshift"];function yF(s,t){if(s._chartjs){s._chartjs.listeners.push(t);return}Object.defineProperty(s,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),$C.forEach(a=>{const n="_onData"+Qv(a),r=s[a];Object.defineProperty(s,a,{configurable:!0,enumerable:!1,value(...i){const o=r.apply(this,i);return s._chartjs.listeners.forEach(c=>{typeof c[n]=="function"&&c[n](...i)}),o}})})}function G1(s,t){const a=s._chartjs;if(!a)return;const n=a.listeners,r=n.indexOf(t);r!==-1&&n.splice(r,1),!(n.length>0)&&($C.forEach(i=>{delete s[i]}),delete s._chartjs)}function VC(s){const t=new Set(s);return t.size===s.length?s:Array.from(t)}const WC=(function(){return typeof window>"u"?function(s){return s()}:window.requestAnimationFrame})();function YC(s,t){let a=[],n=!1;return function(...r){a=r,n||(n=!0,WC.call(window,()=>{n=!1,s.apply(t,a)}))}}function vF(s,t){let a;return function(...n){return t?(clearTimeout(a),a=setTimeout(s,t,n)):s.apply(this,n),t}}const e0=s=>s==="start"?"left":s==="end"?"right":"center",Gr=(s,t,a)=>s==="start"?t:s==="end"?a:(t+a)/2,jF=(s,t,a,n)=>s===(n?"left":"right")?a:s==="center"?(t+a)/2:t;function KC(s,t,a){const n=t.length;let r=0,i=n;if(s._sorted){const{iScale:o,vScale:c,_parsed:u}=s,h=s.dataset&&s.dataset.options?s.dataset.options.spanGaps:null,m=o.axis,{min:p,max:y,minDefined:g,maxDefined:j}=o.getUserBounds();if(g){if(r=Math.min(Qc(u,m,p).lo,a?n:Qc(t,m,o.getPixelForValue(p)).lo),h){const b=u.slice(0,r+1).reverse().findIndex(N=>!Hs(N[c.axis]));r-=Math.max(0,b)}r=xr(r,0,n-1)}if(j){let b=Math.max(Qc(u,o.axis,y,!0).hi+1,a?0:Qc(t,m,o.getPixelForValue(y),!0).hi+1);if(h){const N=u.slice(b-1).findIndex(v=>!Hs(v[c.axis]));b+=Math.max(0,N)}i=xr(b,r,n)-r}else i=n-r}return{start:r,count:i}}function XC(s){const{xScale:t,yScale:a,_scaleRanges:n}=s,r={xmin:t.min,xmax:t.max,ymin:a.min,ymax:a.max};if(!n)return s._scaleRanges=r,!0;const i=n.xmin!==t.min||n.xmax!==t.max||n.ymin!==a.min||n.ymax!==a.max;return Object.assign(n,r),i}const Ep=s=>s===0||s===1,Q1=(s,t,a)=>-(Math.pow(2,10*(s-=1))*Math.sin((s-t)*Va/a)),J1=(s,t,a)=>Math.pow(2,-10*s)*Math.sin((s-t)*Va/a)+1,Jf={linear:s=>s,easeInQuad:s=>s*s,easeOutQuad:s=>-s*(s-2),easeInOutQuad:s=>(s/=.5)<1?.5*s*s:-.5*(--s*(s-2)-1),easeInCubic:s=>s*s*s,easeOutCubic:s=>(s-=1)*s*s+1,easeInOutCubic:s=>(s/=.5)<1?.5*s*s*s:.5*((s-=2)*s*s+2),easeInQuart:s=>s*s*s*s,easeOutQuart:s=>-((s-=1)*s*s*s-1),easeInOutQuart:s=>(s/=.5)<1?.5*s*s*s*s:-.5*((s-=2)*s*s*s-2),easeInQuint:s=>s*s*s*s*s,easeOutQuint:s=>(s-=1)*s*s*s*s+1,easeInOutQuint:s=>(s/=.5)<1?.5*s*s*s*s*s:.5*((s-=2)*s*s*s*s+2),easeInSine:s=>-Math.cos(s*En)+1,easeOutSine:s=>Math.sin(s*En),easeInOutSine:s=>-.5*(Math.cos(la*s)-1),easeInExpo:s=>s===0?0:Math.pow(2,10*(s-1)),easeOutExpo:s=>s===1?1:-Math.pow(2,-10*s)+1,easeInOutExpo:s=>Ep(s)?s:s<.5?.5*Math.pow(2,10*(s*2-1)):.5*(-Math.pow(2,-10*(s*2-1))+2),easeInCirc:s=>s>=1?s:-(Math.sqrt(1-s*s)-1),easeOutCirc:s=>Math.sqrt(1-(s-=1)*s),easeInOutCirc:s=>(s/=.5)<1?-.5*(Math.sqrt(1-s*s)-1):.5*(Math.sqrt(1-(s-=2)*s)+1),easeInElastic:s=>Ep(s)?s:Q1(s,.075,.3),easeOutElastic:s=>Ep(s)?s:J1(s,.075,.3),easeInOutElastic(s){return Ep(s)?s:s<.5?.5*Q1(s*2,.1125,.45):.5+.5*J1(s*2-1,.1125,.45)},easeInBack(s){return s*s*((1.70158+1)*s-1.70158)},easeOutBack(s){return(s-=1)*s*((1.70158+1)*s+1.70158)+1},easeInOutBack(s){let t=1.70158;return(s/=.5)<1?.5*(s*s*(((t*=1.525)+1)*s-t)):.5*((s-=2)*s*(((t*=1.525)+1)*s+t)+2)},easeInBounce:s=>1-Jf.easeOutBounce(1-s),easeOutBounce(s){return s<1/2.75?7.5625*s*s:s<2/2.75?7.5625*(s-=1.5/2.75)*s+.75:s<2.5/2.75?7.5625*(s-=2.25/2.75)*s+.9375:7.5625*(s-=2.625/2.75)*s+.984375},easeInOutBounce:s=>s<.5?Jf.easeInBounce(s*2)*.5:Jf.easeOutBounce(s*2-1)*.5+.5};function t0(s){if(s&&typeof s=="object"){const t=s.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function Z1(s){return t0(s)?s:new rm(s)}function Ub(s){return t0(s)?s:new rm(s).saturate(.5).darken(.1).hexString()}const NF=["x","y","borderWidth","radius","tension"],wF=["color","borderColor","backgroundColor"];function _F(s){s.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),s.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),s.set("animations",{colors:{type:"color",properties:wF},numbers:{type:"number",properties:NF}}),s.describe("animations",{_fallback:"animation"}),s.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function SF(s){s.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const e2=new Map;function CF(s,t){t=t||{};const a=s+JSON.stringify(t);let n=e2.get(a);return n||(n=new Intl.NumberFormat(s,t),e2.set(a,n)),n}function Dm(s,t,a){return CF(t,a).format(s)}const GC={values(s){return en(s)?s:""+s},numeric(s,t,a){if(s===0)return"0";const n=this.chart.options.locale;let r,i=s;if(a.length>1){const h=Math.max(Math.abs(a[0].value),Math.abs(a[a.length-1].value));(h<1e-4||h>1e15)&&(r="scientific"),i=AF(s,a)}const o=Hd(Math.abs(i)),c=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),u={notation:r,minimumFractionDigits:c,maximumFractionDigits:c};return Object.assign(u,this.options.ticks.format),Dm(s,n,u)},logarithmic(s,t,a){if(s===0)return"0";const n=a[t].significand||s/Math.pow(10,Math.floor(Hd(s)));return[1,2,3,5,10,15].includes(n)||t>.8*a.length?GC.numeric.call(this,s,t,a):""}};function AF(s,t){let a=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(a)>=1&&s!==Math.floor(s)&&(a=s-Math.floor(s)),a}var rx={formatters:GC};function kF(s){s.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,a)=>a.lineWidth,tickColor:(t,a)=>a.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:rx.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),s.route("scale.ticks","color","","color"),s.route("scale.grid","color","","borderColor"),s.route("scale.border","color","","borderColor"),s.route("scale.title","color","","color"),s.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),s.describe("scales",{_fallback:"scale"}),s.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const Bu=Object.create(null),Yy=Object.create(null);function Zf(s,t){if(!t)return s;const a=t.split(".");for(let n=0,r=a.length;n<r;++n){const i=a[n];s=s[i]||(s[i]=Object.create(null))}return s}function Hb(s,t,a){return typeof t=="string"?im(Zf(s,t),a):im(Zf(s,""),t)}class DF{constructor(t,a){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=n=>n.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(n,r)=>Ub(r.backgroundColor),this.hoverBorderColor=(n,r)=>Ub(r.borderColor),this.hoverColor=(n,r)=>Ub(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(a)}set(t,a){return Hb(this,t,a)}get(t){return Zf(this,t)}describe(t,a){return Hb(Yy,t,a)}override(t,a){return Hb(Bu,t,a)}route(t,a,n,r){const i=Zf(this,t),o=Zf(this,n),c="_"+a;Object.defineProperties(i,{[c]:{value:i[a],writable:!0},[a]:{enumerable:!0,get(){const u=this[c],h=o[r];return Js(u)?Object.assign({},h,u):ks(u,h)},set(u){this[c]=u}}})}apply(t){t.forEach(a=>a(this))}}var tn=new DF({_scriptable:s=>!s.startsWith("on"),_indexable:s=>s!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[_F,SF,kF]);function EF(s){return!s||Hs(s.size)||Hs(s.family)?null:(s.style?s.style+" ":"")+(s.weight?s.weight+" ":"")+s.size+"px "+s.family}function Pg(s,t,a,n,r){let i=t[r];return i||(i=t[r]=s.measureText(r).width,a.push(r)),i>n&&(n=i),n}function TF(s,t,a,n){n=n||{};let r=n.data=n.data||{},i=n.garbageCollect=n.garbageCollect||[];n.font!==t&&(r=n.data={},i=n.garbageCollect=[],n.font=t),s.save(),s.font=t;let o=0;const c=a.length;let u,h,m,p,y;for(u=0;u<c;u++)if(p=a[u],p!=null&&!en(p))o=Pg(s,r,i,o,p);else if(en(p))for(h=0,m=p.length;h<m;h++)y=p[h],y!=null&&!en(y)&&(o=Pg(s,r,i,o,y));s.restore();const g=i.length/2;if(g>a.length){for(u=0;u<g;u++)delete r[i[u]];i.splice(0,g)}return o}function bu(s,t,a){const n=s.currentDevicePixelRatio,r=a!==0?Math.max(a/2,.5):0;return Math.round((t-r)*n)/n+r}function t2(s,t){!t&&!s||(t=t||s.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,s.width,s.height),t.restore())}function Ky(s,t,a,n){QC(s,t,a,n,null)}function QC(s,t,a,n,r){let i,o,c,u,h,m,p,y;const g=t.pointStyle,j=t.rotation,b=t.radius;let N=(j||0)*uF;if(g&&typeof g=="object"&&(i=g.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){s.save(),s.translate(a,n),s.rotate(N),s.drawImage(g,-g.width/2,-g.height/2,g.width,g.height),s.restore();return}if(!(isNaN(b)||b<=0)){switch(s.beginPath(),g){default:r?s.ellipse(a,n,r/2,b,0,0,Va):s.arc(a,n,b,0,Va),s.closePath();break;case"triangle":m=r?r/2:b,s.moveTo(a+Math.sin(N)*m,n-Math.cos(N)*b),N+=Y1,s.lineTo(a+Math.sin(N)*m,n-Math.cos(N)*b),N+=Y1,s.lineTo(a+Math.sin(N)*m,n-Math.cos(N)*b),s.closePath();break;case"rectRounded":h=b*.516,u=b-h,o=Math.cos(N+xu)*u,p=Math.cos(N+xu)*(r?r/2-h:u),c=Math.sin(N+xu)*u,y=Math.sin(N+xu)*(r?r/2-h:u),s.arc(a-p,n-c,h,N-la,N-En),s.arc(a+y,n-o,h,N-En,N),s.arc(a+p,n+c,h,N,N+En),s.arc(a-y,n+o,h,N+En,N+la),s.closePath();break;case"rect":if(!j){u=Math.SQRT1_2*b,m=r?r/2:u,s.rect(a-m,n-u,2*m,2*u);break}N+=xu;case"rectRot":p=Math.cos(N)*(r?r/2:b),o=Math.cos(N)*b,c=Math.sin(N)*b,y=Math.sin(N)*(r?r/2:b),s.moveTo(a-p,n-c),s.lineTo(a+y,n-o),s.lineTo(a+p,n+c),s.lineTo(a-y,n+o),s.closePath();break;case"crossRot":N+=xu;case"cross":p=Math.cos(N)*(r?r/2:b),o=Math.cos(N)*b,c=Math.sin(N)*b,y=Math.sin(N)*(r?r/2:b),s.moveTo(a-p,n-c),s.lineTo(a+p,n+c),s.moveTo(a+y,n-o),s.lineTo(a-y,n+o);break;case"star":p=Math.cos(N)*(r?r/2:b),o=Math.cos(N)*b,c=Math.sin(N)*b,y=Math.sin(N)*(r?r/2:b),s.moveTo(a-p,n-c),s.lineTo(a+p,n+c),s.moveTo(a+y,n-o),s.lineTo(a-y,n+o),N+=xu,p=Math.cos(N)*(r?r/2:b),o=Math.cos(N)*b,c=Math.sin(N)*b,y=Math.sin(N)*(r?r/2:b),s.moveTo(a-p,n-c),s.lineTo(a+p,n+c),s.moveTo(a+y,n-o),s.lineTo(a-y,n+o);break;case"line":o=r?r/2:Math.cos(N)*b,c=Math.sin(N)*b,s.moveTo(a-o,n-c),s.lineTo(a+o,n+c);break;case"dash":s.moveTo(a,n),s.lineTo(a+Math.cos(N)*(r?r/2:b),n+Math.sin(N)*b);break;case!1:s.closePath();break}s.fill(),t.borderWidth>0&&s.stroke()}}function Jc(s,t,a){return a=a||.5,!t||s&&s.x>t.left-a&&s.x<t.right+a&&s.y>t.top-a&&s.y<t.bottom+a}function ix(s,t){s.save(),s.beginPath(),s.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),s.clip()}function lx(s){s.restore()}function LF(s,t,a,n,r){if(!t)return s.lineTo(a.x,a.y);if(r==="middle"){const i=(t.x+a.x)/2;s.lineTo(i,t.y),s.lineTo(i,a.y)}else r==="after"!=!!n?s.lineTo(t.x,a.y):s.lineTo(a.x,t.y);s.lineTo(a.x,a.y)}function PF(s,t,a,n){if(!t)return s.lineTo(a.x,a.y);s.bezierCurveTo(n?t.cp1x:t.cp2x,n?t.cp1y:t.cp2y,n?a.cp2x:a.cp1x,n?a.cp2y:a.cp1y,a.x,a.y)}function FF(s,t){t.translation&&s.translate(t.translation[0],t.translation[1]),Hs(t.rotation)||s.rotate(t.rotation),t.color&&(s.fillStyle=t.color),t.textAlign&&(s.textAlign=t.textAlign),t.textBaseline&&(s.textBaseline=t.textBaseline)}function IF(s,t,a,n,r){if(r.strikethrough||r.underline){const i=s.measureText(n),o=t-i.actualBoundingBoxLeft,c=t+i.actualBoundingBoxRight,u=a-i.actualBoundingBoxAscent,h=a+i.actualBoundingBoxDescent,m=r.strikethrough?(u+h)/2:h;s.strokeStyle=s.fillStyle,s.beginPath(),s.lineWidth=r.decorationWidth||2,s.moveTo(o,m),s.lineTo(c,m),s.stroke()}}function OF(s,t){const a=s.fillStyle;s.fillStyle=t.color,s.fillRect(t.left,t.top,t.width,t.height),s.fillStyle=a}function zu(s,t,a,n,r,i={}){const o=en(t)?t:[t],c=i.strokeWidth>0&&i.strokeColor!=="";let u,h;for(s.save(),s.font=r.string,FF(s,i),u=0;u<o.length;++u)h=o[u],i.backdrop&&OF(s,i.backdrop),c&&(i.strokeColor&&(s.strokeStyle=i.strokeColor),Hs(i.strokeWidth)||(s.lineWidth=i.strokeWidth),s.strokeText(h,a,n,i.maxWidth)),s.fillText(h,a,n,i.maxWidth),IF(s,a,n,h,i),n+=Number(r.lineHeight);s.restore()}function cm(s,t){const{x:a,y:n,w:r,h:i,radius:o}=t;s.arc(a+o.topLeft,n+o.topLeft,o.topLeft,1.5*la,la,!0),s.lineTo(a,n+i-o.bottomLeft),s.arc(a+o.bottomLeft,n+i-o.bottomLeft,o.bottomLeft,la,En,!0),s.lineTo(a+r-o.bottomRight,n+i),s.arc(a+r-o.bottomRight,n+i-o.bottomRight,o.bottomRight,En,0,!0),s.lineTo(a+r,n+o.topRight),s.arc(a+r-o.topRight,n+o.topRight,o.topRight,0,-En,!0),s.lineTo(a+o.topLeft,n)}const MF=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,RF=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function BF(s,t){const a=(""+s).match(MF);if(!a||a[1]==="normal")return t*1.2;switch(s=+a[2],a[3]){case"px":return s;case"%":s/=100;break}return t*s}const zF=s=>+s||0;function s0(s,t){const a={},n=Js(t),r=n?Object.keys(t):t,i=Js(s)?n?o=>ks(s[o],s[t[o]]):o=>s[o]:()=>s;for(const o of r)a[o]=zF(i(o));return a}function JC(s){return s0(s,{top:"y",right:"x",bottom:"y",left:"x"})}function Lu(s){return s0(s,["topLeft","topRight","bottomLeft","bottomRight"])}function ti(s){const t=JC(s);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function rr(s,t){s=s||{},t=t||tn.font;let a=ks(s.size,t.size);typeof a=="string"&&(a=parseInt(a,10));let n=ks(s.style,t.style);n&&!(""+n).match(RF)&&(console.warn('Invalid font style specified: "'+n+'"'),n=void 0);const r={family:ks(s.family,t.family),lineHeight:BF(ks(s.lineHeight,t.lineHeight),a),size:a,style:n,weight:ks(s.weight,t.weight),string:""};return r.string=EF(r),r}function Yf(s,t,a,n){let r,i,o;for(r=0,i=s.length;r<i;++r)if(o=s[r],o!==void 0&&o!==void 0)return o}function qF(s,t,a){const{min:n,max:r}=s,i=zC(t,(r-n)/2),o=(c,u)=>a&&c===0?0:c+u;return{min:o(n,-Math.abs(i)),max:o(r,i)}}function Jd(s,t){return Object.assign(Object.create(s),t)}function a0(s,t=[""],a,n,r=()=>s[0]){const i=a||s;typeof n>"u"&&(n=s5("_fallback",s));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:s,_rootScopes:i,_fallback:n,_getTarget:r,override:c=>a0([c,...s],t,i,n)};return new Proxy(o,{deleteProperty(c,u){return delete c[u],delete c._keys,delete s[0][u],!0},get(c,u){return e5(c,u,()=>XF(u,t,s,c))},getOwnPropertyDescriptor(c,u){return Reflect.getOwnPropertyDescriptor(c._scopes[0],u)},getPrototypeOf(){return Reflect.getPrototypeOf(s[0])},has(c,u){return a2(c).includes(u)},ownKeys(c){return a2(c)},set(c,u,h){const m=c._storage||(c._storage=r());return c[u]=m[u]=h,delete c._keys,!0}})}function Uh(s,t,a,n){const r={_cacheable:!1,_proxy:s,_context:t,_subProxy:a,_stack:new Set,_descriptors:ZC(s,n),setContext:i=>Uh(s,i,a,n),override:i=>Uh(s.override(i),t,a,n)};return new Proxy(r,{deleteProperty(i,o){return delete i[o],delete s[o],!0},get(i,o,c){return e5(i,o,()=>HF(i,o,c))},getOwnPropertyDescriptor(i,o){return i._descriptors.allKeys?Reflect.has(s,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(s,o)},getPrototypeOf(){return Reflect.getPrototypeOf(s)},has(i,o){return Reflect.has(s,o)},ownKeys(){return Reflect.ownKeys(s)},set(i,o,c){return s[o]=c,delete i[o],!0}})}function ZC(s,t={scriptable:!0,indexable:!0}){const{_scriptable:a=t.scriptable,_indexable:n=t.indexable,_allKeys:r=t.allKeys}=s;return{allKeys:r,scriptable:a,indexable:n,isScriptable:Gd(a)?a:()=>a,isIndexable:Gd(n)?n:()=>n}}const UF=(s,t)=>s?s+Qv(t):t,n0=(s,t)=>Js(t)&&s!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function e5(s,t,a){if(Object.prototype.hasOwnProperty.call(s,t)||t==="constructor")return s[t];const n=a();return s[t]=n,n}function HF(s,t,a){const{_proxy:n,_context:r,_subProxy:i,_descriptors:o}=s;let c=n[t];return Gd(c)&&o.isScriptable(t)&&(c=$F(t,c,s,a)),en(c)&&c.length&&(c=VF(t,c,s,o.isIndexable)),n0(t,c)&&(c=Uh(c,r,i&&i[t],o)),c}function $F(s,t,a,n){const{_proxy:r,_context:i,_subProxy:o,_stack:c}=a;if(c.has(s))throw new Error("Recursion detected: "+Array.from(c).join("->")+"->"+s);c.add(s);let u=t(i,o||n);return c.delete(s),n0(s,u)&&(u=r0(r._scopes,r,s,u)),u}function VF(s,t,a,n){const{_proxy:r,_context:i,_subProxy:o,_descriptors:c}=a;if(typeof i.index<"u"&&n(s))return t[i.index%t.length];if(Js(t[0])){const u=t,h=r._scopes.filter(m=>m!==u);t=[];for(const m of u){const p=r0(h,r,s,m);t.push(Uh(p,i,o&&o[s],c))}}return t}function t5(s,t,a){return Gd(s)?s(t,a):s}const WF=(s,t)=>s===!0?t:typeof s=="string"?Xd(t,s):void 0;function YF(s,t,a,n,r){for(const i of t){const o=WF(a,i);if(o){s.add(o);const c=t5(o._fallback,a,r);if(typeof c<"u"&&c!==a&&c!==n)return c}else if(o===!1&&typeof n<"u"&&a!==n)return null}return!1}function r0(s,t,a,n){const r=t._rootScopes,i=t5(t._fallback,a,n),o=[...s,...r],c=new Set;c.add(n);let u=s2(c,o,a,i||a,n);return u===null||typeof i<"u"&&i!==a&&(u=s2(c,o,i,u,n),u===null)?!1:a0(Array.from(c),[""],r,i,()=>KF(t,a,n))}function s2(s,t,a,n,r){for(;a;)a=YF(s,t,a,n,r);return a}function KF(s,t,a){const n=s._getTarget();t in n||(n[t]={});const r=n[t];return en(r)&&Js(a)?a:r||{}}function XF(s,t,a,n){let r;for(const i of t)if(r=s5(UF(i,s),a),typeof r<"u")return n0(s,r)?r0(a,n,s,r):r}function s5(s,t){for(const a of t){if(!a)continue;const n=a[s];if(typeof n<"u")return n}}function a2(s){let t=s._keys;return t||(t=s._keys=GF(s._scopes)),t}function GF(s){const t=new Set;for(const a of s)for(const n of Object.keys(a).filter(r=>!r.startsWith("_")))t.add(n);return Array.from(t)}function a5(s,t,a,n){const{iScale:r}=s,{key:i="r"}=this._parsing,o=new Array(n);let c,u,h,m;for(c=0,u=n;c<u;++c)h=c+a,m=t[h],o[c]={r:r.parse(Xd(m,i),h)};return o}const QF=Number.EPSILON||1e-14,Hh=(s,t)=>t<s.length&&!s[t].skip&&s[t],n5=s=>s==="x"?"y":"x";function JF(s,t,a,n){const r=s.skip?t:s,i=t,o=a.skip?t:a,c=Wy(i,r),u=Wy(o,i);let h=c/(c+u),m=u/(c+u);h=isNaN(h)?0:h,m=isNaN(m)?0:m;const p=n*h,y=n*m;return{previous:{x:i.x-p*(o.x-r.x),y:i.y-p*(o.y-r.y)},next:{x:i.x+y*(o.x-r.x),y:i.y+y*(o.y-r.y)}}}function ZF(s,t,a){const n=s.length;let r,i,o,c,u,h=Hh(s,0);for(let m=0;m<n-1;++m)if(u=h,h=Hh(s,m+1),!(!u||!h)){if(Qf(t[m],0,QF)){a[m]=a[m+1]=0;continue}r=a[m]/t[m],i=a[m+1]/t[m],c=Math.pow(r,2)+Math.pow(i,2),!(c<=9)&&(o=3/Math.sqrt(c),a[m]=r*o*t[m],a[m+1]=i*o*t[m])}}function eI(s,t,a="x"){const n=n5(a),r=s.length;let i,o,c,u=Hh(s,0);for(let h=0;h<r;++h){if(o=c,c=u,u=Hh(s,h+1),!c)continue;const m=c[a],p=c[n];o&&(i=(m-o[a])/3,c[`cp1${a}`]=m-i,c[`cp1${n}`]=p-i*t[h]),u&&(i=(u[a]-m)/3,c[`cp2${a}`]=m+i,c[`cp2${n}`]=p+i*t[h])}}function tI(s,t="x"){const a=n5(t),n=s.length,r=Array(n).fill(0),i=Array(n);let o,c,u,h=Hh(s,0);for(o=0;o<n;++o)if(c=u,u=h,h=Hh(s,o+1),!!u){if(h){const m=h[t]-u[t];r[o]=m!==0?(h[a]-u[a])/m:0}i[o]=c?h?ac(r[o-1])!==ac(r[o])?0:(r[o-1]+r[o])/2:r[o-1]:r[o]}ZF(s,r,i),eI(s,i,t)}function Tp(s,t,a){return Math.max(Math.min(s,a),t)}function sI(s,t){let a,n,r,i,o,c=Jc(s[0],t);for(a=0,n=s.length;a<n;++a)o=i,i=c,c=a<n-1&&Jc(s[a+1],t),i&&(r=s[a],o&&(r.cp1x=Tp(r.cp1x,t.left,t.right),r.cp1y=Tp(r.cp1y,t.top,t.bottom)),c&&(r.cp2x=Tp(r.cp2x,t.left,t.right),r.cp2y=Tp(r.cp2y,t.top,t.bottom)))}function aI(s,t,a,n,r){let i,o,c,u;if(t.spanGaps&&(s=s.filter(h=>!h.skip)),t.cubicInterpolationMode==="monotone")tI(s,r);else{let h=n?s[s.length-1]:s[0];for(i=0,o=s.length;i<o;++i)c=s[i],u=JF(h,c,s[Math.min(i+1,o-(n?0:1))%o],t.tension),c.cp1x=u.previous.x,c.cp1y=u.previous.y,c.cp2x=u.next.x,c.cp2y=u.next.y,h=c}t.capBezierPoints&&sI(s,a)}function i0(){return typeof window<"u"&&typeof document<"u"}function l0(s){let t=s.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function Fg(s,t,a){let n;return typeof s=="string"?(n=parseInt(s,10),s.indexOf("%")!==-1&&(n=n/100*t.parentNode[a])):n=s,n}const ox=s=>s.ownerDocument.defaultView.getComputedStyle(s,null);function nI(s,t){return ox(s).getPropertyValue(t)}const rI=["top","right","bottom","left"];function Pu(s,t,a){const n={};a=a?"-"+a:"";for(let r=0;r<4;r++){const i=rI[r];n[i]=parseFloat(s[t+"-"+i+a])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}const iI=(s,t,a)=>(s>0||t>0)&&(!a||!a.shadowRoot);function lI(s,t){const a=s.touches,n=a&&a.length?a[0]:s,{offsetX:r,offsetY:i}=n;let o=!1,c,u;if(iI(r,i,s.target))c=r,u=i;else{const h=t.getBoundingClientRect();c=n.clientX-h.left,u=n.clientY-h.top,o=!0}return{x:c,y:u,box:o}}function wu(s,t){if("native"in s)return s;const{canvas:a,currentDevicePixelRatio:n}=t,r=ox(a),i=r.boxSizing==="border-box",o=Pu(r,"padding"),c=Pu(r,"border","width"),{x:u,y:h,box:m}=lI(s,a),p=o.left+(m&&c.left),y=o.top+(m&&c.top);let{width:g,height:j}=t;return i&&(g-=o.width+c.width,j-=o.height+c.height),{x:Math.round((u-p)/g*a.width/n),y:Math.round((h-y)/j*a.height/n)}}function oI(s,t,a){let n,r;if(t===void 0||a===void 0){const i=s&&l0(s);if(!i)t=s.clientWidth,a=s.clientHeight;else{const o=i.getBoundingClientRect(),c=ox(i),u=Pu(c,"border","width"),h=Pu(c,"padding");t=o.width-h.width-u.width,a=o.height-h.height-u.height,n=Fg(c.maxWidth,i,"clientWidth"),r=Fg(c.maxHeight,i,"clientHeight")}}return{width:t,height:a,maxWidth:n||Lg,maxHeight:r||Lg}}const $d=s=>Math.round(s*10)/10;function cI(s,t,a,n){const r=ox(s),i=Pu(r,"margin"),o=Fg(r.maxWidth,s,"clientWidth")||Lg,c=Fg(r.maxHeight,s,"clientHeight")||Lg,u=oI(s,t,a);let{width:h,height:m}=u;if(r.boxSizing==="content-box"){const y=Pu(r,"border","width"),g=Pu(r,"padding");h-=g.width+y.width,m-=g.height+y.height}return h=Math.max(0,h-i.width),m=Math.max(0,n?h/n:m-i.height),h=$d(Math.min(h,o,u.maxWidth)),m=$d(Math.min(m,c,u.maxHeight)),h&&!m&&(m=$d(h/2)),(t!==void 0||a!==void 0)&&n&&u.height&&m>u.height&&(m=u.height,h=$d(Math.floor(m*n))),{width:h,height:m}}function n2(s,t,a){const n=t||1,r=$d(s.height*n),i=$d(s.width*n);s.height=$d(s.height),s.width=$d(s.width);const o=s.canvas;return o.style&&(a||!o.style.height&&!o.style.width)&&(o.style.height=`${s.height}px`,o.style.width=`${s.width}px`),s.currentDevicePixelRatio!==n||o.height!==r||o.width!==i?(s.currentDevicePixelRatio=n,o.height=r,o.width=i,s.ctx.setTransform(n,0,0,n,0,0),!0):!1}const dI=(function(){let s=!1;try{const t={get passive(){return s=!0,!1}};i0()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return s})();function r2(s,t){const a=nI(s,t),n=a&&a.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function _u(s,t,a,n){return{x:s.x+a*(t.x-s.x),y:s.y+a*(t.y-s.y)}}function uI(s,t,a,n){return{x:s.x+a*(t.x-s.x),y:n==="middle"?a<.5?s.y:t.y:n==="after"?a<1?s.y:t.y:a>0?t.y:s.y}}function hI(s,t,a,n){const r={x:s.cp2x,y:s.cp2y},i={x:t.cp1x,y:t.cp1y},o=_u(s,r,a),c=_u(r,i,a),u=_u(i,t,a),h=_u(o,c,a),m=_u(c,u,a);return _u(h,m,a)}const fI=function(s,t){return{x(a){return s+s+t-a},setWidth(a){t=a},textAlign(a){return a==="center"?a:a==="right"?"left":"right"},xPlus(a,n){return a-n},leftForLtr(a,n){return a-n}}},mI=function(){return{x(s){return s},setWidth(s){},textAlign(s){return s},xPlus(s,t){return s+t},leftForLtr(s,t){return s}}};function Lh(s,t,a){return s?fI(t,a):mI()}function r5(s,t){let a,n;(t==="ltr"||t==="rtl")&&(a=s.canvas.style,n=[a.getPropertyValue("direction"),a.getPropertyPriority("direction")],a.setProperty("direction",t,"important"),s.prevTextDirection=n)}function i5(s,t){t!==void 0&&(delete s.prevTextDirection,s.canvas.style.setProperty("direction",t[0],t[1]))}function l5(s){return s==="angle"?{between:om,compare:pF,normalize:Qr}:{between:Gc,compare:(t,a)=>t-a,normalize:t=>t}}function i2({start:s,end:t,count:a,loop:n,style:r}){return{start:s%a,end:t%a,loop:n&&(t-s+1)%a===0,style:r}}function pI(s,t,a){const{property:n,start:r,end:i}=a,{between:o,normalize:c}=l5(n),u=t.length;let{start:h,end:m,loop:p}=s,y,g;if(p){for(h+=u,m+=u,y=0,g=u;y<g&&o(c(t[h%u][n]),r,i);++y)h--,m--;h%=u,m%=u}return m<h&&(m+=u),{start:h,end:m,loop:p,style:s.style}}function o5(s,t,a){if(!a)return[s];const{property:n,start:r,end:i}=a,o=t.length,{compare:c,between:u,normalize:h}=l5(n),{start:m,end:p,loop:y,style:g}=pI(s,t,a),j=[];let b=!1,N=null,v,S,E;const L=()=>u(r,E,v)&&c(r,E)!==0,z=()=>c(i,v)===0||u(i,E,v),V=()=>b||L(),te=()=>!b||z();for(let q=m,B=m;q<=p;++q)S=t[q%o],!S.skip&&(v=h(S[n]),v!==E&&(b=u(v,r,i),N===null&&V()&&(N=c(v,r)===0?q:B),N!==null&&te()&&(j.push(i2({start:N,end:q,loop:y,count:o,style:g})),N=null),B=q,E=v));return N!==null&&j.push(i2({start:N,end:p,loop:y,count:o,style:g})),j}function c5(s,t){const a=[],n=s.segments;for(let r=0;r<n.length;r++){const i=o5(n[r],s.points,t);i.length&&a.push(...i)}return a}function gI(s,t,a,n){let r=0,i=t-1;if(a&&!n)for(;r<t&&!s[r].skip;)r++;for(;r<t&&s[r].skip;)r++;for(r%=t,a&&(i+=r);i>r&&s[i%t].skip;)i--;return i%=t,{start:r,end:i}}function xI(s,t,a,n){const r=s.length,i=[];let o=t,c=s[t],u;for(u=t+1;u<=a;++u){const h=s[u%r];h.skip||h.stop?c.skip||(n=!1,i.push({start:t%r,end:(u-1)%r,loop:n}),t=o=h.stop?u:null):(o=u,c.skip&&(t=u)),c=h}return o!==null&&i.push({start:t%r,end:o%r,loop:n}),i}function bI(s,t){const a=s.points,n=s.options.spanGaps,r=a.length;if(!r)return[];const i=!!s._loop,{start:o,end:c}=gI(a,r,i,n);if(n===!0)return l2(s,[{start:o,end:c,loop:i}],a,t);const u=c<o?c+r:c,h=!!s._fullLoop&&o===0&&c===r-1;return l2(s,xI(a,o,u,h),a,t)}function l2(s,t,a,n){return!n||!n.setContext||!a?t:yI(s,t,a,n)}function yI(s,t,a,n){const r=s._chart.getContext(),i=o2(s.options),{_datasetIndex:o,options:{spanGaps:c}}=s,u=a.length,h=[];let m=i,p=t[0].start,y=p;function g(j,b,N,v){const S=c?-1:1;if(j!==b){for(j+=u;a[j%u].skip;)j-=S;for(;a[b%u].skip;)b+=S;j%u!==b%u&&(h.push({start:j%u,end:b%u,loop:N,style:v}),m=v,p=b%u)}}for(const j of t){p=c?p:j.start;let b=a[p%u],N;for(y=p+1;y<=j.end;y++){const v=a[y%u];N=o2(n.setContext(Jd(r,{type:"segment",p0:b,p1:v,p0DataIndex:(y-1)%u,p1DataIndex:y%u,datasetIndex:o}))),vI(N,m)&&g(p,y-1,j.loop,m),b=v,m=N}p<y-1&&g(p,y-1,j.loop,m)}return h}function o2(s){return{backgroundColor:s.backgroundColor,borderCapStyle:s.borderCapStyle,borderDash:s.borderDash,borderDashOffset:s.borderDashOffset,borderJoinStyle:s.borderJoinStyle,borderWidth:s.borderWidth,borderColor:s.borderColor}}function vI(s,t){if(!t)return!1;const a=[],n=function(r,i){return t0(i)?(a.includes(i)||a.push(i),a.indexOf(i)):i};return JSON.stringify(s,n)!==JSON.stringify(t,n)}function Lp(s,t,a){return s.options.clip?s[a]:t[a]}function jI(s,t){const{xScale:a,yScale:n}=s;return a&&n?{left:Lp(a,t,"left"),right:Lp(a,t,"right"),top:Lp(n,t,"top"),bottom:Lp(n,t,"bottom")}:t}function d5(s,t){const a=t._clip;if(a.disabled)return!1;const n=jI(t,s.chartArea);return{left:a.left===!1?0:n.left-(a.left===!0?0:a.left),right:a.right===!1?s.width:n.right+(a.right===!0?0:a.right),top:a.top===!1?0:n.top-(a.top===!0?0:a.top),bottom:a.bottom===!1?s.height:n.bottom+(a.bottom===!0?0:a.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class NI{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,a,n,r){const i=a.listeners[r],o=a.duration;i.forEach(c=>c({chart:t,initial:a.initial,numSteps:o,currentStep:Math.min(n-a.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=WC.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let a=0;this._charts.forEach((n,r)=>{if(!n.running||!n.items.length)return;const i=n.items;let o=i.length-1,c=!1,u;for(;o>=0;--o)u=i[o],u._active?(u._total>n.duration&&(n.duration=u._total),u.tick(t),c=!0):(i[o]=i[i.length-1],i.pop());c&&(r.draw(),this._notify(r,n,t,"progress")),i.length||(n.running=!1,this._notify(r,n,t,"complete"),n.initial=!1),a+=i.length}),this._lastDate=t,a===0&&(this._running=!1)}_getAnims(t){const a=this._charts;let n=a.get(t);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},a.set(t,n)),n}listen(t,a,n){this._getAnims(t).listeners[a].push(n)}add(t,a){!a||!a.length||this._getAnims(t).items.push(...a)}has(t){return this._getAnims(t).items.length>0}start(t){const a=this._charts.get(t);a&&(a.running=!0,a.start=Date.now(),a.duration=a.items.reduce((n,r)=>Math.max(n,r._duration),0),this._refresh())}running(t){if(!this._running)return!1;const a=this._charts.get(t);return!(!a||!a.running||!a.items.length)}stop(t){const a=this._charts.get(t);if(!a||!a.items.length)return;const n=a.items;let r=n.length-1;for(;r>=0;--r)n[r].cancel();a.items=[],this._notify(t,a,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var Vc=new NI;const c2="transparent",wI={boolean(s,t,a){return a>.5?t:s},color(s,t,a){const n=Z1(s||c2),r=n.valid&&Z1(t||c2);return r&&r.valid?r.mix(n,a).hexString():t},number(s,t,a){return s+(t-s)*a}};class _I{constructor(t,a,n,r){const i=a[n];r=Yf([t.to,r,i,t.from]);const o=Yf([t.from,i,r]);this._active=!0,this._fn=t.fn||wI[t.type||typeof o],this._easing=Jf[t.easing]||Jf.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=a,this._prop=n,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(t,a,n){if(this._active){this._notify(!1);const r=this._target[this._prop],i=n-this._start,o=this._duration-i;this._start=n,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=i,this._loop=!!t.loop,this._to=Yf([t.to,a,r,t.from]),this._from=Yf([t.from,r,a])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const a=t-this._start,n=this._duration,r=this._prop,i=this._from,o=this._loop,c=this._to;let u;if(this._active=i!==c&&(o||a<n),!this._active){this._target[r]=c,this._notify(!0);return}if(a<0){this._target[r]=i;return}u=a/n%2,u=o&&u>1?2-u:u,u=this._easing(Math.min(1,Math.max(0,u))),this._target[r]=this._fn(i,c,u)}wait(){const t=this._promises||(this._promises=[]);return new Promise((a,n)=>{t.push({res:a,rej:n})})}_notify(t){const a=t?"res":"rej",n=this._promises||[];for(let r=0;r<n.length;r++)n[r][a]()}}class u5{constructor(t,a){this._chart=t,this._properties=new Map,this.configure(a)}configure(t){if(!Js(t))return;const a=Object.keys(tn.animation),n=this._properties;Object.getOwnPropertyNames(t).forEach(r=>{const i=t[r];if(!Js(i))return;const o={};for(const c of a)o[c]=i[c];(en(i.properties)&&i.properties||[r]).forEach(c=>{(c===r||!n.has(c))&&n.set(c,o)})})}_animateOptions(t,a){const n=a.options,r=CI(t,n);if(!r)return[];const i=this._createAnimations(r,n);return n.$shared&&SI(t.options.$animations,n).then(()=>{t.options=n},()=>{}),i}_createAnimations(t,a){const n=this._properties,r=[],i=t.$animations||(t.$animations={}),o=Object.keys(a),c=Date.now();let u;for(u=o.length-1;u>=0;--u){const h=o[u];if(h.charAt(0)==="$")continue;if(h==="options"){r.push(...this._animateOptions(t,a));continue}const m=a[h];let p=i[h];const y=n.get(h);if(p)if(y&&p.active()){p.update(y,m,c);continue}else p.cancel();if(!y||!y.duration){t[h]=m;continue}i[h]=p=new _I(y,t,h,m),r.push(p)}return r}update(t,a){if(this._properties.size===0){Object.assign(t,a);return}const n=this._createAnimations(t,a);if(n.length)return Vc.add(this._chart,n),!0}}function SI(s,t){const a=[],n=Object.keys(t);for(let r=0;r<n.length;r++){const i=s[n[r]];i&&i.active()&&a.push(i.wait())}return Promise.all(a)}function CI(s,t){if(!t)return;let a=s.options;if(!a){s.options=t;return}return a.$shared&&(s.options=a=Object.assign({},a,{$shared:!1,$animations:{}})),a}function d2(s,t){const a=s&&s.options||{},n=a.reverse,r=a.min===void 0?t:0,i=a.max===void 0?t:0;return{start:n?i:r,end:n?r:i}}function AI(s,t,a){if(a===!1)return!1;const n=d2(s,a),r=d2(t,a);return{top:r.end,right:n.end,bottom:r.start,left:n.start}}function kI(s){let t,a,n,r;return Js(s)?(t=s.top,a=s.right,n=s.bottom,r=s.left):t=a=n=r=s,{top:t,right:a,bottom:n,left:r,disabled:s===!1}}function h5(s,t){const a=[],n=s._getSortedDatasetMetas(t);let r,i;for(r=0,i=n.length;r<i;++r)a.push(n[r].index);return a}function u2(s,t,a,n={}){const r=s.keys,i=n.mode==="single";let o,c,u,h;if(t===null)return;let m=!1;for(o=0,c=r.length;o<c;++o){if(u=+r[o],u===a){if(m=!0,n.all)continue;break}h=s.values[u],gn(h)&&(i||t===0||ac(t)===ac(h))&&(t+=h)}return!m&&!n.all?0:t}function DI(s,t){const{iScale:a,vScale:n}=t,r=a.axis==="x"?"x":"y",i=n.axis==="x"?"x":"y",o=Object.keys(s),c=new Array(o.length);let u,h,m;for(u=0,h=o.length;u<h;++u)m=o[u],c[u]={[r]:m,[i]:s[m]};return c}function $b(s,t){const a=s&&s.options.stacked;return a||a===void 0&&t.stack!==void 0}function EI(s,t,a){return`${s.id}.${t.id}.${a.stack||a.type}`}function TI(s){const{min:t,max:a,minDefined:n,maxDefined:r}=s.getUserBounds();return{min:n?t:Number.NEGATIVE_INFINITY,max:r?a:Number.POSITIVE_INFINITY}}function LI(s,t,a){const n=s[t]||(s[t]={});return n[a]||(n[a]={})}function h2(s,t,a,n){for(const r of t.getMatchingVisibleMetas(n).reverse()){const i=s[r.index];if(a&&i>0||!a&&i<0)return r.index}return null}function f2(s,t){const{chart:a,_cachedMeta:n}=s,r=a._stacks||(a._stacks={}),{iScale:i,vScale:o,index:c}=n,u=i.axis,h=o.axis,m=EI(i,o,n),p=t.length;let y;for(let g=0;g<p;++g){const j=t[g],{[u]:b,[h]:N}=j,v=j._stacks||(j._stacks={});y=v[h]=LI(r,m,b),y[c]=N,y._top=h2(y,o,!0,n.type),y._bottom=h2(y,o,!1,n.type);const S=y._visualValues||(y._visualValues={});S[c]=N}}function Vb(s,t){const a=s.scales;return Object.keys(a).filter(n=>a[n].axis===t).shift()}function PI(s,t){return Jd(s,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function FI(s,t,a){return Jd(s,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:a,index:t,mode:"default",type:"data"})}function Pf(s,t){const a=s.controller.index,n=s.vScale&&s.vScale.axis;if(n){t=t||s._parsed;for(const r of t){const i=r._stacks;if(!i||i[n]===void 0||i[n][a]===void 0)return;delete i[n][a],i[n]._visualValues!==void 0&&i[n]._visualValues[a]!==void 0&&delete i[n]._visualValues[a]}}}const Wb=s=>s==="reset"||s==="none",m2=(s,t)=>t?s:Object.assign({},s),II=(s,t,a)=>s&&!t.hidden&&t._stacked&&{keys:h5(a,!0),values:null};class Zd{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,a){this.chart=t,this._ctx=t.ctx,this.index=a,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=$b(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&Pf(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,a=this._cachedMeta,n=this.getDataset(),r=(p,y,g,j)=>p==="x"?y:p==="r"?j:g,i=a.xAxisID=ks(n.xAxisID,Vb(t,"x")),o=a.yAxisID=ks(n.yAxisID,Vb(t,"y")),c=a.rAxisID=ks(n.rAxisID,Vb(t,"r")),u=a.indexAxis,h=a.iAxisID=r(u,i,o,c),m=a.vAxisID=r(u,o,i,c);a.xScale=this.getScaleForId(i),a.yScale=this.getScaleForId(o),a.rScale=this.getScaleForId(c),a.iScale=this.getScaleForId(h),a.vScale=this.getScaleForId(m)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const a=this._cachedMeta;return t===a.iScale?a.vScale:a.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&G1(this._data,this),t._stacked&&Pf(t)}_dataCheck(){const t=this.getDataset(),a=t.data||(t.data=[]),n=this._data;if(Js(a)){const r=this._cachedMeta;this._data=DI(a,r)}else if(n!==a){if(n){G1(n,this);const r=this._cachedMeta;Pf(r),r._parsed=[]}a&&Object.isExtensible(a)&&yF(a,this),this._syncList=[],this._data=a}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const a=this._cachedMeta,n=this.getDataset();let r=!1;this._dataCheck();const i=a._stacked;a._stacked=$b(a.vScale,a),a.stack!==n.stack&&(r=!0,Pf(a),a.stack=n.stack),this._resyncElements(t),(r||i!==a._stacked)&&(f2(this,a._parsed),a._stacked=$b(a.vScale,a))}configure(){const t=this.chart.config,a=t.datasetScopeKeys(this._type),n=t.getOptionScopes(this.getDataset(),a,!0);this.options=t.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,a){const{_cachedMeta:n,_data:r}=this,{iScale:i,_stacked:o}=n,c=i.axis;let u=t===0&&a===r.length?!0:n._sorted,h=t>0&&n._parsed[t-1],m,p,y;if(this._parsing===!1)n._parsed=r,n._sorted=!0,y=r;else{en(r[t])?y=this.parseArrayData(n,r,t,a):Js(r[t])?y=this.parseObjectData(n,r,t,a):y=this.parsePrimitiveData(n,r,t,a);const g=()=>p[c]===null||h&&p[c]<h[c];for(m=0;m<a;++m)n._parsed[m+t]=p=y[m],u&&(g()&&(u=!1),h=p);n._sorted=u}o&&f2(this,y)}parsePrimitiveData(t,a,n,r){const{iScale:i,vScale:o}=t,c=i.axis,u=o.axis,h=i.getLabels(),m=i===o,p=new Array(r);let y,g,j;for(y=0,g=r;y<g;++y)j=y+n,p[y]={[c]:m||i.parse(h[j],j),[u]:o.parse(a[j],j)};return p}parseArrayData(t,a,n,r){const{xScale:i,yScale:o}=t,c=new Array(r);let u,h,m,p;for(u=0,h=r;u<h;++u)m=u+n,p=a[m],c[u]={x:i.parse(p[0],m),y:o.parse(p[1],m)};return c}parseObjectData(t,a,n,r){const{xScale:i,yScale:o}=t,{xAxisKey:c="x",yAxisKey:u="y"}=this._parsing,h=new Array(r);let m,p,y,g;for(m=0,p=r;m<p;++m)y=m+n,g=a[y],h[m]={x:i.parse(Xd(g,c),y),y:o.parse(Xd(g,u),y)};return h}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,a,n){const r=this.chart,i=this._cachedMeta,o=a[t.axis],c={keys:h5(r,!0),values:a._stacks[t.axis]._visualValues};return u2(c,o,i.index,{mode:n})}updateRangeFromParsed(t,a,n,r){const i=n[a.axis];let o=i===null?NaN:i;const c=r&&n._stacks[a.axis];r&&c&&(r.values=c,o=u2(r,i,this._cachedMeta.index)),t.min=Math.min(t.min,o),t.max=Math.max(t.max,o)}getMinMax(t,a){const n=this._cachedMeta,r=n._parsed,i=n._sorted&&t===n.iScale,o=r.length,c=this._getOtherScale(t),u=II(a,n,this.chart),h={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:m,max:p}=TI(c);let y,g;function j(){g=r[y];const b=g[c.axis];return!gn(g[t.axis])||m>b||p<b}for(y=0;y<o&&!(!j()&&(this.updateRangeFromParsed(h,t,g,u),i));++y);if(i){for(y=o-1;y>=0;--y)if(!j()){this.updateRangeFromParsed(h,t,g,u);break}}return h}getAllParsedValues(t){const a=this._cachedMeta._parsed,n=[];let r,i,o;for(r=0,i=a.length;r<i;++r)o=a[r][t.axis],gn(o)&&n.push(o);return n}getMaxOverflow(){return!1}getLabelAndValue(t){const a=this._cachedMeta,n=a.iScale,r=a.vScale,i=this.getParsed(t);return{label:n?""+n.getLabelForValue(i[n.axis]):"",value:r?""+r.getLabelForValue(i[r.axis]):""}}_update(t){const a=this._cachedMeta;this.update(t||"default"),a._clip=kI(ks(this.options.clip,AI(a.xScale,a.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,a=this.chart,n=this._cachedMeta,r=n.data||[],i=a.chartArea,o=[],c=this._drawStart||0,u=this._drawCount||r.length-c,h=this.options.drawActiveElementsOnTop;let m;for(n.dataset&&n.dataset.draw(t,i,c,u),m=c;m<c+u;++m){const p=r[m];p.hidden||(p.active&&h?o.push(p):p.draw(t,i))}for(m=0;m<o.length;++m)o[m].draw(t,i)}getStyle(t,a){const n=a?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(t||0,n)}getContext(t,a,n){const r=this.getDataset();let i;if(t>=0&&t<this._cachedMeta.data.length){const o=this._cachedMeta.data[t];i=o.$context||(o.$context=FI(this.getContext(),t,o)),i.parsed=this.getParsed(t),i.raw=r.data[t],i.index=i.dataIndex=t}else i=this.$context||(this.$context=PI(this.chart.getContext(),this.index)),i.dataset=r,i.index=i.datasetIndex=this.index;return i.active=!!a,i.mode=n,i}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,a){return this._resolveElementOptions(this.dataElementType.id,a,t)}_resolveElementOptions(t,a="default",n){const r=a==="active",i=this._cachedDataOpts,o=t+"-"+a,c=i[o],u=this.enableOptionSharing&&lm(n);if(c)return m2(c,u);const h=this.chart.config,m=h.datasetElementScopeKeys(this._type,t),p=r?[`${t}Hover`,"hover",t,""]:[t,""],y=h.getOptionScopes(this.getDataset(),m),g=Object.keys(tn.elements[t]),j=()=>this.getContext(n,r,a),b=h.resolveNamedOptions(y,g,j,p);return b.$shared&&(b.$shared=u,i[o]=Object.freeze(m2(b,u))),b}_resolveAnimations(t,a,n){const r=this.chart,i=this._cachedDataOpts,o=`animation-${a}`,c=i[o];if(c)return c;let u;if(r.options.animation!==!1){const m=this.chart.config,p=m.datasetAnimationScopeKeys(this._type,a),y=m.getOptionScopes(this.getDataset(),p);u=m.createResolver(y,this.getContext(t,n,a))}const h=new u5(r,u&&u.animations);return u&&u._cacheable&&(i[o]=Object.freeze(h)),h}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,a){return!a||Wb(t)||this.chart._animationsDisabled}_getSharedOptions(t,a){const n=this.resolveDataElementOptions(t,a),r=this._sharedOptions,i=this.getSharedOptions(n),o=this.includeOptions(a,i)||i!==r;return this.updateSharedOptions(i,a,n),{sharedOptions:i,includeOptions:o}}updateElement(t,a,n,r){Wb(r)?Object.assign(t,n):this._resolveAnimations(a,r).update(t,n)}updateSharedOptions(t,a,n){t&&!Wb(a)&&this._resolveAnimations(void 0,a).update(t,n)}_setStyle(t,a,n,r){t.active=r;const i=this.getStyle(a,r);this._resolveAnimations(a,n,r).update(t,{options:!r&&this.getSharedOptions(i)||i})}removeHoverStyle(t,a,n){this._setStyle(t,n,"active",!1)}setHoverStyle(t,a,n){this._setStyle(t,n,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const a=this._data,n=this._cachedMeta.data;for(const[c,u,h]of this._syncList)this[c](u,h);this._syncList=[];const r=n.length,i=a.length,o=Math.min(i,r);o&&this.parse(0,o),i>r?this._insertElements(r,i-r,t):i<r&&this._removeElements(i,r-i)}_insertElements(t,a,n=!0){const r=this._cachedMeta,i=r.data,o=t+a;let c;const u=h=>{for(h.length+=a,c=h.length-1;c>=o;c--)h[c]=h[c-a]};for(u(i),c=t;c<o;++c)i[c]=new this.dataElementType;this._parsing&&u(r._parsed),this.parse(t,a),n&&this.updateElements(i,t,a,"reset")}updateElements(t,a,n,r){}_removeElements(t,a){const n=this._cachedMeta;if(this._parsing){const r=n._parsed.splice(t,a);n._stacked&&Pf(n,r)}n.data.splice(t,a)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[a,n,r]=t;this[a](n,r)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,a){a&&this._sync(["_removeElements",t,a]);const n=arguments.length-2;n&&this._sync(["_insertElements",t,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function OI(s,t){if(!s._cache.$bar){const a=s.getMatchingVisibleMetas(t);let n=[];for(let r=0,i=a.length;r<i;r++)n=n.concat(a[r].controller.getAllParsedValues(s));s._cache.$bar=VC(n.sort((r,i)=>r-i))}return s._cache.$bar}function MI(s){const t=s.iScale,a=OI(t,s.type);let n=t._length,r,i,o,c;const u=()=>{o===32767||o===-32768||(lm(c)&&(n=Math.min(n,Math.abs(o-c)||n)),c=o)};for(r=0,i=a.length;r<i;++r)o=t.getPixelForValue(a[r]),u();for(c=void 0,r=0,i=t.ticks.length;r<i;++r)o=t.getPixelForTick(r),u();return n}function RI(s,t,a,n){const r=a.barThickness;let i,o;return Hs(r)?(i=t.min*a.categoryPercentage,o=a.barPercentage):(i=r*n,o=1),{chunk:i/n,ratio:o,start:t.pixels[s]-i/2}}function BI(s,t,a,n){const r=t.pixels,i=r[s];let o=s>0?r[s-1]:null,c=s<r.length-1?r[s+1]:null;const u=a.categoryPercentage;o===null&&(o=i-(c===null?t.end-t.start:c-i)),c===null&&(c=i+i-o);const h=i-(i-Math.min(o,c))/2*u;return{chunk:Math.abs(c-o)/2*u/n,ratio:a.barPercentage,start:h}}function zI(s,t,a,n){const r=a.parse(s[0],n),i=a.parse(s[1],n),o=Math.min(r,i),c=Math.max(r,i);let u=o,h=c;Math.abs(o)>Math.abs(c)&&(u=c,h=o),t[a.axis]=h,t._custom={barStart:u,barEnd:h,start:r,end:i,min:o,max:c}}function f5(s,t,a,n){return en(s)?zI(s,t,a,n):t[a.axis]=a.parse(s,n),t}function p2(s,t,a,n){const r=s.iScale,i=s.vScale,o=r.getLabels(),c=r===i,u=[];let h,m,p,y;for(h=a,m=a+n;h<m;++h)y=t[h],p={},p[r.axis]=c||r.parse(o[h],h),u.push(f5(y,p,i,h));return u}function Yb(s){return s&&s.barStart!==void 0&&s.barEnd!==void 0}function qI(s,t,a){return s!==0?ac(s):(t.isHorizontal()?1:-1)*(t.min>=a?1:-1)}function UI(s){let t,a,n,r,i;return s.horizontal?(t=s.base>s.x,a="left",n="right"):(t=s.base<s.y,a="bottom",n="top"),t?(r="end",i="start"):(r="start",i="end"),{start:a,end:n,reverse:t,top:r,bottom:i}}function HI(s,t,a,n){let r=t.borderSkipped;const i={};if(!r){s.borderSkipped=i;return}if(r===!0){s.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:c,reverse:u,top:h,bottom:m}=UI(s);r==="middle"&&a&&(s.enableBorderRadius=!0,(a._top||0)===n?r=h:(a._bottom||0)===n?r=m:(i[g2(m,o,c,u)]=!0,r=h)),i[g2(r,o,c,u)]=!0,s.borderSkipped=i}function g2(s,t,a,n){return n?(s=$I(s,t,a),s=x2(s,a,t)):s=x2(s,t,a),s}function $I(s,t,a){return s===t?a:s===a?t:s}function x2(s,t,a){return s==="start"?t:s==="end"?a:s}function VI(s,{inflateAmount:t},a){s.inflateAmount=t==="auto"?a===1?.33:0:t}class m5 extends Zd{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(t,a,n,r){return p2(t,a,n,r)}parseArrayData(t,a,n,r){return p2(t,a,n,r)}parseObjectData(t,a,n,r){const{iScale:i,vScale:o}=t,{xAxisKey:c="x",yAxisKey:u="y"}=this._parsing,h=i.axis==="x"?c:u,m=o.axis==="x"?c:u,p=[];let y,g,j,b;for(y=n,g=n+r;y<g;++y)b=a[y],j={},j[i.axis]=i.parse(Xd(b,h),y),p.push(f5(Xd(b,m),j,o,y));return p}updateRangeFromParsed(t,a,n,r){super.updateRangeFromParsed(t,a,n,r);const i=n._custom;i&&a===this._cachedMeta.vScale&&(t.min=Math.min(t.min,i.min),t.max=Math.max(t.max,i.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const a=this._cachedMeta,{iScale:n,vScale:r}=a,i=this.getParsed(t),o=i._custom,c=Yb(o)?"["+o.start+", "+o.end+"]":""+r.getLabelForValue(i[r.axis]);return{label:""+n.getLabelForValue(i[n.axis]),value:c}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const a=this._cachedMeta;this.updateElements(a.data,0,a.data.length,t)}updateElements(t,a,n,r){const i=r==="reset",{index:o,_cachedMeta:{vScale:c}}=this,u=c.getBasePixel(),h=c.isHorizontal(),m=this._getRuler(),{sharedOptions:p,includeOptions:y}=this._getSharedOptions(a,r);for(let g=a;g<a+n;g++){const j=this.getParsed(g),b=i||Hs(j[c.axis])?{base:u,head:u}:this._calculateBarValuePixels(g),N=this._calculateBarIndexPixels(g,m),v=(j._stacks||{})[c.axis],S={horizontal:h,base:b.base,enableBorderRadius:!v||Yb(j._custom)||o===v._top||o===v._bottom,x:h?b.head:N.center,y:h?N.center:b.head,height:h?N.size:Math.abs(b.size),width:h?Math.abs(b.size):N.size};y&&(S.options=p||this.resolveDataElementOptions(g,t[g].active?"active":r));const E=S.options||t[g].options;HI(S,E,v,o),VI(S,E,m.ratio),this.updateElement(t[g],g,S,r)}}_getStacks(t,a){const{iScale:n}=this._cachedMeta,r=n.getMatchingVisibleMetas(this._type).filter(m=>m.controller.options.grouped),i=n.options.stacked,o=[],c=this._cachedMeta.controller.getParsed(a),u=c&&c[n.axis],h=m=>{const p=m._parsed.find(g=>g[n.axis]===u),y=p&&p[m.vScale.axis];if(Hs(y)||isNaN(y))return!0};for(const m of r)if(!(a!==void 0&&h(m))&&((i===!1||o.indexOf(m.stack)===-1||i===void 0&&m.stack===void 0)&&o.push(m.stack),m.index===t))break;return o.length||o.push(void 0),o}_getStackCount(t){return this._getStacks(void 0,t).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const t=this.chart.scales,a=this.chart.options.indexAxis;return Object.keys(t).filter(n=>t[n].axis===a).shift()}_getAxis(){const t={},a=this.getFirstScaleIdForIndexAxis();for(const n of this.chart.data.datasets)t[ks(this.chart.options.indexAxis==="x"?n.xAxisID:n.yAxisID,a)]=!0;return Object.keys(t)}_getStackIndex(t,a,n){const r=this._getStacks(t,n),i=a!==void 0?r.indexOf(a):-1;return i===-1?r.length-1:i}_getRuler(){const t=this.options,a=this._cachedMeta,n=a.iScale,r=[];let i,o;for(i=0,o=a.data.length;i<o;++i)r.push(n.getPixelForValue(this.getParsed(i)[n.axis],i));const c=t.barThickness;return{min:c||MI(a),pixels:r,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:t.grouped,ratio:c?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:a,_stacked:n,index:r},options:{base:i,minBarLength:o}}=this,c=i||0,u=this.getParsed(t),h=u._custom,m=Yb(h);let p=u[a.axis],y=0,g=n?this.applyStack(a,u,n):p,j,b;g!==p&&(y=g-p,g=p),m&&(p=h.barStart,g=h.barEnd-h.barStart,p!==0&&ac(p)!==ac(h.barEnd)&&(y=0),y+=p);const N=!Hs(i)&&!m?i:y;let v=a.getPixelForValue(N);if(this.chart.getDataVisibility(t)?j=a.getPixelForValue(y+g):j=v,b=j-v,Math.abs(b)<o){b=qI(b,a,c)*o,p===c&&(v-=b/2);const S=a.getPixelForDecimal(0),E=a.getPixelForDecimal(1),L=Math.min(S,E),z=Math.max(S,E);v=Math.max(Math.min(v,z),L),j=v+b,n&&!m&&(u._stacks[a.axis]._visualValues[r]=a.getValueForPixel(j)-a.getValueForPixel(v))}if(v===a.getPixelForValue(c)){const S=ac(b)*a.getLineWidthForValue(c)/2;v+=S,b-=S}return{size:b,base:v,head:j,center:j+b/2}}_calculateBarIndexPixels(t,a){const n=a.scale,r=this.options,i=r.skipNull,o=ks(r.maxBarThickness,1/0);let c,u;const h=this._getAxisCount();if(a.grouped){const m=i?this._getStackCount(t):a.stackCount,p=r.barThickness==="flex"?BI(t,a,r,m*h):RI(t,a,r,m*h),y=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,g=this._getAxis().indexOf(ks(y,this.getFirstScaleIdForIndexAxis())),j=this._getStackIndex(this.index,this._cachedMeta.stack,i?t:void 0)+g;c=p.start+p.chunk*j+p.chunk/2,u=Math.min(o,p.chunk*p.ratio)}else c=n.getPixelForValue(this.getParsed(t)[n.axis],t),u=Math.min(o,a.min*a.ratio);return{base:c-u/2,head:c+u/2,center:c,size:u}}draw(){const t=this._cachedMeta,a=t.vScale,n=t.data,r=n.length;let i=0;for(;i<r;++i)this.getParsed(i)[a.axis]!==null&&!n[i].hidden&&n[i].draw(this._ctx)}}class WI extends Zd{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,a,n,r){const i=super.parsePrimitiveData(t,a,n,r);for(let o=0;o<i.length;o++)i[o]._custom=this.resolveDataElementOptions(o+n).radius;return i}parseArrayData(t,a,n,r){const i=super.parseArrayData(t,a,n,r);for(let o=0;o<i.length;o++){const c=a[n+o];i[o]._custom=ks(c[2],this.resolveDataElementOptions(o+n).radius)}return i}parseObjectData(t,a,n,r){const i=super.parseObjectData(t,a,n,r);for(let o=0;o<i.length;o++){const c=a[n+o];i[o]._custom=ks(c&&c.r&&+c.r,this.resolveDataElementOptions(o+n).radius)}return i}getMaxOverflow(){const t=this._cachedMeta.data;let a=0;for(let n=t.length-1;n>=0;--n)a=Math.max(a,t[n].size(this.resolveDataElementOptions(n))/2);return a>0&&a}getLabelAndValue(t){const a=this._cachedMeta,n=this.chart.data.labels||[],{xScale:r,yScale:i}=a,o=this.getParsed(t),c=r.getLabelForValue(o.x),u=i.getLabelForValue(o.y),h=o._custom;return{label:n[t]||"",value:"("+c+", "+u+(h?", "+h:"")+")"}}update(t){const a=this._cachedMeta.data;this.updateElements(a,0,a.length,t)}updateElements(t,a,n,r){const i=r==="reset",{iScale:o,vScale:c}=this._cachedMeta,{sharedOptions:u,includeOptions:h}=this._getSharedOptions(a,r),m=o.axis,p=c.axis;for(let y=a;y<a+n;y++){const g=t[y],j=!i&&this.getParsed(y),b={},N=b[m]=i?o.getPixelForDecimal(.5):o.getPixelForValue(j[m]),v=b[p]=i?c.getBasePixel():c.getPixelForValue(j[p]);b.skip=isNaN(N)||isNaN(v),h&&(b.options=u||this.resolveDataElementOptions(y,g.active?"active":r),i&&(b.options.radius=0)),this.updateElement(g,y,b,r)}}resolveDataElementOptions(t,a){const n=this.getParsed(t);let r=super.resolveDataElementOptions(t,a);r.$shared&&(r=Object.assign({},r,{$shared:!1}));const i=r.radius;return a!=="active"&&(r.radius=0),r.radius+=ks(n&&n._custom,i),r}}function YI(s,t,a){let n=1,r=1,i=0,o=0;if(t<Va){const c=s,u=c+t,h=Math.cos(c),m=Math.sin(c),p=Math.cos(u),y=Math.sin(u),g=(E,L,z)=>om(E,c,u,!0)?1:Math.max(L,L*a,z,z*a),j=(E,L,z)=>om(E,c,u,!0)?-1:Math.min(L,L*a,z,z*a),b=g(0,h,p),N=g(En,m,y),v=j(la,h,p),S=j(la+En,m,y);n=(b-v)/2,r=(N-S)/2,i=-(b+v)/2,o=-(N+S)/2}return{ratioX:n,ratioY:r,offsetX:i,offsetY:o}}class o0 extends Zd{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const a=t.data,{labels:{pointStyle:n,textAlign:r,color:i,useBorderRadius:o,borderRadius:c}}=t.legend.options;return a.labels.length&&a.datasets.length?a.labels.map((u,h)=>{const p=t.getDatasetMeta(0).controller.getStyle(h);return{text:u,fillStyle:p.backgroundColor,fontColor:i,hidden:!t.getDataVisibility(h),lineDash:p.borderDash,lineDashOffset:p.borderDashOffset,lineJoin:p.borderJoinStyle,lineWidth:p.borderWidth,strokeStyle:p.borderColor,textAlign:r,pointStyle:n,borderRadius:o&&(c||p.borderRadius),index:h}}):[]}},onClick(t,a,n){n.chart.toggleDataVisibility(a.index),n.chart.update()}}}};constructor(t,a){super(t,a),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,a){const n=this.getDataset().data,r=this._cachedMeta;if(this._parsing===!1)r._parsed=n;else{let i=u=>+n[u];if(Js(n[t])){const{key:u="value"}=this._parsing;i=h=>+Xd(n[h],u)}let o,c;for(o=t,c=t+a;o<c;++o)r._parsed[o]=i(o)}}_getRotation(){return vo(this.options.rotation-90)}_getCircumference(){return vo(this.options.circumference)}_getRotationExtents(){let t=Va,a=-Va;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const r=this.chart.getDatasetMeta(n).controller,i=r._getRotation(),o=r._getCircumference();t=Math.min(t,i),a=Math.max(a,i+o)}return{rotation:t,circumference:a-t}}update(t){const a=this.chart,{chartArea:n}=a,r=this._cachedMeta,i=r.data,o=this.getMaxBorderWidth()+this.getMaxOffset(i)+this.options.spacing,c=Math.max((Math.min(n.width,n.height)-o)/2,0),u=Math.min(nF(this.options.cutout,c),1),h=this._getRingWeight(this.index),{circumference:m,rotation:p}=this._getRotationExtents(),{ratioX:y,ratioY:g,offsetX:j,offsetY:b}=YI(p,m,u),N=(n.width-o)/y,v=(n.height-o)/g,S=Math.max(Math.min(N,v)/2,0),E=zC(this.options.radius,S),L=Math.max(E*u,0),z=(E-L)/this._getVisibleDatasetWeightTotal();this.offsetX=j*E,this.offsetY=b*E,r.total=this.calculateTotal(),this.outerRadius=E-z*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-z*h,0),this.updateElements(i,0,i.length,t)}_circumference(t,a){const n=this.options,r=this._cachedMeta,i=this._getCircumference();return a&&n.animation.animateRotate||!this.chart.getDataVisibility(t)||r._parsed[t]===null||r.data[t].hidden?0:this.calculateCircumference(r._parsed[t]*i/Va)}updateElements(t,a,n,r){const i=r==="reset",o=this.chart,c=o.chartArea,h=o.options.animation,m=(c.left+c.right)/2,p=(c.top+c.bottom)/2,y=i&&h.animateScale,g=y?0:this.innerRadius,j=y?0:this.outerRadius,{sharedOptions:b,includeOptions:N}=this._getSharedOptions(a,r);let v=this._getRotation(),S;for(S=0;S<a;++S)v+=this._circumference(S,i);for(S=a;S<a+n;++S){const E=this._circumference(S,i),L=t[S],z={x:m+this.offsetX,y:p+this.offsetY,startAngle:v,endAngle:v+E,circumference:E,outerRadius:j,innerRadius:g};N&&(z.options=b||this.resolveDataElementOptions(S,L.active?"active":r)),v+=E,this.updateElement(L,S,z,r)}}calculateTotal(){const t=this._cachedMeta,a=t.data;let n=0,r;for(r=0;r<a.length;r++){const i=t._parsed[r];i!==null&&!isNaN(i)&&this.chart.getDataVisibility(r)&&!a[r].hidden&&(n+=Math.abs(i))}return n}calculateCircumference(t){const a=this._cachedMeta.total;return a>0&&!isNaN(t)?Va*(Math.abs(t)/a):0}getLabelAndValue(t){const a=this._cachedMeta,n=this.chart,r=n.data.labels||[],i=Dm(a._parsed[t],n.options.locale);return{label:r[t]||"",value:i}}getMaxBorderWidth(t){let a=0;const n=this.chart;let r,i,o,c,u;if(!t){for(r=0,i=n.data.datasets.length;r<i;++r)if(n.isDatasetVisible(r)){o=n.getDatasetMeta(r),t=o.data,c=o.controller;break}}if(!t)return 0;for(r=0,i=t.length;r<i;++r)u=c.resolveDataElementOptions(r),u.borderAlign!=="inner"&&(a=Math.max(a,u.borderWidth||0,u.hoverBorderWidth||0));return a}getMaxOffset(t){let a=0;for(let n=0,r=t.length;n<r;++n){const i=this.resolveDataElementOptions(n);a=Math.max(a,i.offset||0,i.hoverOffset||0)}return a}_getRingWeightOffset(t){let a=0;for(let n=0;n<t;++n)this.chart.isDatasetVisible(n)&&(a+=this._getRingWeight(n));return a}_getRingWeight(t){return Math.max(ks(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class p5 extends Zd{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const a=this._cachedMeta,{dataset:n,data:r=[],_dataset:i}=a,o=this.chart._animationsDisabled;let{start:c,count:u}=KC(a,r,o);this._drawStart=c,this._drawCount=u,XC(a)&&(c=0,u=r.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!i._decimated,n.points=r;const h=this.resolveDatasetElementOptions(t);this.options.showLine||(h.borderWidth=0),h.segment=this.options.segment,this.updateElement(n,void 0,{animated:!o,options:h},t),this.updateElements(r,c,u,t)}updateElements(t,a,n,r){const i=r==="reset",{iScale:o,vScale:c,_stacked:u,_dataset:h}=this._cachedMeta,{sharedOptions:m,includeOptions:p}=this._getSharedOptions(a,r),y=o.axis,g=c.axis,{spanGaps:j,segment:b}=this.options,N=qh(j)?j:Number.POSITIVE_INFINITY,v=this.chart._animationsDisabled||i||r==="none",S=a+n,E=t.length;let L=a>0&&this.getParsed(a-1);for(let z=0;z<E;++z){const V=t[z],te=v?V:{};if(z<a||z>=S){te.skip=!0;continue}const q=this.getParsed(z),B=Hs(q[g]),J=te[y]=o.getPixelForValue(q[y],z),P=te[g]=i||B?c.getBasePixel():c.getPixelForValue(u?this.applyStack(c,q,u):q[g],z);te.skip=isNaN(J)||isNaN(P)||B,te.stop=z>0&&Math.abs(q[y]-L[y])>N,b&&(te.parsed=q,te.raw=h.data[z]),p&&(te.options=m||this.resolveDataElementOptions(z,V.active?"active":r)),v||this.updateElement(V,z,te,r),L=q}}getMaxOverflow(){const t=this._cachedMeta,a=t.dataset,n=a.options&&a.options.borderWidth||0,r=t.data||[];if(!r.length)return n;const i=r[0].size(this.resolveDataElementOptions(0)),o=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(n,i,o)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}class g5 extends Zd{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const a=t.data;if(a.labels.length&&a.datasets.length){const{labels:{pointStyle:n,color:r}}=t.legend.options;return a.labels.map((i,o)=>{const u=t.getDatasetMeta(0).controller.getStyle(o);return{text:i,fillStyle:u.backgroundColor,strokeStyle:u.borderColor,fontColor:r,lineWidth:u.borderWidth,pointStyle:n,hidden:!t.getDataVisibility(o),index:o}})}return[]}},onClick(t,a,n){n.chart.toggleDataVisibility(a.index),n.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(t,a){super(t,a),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){const a=this._cachedMeta,n=this.chart,r=n.data.labels||[],i=Dm(a._parsed[t].r,n.options.locale);return{label:r[t]||"",value:i}}parseObjectData(t,a,n,r){return a5.bind(this)(t,a,n,r)}update(t){const a=this._cachedMeta.data;this._updateRadius(),this.updateElements(a,0,a.length,t)}getMinMax(){const t=this._cachedMeta,a={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach((n,r)=>{const i=this.getParsed(r).r;!isNaN(i)&&this.chart.getDataVisibility(r)&&(i<a.min&&(a.min=i),i>a.max&&(a.max=i))}),a}_updateRadius(){const t=this.chart,a=t.chartArea,n=t.options,r=Math.min(a.right-a.left,a.bottom-a.top),i=Math.max(r/2,0),o=Math.max(n.cutoutPercentage?i/100*n.cutoutPercentage:1,0),c=(i-o)/t.getVisibleDatasetCount();this.outerRadius=i-c*this.index,this.innerRadius=this.outerRadius-c}updateElements(t,a,n,r){const i=r==="reset",o=this.chart,u=o.options.animation,h=this._cachedMeta.rScale,m=h.xCenter,p=h.yCenter,y=h.getIndexAngle(0)-.5*la;let g=y,j;const b=360/this.countVisibleElements();for(j=0;j<a;++j)g+=this._computeAngle(j,r,b);for(j=a;j<a+n;j++){const N=t[j];let v=g,S=g+this._computeAngle(j,r,b),E=o.getDataVisibility(j)?h.getDistanceFromCenterForValue(this.getParsed(j).r):0;g=S,i&&(u.animateScale&&(E=0),u.animateRotate&&(v=S=y));const L={x:m,y:p,innerRadius:0,outerRadius:E,startAngle:v,endAngle:S,options:this.resolveDataElementOptions(j,N.active?"active":r)};this.updateElement(N,j,L,r)}}countVisibleElements(){const t=this._cachedMeta;let a=0;return t.data.forEach((n,r)=>{!isNaN(this.getParsed(r).r)&&this.chart.getDataVisibility(r)&&a++}),a}_computeAngle(t,a,n){return this.chart.getDataVisibility(t)?vo(this.resolveDataElementOptions(t,a).angle||n):0}}class KI extends o0{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}class XI extends Zd{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(t){const a=this._cachedMeta.vScale,n=this.getParsed(t);return{label:a.getLabels()[t],value:""+a.getLabelForValue(n[a.axis])}}parseObjectData(t,a,n,r){return a5.bind(this)(t,a,n,r)}update(t){const a=this._cachedMeta,n=a.dataset,r=a.data||[],i=a.iScale.getLabels();if(n.points=r,t!=="resize"){const o=this.resolveDatasetElementOptions(t);this.options.showLine||(o.borderWidth=0);const c={_loop:!0,_fullLoop:i.length===r.length,options:o};this.updateElement(n,void 0,c,t)}this.updateElements(r,0,r.length,t)}updateElements(t,a,n,r){const i=this._cachedMeta.rScale,o=r==="reset";for(let c=a;c<a+n;c++){const u=t[c],h=this.resolveDataElementOptions(c,u.active?"active":r),m=i.getPointPositionForValue(c,this.getParsed(c).r),p=o?i.xCenter:m.x,y=o?i.yCenter:m.y,g={x:p,y,angle:m.angle,skip:isNaN(p)||isNaN(y),options:h};this.updateElement(u,c,g,r)}}}class GI extends Zd{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(t){const a=this._cachedMeta,n=this.chart.data.labels||[],{xScale:r,yScale:i}=a,o=this.getParsed(t),c=r.getLabelForValue(o.x),u=i.getLabelForValue(o.y);return{label:n[t]||"",value:"("+c+", "+u+")"}}update(t){const a=this._cachedMeta,{data:n=[]}=a,r=this.chart._animationsDisabled;let{start:i,count:o}=KC(a,n,r);if(this._drawStart=i,this._drawCount=o,XC(a)&&(i=0,o=n.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:c,_dataset:u}=a;c._chart=this.chart,c._datasetIndex=this.index,c._decimated=!!u._decimated,c.points=n;const h=this.resolveDatasetElementOptions(t);h.segment=this.options.segment,this.updateElement(c,void 0,{animated:!r,options:h},t)}else this.datasetElementType&&(delete a.dataset,this.datasetElementType=!1);this.updateElements(n,i,o,t)}addElements(){const{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(t,a,n,r){const i=r==="reset",{iScale:o,vScale:c,_stacked:u,_dataset:h}=this._cachedMeta,m=this.resolveDataElementOptions(a,r),p=this.getSharedOptions(m),y=this.includeOptions(r,p),g=o.axis,j=c.axis,{spanGaps:b,segment:N}=this.options,v=qh(b)?b:Number.POSITIVE_INFINITY,S=this.chart._animationsDisabled||i||r==="none";let E=a>0&&this.getParsed(a-1);for(let L=a;L<a+n;++L){const z=t[L],V=this.getParsed(L),te=S?z:{},q=Hs(V[j]),B=te[g]=o.getPixelForValue(V[g],L),J=te[j]=i||q?c.getBasePixel():c.getPixelForValue(u?this.applyStack(c,V,u):V[j],L);te.skip=isNaN(B)||isNaN(J)||q,te.stop=L>0&&Math.abs(V[g]-E[g])>v,N&&(te.parsed=V,te.raw=h.data[L]),y&&(te.options=p||this.resolveDataElementOptions(L,z.active?"active":r)),S||this.updateElement(z,L,te,r),E=V}this.updateSharedOptions(p,r,m)}getMaxOverflow(){const t=this._cachedMeta,a=t.data||[];if(!this.options.showLine){let c=0;for(let u=a.length-1;u>=0;--u)c=Math.max(c,a[u].size(this.resolveDataElementOptions(u))/2);return c>0&&c}const n=t.dataset,r=n.options&&n.options.borderWidth||0;if(!a.length)return r;const i=a[0].size(this.resolveDataElementOptions(0)),o=a[a.length-1].size(this.resolveDataElementOptions(a.length-1));return Math.max(r,i,o)/2}}var QI=Object.freeze({__proto__:null,BarController:m5,BubbleController:WI,DoughnutController:o0,LineController:p5,PieController:KI,PolarAreaController:g5,RadarController:XI,ScatterController:GI});function yu(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class c0{static override(t){Object.assign(c0.prototype,t)}options;constructor(t){this.options=t||{}}init(){}formats(){return yu()}parse(){return yu()}format(){return yu()}add(){return yu()}diff(){return yu()}startOf(){return yu()}endOf(){return yu()}}var JI={_date:c0};function ZI(s,t,a,n){const{controller:r,data:i,_sorted:o}=s,c=r._cachedMeta.iScale,u=s.dataset&&s.dataset.options?s.dataset.options.spanGaps:null;if(c&&t===c.axis&&t!=="r"&&o&&i.length){const h=c._reversePixels?xF:Qc;if(n){if(r._sharedOptions){const m=i[0],p=typeof m.getRange=="function"&&m.getRange(t);if(p){const y=h(i,t,a-p),g=h(i,t,a+p);return{lo:y.lo,hi:g.hi}}}}else{const m=h(i,t,a);if(u){const{vScale:p}=r._cachedMeta,{_parsed:y}=s,g=y.slice(0,m.lo+1).reverse().findIndex(b=>!Hs(b[p.axis]));m.lo-=Math.max(0,g);const j=y.slice(m.hi).findIndex(b=>!Hs(b[p.axis]));m.hi+=Math.max(0,j)}return m}}return{lo:0,hi:i.length-1}}function cx(s,t,a,n,r){const i=s.getSortedVisibleDatasetMetas(),o=a[t];for(let c=0,u=i.length;c<u;++c){const{index:h,data:m}=i[c],{lo:p,hi:y}=ZI(i[c],t,o,r);for(let g=p;g<=y;++g){const j=m[g];j.skip||n(j,h,g)}}}function eO(s){const t=s.indexOf("x")!==-1,a=s.indexOf("y")!==-1;return function(n,r){const i=t?Math.abs(n.x-r.x):0,o=a?Math.abs(n.y-r.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(o,2))}}function Kb(s,t,a,n,r){const i=[];return!r&&!s.isPointInArea(t)||cx(s,a,t,function(c,u,h){!r&&!Jc(c,s.chartArea,0)||c.inRange(t.x,t.y,n)&&i.push({element:c,datasetIndex:u,index:h})},!0),i}function tO(s,t,a,n){let r=[];function i(o,c,u){const{startAngle:h,endAngle:m}=o.getProps(["startAngle","endAngle"],n),{angle:p}=HC(o,{x:t.x,y:t.y});om(p,h,m)&&r.push({element:o,datasetIndex:c,index:u})}return cx(s,a,t,i),r}function sO(s,t,a,n,r,i){let o=[];const c=eO(a);let u=Number.POSITIVE_INFINITY;function h(m,p,y){const g=m.inRange(t.x,t.y,r);if(n&&!g)return;const j=m.getCenterPoint(r);if(!(!!i||s.isPointInArea(j))&&!g)return;const N=c(t,j);N<u?(o=[{element:m,datasetIndex:p,index:y}],u=N):N===u&&o.push({element:m,datasetIndex:p,index:y})}return cx(s,a,t,h),o}function Xb(s,t,a,n,r,i){return!i&&!s.isPointInArea(t)?[]:a==="r"&&!n?tO(s,t,a,r):sO(s,t,a,n,r,i)}function b2(s,t,a,n,r){const i=[],o=a==="x"?"inXRange":"inYRange";let c=!1;return cx(s,a,t,(u,h,m)=>{u[o]&&u[o](t[a],r)&&(i.push({element:u,datasetIndex:h,index:m}),c=c||u.inRange(t.x,t.y,r))}),n&&!c?[]:i}var aO={modes:{index(s,t,a,n){const r=wu(t,s),i=a.axis||"x",o=a.includeInvisible||!1,c=a.intersect?Kb(s,r,i,n,o):Xb(s,r,i,!1,n,o),u=[];return c.length?(s.getSortedVisibleDatasetMetas().forEach(h=>{const m=c[0].index,p=h.data[m];p&&!p.skip&&u.push({element:p,datasetIndex:h.index,index:m})}),u):[]},dataset(s,t,a,n){const r=wu(t,s),i=a.axis||"xy",o=a.includeInvisible||!1;let c=a.intersect?Kb(s,r,i,n,o):Xb(s,r,i,!1,n,o);if(c.length>0){const u=c[0].datasetIndex,h=s.getDatasetMeta(u).data;c=[];for(let m=0;m<h.length;++m)c.push({element:h[m],datasetIndex:u,index:m})}return c},point(s,t,a,n){const r=wu(t,s),i=a.axis||"xy",o=a.includeInvisible||!1;return Kb(s,r,i,n,o)},nearest(s,t,a,n){const r=wu(t,s),i=a.axis||"xy",o=a.includeInvisible||!1;return Xb(s,r,i,a.intersect,n,o)},x(s,t,a,n){const r=wu(t,s);return b2(s,r,"x",a.intersect,n)},y(s,t,a,n){const r=wu(t,s);return b2(s,r,"y",a.intersect,n)}}};const x5=["left","top","right","bottom"];function Ff(s,t){return s.filter(a=>a.pos===t)}function y2(s,t){return s.filter(a=>x5.indexOf(a.pos)===-1&&a.box.axis===t)}function If(s,t){return s.sort((a,n)=>{const r=t?n:a,i=t?a:n;return r.weight===i.weight?r.index-i.index:r.weight-i.weight})}function nO(s){const t=[];let a,n,r,i,o,c;for(a=0,n=(s||[]).length;a<n;++a)r=s[a],{position:i,options:{stack:o,stackWeight:c=1}}=r,t.push({index:a,box:r,pos:i,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&i+o,stackWeight:c});return t}function rO(s){const t={};for(const a of s){const{stack:n,pos:r,stackWeight:i}=a;if(!n||!x5.includes(r))continue;const o=t[n]||(t[n]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=i}return t}function iO(s,t){const a=rO(s),{vBoxMaxWidth:n,hBoxMaxHeight:r}=t;let i,o,c;for(i=0,o=s.length;i<o;++i){c=s[i];const{fullSize:u}=c.box,h=a[c.stack],m=h&&c.stackWeight/h.weight;c.horizontal?(c.width=m?m*n:u&&t.availableWidth,c.height=r):(c.width=n,c.height=m?m*r:u&&t.availableHeight)}return a}function lO(s){const t=nO(s),a=If(t.filter(h=>h.box.fullSize),!0),n=If(Ff(t,"left"),!0),r=If(Ff(t,"right")),i=If(Ff(t,"top"),!0),o=If(Ff(t,"bottom")),c=y2(t,"x"),u=y2(t,"y");return{fullSize:a,leftAndTop:n.concat(i),rightAndBottom:r.concat(u).concat(o).concat(c),chartArea:Ff(t,"chartArea"),vertical:n.concat(r).concat(u),horizontal:i.concat(o).concat(c)}}function v2(s,t,a,n){return Math.max(s[a],t[a])+Math.max(s[n],t[n])}function b5(s,t){s.top=Math.max(s.top,t.top),s.left=Math.max(s.left,t.left),s.bottom=Math.max(s.bottom,t.bottom),s.right=Math.max(s.right,t.right)}function oO(s,t,a,n){const{pos:r,box:i}=a,o=s.maxPadding;if(!Js(r)){a.size&&(s[r]-=a.size);const p=n[a.stack]||{size:0,count:1};p.size=Math.max(p.size,a.horizontal?i.height:i.width),a.size=p.size/p.count,s[r]+=a.size}i.getPadding&&b5(o,i.getPadding());const c=Math.max(0,t.outerWidth-v2(o,s,"left","right")),u=Math.max(0,t.outerHeight-v2(o,s,"top","bottom")),h=c!==s.w,m=u!==s.h;return s.w=c,s.h=u,a.horizontal?{same:h,other:m}:{same:m,other:h}}function cO(s){const t=s.maxPadding;function a(n){const r=Math.max(t[n]-s[n],0);return s[n]+=r,r}s.y+=a("top"),s.x+=a("left"),a("right"),a("bottom")}function dO(s,t){const a=t.maxPadding;function n(r){const i={left:0,top:0,right:0,bottom:0};return r.forEach(o=>{i[o]=Math.max(t[o],a[o])}),i}return n(s?["left","right"]:["top","bottom"])}function Kf(s,t,a,n){const r=[];let i,o,c,u,h,m;for(i=0,o=s.length,h=0;i<o;++i){c=s[i],u=c.box,u.update(c.width||t.w,c.height||t.h,dO(c.horizontal,t));const{same:p,other:y}=oO(t,a,c,n);h|=p&&r.length,m=m||y,u.fullSize||r.push(c)}return h&&Kf(r,t,a,n)||m}function Pp(s,t,a,n,r){s.top=a,s.left=t,s.right=t+n,s.bottom=a+r,s.width=n,s.height=r}function j2(s,t,a,n){const r=a.padding;let{x:i,y:o}=t;for(const c of s){const u=c.box,h=n[c.stack]||{placed:0,weight:1},m=c.stackWeight/h.weight||1;if(c.horizontal){const p=t.w*m,y=h.size||u.height;lm(h.start)&&(o=h.start),u.fullSize?Pp(u,r.left,o,a.outerWidth-r.right-r.left,y):Pp(u,t.left+h.placed,o,p,y),h.start=o,h.placed+=p,o=u.bottom}else{const p=t.h*m,y=h.size||u.width;lm(h.start)&&(i=h.start),u.fullSize?Pp(u,i,r.top,y,a.outerHeight-r.bottom-r.top):Pp(u,i,t.top+h.placed,y,p),h.start=i,h.placed+=p,i=u.right}}t.x=i,t.y=o}var Zr={addBox(s,t){s.boxes||(s.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(a){t.draw(a)}}]},s.boxes.push(t)},removeBox(s,t){const a=s.boxes?s.boxes.indexOf(t):-1;a!==-1&&s.boxes.splice(a,1)},configure(s,t,a){t.fullSize=a.fullSize,t.position=a.position,t.weight=a.weight},update(s,t,a,n){if(!s)return;const r=ti(s.options.layout.padding),i=Math.max(t-r.width,0),o=Math.max(a-r.height,0),c=lO(s.boxes),u=c.vertical,h=c.horizontal;ya(s.boxes,b=>{typeof b.beforeLayout=="function"&&b.beforeLayout()});const m=u.reduce((b,N)=>N.box.options&&N.box.options.display===!1?b:b+1,0)||1,p=Object.freeze({outerWidth:t,outerHeight:a,padding:r,availableWidth:i,availableHeight:o,vBoxMaxWidth:i/2/m,hBoxMaxHeight:o/2}),y=Object.assign({},r);b5(y,ti(n));const g=Object.assign({maxPadding:y,w:i,h:o,x:r.left,y:r.top},r),j=iO(u.concat(h),p);Kf(c.fullSize,g,p,j),Kf(u,g,p,j),Kf(h,g,p,j)&&Kf(u,g,p,j),cO(g),j2(c.leftAndTop,g,p,j),g.x+=g.w,g.y+=g.h,j2(c.rightAndBottom,g,p,j),s.chartArea={left:g.left,top:g.top,right:g.left+g.w,bottom:g.top+g.h,height:g.h,width:g.w},ya(c.chartArea,b=>{const N=b.box;Object.assign(N,s.chartArea),N.update(g.w,g.h,{left:0,top:0,right:0,bottom:0})})}};class y5{acquireContext(t,a){}releaseContext(t){return!1}addEventListener(t,a,n){}removeEventListener(t,a,n){}getDevicePixelRatio(){return 1}getMaximumSize(t,a,n,r){return a=Math.max(0,a||t.width),n=n||t.height,{width:a,height:Math.max(0,r?Math.floor(a/r):n)}}isAttached(t){return!0}updateConfig(t){}}class uO extends y5{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const ig="$chartjs",hO={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},N2=s=>s===null||s==="";function fO(s,t){const a=s.style,n=s.getAttribute("height"),r=s.getAttribute("width");if(s[ig]={initial:{height:n,width:r,style:{display:a.display,height:a.height,width:a.width}}},a.display=a.display||"block",a.boxSizing=a.boxSizing||"border-box",N2(r)){const i=r2(s,"width");i!==void 0&&(s.width=i)}if(N2(n))if(s.style.height==="")s.height=s.width/(t||2);else{const i=r2(s,"height");i!==void 0&&(s.height=i)}return s}const v5=dI?{passive:!0}:!1;function mO(s,t,a){s&&s.addEventListener(t,a,v5)}function pO(s,t,a){s&&s.canvas&&s.canvas.removeEventListener(t,a,v5)}function gO(s,t){const a=hO[s.type]||s.type,{x:n,y:r}=wu(s,t);return{type:a,chart:t,native:s,x:n!==void 0?n:null,y:r!==void 0?r:null}}function Ig(s,t){for(const a of s)if(a===t||a.contains(t))return!0}function xO(s,t,a){const n=s.canvas,r=new MutationObserver(i=>{let o=!1;for(const c of i)o=o||Ig(c.addedNodes,n),o=o&&!Ig(c.removedNodes,n);o&&a()});return r.observe(document,{childList:!0,subtree:!0}),r}function bO(s,t,a){const n=s.canvas,r=new MutationObserver(i=>{let o=!1;for(const c of i)o=o||Ig(c.removedNodes,n),o=o&&!Ig(c.addedNodes,n);o&&a()});return r.observe(document,{childList:!0,subtree:!0}),r}const dm=new Map;let w2=0;function j5(){const s=window.devicePixelRatio;s!==w2&&(w2=s,dm.forEach((t,a)=>{a.currentDevicePixelRatio!==s&&t()}))}function yO(s,t){dm.size||window.addEventListener("resize",j5),dm.set(s,t)}function vO(s){dm.delete(s),dm.size||window.removeEventListener("resize",j5)}function jO(s,t,a){const n=s.canvas,r=n&&l0(n);if(!r)return;const i=YC((c,u)=>{const h=r.clientWidth;a(c,u),h<r.clientWidth&&a()},window),o=new ResizeObserver(c=>{const u=c[0],h=u.contentRect.width,m=u.contentRect.height;h===0&&m===0||i(h,m)});return o.observe(r),yO(s,i),o}function Gb(s,t,a){a&&a.disconnect(),t==="resize"&&vO(s)}function NO(s,t,a){const n=s.canvas,r=YC(i=>{s.ctx!==null&&a(gO(i,s))},s);return mO(n,t,r),r}class wO extends y5{acquireContext(t,a){const n=t&&t.getContext&&t.getContext("2d");return n&&n.canvas===t?(fO(t,a),n):null}releaseContext(t){const a=t.canvas;if(!a[ig])return!1;const n=a[ig].initial;["height","width"].forEach(i=>{const o=n[i];Hs(o)?a.removeAttribute(i):a.setAttribute(i,o)});const r=n.style||{};return Object.keys(r).forEach(i=>{a.style[i]=r[i]}),a.width=a.width,delete a[ig],!0}addEventListener(t,a,n){this.removeEventListener(t,a);const r=t.$proxies||(t.$proxies={}),o={attach:xO,detach:bO,resize:jO}[a]||NO;r[a]=o(t,a,n)}removeEventListener(t,a){const n=t.$proxies||(t.$proxies={}),r=n[a];if(!r)return;({attach:Gb,detach:Gb,resize:Gb}[a]||pO)(t,a,r),n[a]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,a,n,r){return cI(t,a,n,r)}isAttached(t){const a=t&&l0(t);return!!(a&&a.isConnected)}}function _O(s){return!i0()||typeof OffscreenCanvas<"u"&&s instanceof OffscreenCanvas?uO:wO}let rd=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(t){const{x:a,y:n}=this.getProps(["x","y"],t);return{x:a,y:n}}hasValue(){return qh(this.x)&&qh(this.y)}getProps(t,a){const n=this.$animations;if(!a||!n)return this;const r={};return t.forEach(i=>{r[i]=n[i]&&n[i].active()?n[i]._to:this[i]}),r}};function SO(s,t){const a=s.options.ticks,n=CO(s),r=Math.min(a.maxTicksLimit||n,n),i=a.major.enabled?kO(t):[],o=i.length,c=i[0],u=i[o-1],h=[];if(o>r)return DO(t,h,i,o/r),h;const m=AO(i,t,r);if(o>0){let p,y;const g=o>1?Math.round((u-c)/(o-1)):null;for(Fp(t,h,m,Hs(g)?0:c-g,c),p=0,y=o-1;p<y;p++)Fp(t,h,m,i[p],i[p+1]);return Fp(t,h,m,u,Hs(g)?t.length:u+g),h}return Fp(t,h,m),h}function CO(s){const t=s.options.offset,a=s._tickSize(),n=s._length/a+(t?0:1),r=s._maxLength/a;return Math.floor(Math.min(n,r))}function AO(s,t,a){const n=EO(s),r=t.length/a;if(!n)return Math.max(r,1);const i=hF(n);for(let o=0,c=i.length-1;o<c;o++){const u=i[o];if(u>r)return u}return Math.max(r,1)}function kO(s){const t=[];let a,n;for(a=0,n=s.length;a<n;a++)s[a].major&&t.push(a);return t}function DO(s,t,a,n){let r=0,i=a[0],o;for(n=Math.ceil(n),o=0;o<s.length;o++)o===i&&(t.push(s[o]),r++,i=a[r*n])}function Fp(s,t,a,n,r){const i=ks(n,0),o=Math.min(ks(r,s.length),s.length);let c=0,u,h,m;for(a=Math.ceil(a),r&&(u=r-n,a=u/Math.floor(u/a)),m=i;m<0;)c++,m=Math.round(i+c*a);for(h=Math.max(i,0);h<o;h++)h===m&&(t.push(s[h]),c++,m=Math.round(i+c*a))}function EO(s){const t=s.length;let a,n;if(t<2)return!1;for(n=s[0],a=1;a<t;++a)if(s[a]-s[a-1]!==n)return!1;return n}const TO=s=>s==="left"?"right":s==="right"?"left":s,_2=(s,t,a)=>t==="top"||t==="left"?s[t]+a:s[t]-a,S2=(s,t)=>Math.min(t||s,s);function C2(s,t){const a=[],n=s.length/t,r=s.length;let i=0;for(;i<r;i+=n)a.push(s[Math.floor(i)]);return a}function LO(s,t,a){const n=s.ticks.length,r=Math.min(t,n-1),i=s._startPixel,o=s._endPixel,c=1e-6;let u=s.getPixelForTick(r),h;if(!(a&&(n===1?h=Math.max(u-i,o-u):t===0?h=(s.getPixelForTick(1)-u)/2:h=(u-s.getPixelForTick(r-1))/2,u+=r<t?h:-h,u<i-c||u>o+c)))return u}function PO(s,t){ya(s,a=>{const n=a.gc,r=n.length/2;let i;if(r>t){for(i=0;i<r;++i)delete a.data[n[i]];n.splice(0,r)}})}function Of(s){return s.drawTicks?s.tickLength:0}function A2(s,t){if(!s.display)return 0;const a=rr(s.font,t),n=ti(s.padding);return(en(s.text)?s.text.length:1)*a.lineHeight+n.height}function FO(s,t){return Jd(s,{scale:t,type:"scale"})}function IO(s,t,a){return Jd(s,{tick:a,index:t,type:"tick"})}function OO(s,t,a){let n=e0(s);return(a&&t!=="right"||!a&&t==="right")&&(n=TO(n)),n}function MO(s,t,a,n){const{top:r,left:i,bottom:o,right:c,chart:u}=s,{chartArea:h,scales:m}=u;let p=0,y,g,j;const b=o-r,N=c-i;if(s.isHorizontal()){if(g=Gr(n,i,c),Js(a)){const v=Object.keys(a)[0],S=a[v];j=m[v].getPixelForValue(S)+b-t}else a==="center"?j=(h.bottom+h.top)/2+b-t:j=_2(s,a,t);y=c-i}else{if(Js(a)){const v=Object.keys(a)[0],S=a[v];g=m[v].getPixelForValue(S)-N+t}else a==="center"?g=(h.left+h.right)/2-N+t:g=_2(s,a,t);j=Gr(n,o,r),p=a==="left"?-En:En}return{titleX:g,titleY:j,maxWidth:y,rotation:p}}class Vu extends rd{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,a){return t}getUserBounds(){let{_userMin:t,_userMax:a,_suggestedMin:n,_suggestedMax:r}=this;return t=cl(t,Number.POSITIVE_INFINITY),a=cl(a,Number.NEGATIVE_INFINITY),n=cl(n,Number.POSITIVE_INFINITY),r=cl(r,Number.NEGATIVE_INFINITY),{min:cl(t,n),max:cl(a,r),minDefined:gn(t),maxDefined:gn(a)}}getMinMax(t){let{min:a,max:n,minDefined:r,maxDefined:i}=this.getUserBounds(),o;if(r&&i)return{min:a,max:n};const c=this.getMatchingVisibleMetas();for(let u=0,h=c.length;u<h;++u)o=c[u].controller.getMinMax(this,t),r||(a=Math.min(a,o.min)),i||(n=Math.max(n,o.max));return a=i&&a>n?n:a,n=r&&a>n?a:n,{min:cl(a,cl(n,a)),max:cl(n,cl(a,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Ra(this.options.beforeUpdate,[this])}update(t,a,n){const{beginAtZero:r,grace:i,ticks:o}=this.options,c=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=a,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=qF(this,i,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const u=c<this.ticks.length;this._convertTicksToLabels(u?C2(this.ticks,c):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=SO(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),u&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,a,n;this.isHorizontal()?(a=this.left,n=this.right):(a=this.top,n=this.bottom,t=!t),this._startPixel=a,this._endPixel=n,this._reversePixels=t,this._length=n-a,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Ra(this.options.afterUpdate,[this])}beforeSetDimensions(){Ra(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Ra(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),Ra(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Ra(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const a=this.options.ticks;let n,r,i;for(n=0,r=t.length;n<r;n++)i=t[n],i.label=Ra(a.callback,[i.value,n,t],this)}afterTickToLabelConversion(){Ra(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Ra(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,a=t.ticks,n=S2(this.ticks.length,t.ticks.maxTicksLimit),r=a.minRotation||0,i=a.maxRotation;let o=r,c,u,h;if(!this._isVisible()||!a.display||r>=i||n<=1||!this.isHorizontal()){this.labelRotation=r;return}const m=this._getLabelSizes(),p=m.widest.width,y=m.highest.height,g=xr(this.chart.width-p,0,this.maxWidth);c=t.offset?this.maxWidth/n:g/(n-1),p+6>c&&(c=g/(n-(t.offset?.5:1)),u=this.maxHeight-Of(t.grid)-a.padding-A2(t.title,this.chart.options.font),h=Math.sqrt(p*p+y*y),o=Jv(Math.min(Math.asin(xr((m.highest.height+6)/c,-1,1)),Math.asin(xr(u/h,-1,1))-Math.asin(xr(y/h,-1,1)))),o=Math.max(r,Math.min(i,o))),this.labelRotation=o}afterCalculateLabelRotation(){Ra(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Ra(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:a,options:{ticks:n,title:r,grid:i}}=this,o=this._isVisible(),c=this.isHorizontal();if(o){const u=A2(r,a.options.font);if(c?(t.width=this.maxWidth,t.height=Of(i)+u):(t.height=this.maxHeight,t.width=Of(i)+u),n.display&&this.ticks.length){const{first:h,last:m,widest:p,highest:y}=this._getLabelSizes(),g=n.padding*2,j=vo(this.labelRotation),b=Math.cos(j),N=Math.sin(j);if(c){const v=n.mirror?0:N*p.width+b*y.height;t.height=Math.min(this.maxHeight,t.height+v+g)}else{const v=n.mirror?0:b*p.width+N*y.height;t.width=Math.min(this.maxWidth,t.width+v+g)}this._calculatePadding(h,m,N,b)}}this._handleMargins(),c?(this.width=this._length=a.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=a.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,a,n,r){const{ticks:{align:i,padding:o},position:c}=this.options,u=this.labelRotation!==0,h=c!=="top"&&this.axis==="x";if(this.isHorizontal()){const m=this.getPixelForTick(0)-this.left,p=this.right-this.getPixelForTick(this.ticks.length-1);let y=0,g=0;u?h?(y=r*t.width,g=n*a.height):(y=n*t.height,g=r*a.width):i==="start"?g=a.width:i==="end"?y=t.width:i!=="inner"&&(y=t.width/2,g=a.width/2),this.paddingLeft=Math.max((y-m+o)*this.width/(this.width-m),0),this.paddingRight=Math.max((g-p+o)*this.width/(this.width-p),0)}else{let m=a.height/2,p=t.height/2;i==="start"?(m=0,p=t.height):i==="end"&&(m=a.height,p=0),this.paddingTop=m+o,this.paddingBottom=p+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Ra(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:a}=this.options;return a==="top"||a==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let a,n;for(a=0,n=t.length;a<n;a++)Hs(t[a].label)&&(t.splice(a,1),n--,a--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const a=this.options.ticks.sampleSize;let n=this.ticks;a<n.length&&(n=C2(n,a)),this._labelSizes=t=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,a,n){const{ctx:r,_longestTextCache:i}=this,o=[],c=[],u=Math.floor(a/S2(a,n));let h=0,m=0,p,y,g,j,b,N,v,S,E,L,z;for(p=0;p<a;p+=u){if(j=t[p].label,b=this._resolveTickFontOptions(p),r.font=N=b.string,v=i[N]=i[N]||{data:{},gc:[]},S=b.lineHeight,E=L=0,!Hs(j)&&!en(j))E=Pg(r,v.data,v.gc,E,j),L=S;else if(en(j))for(y=0,g=j.length;y<g;++y)z=j[y],!Hs(z)&&!en(z)&&(E=Pg(r,v.data,v.gc,E,z),L+=S);o.push(E),c.push(L),h=Math.max(E,h),m=Math.max(L,m)}PO(i,a);const V=o.indexOf(h),te=c.indexOf(m),q=B=>({width:o[B]||0,height:c[B]||0});return{first:q(0),last:q(a-1),widest:q(V),highest:q(te),widths:o,heights:c}}getLabelForValue(t){return t}getPixelForValue(t,a){return NaN}getValueForPixel(t){}getPixelForTick(t){const a=this.ticks;return t<0||t>a.length-1?null:this.getPixelForValue(a[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const a=this._startPixel+t*this._length;return gF(this._alignToPixels?bu(this.chart,a,0):a)}getDecimalForPixel(t){const a=(t-this._startPixel)/this._length;return this._reversePixels?1-a:a}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:a}=this;return t<0&&a<0?a:t>0&&a>0?t:0}getContext(t){const a=this.ticks||[];if(t>=0&&t<a.length){const n=a[t];return n.$context||(n.$context=IO(this.getContext(),t,n))}return this.$context||(this.$context=FO(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,a=vo(this.labelRotation),n=Math.abs(Math.cos(a)),r=Math.abs(Math.sin(a)),i=this._getLabelSizes(),o=t.autoSkipPadding||0,c=i?i.widest.width+o:0,u=i?i.highest.height+o:0;return this.isHorizontal()?u*n>c*r?c/n:u/r:u*r<c*n?u/n:c/r}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const a=this.axis,n=this.chart,r=this.options,{grid:i,position:o,border:c}=r,u=i.offset,h=this.isHorizontal(),p=this.ticks.length+(u?1:0),y=Of(i),g=[],j=c.setContext(this.getContext()),b=j.display?j.width:0,N=b/2,v=function(R){return bu(n,R,b)};let S,E,L,z,V,te,q,B,J,P,K,H;if(o==="top")S=v(this.bottom),te=this.bottom-y,B=S-N,P=v(t.top)+N,H=t.bottom;else if(o==="bottom")S=v(this.top),P=t.top,H=v(t.bottom)-N,te=S+N,B=this.top+y;else if(o==="left")S=v(this.right),V=this.right-y,q=S-N,J=v(t.left)+N,K=t.right;else if(o==="right")S=v(this.left),J=t.left,K=v(t.right)-N,V=S+N,q=this.left+y;else if(a==="x"){if(o==="center")S=v((t.top+t.bottom)/2+.5);else if(Js(o)){const R=Object.keys(o)[0],Q=o[R];S=v(this.chart.scales[R].getPixelForValue(Q))}P=t.top,H=t.bottom,te=S+N,B=te+y}else if(a==="y"){if(o==="center")S=v((t.left+t.right)/2);else if(Js(o)){const R=Object.keys(o)[0],Q=o[R];S=v(this.chart.scales[R].getPixelForValue(Q))}V=S-N,q=V-y,J=t.left,K=t.right}const se=ks(r.ticks.maxTicksLimit,p),X=Math.max(1,Math.ceil(p/se));for(E=0;E<p;E+=X){const R=this.getContext(E),Q=i.setContext(R),Y=c.setContext(R),$=Q.lineWidth,me=Q.color,D=Y.dash||[],U=Y.dashOffset,le=Q.tickWidth,de=Q.tickColor,G=Q.tickBorderDash||[],je=Q.tickBorderDashOffset;L=LO(this,E,u),L!==void 0&&(z=bu(n,L,$),h?V=q=J=K=z:te=B=P=H=z,g.push({tx1:V,ty1:te,tx2:q,ty2:B,x1:J,y1:P,x2:K,y2:H,width:$,color:me,borderDash:D,borderDashOffset:U,tickWidth:le,tickColor:de,tickBorderDash:G,tickBorderDashOffset:je}))}return this._ticksLength=p,this._borderValue=S,g}_computeLabelItems(t){const a=this.axis,n=this.options,{position:r,ticks:i}=n,o=this.isHorizontal(),c=this.ticks,{align:u,crossAlign:h,padding:m,mirror:p}=i,y=Of(n.grid),g=y+m,j=p?-m:g,b=-vo(this.labelRotation),N=[];let v,S,E,L,z,V,te,q,B,J,P,K,H="middle";if(r==="top")V=this.bottom-j,te=this._getXAxisLabelAlignment();else if(r==="bottom")V=this.top+j,te=this._getXAxisLabelAlignment();else if(r==="left"){const X=this._getYAxisLabelAlignment(y);te=X.textAlign,z=X.x}else if(r==="right"){const X=this._getYAxisLabelAlignment(y);te=X.textAlign,z=X.x}else if(a==="x"){if(r==="center")V=(t.top+t.bottom)/2+g;else if(Js(r)){const X=Object.keys(r)[0],R=r[X];V=this.chart.scales[X].getPixelForValue(R)+g}te=this._getXAxisLabelAlignment()}else if(a==="y"){if(r==="center")z=(t.left+t.right)/2-g;else if(Js(r)){const X=Object.keys(r)[0],R=r[X];z=this.chart.scales[X].getPixelForValue(R)}te=this._getYAxisLabelAlignment(y).textAlign}a==="y"&&(u==="start"?H="top":u==="end"&&(H="bottom"));const se=this._getLabelSizes();for(v=0,S=c.length;v<S;++v){E=c[v],L=E.label;const X=i.setContext(this.getContext(v));q=this.getPixelForTick(v)+i.labelOffset,B=this._resolveTickFontOptions(v),J=B.lineHeight,P=en(L)?L.length:1;const R=P/2,Q=X.color,Y=X.textStrokeColor,$=X.textStrokeWidth;let me=te;o?(z=q,te==="inner"&&(v===S-1?me=this.options.reverse?"left":"right":v===0?me=this.options.reverse?"right":"left":me="center"),r==="top"?h==="near"||b!==0?K=-P*J+J/2:h==="center"?K=-se.highest.height/2-R*J+J:K=-se.highest.height+J/2:h==="near"||b!==0?K=J/2:h==="center"?K=se.highest.height/2-R*J:K=se.highest.height-P*J,p&&(K*=-1),b!==0&&!X.showLabelBackdrop&&(z+=J/2*Math.sin(b))):(V=q,K=(1-P)*J/2);let D;if(X.showLabelBackdrop){const U=ti(X.backdropPadding),le=se.heights[v],de=se.widths[v];let G=K-U.top,je=0-U.left;switch(H){case"middle":G-=le/2;break;case"bottom":G-=le;break}switch(te){case"center":je-=de/2;break;case"right":je-=de;break;case"inner":v===S-1?je-=de:v>0&&(je-=de/2);break}D={left:je,top:G,width:de+U.width,height:le+U.height,color:X.backdropColor}}N.push({label:L,font:B,textOffset:K,options:{rotation:b,color:Q,strokeColor:Y,strokeWidth:$,textAlign:me,textBaseline:H,translation:[z,V],backdrop:D}})}return N}_getXAxisLabelAlignment(){const{position:t,ticks:a}=this.options;if(-vo(this.labelRotation))return t==="top"?"left":"right";let r="center";return a.align==="start"?r="left":a.align==="end"?r="right":a.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(t){const{position:a,ticks:{crossAlign:n,mirror:r,padding:i}}=this.options,o=this._getLabelSizes(),c=t+i,u=o.widest.width;let h,m;return a==="left"?r?(m=this.right+i,n==="near"?h="left":n==="center"?(h="center",m+=u/2):(h="right",m+=u)):(m=this.right-c,n==="near"?h="right":n==="center"?(h="center",m-=u/2):(h="left",m=this.left)):a==="right"?r?(m=this.left+i,n==="near"?h="right":n==="center"?(h="center",m-=u/2):(h="left",m-=u)):(m=this.left+c,n==="near"?h="left":n==="center"?(h="center",m+=u/2):(h="right",m=this.right)):h="right",{textAlign:h,x:m}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,a=this.options.position;if(a==="left"||a==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(a==="top"||a==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:a},left:n,top:r,width:i,height:o}=this;a&&(t.save(),t.fillStyle=a,t.fillRect(n,r,i,o),t.restore())}getLineWidthForValue(t){const a=this.options.grid;if(!this._isVisible()||!a.display)return 0;const r=this.ticks.findIndex(i=>i.value===t);return r>=0?a.setContext(this.getContext(r)).lineWidth:0}drawGrid(t){const a=this.options.grid,n=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let i,o;const c=(u,h,m)=>{!m.width||!m.color||(n.save(),n.lineWidth=m.width,n.strokeStyle=m.color,n.setLineDash(m.borderDash||[]),n.lineDashOffset=m.borderDashOffset,n.beginPath(),n.moveTo(u.x,u.y),n.lineTo(h.x,h.y),n.stroke(),n.restore())};if(a.display)for(i=0,o=r.length;i<o;++i){const u=r[i];a.drawOnChartArea&&c({x:u.x1,y:u.y1},{x:u.x2,y:u.y2},u),a.drawTicks&&c({x:u.tx1,y:u.ty1},{x:u.tx2,y:u.ty2},{color:u.tickColor,width:u.tickWidth,borderDash:u.tickBorderDash,borderDashOffset:u.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:a,options:{border:n,grid:r}}=this,i=n.setContext(this.getContext()),o=n.display?i.width:0;if(!o)return;const c=r.setContext(this.getContext(0)).lineWidth,u=this._borderValue;let h,m,p,y;this.isHorizontal()?(h=bu(t,this.left,o)-o/2,m=bu(t,this.right,c)+c/2,p=y=u):(p=bu(t,this.top,o)-o/2,y=bu(t,this.bottom,c)+c/2,h=m=u),a.save(),a.lineWidth=i.width,a.strokeStyle=i.color,a.beginPath(),a.moveTo(h,p),a.lineTo(m,y),a.stroke(),a.restore()}drawLabels(t){if(!this.options.ticks.display)return;const n=this.ctx,r=this._computeLabelArea();r&&ix(n,r);const i=this.getLabelItems(t);for(const o of i){const c=o.options,u=o.font,h=o.label,m=o.textOffset;zu(n,h,0,m,u,c)}r&&lx(n)}drawTitle(){const{ctx:t,options:{position:a,title:n,reverse:r}}=this;if(!n.display)return;const i=rr(n.font),o=ti(n.padding),c=n.align;let u=i.lineHeight/2;a==="bottom"||a==="center"||Js(a)?(u+=o.bottom,en(n.text)&&(u+=i.lineHeight*(n.text.length-1))):u+=o.top;const{titleX:h,titleY:m,maxWidth:p,rotation:y}=MO(this,u,a,c);zu(t,n.text,0,0,i,{color:n.color,maxWidth:p,rotation:y,textAlign:OO(c,a,r),textBaseline:"middle",translation:[h,m]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,a=t.ticks&&t.ticks.z||0,n=ks(t.grid&&t.grid.z,-1),r=ks(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==Vu.prototype.draw?[{z:a,draw:i=>{this.draw(i)}}]:[{z:n,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:a,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(t){const a=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",r=[];let i,o;for(i=0,o=a.length;i<o;++i){const c=a[i];c[n]===this.id&&(!t||c.type===t)&&r.push(c)}return r}_resolveTickFontOptions(t){const a=this.options.ticks.setContext(this.getContext(t));return rr(a.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class Ip{constructor(t,a,n){this.type=t,this.scope=a,this.override=n,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const a=Object.getPrototypeOf(t);let n;zO(a)&&(n=this.register(a));const r=this.items,i=t.id,o=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+t);return i in r||(r[i]=t,RO(t,o,n),this.override&&tn.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){const a=this.items,n=t.id,r=this.scope;n in a&&delete a[n],r&&n in tn[r]&&(delete tn[r][n],this.override&&delete Bu[n])}}function RO(s,t,a){const n=im(Object.create(null),[a?tn.get(a):{},tn.get(t),s.defaults]);tn.set(t,n),s.defaultRoutes&&BO(t,s.defaultRoutes),s.descriptors&&tn.describe(t,s.descriptors)}function BO(s,t){Object.keys(t).forEach(a=>{const n=a.split("."),r=n.pop(),i=[s].concat(n).join("."),o=t[a].split("."),c=o.pop(),u=o.join(".");tn.route(i,r,u,c)})}function zO(s){return"id"in s&&"defaults"in s}class qO{constructor(){this.controllers=new Ip(Zd,"datasets",!0),this.elements=new Ip(rd,"elements"),this.plugins=new Ip(Object,"plugins"),this.scales=new Ip(Vu,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,a,n){[...a].forEach(r=>{const i=n||this._getRegistryForType(r);n||i.isForType(r)||i===this.plugins&&r.id?this._exec(t,i,r):ya(r,o=>{const c=n||this._getRegistryForType(o);this._exec(t,c,o)})})}_exec(t,a,n){const r=Qv(t);Ra(n["before"+r],[],n),a[t](n),Ra(n["after"+r],[],n)}_getRegistryForType(t){for(let a=0;a<this._typedRegistries.length;a++){const n=this._typedRegistries[a];if(n.isForType(t))return n}return this.plugins}_get(t,a,n){const r=a.get(t);if(r===void 0)throw new Error('"'+t+'" is not a registered '+n+".");return r}}var Zo=new qO;class UO{constructor(){this._init=void 0}notify(t,a,n,r){if(a==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install")),this._init===void 0)return;const i=r?this._descriptors(t).filter(r):this._descriptors(t),o=this._notify(i,t,a,n);return a==="afterDestroy"&&(this._notify(i,t,"stop"),this._notify(this._init,t,"uninstall"),this._init=void 0),o}_notify(t,a,n,r){r=r||{};for(const i of t){const o=i.plugin,c=o[n],u=[a,r,i.options];if(Ra(c,u,o)===!1&&r.cancelable)return!1}return!0}invalidate(){Hs(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const a=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),a}_createDescriptors(t,a){const n=t&&t.config,r=ks(n.options&&n.options.plugins,{}),i=HO(n);return r===!1&&!a?[]:VO(t,i,r,a)}_notifyStateChanges(t){const a=this._oldCache||[],n=this._cache,r=(i,o)=>i.filter(c=>!o.some(u=>c.plugin.id===u.plugin.id));this._notify(r(a,n),t,"stop"),this._notify(r(n,a),t,"start")}}function HO(s){const t={},a=[],n=Object.keys(Zo.plugins.items);for(let i=0;i<n.length;i++)a.push(Zo.getPlugin(n[i]));const r=s.plugins||[];for(let i=0;i<r.length;i++){const o=r[i];a.indexOf(o)===-1&&(a.push(o),t[o.id]=!0)}return{plugins:a,localIds:t}}function $O(s,t){return!t&&s===!1?null:s===!0?{}:s}function VO(s,{plugins:t,localIds:a},n,r){const i=[],o=s.getContext();for(const c of t){const u=c.id,h=$O(n[u],r);h!==null&&i.push({plugin:c,options:WO(s.config,{plugin:c,local:a[u]},h,o)})}return i}function WO(s,{plugin:t,local:a},n,r){const i=s.pluginScopeKeys(t),o=s.getOptionScopes(n,i);return a&&t.defaults&&o.push(t.defaults),s.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Xy(s,t){const a=tn.datasets[s]||{};return((t.datasets||{})[s]||{}).indexAxis||t.indexAxis||a.indexAxis||"x"}function YO(s,t){let a=s;return s==="_index_"?a=t:s==="_value_"&&(a=t==="x"?"y":"x"),a}function KO(s,t){return s===t?"_index_":"_value_"}function k2(s){if(s==="x"||s==="y"||s==="r")return s}function XO(s){if(s==="top"||s==="bottom")return"x";if(s==="left"||s==="right")return"y"}function Gy(s,...t){if(k2(s))return s;for(const a of t){const n=a.axis||XO(a.position)||s.length>1&&k2(s[0].toLowerCase());if(n)return n}throw new Error(`Cannot determine type of '${s}' axis. Please provide 'axis' or 'position' option.`)}function D2(s,t,a){if(a[t+"AxisID"]===s)return{axis:t}}function GO(s,t){if(t.data&&t.data.datasets){const a=t.data.datasets.filter(n=>n.xAxisID===s||n.yAxisID===s);if(a.length)return D2(s,"x",a[0])||D2(s,"y",a[0])}return{}}function QO(s,t){const a=Bu[s.type]||{scales:{}},n=t.scales||{},r=Xy(s.type,t),i=Object.create(null);return Object.keys(n).forEach(o=>{const c=n[o];if(!Js(c))return console.error(`Invalid scale configuration for scale: ${o}`);if(c._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const u=Gy(o,c,GO(o,s),tn.scales[c.type]),h=KO(u,r),m=a.scales||{};i[o]=Gf(Object.create(null),[{axis:u},c,m[u],m[h]])}),s.data.datasets.forEach(o=>{const c=o.type||s.type,u=o.indexAxis||Xy(c,t),m=(Bu[c]||{}).scales||{};Object.keys(m).forEach(p=>{const y=YO(p,u),g=o[y+"AxisID"]||y;i[g]=i[g]||Object.create(null),Gf(i[g],[{axis:y},n[g],m[p]])})}),Object.keys(i).forEach(o=>{const c=i[o];Gf(c,[tn.scales[c.type],tn.scale])}),i}function N5(s){const t=s.options||(s.options={});t.plugins=ks(t.plugins,{}),t.scales=QO(s,t)}function w5(s){return s=s||{},s.datasets=s.datasets||[],s.labels=s.labels||[],s}function JO(s){return s=s||{},s.data=w5(s.data),N5(s),s}const E2=new Map,_5=new Set;function Op(s,t){let a=E2.get(s);return a||(a=t(),E2.set(s,a),_5.add(a)),a}const Mf=(s,t,a)=>{const n=Xd(t,a);n!==void 0&&s.add(n)};class ZO{constructor(t){this._config=JO(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=w5(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),N5(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return Op(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,a){return Op(`${t}.transition.${a}`,()=>[[`datasets.${t}.transitions.${a}`,`transitions.${a}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,a){return Op(`${t}-${a}`,()=>[[`datasets.${t}.elements.${a}`,`datasets.${t}`,`elements.${a}`,""]])}pluginScopeKeys(t){const a=t.id,n=this.type;return Op(`${n}-plugin-${a}`,()=>[[`plugins.${a}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,a){const n=this._scopeCache;let r=n.get(t);return(!r||a)&&(r=new Map,n.set(t,r)),r}getOptionScopes(t,a,n){const{options:r,type:i}=this,o=this._cachedScopes(t,n),c=o.get(a);if(c)return c;const u=new Set;a.forEach(m=>{t&&(u.add(t),m.forEach(p=>Mf(u,t,p))),m.forEach(p=>Mf(u,r,p)),m.forEach(p=>Mf(u,Bu[i]||{},p)),m.forEach(p=>Mf(u,tn,p)),m.forEach(p=>Mf(u,Yy,p))});const h=Array.from(u);return h.length===0&&h.push(Object.create(null)),_5.has(a)&&o.set(a,h),h}chartOptionScopes(){const{options:t,type:a}=this;return[t,Bu[a]||{},tn.datasets[a]||{},{type:a},tn,Yy]}resolveNamedOptions(t,a,n,r=[""]){const i={$shared:!0},{resolver:o,subPrefixes:c}=T2(this._resolverCache,t,r);let u=o;if(tM(o,a)){i.$shared=!1,n=Gd(n)?n():n;const h=this.createResolver(t,n,c);u=Uh(o,n,h)}for(const h of a)i[h]=u[h];return i}createResolver(t,a,n=[""],r){const{resolver:i}=T2(this._resolverCache,t,n);return Js(a)?Uh(i,a,void 0,r):i}}function T2(s,t,a){let n=s.get(t);n||(n=new Map,s.set(t,n));const r=a.join();let i=n.get(r);return i||(i={resolver:a0(t,a),subPrefixes:a.filter(c=>!c.toLowerCase().includes("hover"))},n.set(r,i)),i}const eM=s=>Js(s)&&Object.getOwnPropertyNames(s).some(t=>Gd(s[t]));function tM(s,t){const{isScriptable:a,isIndexable:n}=ZC(s);for(const r of t){const i=a(r),o=n(r),c=(o||i)&&s[r];if(i&&(Gd(c)||eM(c))||o&&en(c))return!0}return!1}var sM="4.5.1";const aM=["top","bottom","left","right","chartArea"];function L2(s,t){return s==="top"||s==="bottom"||aM.indexOf(s)===-1&&t==="x"}function P2(s,t){return function(a,n){return a[s]===n[s]?a[t]-n[t]:a[s]-n[s]}}function F2(s){const t=s.chart,a=t.options.animation;t.notifyPlugins("afterRender"),Ra(a&&a.onComplete,[s],t)}function nM(s){const t=s.chart,a=t.options.animation;Ra(a&&a.onProgress,[s],t)}function S5(s){return i0()&&typeof s=="string"?s=document.getElementById(s):s&&s.length&&(s=s[0]),s&&s.canvas&&(s=s.canvas),s}const lg={},I2=s=>{const t=S5(s);return Object.values(lg).filter(a=>a.canvas===t).pop()};function rM(s,t,a){const n=Object.keys(s);for(const r of n){const i=+r;if(i>=t){const o=s[r];delete s[r],(a>0||i>t)&&(s[i+a]=o)}}}function iM(s,t,a,n){return!a||s.type==="mouseout"?null:n?t:s}let dx=class{static defaults=tn;static instances=lg;static overrides=Bu;static registry=Zo;static version=sM;static getChart=I2;static register(...t){Zo.add(...t),O2()}static unregister(...t){Zo.remove(...t),O2()}constructor(t,a){const n=this.config=new ZO(a),r=S5(t),i=I2(r);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const o=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||_O(r)),this.platform.updateConfig(n);const c=this.platform.acquireContext(r,o.aspectRatio),u=c&&c.canvas,h=u&&u.height,m=u&&u.width;if(this.id=aF(),this.ctx=c,this.canvas=u,this.width=m,this.height=h,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new UO,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=vF(p=>this.update(p),o.resizeDelay||0),this._dataChanges=[],lg[this.id]=this,!c||!u){console.error("Failed to create chart: can't acquire context from the given item");return}Vc.listen(this,"complete",F2),Vc.listen(this,"progress",nM),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:a},width:n,height:r,_aspectRatio:i}=this;return Hs(t)?a&&i?i:r?n/r:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return Zo}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():n2(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return t2(this.canvas,this.ctx),this}stop(){return Vc.stop(this),this}resize(t,a){Vc.running(this)?this._resizeBeforeDraw={width:t,height:a}:this._resize(t,a)}_resize(t,a){const n=this.options,r=this.canvas,i=n.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(r,t,a,i),c=n.devicePixelRatio||this.platform.getDevicePixelRatio(),u=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,n2(this,c,!0)&&(this.notifyPlugins("resize",{size:o}),Ra(n.onResize,[this,o],this),this.attached&&this._doResize(u)&&this.render())}ensureScalesHaveIDs(){const a=this.options.scales||{};ya(a,(n,r)=>{n.id=r})}buildOrUpdateScales(){const t=this.options,a=t.scales,n=this.scales,r=Object.keys(n).reduce((o,c)=>(o[c]=!1,o),{});let i=[];a&&(i=i.concat(Object.keys(a).map(o=>{const c=a[o],u=Gy(o,c),h=u==="r",m=u==="x";return{options:c,dposition:h?"chartArea":m?"bottom":"left",dtype:h?"radialLinear":m?"category":"linear"}}))),ya(i,o=>{const c=o.options,u=c.id,h=Gy(u,c),m=ks(c.type,o.dtype);(c.position===void 0||L2(c.position,h)!==L2(o.dposition))&&(c.position=o.dposition),r[u]=!0;let p=null;if(u in n&&n[u].type===m)p=n[u];else{const y=Zo.getScale(m);p=new y({id:u,type:m,ctx:this.ctx,chart:this}),n[p.id]=p}p.init(c,t)}),ya(r,(o,c)=>{o||delete n[c]}),ya(n,o=>{Zr.configure(this,o,o.options),Zr.addBox(this,o)})}_updateMetasets(){const t=this._metasets,a=this.data.datasets.length,n=t.length;if(t.sort((r,i)=>r.index-i.index),n>a){for(let r=a;r<n;++r)this._destroyDatasetMeta(r);t.splice(a,n-a)}this._sortedMetasets=t.slice(0).sort(P2("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:a}}=this;t.length>a.length&&delete this._stacks,t.forEach((n,r)=>{a.filter(i=>i===n._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const t=[],a=this.data.datasets;let n,r;for(this._removeUnreferencedMetasets(),n=0,r=a.length;n<r;n++){const i=a[n];let o=this.getDatasetMeta(n);const c=i.type||this.config.type;if(o.type&&o.type!==c&&(this._destroyDatasetMeta(n),o=this.getDatasetMeta(n)),o.type=c,o.indexAxis=i.indexAxis||Xy(c,this.options),o.order=i.order||0,o.index=n,o.label=""+i.label,o.visible=this.isDatasetVisible(n),o.controller)o.controller.updateIndex(n),o.controller.linkScales();else{const u=Zo.getController(c),{datasetElementType:h,dataElementType:m}=tn.datasets[c];Object.assign(u,{dataElementType:Zo.getElement(m),datasetElementType:h&&Zo.getElement(h)}),o.controller=new u(this,n),t.push(o.controller)}}return this._updateMetasets(),t}_resetElements(){ya(this.data.datasets,(t,a)=>{this.getDatasetMeta(a).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const a=this.config;a.update();const n=this._options=a.createResolver(a.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let h=0,m=this.data.datasets.length;h<m;h++){const{controller:p}=this.getDatasetMeta(h),y=!r&&i.indexOf(p)===-1;p.buildOrUpdateElements(y),o=Math.max(+p.getMaxOverflow(),o)}o=this._minPadding=n.layout.autoPadding?o:0,this._updateLayout(o),r||ya(i,h=>{h.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(P2("z","_idx"));const{_active:c,_lastEvent:u}=this;u?this._eventHandler(u,!0):c.length&&this._updateHoverStyles(c,c,!0),this.render()}_updateScales(){ya(this.scales,t=>{Zr.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,a=new Set(Object.keys(this._listeners)),n=new Set(t.events);(!W1(a,n)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,a=this._getUniformDataChanges()||[];for(const{method:n,start:r,count:i}of a){const o=n==="_removeElements"?-i:i;rM(t,r,o)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const a=this.data.datasets.length,n=i=>new Set(t.filter(o=>o[0]===i).map((o,c)=>c+","+o.splice(1).join(","))),r=n(0);for(let i=1;i<a;i++)if(!W1(r,n(i)))return;return Array.from(r).map(i=>i.split(",")).map(i=>({method:i[1],start:+i[2],count:+i[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Zr.update(this,this.width,this.height,t);const a=this.chartArea,n=a.width<=0||a.height<=0;this._layers=[],ya(this.boxes,r=>{n&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,i)=>{r._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let a=0,n=this.data.datasets.length;a<n;++a)this.getDatasetMeta(a).controller.configure();for(let a=0,n=this.data.datasets.length;a<n;++a)this._updateDataset(a,Gd(t)?t({datasetIndex:a}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,a){const n=this.getDatasetMeta(t),r={meta:n,index:t,mode:a,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(n.controller._update(a),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Vc.has(this)?this.attached&&!Vc.running(this)&&Vc.start(this):(this.draw(),F2({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:n,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(n,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const a=this._layers;for(t=0;t<a.length&&a[t].z<=0;++t)a[t].draw(this.chartArea);for(this._drawDatasets();t<a.length;++t)a[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const a=this._sortedMetasets,n=[];let r,i;for(r=0,i=a.length;r<i;++r){const o=a[r];(!t||o.visible)&&n.push(o)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let a=t.length-1;a>=0;--a)this._drawDataset(t[a]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const a=this.ctx,n={meta:t,index:t.index,cancelable:!0},r=d5(this,t);this.notifyPlugins("beforeDatasetDraw",n)!==!1&&(r&&ix(a,r),t.controller.draw(),r&&lx(a),n.cancelable=!1,this.notifyPlugins("afterDatasetDraw",n))}isPointInArea(t){return Jc(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,a,n,r){const i=aO.modes[a];return typeof i=="function"?i(this,t,n,r):[]}getDatasetMeta(t){const a=this.data.datasets[t],n=this._metasets;let r=n.filter(i=>i&&i._dataset===a).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:a&&a.order||0,index:t,_dataset:a,_parsed:[],_sorted:!1},n.push(r)),r}getContext(){return this.$context||(this.$context=Jd(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const a=this.data.datasets[t];if(!a)return!1;const n=this.getDatasetMeta(t);return typeof n.hidden=="boolean"?!n.hidden:!a.hidden}setDatasetVisibility(t,a){const n=this.getDatasetMeta(t);n.hidden=!a}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,a,n){const r=n?"show":"hide",i=this.getDatasetMeta(t),o=i.controller._resolveAnimations(void 0,r);lm(a)?(i.data[a].hidden=!n,this.update()):(this.setDatasetVisibility(t,n),o.update(i,{visible:n}),this.update(c=>c.datasetIndex===t?r:void 0))}hide(t,a){this._updateVisibility(t,a,!1)}show(t,a){this._updateVisibility(t,a,!0)}_destroyDatasetMeta(t){const a=this._metasets[t];a&&a.controller&&a.controller._destroy(),delete this._metasets[t]}_stop(){let t,a;for(this.stop(),Vc.remove(this),t=0,a=this.data.datasets.length;t<a;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:a}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),t2(t,a),this.platform.releaseContext(a),this.canvas=null,this.ctx=null),delete lg[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,a=this.platform,n=(i,o)=>{a.addEventListener(this,i,o),t[i]=o},r=(i,o,c)=>{i.offsetX=o,i.offsetY=c,this._eventHandler(i)};ya(this.options.events,i=>n(i,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,a=this.platform,n=(u,h)=>{a.addEventListener(this,u,h),t[u]=h},r=(u,h)=>{t[u]&&(a.removeEventListener(this,u,h),delete t[u])},i=(u,h)=>{this.canvas&&this.resize(u,h)};let o;const c=()=>{r("attach",c),this.attached=!0,this.resize(),n("resize",i),n("detach",o)};o=()=>{this.attached=!1,r("resize",i),this._stop(),this._resize(0,0),n("attach",c)},a.isAttached(this.canvas)?c():o()}unbindEvents(){ya(this._listeners,(t,a)=>{this.platform.removeEventListener(this,a,t)}),this._listeners={},ya(this._responsiveListeners,(t,a)=>{this.platform.removeEventListener(this,a,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,a,n){const r=n?"set":"remove";let i,o,c,u;for(a==="dataset"&&(i=this.getDatasetMeta(t[0].datasetIndex),i.controller["_"+r+"DatasetHoverStyle"]()),c=0,u=t.length;c<u;++c){o=t[c];const h=o&&this.getDatasetMeta(o.datasetIndex).controller;h&&h[r+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const a=this._active||[],n=t.map(({datasetIndex:i,index:o})=>{const c=this.getDatasetMeta(i);if(!c)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:c.data[o],index:o}});!Eg(n,a)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,a))}notifyPlugins(t,a,n){return this._plugins.notify(this,t,a,n)}isPluginEnabled(t){return this._plugins._cache.filter(a=>a.plugin.id===t).length===1}_updateHoverStyles(t,a,n){const r=this.options.hover,i=(u,h)=>u.filter(m=>!h.some(p=>m.datasetIndex===p.datasetIndex&&m.index===p.index)),o=i(a,t),c=n?t:i(t,a);o.length&&this.updateHoverStyle(o,r.mode,!1),c.length&&r.mode&&this.updateHoverStyle(c,r.mode,!0)}_eventHandler(t,a){const n={event:t,replay:a,cancelable:!0,inChartArea:this.isPointInArea(t)},r=o=>(o.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",n,r)===!1)return;const i=this._handleEvent(t,a,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,r),(i||n.changed)&&this.render(),this}_handleEvent(t,a,n){const{_active:r=[],options:i}=this,o=a,c=this._getActiveElements(t,r,n,o),u=cF(t),h=iM(t,this._lastEvent,n,u);n&&(this._lastEvent=null,Ra(i.onHover,[t,c,this],this),u&&Ra(i.onClick,[t,c,this],this));const m=!Eg(c,r);return(m||a)&&(this._active=c,this._updateHoverStyles(c,r,a)),this._lastEvent=h,m}_getActiveElements(t,a,n,r){if(t.type==="mouseout")return[];if(!n)return a;const i=this.options.hover;return this.getElementsAtEventForMode(t,i.mode,i,r)}};function O2(){return ya(dx.instances,s=>s._plugins.invalidate())}function lM(s,t,a){const{startAngle:n,x:r,y:i,outerRadius:o,innerRadius:c,options:u}=t,{borderWidth:h,borderJoinStyle:m}=u,p=Math.min(h/o,Qr(n-a));if(s.beginPath(),s.arc(r,i,o-h/2,n+p/2,a-p/2),c>0){const y=Math.min(h/c,Qr(n-a));s.arc(r,i,c+h/2,a-y/2,n+y/2,!0)}else{const y=Math.min(h/2,o*Qr(n-a));if(m==="round")s.arc(r,i,y,a-la/2,n+la/2,!0);else if(m==="bevel"){const g=2*y*y,j=-g*Math.cos(a+la/2)+r,b=-g*Math.sin(a+la/2)+i,N=g*Math.cos(n+la/2)+r,v=g*Math.sin(n+la/2)+i;s.lineTo(j,b),s.lineTo(N,v)}}s.closePath(),s.moveTo(0,0),s.rect(0,0,s.canvas.width,s.canvas.height),s.clip("evenodd")}function oM(s,t,a){const{startAngle:n,pixelMargin:r,x:i,y:o,outerRadius:c,innerRadius:u}=t;let h=r/c;s.beginPath(),s.arc(i,o,c,n-h,a+h),u>r?(h=r/u,s.arc(i,o,u,a+h,n-h,!0)):s.arc(i,o,r,a+En,n-En),s.closePath(),s.clip()}function cM(s){return s0(s,["outerStart","outerEnd","innerStart","innerEnd"])}function dM(s,t,a,n){const r=cM(s.options.borderRadius),i=(a-t)/2,o=Math.min(i,n*t/2),c=u=>{const h=(a-Math.min(i,u))*n/2;return xr(u,0,Math.min(i,h))};return{outerStart:c(r.outerStart),outerEnd:c(r.outerEnd),innerStart:xr(r.innerStart,0,o),innerEnd:xr(r.innerEnd,0,o)}}function ph(s,t,a,n){return{x:a+s*Math.cos(t),y:n+s*Math.sin(t)}}function Og(s,t,a,n,r,i){const{x:o,y:c,startAngle:u,pixelMargin:h,innerRadius:m}=t,p=Math.max(t.outerRadius+n+a-h,0),y=m>0?m+n+a+h:0;let g=0;const j=r-u;if(n){const X=m>0?m-n:0,R=p>0?p-n:0,Q=(X+R)/2,Y=Q!==0?j*Q/(Q+n):j;g=(j-Y)/2}const b=Math.max(.001,j*p-a/la)/p,N=(j-b)/2,v=u+N+g,S=r-N-g,{outerStart:E,outerEnd:L,innerStart:z,innerEnd:V}=dM(t,y,p,S-v),te=p-E,q=p-L,B=v+E/te,J=S-L/q,P=y+z,K=y+V,H=v+z/P,se=S-V/K;if(s.beginPath(),i){const X=(B+J)/2;if(s.arc(o,c,p,B,X),s.arc(o,c,p,X,J),L>0){const $=ph(q,J,o,c);s.arc($.x,$.y,L,J,S+En)}const R=ph(K,S,o,c);if(s.lineTo(R.x,R.y),V>0){const $=ph(K,se,o,c);s.arc($.x,$.y,V,S+En,se+Math.PI)}const Q=(S-V/y+(v+z/y))/2;if(s.arc(o,c,y,S-V/y,Q,!0),s.arc(o,c,y,Q,v+z/y,!0),z>0){const $=ph(P,H,o,c);s.arc($.x,$.y,z,H+Math.PI,v-En)}const Y=ph(te,v,o,c);if(s.lineTo(Y.x,Y.y),E>0){const $=ph(te,B,o,c);s.arc($.x,$.y,E,v-En,B)}}else{s.moveTo(o,c);const X=Math.cos(B)*p+o,R=Math.sin(B)*p+c;s.lineTo(X,R);const Q=Math.cos(J)*p+o,Y=Math.sin(J)*p+c;s.lineTo(Q,Y)}s.closePath()}function uM(s,t,a,n,r){const{fullCircles:i,startAngle:o,circumference:c}=t;let u=t.endAngle;if(i){Og(s,t,a,n,u,r);for(let h=0;h<i;++h)s.fill();isNaN(c)||(u=o+(c%Va||Va))}return Og(s,t,a,n,u,r),s.fill(),u}function hM(s,t,a,n,r){const{fullCircles:i,startAngle:o,circumference:c,options:u}=t,{borderWidth:h,borderJoinStyle:m,borderDash:p,borderDashOffset:y,borderRadius:g}=u,j=u.borderAlign==="inner";if(!h)return;s.setLineDash(p||[]),s.lineDashOffset=y,j?(s.lineWidth=h*2,s.lineJoin=m||"round"):(s.lineWidth=h,s.lineJoin=m||"bevel");let b=t.endAngle;if(i){Og(s,t,a,n,b,r);for(let N=0;N<i;++N)s.stroke();isNaN(c)||(b=o+(c%Va||Va))}j&&oM(s,t,b),u.selfJoin&&b-o>=la&&g===0&&m!=="miter"&&lM(s,t,b),i||(Og(s,t,a,n,b,r),s.stroke())}class fM extends rd{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,a,n){const r=this.getProps(["x","y"],n),{angle:i,distance:o}=HC(r,{x:t,y:a}),{startAngle:c,endAngle:u,innerRadius:h,outerRadius:m,circumference:p}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),y=(this.options.spacing+this.options.borderWidth)/2,g=ks(p,u-c),j=om(i,c,u)&&c!==u,b=g>=Va||j,N=Gc(o,h+y,m+y);return b&&N}getCenterPoint(t){const{x:a,y:n,startAngle:r,endAngle:i,innerRadius:o,outerRadius:c}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:u,spacing:h}=this.options,m=(r+i)/2,p=(o+c+h+u)/2;return{x:a+Math.cos(m)*p,y:n+Math.sin(m)*p}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:a,circumference:n}=this,r=(a.offset||0)/4,i=(a.spacing||0)/2,o=a.circular;if(this.pixelMargin=a.borderAlign==="inner"?.33:0,this.fullCircles=n>Va?Math.floor(n/Va):0,n===0||this.innerRadius<0||this.outerRadius<0)return;t.save();const c=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(c)*r,Math.sin(c)*r);const u=1-Math.sin(Math.min(la,n||0)),h=r*u;t.fillStyle=a.backgroundColor,t.strokeStyle=a.borderColor,uM(t,this,h,i,o),hM(t,this,h,i,o),t.restore()}}function C5(s,t,a=t){s.lineCap=ks(a.borderCapStyle,t.borderCapStyle),s.setLineDash(ks(a.borderDash,t.borderDash)),s.lineDashOffset=ks(a.borderDashOffset,t.borderDashOffset),s.lineJoin=ks(a.borderJoinStyle,t.borderJoinStyle),s.lineWidth=ks(a.borderWidth,t.borderWidth),s.strokeStyle=ks(a.borderColor,t.borderColor)}function mM(s,t,a){s.lineTo(a.x,a.y)}function pM(s){return s.stepped?LF:s.tension||s.cubicInterpolationMode==="monotone"?PF:mM}function A5(s,t,a={}){const n=s.length,{start:r=0,end:i=n-1}=a,{start:o,end:c}=t,u=Math.max(r,o),h=Math.min(i,c),m=r<o&&i<o||r>c&&i>c;return{count:n,start:u,loop:t.loop,ilen:h<u&&!m?n+h-u:h-u}}function gM(s,t,a,n){const{points:r,options:i}=t,{count:o,start:c,loop:u,ilen:h}=A5(r,a,n),m=pM(i);let{move:p=!0,reverse:y}=n||{},g,j,b;for(g=0;g<=h;++g)j=r[(c+(y?h-g:g))%o],!j.skip&&(p?(s.moveTo(j.x,j.y),p=!1):m(s,b,j,y,i.stepped),b=j);return u&&(j=r[(c+(y?h:0))%o],m(s,b,j,y,i.stepped)),!!u}function xM(s,t,a,n){const r=t.points,{count:i,start:o,ilen:c}=A5(r,a,n),{move:u=!0,reverse:h}=n||{};let m=0,p=0,y,g,j,b,N,v;const S=L=>(o+(h?c-L:L))%i,E=()=>{b!==N&&(s.lineTo(m,N),s.lineTo(m,b),s.lineTo(m,v))};for(u&&(g=r[S(0)],s.moveTo(g.x,g.y)),y=0;y<=c;++y){if(g=r[S(y)],g.skip)continue;const L=g.x,z=g.y,V=L|0;V===j?(z<b?b=z:z>N&&(N=z),m=(p*m+L)/++p):(E(),s.lineTo(L,z),j=V,p=0,b=N=z),v=z}E()}function Qy(s){const t=s.options,a=t.borderDash&&t.borderDash.length;return!s._decimated&&!s._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!a?xM:gM}function bM(s){return s.stepped?uI:s.tension||s.cubicInterpolationMode==="monotone"?hI:_u}function yM(s,t,a,n){let r=t._path;r||(r=t._path=new Path2D,t.path(r,a,n)&&r.closePath()),C5(s,t.options),s.stroke(r)}function vM(s,t,a,n){const{segments:r,options:i}=t,o=Qy(t);for(const c of r)C5(s,i,c.style),s.beginPath(),o(s,t,c,{start:a,end:a+n-1})&&s.closePath(),s.stroke()}const jM=typeof Path2D=="function";function NM(s,t,a,n){jM&&!t.options.segment?yM(s,t,a,n):vM(s,t,a,n)}class Em extends rd{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"};constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,a){const n=this.options;if((n.tension||n.cubicInterpolationMode==="monotone")&&!n.stepped&&!this._pointsUpdated){const r=n.spanGaps?this._loop:this._fullLoop;aI(this._points,n,t,r,a),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=bI(this,this.options.segment))}first(){const t=this.segments,a=this.points;return t.length&&a[t[0].start]}last(){const t=this.segments,a=this.points,n=t.length;return n&&a[t[n-1].end]}interpolate(t,a){const n=this.options,r=t[a],i=this.points,o=c5(this,{property:a,start:r,end:r});if(!o.length)return;const c=[],u=bM(n);let h,m;for(h=0,m=o.length;h<m;++h){const{start:p,end:y}=o[h],g=i[p],j=i[y];if(g===j){c.push(g);continue}const b=Math.abs((r-g[a])/(j[a]-g[a])),N=u(g,j,b,n.stepped);N[a]=t[a],c.push(N)}return c.length===1?c[0]:c}pathSegment(t,a,n){return Qy(this)(t,this,a,n)}path(t,a,n){const r=this.segments,i=Qy(this);let o=this._loop;a=a||0,n=n||this.points.length-a;for(const c of r)o&=i(t,this,c,{start:a,end:a+n-1});return!!o}draw(t,a,n,r){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(t.save(),NM(t,this,n,r),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function M2(s,t,a,n){const r=s.options,{[a]:i}=s.getProps([a],n);return Math.abs(t-i)<r.radius+r.hitRadius}class k5 extends rd{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,a,n){const r=this.options,{x:i,y:o}=this.getProps(["x","y"],n);return Math.pow(t-i,2)+Math.pow(a-o,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(t,a){return M2(this,t,"x",a)}inYRange(t,a){return M2(this,t,"y",a)}getCenterPoint(t){const{x:a,y:n}=this.getProps(["x","y"],t);return{x:a,y:n}}size(t){t=t||this.options||{};let a=t.radius||0;a=Math.max(a,a&&t.hoverRadius||0);const n=a&&t.borderWidth||0;return(a+n)*2}draw(t,a){const n=this.options;this.skip||n.radius<.1||!Jc(this,a,this.size(n)/2)||(t.strokeStyle=n.borderColor,t.lineWidth=n.borderWidth,t.fillStyle=n.backgroundColor,Ky(t,n,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}function D5(s,t){const{x:a,y:n,base:r,width:i,height:o}=s.getProps(["x","y","base","width","height"],t);let c,u,h,m,p;return s.horizontal?(p=o/2,c=Math.min(a,r),u=Math.max(a,r),h=n-p,m=n+p):(p=i/2,c=a-p,u=a+p,h=Math.min(n,r),m=Math.max(n,r)),{left:c,top:h,right:u,bottom:m}}function Vd(s,t,a,n){return s?0:xr(t,a,n)}function wM(s,t,a){const n=s.options.borderWidth,r=s.borderSkipped,i=JC(n);return{t:Vd(r.top,i.top,0,a),r:Vd(r.right,i.right,0,t),b:Vd(r.bottom,i.bottom,0,a),l:Vd(r.left,i.left,0,t)}}function _M(s,t,a){const{enableBorderRadius:n}=s.getProps(["enableBorderRadius"]),r=s.options.borderRadius,i=Lu(r),o=Math.min(t,a),c=s.borderSkipped,u=n||Js(r);return{topLeft:Vd(!u||c.top||c.left,i.topLeft,0,o),topRight:Vd(!u||c.top||c.right,i.topRight,0,o),bottomLeft:Vd(!u||c.bottom||c.left,i.bottomLeft,0,o),bottomRight:Vd(!u||c.bottom||c.right,i.bottomRight,0,o)}}function SM(s){const t=D5(s),a=t.right-t.left,n=t.bottom-t.top,r=wM(s,a/2,n/2),i=_M(s,a/2,n/2);return{outer:{x:t.left,y:t.top,w:a,h:n,radius:i},inner:{x:t.left+r.l,y:t.top+r.t,w:a-r.l-r.r,h:n-r.t-r.b,radius:{topLeft:Math.max(0,i.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,i.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,i.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,i.bottomRight-Math.max(r.b,r.r))}}}}function Qb(s,t,a,n){const r=t===null,i=a===null,c=s&&!(r&&i)&&D5(s,n);return c&&(r||Gc(t,c.left,c.right))&&(i||Gc(a,c.top,c.bottom))}function CM(s){return s.topLeft||s.topRight||s.bottomLeft||s.bottomRight}function AM(s,t){s.rect(t.x,t.y,t.w,t.h)}function Jb(s,t,a={}){const n=s.x!==a.x?-t:0,r=s.y!==a.y?-t:0,i=(s.x+s.w!==a.x+a.w?t:0)-n,o=(s.y+s.h!==a.y+a.h?t:0)-r;return{x:s.x+n,y:s.y+r,w:s.w+i,h:s.h+o,radius:s.radius}}class E5 extends rd{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:a,options:{borderColor:n,backgroundColor:r}}=this,{inner:i,outer:o}=SM(this),c=CM(o.radius)?cm:AM;t.save(),(o.w!==i.w||o.h!==i.h)&&(t.beginPath(),c(t,Jb(o,a,i)),t.clip(),c(t,Jb(i,-a,o)),t.fillStyle=n,t.fill("evenodd")),t.beginPath(),c(t,Jb(i,a)),t.fillStyle=r,t.fill(),t.restore()}inRange(t,a,n){return Qb(this,t,a,n)}inXRange(t,a){return Qb(this,t,null,a)}inYRange(t,a){return Qb(this,null,t,a)}getCenterPoint(t){const{x:a,y:n,base:r,horizontal:i}=this.getProps(["x","y","base","horizontal"],t);return{x:i?(a+r)/2:a,y:i?n:(n+r)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}var kM=Object.freeze({__proto__:null,ArcElement:fM,BarElement:E5,LineElement:Em,PointElement:k5});const Jy=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],R2=Jy.map(s=>s.replace("rgb(","rgba(").replace(")",", 0.5)"));function T5(s){return Jy[s%Jy.length]}function L5(s){return R2[s%R2.length]}function DM(s,t){return s.borderColor=T5(t),s.backgroundColor=L5(t),++t}function EM(s,t){return s.backgroundColor=s.data.map(()=>T5(t++)),t}function TM(s,t){return s.backgroundColor=s.data.map(()=>L5(t++)),t}function LM(s){let t=0;return(a,n)=>{const r=s.getDatasetMeta(n).controller;r instanceof o0?t=EM(a,t):r instanceof g5?t=TM(a,t):r&&(t=DM(a,t))}}function B2(s){let t;for(t in s)if(s[t].borderColor||s[t].backgroundColor)return!0;return!1}function PM(s){return s&&(s.borderColor||s.backgroundColor)}function FM(){return tn.borderColor!=="rgba(0,0,0,0.1)"||tn.backgroundColor!=="rgba(0,0,0,0.1)"}var IM={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(s,t,a){if(!a.enabled)return;const{data:{datasets:n},options:r}=s.config,{elements:i}=r,o=B2(n)||PM(r)||i&&B2(i)||FM();if(!a.forceOverride&&o)return;const c=LM(s);n.forEach(c)}};function OM(s,t,a,n,r){const i=r.samples||n;if(i>=a)return s.slice(t,t+a);const o=[],c=(a-2)/(i-2);let u=0;const h=t+a-1;let m=t,p,y,g,j,b;for(o[u++]=s[m],p=0;p<i-2;p++){let N=0,v=0,S;const E=Math.floor((p+1)*c)+1+t,L=Math.min(Math.floor((p+2)*c)+1,a)+t,z=L-E;for(S=E;S<L;S++)N+=s[S].x,v+=s[S].y;N/=z,v/=z;const V=Math.floor(p*c)+1+t,te=Math.min(Math.floor((p+1)*c)+1,a)+t,{x:q,y:B}=s[m];for(g=j=-1,S=V;S<te;S++)j=.5*Math.abs((q-N)*(s[S].y-B)-(q-s[S].x)*(v-B)),j>g&&(g=j,y=s[S],b=S);o[u++]=y,m=b}return o[u++]=s[h],o}function MM(s,t,a,n){let r=0,i=0,o,c,u,h,m,p,y,g,j,b;const N=[],v=t+a-1,S=s[t].x,L=s[v].x-S;for(o=t;o<t+a;++o){c=s[o],u=(c.x-S)/L*n,h=c.y;const z=u|0;if(z===m)h<j?(j=h,p=o):h>b&&(b=h,y=o),r=(i*r+c.x)/++i;else{const V=o-1;if(!Hs(p)&&!Hs(y)){const te=Math.min(p,y),q=Math.max(p,y);te!==g&&te!==V&&N.push({...s[te],x:r}),q!==g&&q!==V&&N.push({...s[q],x:r})}o>0&&V!==g&&N.push(s[V]),N.push(c),m=z,i=0,j=b=h,p=y=g=o}}return N}function P5(s){if(s._decimated){const t=s._data;delete s._decimated,delete s._data,Object.defineProperty(s,"data",{configurable:!0,enumerable:!0,writable:!0,value:t})}}function z2(s){s.data.datasets.forEach(t=>{P5(t)})}function RM(s,t){const a=t.length;let n=0,r;const{iScale:i}=s,{min:o,max:c,minDefined:u,maxDefined:h}=i.getUserBounds();return u&&(n=xr(Qc(t,i.axis,o).lo,0,a-1)),h?r=xr(Qc(t,i.axis,c).hi+1,n,a)-n:r=a-n,{start:n,count:r}}var BM={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(s,t,a)=>{if(!a.enabled){z2(s);return}const n=s.width;s.data.datasets.forEach((r,i)=>{const{_data:o,indexAxis:c}=r,u=s.getDatasetMeta(i),h=o||r.data;if(Yf([c,s.options.indexAxis])==="y"||!u.controller.supportsDecimation)return;const m=s.scales[u.xAxisID];if(m.type!=="linear"&&m.type!=="time"||s.options.parsing)return;let{start:p,count:y}=RM(u,h);const g=a.threshold||4*n;if(y<=g){P5(r);return}Hs(o)&&(r._data=h,delete r.data,Object.defineProperty(r,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(b){this._data=b}}));let j;switch(a.algorithm){case"lttb":j=OM(h,p,y,n,a);break;case"min-max":j=MM(h,p,y,n);break;default:throw new Error(`Unsupported decimation algorithm '${a.algorithm}'`)}r._decimated=j})},destroy(s){z2(s)}};function zM(s,t,a){const n=s.segments,r=s.points,i=t.points,o=[];for(const c of n){let{start:u,end:h}=c;h=ux(u,h,r);const m=Zy(a,r[u],r[h],c.loop);if(!t.segments){o.push({source:c,target:m,start:r[u],end:r[h]});continue}const p=c5(t,m);for(const y of p){const g=Zy(a,i[y.start],i[y.end],y.loop),j=o5(c,r,g);for(const b of j)o.push({source:b,target:y,start:{[a]:q2(m,g,"start",Math.max)},end:{[a]:q2(m,g,"end",Math.min)}})}}return o}function Zy(s,t,a,n){if(n)return;let r=t[s],i=a[s];return s==="angle"&&(r=Qr(r),i=Qr(i)),{property:s,start:r,end:i}}function qM(s,t){const{x:a=null,y:n=null}=s||{},r=t.points,i=[];return t.segments.forEach(({start:o,end:c})=>{c=ux(o,c,r);const u=r[o],h=r[c];n!==null?(i.push({x:u.x,y:n}),i.push({x:h.x,y:n})):a!==null&&(i.push({x:a,y:u.y}),i.push({x:a,y:h.y}))}),i}function ux(s,t,a){for(;t>s;t--){const n=a[t];if(!isNaN(n.x)&&!isNaN(n.y))break}return t}function q2(s,t,a,n){return s&&t?n(s[a],t[a]):s?s[a]:t?t[a]:0}function F5(s,t){let a=[],n=!1;return en(s)?(n=!0,a=s):a=qM(s,t),a.length?new Em({points:a,options:{tension:0},_loop:n,_fullLoop:n}):null}function U2(s){return s&&s.fill!==!1}function UM(s,t,a){let r=s[t].fill;const i=[t];let o;if(!a)return r;for(;r!==!1&&i.indexOf(r)===-1;){if(!gn(r))return r;if(o=s[r],!o)return!1;if(o.visible)return r;i.push(r),r=o.fill}return!1}function HM(s,t,a){const n=YM(s);if(Js(n))return isNaN(n.value)?!1:n;let r=parseFloat(n);return gn(r)&&Math.floor(r)===r?$M(n[0],t,r,a):["origin","start","end","stack","shape"].indexOf(n)>=0&&n}function $M(s,t,a,n){return(s==="-"||s==="+")&&(a=t+a),a===t||a<0||a>=n?!1:a}function VM(s,t){let a=null;return s==="start"?a=t.bottom:s==="end"?a=t.top:Js(s)?a=t.getPixelForValue(s.value):t.getBasePixel&&(a=t.getBasePixel()),a}function WM(s,t,a){let n;return s==="start"?n=a:s==="end"?n=t.options.reverse?t.min:t.max:Js(s)?n=s.value:n=t.getBaseValue(),n}function YM(s){const t=s.options,a=t.fill;let n=ks(a&&a.target,a);return n===void 0&&(n=!!t.backgroundColor),n===!1||n===null?!1:n===!0?"origin":n}function KM(s){const{scale:t,index:a,line:n}=s,r=[],i=n.segments,o=n.points,c=XM(t,a);c.push(F5({x:null,y:t.bottom},n));for(let u=0;u<i.length;u++){const h=i[u];for(let m=h.start;m<=h.end;m++)GM(r,o[m],c)}return new Em({points:r,options:{}})}function XM(s,t){const a=[],n=s.getMatchingVisibleMetas("line");for(let r=0;r<n.length;r++){const i=n[r];if(i.index===t)break;i.hidden||a.unshift(i.dataset)}return a}function GM(s,t,a){const n=[];for(let r=0;r<a.length;r++){const i=a[r],{first:o,last:c,point:u}=QM(i,t,"x");if(!(!u||o&&c)){if(o)n.unshift(u);else if(s.push(u),!c)break}}s.push(...n)}function QM(s,t,a){const n=s.interpolate(t,a);if(!n)return{};const r=n[a],i=s.segments,o=s.points;let c=!1,u=!1;for(let h=0;h<i.length;h++){const m=i[h],p=o[m.start][a],y=o[m.end][a];if(Gc(r,p,y)){c=r===p,u=r===y;break}}return{first:c,last:u,point:n}}class I5{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,a,n){const{x:r,y:i,radius:o}=this;return a=a||{start:0,end:Va},t.arc(r,i,o,a.end,a.start,!0),!n.bounds}interpolate(t){const{x:a,y:n,radius:r}=this,i=t.angle;return{x:a+Math.cos(i)*r,y:n+Math.sin(i)*r,angle:i}}}function JM(s){const{chart:t,fill:a,line:n}=s;if(gn(a))return ZM(t,a);if(a==="stack")return KM(s);if(a==="shape")return!0;const r=e8(s);return r instanceof I5?r:F5(r,n)}function ZM(s,t){const a=s.getDatasetMeta(t);return a&&s.isDatasetVisible(t)?a.dataset:null}function e8(s){return(s.scale||{}).getPointPositionForValue?s8(s):t8(s)}function t8(s){const{scale:t={},fill:a}=s,n=VM(a,t);if(gn(n)){const r=t.isHorizontal();return{x:r?n:null,y:r?null:n}}return null}function s8(s){const{scale:t,fill:a}=s,n=t.options,r=t.getLabels().length,i=n.reverse?t.max:t.min,o=WM(a,t,i),c=[];if(n.grid.circular){const u=t.getPointPositionForValue(0,i);return new I5({x:u.x,y:u.y,radius:t.getDistanceFromCenterForValue(o)})}for(let u=0;u<r;++u)c.push(t.getPointPositionForValue(u,o));return c}function Zb(s,t,a){const n=JM(t),{chart:r,index:i,line:o,scale:c,axis:u}=t,h=o.options,m=h.fill,p=h.backgroundColor,{above:y=p,below:g=p}=m||{},j=r.getDatasetMeta(i),b=d5(r,j);n&&o.points.length&&(ix(s,a),a8(s,{line:o,target:n,above:y,below:g,area:a,scale:c,axis:u,clip:b}),lx(s))}function a8(s,t){const{line:a,target:n,above:r,below:i,area:o,scale:c,clip:u}=t,h=a._loop?"angle":t.axis;s.save();let m=i;i!==r&&(h==="x"?(H2(s,n,o.top),ey(s,{line:a,target:n,color:r,scale:c,property:h,clip:u}),s.restore(),s.save(),H2(s,n,o.bottom)):h==="y"&&($2(s,n,o.left),ey(s,{line:a,target:n,color:i,scale:c,property:h,clip:u}),s.restore(),s.save(),$2(s,n,o.right),m=r)),ey(s,{line:a,target:n,color:m,scale:c,property:h,clip:u}),s.restore()}function H2(s,t,a){const{segments:n,points:r}=t;let i=!0,o=!1;s.beginPath();for(const c of n){const{start:u,end:h}=c,m=r[u],p=r[ux(u,h,r)];i?(s.moveTo(m.x,m.y),i=!1):(s.lineTo(m.x,a),s.lineTo(m.x,m.y)),o=!!t.pathSegment(s,c,{move:o}),o?s.closePath():s.lineTo(p.x,a)}s.lineTo(t.first().x,a),s.closePath(),s.clip()}function $2(s,t,a){const{segments:n,points:r}=t;let i=!0,o=!1;s.beginPath();for(const c of n){const{start:u,end:h}=c,m=r[u],p=r[ux(u,h,r)];i?(s.moveTo(m.x,m.y),i=!1):(s.lineTo(a,m.y),s.lineTo(m.x,m.y)),o=!!t.pathSegment(s,c,{move:o}),o?s.closePath():s.lineTo(a,p.y)}s.lineTo(a,t.first().y),s.closePath(),s.clip()}function ey(s,t){const{line:a,target:n,property:r,color:i,scale:o,clip:c}=t,u=zM(a,n,r);for(const{source:h,target:m,start:p,end:y}of u){const{style:{backgroundColor:g=i}={}}=h,j=n!==!0;s.save(),s.fillStyle=g,n8(s,o,c,j&&Zy(r,p,y)),s.beginPath();const b=!!a.pathSegment(s,h);let N;if(j){b?s.closePath():V2(s,n,y,r);const v=!!n.pathSegment(s,m,{move:b,reverse:!0});N=b&&v,N||V2(s,n,p,r)}s.closePath(),s.fill(N?"evenodd":"nonzero"),s.restore()}}function n8(s,t,a,n){const r=t.chart.chartArea,{property:i,start:o,end:c}=n||{};if(i==="x"||i==="y"){let u,h,m,p;i==="x"?(u=o,h=r.top,m=c,p=r.bottom):(u=r.left,h=o,m=r.right,p=c),s.beginPath(),a&&(u=Math.max(u,a.left),m=Math.min(m,a.right),h=Math.max(h,a.top),p=Math.min(p,a.bottom)),s.rect(u,h,m-u,p-h),s.clip()}}function V2(s,t,a,n){const r=t.interpolate(a,n);r&&s.lineTo(r.x,r.y)}var r8={id:"filler",afterDatasetsUpdate(s,t,a){const n=(s.data.datasets||[]).length,r=[];let i,o,c,u;for(o=0;o<n;++o)i=s.getDatasetMeta(o),c=i.dataset,u=null,c&&c.options&&c instanceof Em&&(u={visible:s.isDatasetVisible(o),index:o,fill:HM(c,o,n),chart:s,axis:i.controller.options.indexAxis,scale:i.vScale,line:c}),i.$filler=u,r.push(u);for(o=0;o<n;++o)u=r[o],!(!u||u.fill===!1)&&(u.fill=UM(r,o,a.propagate))},beforeDraw(s,t,a){const n=a.drawTime==="beforeDraw",r=s.getSortedVisibleDatasetMetas(),i=s.chartArea;for(let o=r.length-1;o>=0;--o){const c=r[o].$filler;c&&(c.line.updateControlPoints(i,c.axis),n&&c.fill&&Zb(s.ctx,c,i))}},beforeDatasetsDraw(s,t,a){if(a.drawTime!=="beforeDatasetsDraw")return;const n=s.getSortedVisibleDatasetMetas();for(let r=n.length-1;r>=0;--r){const i=n[r].$filler;U2(i)&&Zb(s.ctx,i,s.chartArea)}},beforeDatasetDraw(s,t,a){const n=t.meta.$filler;!U2(n)||a.drawTime!=="beforeDatasetDraw"||Zb(s.ctx,n,s.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const W2=(s,t)=>{let{boxHeight:a=t,boxWidth:n=t}=s;return s.usePointStyle&&(a=Math.min(a,t),n=s.pointStyleWidth||Math.min(n,t)),{boxWidth:n,boxHeight:a,itemHeight:Math.max(t,a)}},i8=(s,t)=>s!==null&&t!==null&&s.datasetIndex===t.datasetIndex&&s.index===t.index;class Y2 extends rd{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,a,n){this.maxWidth=t,this.maxHeight=a,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let a=Ra(t.generateLabels,[this.chart],this)||[];t.filter&&(a=a.filter(n=>t.filter(n,this.chart.data))),t.sort&&(a=a.sort((n,r)=>t.sort(n,r,this.chart.data))),this.options.reverse&&a.reverse(),this.legendItems=a}fit(){const{options:t,ctx:a}=this;if(!t.display){this.width=this.height=0;return}const n=t.labels,r=rr(n.font),i=r.size,o=this._computeTitleHeight(),{boxWidth:c,itemHeight:u}=W2(n,i);let h,m;a.font=r.string,this.isHorizontal()?(h=this.maxWidth,m=this._fitRows(o,i,c,u)+10):(m=this.maxHeight,h=this._fitCols(o,r,c,u)+10),this.width=Math.min(h,t.maxWidth||this.maxWidth),this.height=Math.min(m,t.maxHeight||this.maxHeight)}_fitRows(t,a,n,r){const{ctx:i,maxWidth:o,options:{labels:{padding:c}}}=this,u=this.legendHitBoxes=[],h=this.lineWidths=[0],m=r+c;let p=t;i.textAlign="left",i.textBaseline="middle";let y=-1,g=-m;return this.legendItems.forEach((j,b)=>{const N=n+a/2+i.measureText(j.text).width;(b===0||h[h.length-1]+N+2*c>o)&&(p+=m,h[h.length-(b>0?0:1)]=0,g+=m,y++),u[b]={left:0,top:g,row:y,width:N,height:r},h[h.length-1]+=N+c}),p}_fitCols(t,a,n,r){const{ctx:i,maxHeight:o,options:{labels:{padding:c}}}=this,u=this.legendHitBoxes=[],h=this.columnSizes=[],m=o-t;let p=c,y=0,g=0,j=0,b=0;return this.legendItems.forEach((N,v)=>{const{itemWidth:S,itemHeight:E}=l8(n,a,i,N,r);v>0&&g+E+2*c>m&&(p+=y+c,h.push({width:y,height:g}),j+=y+c,b++,y=g=0),u[v]={left:j,top:g,col:b,width:S,height:E},y=Math.max(y,S),g+=E+c}),p+=y,h.push({width:y,height:g}),p}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:a,options:{align:n,labels:{padding:r},rtl:i}}=this,o=Lh(i,this.left,this.width);if(this.isHorizontal()){let c=0,u=Gr(n,this.left+r,this.right-this.lineWidths[c]);for(const h of a)c!==h.row&&(c=h.row,u=Gr(n,this.left+r,this.right-this.lineWidths[c])),h.top+=this.top+t+r,h.left=o.leftForLtr(o.x(u),h.width),u+=h.width+r}else{let c=0,u=Gr(n,this.top+t+r,this.bottom-this.columnSizes[c].height);for(const h of a)h.col!==c&&(c=h.col,u=Gr(n,this.top+t+r,this.bottom-this.columnSizes[c].height)),h.top=u,h.left+=this.left+r,h.left=o.leftForLtr(o.x(h.left),h.width),u+=h.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;ix(t,this),this._draw(),lx(t)}}_draw(){const{options:t,columnSizes:a,lineWidths:n,ctx:r}=this,{align:i,labels:o}=t,c=tn.color,u=Lh(t.rtl,this.left,this.width),h=rr(o.font),{padding:m}=o,p=h.size,y=p/2;let g;this.drawTitle(),r.textAlign=u.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=h.string;const{boxWidth:j,boxHeight:b,itemHeight:N}=W2(o,p),v=function(V,te,q){if(isNaN(j)||j<=0||isNaN(b)||b<0)return;r.save();const B=ks(q.lineWidth,1);if(r.fillStyle=ks(q.fillStyle,c),r.lineCap=ks(q.lineCap,"butt"),r.lineDashOffset=ks(q.lineDashOffset,0),r.lineJoin=ks(q.lineJoin,"miter"),r.lineWidth=B,r.strokeStyle=ks(q.strokeStyle,c),r.setLineDash(ks(q.lineDash,[])),o.usePointStyle){const J={radius:b*Math.SQRT2/2,pointStyle:q.pointStyle,rotation:q.rotation,borderWidth:B},P=u.xPlus(V,j/2),K=te+y;QC(r,J,P,K,o.pointStyleWidth&&j)}else{const J=te+Math.max((p-b)/2,0),P=u.leftForLtr(V,j),K=Lu(q.borderRadius);r.beginPath(),Object.values(K).some(H=>H!==0)?cm(r,{x:P,y:J,w:j,h:b,radius:K}):r.rect(P,J,j,b),r.fill(),B!==0&&r.stroke()}r.restore()},S=function(V,te,q){zu(r,q.text,V,te+N/2,h,{strikethrough:q.hidden,textAlign:u.textAlign(q.textAlign)})},E=this.isHorizontal(),L=this._computeTitleHeight();E?g={x:Gr(i,this.left+m,this.right-n[0]),y:this.top+m+L,line:0}:g={x:this.left+m,y:Gr(i,this.top+L+m,this.bottom-a[0].height),line:0},r5(this.ctx,t.textDirection);const z=N+m;this.legendItems.forEach((V,te)=>{r.strokeStyle=V.fontColor,r.fillStyle=V.fontColor;const q=r.measureText(V.text).width,B=u.textAlign(V.textAlign||(V.textAlign=o.textAlign)),J=j+y+q;let P=g.x,K=g.y;u.setWidth(this.width),E?te>0&&P+J+m>this.right&&(K=g.y+=z,g.line++,P=g.x=Gr(i,this.left+m,this.right-n[g.line])):te>0&&K+z>this.bottom&&(P=g.x=P+a[g.line].width+m,g.line++,K=g.y=Gr(i,this.top+L+m,this.bottom-a[g.line].height));const H=u.x(P);if(v(H,K,V),P=jF(B,P+j+y,E?P+J:this.right,t.rtl),S(u.x(P),K,V),E)g.x+=J+m;else if(typeof V.text!="string"){const se=h.lineHeight;g.y+=O5(V,se)+m}else g.y+=z}),i5(this.ctx,t.textDirection)}drawTitle(){const t=this.options,a=t.title,n=rr(a.font),r=ti(a.padding);if(!a.display)return;const i=Lh(t.rtl,this.left,this.width),o=this.ctx,c=a.position,u=n.size/2,h=r.top+u;let m,p=this.left,y=this.width;if(this.isHorizontal())y=Math.max(...this.lineWidths),m=this.top+h,p=Gr(t.align,p,this.right-y);else{const j=this.columnSizes.reduce((b,N)=>Math.max(b,N.height),0);m=h+Gr(t.align,this.top,this.bottom-j-t.labels.padding-this._computeTitleHeight())}const g=Gr(c,p,p+y);o.textAlign=i.textAlign(e0(c)),o.textBaseline="middle",o.strokeStyle=a.color,o.fillStyle=a.color,o.font=n.string,zu(o,a.text,g,m,n)}_computeTitleHeight(){const t=this.options.title,a=rr(t.font),n=ti(t.padding);return t.display?a.lineHeight+n.height:0}_getLegendItemAt(t,a){let n,r,i;if(Gc(t,this.left,this.right)&&Gc(a,this.top,this.bottom)){for(i=this.legendHitBoxes,n=0;n<i.length;++n)if(r=i[n],Gc(t,r.left,r.left+r.width)&&Gc(a,r.top,r.top+r.height))return this.legendItems[n]}return null}handleEvent(t){const a=this.options;if(!d8(t.type,a))return;const n=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const r=this._hoveredItem,i=i8(r,n);r&&!i&&Ra(a.onLeave,[t,r,this],this),this._hoveredItem=n,n&&!i&&Ra(a.onHover,[t,n,this],this)}else n&&Ra(a.onClick,[t,n,this],this)}}function l8(s,t,a,n,r){const i=o8(n,s,t,a),o=c8(r,n,t.lineHeight);return{itemWidth:i,itemHeight:o}}function o8(s,t,a,n){let r=s.text;return r&&typeof r!="string"&&(r=r.reduce((i,o)=>i.length>o.length?i:o)),t+a.size/2+n.measureText(r).width}function c8(s,t,a){let n=s;return typeof t.text!="string"&&(n=O5(t,a)),n}function O5(s,t){const a=s.text?s.text.length:0;return t*a}function d8(s,t){return!!((s==="mousemove"||s==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(s==="click"||s==="mouseup"))}var M5={id:"legend",_element:Y2,start(s,t,a){const n=s.legend=new Y2({ctx:s.ctx,options:a,chart:s});Zr.configure(s,n,a),Zr.addBox(s,n)},stop(s){Zr.removeBox(s,s.legend),delete s.legend},beforeUpdate(s,t,a){const n=s.legend;Zr.configure(s,n,a),n.options=a},afterUpdate(s){const t=s.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(s,t){t.replay||s.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(s,t,a){const n=t.datasetIndex,r=a.chart;r.isDatasetVisible(n)?(r.hide(n),t.hidden=!0):(r.show(n),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:s=>s.chart.options.color,boxWidth:40,padding:10,generateLabels(s){const t=s.data.datasets,{labels:{usePointStyle:a,pointStyle:n,textAlign:r,color:i,useBorderRadius:o,borderRadius:c}}=s.legend.options;return s._getSortedDatasetMetas().map(u=>{const h=u.controller.getStyle(a?0:void 0),m=ti(h.borderWidth);return{text:t[u.index].label,fillStyle:h.backgroundColor,fontColor:i,hidden:!u.visible,lineCap:h.borderCapStyle,lineDash:h.borderDash,lineDashOffset:h.borderDashOffset,lineJoin:h.borderJoinStyle,lineWidth:(m.width+m.height)/4,strokeStyle:h.borderColor,pointStyle:n||h.pointStyle,rotation:h.rotation,textAlign:r||h.textAlign,borderRadius:o&&(c||h.borderRadius),datasetIndex:u.index}},this)}},title:{color:s=>s.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:s=>!s.startsWith("on"),labels:{_scriptable:s=>!["generateLabels","filter","sort"].includes(s)}}};class d0 extends rd{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,a){const n=this.options;if(this.left=0,this.top=0,!n.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=a;const r=en(n.text)?n.text.length:1;this._padding=ti(n.padding);const i=r*rr(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:a,left:n,bottom:r,right:i,options:o}=this,c=o.align;let u=0,h,m,p;return this.isHorizontal()?(m=Gr(c,n,i),p=a+t,h=i-n):(o.position==="left"?(m=n+t,p=Gr(c,r,a),u=la*-.5):(m=i-t,p=Gr(c,a,r),u=la*.5),h=r-a),{titleX:m,titleY:p,maxWidth:h,rotation:u}}draw(){const t=this.ctx,a=this.options;if(!a.display)return;const n=rr(a.font),i=n.lineHeight/2+this._padding.top,{titleX:o,titleY:c,maxWidth:u,rotation:h}=this._drawArgs(i);zu(t,a.text,0,0,n,{color:a.color,maxWidth:u,rotation:h,textAlign:e0(a.align),textBaseline:"middle",translation:[o,c]})}}function u8(s,t){const a=new d0({ctx:s.ctx,options:t,chart:s});Zr.configure(s,a,t),Zr.addBox(s,a),s.titleBlock=a}var R5={id:"title",_element:d0,start(s,t,a){u8(s,a)},stop(s){const t=s.titleBlock;Zr.removeBox(s,t),delete s.titleBlock},beforeUpdate(s,t,a){const n=s.titleBlock;Zr.configure(s,n,a),n.options=a},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Mp=new WeakMap;var h8={id:"subtitle",start(s,t,a){const n=new d0({ctx:s.ctx,options:a,chart:s});Zr.configure(s,n,a),Zr.addBox(s,n),Mp.set(s,n)},stop(s){Zr.removeBox(s,Mp.get(s)),Mp.delete(s)},beforeUpdate(s,t,a){const n=Mp.get(s);Zr.configure(s,n,a),n.options=a},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Xf={average(s){if(!s.length)return!1;let t,a,n=new Set,r=0,i=0;for(t=0,a=s.length;t<a;++t){const c=s[t].element;if(c&&c.hasValue()){const u=c.tooltipPosition();n.add(u.x),r+=u.y,++i}}return i===0||n.size===0?!1:{x:[...n].reduce((c,u)=>c+u)/n.size,y:r/i}},nearest(s,t){if(!s.length)return!1;let a=t.x,n=t.y,r=Number.POSITIVE_INFINITY,i,o,c;for(i=0,o=s.length;i<o;++i){const u=s[i].element;if(u&&u.hasValue()){const h=u.getCenterPoint(),m=Wy(t,h);m<r&&(r=m,c=u)}}if(c){const u=c.tooltipPosition();a=u.x,n=u.y}return{x:a,y:n}}};function Qo(s,t){return t&&(en(t)?Array.prototype.push.apply(s,t):s.push(t)),s}function Wc(s){return(typeof s=="string"||s instanceof String)&&s.indexOf(`
`)>-1?s.split(`
`):s}function f8(s,t){const{element:a,datasetIndex:n,index:r}=t,i=s.getDatasetMeta(n).controller,{label:o,value:c}=i.getLabelAndValue(r);return{chart:s,label:o,parsed:i.getParsed(r),raw:s.data.datasets[n].data[r],formattedValue:c,dataset:i.getDataset(),dataIndex:r,datasetIndex:n,element:a}}function K2(s,t){const a=s.chart.ctx,{body:n,footer:r,title:i}=s,{boxWidth:o,boxHeight:c}=t,u=rr(t.bodyFont),h=rr(t.titleFont),m=rr(t.footerFont),p=i.length,y=r.length,g=n.length,j=ti(t.padding);let b=j.height,N=0,v=n.reduce((L,z)=>L+z.before.length+z.lines.length+z.after.length,0);if(v+=s.beforeBody.length+s.afterBody.length,p&&(b+=p*h.lineHeight+(p-1)*t.titleSpacing+t.titleMarginBottom),v){const L=t.displayColors?Math.max(c,u.lineHeight):u.lineHeight;b+=g*L+(v-g)*u.lineHeight+(v-1)*t.bodySpacing}y&&(b+=t.footerMarginTop+y*m.lineHeight+(y-1)*t.footerSpacing);let S=0;const E=function(L){N=Math.max(N,a.measureText(L).width+S)};return a.save(),a.font=h.string,ya(s.title,E),a.font=u.string,ya(s.beforeBody.concat(s.afterBody),E),S=t.displayColors?o+2+t.boxPadding:0,ya(n,L=>{ya(L.before,E),ya(L.lines,E),ya(L.after,E)}),S=0,a.font=m.string,ya(s.footer,E),a.restore(),N+=j.width,{width:N,height:b}}function m8(s,t){const{y:a,height:n}=t;return a<n/2?"top":a>s.height-n/2?"bottom":"center"}function p8(s,t,a,n){const{x:r,width:i}=n,o=a.caretSize+a.caretPadding;if(s==="left"&&r+i+o>t.width||s==="right"&&r-i-o<0)return!0}function g8(s,t,a,n){const{x:r,width:i}=a,{width:o,chartArea:{left:c,right:u}}=s;let h="center";return n==="center"?h=r<=(c+u)/2?"left":"right":r<=i/2?h="left":r>=o-i/2&&(h="right"),p8(h,s,t,a)&&(h="center"),h}function X2(s,t,a){const n=a.yAlign||t.yAlign||m8(s,a);return{xAlign:a.xAlign||t.xAlign||g8(s,t,a,n),yAlign:n}}function x8(s,t){let{x:a,width:n}=s;return t==="right"?a-=n:t==="center"&&(a-=n/2),a}function b8(s,t,a){let{y:n,height:r}=s;return t==="top"?n+=a:t==="bottom"?n-=r+a:n-=r/2,n}function G2(s,t,a,n){const{caretSize:r,caretPadding:i,cornerRadius:o}=s,{xAlign:c,yAlign:u}=a,h=r+i,{topLeft:m,topRight:p,bottomLeft:y,bottomRight:g}=Lu(o);let j=x8(t,c);const b=b8(t,u,h);return u==="center"?c==="left"?j+=h:c==="right"&&(j-=h):c==="left"?j-=Math.max(m,y)+r:c==="right"&&(j+=Math.max(p,g)+r),{x:xr(j,0,n.width-t.width),y:xr(b,0,n.height-t.height)}}function Rp(s,t,a){const n=ti(a.padding);return t==="center"?s.x+s.width/2:t==="right"?s.x+s.width-n.right:s.x+n.left}function Q2(s){return Qo([],Wc(s))}function y8(s,t,a){return Jd(s,{tooltip:t,tooltipItems:a,type:"tooltip"})}function J2(s,t){const a=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return a?s.override(a):s}const B5={beforeTitle:qc,title(s){if(s.length>0){const t=s[0],a=t.chart.data.labels,n=a?a.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(n>0&&t.dataIndex<n)return a[t.dataIndex]}return""},afterTitle:qc,beforeBody:qc,beforeLabel:qc,label(s){if(this&&this.options&&this.options.mode==="dataset")return s.label+": "+s.formattedValue||s.formattedValue;let t=s.dataset.label||"";t&&(t+=": ");const a=s.formattedValue;return Hs(a)||(t+=a),t},labelColor(s){const a=s.chart.getDatasetMeta(s.datasetIndex).controller.getStyle(s.dataIndex);return{borderColor:a.borderColor,backgroundColor:a.backgroundColor,borderWidth:a.borderWidth,borderDash:a.borderDash,borderDashOffset:a.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(s){const a=s.chart.getDatasetMeta(s.datasetIndex).controller.getStyle(s.dataIndex);return{pointStyle:a.pointStyle,rotation:a.rotation}},afterLabel:qc,afterBody:qc,beforeFooter:qc,footer:qc,afterFooter:qc};function zi(s,t,a,n){const r=s[t].call(a,n);return typeof r>"u"?B5[t].call(a,n):r}class Z2 extends rd{static positioners=Xf;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const a=this.chart,n=this.options.setContext(this.getContext()),r=n.enabled&&a.options.animation&&n.animations,i=new u5(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=y8(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,a){const{callbacks:n}=a,r=zi(n,"beforeTitle",this,t),i=zi(n,"title",this,t),o=zi(n,"afterTitle",this,t);let c=[];return c=Qo(c,Wc(r)),c=Qo(c,Wc(i)),c=Qo(c,Wc(o)),c}getBeforeBody(t,a){return Q2(zi(a.callbacks,"beforeBody",this,t))}getBody(t,a){const{callbacks:n}=a,r=[];return ya(t,i=>{const o={before:[],lines:[],after:[]},c=J2(n,i);Qo(o.before,Wc(zi(c,"beforeLabel",this,i))),Qo(o.lines,zi(c,"label",this,i)),Qo(o.after,Wc(zi(c,"afterLabel",this,i))),r.push(o)}),r}getAfterBody(t,a){return Q2(zi(a.callbacks,"afterBody",this,t))}getFooter(t,a){const{callbacks:n}=a,r=zi(n,"beforeFooter",this,t),i=zi(n,"footer",this,t),o=zi(n,"afterFooter",this,t);let c=[];return c=Qo(c,Wc(r)),c=Qo(c,Wc(i)),c=Qo(c,Wc(o)),c}_createItems(t){const a=this._active,n=this.chart.data,r=[],i=[],o=[];let c=[],u,h;for(u=0,h=a.length;u<h;++u)c.push(f8(this.chart,a[u]));return t.filter&&(c=c.filter((m,p,y)=>t.filter(m,p,y,n))),t.itemSort&&(c=c.sort((m,p)=>t.itemSort(m,p,n))),ya(c,m=>{const p=J2(t.callbacks,m);r.push(zi(p,"labelColor",this,m)),i.push(zi(p,"labelPointStyle",this,m)),o.push(zi(p,"labelTextColor",this,m))}),this.labelColors=r,this.labelPointStyles=i,this.labelTextColors=o,this.dataPoints=c,c}update(t,a){const n=this.options.setContext(this.getContext()),r=this._active;let i,o=[];if(!r.length)this.opacity!==0&&(i={opacity:0});else{const c=Xf[n.position].call(this,r,this._eventPosition);o=this._createItems(n),this.title=this.getTitle(o,n),this.beforeBody=this.getBeforeBody(o,n),this.body=this.getBody(o,n),this.afterBody=this.getAfterBody(o,n),this.footer=this.getFooter(o,n);const u=this._size=K2(this,n),h=Object.assign({},c,u),m=X2(this.chart,n,h),p=G2(n,h,m,this.chart);this.xAlign=m.xAlign,this.yAlign=m.yAlign,i={opacity:1,x:p.x,y:p.y,width:u.width,height:u.height,caretX:c.x,caretY:c.y}}this._tooltipItems=o,this.$context=void 0,i&&this._resolveAnimations().update(this,i),t&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:a})}drawCaret(t,a,n,r){const i=this.getCaretPosition(t,n,r);a.lineTo(i.x1,i.y1),a.lineTo(i.x2,i.y2),a.lineTo(i.x3,i.y3)}getCaretPosition(t,a,n){const{xAlign:r,yAlign:i}=this,{caretSize:o,cornerRadius:c}=n,{topLeft:u,topRight:h,bottomLeft:m,bottomRight:p}=Lu(c),{x:y,y:g}=t,{width:j,height:b}=a;let N,v,S,E,L,z;return i==="center"?(L=g+b/2,r==="left"?(N=y,v=N-o,E=L+o,z=L-o):(N=y+j,v=N+o,E=L-o,z=L+o),S=N):(r==="left"?v=y+Math.max(u,m)+o:r==="right"?v=y+j-Math.max(h,p)-o:v=this.caretX,i==="top"?(E=g,L=E-o,N=v-o,S=v+o):(E=g+b,L=E+o,N=v+o,S=v-o),z=E),{x1:N,x2:v,x3:S,y1:E,y2:L,y3:z}}drawTitle(t,a,n){const r=this.title,i=r.length;let o,c,u;if(i){const h=Lh(n.rtl,this.x,this.width);for(t.x=Rp(this,n.titleAlign,n),a.textAlign=h.textAlign(n.titleAlign),a.textBaseline="middle",o=rr(n.titleFont),c=n.titleSpacing,a.fillStyle=n.titleColor,a.font=o.string,u=0;u<i;++u)a.fillText(r[u],h.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+c,u+1===i&&(t.y+=n.titleMarginBottom-c)}}_drawColorBox(t,a,n,r,i){const o=this.labelColors[n],c=this.labelPointStyles[n],{boxHeight:u,boxWidth:h}=i,m=rr(i.bodyFont),p=Rp(this,"left",i),y=r.x(p),g=u<m.lineHeight?(m.lineHeight-u)/2:0,j=a.y+g;if(i.usePointStyle){const b={radius:Math.min(h,u)/2,pointStyle:c.pointStyle,rotation:c.rotation,borderWidth:1},N=r.leftForLtr(y,h)+h/2,v=j+u/2;t.strokeStyle=i.multiKeyBackground,t.fillStyle=i.multiKeyBackground,Ky(t,b,N,v),t.strokeStyle=o.borderColor,t.fillStyle=o.backgroundColor,Ky(t,b,N,v)}else{t.lineWidth=Js(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,t.strokeStyle=o.borderColor,t.setLineDash(o.borderDash||[]),t.lineDashOffset=o.borderDashOffset||0;const b=r.leftForLtr(y,h),N=r.leftForLtr(r.xPlus(y,1),h-2),v=Lu(o.borderRadius);Object.values(v).some(S=>S!==0)?(t.beginPath(),t.fillStyle=i.multiKeyBackground,cm(t,{x:b,y:j,w:h,h:u,radius:v}),t.fill(),t.stroke(),t.fillStyle=o.backgroundColor,t.beginPath(),cm(t,{x:N,y:j+1,w:h-2,h:u-2,radius:v}),t.fill()):(t.fillStyle=i.multiKeyBackground,t.fillRect(b,j,h,u),t.strokeRect(b,j,h,u),t.fillStyle=o.backgroundColor,t.fillRect(N,j+1,h-2,u-2))}t.fillStyle=this.labelTextColors[n]}drawBody(t,a,n){const{body:r}=this,{bodySpacing:i,bodyAlign:o,displayColors:c,boxHeight:u,boxWidth:h,boxPadding:m}=n,p=rr(n.bodyFont);let y=p.lineHeight,g=0;const j=Lh(n.rtl,this.x,this.width),b=function(q){a.fillText(q,j.x(t.x+g),t.y+y/2),t.y+=y+i},N=j.textAlign(o);let v,S,E,L,z,V,te;for(a.textAlign=o,a.textBaseline="middle",a.font=p.string,t.x=Rp(this,N,n),a.fillStyle=n.bodyColor,ya(this.beforeBody,b),g=c&&N!=="right"?o==="center"?h/2+m:h+2+m:0,L=0,V=r.length;L<V;++L){for(v=r[L],S=this.labelTextColors[L],a.fillStyle=S,ya(v.before,b),E=v.lines,c&&E.length&&(this._drawColorBox(a,t,L,j,n),y=Math.max(p.lineHeight,u)),z=0,te=E.length;z<te;++z)b(E[z]),y=p.lineHeight;ya(v.after,b)}g=0,y=p.lineHeight,ya(this.afterBody,b),t.y-=i}drawFooter(t,a,n){const r=this.footer,i=r.length;let o,c;if(i){const u=Lh(n.rtl,this.x,this.width);for(t.x=Rp(this,n.footerAlign,n),t.y+=n.footerMarginTop,a.textAlign=u.textAlign(n.footerAlign),a.textBaseline="middle",o=rr(n.footerFont),a.fillStyle=n.footerColor,a.font=o.string,c=0;c<i;++c)a.fillText(r[c],u.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+n.footerSpacing}}drawBackground(t,a,n,r){const{xAlign:i,yAlign:o}=this,{x:c,y:u}=t,{width:h,height:m}=n,{topLeft:p,topRight:y,bottomLeft:g,bottomRight:j}=Lu(r.cornerRadius);a.fillStyle=r.backgroundColor,a.strokeStyle=r.borderColor,a.lineWidth=r.borderWidth,a.beginPath(),a.moveTo(c+p,u),o==="top"&&this.drawCaret(t,a,n,r),a.lineTo(c+h-y,u),a.quadraticCurveTo(c+h,u,c+h,u+y),o==="center"&&i==="right"&&this.drawCaret(t,a,n,r),a.lineTo(c+h,u+m-j),a.quadraticCurveTo(c+h,u+m,c+h-j,u+m),o==="bottom"&&this.drawCaret(t,a,n,r),a.lineTo(c+g,u+m),a.quadraticCurveTo(c,u+m,c,u+m-g),o==="center"&&i==="left"&&this.drawCaret(t,a,n,r),a.lineTo(c,u+p),a.quadraticCurveTo(c,u,c+p,u),a.closePath(),a.fill(),r.borderWidth>0&&a.stroke()}_updateAnimationTarget(t){const a=this.chart,n=this.$animations,r=n&&n.x,i=n&&n.y;if(r||i){const o=Xf[t.position].call(this,this._active,this._eventPosition);if(!o)return;const c=this._size=K2(this,t),u=Object.assign({},o,this._size),h=X2(a,t,u),m=G2(t,u,h,a);(r._to!==m.x||i._to!==m.y)&&(this.xAlign=h.xAlign,this.yAlign=h.yAlign,this.width=c.width,this.height=c.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,m))}}_willRender(){return!!this.opacity}draw(t){const a=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(a);const r={width:this.width,height:this.height},i={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const o=ti(a.padding),c=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;a.enabled&&c&&(t.save(),t.globalAlpha=n,this.drawBackground(i,t,r,a),r5(t,a.textDirection),i.y+=o.top,this.drawTitle(i,t,a),this.drawBody(i,t,a),this.drawFooter(i,t,a),i5(t,a.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,a){const n=this._active,r=t.map(({datasetIndex:c,index:u})=>{const h=this.chart.getDatasetMeta(c);if(!h)throw new Error("Cannot find a dataset at index "+c);return{datasetIndex:c,element:h.data[u],index:u}}),i=!Eg(n,r),o=this._positionChanged(r,a);(i||o)&&(this._active=r,this._eventPosition=a,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,a,n=!0){if(a&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,i=this._active||[],o=this._getActiveElements(t,i,a,n),c=this._positionChanged(o,t),u=a||!Eg(o,i)||c;return u&&(this._active=o,(r.enabled||r.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,a))),u}_getActiveElements(t,a,n,r){const i=this.options;if(t.type==="mouseout")return[];if(!r)return a.filter(c=>this.chart.data.datasets[c.datasetIndex]&&this.chart.getDatasetMeta(c.datasetIndex).controller.getParsed(c.index)!==void 0);const o=this.chart.getElementsAtEventForMode(t,i.mode,i,n);return i.reverse&&o.reverse(),o}_positionChanged(t,a){const{caretX:n,caretY:r,options:i}=this,o=Xf[i.position].call(this,t,a);return o!==!1&&(n!==o.x||r!==o.y)}}var z5={id:"tooltip",_element:Z2,positioners:Xf,afterInit(s,t,a){a&&(s.tooltip=new Z2({chart:s,options:a}))},beforeUpdate(s,t,a){s.tooltip&&s.tooltip.initialize(a)},reset(s,t,a){s.tooltip&&s.tooltip.initialize(a)},afterDraw(s){const t=s.tooltip;if(t&&t._willRender()){const a={tooltip:t};if(s.notifyPlugins("beforeTooltipDraw",{...a,cancelable:!0})===!1)return;t.draw(s.ctx),s.notifyPlugins("afterTooltipDraw",a)}},afterEvent(s,t){if(s.tooltip){const a=t.replay;s.tooltip.handleEvent(t.event,a,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(s,t)=>t.bodyFont.size,boxWidth:(s,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:B5},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:s=>s!=="filter"&&s!=="itemSort"&&s!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},v8=Object.freeze({__proto__:null,Colors:IM,Decimation:BM,Filler:r8,Legend:M5,SubTitle:h8,Title:R5,Tooltip:z5});const j8=(s,t,a,n)=>(typeof t=="string"?(a=s.push(t)-1,n.unshift({index:a,label:t})):isNaN(t)&&(a=null),a);function N8(s,t,a,n){const r=s.indexOf(t);if(r===-1)return j8(s,t,a,n);const i=s.lastIndexOf(t);return r!==i?a:r}const w8=(s,t)=>s===null?null:xr(Math.round(s),0,t);function ew(s){const t=this.getLabels();return s>=0&&s<t.length?t[s]:s}class q5 extends Vu{static id="category";static defaults={ticks:{callback:ew}};constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const a=this._addedLabels;if(a.length){const n=this.getLabels();for(const{index:r,label:i}of a)n[r]===i&&n.splice(r,1);this._addedLabels=[]}super.init(t)}parse(t,a){if(Hs(t))return null;const n=this.getLabels();return a=isFinite(a)&&n[a]===t?a:N8(n,t,ks(a,t),this._addedLabels),w8(a,n.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:a}=this.getUserBounds();let{min:n,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(n=0),a||(r=this.getLabels().length-1)),this.min=n,this.max=r}buildTicks(){const t=this.min,a=this.max,n=this.options.offset,r=[];let i=this.getLabels();i=t===0&&a===i.length-1?i:i.slice(t,a+1),this._valueRange=Math.max(i.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let o=t;o<=a;o++)r.push({value:o});return r}getLabelForValue(t){return ew.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const a=this.ticks;return t<0||t>a.length-1?null:this.getPixelForValue(a[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}function _8(s,t){const a=[],{bounds:r,step:i,min:o,max:c,precision:u,count:h,maxTicks:m,maxDigits:p,includeBounds:y}=s,g=i||1,j=m-1,{min:b,max:N}=t,v=!Hs(o),S=!Hs(c),E=!Hs(h),L=(N-b)/(p+1);let z=K1((N-b)/j/g)*g,V,te,q,B;if(z<1e-14&&!v&&!S)return[{value:b},{value:N}];B=Math.ceil(N/z)-Math.floor(b/z),B>j&&(z=K1(B*z/j/g)*g),Hs(u)||(V=Math.pow(10,u),z=Math.ceil(z*V)/V),r==="ticks"?(te=Math.floor(b/z)*z,q=Math.ceil(N/z)*z):(te=b,q=N),v&&S&&i&&mF((c-o)/i,z/1e3)?(B=Math.round(Math.min((c-o)/z,m)),z=(c-o)/B,te=o,q=c):E?(te=v?o:te,q=S?c:q,B=h-1,z=(q-te)/B):(B=(q-te)/z,Qf(B,Math.round(B),z/1e3)?B=Math.round(B):B=Math.ceil(B));const J=Math.max(X1(z),X1(te));V=Math.pow(10,Hs(u)?J:u),te=Math.round(te*V)/V,q=Math.round(q*V)/V;let P=0;for(v&&(y&&te!==o?(a.push({value:o}),te<o&&P++,Qf(Math.round((te+P*z)*V)/V,o,tw(o,L,s))&&P++):te<o&&P++);P<B;++P){const K=Math.round((te+P*z)*V)/V;if(S&&K>c)break;a.push({value:K})}return S&&y&&q!==c?a.length&&Qf(a[a.length-1].value,c,tw(c,L,s))?a[a.length-1].value=c:a.push({value:c}):(!S||q===c)&&a.push({value:q}),a}function tw(s,t,{horizontal:a,minRotation:n}){const r=vo(n),i=(a?Math.sin(r):Math.cos(r))||.001,o=.75*t*(""+s).length;return Math.min(t/i,o)}class Mg extends Vu{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,a){return Hs(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:a,maxDefined:n}=this.getUserBounds();let{min:r,max:i}=this;const o=u=>r=a?r:u,c=u=>i=n?i:u;if(t){const u=ac(r),h=ac(i);u<0&&h<0?c(0):u>0&&h>0&&o(0)}if(r===i){let u=i===0?1:Math.abs(i*.05);c(i+u),t||o(r-u)}this.min=r,this.max=i}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:a,stepSize:n}=t,r;return n?(r=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),a=a||11),a&&(r=Math.min(a,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,a=t.ticks;let n=this.getTickLimit();n=Math.max(2,n);const r={maxTicks:n,bounds:t.bounds,min:t.min,max:t.max,precision:a.precision,step:a.stepSize,count:a.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:a.minRotation||0,includeBounds:a.includeBounds!==!1},i=this._range||this,o=_8(r,i);return t.bounds==="ticks"&&UC(o,this,"value"),t.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const t=this.ticks;let a=this.min,n=this.max;if(super.configure(),this.options.offset&&t.length){const r=(n-a)/Math.max(t.length-1,1)/2;a-=r,n+=r}this._startValue=a,this._endValue=n,this._valueRange=n-a}getLabelForValue(t){return Dm(t,this.chart.options.locale,this.options.ticks.format)}}class U5 extends Mg{static id="linear";static defaults={ticks:{callback:rx.formatters.numeric}};determineDataLimits(){const{min:t,max:a}=this.getMinMax(!0);this.min=gn(t)?t:0,this.max=gn(a)?a:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),a=t?this.width:this.height,n=vo(this.options.ticks.minRotation),r=(t?Math.sin(n):Math.cos(n))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(a/Math.min(40,i.lineHeight/r))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}const um=s=>Math.floor(Hd(s)),vu=(s,t)=>Math.pow(10,um(s)+t);function sw(s){return s/Math.pow(10,um(s))===1}function aw(s,t,a){const n=Math.pow(10,a),r=Math.floor(s/n);return Math.ceil(t/n)-r}function S8(s,t){const a=t-s;let n=um(a);for(;aw(s,t,n)>10;)n++;for(;aw(s,t,n)<10;)n--;return Math.min(n,um(s))}function C8(s,{min:t,max:a}){t=cl(s.min,t);const n=[],r=um(t);let i=S8(t,a),o=i<0?Math.pow(10,Math.abs(i)):1;const c=Math.pow(10,i),u=r>i?Math.pow(10,r):0,h=Math.round((t-u)*o)/o,m=Math.floor((t-u)/c/10)*c*10;let p=Math.floor((h-m)/Math.pow(10,i)),y=cl(s.min,Math.round((u+m+p*Math.pow(10,i))*o)/o);for(;y<a;)n.push({value:y,major:sw(y),significand:p}),p>=10?p=p<15?15:20:p++,p>=20&&(i++,p=2,o=i>=0?1:o),y=Math.round((u+m+p*Math.pow(10,i))*o)/o;const g=cl(s.max,y);return n.push({value:g,major:sw(g),significand:p}),n}class A8 extends Vu{static id="logarithmic";static defaults={ticks:{callback:rx.formatters.logarithmic,major:{enabled:!0}}};constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,a){const n=Mg.prototype.parse.apply(this,[t,a]);if(n===0){this._zero=!0;return}return gn(n)&&n>0?n:null}determineDataLimits(){const{min:t,max:a}=this.getMinMax(!0);this.min=gn(t)?Math.max(0,t):null,this.max=gn(a)?Math.max(0,a):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!gn(this._userMin)&&(this.min=t===vu(this.min,0)?vu(this.min,-1):vu(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:a}=this.getUserBounds();let n=this.min,r=this.max;const i=c=>n=t?n:c,o=c=>r=a?r:c;n===r&&(n<=0?(i(1),o(10)):(i(vu(n,-1)),o(vu(r,1)))),n<=0&&i(vu(r,-1)),r<=0&&o(vu(n,1)),this.min=n,this.max=r}buildTicks(){const t=this.options,a={min:this._userMin,max:this._userMax},n=C8(a,this);return t.bounds==="ticks"&&UC(n,this,"value"),t.reverse?(n.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),n}getLabelForValue(t){return t===void 0?"0":Dm(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=Hd(t),this._valueRange=Hd(this.max)-Hd(t)}getPixelForValue(t){return(t===void 0||t===0)&&(t=this.min),t===null||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(Hd(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const a=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+a*this._valueRange)}}function ev(s){const t=s.ticks;if(t.display&&s.display){const a=ti(t.backdropPadding);return ks(t.font&&t.font.size,tn.font.size)+a.height}return 0}function k8(s,t,a){return a=en(a)?a:[a],{w:TF(s,t.string,a),h:a.length*t.lineHeight}}function nw(s,t,a,n,r){return s===n||s===r?{start:t-a/2,end:t+a/2}:s<n||s>r?{start:t-a,end:t}:{start:t,end:t+a}}function D8(s){const t={l:s.left+s._padding.left,r:s.right-s._padding.right,t:s.top+s._padding.top,b:s.bottom-s._padding.bottom},a=Object.assign({},t),n=[],r=[],i=s._pointLabels.length,o=s.options.pointLabels,c=o.centerPointLabels?la/i:0;for(let u=0;u<i;u++){const h=o.setContext(s.getPointLabelContext(u));r[u]=h.padding;const m=s.getPointPosition(u,s.drawingArea+r[u],c),p=rr(h.font),y=k8(s.ctx,p,s._pointLabels[u]);n[u]=y;const g=Qr(s.getIndexAngle(u)+c),j=Math.round(Jv(g)),b=nw(j,m.x,y.w,0,180),N=nw(j,m.y,y.h,90,270);E8(a,t,g,b,N)}s.setCenterPoint(t.l-a.l,a.r-t.r,t.t-a.t,a.b-t.b),s._pointLabelItems=P8(s,n,r)}function E8(s,t,a,n,r){const i=Math.abs(Math.sin(a)),o=Math.abs(Math.cos(a));let c=0,u=0;n.start<t.l?(c=(t.l-n.start)/i,s.l=Math.min(s.l,t.l-c)):n.end>t.r&&(c=(n.end-t.r)/i,s.r=Math.max(s.r,t.r+c)),r.start<t.t?(u=(t.t-r.start)/o,s.t=Math.min(s.t,t.t-u)):r.end>t.b&&(u=(r.end-t.b)/o,s.b=Math.max(s.b,t.b+u))}function T8(s,t,a){const n=s.drawingArea,{extra:r,additionalAngle:i,padding:o,size:c}=a,u=s.getPointPosition(t,n+r+o,i),h=Math.round(Jv(Qr(u.angle+En))),m=O8(u.y,c.h,h),p=F8(h),y=I8(u.x,c.w,p);return{visible:!0,x:u.x,y:m,textAlign:p,left:y,top:m,right:y+c.w,bottom:m+c.h}}function L8(s,t){if(!t)return!0;const{left:a,top:n,right:r,bottom:i}=s;return!(Jc({x:a,y:n},t)||Jc({x:a,y:i},t)||Jc({x:r,y:n},t)||Jc({x:r,y:i},t))}function P8(s,t,a){const n=[],r=s._pointLabels.length,i=s.options,{centerPointLabels:o,display:c}=i.pointLabels,u={extra:ev(i)/2,additionalAngle:o?la/r:0};let h;for(let m=0;m<r;m++){u.padding=a[m],u.size=t[m];const p=T8(s,m,u);n.push(p),c==="auto"&&(p.visible=L8(p,h),p.visible&&(h=p))}return n}function F8(s){return s===0||s===180?"center":s<180?"left":"right"}function I8(s,t,a){return a==="right"?s-=t:a==="center"&&(s-=t/2),s}function O8(s,t,a){return a===90||a===270?s-=t/2:(a>270||a<90)&&(s-=t),s}function M8(s,t,a){const{left:n,top:r,right:i,bottom:o}=a,{backdropColor:c}=t;if(!Hs(c)){const u=Lu(t.borderRadius),h=ti(t.backdropPadding);s.fillStyle=c;const m=n-h.left,p=r-h.top,y=i-n+h.width,g=o-r+h.height;Object.values(u).some(j=>j!==0)?(s.beginPath(),cm(s,{x:m,y:p,w:y,h:g,radius:u}),s.fill()):s.fillRect(m,p,y,g)}}function R8(s,t){const{ctx:a,options:{pointLabels:n}}=s;for(let r=t-1;r>=0;r--){const i=s._pointLabelItems[r];if(!i.visible)continue;const o=n.setContext(s.getPointLabelContext(r));M8(a,o,i);const c=rr(o.font),{x:u,y:h,textAlign:m}=i;zu(a,s._pointLabels[r],u,h+c.lineHeight/2,c,{color:o.color,textAlign:m,textBaseline:"middle"})}}function H5(s,t,a,n){const{ctx:r}=s;if(a)r.arc(s.xCenter,s.yCenter,t,0,Va);else{let i=s.getPointPosition(0,t);r.moveTo(i.x,i.y);for(let o=1;o<n;o++)i=s.getPointPosition(o,t),r.lineTo(i.x,i.y)}}function B8(s,t,a,n,r){const i=s.ctx,o=t.circular,{color:c,lineWidth:u}=t;!o&&!n||!c||!u||a<0||(i.save(),i.strokeStyle=c,i.lineWidth=u,i.setLineDash(r.dash||[]),i.lineDashOffset=r.dashOffset,i.beginPath(),H5(s,a,o,n),i.closePath(),i.stroke(),i.restore())}function z8(s,t,a){return Jd(s,{label:a,index:t,type:"pointLabel"})}class q8 extends Mg{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:rx.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(t){return t},padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=ti(ev(this.options)/2),a=this.width=this.maxWidth-t.width,n=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+a/2+t.left),this.yCenter=Math.floor(this.top+n/2+t.top),this.drawingArea=Math.floor(Math.min(a,n)/2)}determineDataLimits(){const{min:t,max:a}=this.getMinMax(!1);this.min=gn(t)&&!isNaN(t)?t:0,this.max=gn(a)&&!isNaN(a)?a:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/ev(this.options))}generateTickLabels(t){Mg.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((a,n)=>{const r=Ra(this.options.pointLabels.callback,[a,n],this);return r||r===0?r:""}).filter((a,n)=>this.chart.getDataVisibility(n))}fit(){const t=this.options;t.display&&t.pointLabels.display?D8(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,a,n,r){this.xCenter+=Math.floor((t-a)/2),this.yCenter+=Math.floor((n-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,a,n,r))}getIndexAngle(t){const a=Va/(this._pointLabels.length||1),n=this.options.startAngle||0;return Qr(t*a+vo(n))}getDistanceFromCenterForValue(t){if(Hs(t))return NaN;const a=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*a:(t-this.min)*a}getValueForDistanceFromCenter(t){if(Hs(t))return NaN;const a=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-a:this.min+a}getPointLabelContext(t){const a=this._pointLabels||[];if(t>=0&&t<a.length){const n=a[t];return z8(this.getContext(),t,n)}}getPointPosition(t,a,n=0){const r=this.getIndexAngle(t)-En+n;return{x:Math.cos(r)*a+this.xCenter,y:Math.sin(r)*a+this.yCenter,angle:r}}getPointPositionForValue(t,a){return this.getPointPosition(t,this.getDistanceFromCenterForValue(a))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:a,top:n,right:r,bottom:i}=this._pointLabelItems[t];return{left:a,top:n,right:r,bottom:i}}drawBackground(){const{backgroundColor:t,grid:{circular:a}}=this.options;if(t){const n=this.ctx;n.save(),n.beginPath(),H5(this,this.getDistanceFromCenterForValue(this._endValue),a,this._pointLabels.length),n.closePath(),n.fillStyle=t,n.fill(),n.restore()}}drawGrid(){const t=this.ctx,a=this.options,{angleLines:n,grid:r,border:i}=a,o=this._pointLabels.length;let c,u,h;if(a.pointLabels.display&&R8(this,o),r.display&&this.ticks.forEach((m,p)=>{if(p!==0||p===0&&this.min<0){u=this.getDistanceFromCenterForValue(m.value);const y=this.getContext(p),g=r.setContext(y),j=i.setContext(y);B8(this,g,u,o,j)}}),n.display){for(t.save(),c=o-1;c>=0;c--){const m=n.setContext(this.getPointLabelContext(c)),{color:p,lineWidth:y}=m;!y||!p||(t.lineWidth=y,t.strokeStyle=p,t.setLineDash(m.borderDash),t.lineDashOffset=m.borderDashOffset,u=this.getDistanceFromCenterForValue(a.reverse?this.min:this.max),h=this.getPointPosition(c,u),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(h.x,h.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,a=this.options,n=a.ticks;if(!n.display)return;const r=this.getIndexAngle(0);let i,o;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(r),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((c,u)=>{if(u===0&&this.min>=0&&!a.reverse)return;const h=n.setContext(this.getContext(u)),m=rr(h.font);if(i=this.getDistanceFromCenterForValue(this.ticks[u].value),h.showLabelBackdrop){t.font=m.string,o=t.measureText(c.label).width,t.fillStyle=h.backdropColor;const p=ti(h.backdropPadding);t.fillRect(-o/2-p.left,-i-m.size/2-p.top,o+p.width,m.size+p.height)}zu(t,c.label,0,-i,m,{color:h.color,strokeColor:h.textStrokeColor,strokeWidth:h.textStrokeWidth})}),t.restore()}drawTitle(){}}const hx={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Hi=Object.keys(hx);function rw(s,t){return s-t}function iw(s,t){if(Hs(t))return null;const a=s._adapter,{parser:n,round:r,isoWeekday:i}=s._parseOpts;let o=t;return typeof n=="function"&&(o=n(o)),gn(o)||(o=typeof n=="string"?a.parse(o,n):a.parse(o)),o===null?null:(r&&(o=r==="week"&&(qh(i)||i===!0)?a.startOf(o,"isoWeek",i):a.startOf(o,r)),+o)}function lw(s,t,a,n){const r=Hi.length;for(let i=Hi.indexOf(s);i<r-1;++i){const o=hx[Hi[i]],c=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((a-t)/(c*o.size))<=n)return Hi[i]}return Hi[r-1]}function U8(s,t,a,n,r){for(let i=Hi.length-1;i>=Hi.indexOf(a);i--){const o=Hi[i];if(hx[o].common&&s._adapter.diff(r,n,o)>=t-1)return o}return Hi[a?Hi.indexOf(a):0]}function H8(s){for(let t=Hi.indexOf(s)+1,a=Hi.length;t<a;++t)if(hx[Hi[t]].common)return Hi[t]}function ow(s,t,a){if(!a)s[t]=!0;else if(a.length){const{lo:n,hi:r}=Zv(a,t),i=a[n]>=t?a[n]:a[r];s[i]=!0}}function $8(s,t,a,n){const r=s._adapter,i=+r.startOf(t[0].value,n),o=t[t.length-1].value;let c,u;for(c=i;c<=o;c=+r.add(c,1,n))u=a[c],u>=0&&(t[u].major=!0);return t}function cw(s,t,a){const n=[],r={},i=t.length;let o,c;for(o=0;o<i;++o)c=t[o],r[c]=o,n.push({value:c,major:!1});return i===0||!a?n:$8(s,n,r,a)}class tv extends Vu{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,a={}){const n=t.time||(t.time={}),r=this._adapter=new JI._date(t.adapters.date);r.init(a),Gf(n.displayFormats,r.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(t),this._normalized=a.normalized}parse(t,a){return t===void 0?null:iw(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,a=this._adapter,n=t.time.unit||"day";let{min:r,max:i,minDefined:o,maxDefined:c}=this.getUserBounds();function u(h){!o&&!isNaN(h.min)&&(r=Math.min(r,h.min)),!c&&!isNaN(h.max)&&(i=Math.max(i,h.max))}(!o||!c)&&(u(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&u(this.getMinMax(!1))),r=gn(r)&&!isNaN(r)?r:+a.startOf(Date.now(),n),i=gn(i)&&!isNaN(i)?i:+a.endOf(Date.now(),n)+1,this.min=Math.min(r,i-1),this.max=Math.max(r+1,i)}_getLabelBounds(){const t=this.getLabelTimestamps();let a=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return t.length&&(a=t[0],n=t[t.length-1]),{min:a,max:n}}buildTicks(){const t=this.options,a=t.time,n=t.ticks,r=n.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const i=this.min,o=this.max,c=bF(r,i,o);return this._unit=a.unit||(n.autoSkip?lw(a.minUnit,this.min,this.max,this._getLabelCapacity(i)):U8(this,c.length,a.minUnit,this.min,this.max)),this._majorUnit=!n.major.enabled||this._unit==="year"?void 0:H8(this._unit),this.initOffsets(r),t.reverse&&c.reverse(),cw(this,c,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let a=0,n=0,r,i;this.options.offset&&t.length&&(r=this.getDecimalForValue(t[0]),t.length===1?a=1-r:a=(this.getDecimalForValue(t[1])-r)/2,i=this.getDecimalForValue(t[t.length-1]),t.length===1?n=i:n=(i-this.getDecimalForValue(t[t.length-2]))/2);const o=t.length<3?.5:.25;a=xr(a,0,o),n=xr(n,0,o),this._offsets={start:a,end:n,factor:1/(a+1+n)}}_generate(){const t=this._adapter,a=this.min,n=this.max,r=this.options,i=r.time,o=i.unit||lw(i.minUnit,a,n,this._getLabelCapacity(a)),c=ks(r.ticks.stepSize,1),u=o==="week"?i.isoWeekday:!1,h=qh(u)||u===!0,m={};let p=a,y,g;if(h&&(p=+t.startOf(p,"isoWeek",u)),p=+t.startOf(p,h?"day":o),t.diff(n,a,o)>1e5*c)throw new Error(a+" and "+n+" are too far apart with stepSize of "+c+" "+o);const j=r.ticks.source==="data"&&this.getDataTimestamps();for(y=p,g=0;y<n;y=+t.add(y,c,o),g++)ow(m,y,j);return(y===n||r.bounds==="ticks"||g===1)&&ow(m,y,j),Object.keys(m).sort(rw).map(b=>+b)}getLabelForValue(t){const a=this._adapter,n=this.options.time;return n.tooltipFormat?a.format(t,n.tooltipFormat):a.format(t,n.displayFormats.datetime)}format(t,a){const r=this.options.time.displayFormats,i=this._unit,o=a||r[i];return this._adapter.format(t,o)}_tickFormatFunction(t,a,n,r){const i=this.options,o=i.ticks.callback;if(o)return Ra(o,[t,a,n],this);const c=i.time.displayFormats,u=this._unit,h=this._majorUnit,m=u&&c[u],p=h&&c[h],y=n[a],g=h&&p&&y&&y.major;return this._adapter.format(t,r||(g?p:m))}generateTickLabels(t){let a,n,r;for(a=0,n=t.length;a<n;++a)r=t[a],r.label=this._tickFormatFunction(r.value,a,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const a=this._offsets,n=this.getDecimalForValue(t);return this.getPixelForDecimal((a.start+n)*a.factor)}getValueForPixel(t){const a=this._offsets,n=this.getDecimalForPixel(t)/a.factor-a.end;return this.min+n*(this.max-this.min)}_getLabelSize(t){const a=this.options.ticks,n=this.ctx.measureText(t).width,r=vo(this.isHorizontal()?a.maxRotation:a.minRotation),i=Math.cos(r),o=Math.sin(r),c=this._resolveTickFontOptions(0).size;return{w:n*i+c*o,h:n*o+c*i}}_getLabelCapacity(t){const a=this.options.time,n=a.displayFormats,r=n[a.unit]||n.millisecond,i=this._tickFormatFunction(t,0,cw(this,[t],this._majorUnit),r),o=this._getLabelSize(i),c=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return c>0?c:1}getDataTimestamps(){let t=this._cache.data||[],a,n;if(t.length)return t;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(a=0,n=r.length;a<n;++a)t=t.concat(r[a].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let a,n;if(t.length)return t;const r=this.getLabels();for(a=0,n=r.length;a<n;++a)t.push(iw(this,r[a]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return VC(t.sort(rw))}}function Bp(s,t,a){let n=0,r=s.length-1,i,o,c,u;a?(t>=s[n].pos&&t<=s[r].pos&&({lo:n,hi:r}=Qc(s,"pos",t)),{pos:i,time:c}=s[n],{pos:o,time:u}=s[r]):(t>=s[n].time&&t<=s[r].time&&({lo:n,hi:r}=Qc(s,"time",t)),{time:i,pos:c}=s[n],{time:o,pos:u}=s[r]);const h=o-i;return h?c+(u-c)*(t-i)/h:c}class V8 extends tv{static id="timeseries";static defaults=tv.defaults;constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),a=this._table=this.buildLookupTable(t);this._minPos=Bp(a,this.min),this._tableRange=Bp(a,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:a,max:n}=this,r=[],i=[];let o,c,u,h,m;for(o=0,c=t.length;o<c;++o)h=t[o],h>=a&&h<=n&&r.push(h);if(r.length<2)return[{time:a,pos:0},{time:n,pos:1}];for(o=0,c=r.length;o<c;++o)m=r[o+1],u=r[o-1],h=r[o],Math.round((m+u)/2)!==h&&i.push({time:h,pos:o/(c-1)});return i}_generate(){const t=this.min,a=this.max;let n=super.getDataTimestamps();return(!n.includes(t)||!n.length)&&n.splice(0,0,t),(!n.includes(a)||n.length===1)&&n.push(a),n.sort((r,i)=>r-i)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const a=this.getDataTimestamps(),n=this.getLabelTimestamps();return a.length&&n.length?t=this.normalize(a.concat(n)):t=a.length?a:n,t=this._cache.all=t,t}getDecimalForValue(t){return(Bp(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const a=this._offsets,n=this.getDecimalForPixel(t)/a.factor-a.end;return Bp(this._table,n*this._tableRange+this._minPos,!0)}}var W8=Object.freeze({__proto__:null,CategoryScale:q5,LinearScale:U5,LogarithmicScale:A8,RadialLinearScale:q8,TimeScale:tv,TimeSeriesScale:V8});const R9=[QI,kM,v8,W8],$5="label";function dw(s,t){typeof s=="function"?s(t):s&&(s.current=t)}function Y8(s,t){const a=s.options;a&&t&&Object.assign(a,t)}function V5(s,t){s.labels=t}function W5(s,t){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:$5;const n=[];s.datasets=t.map(r=>{const i=s.datasets.find(o=>o[a]===r[a]);return!i||!r.data||n.includes(i)?{...r}:(n.push(i),Object.assign(i,r),i)})}function K8(s){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:$5;const a={labels:[],datasets:[]};return V5(a,s.labels),W5(a,s.datasets,t),a}function X8(s,t){const{height:a=150,width:n=300,redraw:r=!1,datasetIdKey:i,type:o,data:c,options:u,plugins:h=[],fallbackContent:m,updateMode:p,...y}=s,g=A.useRef(null),j=A.useRef(null),b=()=>{g.current&&(j.current=new dx(g.current,{type:o,data:K8(c,i),options:u&&{...u},plugins:h}),dw(t,j.current))},N=()=>{dw(t,null),j.current&&(j.current.destroy(),j.current=null)};return A.useEffect(()=>{!r&&j.current&&u&&Y8(j.current,u)},[r,u]),A.useEffect(()=>{!r&&j.current&&V5(j.current.config.data,c.labels)},[r,c.labels]),A.useEffect(()=>{!r&&j.current&&c.datasets&&W5(j.current.config.data,c.datasets,i)},[r,c.datasets]),A.useEffect(()=>{j.current&&(r?(N(),setTimeout(b)):j.current.update(p))},[r,u,c.labels,c.datasets,p]),A.useEffect(()=>{j.current&&(N(),setTimeout(b))},[o]),A.useEffect(()=>(b(),()=>N()),[]),Wg.createElement("canvas",{ref:g,role:"img",height:a,width:n,...y},m)}const G8=A.forwardRef(X8);function Y5(s,t){return dx.register(t),A.forwardRef((a,n)=>Wg.createElement(G8,{...a,ref:n,type:s}))}const Q8=Y5("line",p5),zp=Y5("bar",m5),Rf={getRealTimeComparison:async()=>{const s=await Ne.get("/analytics/data.php",{params:{action:"realTimeComparison"}});if(console.log("Real-time API response:",s.data),s.data.success){const t=s.data.data||s.data;if(t.today&&t.pastAverage)return t}throw new Error("Failed to fetch real-time comparison data")},getSalesData:async()=>{const s=await Ne.get("/analytics/data.php",{params:{action:"salesData"}});if(console.log("Sales data API response:",s.data),s.data.success){if(s.data.data&&s.data.data.data)return s.data.data.data;if(s.data.data&&Array.isArray(s.data.data))return s.data.data;if(Array.isArray(s.data))return s.data}throw new Error("Failed to fetch sales data")},getPerformance:async(s="month")=>{const t=await Ne.get("/analytics/data.php",{params:{action:"performance",period:s}});if(console.log("Performance API response:",t.data),t.data.success){const a=t.data.data||t.data;if(a.current&&a.previous)return a}throw new Error("Failed to fetch performance data")},getMonthlyCounts:async s=>{const t=await Ne.get("/analytics/data.php",{params:{action:"monthlyCounts",year:s}});if(console.log("Monthly counts API response:",t.data),console.log("Monthly counts response.data.data:",t.data.data),console.log("Monthly counts response keys:",Object.keys(t.data)),t.data.success){const a=t.data.data||t.data;if(console.log("Monthly counts extracted data:",a),console.log("Monthly counts extracted data keys:",Object.keys(a)),console.log("Has year?",a.year),console.log("Has data property?",a.data),t.data.year!==void 0)return{year:t.data.year,data:t.data.data};if(a.year!==void 0&&a.data)return a}throw new Error("Failed to fetch monthly counts")},getWeeklyCounts:async(s,t)=>{const a=await Ne.get("/analytics/data.php",{params:{action:"weeklyCounts",year:s,...t&&{month:t}}});if(console.log("Weekly counts API response:",a.data),console.log("Weekly counts response.data.data:",a.data.data),console.log("Weekly counts response keys:",Object.keys(a.data)),a.data.success){const n=a.data.data||a.data;if(console.log("Weekly counts extracted data:",n),console.log("Weekly counts extracted data keys:",Object.keys(n)),console.log("Has year?",n.year),console.log("Has data property?",n.data),a.data.year!==void 0)return{year:a.data.year,month:a.data.month,data:a.data.data};if(n.year!==void 0&&n.data)return n}throw new Error("Failed to fetch weekly counts")}};dx.register(q5,U5,k5,Em,E5,R5,z5,M5);const J8=()=>{const[s,t]=A.useState(null),[a,n]=A.useState([]),[r,i]=A.useState(null),[o,c]=A.useState(null),[u,h]=A.useState(null),[m,p]=A.useState(!0),[y,g]=A.useState("month"),[j,b]=A.useState(new Date().getFullYear()),[N,v]=A.useState(new Date().getMonth()+1),[S,E]=A.useState(!0),L=async()=>{try{const Y=await Rf.getRealTimeComparison();t(Y)}catch(Y){console.error("Error loading real-time data:",Y)}},z=async()=>{try{const Y=await Rf.getSalesData();n(Y)}catch(Y){console.error("Error loading sales data:",Y)}},V=async()=>{try{const Y=await Rf.getPerformance(y);i(Y)}catch(Y){console.error("Error loading performance data:",Y)}},te=async()=>{try{const Y=await Rf.getMonthlyCounts(j);c(Y)}catch(Y){console.error("Error loading monthly data:",Y)}},q=async()=>{try{const Y=await Rf.getWeeklyCounts(j,N);h(Y)}catch(Y){console.error("Error loading weekly data:",Y)}};A.useEffect(()=>{(async()=>{E(!0),await Promise.all([L(),z(),V(),te(),q()]),E(!1)})()},[]),A.useEffect(()=>{V()},[y]),A.useEffect(()=>{te()},[j]),A.useEffect(()=>{q()},[j,N]);const B=(Y,$)=>$===0?Y>0?100:0:Math.round((Y-$)/$*100*10)/10,J=(Y,$)=>{const me=B(Y,$);return me>0?e.jsxs("span",{className:"badge bg-success",children:[e.jsx("i",{className:"fas fa-arrow-up"})," ",me,"%"]}):me<0?e.jsxs("span",{className:"badge bg-danger",children:[e.jsx("i",{className:"fas fa-arrow-down"})," ",Math.abs(me),"%"]}):e.jsx("span",{className:"badge bg-secondary",children:"0%"})};if(S)return e.jsxs("div",{className:"dashboard-loading",children:[e.jsx("div",{className:"loading-spinner-large"}),e.jsx("p",{children:"Loading analytics..."})]});const P=s?{labels:Object.keys(s.hourlyBreakdown.ticket),datasets:[{label:"Today - Ticket",data:Object.values(s.hourlyBreakdown.ticket),borderColor:"#000000",backgroundColor:"rgba(0,0,0,0.1)",borderWidth:2,tension:.3,fill:!1},{label:"Avg - Ticket",data:Object.values(s.hourlyBreakdownPast.ticket),borderColor:"#000000",backgroundColor:"rgba(0,0,0,0.1)",borderWidth:2,tension:.3,fill:!1,borderDash:[5,5]},{label:"Today - Residence",data:Object.values(s.hourlyBreakdown.residence),borderColor:"#dc3545",backgroundColor:"rgba(220,53,69,0.1)",borderWidth:2,tension:.3,fill:!1},{label:"Avg - Residence",data:Object.values(s.hourlyBreakdownPast.residence),borderColor:"#dc3545",backgroundColor:"rgba(220,53,69,0.1)",borderWidth:2,tension:.3,fill:!1,borderDash:[5,5]},{label:"Today - Visa",data:Object.values(s.hourlyBreakdown.visa),borderColor:"#fd7e14",backgroundColor:"rgba(253,126,20,0.1)",borderWidth:2,tension:.3,fill:!1},{label:"Avg - Visa",data:Object.values(s.hourlyBreakdownPast.visa),borderColor:"#fd7e14",backgroundColor:"rgba(253,126,20,0.1)",borderWidth:2,tension:.3,fill:!1,borderDash:[5,5]}]}:null,K=s?{labels:s.pastAverage.days,datasets:[{label:"Ticket",data:s.pastAverage.days.map(Y=>s.pastAverage.dailyBreakdown.ticket[Y]||0),backgroundColor:"rgba(0,0,0,0.6)",borderColor:"#000000",borderWidth:1},{label:"Residence",data:s.pastAverage.days.map(Y=>s.pastAverage.dailyBreakdown.residence[Y]||0),backgroundColor:"rgba(220,53,69,0.6)",borderColor:"#dc3545",borderWidth:1},{label:"Visa",data:s.pastAverage.days.map(Y=>s.pastAverage.dailyBreakdown.visa[Y]||0),backgroundColor:"rgba(253,126,20,0.6)",borderColor:"#fd7e14",borderWidth:1}]}:null,H=a&&a.length>0?{labels:a.map(Y=>Y.date),datasets:[{label:"Ticket Count",data:a.map(Y=>Y.ticket),borderColor:"#000000",backgroundColor:"rgba(0,0,0,0.6)",borderWidth:1},{label:"Residence Count",data:a.map(Y=>Y.residence),borderColor:"#dc3545",backgroundColor:"rgba(220,53,69,0.6)",borderWidth:1},{label:"Visa Count",data:a.map(Y=>Y.visa),borderColor:"#fd7e14",backgroundColor:"rgba(253,126,20,0.6)",borderWidth:1}]}:null,se=o?{labels:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],datasets:[{label:"Ticket",data:Object.values(o.data.ticket),backgroundColor:"rgba(0,0,0,0.6)",borderColor:"#000",borderWidth:1},{label:"Residence",data:Object.values(o.data.residence),backgroundColor:"rgba(220,53,69,0.6)",borderColor:"#dc3545",borderWidth:1},{label:"Visa",data:Object.values(o.data.visa),backgroundColor:"rgba(253,126,20,0.6)",borderColor:"#fd7e14",borderWidth:1}]}:null,X=u?{labels:Object.keys(u.data.ticket).sort((Y,$)=>parseInt(Y)-parseInt($)).map(Y=>`W${Y}`),datasets:[{label:"Ticket",data:Object.keys(u.data.ticket).sort((Y,$)=>parseInt(Y)-parseInt($)).map(Y=>u.data.ticket[parseInt(Y)]||0),backgroundColor:"rgba(0,0,0,0.6)",borderColor:"#000",borderWidth:1},{label:"Residence",data:Object.keys(u.data.residence).sort((Y,$)=>parseInt(Y)-parseInt($)).map(Y=>u.data.residence[parseInt(Y)]||0),backgroundColor:"rgba(220,53,69,0.6)",borderColor:"#dc3545",borderWidth:1},{label:"Visa",data:Object.keys(u.data.visa).sort((Y,$)=>parseInt(Y)-parseInt($)).map(Y=>u.data.visa[parseInt(Y)]||0),backgroundColor:"rgba(253,126,20,0.6)",borderColor:"#fd7e14",borderWidth:1}]}:null,R={responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!0,ticks:{stepSize:1,font:{size:10}}},x:{ticks:{font:{size:10}}}},plugins:{legend:{position:"bottom",labels:{boxWidth:10,padding:8,font:{size:10}}}}},Q={responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!0,ticks:{stepSize:1,font:{size:10}}},x:{ticks:{font:{size:10}}}},plugins:{legend:{position:"bottom",labels:{boxWidth:10,padding:8,font:{size:10}}}}};return e.jsxs("div",{className:"dashboard-analytics",children:[e.jsx("h1",{className:"page-header mb-4",children:"Dashboard v2  Sales Overview"}),s&&e.jsx("div",{className:"card border-0 shadow-sm mb-4",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[e.jsx("h4",{className:"card-title mb-0",children:"Real-time Comparison: Today vs Past 7 Days Average"}),e.jsxs("button",{className:"btn btn-sm btn-outline-primary",onClick:L,children:[e.jsx("i",{className:"fas fa-sync-alt"})," Refresh"]})]}),e.jsxs("div",{className:"row mb-4",children:[e.jsx("div",{className:"col-md-4",children:e.jsx("div",{className:"card bg-light",children:e.jsxs("div",{className:"card-body text-center",children:[e.jsx("h5",{className:"card-title",children:"Tickets"}),e.jsxs("div",{className:"d-flex justify-content-around",children:[e.jsxs("div",{children:[e.jsx("h6",{children:"Today"}),e.jsx("h2",{children:s.today.counts.ticket})]}),e.jsxs("div",{children:[e.jsx("h6",{children:"Avg (7 days)"}),e.jsx("h2",{children:s.pastAverage.counts.ticket}),e.jsx("small",{className:"text-muted",children:"Past week"})]})]}),e.jsx("div",{className:"mt-2",children:J(s.today.counts.ticket,m?s.pastAverage.upToNowCounts.ticket:s.pastAverage.counts.ticket)})]})})}),e.jsx("div",{className:"col-md-4",children:e.jsx("div",{className:"card bg-light",children:e.jsxs("div",{className:"card-body text-center",children:[e.jsx("h5",{className:"card-title",children:"Residence"}),e.jsxs("div",{className:"d-flex justify-content-around",children:[e.jsxs("div",{children:[e.jsx("h6",{children:"Today"}),e.jsx("h2",{children:s.today.counts.residence})]}),e.jsxs("div",{children:[e.jsx("h6",{children:"Avg (7 days)"}),e.jsx("h2",{children:s.pastAverage.counts.residence}),e.jsx("small",{className:"text-muted",children:"Past week"})]})]}),e.jsx("div",{className:"mt-2",children:J(s.today.counts.residence,m?s.pastAverage.upToNowCounts.residence:s.pastAverage.counts.residence)})]})})}),e.jsx("div",{className:"col-md-4",children:e.jsx("div",{className:"card bg-light",children:e.jsxs("div",{className:"card-body text-center",children:[e.jsx("h5",{className:"card-title",children:"Visa"}),e.jsxs("div",{className:"d-flex justify-content-around",children:[e.jsxs("div",{children:[e.jsx("h6",{children:"Today"}),e.jsx("h2",{children:s.today.counts.visa})]}),e.jsxs("div",{children:[e.jsx("h6",{children:"Avg (7 days)"}),e.jsx("h2",{children:s.pastAverage.counts.visa}),e.jsx("small",{className:"text-muted",children:"Past week"})]})]}),e.jsx("div",{className:"mt-2",children:J(s.today.counts.visa,m?s.pastAverage.upToNowCounts.visa:s.pastAverage.counts.visa)})]})})})]}),e.jsx("div",{className:"row mb-2",children:e.jsxs("div",{className:"col-12 d-flex justify-content-between align-items-center",children:[e.jsx("h5",{className:"mb-0",children:"Hourly Activity Comparison"}),e.jsxs("div",{className:"form-check form-switch",children:[e.jsx("input",{className:"form-check-input",type:"checkbox",id:"compareSwitch",checked:m,onChange:Y=>p(Y.target.checked)}),e.jsx("label",{className:"form-check-label",htmlFor:"compareSwitch",children:"Fair comparison (up to current time)"})]})]})}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-8",children:e.jsx("div",{style:{height:"220px"},children:P&&e.jsx(Q8,{data:P,options:R})})}),e.jsx("div",{className:"col-md-4",children:e.jsx("div",{style:{height:"220px"},children:K&&e.jsx(zp,{data:K,options:Q})})})]}),e.jsx("div",{className:"row mt-2",children:e.jsxs("div",{className:"col-12 text-center small text-muted",children:["Last updated: ",new Date().toLocaleString()]})})]})}),e.jsx("div",{className:"card border-0 shadow-sm mb-4",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"d-flex align-items-center mb-2",children:[e.jsxs("h4",{className:"mb-0",children:[e.jsx("i",{className:"fas fa-calendar-week"})," Weekly Counts  ",j]}),e.jsx("select",{className:"form-select form-select-sm ms-3",style:{width:"auto"},value:N,onChange:Y=>v(parseInt(Y.target.value)),children:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].map((Y,$)=>e.jsx("option",{value:$+1,children:Y},$+1))})]}),e.jsx("div",{style:{height:"200px"},children:X&&e.jsx(zp,{data:X,options:Q})})]})}),e.jsx("div",{className:"card border-0 shadow-sm mb-4",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[e.jsxs("h4",{className:"mb-0",children:[e.jsx("i",{className:"fas fa-calendar-alt"})," Monthly Counts  ",j]}),e.jsx("div",{children:e.jsx("select",{className:"form-select form-select-sm",style:{width:"auto"},value:j,onChange:Y=>b(parseInt(Y.target.value)),children:Array.from({length:6},(Y,$)=>new Date().getFullYear()-$).map(Y=>e.jsx("option",{value:Y,children:Y},Y))})})]}),e.jsx("div",{style:{height:"200px"},children:se&&e.jsx(zp,{data:se,options:Q})})]})}),e.jsxs("div",{className:"d-flex justify-content-end mb-2",children:[e.jsx("label",{className:"me-2 fw-bold",children:"Compare:"}),e.jsxs("select",{className:"form-select form-select-sm",style:{width:"auto"},value:y,onChange:Y=>g(Y.target.value),children:[e.jsx("option",{value:"month",children:"This Month vs Last Month"}),e.jsx("option",{value:"year",children:"Year-to-Date vs Last Year"}),e.jsx("option",{value:"ytd",children:"Current Month vs Year-to-Date"})]})]}),r&&e.jsxs("div",{className:"row text-center mb-4",children:[e.jsx("div",{className:"col-4",children:e.jsxs("h6",{children:["Ticket ",J(r.current.ticket,r.previous.ticket)]})}),e.jsx("div",{className:"col-4",children:e.jsxs("h6",{children:["Residence ",J(r.current.residence,r.previous.residence)]})}),e.jsx("div",{className:"col-4",children:e.jsxs("h6",{children:["Visa ",J(r.current.visa,r.previous.visa)]})})]}),e.jsx("div",{className:"card border-0 shadow-sm mb-4",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("h4",{className:"card-title mb-3",children:[e.jsx("i",{className:"fas fa-chart-line"})," Last 30 Days Entries (Count)"]}),e.jsx("div",{style:{height:"200px"},children:H&&e.jsx(zp,{data:H,options:Q})})]})})]})},Bf={async getCustomers(s){const t=await Ne.post("/customer/customers.php",{action:"getCustomers",...s});return{data:t.data.success?t.data.data:[],pagination:t.data.pagination}},async addCustomer(s){const t=await Ne.post("/customer/customers.php",{action:"addCustomer",...s});return{success:t.data.success,message:t.data.message||"Customer added successfully"}},async updateCustomer(s){const t=await Ne.post("/customer/customers.php",{action:"updateCustomer",...s});return{success:t.data.success,message:t.data.message||"Customer updated successfully"}},async deleteCustomer(s){const t=await Ne.post("/customer/customers.php",{action:"deleteCustomer",customer_id:s});return{success:t.data.success,message:t.data.message||"Customer deleted successfully"}},async getCustomer(s){const t=await Ne.post("/customer/customers.php",{action:"getCustomer",customer_id:s});if(t.data.success&&t.data.data)return t.data.data;throw new Error(t.data.message||"Customer not found")}},It=({options:s,value:t,onChange:a,placeholder:n="Select...",disabled:r=!1,required:i=!1})=>{const[o,c]=A.useState(!1),[u,h]=A.useState(""),[m,p]=A.useState(0),y=A.useRef(null),g=A.useRef(null),j=s.find(E=>E.value===t),b=s.filter(E=>E.label.toLowerCase().includes(u.toLowerCase()));A.useEffect(()=>{const E=L=>{y.current&&!y.current.contains(L.target)&&(c(!1),h(""))};return document.addEventListener("mousedown",E),()=>document.removeEventListener("mousedown",E)},[]),A.useEffect(()=>{o&&g.current&&g.current.focus()},[o]);const N=E=>{a(E.value),c(!1),h(""),p(0)},v=E=>{if(!o){(E.key==="Enter"||E.key===" "||E.key==="ArrowDown")&&(E.preventDefault(),c(!0));return}switch(E.key){case"ArrowDown":E.preventDefault(),p(L=>L<b.length-1?L+1:L);break;case"ArrowUp":E.preventDefault(),p(L=>L>0?L-1:L);break;case"Enter":E.preventDefault(),b[m]&&N(b[m]);break;case"Escape":E.preventDefault(),c(!1),h("");break;case"Tab":c(!1),h("");break}},S=E=>{h(E.target.value),p(0),o||c(!0)};return e.jsxs("div",{className:`searchable-select ${r?"disabled":""}`,ref:y,children:[e.jsxs("div",{className:`searchable-select-control ${o?"open":""}`,onClick:()=>!r&&c(!o),children:[o?e.jsx("input",{ref:g,type:"text",className:"searchable-select-input",value:u,onChange:S,onKeyDown:v,placeholder:n,disabled:r}):e.jsx("div",{className:"searchable-select-value",children:j?j.label:n}),e.jsx("div",{className:"searchable-select-arrow",children:e.jsx("i",{className:`fa fa-chevron-${o?"up":"down"}`})})]}),o&&!r&&e.jsx("div",{className:"searchable-select-menu",children:b.length===0?e.jsxs("div",{className:"searchable-select-no-options",children:[e.jsx("i",{className:"fa fa-search me-2"}),"No options found"]}):e.jsx("div",{className:"searchable-select-options",children:b.map((E,L)=>e.jsxs("div",{className:`searchable-select-option ${E.value===t?"selected":""} ${L===m?"highlighted":""}`,onClick:()=>N(E),onMouseEnter:()=>p(L),children:[E.value===t&&e.jsx("i",{className:"fa fa-check me-2 text-success"}),E.label]},E.value))})})]})};function Z8(){const[s,t]=A.useState({page:1,per_page:10}),[a,n]=A.useState(!1),[r,i]=A.useState(null),[o,c]=A.useState({customer_name:"",customer_phone:"",customer_whatsapp:"",customer_address:"",customer_email:"",customer_password:"",customer_status:1,supplier_id:-1}),u=Wa(),{data:h}=Rt({queryKey:["suppliers-dropdown"],queryFn:async()=>{try{const J=await Ne.get("/payment/dropdowns.php?type=suppliers");return J.data.success?J.data.data.suppliers||[]:[]}catch{return[]}},staleTime:6e4,refetchOnWindowFocus:!1}),{data:m,refetch:p}=Rt({queryKey:["customers",s],queryFn:()=>Bf.getCustomers(s),staleTime:1e4,refetchOnWindowFocus:!1}),y=m?.data||[],g=m?.pagination,j=wt({mutationFn:J=>Bf.addCustomer(J),onSuccess:()=>{W.fire({icon:"success",title:"Success!",text:"Customer added successfully",timer:1500,showConfirmButton:!1}),u.invalidateQueries({queryKey:["customers"]}),n(!1),v()},onError:J=>{W.fire({icon:"error",title:"Error!",text:J.response?.data?.message||"Failed to add customer"})}}),b=wt({mutationFn:J=>Bf.updateCustomer(J),onSuccess:()=>{W.fire({icon:"success",title:"Success!",text:"Customer updated successfully",timer:1500,showConfirmButton:!1}),u.invalidateQueries({queryKey:["customers"]}),i(null),v()},onError:J=>{W.fire({icon:"error",title:"Error!",text:J.response?.data?.message||"Failed to update customer"})}}),N=wt({mutationFn:J=>Bf.deleteCustomer(J),onSuccess:()=>{W.fire({icon:"success",title:"Success!",text:"Customer deleted successfully",timer:1500,showConfirmButton:!1}),u.invalidateQueries({queryKey:["customers"]})},onError:J=>{W.fire({icon:"error",title:"Error!",text:J.response?.data?.message||"Failed to delete customer"})}}),v=()=>{c({customer_name:"",customer_phone:"",customer_whatsapp:"",customer_address:"",customer_email:"",customer_password:"",customer_status:1,supplier_id:-1})},S=()=>{v(),n(!0)},E=async J=>{try{const P=await Bf.getCustomer(J.customer_id);c({customer_name:P.customer_name||"",customer_phone:P.customer_phone||"",customer_whatsapp:P.customer_whatsapp||"",customer_address:P.customer_address||"",customer_email:P.customer_email||"",customer_password:"",customer_status:typeof P.status=="string"?P.status==="Active"?1:2:P.status,supplier_id:P.affliate_supp_id||-1}),i(J)}catch(P){console.error("Error fetching customer:",P),c({customer_name:J.customer_name||"",customer_phone:J.customer_phone||"",customer_whatsapp:J.customer_whatsapp||"",customer_address:J.customer_address||"",customer_email:J.customer_email||"",customer_password:"",customer_status:typeof J.status=="string"?J.status==="Active"?1:2:J.status,supplier_id:J.affliate_supp_id||-1}),i(J)}},L=J=>{W.fire({title:"Delete!",text:"Do you want to delete this customer?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#dc2626",cancelButtonColor:"#6b7280",confirmButtonText:"Yes, delete it!"}).then(P=>{P.isConfirmed&&N.mutate(J)})},z=J=>{if(J.preventDefault(),!o.customer_name){W.fire({icon:"error",title:"Validation Error!",text:"Customer name is required"});return}const P={customer_name:o.customer_name||"",customer_phone:o.customer_phone||"",customer_whatsapp:o.customer_whatsapp||"",customer_address:o.customer_address||"",customer_email:o.customer_email||"",customer_password:o.customer_password||"",customer_status:o.customer_status||1,supplier_id:o.supplier_id===-1?null:o.supplier_id||null};r?b.mutate({...P,customer_id:r.customer_id}):j.mutate(P)},V=()=>{t(J=>({...J,page:1}))},te=()=>{t({page:1,per_page:s.per_page||10})},q=J=>{t(P=>({...P,page:J}))},B=J=>{t(P=>({...P,per_page:J,page:1}))};return A.useEffect(()=>{p()},[s]),e.jsxs("div",{className:"customers-page",children:[e.jsxs("div",{className:"page-header",children:[e.jsxs("h1",{children:[e.jsx("i",{className:"fa fa-user me-2"}),"Customers Report"]}),e.jsxs("button",{className:"btn btn-success",onClick:S,children:[e.jsx("i",{className:"fa fa-plus me-2"}),"Add Customer"]})]}),e.jsxs("div",{className:"panel filter-card",children:[e.jsx("div",{className:"panel-header",children:e.jsxs("h3",{children:[e.jsx("i",{className:"fa fa-filter me-2"}),"Filter Customers"]})}),e.jsx("div",{className:"panel-body",children:e.jsxs("div",{className:"filter-form-row",children:[e.jsxs("div",{className:"filter-form-group",children:[e.jsx("label",{htmlFor:"filter_name",className:"form-label",children:"Customer Name"}),e.jsx("input",{type:"text",className:"form-control",id:"filter_name",placeholder:"Search by name",value:s.filter_name||"",onChange:J=>t({...s,filter_name:J.target.value,page:1})})]}),e.jsxs("div",{className:"filter-form-group",children:[e.jsx("label",{htmlFor:"filter_phone",className:"form-label",children:"Phone Number"}),e.jsx("input",{type:"text",className:"form-control",id:"filter_phone",placeholder:"Search by phone",value:s.filter_phone||"",onChange:J=>t({...s,filter_phone:J.target.value,page:1})})]}),e.jsxs("div",{className:"filter-form-group",children:[e.jsx("label",{htmlFor:"filter_email",className:"form-label",children:"Email"}),e.jsx("input",{type:"text",className:"form-control",id:"filter_email",placeholder:"Search by email",value:s.filter_email||"",onChange:J=>t({...s,filter_email:J.target.value,page:1})})]}),e.jsxs("div",{className:"filter-form-group",children:[e.jsx("label",{htmlFor:"filter_status",className:"form-label",children:"Status"}),e.jsxs("select",{className:"form-control",id:"filter_status",value:s.filter_status||"",onChange:J=>t({...s,filter_status:J.target.value,page:1}),children:[e.jsx("option",{value:"",children:"All"}),e.jsx("option",{value:"1",children:"Active"}),e.jsx("option",{value:"2",children:"Inactive"})]})]}),e.jsxs("div",{className:"filter-form-group",children:[e.jsx("label",{htmlFor:"filter_supplier",className:"form-label",children:"Supplier"}),e.jsx(It,{options:[{value:"",label:"All Suppliers"},...h?.map(J=>({value:String(J.supp_id),label:J.supp_name}))||[]],value:s.filter_supplier?String(s.filter_supplier):"",onChange:J=>t({...s,filter_supplier:J?Number(J):void 0,page:1}),placeholder:"Select Supplier"})]}),e.jsxs("div",{className:"filter-button-group",children:[e.jsxs("button",{type:"button",onClick:V,className:"btn btn-primary",children:[e.jsx("i",{className:"fa fa-search me-2"}),"Search"]}),e.jsxs("button",{type:"button",onClick:te,className:"btn btn-secondary",children:[e.jsx("i",{className:"fa fa-refresh me-2"}),"Reset"]})]})]})})]}),e.jsxs("div",{className:"panel",children:[e.jsx("div",{className:"panel-header",children:e.jsxs("h3",{children:[e.jsx("i",{className:"fa fa-list me-2"}),"Customers"]})}),e.jsxs("div",{className:"panel-body",children:[e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-striped table-hover",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-center",children:[e.jsx("th",{children:"S#"}),e.jsx("th",{children:"Customer Name"}),e.jsx("th",{children:"Customer Phone"}),e.jsx("th",{children:"Customer Whatsapp"}),e.jsx("th",{children:"Customer Address"}),e.jsx("th",{children:"Customer Email"}),e.jsx("th",{children:"Password"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Affiliate"}),e.jsx("th",{children:"Action"})]})}),e.jsx("tbody",{children:y.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:10,className:"text-center",children:"No records found"})}):y.map((J,P)=>e.jsxs("tr",{children:[e.jsx("td",{className:"text-center",children:((g?.page||1)-1)*(g?.per_page||10)+P+1}),e.jsx("td",{className:"text-capitalize text-center",children:J.customer_name}),e.jsx("td",{className:"text-center",children:J.customer_phone||"-"}),e.jsx("td",{className:"text-center",children:J.customer_whatsapp||"-"}),e.jsx("td",{className:"text-capitalize text-center",children:J.customer_address||"-"}),e.jsx("td",{className:"text-center",children:J.customer_email||"-"}),e.jsx("td",{className:"text-center",children:J.cust_password||"-"}),e.jsx("td",{className:"text-center",children:e.jsx("span",{className:`badge ${J.status==="Active"||J.status===1?"badge-active":"badge-inactive"} rounded-pill`,children:J.status==="Active"||J.status===1?"Active":"Inactive"})}),e.jsx("td",{className:"text-center",children:J.affliate_supp_id&&J.affliate_supp_id>0?e.jsxs("span",{className:"badge badge-info",children:[e.jsx("i",{className:"fas fa-medal me-1"}),J.affiliate_supplier_name||`Supplier #${J.affliate_supp_id}`]}):"-"}),e.jsxs("td",{className:"text-center",style:{width:"150px"},children:[e.jsx("button",{type:"button",onClick:()=>E(J),className:"btn btn-sm btn-info me-2",children:e.jsx("i",{className:"fa fa-edit"})}),e.jsx("button",{type:"button",onClick:()=>L(J.customer_id),className:"btn btn-sm btn-danger",children:e.jsx("i",{className:"fa fa-trash"})})]})]},J.customer_id))})]})}),g&&g.total>0&&e.jsxs("div",{className:"pagination-container",children:[e.jsxs("div",{className:"pagination-info",children:["Showing ",(g.page-1)*g.per_page+1," to ",Math.min(g.page*g.per_page,g.total)," of ",g.total," entries"]}),e.jsxs("div",{className:"pagination-controls",children:[e.jsxs("select",{className:"form-control per-page-select",value:s.per_page||10,onChange:J=>B(Number(J.target.value)),children:[e.jsx("option",{value:"10",children:"10 per page"}),e.jsx("option",{value:"20",children:"20 per page"}),e.jsx("option",{value:"50",children:"50 per page"}),e.jsx("option",{value:"100",children:"100 per page"})]}),e.jsxs("div",{className:"pagination-buttons",children:[e.jsxs("button",{className:"btn btn-sm btn-secondary",onClick:()=>q(g.page-1),disabled:g.page<=1,children:[e.jsx("i",{className:"fa fa-chevron-left"})," Previous"]}),e.jsxs("span",{className:"page-info",children:["Page ",g.page," of ",g.total_pages]}),e.jsxs("button",{className:"btn btn-sm btn-secondary",onClick:()=>q(g.page+1),disabled:g.page>=g.total_pages,children:["Next ",e.jsx("i",{className:"fa fa-chevron-right"})]})]})]})]})]})]}),(a||r)&&e.jsx("div",{className:"modal-overlay",onClick:()=>{n(!1),i(null),v()},children:e.jsxs("div",{className:"modal-content",onClick:J=>J.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h3",{className:"modal-title",children:[e.jsx("i",{className:"fa fa-user me-2"}),r?"Update Customer":"Add Customer"]}),e.jsx("button",{type:"button",className:"btn-close",onClick:()=>{n(!1),i(null),v()},children:""})]}),e.jsx("div",{className:"modal-body",children:e.jsxs("form",{onSubmit:z,children:[e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:[e.jsx("i",{className:"fa fa-user me-2"}),"Customer Name:"]}),e.jsx("input",{type:"text",className:"form-control",name:"customer_name",value:o.customer_name||"",onChange:J=>c({...o,customer_name:J.target.value}),placeholder:"Customer Name",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:[e.jsx("i",{className:"fa fa-phone me-2"}),"Customer Phone:"]}),e.jsx("input",{type:"text",className:"form-control",name:"customer_phone",value:o.customer_phone||"",onChange:J=>c({...o,customer_phone:J.target.value}),placeholder:"Customer Phone"})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:[e.jsx("i",{className:"fa fa-whatsapp me-2"}),"Customer Whatsapp:"]}),e.jsx("input",{type:"text",className:"form-control",name:"customer_whatsapp",value:o.customer_whatsapp||"",onChange:J=>c({...o,customer_whatsapp:J.target.value}),placeholder:"Customer Whatsapp"})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:[e.jsx("i",{className:"fa fa-envelope me-2"}),"Customer Email:"]}),e.jsx("input",{type:"text",className:"form-control",name:"customer_email",value:o.customer_email||"",onChange:J=>c({...o,customer_email:J.target.value}),placeholder:"Customer Email"})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:[e.jsx("i",{className:"fa fa-address-card me-2"}),"Customer Address:"]}),e.jsx("input",{type:"text",className:"form-control",name:"customer_address",value:o.customer_address||"",onChange:J=>c({...o,customer_address:J.target.value}),placeholder:"Customer Address"})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:[e.jsx("i",{className:"fa fa-key me-2"}),"Customer Password:"]}),e.jsx("input",{type:"text",className:"form-control",name:"customer_password",value:o.customer_password||"",onChange:J=>c({...o,customer_password:J.target.value}),placeholder:"Customer Password (leave empty for default)"})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:[e.jsx("i",{className:"fa fa-key me-2"}),"Customer Status:"]}),e.jsxs("select",{className:"form-control",name:"customer_status",value:o.customer_status||1,onChange:J=>c({...o,customer_status:Number(J.target.value)}),children:[e.jsx("option",{value:"1",children:"Active"}),e.jsx("option",{value:"2",children:"Deactive"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:[e.jsx("i",{className:"fa fa-user me-2"}),"Affiliate Supplier:"]}),e.jsx(It,{options:[{value:"-1",label:"--Supplier--"},...h?.map(J=>({value:String(J.supp_id),label:J.supp_name}))||[]],value:o.supplier_id?String(o.supplier_id):"-1",onChange:J=>c({...o,supplier_id:J?Number(J):-1}),placeholder:"Select Supplier"})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>{n(!1),i(null),v()},children:"Close"}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:j.isPending||b.isPending,children:j.isPending||b.isPending?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fa fa-spinner fa-spin me-2"}),r?"Updating...":"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fa fa-save me-2"}),"Save"]})})]})]})})]})})]})}const Rd={async getCustomers(){const s=await Ne.post("/customer/pendingPayments.php",{action:"getCustomers"});return s.data.success?s.data.data:[]},async getPendingCustomers(s,t){const a=await Ne.post("/customer/pendingPayments.php",{action:"getPendingCustomers",customer_id:s,currency_id:t});return a.data.success?a.data.data:[]},async getCurrencies(s,t="all"){const a=await Ne.post("/customer/pendingPayments.php",{action:"getCurrencies",customer_id:s,type:t});return a.data.success?a.data.data:[]},async getTotalCharges(s,t){const a=await Ne.post("/customer/pendingPayments.php",{action:"getTotalCharges",customer_id:s,currency_id:t});if(a.data.success)return a.data.data;throw new Error(a.data.message||"Failed to fetch total charges")},async addPayment(s){const t=await Ne.post("/customer/pendingPayments.php",{action:"addPayment",...s});return{success:t.data.success,message:t.data.message||"Payment added successfully"}},async getCustomerInfo(s){const t=await Ne.post("/customer/ledger.php",{action:"getCustomerInfo",customer_id:s});if(t.data.success&&t.data.data)return t.data.data;throw new Error(t.data.message||"Customer not found")},async getCurrencyName(s){const t=await Ne.post("/customer/ledger.php",{action:"getCurrencyName",currency_id:s});if(t.data.success&&t.data.data)return t.data.data;throw new Error(t.data.message||"Currency not found")},async getLedger(s,t){const a=await Ne.post("/customer/ledger.php",{action:"getLedger",customer_id:s,currency_id:t});return a.data.success?a.data.data:[]}};function eR(){const s=Wa(),[t,a]=A.useState(""),[n,r]=A.useState(null),[i,o]=A.useState(!1),[c,u]=A.useState(null),[h,m]=A.useState(0),[p,y]=A.useState({payment_amount:0,remarks:"",account_id:void 0}),{data:g=[]}=Rt({queryKey:["customer-ledger-customers"],queryFn:()=>Rd.getCustomers(),staleTime:6e4,refetchOnWindowFocus:!1}),{data:j=[]}=Rt({queryKey:["customer-ledger-currencies",t],queryFn:()=>Rd.getCurrencies(t,t?"customer":"all"),enabled:!0,staleTime:6e4,refetchOnWindowFocus:!1}),{data:b=[],refetch:N}=Rt({queryKey:["customer-ledger-pending",t,n],queryFn:()=>Rd.getPendingCustomers(t,n),enabled:!!n,staleTime:1e4,refetchOnWindowFocus:!1}),{data:v=[]}=Rt({queryKey:["accounts-dropdown"],queryFn:async()=>{const P=await Ne.get("/payment/dropdowns.php?type=accounts");return P.data.success&&P.data.data?.accounts?P.data.data.accounts:[]},staleTime:6e4,refetchOnWindowFocus:!1});A.useEffect(()=>{j.length>0&&!n&&r(j[0].currencyID)},[j,n]);const S=wt({mutationFn:P=>Rd.addPayment(P),onSuccess:()=>{W.fire({icon:"success",title:"Success!",text:"Payment added successfully",timer:1500,showConfirmButton:!1}),o(!1),y({payment_amount:0,remarks:"",account_id:void 0}),s.invalidateQueries({queryKey:["customer-ledger-pending"]}),s.invalidateQueries({queryKey:["customer-ledger-customers"]})},onError:P=>{W.fire({icon:"error",title:"Error!",text:P.response?.data?.message||"Failed to add payment"})}}),E=P=>{a(P),r(null)},L=P=>{r(P?Number(P):null)},z=async P=>{u(P.main_customer);try{const K=await Rd.getTotalCharges(P.main_customer,n);m(K.total||0),o(!0)}catch{W.fire({icon:"error",title:"Error!",text:"Failed to load total charges"})}},V=P=>{if(P.preventDefault(),!p.payment_amount||p.payment_amount<=0){W.fire({icon:"error",title:"Validation Error!",text:"Payment amount must be greater than zero"});return}if(!p.account_id){W.fire({icon:"error",title:"Validation Error!",text:"Account is required"});return}if(!c||!n){W.fire({icon:"error",title:"Error!",text:"Missing customer or currency information"});return}S.mutate({customer_id:c,payment_amount:p.payment_amount,currency_id:n,account_id:p.account_id,remarks:p.remarks||""})},te=P=>new Intl.NumberFormat("en-US").format(P),q=()=>{const P=window.open("","_blank");if(!P)return;const K=j.find(X=>X.currencyID===n)?.currencyName||"";new Date().toLocaleString("en-US",{day:"2-digit",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"});const H=b.map((X,R)=>`
      <tr>
        <td>${R+1}</td>
        <td class="text-capitalize">${X.customer_name}</td>
        <td>${X.customer_email||"-"}</td>
        <td>${X.customer_phone||"-"}</td>
        <td>${te(X.total)}</td>
      </tr>
    `).join(""),se=b.reduce((X,R)=>X+R.total,0);P.document.write(`
      <!DOCTYPE html>
      <html>
      <head>
        <title>Customer Ledger Report</title>
        <style>
          body { font-family: Arial, sans-serif; padding: 20px; }
          h1 { text-align: center; }
          h5 { text-align: center; margin-top: -10px; }
          table { width: 100%; border-collapse: collapse; margin-top: 20px; }
          th { background: linear-gradient(to right, #004e92, #000428); color: white; padding: 12px; text-align: center; }
          td { padding: 12px; text-align: center; border-bottom: 1px solid #ddd; }
          .text-capitalize { text-transform: capitalize; }
          @media print {
            @page { margin: 1cm; }
            body { padding: 0; }
          }
        </style>
      </head>
      <body>
        <h1><i class="fa fa-home"></i> All Customer Ledger Report</h1>
        <h5>Currency: ${K}</h5>
        <table>
          <thead>
            <tr>
              <th>#</th>
              <th>Customer Name</th>
              <th>Customer Email</th>
              <th>Customer Phone</th>
              <th>Pending Amount</th>
            </tr>
          </thead>
          <tbody>
            ${H}
            <tr>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td><strong>${te(se)}</strong></td>
            </tr>
          </tbody>
        </table>
      </body>
      </html>
    `),P.document.close(),setTimeout(()=>{P.print()},250)},B=()=>{const P=j.find(Y=>Y.currencyID===n)?.currencyName||"",K=new Date().toLocaleString("en-US",{day:"2-digit",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"});let H=`Customer Ledger Report
`;H+=`Currency: ${P}
`,H+=`Date: ${K}

`,H+=`#,Customer Name,Customer Email,Customer Phone,Pending Amount
`,b.forEach((Y,$)=>{H+=`${$+1},"${Y.customer_name}","${Y.customer_email||""}","${Y.customer_phone||""}",${Y.total}
`});const se=b.reduce((Y,$)=>Y+$.total,0);H+=`Total,,,,${se}
`;const X=new Blob([H],{type:"text/csv;charset=utf-8;"}),R=document.createElement("a"),Q=URL.createObjectURL(X);R.setAttribute("href",Q),R.setAttribute("download",`Customer_Ledger_Report_${P}_${new Date().toISOString().split("T")[0]}.csv`),R.style.visibility="hidden",document.body.appendChild(R),R.click(),document.body.removeChild(R)},J=b.reduce((P,K)=>P+K.total,0);return e.jsxs("div",{className:"customer-ledger-page",children:[e.jsx("div",{className:"page-header",children:e.jsxs("h1",{children:[e.jsx("i",{className:"fa fa-money me-2"}),"Customer Payments & Ledger"]})}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("ul",{className:"nav nav-tabs card-header-tabs",children:e.jsx("li",{className:"nav-item",children:e.jsxs("a",{className:"nav-link active",children:[e.jsx("i",{className:"fa fa-money text-danger"})," All"]})})})}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"filter-row",children:[e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{htmlFor:"customer_id",className:"form-label",children:"Customer"}),e.jsx(It,{options:[{value:"",label:"--Select Customer--"},...g.map(P=>({value:String(P.customer_id),label:P.customer_name}))],value:t,onChange:E,placeholder:"Select Customer"})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{htmlFor:"currency_type",className:"form-label",children:"Currency"}),e.jsx(It,{options:j.map(P=>({value:String(P.currencyID),label:P.currencyName})),value:n?String(n):"",onChange:L,placeholder:"Select Currency"})]}),e.jsxs("div",{className:"filter-actions",children:[e.jsxs("button",{type:"button",className:"btn btn-danger btn-sm rounded-pill",onClick:q,children:[e.jsx("i",{className:"fa fa-print me-1"})," Print"]}),e.jsxs("button",{type:"button",className:"btn btn-customBlue btn-sm rounded-pill",onClick:B,children:[e.jsx("i",{className:"fa fa-file-excel-o me-1"})," Excel"]})]})]}),e.jsx("div",{className:"table-responsive mt-4",children:e.jsx("div",{id:"printThisArea",children:e.jsxs("table",{className:"table table-striped table-hover text-center",id:"mainTable",children:[e.jsx("thead",{className:"thead text-white",children:e.jsxs("tr",{children:[e.jsx("th",{children:"#"}),e.jsx("th",{children:"Customer Name"}),e.jsx("th",{children:"Customer Email"}),e.jsx("th",{children:"Customer Phone"}),e.jsx("th",{children:"Pending Amount"}),e.jsx("th",{"data-exclude":"true",id:"actionArea",children:"Action"})]})}),e.jsx("tbody",{children:b.length===0?e.jsx("tr",{children:e.jsxs("td",{colSpan:6,className:"text-center",style:{padding:"50px 20px",color:"#6b7280",fontFamily:"Montserrat, sans-serif"},children:[e.jsx("i",{className:"fa fa-inbox",style:{fontSize:"48px",marginBottom:"15px",display:"block",opacity:.5}}),e.jsx("div",{style:{fontSize:"16px",fontWeight:500},children:"No pending customers found"}),e.jsx("div",{style:{fontSize:"14px",marginTop:"8px",opacity:.7},children:"Select a customer and currency to view pending payments"})]})}):e.jsxs(e.Fragment,{children:[b.map((P,K)=>e.jsxs("tr",{children:[e.jsx("td",{children:K+1}),e.jsx("td",{className:"text-capitalize",children:P.customer_name}),e.jsx("td",{children:P.customer_email||"-"}),e.jsx("td",{children:P.customer_phone||"-"}),e.jsx("td",{children:te(P.total)}),e.jsxs("td",{"data-exclude":"true",className:"action-cell",children:[e.jsxs("a",{href:`/receipt?id=${P.main_customer}&curID=${n}`,target:"_self",className:"text-warning me-2",children:[e.jsx("i",{className:"fas fa-receipt"})," Make Receipt"]}),e.jsx("span",{className:"me-2",children:"|"}),e.jsxs("a",{href:`/ledger/customer/view?id=${P.main_customer}&curID=${n}`,className:"text-dark me-2",children:[e.jsx("i",{className:"fa fa-file"})," View Ledger"]}),e.jsx("span",{className:"me-2",children:"|"}),e.jsxs("a",{href:"#",onClick:H=>{H.preventDefault(),z(P)},className:"text-danger",children:[e.jsx("i",{className:"fa fa-cc-paypal"})," Make Payment"]})]})]},P.main_customer)),e.jsxs("tr",{children:[e.jsx("td",{}),e.jsx("td",{}),e.jsx("td",{}),e.jsx("td",{}),e.jsx("td",{children:e.jsx("strong",{children:te(J)})}),e.jsx("td",{"data-exclude":"true"})]})]})})]})})})]})]}),i&&e.jsx("div",{className:"modal-overlay",onClick:()=>{o(!1),y({payment_amount:0,remarks:"",account_id:void 0})},children:e.jsxs("div",{className:"modal-content",onClick:P=>P.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",children:"Customer Make Payment"}),e.jsx("button",{type:"button",className:"btn-close",onClick:()=>{o(!1),y({payment_amount:0,remarks:"",account_id:void 0})},children:""})]}),e.jsx("div",{className:"modal-body",children:e.jsxs("form",{onSubmit:V,children:[e.jsxs("div",{className:"form-group row",children:[e.jsxs("label",{className:"col-sm-4 col-form-label",children:[e.jsx("i",{className:"fa fa-dollar"}),"Total Charges"]}),e.jsx("div",{className:"col-sm-8",children:e.jsx("input",{type:"text",disabled:!0,className:"form-control",value:te(h)})})]}),e.jsxs("div",{className:"form-group row",children:[e.jsxs("label",{className:"col-sm-4 col-form-label",children:[e.jsx("i",{className:"fa fa-money"}),"Payment Amount"]}),e.jsx("div",{className:"col-sm-8",children:e.jsx("input",{type:"number",className:"form-control",value:p.payment_amount||"",onChange:P=>y({...p,payment_amount:Number(P.target.value)}),required:!0,min:"0.01",step:"0.01",placeholder:"Enter payment amount"})})]}),e.jsxs("div",{className:"form-group row",children:[e.jsxs("label",{className:"col-sm-4 col-form-label",children:[e.jsx("i",{className:"fa fa-comment"}),"Remarks"]}),e.jsx("div",{className:"col-sm-8",children:e.jsx("textarea",{className:"form-control",rows:4,value:p.remarks||"",onChange:P=>y({...p,remarks:P.target.value}),placeholder:"Enter remarks (optional)"})})]}),e.jsxs("div",{className:"form-group row",children:[e.jsxs("label",{className:"col-sm-4 col-form-label",children:[e.jsx("i",{className:"fa fa-bank"}),"Account"]}),e.jsx("div",{className:"col-sm-8",children:e.jsx(It,{options:[{value:"",label:"--Select Account--"},...v.map(P=>({value:String(P.account_ID),label:P.account_Name}))],value:p.account_id?String(p.account_id):"",onChange:P=>y({...p,account_id:P?Number(P):void 0}),placeholder:"Select Account"})})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-danger",onClick:()=>{o(!1),y({payment_amount:0,remarks:"",account_id:void 0})},children:"Close"}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:S.isPending,children:S.isPending?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fa fa-spinner fa-spin me-1"})," Saving..."]}):"Save"})]})]})})]})})]})}function tR(){const[s]=rc(),t=Vn(),a=Number(s.get("id")),n=Number(s.get("curID")),r=A.useRef(null),{data:i}=Rt({queryKey:["customer-info",a],queryFn:()=>Rd.getCustomerInfo(a),enabled:!!a}),{data:o}=Rt({queryKey:["currency-name",n],queryFn:()=>Rd.getCurrencyName(n),enabled:!!n}),{data:c=[],isLoading:u}=Rt({queryKey:["customer-ledger",a,n],queryFn:()=>Rd.getLedger(a,n),enabled:!!a&&!!n}),[h,m]=A.useState([]);A.useEffect(()=>{let v=0;const S=c.map(E=>(v+=parseFloat(String(E.Debit))||0,v-=parseFloat(String(E.Credit))||0,{...E,runningBalance:v}));m(S)},[c]);const p=c.reduce((v,S)=>(v.totalCharges+=parseFloat(String(S.Debit))||0,v.totalPaid+=parseFloat(String(S.Credit))||0,S.TRANSACTION_Type==="Refund"&&(v.totalRefund+=parseFloat(String(S.Credit))||0),v),{totalCharges:0,totalPaid:0,totalRefund:0}),y=p.totalCharges-p.totalPaid,g=v=>new Intl.NumberFormat("en-US").format(v),j=()=>{if(!r.current)return;const v=window.open("","_blank");if(!v){alert("Please allow popups to print");return}const S=r.current.innerHTML;v.document.write(`
      <!DOCTYPE html>
      <html>
        <head>
          <title>Customer Ledger</title>
          
      <style>
        @page {
          size: A4;
          margin: 12mm;
        }
        body {
          font-family: Arial, sans-serif;
          margin: 0;
          padding: 15px;
          font-size: 11px;
        }
        .ledger-header {
          display: flex;
          justify-content: space-between;
          margin-bottom: 20px;
        }
        .company-info {
          flex: 1;
        }
        .logo-section {
          display: inline-flex;
          align-items: center;
          margin-bottom: 12px;
          background: #000;
          padding: 10px 15px;
          border-radius: 5px;
        }
        .company-logo {
          height: auto;
          width: auto;
          max-height: 80px;
          max-width: 140px;
          object-fit: contain;
          display: block;
        }
        .company-details p {
          font-size: 10px;
          margin-bottom: 3px;
          line-height: 1.4;
        }
        .company-title {
          font-size: 13px;
          font-weight: bold;
          margin-bottom: 4px;
        }
        .customer-info-box {
          width: 280px;
          margin-left: 18px;
        }
        .section-title {
          font-size: 11px;
          color: #dc2626;
          font-weight: bold;
          margin-left: 20px;
          margin-top: 12px;
          margin-bottom: 4px;
        }
        .divider {
          border: none;
          width: 200px;
          border-bottom: 1px solid black;
          margin-left: 20px;
          margin-bottom: 6px;
        }
        .customer-info-box p {
          font-size: 10px;
          margin-bottom: 3px;
          margin-left: 20px;
          line-height: 1.5;
        }
        .date-text {
          font-size: 10px;
          margin-left: 20px;
          font-weight: bold;
        }
        .table-container {
          margin: 15px 0;
        }
        .ledger-table {
          width: 100%;
          border-collapse: collapse;
          font-size: 10px;
        }
        .ledger-table thead {
          background: #dc2626;
          color: #fff;
        }
        .ledger-table th {
          padding: 6px 5px;
          text-align: center;
          border: 1px solid #ddd;
          font-size: 10px;
          font-weight: 600;
        }
        .ledger-table tbody td {
          padding: 5px 4px;
          border: 1px solid #ddd;
          font-size: 10px;
        }
        .ledger-table tbody tr:nth-of-type(odd) {
          background-color: rgba(0, 0, 0, 0.05);
        }
        .ledger-table tbody tr.payment-row td {
          background-color: #6b7280;
          color: white;
        }
        .totals-section {
          margin-top: 15px;
          padding-left: 50%;
          background: #fff;
        }
        .total-row {
          display: flex;
          justify-content: space-between;
          margin-bottom: 4px;
          padding: 3px 0;
        }
        .total-label {
          font-weight: bold;
          font-size: 11px;
          color: #000;
        }
        .total-value {
          font-size: 11px;
          color: #000;
          font-weight: 600;
        }
        .total-row.outstanding {
          margin-top: 6px;
          padding-top: 6px;
        }
        .total-row.outstanding .total-label,
        .total-row.outstanding .total-value {
          font-size: 13px;
          font-weight: 700;
        }
        .totals-section hr {
          border: none;
          border-top: 1px solid #000;
          margin: 4px 0;
        }
        .text-capitalize {
          text-transform: capitalize;
        }
        .text-center {
          text-align: center;
        }
      </style>
    
        </head>
        <body>
          ${S}
        </body>
      </html>
    `),v.document.close(),v.onload=()=>{v.print()}},b=()=>{t("/ledger/customer")};if(!a||!n)return e.jsx("div",{className:"customer-ledger-view-page",children:e.jsx("div",{className:"panel",children:e.jsx("div",{className:"panel-body",children:e.jsx("div",{className:"alert alert-danger",children:"Invalid customer or currency ID"})})})});if(u)return e.jsx("div",{className:"customer-ledger-view-page",children:e.jsx("div",{className:"panel",children:e.jsx("div",{className:"panel-body text-center",children:e.jsx("div",{className:"spinner-border text-primary",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Loading..."})})})})});const N=new Date().toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"});return e.jsxs("div",{className:"customer-ledger-view-page",children:[e.jsxs("div",{className:"print-actions",children:[e.jsxs("button",{className:"btn btn-secondary",onClick:b,children:[e.jsx("i",{className:"fa fa-arrow-left me-2"}),"Back to Customer Ledger"]}),e.jsxs("button",{className:"btn btn-danger",onClick:j,children:[e.jsx("i",{className:"fa fa-print me-2"}),"Print Ledger"]})]}),e.jsxs("div",{className:"print-area",ref:r,children:[e.jsxs("div",{className:"ledger-header",children:[e.jsxs("div",{className:"company-info",children:[e.jsx("div",{className:"logo-section",children:e.jsx("img",{src:"/assets/logo-white.png",alt:"Company Logo",className:"company-logo"})}),e.jsxs("div",{className:"company-details",children:[e.jsx("p",{className:"company-title",children:e.jsx("b",{children:"Selab Nadiry Travel & Tourism"})}),e.jsx("p",{children:"Address: Frij Murar Shop# 15, Deira, Dubai"}),e.jsx("p",{children:"Contact: +971 4 298 4564, +971 58 514 0764"})]})]}),e.jsxs("div",{className:"customer-info-box",children:[e.jsx("h3",{className:"section-title",children:"Customer Information"}),e.jsx("hr",{className:"divider"}),e.jsxs("p",{children:["Name: ",e.jsx("span",{className:"text-capitalize",children:i?.customer_name||"N/A"})]}),e.jsxs("p",{children:["Email: ",e.jsx("span",{children:i?.customer_email||"Nill"})]}),e.jsxs("p",{children:["Phone: ",e.jsx("span",{children:i?.customer_phone||"Nill"})]}),e.jsxs("p",{children:["Currency: ",e.jsx("span",{children:o?.currencyName||"N/A"})]}),e.jsx("h3",{className:"section-title",children:"Date"}),e.jsx("hr",{className:"divider"}),e.jsx("h3",{className:"date-text",children:N})]})]}),e.jsx("div",{className:"table-container",children:e.jsxs("table",{className:"ledger-table table-striped table-hover table-bordered",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"S#"}),e.jsx("th",{children:"Transaction Type"}),e.jsx("th",{children:"Passenger Name"}),e.jsx("th",{children:"Date"}),e.jsx("th",{children:"Identification"}),e.jsx("th",{children:"Origin"}),e.jsx("th",{children:"Destination"}),e.jsx("th",{children:"Debit"}),e.jsx("th",{children:"Credit"}),e.jsx("th",{children:"Running Balance"})]})}),e.jsx("tbody",{children:h.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:10,className:"text-center",children:"No transactions found"})}):h.map((v,S)=>{const E=v.TRANSACTION_Type==="Payment";return e.jsxs("tr",{className:E?"payment-row":"",children:[e.jsx("td",{className:"text-center",children:S+1}),e.jsx("td",{className:"text-capitalize",children:v.TRANSACTION_Type}),e.jsx("td",{className:"text-capitalize",children:v.Passenger_Name||""}),e.jsx("td",{className:"text-center",children:v.date||""}),e.jsx("td",{children:v.Identification||""}),e.jsx("td",{className:"text-center",children:v.Orgin||""}),e.jsx("td",{className:"text-center",children:v.Destination||""}),e.jsx("td",{className:"text-center",children:g(v.Debit||0)}),e.jsx("td",{className:"text-center",children:g(v.Credit||0)}),e.jsx("td",{className:"text-center",children:g(v.runningBalance||0)})]},S)})})]})}),e.jsxs("div",{className:"totals-section",children:[e.jsxs("div",{className:"total-row",children:[e.jsx("p",{className:"total-label",children:"Total Charges:"}),e.jsxs("p",{className:"total-value",children:[g(p.totalCharges)," ",o?.currencyName||""]})]}),e.jsx("hr",{}),e.jsxs("div",{className:"total-row",children:[e.jsx("p",{className:"total-label",children:"Total Paid:"}),e.jsxs("p",{className:"total-value",children:[g(p.totalPaid)," ",o?.currencyName||""]})]}),e.jsxs("div",{className:"total-row",children:[e.jsx("p",{className:"total-label",children:"Total Refund:"}),e.jsxs("p",{className:"total-value",children:[g(p.totalRefund)," ",o?.currencyName||""]})]}),e.jsx("hr",{}),e.jsxs("div",{className:"total-row outstanding",children:[e.jsx("p",{className:"total-label",children:e.jsx("b",{children:"Outstanding Balance:"})}),e.jsx("p",{className:"total-value",children:e.jsxs("b",{children:[g(y)," ",o?.currencyName||""]})})]}),e.jsx("hr",{})]})]})]})}const Ft={async getLookups(){const s=await Ne.get("/residence/lookups.php");return s.data.data||s.data},async getResidences(s={}){const t=await Ne.get("/residence/list.php",{params:s});return{data:t.data.data||[],total:t.data.total||0,page:t.data.page||1,limit:t.data.limit||50,totalPages:t.data.totalPages||1}},async getResidence(s){const t=await Ne.get("/residence/get.php",{params:{id:s}});return t.data.data||t.data},async createResidence(s){const t=new FormData;return Object.keys(s).forEach(n=>{if(n!=="passportFile"&&n!=="photoFile"&&n!=="emiratesIdFrontFile"&&n!=="emiratesIdBackFile"){const r=s[n];r!=null&&(n==="passenger_name"?t.append("passengerName",r):n==="sale_price"?t.append("sale_amount",r.toString()):n==="saleCurID"?t.append("sale_currency_type",r.toString()):n==="InsideOutside"?t.append("insideOutside",r):n==="positionID"?t.append("position",r.toString()):n==="res_type"?t.append("res_type",r):n==="tawjeehIncluded"?t.append("tawjeeh_included",r?"1":"0"):n==="insuranceIncluded"?t.append("insurance_included",r?"1":"0"):t.append(n,r.toString()))}}),s.passportFile&&t.append("basicInfoFile",s.passportFile),s.photoFile&&t.append("basicInfoFilePhoto",s.photoFile),s.emiratesIdFrontFile&&t.append("basicInfoFileIDFront",s.emiratesIdFrontFile),s.emiratesIdBackFile&&t.append("basicInfoFileIDBack",s.emiratesIdBackFile),(await Ne.post("/residence/create.php",t,{headers:{"Content-Type":"multipart/form-data"}})).data},async updateStep(s,t){const a=new FormData;return a.append("residenceID",s.toString()),a.append("step",t.step.toString()),t.markComplete&&(a.append("markComplete","true"),a.append("Type","active")),Object.keys(t).forEach(r=>{if(r!=="step"&&r!=="markComplete"&&r!=="files"){const i=t[r];i!=null&&i!==""&&a.append(r,i.toString())}}),t.files&&Object.keys(t.files).forEach(r=>{t.files[r]&&a.append(r,t.files[r])}),(await Ne.post("/residence/update-step.php",a,{headers:{"Content-Type":"multipart/form-data"}})).data},async getStepData(s,t){const a=await Ne.post("/residence/get-step-data.php",{residenceID:s,action:t});return a.data.data||a.data},async getChargedEntity(s,t,a="load",n){const r=await Ne.post("/residence/get-charged-entity.php",{residenceID:s,type:t,handler:a,chargedON:n});return r.data.data||r.data},async getCurrencies(s,t){const a={};s&&(a.type=s),t&&(a.residenceID=t);const n=await Ne.get("/residence/get-currencies.php",{params:a});return n.data.data||n.data},async cancelResidence(s,t){return(await Ne.post("/residence/cancel.php",{residenceID:s,reason:t})).data},async getStats(){const s=await Ne.get("/residence/stats.php");return s.data.data||s.data},async updateTawjeeh(s){return(await Ne.post("/residence/update-tawjeeh.php",s)).data},async updateILOE(s){return(await Ne.post("/residence/update-iloe.php",s)).data},async makePayment(s){return(await Ne.post("/residence/payment.php",s)).data},async getPaymentHistory(s){const t=await Ne.get("/residence/payment-history.php",{params:{residenceID:s}});return t.data.success&&t.data.data?Array.isArray(t.data.data)?t.data.data:[]:Array.isArray(t.data)?t.data:t.data.data&&Array.isArray(t.data.data)?t.data.data:[]},async getFinancialBreakdown(s){const t=await Ne.get("/residence/financial-breakdown.php",{params:{residenceID:s}});return t.data.data||t.data},async getUnifiedOutstanding(s){const t=await Ne.get("/residence/unified-payment.php",{params:{residenceID:s}});return t.data.data||t.data},async processUnifiedPayment(s){return(await Ne.post("/residence/unified-payment.php",s)).data},async getAttachments(s){const t=await Ne.get("/residence/attachments.php",{params:{residenceID:s}});return console.log("getAttachments response:",t.data),t.data.success&&t.data.data?Array.isArray(t.data.data)?t.data.data:[]:Array.isArray(t.data)?t.data:t.data.data&&Array.isArray(t.data.data)?t.data.data:(console.warn("Unexpected response format:",t.data),[])},async uploadAttachment(s,t,a,n){const r=new FormData;r.append("residenceID",s.toString()),r.append("stepNumber",t.toString()),r.append("file",a),t===0&&n&&r.append("fileType",n.toString());try{console.log("Uploading file:",{residenceID:s,stepNumber:t,fileType:n,fileName:a.name,fileSize:a.size,fileType_mime:a.type});const i=await Ne.post("/residence/upload-attachment.php",r,{headers:{"Content-Type":"multipart/form-data"},timeout:6e4,onUploadProgress:c=>{if(c.total){const u=Math.round(c.loaded*100/c.total);console.log(`Upload progress: ${u}%`)}}});console.log("Upload API response status:",i.status),console.log("Upload API response data:",i.data),console.log("Upload API response headers:",i.headers);const o=i.data;if(!o)throw new Error("No response data from server");if(console.log("Checking response data:",{hasSuccess:"success"in o,successValue:o.success,successType:typeof o.success,successStrictEqual:o.success===!0,status:i.status}),o.success===!0||o.success==="true"||i.status===200&&o.success!==!1)return console.log("Upload successful, returning response data"),{success:!0,message:o.message||"Upload successful",...o};if(o.success===!1||o.success==="false")throw new Error(o.message||"Upload failed");if(console.warn("Response format unexpected, but status is 200. Assuming success."),i.status===200)return{success:!0,message:"Upload successful",...o};throw new Error("Unexpected response format: "+JSON.stringify(o))}catch(i){if(console.error("Upload service error:",i),console.error("Upload error details:",{message:i.message,response:i.response?.data,status:i.response?.status,statusText:i.response?.statusText,config:i.config}),i.response){const o=i.response.data?.message||i.response.data?.error||`Server error: ${i.response.status} ${i.response.statusText}`;throw new Error(o)}else throw i.request?new Error("No response from server. Check network connection."):new Error(i.message||"Failed to upload file")}},async deleteAttachment(s){return(await Ne.post("/residence/delete-attachment.php",{attachmentId:s})).data},async getBanks(){return(await Ne.get("/residence/get-banks.php")).data.data||[]},async generateLetter(s,t,a,n){const r={id:s,type:t};t==="salary_certificate"&&a&&(r.bank_id=a);let i="/residence/generate-letter.php";if(n){const c=new URLSearchParams(r);return new URLSearchParams(n).forEach((m,p)=>{c.append(p,m)}),i+="?"+c.toString(),(await Ne.get(i)).data}return(await Ne.get(i,{params:r})).data},async generateNOC(s){return(await Ne.post("/residence/generate-noc.php",{residenceID:s})).data},async generateSalaryCertificate(s){return(await Ne.post("/residence/generate-salary-certificate.php",{residenceID:s})).data},async updateILOEFine(s,t,a){return(await Ne.post("/residence/update-iloe-fine.php",{residenceID:s,fineAmount:t,remarks:a})).data},async deleteILOEFine(s){return(await Ne.post("/residence/delete-iloe-fine.php",{residenceID:s})).data},async payCancellationFee(s,t){return(await Ne.post("/residence/pay-cancellation-fee.php",{residenceID:s,...t})).data},async processCreditAdjustment(s,t){return(await Ne.post("/residence/credit-adjustment.php",{residenceID:s,...t})).data},async getFines(s){const t=await Ne.get("/residence/get-fines.php",{params:{residenceID:s}}),a=t.data.data||t.data;return{fines:a.fines||a,outstandingBalance:a.outstandingBalance||0,totalFine:a.totalFine||0,totalFinePaid:a.totalFinePaid||0}},async addFine(s){return(await Ne.post("/residence/add-fine.php",s)).data},async updateFine(s){return(await Ne.post("/residence/update-fine.php",s)).data},async deleteFine(s){return(await Ne.post("/residence/delete-fine.php",{residenceFineID:s})).data},async getCustomCharges(s){const t=await Ne.get("/residence/get-custom-charges.php",{params:{residenceID:s}});return t.data.data||t.data},async addCustomCharge(s){return(await Ne.post("/residence/add-custom-charge.php",s)).data},async deleteCustomCharge(s){return(await Ne.post("/residence/delete-custom-charge.php",{chargeID:s})).data},async performTawjeeh(s){return(await Ne.post("/residence/perform-tawjeeh.php",s)).data},async issueInsurance(s){const t=new FormData;return t.append("residenceID",s.residenceID.toString()),t.append("cost",s.cost.toString()),t.append("accountID",s.accountID.toString()),s.notes&&t.append("notes",s.notes),s.uid&&t.append("uid",s.uid),s.labourCard&&t.append("labourCard",s.labourCard),s.passport&&t.append("passport",s.passport),s.attachment&&t.append("attachment",s.attachment),(await Ne.post("/residence/issue-insurance.php",t,{headers:{"Content-Type":"multipart/form-data"}})).data},async getTasks(s){try{const t=await Ne.get("/residence/tasks.php",{params:s});if(console.log("getTasks response:",t),console.log("getTasks response.data:",t.data),console.log("getTasks response.data.success:",t.data?.success),console.log("getTasks response.data.residences:",t.data?.residences),console.log("getTasks response.data.stepCounts:",t.data?.stepCounts),t.data){if(t.data.success===!1)throw console.error("API returned error:",t.data.message),new Error(t.data.message||"Failed to load tasks");const a={residences:Array.isArray(t.data.residences)?t.data.residences:[],stepCounts:t.data.stepCounts||{}};return console.log("getTasks returning:",a),a}return console.log("No data in response, returning empty"),{residences:[],stepCounts:{}}}catch(t){throw console.error("getTasks error:",t),console.error("getTasks error.response:",t.response),t}},async getCompanies(){console.log("residenceService.getCompanies - Making request to /residence/get-companies.php");const s=await Ne.get("/residence/get-companies.php");console.log("residenceService.getCompanies - Response:",s),console.log("residenceService.getCompanies - Response.data:",s.data),console.log("residenceService.getCompanies - Response.data.data:",s.data.data);let t=s.data.data||s.data;return t&&typeof t=="object"&&!Array.isArray(t)&&(t=Object.values(t)),console.log("residenceService.getCompanies - Returning:",t),t},async setOfferLetterStatus(s,t){console.log("setOfferLetterStatus called:",{residenceID:s,status:t});try{const a=new URLSearchParams;a.append("action","setOfferLetterStatus"),a.append("id",s.toString()),a.append("value",t);const n=await Ne.post("/residence/tasks-controller.php",a,{headers:{"Content-Type":"application/x-www-form-urlencoded"}});if(console.log("setOfferLetterStatus response:",n),console.log("setOfferLetterStatus response.data:",n.data),n.data&&n.data.success===!1)throw new Error(n.data.message||"Failed to update offer letter status");return n.data}catch(a){throw console.error("setOfferLetterStatus error:",a),a.response&&console.error("Error response data:",a.response.data),a}},async setEVisaStatus(s,t){const a=new URLSearchParams;return a.append("action","seteVisaStatus"),a.append("id",s.toString()),a.append("value",t),(await Ne.post("/residence/tasks-controller.php",a,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})).data},async setHold(s,t){const a=new URLSearchParams;return a.append("action","setHold"),a.append("id",s.toString()),a.append("value",t?"1":"0"),(await Ne.post("/residence/tasks-controller.php",a,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})).data},async checkDocument(s,t,a,n){const r=await Ne.post("/residence/tasks-controller.php",{action:"checkDocument",id:s,documentNumber:t,passportNumber:a,nationality:n});return r.data.data||r.data},async moveResidenceToStep(s,t){const a=new URLSearchParams;return a.append("action","moveResidenceToStep"),a.append("residenceId",s.toString()),a.append("targetStep",t),(await Ne.post("/residence/tasks-controller.php",a,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})).data},async getRemarksHistory(s){return(await Ne.post("/residence/tasks-controller.php",{action:"getRemarksHistory",residence_id:s})).data.history||[]},async addRemarks(s,t,a){return(await Ne.post("/residence/tasks-controller.php",{action:"addRemarks",residence_id:s,remarks:t,step:a})).data},async processEVisaRejection(s,t,a){return(await Ne.post("/residence/tasks-controller.php",{action:"seteVisaRejected",id:s,refundAmount:t,refundAccount:a})).data},async getResidencePaymentReport(s,t){const a={currency_id:t};return s&&(a.customer_id=s),(await Ne.get("/residence/residence-payment-report.php",{params:a})).data.data||[]},async getCustomerCurrencies(s){const t={};return s&&(t.customer_id=s),(await Ne.get("/residence/customer-currencies.php",{params:t})).data.data||[]},async getFamilyTasks(s){try{const t={step:s.step};s.company_id&&(t.company_id=s.company_id),s.search&&(t.search=s.search);const a=await Ne.get("/residence/family-tasks.php",{params:t});if(a.data){if(a.data.success===!1)throw new Error(a.data.message||"Failed to load family tasks");return{families:Array.isArray(a.data.families)?a.data.families:[],stepCounts:a.data.stepCounts||{}}}return{families:[],stepCounts:{}}}catch(t){throw console.error("getFamilyTasks error:",t),t}},async moveFamilyToStep(s,t){const a=new URLSearchParams;return a.append("action","moveFamilyToStep"),a.append("familyResidenceId",s.toString()),a.append("targetStep",t),(await Ne.post("/residence/family-tasks-controller.php",a,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})).data},async getFamilyAttachments(s){const t=await Ne.get("/residence/family-attachments.php",{params:{residence_id:s}});return t.data.success&&t.data.data?Array.isArray(t.data.data)?t.data.data:[]:Array.isArray(t.data)?t.data:t.data.data&&Array.isArray(t.data.data)?t.data.data:[]},async uploadFamilyAttachment(s,t,a,n){const r=new FormData;r.append("residence_id",s.toString()),r.append("stepNumber",t.toString()),r.append("file",a),n&&r.append("fileType",n.toString());const i=await Ne.post("/residence/upload-family-attachment.php",r,{headers:{"Content-Type":"multipart/form-data"},timeout:6e4});if(i.data.success===!1)throw new Error(i.data.message||"Upload failed");return i.data},async deleteFamilyAttachment(s){return(await Ne.delete("/residence/family-attachments.php",{params:{id:s}})).data},async addFamilyResidence(s){const t=new FormData;return t.append("action","addFamilyResidence"),t.append("customer_id",s.customer_id.toString()),s.residence_id&&t.append("residence_id",s.residence_id.toString()),t.append("passenger_name",s.passenger_name),t.append("passport_number",s.passport_number),s.passport_expiry&&t.append("passport_expiry",s.passport_expiry),s.date_of_birth&&t.append("date_of_birth",s.date_of_birth),s.gender&&t.append("gender",s.gender),t.append("nationality",s.nationality.toString()),t.append("relation_type",s.relation_type),t.append("inside_outside",s.inside_outside),t.append("sale_price",s.sale_price.toString()),t.append("sale_currency",s.sale_currency),s.remarks&&t.append("remarks",s.remarks),s.documents&&(s.documents.passport_doc&&t.append("passport_doc",s.documents.passport_doc),s.documents.photo_doc&&t.append("photo_doc",s.documents.photo_doc),s.documents.id_front_doc&&t.append("id_front_doc",s.documents.id_front_doc),s.documents.id_back_doc&&t.append("id_back_doc",s.documents.id_back_doc),s.documents.birth_certificate_doc&&t.append("birth_certificate_doc",s.documents.birth_certificate_doc),s.documents.marriage_certificate_doc&&t.append("marriage_certificate_doc",s.documents.marriage_certificate_doc),s.documents.other_doc&&t.append("other_doc",s.documents.other_doc)),(await Ne.post("/residence/family-tasks-controller.php",t,{headers:{"Content-Type":"multipart/form-data"}})).data}},u0=({size:s="md",fullScreen:t=!1})=>{const a={sm:"w-6 h-6 border-2",md:"w-10 h-10 border-3",lg:"w-16 h-16 border-4"},n=e.jsx("div",{className:`${a[s]} border-gray-200 border-t-primary-red rounded-full animate-spin`});return t?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:n}):e.jsx("div",{className:"flex items-center justify-center p-4",children:n})};function K5(s){var t,a,n="";if(typeof s=="string"||typeof s=="number")n+=s;else if(typeof s=="object")if(Array.isArray(s)){var r=s.length;for(t=0;t<r;t++)s[t]&&(a=K5(s[t]))&&(n&&(n+=" "),n+=a)}else for(a in s)s[a]&&(n&&(n+=" "),n+=a);return n}function sR(){for(var s,t,a=0,n="",r=arguments.length;a<r;a++)(s=arguments[a])&&(t=K5(s))&&(n&&(n+=" "),n+=t);return n}const pr=({children:s,variant:t="primary",size:a="md",loading:n=!1,fullWidth:r=!1,className:i,disabled:o,...c})=>{const u="font-semibold rounded-lg transition-all duration-300 shadow-md hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",h={primary:"bg-gradient-to-r from-red-600 to-red-700 text-white hover:from-red-700 hover:to-red-800",secondary:"bg-gradient-to-r from-gray-600 to-gray-700 text-white hover:from-gray-700 hover:to-gray-800",success:"bg-gradient-to-r from-green-600 to-green-700 text-white hover:from-green-700 hover:to-green-800",danger:"bg-gradient-to-r from-red-500 to-red-600 text-white hover:from-red-600 hover:to-red-700",warning:"bg-gradient-to-r from-yellow-500 to-yellow-600 text-white hover:from-yellow-600 hover:to-yellow-700"},m={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"};return e.jsx("button",{className:sR(u,h[t],m[a],r&&"w-full",i),disabled:o||n,...c,children:n?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading..."]}):s})};function aR(){const s=Vn(),[t,a]=A.useState([]),[n,r]=A.useState(!0),[i,o]=A.useState(""),[c,u]=A.useState(1),[h,m]=A.useState(1),[p,y]=A.useState(0),g=50,[j,b]=A.useState({}),[N,v]=A.useState(""),[S,E]=A.useState(!1),[L,z]=A.useState(null),[V,te]=A.useState(null),[q,B]=A.useState(!1);A.useEffect(()=>{J()},[]),A.useEffect(()=>{P()},[c,j]);const J=async()=>{try{const $=await Ft.getLookups();z($)}catch($){console.error("Error loading lookups:",$)}},P=async()=>{r(!0),o("");try{const $=await Ft.getResidences({...j,search:N,page:c,limit:g});a($.data),y($.total),m($.totalPages)}catch($){o($.response?.data?.message||"An error occurred while loading residences")}finally{r(!1)}},K=async()=>{try{const $=await Ft.getStats();te($),B(!0)}catch($){console.error("Error loading stats:",$)}},H=$=>{$.preventDefault(),u(1),P()},se=($,me)=>{b(D=>({...D,[$]:me})),u(1)},X=()=>{b({}),v(""),u(1)},R=$=>$.cancelled?e.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded bg-red-600 text-white",children:"Cancelled"}):$.hold?e.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded bg-yellow-600 text-white",children:"On Hold"}):$.completedStep===10?e.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded bg-green-600 text-white",children:"Completed"}):e.jsxs("span",{className:"px-2 py-1 text-xs font-semibold rounded bg-blue-600 text-white",children:["Step ",$.completedStep,"/10"]}),Q=$=>$?new Date($).toLocaleDateString("en-GB"):"-",Y=($,me="AED")=>`${me} ${$.toLocaleString()}`;return n&&t.length===0?e.jsx("div",{className:"flex items-center justify-center h-screen",children:e.jsx(u0,{})}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-white",children:"Residence Report"}),e.jsxs("p",{className:"text-gray-400 mt-1",children:["Manage visa processing workflow - ",p," total records"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(pr,{onClick:K,variant:"secondary",children:[e.jsx("i",{className:"fa fa-chart-bar mr-2"}),"Statistics"]}),e.jsxs(pr,{onClick:()=>s("/residence/create"),children:[e.jsx("i",{className:"fa fa-plus-circle mr-2"}),"Add New Residence"]})]})]}),e.jsxs("div",{className:"card p-4",children:[e.jsxs("form",{onSubmit:H,className:"flex gap-3 items-end",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Search"}),e.jsx("input",{type:"text",className:"input-field w-full",placeholder:"Search by passenger name, passport, UID, Emirates ID, company...",value:N,onChange:$=>v($.target.value)})]}),e.jsxs(pr,{type:"submit",children:[e.jsx("i",{className:"fa fa-search mr-2"}),"Search"]}),e.jsxs(pr,{type:"button",variant:"secondary",onClick:()=>E(!S),children:[e.jsx("i",{className:`fa fa-filter mr-2 ${S?"text-primary-red":""}`}),S?"Hide":"Show"," Filters"]}),(Object.keys(j).length>0||N)&&e.jsxs(pr,{type:"button",variant:"danger",onClick:X,children:[e.jsx("i",{className:"fa fa-times mr-2"}),"Clear"]})]}),S&&L&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mt-4 pt-4 border-t border-gray-700",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Company"}),e.jsxs("select",{className:"input-field w-full",value:j.company||"",onChange:$=>se("company",$.target.value?parseInt($.target.value):void 0),children:[e.jsx("option",{value:"",children:"All Companies"}),L.companies.map($=>e.jsx("option",{value:$.company_id,children:$.company_name},$.company_id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Nationality"}),e.jsxs("select",{className:"input-field w-full",value:j.nationality||"",onChange:$=>se("nationality",$.target.value?parseInt($.target.value):void 0),children:[e.jsx("option",{value:"",children:"All Nationalities"}),L.nationalities.map($=>e.jsx("option",{value:$.nationality_id,children:$.nationality_name},$.nationality_id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Visa Type"}),e.jsxs("select",{className:"input-field w-full",value:j.visaType||"",onChange:$=>se("visaType",$.target.value?parseInt($.target.value):void 0),children:[e.jsx("option",{value:"",children:"All Visa Types"}),L.visaTypes.map($=>e.jsx("option",{value:$.visa_id,children:$.visa_name},$.visa_id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Completed Step"}),e.jsxs("select",{className:"input-field w-full",value:j.completedStep!==void 0?j.completedStep:"",onChange:$=>se("completedStep",$.target.value?parseInt($.target.value):void 0),children:[e.jsx("option",{value:"",children:"All Steps"}),[0,1,2,3,4,5,6,7,8,9,10].map($=>e.jsxs("option",{value:$,children:["Step ",$]},$))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Date From"}),e.jsx("input",{type:"date",className:"input-field w-full",value:j.dateFrom||"",onChange:$=>se("dateFrom",$.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Date To"}),e.jsx("input",{type:"date",className:"input-field w-full",value:j.dateTo||"",onChange:$=>se("dateTo",$.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Status"}),e.jsxs("select",{className:"input-field w-full",value:j.cancelled!==void 0?j.cancelled?"cancelled":"active":"",onChange:$=>{$.target.value==="cancelled"?se("cancelled",!0):$.target.value==="active"?se("cancelled",!1):se("cancelled",void 0)},children:[e.jsx("option",{value:"",children:"All"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Hold Status"}),e.jsxs("select",{className:"input-field w-full",value:j.hold!==void 0?j.hold?"hold":"active":"",onChange:$=>{$.target.value==="hold"?se("hold",!0):$.target.value==="active"?se("hold",!1):se("hold",void 0)},children:[e.jsx("option",{value:"",children:"All"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"hold",children:"On Hold"})]})]})]})]})]}),i&&e.jsx("div",{className:"bg-red-900 border border-red-700 text-white px-4 py-3 rounded mb-4",children:i}),q&&V&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-gray-800 rounded-lg max-w-6xl w-full max-h-screen overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Residence Statistics"}),e.jsx("button",{onClick:()=>B(!1),className:"text-gray-400 hover:text-white",children:e.jsx("i",{className:"fa fa-times text-2xl"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"card p-4 bg-blue-900",children:[e.jsx("div",{className:"text-gray-300 text-sm",children:"Total Residences"}),e.jsx("div",{className:"text-3xl font-bold text-white mt-2",children:V.total_count||0})]}),e.jsxs("div",{className:"card p-4 bg-yellow-900",children:[e.jsx("div",{className:"text-gray-300 text-sm",children:"Pending"}),e.jsx("div",{className:"text-3xl font-bold text-white mt-2",children:V.pending_count||0})]}),e.jsxs("div",{className:"card p-4 bg-green-900",children:[e.jsx("div",{className:"text-gray-300 text-sm",children:"Completed"}),e.jsx("div",{className:"text-3xl font-bold text-white mt-2",children:V.completed_count||0})]}),e.jsxs("div",{className:"card p-4 bg-red-900",children:[e.jsx("div",{className:"text-gray-300 text-sm",children:"Cancelled"}),e.jsx("div",{className:"text-3xl font-bold text-white mt-2",children:V.cancelled_count||0})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"card p-4",children:[e.jsx("div",{className:"text-gray-300 text-sm",children:"Total Sales"}),e.jsxs("div",{className:"text-2xl font-bold text-green-400 mt-2",children:["AED ",(V.total_sale_value||0).toLocaleString()]})]}),e.jsxs("div",{className:"card p-4",children:[e.jsx("div",{className:"text-gray-300 text-sm",children:"Total Costs"}),e.jsxs("div",{className:"text-2xl font-bold text-red-400 mt-2",children:["AED ",(V.total_cost_value||0).toLocaleString()]})]}),e.jsxs("div",{className:"card p-4",children:[e.jsx("div",{className:"text-gray-300 text-sm",children:"Total Profit"}),e.jsxs("div",{className:"text-2xl font-bold text-blue-400 mt-2",children:["AED ",(V.total_profit||0).toLocaleString()]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[V.by_nationality&&V.by_nationality.length>0&&e.jsxs("div",{className:"card p-4",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Top Nationalities"}),e.jsx("div",{className:"space-y-2",children:V.by_nationality.slice(0,10).map(($,me)=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-300",children:$.nationality||"Unknown"}),e.jsx("span",{className:"font-bold text-white",children:$.count})]},me))})]}),V.by_step&&V.by_step.length>0&&e.jsxs("div",{className:"card p-4",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"By Step"}),e.jsx("div",{className:"space-y-2",children:V.by_step.map(($,me)=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-gray-300",children:["Step ",$.step]}),e.jsx("span",{className:"font-bold text-white",children:$.count})]},me))})]})]})]})})}),e.jsxs("div",{className:"card overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"table-header",children:[e.jsx("th",{className:"px-4 py-3 text-left",children:"ID"}),e.jsx("th",{className:"px-4 py-3 text-left",children:"Passenger"}),e.jsx("th",{className:"px-4 py-3 text-left",children:"Customer"}),e.jsx("th",{className:"px-4 py-3 text-left",children:"Company"}),e.jsx("th",{className:"px-4 py-3 text-left",children:"Nationality"}),e.jsx("th",{className:"px-4 py-3 text-left",children:"Visa Type"}),e.jsx("th",{className:"px-4 py-3 text-left",children:"Sale Price"}),e.jsx("th",{className:"px-4 py-3 text-left",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left",children:"Date"}),e.jsx("th",{className:"px-4 py-3 text-center",children:"Actions"})]})}),e.jsx("tbody",{children:t.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:10,className:"px-4 py-8 text-center text-gray-400",children:"No residences found"})}):t.map($=>e.jsxs("tr",{className:"border-b border-gray-700 hover:bg-gray-700/50 transition-colors",children:[e.jsxs("td",{className:"px-4 py-3 text-gray-300",children:["#",$.residenceID]}),e.jsxs("td",{className:"px-4 py-3",children:[e.jsx("div",{className:"text-white font-medium",children:$.passenger_name}),e.jsx("div",{className:"text-xs text-gray-400",children:$.passportNumber||"-"})]}),e.jsx("td",{className:"px-4 py-3 text-gray-300",children:$.customer_name||"-"}),e.jsx("td",{className:"px-4 py-3 text-gray-300",children:$.company_name||"Individual"}),e.jsx("td",{className:"px-4 py-3 text-gray-300",children:$.nationality_name||"-"}),e.jsx("td",{className:"px-4 py-3 text-gray-300",children:$.visa_type_name||"-"}),e.jsx("td",{className:"px-4 py-3 text-gray-300",children:Y($.sale_price,$.sale_currency_symbol)}),e.jsx("td",{className:"px-4 py-3",children:R($)}),e.jsx("td",{className:"px-4 py-3 text-gray-300 text-sm",children:Q($.datetime)}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsx(pr,{size:"sm",onClick:()=>s(`/residence/${$.residenceID}`),children:e.jsx("i",{className:"fa fa-eye"})})})]},$.residenceID))})]})}),h>1&&e.jsxs("div",{className:"px-4 py-3 border-t border-gray-700 flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-400",children:["Showing ",(c-1)*g+1," to ",Math.min(c*g,p)," of ",p," results"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(pr,{size:"sm",variant:"secondary",onClick:()=>u($=>Math.max(1,$-1)),disabled:c===1,children:e.jsx("i",{className:"fa fa-chevron-left"})}),e.jsxs("span",{className:"px-4 py-2 text-white",children:["Page ",c," of ",h]}),e.jsx(pr,{size:"sm",variant:"secondary",onClick:()=>u($=>Math.min(h,$+1)),disabled:c===h,children:e.jsx("i",{className:"fa fa-chevron-right"})})]})]})]})]})}function nR({residence:s,onContinue:t,onAttachments:a,onTawjeeh:n,onILOE:r,onPaymentHistory:i,onLedger:o,onNOC:c,onSalaryCertificate:u,onPayTotal:h,onCancellationFee:m,onCreditAdjustment:p,onAddFine:y,onViewFine:g,onAddCustomCharge:j,onGenerateInvoice:b,onPerformTawjeeh:N,onIssueInsurance:v,onDeleteResidence:S,onCancelResidence:E,onRenew:L,isAdmin:z=!1}){const V=parseFloat(s.sale_price)||0,te=s.tawjeehIncluded===0?parseFloat(s.tawjeeh_amount)||150:0,q=s.insuranceIncluded===0?parseFloat(s.insuranceAmount)||126:0,B=parseFloat(s.iloe_fine)||0,J=parseFloat(s.total_Fine)||0,P=parseFloat(s.totalFinePaid)||0,K=parseFloat(s.custom_charges_total)||0,H=V+te+q+B+J+K,se=parseFloat(s.total_paid)||0,X=H-se-P,R=s.completedStep/10*100,Q=()=>s.completedStep===10?{class:"bg-success",text:"Completed"}:se>=V?{class:"bg-warning",text:"Pending Processing (Payment Complete)"}:{class:"bg-danger",text:"Pending Payment"},Y=B>0,$=s.current_status&&(s.current_status.toLowerCase()==="cancelled"||s.current_status.toLowerCase()==="replaced"||s.current_status.toLowerCase()==="cancelled & replaced"),me=Q();return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"card residence-card",style:{backgroundColor:"#2d353c",border:"1px solid #495057",borderRadius:"8px",marginBottom:"24px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)"},children:e.jsxs("div",{className:"card-body p-4",children:[e.jsxs("div",{className:"row mb-3 align-items-center",children:[e.jsxs("div",{className:"col-md-8",children:[e.jsx("h2",{className:"mb-2",style:{color:"#ffffff",fontWeight:"bold",fontSize:"1.75rem"},children:e.jsx("i",{style:{color:"#ffffff",fontWeight:"bold",fontStyle:"italic"},children:s.passenger_name})}),e.jsx("div",{className:`badge ${me.class} mb-2 me-1`,children:me.text}),s.current_status&&e.jsx("span",{className:"badge bg-secondary mb-2",children:s.current_status}),s.tawjeeh_completed&&s.tawjeeh_completed>0&&e.jsxs("span",{className:"badge bg-success mb-2 me-1",children:[e.jsx("i",{className:"fa fa-check"})," Tawjeeh"]}),s.insurance_completed&&s.insurance_completed>0&&e.jsxs("span",{className:"badge bg-info mb-2 me-1",children:[e.jsx("i",{className:"fa fa-shield"})," Insurance"]})]}),e.jsx("div",{className:"col-md-4 text-end",children:e.jsxs("div",{className:"d-flex justify-content-end align-items-center",children:[e.jsx("div",{className:"text-white-50 me-3",children:"Completion: "}),e.jsx("div",{className:"progress-container p-2",style:{minWidth:"100px"},children:e.jsxs("svg",{className:"progress-circle-old",viewBox:"0 0 100 100",style:{height:"80px",width:"80px"},children:[e.jsx("circle",{className:"progress-circle-bg-old",cx:"50",cy:"50",r:"45"}),e.jsx("circle",{className:"progress-circle-fill-old",cx:"50",cy:"50",r:"45",style:{strokeDasharray:`${R*2.827}, 282.7`,stroke:"#ff423e"}}),e.jsxs("text",{className:"progress-circle-text-old",x:"50",y:"50",dominantBaseline:"middle",textAnchor:"middle",children:[Math.round(R),"%"]})]})})]})})]}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-8",children:[e.jsx("div",{className:"row mb-3 border-bottom pb-2",children:e.jsxs("div",{className:"col-md-12",children:[e.jsx("h6",{className:"text-white-50 mb-1 small",children:"CUSTOMER INFORMATION"}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsx("strong",{className:"text-white",children:"Customer Name:"})," ",e.jsx("span",{className:"text-light",children:s.customer_name})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("strong",{className:"text-white",children:"Nationality:"})," ",e.jsx("span",{className:"text-light",children:s.nationality_name})]})]}),e.jsx("div",{className:"row mt-1",children:e.jsxs("div",{className:"col-md-6",children:[e.jsx("strong",{className:"text-white",children:"Status Type:"})," ",e.jsx("span",{className:"text-light",children:s.res_type||(s.insideOutside==="inside"?"mainland":"freezone")})]})}),e.jsx("div",{className:"row mt-1",children:e.jsxs("div",{className:"col-md-12",children:[e.jsx("strong",{className:"text-white",children:"Entry Date:"})," ",e.jsx("span",{className:"text-light",children:s.datetime?new Date(s.datetime).toLocaleDateString():"N/A"})]})})]})}),e.jsx("div",{className:"row mb-3 border-bottom pb-2",children:e.jsxs("div",{className:"col-md-12",children:[e.jsx("h6",{className:"text-white-50 mb-1 small",children:"COMPANY INFORMATION"}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsx("strong",{className:"text-white",children:"Company Name:"})," ",e.jsx("span",{className:"text-light",children:s.company_name||"null"})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("strong",{className:"text-white",children:"Company Number:"})," ",e.jsx("span",{className:"text-light",children:s.company_number||"null"})]})]})]})})]}),e.jsx("div",{className:"col-md-4 border-start border-dark",children:e.jsx("div",{className:"row",children:e.jsxs("div",{className:"col-md-12",children:[e.jsx("h6",{className:"text-white-50 mb-1 small",children:"FINANCIAL SUMMARY"}),e.jsxs("div",{className:"mb-2",children:[e.jsx("strong",{className:"text-white",children:"Sale Price:"})," ",e.jsxs("span",{className:"text-info",children:[V.toLocaleString()," ",s.sale_currency_name]})]}),s.tawjeehIncluded===0?e.jsxs("div",{className:"mb-2",children:[e.jsx("strong",{className:"text-white",children:"TAWJEEH:"})," ",e.jsxs("span",{className:"text-warning",children:[(s.tawjeeh_amount||150).toLocaleString()," AED (To be charged)"]})]}):e.jsxs("div",{className:"mb-2",children:[e.jsx("strong",{className:"text-white",children:"TAWJEEH:"})," ",e.jsx("span",{className:"text-success",children:"Included in sale price"})]}),s.insuranceIncluded===0?e.jsxs("div",{className:"mb-2",children:[e.jsx("strong",{className:"text-white",children:"ILOE Insurance:"})," ",e.jsxs("span",{className:"text-warning",children:[(s.insuranceAmount||126).toLocaleString()," AED (To be charged)"]})]}):e.jsxs("div",{className:"mb-2",children:[e.jsx("strong",{className:"text-white",children:"ILOE Insurance:"})," ",e.jsx("span",{className:"text-success",children:"Included in sale price"})]}),Y&&e.jsxs("div",{className:"mb-2",children:[e.jsx("strong",{className:"text-white",children:"ILOE Fine:"})," ",e.jsxs("span",{className:"text-danger",children:[B.toLocaleString()," AED"]})]}),J>0&&e.jsxs("div",{className:"mb-2",children:[e.jsx("strong",{className:"text-white",children:"E-Visa Fine:"})," ",e.jsxs("span",{className:"text-danger",children:[J.toLocaleString()," ",s.sale_currency_name]}),P>0&&e.jsxs("small",{className:"text-muted ms-2",children:["(Paid: ",P.toLocaleString(),")"]})]}),K>0&&e.jsxs("div",{className:"mb-2",children:[e.jsx("strong",{className:"text-white",children:"Custom Charges:"})," ",e.jsxs("span",{className:"text-warning",children:[K.toLocaleString()," ",s.sale_currency_name]})]}),e.jsxs("div",{className:"mb-2 border-top pt-2",children:[e.jsx("strong",{className:"text-white",children:"Total Invoice Amount:"})," ",e.jsxs("span",{className:"text-info fw-bold",children:[H.toLocaleString()," ",s.sale_currency_name]})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("strong",{className:"text-white",children:"Total Paid:"})," ",e.jsxs("span",{className:"text-info",children:[se.toLocaleString()," ",s.sale_currency_name]})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("strong",{className:"text-white fw-bold",children:"Total Remaining:"})," ",e.jsxs("span",{className:"text-danger fw-bold",children:[X.toLocaleString()," ",s.sale_currency_name]})]}),e.jsx("div",{className:"mt-3",children:e.jsxs("div",{className:"btn-group w-100",role:"group",children:[e.jsxs("button",{className:"btn btn-info",onClick:()=>t(s),children:[e.jsx("i",{className:`fa fa-${s.completedStep===10?"eye":"arrow-right"}`})," ",s.completedStep===10?"View":"Continue"]}),e.jsxs("button",{className:"btn btn-success",onClick:()=>a(s),children:[e.jsx("i",{className:"fa fa-paperclip"})," Attachments"]})]})})]})})})]}),e.jsx("div",{className:"row mt-3",children:e.jsx("div",{className:"col-12",children:e.jsx("div",{className:"d-flex flex-wrap gap-2",children:$?e.jsxs(e.Fragment,{children:[m&&e.jsxs("button",{className:"btn btn-danger",type:"button",onClick:()=>m(s),children:[e.jsx("i",{className:"fa fa-cc-paypal"})," Pay Cancellation Fee"]}),p&&e.jsxs("button",{className:"btn btn-success",type:"button",onClick:()=>p(s),children:[e.jsx("i",{className:"fa fa-exchange"})," Credit Adjustment"]}),e.jsxs("button",{className:"btn btn-warning",type:"button",title:"Add/Update ILOE Insurance Fine",onClick:()=>r(s),children:[e.jsx("i",{className:"fa fa-exclamation-triangle"})," ILOE Fine",Y?` (${B.toLocaleString()} AED)`:""]}),e.jsxs("button",{className:"btn btn-info",type:"button",disabled:!0,children:[e.jsx("i",{className:"fa fa-history"})," Payment History"]}),e.jsxs("button",{className:"btn btn-primary",type:"button",disabled:!0,children:[e.jsx("i",{className:"fa fa-file-text"})," NOC"]}),e.jsxs("button",{className:"btn btn-success",type:"button",disabled:!0,children:[e.jsx("i",{className:"fa fa-file-text"})," Salary Certificate"]}),e.jsx("div",{className:"btn-group",children:e.jsxs("button",{type:"button",className:"btn btn-danger dropdown-toggle","data-bs-toggle":"dropdown","aria-expanded":"false",disabled:!0,children:["More ",e.jsx("i",{className:"fa fa-caret-down","aria-hidden":"true"})]})})]}):e.jsxs(e.Fragment,{children:[e.jsxs("button",{className:"btn btn-primary text-white unified-payment-btn",type:"button",title:"Pay All Outstanding Charges",onClick:()=>h(s),children:[e.jsx("i",{className:"fa fa-credit-card"})," Pay Total Outstanding"]}),e.jsxs("button",{className:"btn btn-secondary text-white",type:"button",title:"Manage TAWJEEH Charges",onClick:()=>n(s),children:[e.jsx("i",{className:"fa fa-check-circle"})," TAWJEEH"]}),e.jsxs("button",{className:"btn btn-secondary text-white",type:"button",title:"Manage ILOE Insurance & Fines",onClick:()=>r(s),children:[e.jsx("i",{className:"fa fa-shield-alt"})," ILOE"]}),e.jsxs("button",{className:"btn btn-info",type:"button",onClick:()=>i(s),children:[e.jsx("i",{className:"fa fa-history"})," Payment History"]}),o&&e.jsxs("button",{className:"btn btn-secondary",type:"button",onClick:()=>o(s),children:[e.jsx("i",{className:"fa fa-book"})," Ledger"]}),e.jsxs("button",{onClick:D=>{D.preventDefault(),c(s)},className:"btn btn-primary",type:"button",children:[e.jsx("i",{className:"fa fa-file-text"})," NOC"]}),e.jsxs("button",{className:"btn btn-success",type:"button",onClick:()=>u(s),children:[e.jsx("i",{className:"fa fa-file-text"})," Salary Certificate"]}),s.current_status==="Active"&&s.completedStep===10&&L&&e.jsxs("button",{className:"btn btn-primary",type:"button",onClick:()=>L(s),children:[e.jsx("i",{className:"fa fa-refresh"})," Renew"]}),e.jsxs("div",{className:"btn-group",children:[e.jsxs("button",{type:"button",className:"btn btn-danger dropdown-toggle","data-bs-toggle":"dropdown","aria-expanded":"false",children:["More ",e.jsx("i",{className:"fa fa-caret-down","aria-hidden":"true"})]}),e.jsxs("ul",{className:"dropdown-menu dropdown-menu-end",children:[y&&e.jsx("li",{children:e.jsxs("button",{className:"dropdown-item",type:"button",onClick:()=>y(s),children:[e.jsx("i",{className:"fa fa-plus"})," Add Fine"]})}),g&&e.jsx("li",{children:e.jsxs("button",{className:"dropdown-item",type:"button",onClick:()=>g(s),children:[e.jsx("i",{className:"fa fa-eye"})," View Fine"]})}),j&&e.jsx("li",{children:e.jsxs("button",{className:"dropdown-item",type:"button",onClick:()=>j(s),children:[e.jsx("i",{className:"fa fa-plus-circle"})," Add Custom Charge"]})}),e.jsx("li",{children:e.jsx("hr",{className:"dropdown-divider"})}),b&&e.jsx("li",{children:e.jsxs("button",{className:"dropdown-item",type:"button",onClick:()=>b(s),children:[e.jsx("i",{className:"fa fa-file-pdf-o"})," Generate Invoice"]})}),e.jsx("li",{children:e.jsx("hr",{className:"dropdown-divider"})}),s.tawjeeh_completed&&s.tawjeeh_completed>0?e.jsx("li",{children:e.jsxs("button",{className:"dropdown-item text-success",type:"button",disabled:!0,children:[e.jsx("i",{className:"fa fa-check"})," Tawjeeh Completed"]})}):N&&e.jsx("li",{children:e.jsxs("button",{className:"dropdown-item",type:"button",onClick:()=>N(s),children:[e.jsx("i",{className:"fa fa-id-card"})," Perform Tawjeeh"]})}),s.insurance_completed&&s.insurance_completed>0?e.jsx("li",{children:e.jsxs("button",{className:"dropdown-item text-success",type:"button",disabled:!0,children:[e.jsx("i",{className:"fa fa-check"})," Insurance Issued"]})}):v&&e.jsx("li",{children:e.jsxs("button",{className:"dropdown-item",type:"button",onClick:()=>v(s),children:[e.jsx("i",{className:"fa fa-shield"})," Issue Insurance"]})}),e.jsx("li",{children:e.jsx("hr",{className:"dropdown-divider"})}),z&&S&&e.jsx("li",{children:e.jsxs("button",{className:"dropdown-item text-danger",type:"button",onClick:()=>{window.confirm(`Are you sure you want to delete residence for ${s.passenger_name}?`)&&S(s)},children:[e.jsx("i",{className:"fa fa-trash"})," Delete Residence"]})}),E&&e.jsx("li",{children:e.jsxs("button",{className:"dropdown-item",type:"button",onClick:()=>E(s),children:[e.jsx("i",{className:"fa fa-times"})," Cancel (& Replace if Company)"]})})]})]})]})})})})]})}),e.jsx("hr",{className:"reportLineBreaker"})]})}const ty={1:"Passport Copy",2:"Offer Letter",3:"Insurance",4:"Labour Card",5:"E-Visa",6:"Change Status",7:"Medical",8:"Emirates ID",9:"Visa Stamping",10:"Contract Submission",11:"Photo",12:"ID Front",13:"ID Back",14:"Other"},uw={1:2,2:3,3:4,4:5,5:6,6:7,7:8,8:9,9:10,0:1},h0=({isOpen:s,onClose:t,residence:a,onLoadAttachments:n,onUploadAttachment:r,onDeleteAttachment:i})=>{const[o,c]=A.useState([]),[u,h]=A.useState(!1),[m,p]=A.useState(!1),[y,g]=A.useState(null),[j,b]=A.useState("0");A.useEffect(()=>{s&&(a?.residenceID||a?.familyResidenceID)&&N()},[s,a]);const N=async()=>{const q=a?.familyResidenceID||a?.residenceID;if(!q){console.log("No residenceID found:",a);return}h(!0);try{if(n){const B=await n(q);console.log("Loaded attachments via callback:",B),c(Array.isArray(B)?B:[])}else{const B=await Ft.getAttachments(q);console.log("Loaded attachments via service:",B),c(Array.isArray(B)?B:[])}}catch(B){console.error("Error loading attachments:",B),console.error("Error response:",B.response),W.fire("Error","Failed to load attachments: "+(B.response?.data?.message||B.message),"error")}finally{h(!1)}},v=q=>{q.target.files&&q.target.files[0]&&g(q.target.files[0])},S=async()=>{const q=a?.familyResidenceID||a?.residenceID;if(!y||!q){W.fire("Error","Please select a file","error");return}p(!0);try{const B=parseInt(j),J=uw[j]||14;r?await r(q,B,y,J):await Ft.uploadAttachment(q,B,y,J),W.fire("Success","File uploaded successfully","success"),g(null),b("0");const P=document.getElementById("file-input");P&&(P.value=""),await N()}catch(B){console.error("Error uploading file:",B),W.fire("Error",B.response?.data?.message||"Failed to upload file","error")}finally{p(!1)}},E=async(q,B)=>{if((await W.fire({title:"Delete Attachment?",text:`Are you sure you want to delete "${B}"?`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"})).isConfirmed)try{i?await i(q):await Ft.deleteAttachment(q),W.fire("Deleted!","Attachment has been deleted.","success"),await N()}catch(P){console.error("Error deleting attachment:",P),W.fire("Error",P.response?.data?.message||"Failed to delete attachment","error")}},L=q=>{const B=typeof q=="number"?q===1?"pdf":q===11?"jpg":"pdf":q.toLowerCase();return["jpg","jpeg","png","gif","bmp","webp"].includes(B)?{icon:"fa-image",color:"#4CAF50"}:B==="pdf"||q===1?{icon:"fa-file-pdf",color:"#F44336"}:["doc","docx"].includes(B)?{icon:"fa-file-word",color:"#2196F3"}:["xls","xlsx"].includes(B)?{icon:"fa-file-excel",color:"#4CAF50"}:["zip","rar"].includes(B)?{icon:"fa-file-archive",color:"#FF9800"}:{icon:"fa-file",color:"#757575"}},z=q=>{if(typeof q=="number")return q===11;const B=q.toLowerCase();return["jpg","jpeg","png","gif","bmp","webp"].includes(B)},V=q=>typeof q=="number"?q===1:q.toLowerCase()==="pdf",te=q=>q.startsWith("http")?q:q.includes("family_residence_documents")?`${Ct.baseUrl}/${q}`:`${Ct.baseUrl}/${q}`;return s?e.jsx("div",{className:"modal-overlay",onClick:t,children:e.jsxs("div",{className:"modal-container",onClick:q=>q.stopPropagation(),style:{maxWidth:"900px",width:"90%"},children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h3",{children:[e.jsx("i",{className:"fa fa-paperclip me-2"}),"Attachments"]}),e.jsx("button",{className:"modal-close",onClick:t,children:e.jsx("i",{className:"fa fa-times"})})]}),e.jsxs("div",{className:"modal-body",style:{maxHeight:"70vh",overflowY:"auto"},children:[e.jsxs("div",{className:"mb-4 p-3",style:{background:"#f8f9fa",borderRadius:"8px",border:"1px solid #dee2e6"},children:[e.jsxs("h5",{className:"mb-3",children:[e.jsx("i",{className:"fa fa-upload me-2"}),"Upload New Attachment"]}),e.jsxs("div",{className:"row g-3",children:[e.jsxs("div",{className:"col-md-4",children:[e.jsx("label",{className:"form-label",children:"Step"}),e.jsxs("select",{className:"form-select",value:j,onChange:q=>b(q.target.value),children:[e.jsx("option",{value:"0",children:"Initial Documents"}),e.jsx("option",{value:"1",children:"Offer Letter"}),e.jsx("option",{value:"2",children:"Insurance"}),e.jsx("option",{value:"3",children:"Labour Card"}),e.jsx("option",{value:"4",children:"E-Visa"}),e.jsx("option",{value:"5",children:"Change Status"}),e.jsx("option",{value:"6",children:"Medical"}),e.jsx("option",{value:"7",children:"Emirates ID"}),e.jsx("option",{value:"8",children:"Visa Stamping"}),e.jsx("option",{value:"9",children:"Contract Submission"})]})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{className:"form-label",children:"File"}),e.jsx("input",{id:"file-input",type:"file",className:"form-control",onChange:v,accept:"image/*,.pdf,.doc,.docx,.xls,.xlsx,.zip,.rar"})]}),e.jsx("div",{className:"col-md-2 d-flex align-items-end",children:e.jsx("button",{className:"btn btn-primary w-100",onClick:S,disabled:!y||m,children:m?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fa fa-spinner fa-spin me-2"}),"Uploading..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fa fa-upload me-2"}),"Upload"]})})})]})]}),u?e.jsxs("div",{className:"text-center py-5",children:[e.jsx("i",{className:"fa fa-spinner fa-spin fa-2x"}),e.jsx("p",{className:"mt-2",children:"Loading attachments..."})]}):o.length===0?e.jsxs("div",{className:"alert alert-info text-center",children:[e.jsx("i",{className:"fa fa-info-circle me-2"}),"No attachments found"]}):e.jsx("div",{className:"row g-3",children:o.map(q=>{const B=L(q.file_type),J=te(q.file_path),P=z(q.file_type),K=V(q.file_type);return e.jsx("div",{className:"col-md-4 col-sm-6",children:e.jsxs("div",{className:"card h-100 shadow-sm",style:{borderRadius:"8px",overflow:"hidden"},children:[e.jsxs("div",{className:"position-relative",style:{height:"180px",background:P||K?"#f8f9fa":"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",overflow:"hidden"},onClick:()=>window.open(J,"_blank"),children:[P?e.jsx("img",{src:J,alt:q.file_name,style:{width:"100%",height:"100%",objectFit:"cover"},onError:H=>{const se=H.target;se.style.display="none";const X=se.parentElement;X&&(X.innerHTML=`<i class="fa ${B.icon}" style="font-size: 64px; color: ${B.color}"></i>`)}}):K?e.jsx("object",{data:`${J}#page=1&zoom=50`,type:"application/pdf",style:{width:"100%",height:"100%",border:"none",pointerEvents:"none"},title:q.file_name,children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",background:"#f8f9fa"},children:[e.jsx("i",{className:`fa ${B.icon}`,style:{fontSize:"64px",color:B.color,marginBottom:"10px"}}),e.jsx("span",{style:{fontSize:"12px",color:"#666"},children:"PDF Preview"})]})}):e.jsx("i",{className:`fa ${B.icon}`,style:{fontSize:"64px",color:B.color}}),e.jsx("span",{className:"badge bg-primary position-absolute top-0 start-0 m-2",style:{fontSize:"10px"},children:typeof q.file_type=="number"?ty[q.file_type]||"Other":ty[uw[q.step_number.toString()]||14]||"Other"})]}),e.jsxs("div",{className:"card-body p-3",children:[e.jsx("h6",{className:"card-title mb-2 text-truncate",title:q.file_name,style:{fontSize:"13px",fontWeight:"600"},children:q.file_name}),e.jsx("p",{className:"card-text mb-2",children:e.jsxs("small",{className:"text-muted",children:[e.jsx("i",{className:"fa fa-tag me-1"}),typeof q.file_type=="number"?ty[q.file_type]||"Other":q.file_type.toUpperCase()," File"]})}),q.uploaded_at&&e.jsx("p",{className:"card-text mb-2",children:e.jsxs("small",{className:"text-muted",children:[e.jsx("i",{className:"fa fa-clock me-1"}),new Date(q.uploaded_at).toLocaleDateString()]})}),e.jsxs("div",{className:"d-flex gap-2",children:[e.jsxs("button",{className:"btn btn-sm btn-outline-info flex-fill",onClick:()=>window.open(J,"_blank"),title:"View",children:[e.jsx("i",{className:"fa fa-eye me-1"}),"View"]}),e.jsxs("a",{href:J,download:!0,className:"btn btn-sm btn-outline-success flex-fill",title:"Download",children:[e.jsx("i",{className:"fa fa-download me-1"}),"Download"]}),e.jsx("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>E(q.attachment_id,q.file_name),title:"Delete",children:e.jsx("i",{className:"fa fa-trash"})})]})]})]})},q.attachment_id)})})]}),e.jsx("div",{className:"modal-footer",children:e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:t,children:"Close"})})]})}):null};function X5({isOpen:s,onClose:t,onSubmit:a,residence:n}){const[r,i]=A.useState(1),[o,c]=A.useState(150),[u,h]=A.useState(!1);A.useEffect(()=>{s&&n&&(i(n.tawjeehIncluded),c(n.tawjeeh_amount||150))},[s,n]);const m=async p=>{if(p.preventDefault(),!!n){h(!0);try{await a(n.residenceID,r,o),t()}catch(y){console.error("Failed to update TAWJEEH:",y)}finally{h(!1)}}};return!s||!n?null:e.jsx("div",{className:"modal-overlay",onClick:t,children:e.jsxs("div",{className:"modal-container",onClick:p=>p.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h3",{children:[e.jsx("i",{className:"fa fa-file-text"})," Manage TAWJEEH Service"]}),e.jsx("button",{className:"modal-close",onClick:t,children:e.jsx("i",{className:"fa fa-times"})})]}),e.jsxs("form",{onSubmit:m,children:[e.jsxs("div",{className:"modal-body",children:[e.jsxs("p",{className:"mb-3",children:["Managing TAWJEEH for: ",e.jsx("strong",{children:n.passenger_name})]}),e.jsxs("div",{className:"alert alert-info mb-3",style:{padding:"0.75rem",fontSize:"0.9rem"},children:[e.jsx("i",{className:"fa fa-info-circle me-2"}),e.jsx("strong",{children:"Current Status:"})," ",n.tawjeehIncluded===1?"Included in sale price":`Charged separately (${n.tawjeeh_amount||150} AED)`]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:e.jsx("strong",{children:"TAWJEEH Action:"})}),e.jsxs("div",{className:"form-check mb-2",children:[e.jsx("input",{className:"form-check-input",type:"radio",name:"tawjeehOption",id:"tawjeehIncluded",value:"1",checked:r===1,onChange:()=>i(1)}),e.jsxs("label",{className:"form-check-label",htmlFor:"tawjeehIncluded",children:[e.jsx("i",{className:"fa fa-check-circle me-2 text-success"}),"Include TAWJEEH in sale price (no additional charge)"]})]}),e.jsxs("div",{className:"form-check",children:[e.jsx("input",{className:"form-check-input",type:"radio",name:"tawjeehOption",id:"tawjeehSeparate",value:"0",checked:r===0,onChange:()=>i(0)}),e.jsxs("label",{className:"form-check-label",htmlFor:"tawjeehSeparate",children:[e.jsx("i",{className:"fa fa-exclamation-triangle me-2 text-warning"}),"Charge TAWJEEH separately"]})]})]}),r===0&&e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:e.jsx("strong",{children:"TAWJEEH Amount (AED):"})}),e.jsx("input",{type:"number",className:"form-control",value:o,onChange:p=>c(parseFloat(p.target.value)),min:"0",step:"0.01",required:!0}),e.jsx("small",{className:"text-muted",children:"Standard TAWJEEH fee is 150 AED"})]}),e.jsxs("div",{className:`alert ${r===1?"alert-success":"alert-warning"} mb-0`,style:{padding:"0.75rem",fontSize:"0.9rem"},children:[e.jsx("i",{className:`fa fa-${r===1?"check":"exclamation"}-circle me-2`}),e.jsx("strong",{children:"Summary:"})," ",r===1?"TAWJEEH will be included in the sale price. No additional charge will be applied.":`TAWJEEH will be charged separately at ${o} AED.`]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:t,disabled:u,children:[e.jsx("i",{className:"fa fa-times"})," Cancel"]}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:u,children:u?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-border spinner-border-sm me-2"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fa fa-save me-2"}),"Save Changes"]})})]})]})]})})}function G5({isOpen:s,onClose:t,onSubmit:a,residence:n}){const[r,i]=A.useState("insurance"),[o,c]=A.useState(1),[u,h]=A.useState(0),[m,p]=A.useState(0),[y,g]=A.useState(""),[j,b]=A.useState(!1);A.useEffect(()=>{s&&n&&(c(n.insuranceIncluded),h(n.insuranceAmount||0),p(n.iloe_fine||0),g(""))},[s,n]);const N=async v=>{if(v.preventDefault(),!!n){b(!0);try{await a(n.residenceID,o,u,m,y),t()}catch(S){console.error("Failed to update ILOE:",S)}finally{b(!1)}}};return!s||!n?null:e.jsx("div",{className:"modal-overlay",onClick:t,children:e.jsxs("div",{className:"modal-container",onClick:v=>v.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h3",{children:[e.jsx("i",{className:"fa fa-shield"})," Manage ILOE Insurance & Fine"]}),e.jsx("button",{className:"modal-close",onClick:t,children:e.jsx("i",{className:"fa fa-times"})})]}),e.jsxs("form",{onSubmit:N,children:[e.jsxs("div",{className:"modal-body",children:[e.jsxs("p",{className:"mb-3",children:["Managing ILOE for: ",e.jsx("strong",{children:n.passenger_name})]}),e.jsxs("ul",{className:"nav nav-tabs mb-3",role:"tablist",children:[e.jsx("li",{className:"nav-item",role:"presentation",children:e.jsxs("button",{className:`nav-link ${r==="insurance"?"active":""}`,type:"button",onClick:()=>i("insurance"),children:[e.jsx("i",{className:"fa fa-shield me-2"}),"Insurance"]})}),e.jsx("li",{className:"nav-item",role:"presentation",children:e.jsxs("button",{className:`nav-link ${r==="fine"?"active":""}`,type:"button",onClick:()=>i("fine"),children:[e.jsx("i",{className:"fa fa-exclamation-triangle me-2"}),"Fine"]})})]}),r==="insurance"&&e.jsxs("div",{className:"tab-content",children:[e.jsxs("div",{className:"alert alert-info mb-3",style:{padding:"0.75rem",fontSize:"0.9rem"},children:[e.jsx("i",{className:"fa fa-info-circle me-2"}),e.jsx("strong",{children:"Current Status:"})," ",n.insuranceIncluded===1?"Included in sale price":`Charged separately (${n.insuranceAmount||0} AED)`]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:e.jsx("strong",{children:"Insurance Action:"})}),e.jsxs("div",{className:"form-check mb-2",children:[e.jsx("input",{className:"form-check-input",type:"radio",name:"insuranceOption",id:"insuranceIncluded",value:"1",checked:o===1,onChange:()=>c(1)}),e.jsxs("label",{className:"form-check-label",htmlFor:"insuranceIncluded",children:[e.jsx("i",{className:"fa fa-check-circle me-2 text-success"}),"Include ILOE Insurance in sale price (no additional charge)"]})]}),e.jsxs("div",{className:"form-check",children:[e.jsx("input",{className:"form-check-input",type:"radio",name:"insuranceOption",id:"insuranceSeparate",value:"0",checked:o===0,onChange:()=>c(0)}),e.jsxs("label",{className:"form-check-label",htmlFor:"insuranceSeparate",children:[e.jsx("i",{className:"fa fa-exclamation-triangle me-2 text-warning"}),"Charge ILOE Insurance separately"]})]})]}),o===0&&e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:e.jsx("strong",{children:"Insurance Amount (AED):"})}),e.jsx("input",{type:"number",className:"form-control",value:u,onChange:v=>h(parseFloat(v.target.value)),min:"0",step:"0.01",required:!0})]})]}),r==="fine"&&e.jsxs("div",{className:"tab-content",children:[n.iloe_fine&&n.iloe_fine>0?e.jsxs("div",{className:"alert alert-danger mb-3",style:{padding:"0.75rem",fontSize:"0.9rem"},children:[e.jsx("i",{className:"fa fa-exclamation-circle me-2"}),e.jsx("strong",{children:"Current Fine:"})," ",n.iloe_fine," AED"]}):e.jsxs("div",{className:"alert alert-success mb-3",style:{padding:"0.75rem",fontSize:"0.9rem"},children:[e.jsx("i",{className:"fa fa-check-circle me-2"}),e.jsx("strong",{children:"No Fine:"})," No ILOE fine currently applied"]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:e.jsx("strong",{children:"ILOE Fine Amount (AED):"})}),e.jsx("input",{type:"number",className:"form-control",value:m,onChange:v=>p(parseFloat(v.target.value)),min:"0",step:"0.01",placeholder:"Enter fine amount (0 to remove fine)"}),e.jsx("small",{className:"text-muted",children:"Enter 0 to remove the fine"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:e.jsx("strong",{children:"Remarks:"})}),e.jsx("textarea",{className:"form-control",value:y,onChange:v=>g(v.target.value),rows:3,placeholder:"Enter reason for fine or adjustment..."})]})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:t,disabled:j,children:[e.jsx("i",{className:"fa fa-times"})," Cancel"]}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:j,children:j?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-border spinner-border-sm me-2"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fa fa-save me-2"}),"Save Changes"]})})]})]})]})})}function rR({isOpen:s,onClose:t,residence:a,onLoadHistory:n}){const[r,i]=A.useState([]),[o,c]=A.useState(!1);A.useEffect(()=>{s&&a&&u()},[s,a]);const u=async()=>{if(a){c(!0);try{const p=await n(a.residenceID);console.log("Payment history loaded:",p),i(Array.isArray(p)?p:[])}catch(p){console.error("Failed to load payment history:",p),console.error("Error details:",p.response?.data),i([])}finally{c(!1)}}};if(!s||!a)return null;const h=Array.isArray(r)?r:[],m=h.reduce((p,y)=>p+y.amount,0);return e.jsx("div",{className:"modal-overlay",onClick:t,children:e.jsxs("div",{className:"modal-container",onClick:p=>p.stopPropagation(),style:{maxWidth:"900px"},children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h3",{children:[e.jsx("i",{className:"fa fa-history"})," Payment History"]}),e.jsx("button",{className:"modal-close",onClick:t,children:e.jsx("i",{className:"fa fa-times"})})]}),e.jsx("div",{className:"modal-body",children:o?e.jsxs("div",{className:"text-center py-5",children:[e.jsx("div",{className:"spinner-border text-primary",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Loading..."})}),e.jsx("p",{className:"mt-2 text-muted",children:"Loading payment history..."})]}):r.length>0?e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"#"}),e.jsx("th",{children:"Date"}),e.jsx("th",{children:"Amount"}),e.jsx("th",{children:"Currency"}),e.jsx("th",{children:"Type"}),e.jsx("th",{children:"Account"}),e.jsx("th",{children:"Staff"}),e.jsx("th",{children:"Remarks"})]})}),e.jsx("tbody",{children:h.map((p,y)=>e.jsxs("tr",{children:[e.jsx("td",{style:{fontWeight:"600",color:"#6b7280"},children:y+1}),e.jsx("td",{children:new Date(p.payment_date).toLocaleDateString()}),e.jsx("td",{style:{fontWeight:"600",color:"#10b981"},children:p.amount.toLocaleString()}),e.jsx("td",{children:p.currency_name}),e.jsx("td",{children:e.jsx("span",{className:`badge bg-${p.payment_type==="residence"?"primary":p.payment_type==="tawjeeh"?"warning":p.payment_type==="insurance"?"info":p.payment_type==="insurance_fine"?"danger":"secondary"}`,children:p.payment_type?p.payment_type.replace("_"," ").toUpperCase():"RESIDENCE"})}),e.jsx("td",{children:p.account_name}),e.jsx("td",{children:p.staff_name}),e.jsx("td",{style:{fontSize:"0.875rem",color:"#6b7280"},children:p.remarks||"-"})]},p.payment_id||y))}),e.jsx("tfoot",{children:e.jsxs("tr",{children:[e.jsx("th",{colSpan:2,style:{textAlign:"right"},children:"Total Paid:"}),e.jsxs("th",{style:{color:"#10b981",fontSize:"1.125rem"},children:[m.toLocaleString()," AED"]}),e.jsx("th",{colSpan:5})]})})]})}):e.jsxs("div",{className:"text-center py-5",children:[e.jsx("i",{className:"fa fa-inbox fa-3x text-muted mb-3"}),e.jsx("p",{className:"text-muted",children:"No payment history found"})]})}),e.jsx("div",{className:"modal-footer",children:e.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:t,children:[e.jsx("i",{className:"fa fa-times"})," Close"]})})]})})}function iR({isOpen:s,onClose:t,onSubmit:a,residence:n,accounts:r}){const[i,o]=A.useState(null),[c,u]=A.useState(!1),[h,m]=A.useState({paymentAmount:"",accountID:"",remarks:"Unified payment for all outstanding charges"});A.useEffect(()=>{s&&n&&p()},[s,n]);const p=async()=>{if(n){u(!0);try{const g=await Ft.getUnifiedOutstanding(n.residenceID);o(g),g.total_outstanding>0&&m(j=>({...j,paymentAmount:g.total_outstanding.toFixed(2)}))}catch(g){console.error("Error loading breakdown:",g),W.fire("Error","Failed to load payment information","error")}finally{u(!1)}}},y=async g=>{if(g.preventDefault(),!n||!i)return;const j=parseFloat(h.paymentAmount);if(isNaN(j)||j<=0){W.fire("Validation Error","Please enter a valid payment amount","error");return}if(!h.accountID){W.fire("Validation Error","Please select a payment account","error");return}if(j>i.total_outstanding){W.fire("Validation Error","Payment amount cannot exceed total outstanding","warning");return}u(!0);try{await Ft.processUnifiedPayment({residenceID:n.residenceID,paymentAmount:j,accountID:parseInt(h.accountID),remarks:h.remarks}),W.fire("Success!","Unified payment processed successfully","success"),t(),a({})}catch(b){console.error("Error processing payment:",b),W.fire("Error",b.response?.data?.message||"Failed to process payment","error")}finally{u(!1)}};return!s||!n?null:e.jsx("div",{className:"modal-overlay",onClick:t,children:e.jsxs("div",{className:"modal-container",onClick:g=>g.stopPropagation(),style:{maxWidth:"900px"},children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h3",{children:[e.jsx("i",{className:"fa fa-credit-card"})," Pay Total Outstanding"]}),e.jsx("button",{className:"modal-close",onClick:t,"aria-label":"Close",children:e.jsx("i",{className:"fa fa-times"})})]}),e.jsxs("form",{onSubmit:y,children:[e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"alert alert-info d-flex align-items-start mb-3",children:[e.jsx("i",{className:"fa fa-info-circle me-2 mt-1"}),e.jsxs("div",{children:[e.jsx("strong",{children:"Unified Payment System"}),e.jsx("br",{}),e.jsx("small",{children:"This payment will cover all outstanding charges for this residence in a single transaction."})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"Passenger Name"}),e.jsx("input",{type:"text",className:"form-control",value:n.passenger_name,readOnly:!0,style:{background:"#f8f9fa"}})]}),e.jsxs("div",{className:"card mb-3 border-0 shadow-sm",children:[e.jsx("div",{className:"card-header text-white",style:{background:"#343a40"},children:e.jsxs("strong",{children:[e.jsx("i",{className:"fa fa-list me-2"}),"Payment Breakdown"]})}),e.jsx("div",{className:"card-body p-0",children:c?e.jsxs("div",{className:"text-center py-4",children:[e.jsx("i",{className:"fa fa-spinner fa-spin fa-2x text-primary"}),e.jsx("p",{className:"mt-2 text-muted",children:"Loading breakdown..."})]}):i?e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-sm table-bordered mb-0",children:[e.jsx("thead",{className:"table-light",children:e.jsxs("tr",{children:[e.jsx("th",{children:"Charge Type"}),e.jsx("th",{className:"text-end",children:"Amount (AED)"})]})}),e.jsxs("tbody",{children:[i.residence_outstanding>0&&e.jsxs("tr",{children:[e.jsxs("td",{children:[e.jsx("i",{className:"fa fa-home me-2 text-primary"}),"Residence Fee"]}),e.jsx("td",{className:"text-end",children:i.residence_outstanding.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})})]}),i.fine_outstanding>0&&e.jsxs("tr",{children:[e.jsxs("td",{children:[e.jsx("i",{className:"fa fa-exclamation-triangle me-2 text-warning"}),"E-Visa Fine"]}),e.jsx("td",{className:"text-end",children:i.fine_outstanding.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})})]}),i.tawjeeh_outstanding>0&&e.jsxs("tr",{children:[e.jsxs("td",{children:[e.jsx("i",{className:"fa fa-check-circle me-2 text-success"}),"TAWJEEH Service"]}),e.jsx("td",{className:"text-end",children:i.tawjeeh_outstanding.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})})]}),i.iloe_insurance_outstanding>0&&e.jsxs("tr",{children:[e.jsxs("td",{children:[e.jsx("i",{className:"fa fa-shield-alt me-2 text-info"}),"ILOE Insurance"]}),e.jsx("td",{className:"text-end",children:i.iloe_insurance_outstanding.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})})]}),i.iloe_fine_outstanding>0&&e.jsxs("tr",{children:[e.jsxs("td",{children:[e.jsx("i",{className:"fa fa-exclamation-circle me-2 text-danger"}),"ILOE Fine"]}),e.jsx("td",{className:"text-end",children:i.iloe_fine_outstanding.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})})]}),i.cancellation_outstanding>0&&e.jsxs("tr",{children:[e.jsxs("td",{children:[e.jsx("i",{className:"fa fa-times-circle me-2 text-danger"}),"Cancellation Fee"]}),e.jsx("td",{className:"text-end",children:i.cancellation_outstanding.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})})]}),i.custom_charges_outstanding>0&&e.jsxs("tr",{children:[e.jsxs("td",{children:[e.jsx("i",{className:"fa fa-plus-square me-2 text-warning"}),"Custom Charges"]}),e.jsx("td",{className:"text-end",children:i.custom_charges_outstanding.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})})]}),i.total_outstanding===0&&e.jsx("tr",{children:e.jsxs("td",{colSpan:2,className:"text-center text-success py-3",children:[e.jsx("i",{className:"fa fa-check-circle me-2"}),"No outstanding payments"]})})]}),e.jsx("tfoot",{className:"table-light",children:e.jsxs("tr",{children:[e.jsx("th",{children:"Total Outstanding"}),e.jsx("th",{className:"text-end",children:e.jsxs("strong",{children:[i.total_outstanding.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})," AED"]})})]})})]})}):e.jsx("div",{className:"text-center py-4 text-muted",children:"No breakdown available"})})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:e.jsx("strong",{children:"Total Outstanding Amount (AED)"})}),e.jsx("input",{type:"text",className:"form-control form-control-lg",value:i?i.total_outstanding.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):"0.00",readOnly:!0,style:{fontSize:"1.25rem",fontWeight:"bold",background:"#f8f9fa",color:"#000"}})]}),e.jsx("hr",{className:"my-3"}),e.jsxs("div",{className:"alert alert-info d-flex align-items-start mb-3",children:[e.jsx("i",{className:"fa fa-info-circle me-2 mt-1"}),e.jsxs("div",{children:[e.jsx("strong",{children:"Note:"})," This creates a single unified payment record that covers all outstanding charges for this residence. You can pay any amount up to the total outstanding."]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("label",{className:"form-label",children:["Amount to Pay Now (AED) ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"number",className:"form-control",value:h.paymentAmount,onChange:g=>m({...h,paymentAmount:g.target.value}),placeholder:"Enter amount to pay",required:!0,min:"0.01",step:"0.01",disabled:!i||i.total_outstanding===0}),e.jsx("small",{className:"form-text text-muted",children:"Enter the amount you want to pay now"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("label",{className:"form-label",children:["Payment Account ",e.jsx("span",{className:"text-danger",children:"*"})]}),!r||r.length===0?e.jsxs("div",{className:"alert alert-warning",children:[e.jsx("i",{className:"fa fa-exclamation-triangle me-2"}),"No accounts available. Please refresh the page or contact administrator."]}):e.jsxs("select",{className:"form-control",value:h.accountID,onChange:g=>m({...h,accountID:g.target.value}),required:!0,disabled:!i||i.total_outstanding===0,children:[e.jsx("option",{value:"",children:"Select Account"}),r.map(g=>e.jsx("option",{value:g.accountID,children:g.accountName},g.accountID))]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"Payment Remarks"}),e.jsx("textarea",{className:"form-control",value:h.remarks,onChange:g=>m({...h,remarks:g.target.value}),rows:3,placeholder:"Enter payment remarks (optional)",disabled:!i||i.total_outstanding===0})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:t,disabled:c,children:[e.jsx("i",{className:"fa fa-times me-1"})," Close"]}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:c||!i||i.total_outstanding===0,children:c?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fa fa-spinner fa-spin me-1"})," Processing..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fa fa-credit-card me-1"})," Process Payment"]})})]})]})]})})}const lR=({isOpen:s,onClose:t,title:a,children:n,size:r="md",showCloseButton:i=!0})=>{if(A.useEffect(()=>(s?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[s]),A.useEffect(()=>{const c=u=>{u.key==="Escape"&&t()};return s&&window.addEventListener("keydown",c),()=>{window.removeEventListener("keydown",c)}},[s,t]),!s)return null;const o={sm:"max-w-md",md:"max-w-2xl",lg:"max-w-4xl",xl:"max-w-6xl"};return e.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:t}),e.jsx("div",{className:"flex min-h-screen items-center justify-center p-4",children:e.jsxs("div",{className:`relative bg-white rounded-2xl shadow-2xl w-full ${o[r]} fade-in`,onClick:c=>c.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:a}),i&&e.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"p-6",children:n})]})})]})};function Q5({residence:s,onCancel:t,onClose:a}){const[n,r]=A.useState(0),[i,o]=A.useState(""),[c,u]=A.useState(!1),h=async m=>{if(m.preventDefault(),!i.trim()){alert("Please provide cancellation remarks");return}if(confirm(`Are you sure you want to cancel this residence?

Passenger: ${s.passenger_name}
Cancellation Charges: AED ${n}

This action cannot be undone.`)){u(!0);try{await t(n,i)}finally{u(!1)}}};return e.jsx(lR,{isOpen:!0,onClose:a,title:"Cancel Residence",children:e.jsx("form",{onSubmit:h,children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-gray-700 p-4 rounded",children:e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Residence ID:"}),e.jsxs("span",{className:"ml-2 text-white font-bold",children:["#",s.residenceID]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Passenger:"}),e.jsx("span",{className:"ml-2 text-white",children:s.passenger_name})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Customer:"}),e.jsx("span",{className:"ml-2 text-white",children:s.customer_name})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Current Step:"}),e.jsxs("span",{className:"ml-2 text-white",children:[s.completedStep,"/10"]})]})]})}),e.jsx("div",{className:"bg-red-900/30 border border-red-700 p-4 rounded",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("i",{className:"fa fa-exclamation-triangle text-red-400 mt-1"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-red-400 mb-1",children:"Warning"}),e.jsx("p",{className:"text-sm text-gray-300",children:"Cancelling this residence will permanently mark it as cancelled. This action cannot be undone. Any costs incurred up to this point will need to be processed."})]})]})}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Cancellation Charges (AED) ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsx("input",{type:"number",className:"input-field w-full",value:n,onChange:m=>r(parseFloat(m.target.value)||0),min:"0",step:"0.01",required:!0,placeholder:"Enter cancellation charges"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Enter the amount to charge the customer for cancellation"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Cancellation Remarks ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsx("textarea",{className:"input-field w-full",value:i,onChange:m=>o(m.target.value),required:!0,rows:4,placeholder:"Provide reason for cancellation..."}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Explain why this residence is being cancelled"})]}),e.jsxs("div",{className:"flex gap-3 justify-end pt-4 border-t border-gray-700",children:[e.jsx(pr,{type:"button",variant:"secondary",onClick:a,disabled:c,children:"Cancel"}),e.jsxs(pr,{type:"submit",variant:"danger",disabled:c,children:[e.jsx("i",{className:"fa fa-times-circle mr-2"}),c?"Cancelling...":"Confirm Cancellation"]})]})]})})})}function J5({isOpen:s,onClose:t,onSubmit:a,residence:n,accounts:r,currencies:i,fineRecord:o,mode:c="add"}){const[u,h]=A.useState({fineAmount:"",accountID:"",currencyID:""}),[m,p]=A.useState(!1),[y,g]=A.useState({});A.useEffect(()=>{s&&(h(c==="edit"&&o?{fineAmount:o.fineAmount.toString(),accountID:o.accountID?.toString()||"",currencyID:o.currencyID?.toString()||""}:{fineAmount:"",accountID:"",currencyID:""}),g({}))},[s,c,o]);const j=async b=>{b.preventDefault();const N={};if((!u.fineAmount||parseFloat(u.fineAmount)<=0)&&(N.fineAmount="Fine amount is required and must be greater than 0"),u.accountID||(N.accountID="Account is required"),Object.keys(N).length>0){g(N);return}p(!0);try{const v={fineAmount:parseFloat(u.fineAmount),accountID:parseInt(u.accountID)};u.currencyID&&(v.currencyID=parseInt(u.currencyID)),c==="edit"&&o?v.residenceFineID=o.residenceFineID:v.residenceID=n.residenceID,await a(v),t()}catch(v){console.error("Error submitting fine:",v)}finally{p(!1)}};return s?e.jsx("div",{className:"modal-overlay",onClick:t,children:e.jsxs("div",{className:"modal-container",onClick:b=>b.stopPropagation(),style:{maxWidth:"600px"},children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h3",{children:[e.jsx("i",{className:"fa fa-money-bill me-2"}),c==="edit"?"Edit Fine":"Add New Fine"]}),e.jsx("button",{className:"modal-close",onClick:t,children:e.jsx("i",{className:"fa fa-times"})})]}),e.jsxs("form",{onSubmit:j,children:[e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"mb-3",children:[e.jsxs("label",{className:"form-label",children:["Residence ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"text",className:"form-control",value:`${n.passenger_name} (${n.passportNumber})`,disabled:!0})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("label",{className:"form-label",children:["Fine Amount ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"number",step:"0.01",min:"0.01",className:`form-control ${y.fineAmount?"is-invalid":""}`,value:u.fineAmount,onChange:b=>{h(N=>({...N,fineAmount:b.target.value})),g(N=>({...N,fineAmount:""}))},required:!0}),y.fineAmount&&e.jsx("div",{className:"invalid-feedback",children:y.fineAmount})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("label",{className:"form-label",children:["Account ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("select",{className:`form-select ${y.accountID?"is-invalid":""}`,value:u.accountID,onChange:b=>{h(N=>({...N,accountID:b.target.value})),g(N=>({...N,accountID:""}))},required:!0,children:[e.jsx("option",{value:"",children:"Select Account"}),r.map(b=>e.jsx("option",{value:b.accountID,children:b.accountName},b.accountID))]}),y.accountID&&e.jsx("div",{className:"invalid-feedback",children:y.accountID})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"Currency (Optional)"}),e.jsxs("select",{className:"form-select",value:u.currencyID,onChange:b=>h(N=>({...N,currencyID:b.target.value})),children:[e.jsx("option",{value:"",children:"Select Currency"}),i.map(b=>e.jsx("option",{value:b.currencyID,children:b.currencyName},b.currencyID))]})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:t,disabled:m,children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:m,children:m?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fa fa-spinner fa-spin me-2"}),c==="edit"?"Updating...":"Adding..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fa fa-check me-2"}),c==="edit"?"Update Fine":"Add Fine"]})})]})]})]})}):null}function oR({isOpen:s,onClose:t,residence:a,onAddFine:n,refreshTrigger:r,accounts:i,currencies:o,onRefresh:c}){const[u,h]=A.useState([]),[m,p]=A.useState(0),[y,g]=A.useState(!1),[j,b]=A.useState(!1),[N,v]=A.useState(null);A.useEffect(()=>{s&&a&&S()},[s,a,r]);const S=async()=>{if(a){g(!0);try{const V=await Ft.getFines(a.residenceID);if(console.log("Fines data loaded:",V),Array.isArray(V)){h(V);const te=V.reduce((q,B)=>q+parseFloat(B.fineAmount||0),0);p(te)}else h(Array.isArray(V.fines)?V.fines:[]),p(V.outstandingBalance||0)}catch(V){console.error("Failed to load fines:",V),console.error("Error details:",V.response?.data||V.message),h([]),p(0)}finally{g(!1)}}},E=V=>{if(!V.accountID){const te=i.find(q=>q.accountName===V.account_Name);V.accountID=te?.accountID}v(V),b(!0)},L=async V=>{if((await W.fire({title:"Delete Fine?",text:`Are you sure you want to delete this fine of ${V.fineAmount.toLocaleString()} ${V.currencyName}?`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel",customClass:{container:"swal2-nested-modal"},zIndex:3e4})).isConfirmed)try{await Ft.deleteFine(V.residenceFineID),W.fire({title:"Deleted!",text:"Fine has been deleted.",icon:"success",zIndex:3e4}),S(),c&&c()}catch(q){W.fire({title:"Error",text:q.response?.data?.message||"Failed to delete fine",icon:"error",zIndex:3e4})}},z=async V=>{if(!V.residenceFineID)throw new Error("Fine ID is required for update");try{await Ft.updateFine({residenceFineID:V.residenceFineID,fineAmount:V.fineAmount,accountID:V.accountID,currencyID:V.currencyID}),W.fire({title:"Success",text:"Fine updated successfully",icon:"success",zIndex:3e4}),b(!1),v(null),S(),c&&c()}catch(te){throw W.fire({title:"Error",text:te.response?.data?.message||"Failed to update fine",icon:"error",zIndex:3e4}),te}};return!s||!a?null:e.jsxs(e.Fragment,{children:[j&&e.jsx(J5,{isOpen:j,onClose:()=>{b(!1),v(null)},onSubmit:z,residence:a,accounts:i,currencies:o,fineRecord:N,mode:"edit"}),e.jsx("div",{className:"modal-overlay",onClick:t,children:e.jsxs("div",{className:"modal-container",onClick:V=>V.stopPropagation(),style:{maxWidth:"1000px"},children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h3",{children:[e.jsx("i",{className:"fa fa-money-bill"})," Residence Fine Details"]}),e.jsx("button",{className:"modal-close",onClick:t,children:e.jsx("i",{className:"fa fa-times"})})]}),e.jsxs("div",{className:"modal-body",children:[e.jsx("div",{className:"bg-dark text-white p-3 mb-3 rounded",style:{backgroundColor:"#1a1a1a !important"},children:e.jsxs("div",{className:"d-flex align-items-center justify-content-between",children:[e.jsxs("div",{children:[e.jsx("h6",{className:"mb-1 text-white",children:"Outstanding Fine Balance"}),e.jsx("div",{className:"fs-5 fw-bold text-white",children:m>0?e.jsxs("span",{className:"text-warning",children:[m.toLocaleString()," AED"]}):e.jsx("span",{className:"text-success",children:"No outstanding fines"})})]}),e.jsxs("button",{className:"btn btn-primary btn-sm",onClick:S,children:[e.jsx("i",{className:"fa fa-refresh me-1"})," Refresh"]})]})}),e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-bordered table-hover",children:[e.jsx("thead",{className:"bg-primary text-white",children:e.jsxs("tr",{children:[e.jsx("th",{width:"5%",children:"#"}),e.jsx("th",{width:"8%",children:"Type"}),e.jsx("th",{width:"15%",children:"Fine Amount"}),e.jsx("th",{width:"15%",children:"Account"}),e.jsx("th",{width:"15%",children:"Date"}),e.jsx("th",{width:"15%",children:"Charged By"}),e.jsx("th",{width:"12%",children:"Receipt"}),e.jsx("th",{width:"15%",className:"text-center",children:"Actions"})]})}),e.jsx("tbody",{children:y?e.jsx("tr",{children:e.jsxs("td",{colSpan:8,className:"text-center py-4",children:[e.jsx("span",{className:"spinner-border spinner-border-sm me-2"}),"Loading..."]})}):u.length===0?e.jsx("tr",{children:e.jsxs("td",{colSpan:8,className:"text-center py-4",children:[e.jsx("i",{className:"fa fa-info-circle me-2"}),"No fine records found"]})}):u.map((V,te)=>e.jsxs("tr",{className:"align-middle",children:[e.jsx("td",{className:"text-center",children:te+1}),e.jsx("td",{children:e.jsx("span",{className:"badge bg-warning text-dark",children:"Fine"})}),e.jsxs("td",{children:[V.fineAmount.toLocaleString()," ",e.jsx("small",{className:"text-primary",children:V.currencyName})]}),e.jsx("td",{children:V.account_Name}),e.jsx("td",{children:V.residenceFineDate}),e.jsx("td",{children:V.staff_name}),e.jsx("td",{className:"text-center",children:V.docName?e.jsx("div",{className:"btn-group",children:e.jsxs("a",{href:`/api/residence/download-fine-doc.php?id=${V.residenceFineID}&type=2`,className:"btn btn-sm btn-outline-info",target:"_blank",rel:"noopener noreferrer",children:[e.jsx("i",{className:"fa fa-download me-1"}),"Download"]})}):e.jsxs("button",{className:"btn btn-sm btn-outline-primary",disabled:!0,children:[e.jsx("i",{className:"fa fa-upload me-1"}),"Upload"]})}),e.jsx("td",{className:"text-center",children:e.jsxs("div",{className:"btn-group",children:[e.jsxs("button",{className:"btn btn-sm btn-outline-warning",title:"Edit Fine",onClick:()=>E(V),children:[e.jsx("i",{className:"fa fa-edit me-1"}),"Edit"]}),e.jsxs("button",{className:"btn btn-sm btn-outline-danger",title:"Delete Fine",onClick:()=>L(V),children:[e.jsx("i",{className:"fa fa-trash me-1"}),"Delete"]})]})})]},V.residenceFineID))})]})})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:t,children:[e.jsx("i",{className:"fa fa-times me-1"})," Close"]}),e.jsxs("button",{type:"button",className:"btn btn-primary",onClick:n,children:[e.jsx("i",{className:"fa fa-plus me-1"})," Add New Fine"]})]})]})})]})}function cR({isOpen:s,onClose:t,residence:a,accounts:n,onChargeAdded:r}){const[i,o]=A.useState("add"),[c,u]=A.useState(""),[h,m]=A.useState(""),[p,y]=A.useState(""),[g,j]=A.useState(""),[b,N]=A.useState(""),[v,S]=A.useState([]),[E,L]=A.useState(!1),[z,V]=A.useState(!1);A.useEffect(()=>{s&&a&&i==="view"&&q()},[s,a,i]);const te=()=>{const H=parseFloat(h)||0;return(parseFloat(p)||0)-H},q=async()=>{if(a){V(!0);try{const H=await Ft.getCustomCharges(a.residenceID);S(H.charges||[])}catch(H){console.error("Failed to load charges:",H),S([])}finally{V(!1)}}},B=async H=>{if(H.preventDefault(),!!a){if(!c.trim()){W.fire("Validation Error","Please enter a charge title","error");return}if(!h||parseFloat(h)<0){W.fire("Validation Error","Please enter a valid net cost","error");return}if(!p||parseFloat(p)<0){W.fire("Validation Error","Please enter a valid sale price","error");return}if(!g){W.fire("Validation Error","Please select an account","error");return}L(!0);try{await Ft.addCustomCharge({residenceID:a.residenceID,chargeTitle:c,netCost:parseFloat(h),salePrice:parseFloat(p),accountID:parseInt(g),remarks:b}),W.fire("Success","Custom charge added successfully","success"),u(""),m(""),y(""),j(""),N(""),o("view"),q(),r&&r()}catch(se){W.fire("Error",se.response?.data?.message||"Failed to add custom charge","error")}finally{L(!1)}}},J=async H=>{if((await W.fire({title:"Delete Custom Charge?",text:"Are you sure you want to delete this charge?",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it",cancelButtonText:"Cancel"})).isConfirmed)try{await Ft.deleteCustomCharge(H),W.fire("Success","Custom charge deleted successfully","success"),q()}catch(X){W.fire("Error",X.response?.data?.message||"Failed to delete charge","error")}};if(!s||!a)return null;const P=te(),K=v.reduce((H,se)=>H+se.sale_price,0);return e.jsx("div",{className:"modal-overlay",onClick:t,children:e.jsxs("div",{className:"modal-container",onClick:H=>H.stopPropagation(),style:{maxWidth:"900px"},children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h3",{children:[e.jsx("i",{className:"fa fa-plus-circle"})," Custom Charges Management"]}),e.jsx("button",{className:"modal-close",onClick:t,children:e.jsx("i",{className:"fa fa-times"})})]}),e.jsxs("ul",{className:"nav nav-tabs px-3 pt-2",role:"tablist",children:[e.jsx("li",{className:"nav-item",children:e.jsxs("button",{className:`nav-link ${i==="add"?"active":""}`,onClick:()=>o("add"),type:"button",children:[e.jsx("i",{className:"fa fa-plus me-1"}),"Add New Charge"]})}),e.jsx("li",{className:"nav-item",children:e.jsxs("button",{className:`nav-link ${i==="view"?"active":""}`,onClick:()=>{o("view"),q()},type:"button",children:[e.jsx("i",{className:"fa fa-list me-1"}),"View Charges"]})})]}),i==="add"?e.jsxs("form",{onSubmit:B,children:[e.jsxs("div",{className:"modal-body",children:[e.jsxs("p",{className:"mb-3",children:["Adding charge for: ",e.jsx("strong",{children:a.passenger_name})]}),e.jsxs("div",{className:"alert alert-info mb-3",children:[e.jsx("i",{className:"fa fa-info-circle me-2"}),e.jsx("strong",{children:"Custom Charges:"})," Add any additional charges not covered by standard fees."]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:e.jsxs("strong",{children:["Charge Title/Description ",e.jsx("span",{className:"text-danger",children:"*"})]})}),e.jsx("input",{type:"text",className:"form-control",value:c,onChange:H=>u(H.target.value),placeholder:"e.g., Medical Test, Typing Fee, etc.",required:!0})]}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6 mb-3",children:[e.jsx("label",{className:"form-label",children:e.jsxs("strong",{children:["Net Cost (Your Cost) ",e.jsx("span",{className:"text-danger",children:"*"})]})}),e.jsxs("div",{className:"input-group",children:[e.jsx("input",{type:"number",className:"form-control",value:h,onChange:H=>m(H.target.value),placeholder:"0.00",min:"0",step:"0.01",required:!0}),e.jsx("span",{className:"input-group-text",children:"AED"})]})]}),e.jsxs("div",{className:"col-md-6 mb-3",children:[e.jsx("label",{className:"form-label",children:e.jsxs("strong",{children:["Sale Price (Customer Pays) ",e.jsx("span",{className:"text-danger",children:"*"})]})}),e.jsxs("div",{className:"input-group",children:[e.jsx("input",{type:"number",className:"form-control",value:p,onChange:H=>y(H.target.value),placeholder:"0.00",min:"0",step:"0.01",required:!0}),e.jsx("span",{className:"input-group-text",children:"AED"})]})]})]}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6 mb-3",children:[e.jsx("label",{className:"form-label",children:e.jsx("strong",{children:"Profit Margin"})}),e.jsxs("div",{className:"input-group",children:[e.jsx("input",{type:"text",className:`form-control bg-light ${P>=0?"text-success":"text-danger"}`,value:P.toFixed(2),readOnly:!0}),e.jsx("span",{className:"input-group-text",children:"AED"})]})]}),e.jsxs("div",{className:"col-md-6 mb-3",children:[e.jsx("label",{className:"form-label",children:e.jsxs("strong",{children:["Account ",e.jsx("span",{className:"text-danger",children:"*"})]})}),!n||n.length===0?e.jsxs("div",{className:"alert alert-warning mb-0",children:[e.jsx("i",{className:"fa fa-exclamation-triangle me-2"}),"No accounts available. Please refresh the page or contact administrator."]}):e.jsxs("select",{className:"form-control",value:g,onChange:H=>j(H.target.value),required:!0,children:[e.jsx("option",{value:"",children:"Select Account"}),n.map(H=>e.jsx("option",{value:H.accountID,children:H.accountName},H.accountID))]})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:e.jsx("strong",{children:"Remarks"})}),e.jsx("textarea",{className:"form-control",value:b,onChange:H=>N(H.target.value),rows:2,placeholder:"Optional notes about this charge"})]}),e.jsx("div",{className:"card bg-light",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("h6",{className:"card-title",children:[e.jsx("i",{className:"fa fa-calculator me-2"}),"Summary"]}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-6",children:[e.jsx("strong",{children:"Net Cost:"})," ",e.jsxs("span",{children:[parseFloat(h||"0").toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})," AED"]})]}),e.jsxs("div",{className:"col-6",children:[e.jsx("strong",{children:"Sale Price:"})," ",e.jsxs("span",{children:[parseFloat(p||"0").toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})," AED"]})]})]}),e.jsx("div",{className:"row mt-2",children:e.jsxs("div",{className:"col-12",children:[e.jsx("strong",{children:"Profit:"})," ",e.jsxs("span",{className:P>=0?"text-success":"text-danger",children:[P.toFixed(2)," AED"]})]})})]})})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:t,disabled:E,children:[e.jsx("i",{className:"fa fa-times"})," Cancel"]}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:E,children:E?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-border spinner-border-sm me-2"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fa fa-save me-2"}),"Save Charge"]})})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"modal-body",children:[e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-bordered table-hover",children:[e.jsx("thead",{className:"table-dark",children:e.jsxs("tr",{children:[e.jsx("th",{width:"5%",children:"#"}),e.jsx("th",{width:"25%",children:"Charge Title"}),e.jsx("th",{width:"15%",children:"Net Cost"}),e.jsx("th",{width:"15%",children:"Sale Price"}),e.jsx("th",{width:"15%",children:"Profit"}),e.jsx("th",{width:"15%",children:"Added By"}),e.jsx("th",{width:"10%",className:"text-center",children:"Actions"})]})}),e.jsx("tbody",{children:z?e.jsx("tr",{children:e.jsxs("td",{colSpan:7,className:"text-center py-4",children:[e.jsx("span",{className:"spinner-border spinner-border-sm me-2"}),"Loading..."]})}):v.length===0?e.jsx("tr",{children:e.jsxs("td",{colSpan:7,className:"text-center py-4",children:[e.jsx("i",{className:"fa fa-info-circle me-2"}),"No custom charges added yet"]})}):v.map((H,se)=>e.jsxs("tr",{children:[e.jsx("td",{children:se+1}),e.jsxs("td",{children:[e.jsx("strong",{children:H.charge_title}),H.remarks&&e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("small",{className:"text-muted",children:H.remarks})]})]}),e.jsxs("td",{children:[H.net_cost.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})," AED"]}),e.jsxs("td",{children:[H.sale_price.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})," AED"]}),e.jsxs("td",{className:H.profit>=0?"text-success":"text-danger",children:[H.profit.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})," AED"]}),e.jsxs("td",{children:[H.staff_name,e.jsx("br",{}),e.jsx("small",{className:"text-muted",children:H.created_at})]}),e.jsx("td",{className:"text-center",children:e.jsx("button",{className:"btn btn-sm btn-danger",onClick:()=>J(H.id),title:"Delete Charge",children:e.jsx("i",{className:"fa fa-trash"})})})]},H.id))})]})}),e.jsxs("div",{className:"alert alert-info mt-3",children:[e.jsx("strong",{children:"Total Custom Charges:"})," ",e.jsxs("span",{children:[K.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})," AED"]})]})]}),e.jsx("div",{className:"modal-footer",children:e.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:t,children:[e.jsx("i",{className:"fa fa-times"})," Close"]})})]})]})})}function dR({isOpen:s,onClose:t,onSubmit:a,residence:n,accounts:r}){const[i,o]=A.useState(""),[c,u]=A.useState(""),[h,m]=A.useState("150"),[p,y]=A.useState(""),[g,j]=A.useState(""),[b,N]=A.useState(!1),[v,S]=A.useState(!1);A.useEffect(()=>{s&&n&&(o(n.uid||""),u(n.LabourCardNumber||""),m("150"),y(""),j(""),N(!1))},[s,n]);const E=()=>{N(!b),m(b?"150":"0")},L=async z=>{if(z.preventDefault(),!!n){if(!h||parseFloat(h)<0){alert("Please enter a valid cost amount");return}if(!p){alert("Please select an account");return}S(!0);try{await a({residenceID:n.residenceID,cost:parseFloat(h),accountID:parseInt(p),notes:g,uid:i||void 0,labourCard:c||void 0}),t()}catch(V){console.error("Failed to perform Tawjeeh:",V)}finally{S(!1)}}};return!s||!n?null:e.jsx("div",{className:"modal-overlay",onClick:t,children:e.jsxs("div",{className:"modal-container",onClick:z=>z.stopPropagation(),style:{maxWidth:"700px"},children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h3",{children:[e.jsx("i",{className:"fa fa-id-card"})," Perform Tawjeeh Operation"]}),e.jsx("button",{className:"modal-close",onClick:t,children:e.jsx("i",{className:"fa fa-times"})})]}),e.jsxs("form",{onSubmit:L,children:[e.jsxs("div",{className:"modal-body",children:[e.jsxs("p",{className:"mb-3",children:["Performing Tawjeeh for: ",e.jsx("strong",{children:n.passenger_name})]}),e.jsxs("div",{className:"row mb-3",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{className:"form-label",children:"Passenger Name"}),e.jsx("input",{type:"text",className:"form-control",value:n.passenger_name,readOnly:!0})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{className:"form-label",children:"UID Number"}),e.jsx("input",{type:"text",className:"form-control",value:i,onChange:z=>o(z.target.value),placeholder:"Enter UID number"})]})]}),e.jsxs("div",{className:"row mb-3",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{className:"form-label",children:"Labour Card Number"}),e.jsx("input",{type:"text",className:"form-control",value:c,onChange:z=>u(z.target.value),placeholder:"Enter labour card number"})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsxs("label",{className:"form-label",children:["Cost (AED) ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("div",{className:"input-group",children:[e.jsx("input",{type:"number",className:"form-control",value:h,onChange:z=>m(z.target.value),placeholder:"Enter cost amount",step:"0.01",min:"0",required:!0,disabled:b}),e.jsxs("button",{className:"btn btn-outline-success",type:"button",onClick:E,children:[e.jsx("i",{className:"fa fa-gift"})," Free"]})]}),e.jsxs("div",{className:"form-check mt-2",children:[e.jsx("input",{className:"form-check-input",type:"checkbox",checked:b,onChange:E}),e.jsxs("label",{className:"form-check-label text-success",children:[e.jsx("i",{className:"fa fa-gift me-1"}),"This tawjeeh service is provided free of charge"]})]})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("label",{className:"form-label",children:["Account ",e.jsx("span",{className:"text-danger",children:"*"})]}),!r||r.length===0?e.jsxs("div",{className:"alert alert-warning mb-0",children:[e.jsx("i",{className:"fa fa-exclamation-triangle me-2"}),"No accounts available. Please refresh the page or contact administrator."]}):e.jsxs("select",{className:"form-control",value:p,onChange:z=>y(z.target.value),required:!0,children:[e.jsx("option",{value:"",children:"Select Account"}),r.map(z=>e.jsx("option",{value:z.accountID,children:z.accountName},z.accountID))]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"Notes"}),e.jsx("textarea",{className:"form-control",value:g,onChange:z=>j(z.target.value),rows:3,placeholder:"Enter any additional notes"})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:t,disabled:v,children:[e.jsx("i",{className:"fa fa-times"})," Cancel"]}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:v,children:v?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-border spinner-border-sm me-2"}),"Processing..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fa fa-check me-2"}),"Perform Tawjeeh"]})})]})]})]})})}function uR({isOpen:s,onClose:t,onSubmit:a,residence:n,accounts:r}){const[i,o]=A.useState(""),[c,u]=A.useState(""),[h,m]=A.useState(""),[p,y]=A.useState("126"),[g,j]=A.useState(""),[b,N]=A.useState(""),[v,S]=A.useState(null),[E,L]=A.useState(!1);A.useEffect(()=>{s&&n&&(o(n.uid||""),u(n.LabourCardNumber||""),m(n.passportNumber||""),y("126"),j(""),N(""),S(null))},[s,n]);const z=async V=>{if(V.preventDefault(),!!n){if(!p||parseFloat(p)<0){alert("Please enter a valid cost amount");return}if(!g){alert("Please select an account");return}L(!0);try{await a({residenceID:n.residenceID,cost:parseFloat(p),accountID:parseInt(g),notes:b,uid:i||void 0,labourCard:c||void 0,passport:h||void 0,attachment:v||void 0}),t()}catch(te){console.error("Failed to issue insurance:",te)}finally{L(!1)}}};return!s||!n?null:e.jsx("div",{className:"modal-overlay",onClick:t,children:e.jsxs("div",{className:"modal-container",onClick:V=>V.stopPropagation(),style:{maxWidth:"800px"},children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h3",{children:[e.jsx("i",{className:"fa fa-shield"})," Issue Insurance (ILOE)"]}),e.jsx("button",{className:"modal-close",onClick:t,children:e.jsx("i",{className:"fa fa-times"})})]}),e.jsxs("form",{onSubmit:z,children:[e.jsxs("div",{className:"modal-body",children:[e.jsxs("p",{className:"mb-3",children:["Issuing insurance for: ",e.jsx("strong",{children:n.passenger_name})]}),e.jsxs("div",{className:"row mb-3",children:[e.jsxs("div",{className:"col-md-4",children:[e.jsx("label",{className:"form-label",children:"Passenger Name"}),e.jsx("input",{type:"text",className:"form-control",value:n.passenger_name,readOnly:!0})]}),e.jsxs("div",{className:"col-md-4",children:[e.jsx("label",{className:"form-label",children:"UID Number"}),e.jsx("input",{type:"text",className:"form-control",value:i,onChange:V=>o(V.target.value),placeholder:"Enter UID number"})]}),e.jsxs("div",{className:"col-md-4",children:[e.jsx("label",{className:"form-label",children:"Labour Card Number"}),e.jsx("input",{type:"text",className:"form-control",value:c,onChange:V=>u(V.target.value),placeholder:"Enter labour card number"})]})]}),e.jsxs("div",{className:"row mb-3",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{className:"form-label",children:"Passport Number"}),e.jsx("input",{type:"text",className:"form-control",value:h,onChange:V=>m(V.target.value),placeholder:"Enter passport number"})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsxs("label",{className:"form-label",children:["Cost (AED) ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"number",className:"form-control",value:p,onChange:V=>y(V.target.value),placeholder:"Enter insurance cost",step:"0.01",min:"0",required:!0})]})]}),e.jsxs("div",{className:"row mb-3",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsxs("label",{className:"form-label",children:["Account ",e.jsx("span",{className:"text-danger",children:"*"})]}),!r||r.length===0?e.jsxs("div",{className:"alert alert-warning mb-0",children:[e.jsx("i",{className:"fa fa-exclamation-triangle me-2"}),"No accounts available. Please refresh the page or contact administrator."]}):e.jsxs("select",{className:"form-control",value:g,onChange:V=>j(V.target.value),required:!0,children:[e.jsx("option",{value:"",children:"Select Account"}),r.map(V=>e.jsx("option",{value:V.accountID,children:V.accountName},V.accountID))]})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{className:"form-label",children:"Insurance Document (Optional)"}),e.jsx("input",{type:"file",className:"form-control",onChange:V=>S(V.target.files?.[0]||null),accept:".pdf,.doc,.docx,.jpg,.jpeg,.png"}),e.jsx("small",{className:"form-text text-muted",children:"Upload insurance certificate or related document"})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"Notes"}),e.jsx("textarea",{className:"form-control",value:b,onChange:V=>N(V.target.value),rows:3,placeholder:"Enter any additional notes about the insurance"})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:t,disabled:E,children:[e.jsx("i",{className:"fa fa-times"})," Cancel"]}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:E,children:E?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-border spinner-border-sm me-2"}),"Processing..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fa fa-shield me-2"}),"Issue Insurance"]})})]})]})]})})}function hR({isOpen:s,onClose:t,onGenerate:a,passengerName:n}){const[r,i]=A.useState({purpose:"general",destination:"",from_date:"",to_date:""}),o=u=>{if(u.preventDefault(),r.purpose==="travel"&&(!r.destination||!r.from_date||!r.to_date)){alert("Please fill in all travel details");return}a(r),c()},c=()=>{i({purpose:"general",destination:"",from_date:"",to_date:""})};return s?e.jsx("div",{className:"modal-overlay",onClick:t,children:e.jsxs("div",{className:"modal-container",onClick:u=>u.stopPropagation(),style:{maxWidth:"600px"},children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h3",{children:[e.jsx("i",{className:"fa fa-file-text"})," Generate NOC - ",n]}),e.jsx("button",{className:"modal-close",onClick:t,children:e.jsx("i",{className:"fa fa-times"})})]}),e.jsxs("form",{onSubmit:o,children:[e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"form-group mb-4",children:[e.jsxs("label",{className:"form-label",children:["Purpose of NOC ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("select",{className:"form-control",value:r.purpose,onChange:u=>{const h=u.target.value;i(h!=="travel"?{purpose:h,destination:"",from_date:"",to_date:""}:{...r,purpose:h})},required:!0,children:[e.jsx("option",{value:"general",children:"General Purpose"}),e.jsx("option",{value:"travel",children:"Travel"}),e.jsx("option",{value:"visa",children:"Visa Application"}),e.jsx("option",{value:"employment",children:"Additional Employment"})]})]}),r.purpose==="travel"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"form-group mb-4",children:[e.jsxs("label",{className:"form-label",children:["Travel Destination ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"text",className:"form-control",value:r.destination,onChange:u=>i({...r,destination:u.target.value}),placeholder:"e.g., United States, Dubai, London",required:!0})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"form-group mb-4",children:[e.jsxs("label",{className:"form-label",children:["Travel From Date ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"date",className:"form-control",value:r.from_date,onChange:u=>i({...r,from_date:u.target.value}),required:!0})]})}),e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"form-group mb-4",children:[e.jsxs("label",{className:"form-label",children:["Travel To Date ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"date",className:"form-control",value:r.to_date,onChange:u=>i({...r,to_date:u.target.value}),required:!0,min:r.from_date})]})})]})]}),e.jsxs("div",{className:"alert alert-info",style:{backgroundColor:"#1f2937",border:"1px solid #3b82f6",color:"#93c5fd",padding:"12px",borderRadius:"6px",marginTop:"16px"},children:[e.jsx("i",{className:"fa fa-info-circle me-2"}),r.purpose==="travel"&&"The NOC will include travel dates and destination.",r.purpose==="visa"&&"The NOC will be suitable for visa application purposes.",r.purpose==="employment"&&"The NOC will confirm no objection to additional employment.",r.purpose==="general"&&"A general NOC will be generated."]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:()=>{c(),t()},children:[e.jsx("i",{className:"fa fa-times me-2"}),"Cancel"]}),e.jsxs("button",{type:"submit",className:"btn btn-primary",style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",border:"none"},children:[e.jsx("i",{className:"fa fa-file-text me-2"}),"Generate NOC"]})]})]})]})}):null}function fR(){const s=Vn(),[t,a]=A.useState([]),[n,r]=A.useState(!1),[i,o]=A.useState("all"),[c,u]=A.useState(""),[h,m]=A.useState(1),[p,y]=A.useState(1),[g,j]=A.useState(!1),[b,N]=A.useState({accounts:[],currencies:[]}),[v,S]=A.useState(null),[E,L]=A.useState(!1),[z,V]=A.useState(!1),[te,q]=A.useState(!1),[B,J]=A.useState(!1),[P,K]=A.useState(!1),[H,se]=A.useState(!1),[X,R]=A.useState(!1),[Q,Y]=A.useState(!1),[$,me]=A.useState(!1),[D,U]=A.useState(!1),[le,de]=A.useState(!1),[G,je]=A.useState(!1),[De,Pe]=A.useState(null),[ke,Ye]=A.useState(0),[Qe,et]=A.useState(window.innerWidth<768);A.useEffect(()=>{Xe()},[]),A.useEffect(()=>{re()},[i,h,c]),A.useEffect(()=>{const Ue=()=>{et(window.innerWidth<768)};return window.addEventListener("resize",Ue),()=>window.removeEventListener("resize",Ue)},[]);const Xe=async()=>{try{const Ue=await Ft.getLookups(),yt=(Ue.accounts||[]).map(vt=>({accountID:vt.account_ID||vt.accountID,accountName:vt.account_Name||vt.accountName}));N({accounts:yt,currencies:(Ue.currencies||[]).map(vt=>({currencyID:vt.currencyID,currencyName:vt.currencyName}))})}catch(Ue){console.error("Error loading dropdowns:",Ue),W.fire("Error","Failed to load dropdown data","error")}},re=async()=>{try{r(!0);const Ue={page:h,limit:10};c&&(Ue.search=c),i==="mainland"?Ue.insideOutside="inside":i==="freezone"&&(Ue.insideOutside="outside");const yt=await Ft.getResidences(Ue);a(yt.data),y(yt.totalPages)}catch(Ue){console.error("Error loading records:",Ue),W.fire("Error",Ue.response?.data?.message||"Failed to load records","error")}finally{r(!1)}},ne=Ue=>{u(Ue.target.value),m(1)},Se=Ue=>{o(Ue),m(1),u("")},Ve=Ue=>{console.log("Opening attachments modal for residence:",Ue),S(Ue),L(!0),console.log("Attachments modal state set to open")},xt=Ue=>{S(Ue),V(!0)},ee=Ue=>{S(Ue),q(!0)},Ie=Ue=>{S(Ue),J(!0)},He=Ue=>{Pe(Ue),je(!0)},Lt=async Ue=>{if(De){je(!1);try{const yt={purpose:Ue.purpose};if(Ue.purpose==="travel"){if(!Ue.destination||!Ue.from_date||!Ue.to_date){W.fire("Error","Please provide destination and travel dates for travel NOC","error");return}yt.destination=Ue.destination,yt.from_date=Ue.from_date,yt.to_date=Ue.to_date}const vt=Object.keys(yt).map(ve=>`${ve}=${encodeURIComponent(yt[ve])}`).join("&"),Ce=await Ft.generateLetter(De.residenceID,"noc",void 0,vt);if(console.log("NOC Response:",Ce),Ce&&Ce.html){const ve=window.open("","_blank");ve?(ve.document.write(Ce.html),ve.document.close()):W.fire("Error","Popup blocked. Please allow popups for this site.","error")}else console.error("Invalid response structure:",Ce),W.fire("Error","Failed to generate NOC letter. Invalid response format.","error")}catch(yt){console.error("Error generating NOC:",yt),W.fire("Error",yt.response?.data?.message||"Failed to generate NOC","error")}finally{Pe(null)}}},Dt=async Ue=>{try{const yt=await Ft.getBanks(),vt={"":"-- Select Bank --"};if(yt&&yt.length>0)yt.forEach(ve=>{vt[ve.id]=ve.bank_name});else{W.fire("Info","No banks available. Please contact administrator.","info");return}const{value:Ce}=await W.fire({title:"Select Bank",html:"<p>Please select a bank for the salary certificate:</p>",input:"select",inputOptions:vt,showCancelButton:!0,confirmButtonText:"Generate Certificate",confirmButtonColor:"#28a745",cancelButtonText:"Cancel",inputValidator:ve=>{if(!ve)return"Please select a bank"}});if(Ce)try{const ve=await Ft.generateLetter(Ue.residenceID,"salary_certificate",Ce);if(console.log("Salary Certificate Response:",ve),ve&&ve.html){const Ze=window.open("","_blank");Ze?(Ze.document.write(ve.html),Ze.document.close()):W.fire("Error","Popup blocked. Please allow popups for this site.","error")}else console.error("Invalid response structure:",ve),W.fire("Error","Failed to generate salary certificate. Invalid response format.","error")}catch(ve){console.error("Error generating salary certificate:",ve),W.fire("Error",ve.response?.data?.message||"Failed to generate salary certificate","error")}}catch(yt){console.error("Error generating salary certificate:",yt),W.fire("Error",yt.response?.data?.message||"Failed to generate salary certificate","error")}},Mt=Ue=>{S(Ue),K(!0)},At=async Ue=>{const{value:yt}=await W.fire({title:"Pay Cancellation Fee",html:`
        <input id="swal-amount" class="swal2-input" placeholder="Amount (AED)" type="number" step="0.01" required>
        <select id="swal-account" class="swal2-select" required>
          <option value="">Select Account</option>
          ${b.accounts.map(vt=>`<option value="${vt.accountID}">${vt.accountName}</option>`).join("")}
        </select>
        <textarea id="swal-remarks" class="swal2-textarea" placeholder="Remarks (optional)"></textarea>
      `,focusConfirm:!1,showCancelButton:!0,confirmButtonText:"Process Payment",preConfirm:()=>{const vt=document.getElementById("swal-amount")?.value,Ce=document.getElementById("swal-account")?.value,ve=document.getElementById("swal-remarks")?.value||"";return!vt||!Ce?(W.showValidationMessage("Please fill all required fields"),!1):{amount:parseFloat(vt),accountID:parseInt(Ce),remarks:ve}}});if(yt)try{await Ft.payCancellationFee(Ue.residenceID,yt),W.fire("Success","Cancellation fee payment processed","success"),re()}catch(vt){W.fire("Error",vt.response?.data?.message||"Failed to process payment","error")}},Bt=async Ue=>{const{value:yt}=await W.fire({title:"Credit Adjustment",html:`
        <select id="swal-adjustment-type" class="swal2-select" required>
          <option value="full">Full Adjustment</option>
          <option value="partial">Partial Adjustment</option>
        </select>
        <input id="swal-partial-amount" class="swal2-input" placeholder="Partial Amount (if partial)" type="number" step="0.01" style="display:none;">
        <select id="swal-action" class="swal2-select" required>
          <option value="refund">Refund to Account</option>
          <option value="transfer">Transfer to Another Residence</option>
        </select>
        <select id="swal-account" class="swal2-select" required>
          <option value="">Select Account</option>
          ${b.accounts.map(vt=>`<option value="${vt.accountID}">${vt.accountName}</option>`).join("")}
        </select>
        <textarea id="swal-remarks" class="swal2-textarea" placeholder="Remarks"></textarea>
      `,focusConfirm:!1,showCancelButton:!0,confirmButtonText:"Process Adjustment",didOpen:()=>{const vt=document.getElementById("swal-adjustment-type"),Ce=document.getElementById("swal-partial-amount");vt?.addEventListener("change",ve=>{ve.target.value==="partial"?Ce.style.display="block":Ce.style.display="none"})},preConfirm:()=>{const vt=document.getElementById("swal-adjustment-type")?.value,Ce=document.getElementById("swal-partial-amount")?.value,ve=document.getElementById("swal-action")?.value,Ze=document.getElementById("swal-account")?.value,Wt=document.getElementById("swal-remarks")?.value||"";return Ze?{adjustmentType:vt,partialAmount:Ce?parseFloat(Ce):null,action:ve,accountID:parseInt(Ze),remarks:Wt}:(W.showValidationMessage("Please select an account"),!1)}});if(yt)try{await Ft.processCreditAdjustment(Ue.residenceID,yt),W.fire("Success","Credit adjustment processed","success"),re()}catch(vt){W.fire("Error",vt.response?.data?.message||"Failed to process adjustment","error")}},rs=Ue=>{S(Ue),R(!0)},kt=async Ue=>{try{await Ft.addFine(Ue),W.fire("Success","E-Visa fine added successfully","success"),R(!1),S(null),Ye(yt=>yt+1),re()}catch(yt){throw W.fire("Error",yt.response?.data?.message||"Failed to add fine","error"),yt}},zt=Ue=>{S(Ue),Y(!0)},$t=Ue=>{S(Ue),me(!0)},bt=()=>{re()},ys=Ue=>{window.open(`/invoice.php?residence_id=${Ue.residenceID}`,"_blank")},Te=Ue=>{S(Ue),U(!0)},Je=async Ue=>{try{await Ft.performTawjeeh(Ue),W.fire("Success","Tawjeeh performed successfully","success"),U(!1),re()}catch(yt){throw W.fire("Error",yt.response?.data?.message||"Failed to perform Tawjeeh","error"),yt}},be=Ue=>{S(Ue),de(!0)},Re=async Ue=>{try{await Ft.issueInsurance(Ue),W.fire("Success","Insurance issued successfully","success"),de(!1),re()}catch(yt){throw W.fire("Error",yt.response?.data?.message||"Failed to issue insurance","error"),yt}},lt=async Ue=>{if((await W.fire({title:"Delete Residence?",text:`Are you sure you want to delete residence for ${Ue.passenger_name}? This cannot be undone!`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#dc3545",cancelButtonColor:"#6c757d",confirmButtonText:"Yes, Delete!"})).isConfirmed)try{const Ce=await(await fetch("/api/residence/delete.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({residenceID:Ue.residenceID})})).json();Ce.success?(W.fire("Deleted!","Residence has been deleted.","success"),re()):W.fire("Error",Ce.message||"Failed to delete residence","error")}catch{W.fire("Error","Failed to delete residence","error")}},tt=Ue=>{S(Ue),se(!0)},Et=Ue=>{s(`/residence/create?type=renew&oldID=${Ue.residenceID}&stp=0`)},is=async(Ue,yt,vt)=>{try{await Ft.updateTawjeeh({residenceID:Ue,tawjeehIncluded:yt,tawjeehAmount:vt}),W.fire("Success","TAWJEEH settings updated","success"),V(!1),re()}catch(Ce){throw W.fire("Error",Ce.response?.data?.message||"Failed to update TAWJEEH","error"),Ce}},qt=async(Ue,yt,vt,Ce,ve)=>{try{await Ft.updateILOE({residenceID:Ue,insuranceIncluded:yt,insuranceAmount:vt,iloeFine:Ce,fineRemarks:ve}),W.fire("Success","ILOE settings updated","success"),q(!1),re()}catch(Ze){throw W.fire("Error",Ze.response?.data?.message||"Failed to update ILOE","error"),Ze}},Pt=async(Ue,yt)=>{if(v)try{await Ft.cancelResidence(v.residenceID,yt),W.fire("Success","Residence cancelled successfully","success"),se(!1),S(null),re()}catch(vt){throw W.fire("Error",vt.response?.data?.message||"Failed to cancel residence","error"),vt}},Tt=async()=>{K(!1),re()};return e.jsxs("div",{className:"residence-report-page",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-white mb-2",children:[e.jsx("i",{className:"fa fa-info mr-2"}),"Residence Report"]}),e.jsx("p",{className:"text-gray-400",children:"View and manage all residence records"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>s("/residence/create"),className:"btn btn-primary btn-lg",style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",border:"none",boxShadow:"0 4px 15px rgba(102, 126, 234, 0.4)",transition:"all 0.3s ease"},onMouseEnter:Ue=>{Ue.currentTarget.style.transform="translateY(-2px)",Ue.currentTarget.style.boxShadow="0 6px 20px rgba(102, 126, 234, 0.6)"},onMouseLeave:Ue=>{Ue.currentTarget.style.transform="translateY(0)",Ue.currentTarget.style.boxShadow="0 4px 15px rgba(102, 126, 234, 0.4)"},children:[e.jsx("i",{className:"fa fa-plus-circle mr-2"}),"Add New Residence"]}),e.jsxs("button",{onClick:()=>window.location.reload(),className:"btn btn-secondary",children:[e.jsx("i",{className:"fa fa-redo mr-2"}),"Refresh"]})]})]})}),e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"card p-4",style:{backgroundColor:"#2d353c",border:"1px solid #495057"},children:e.jsx("input",{type:"text",className:"form-control",value:c,onChange:ne,placeholder:"Search by Customer, Passenger, Company name, or Company Number"})})}),e.jsx("div",{className:"mb-6",children:e.jsxs("ul",{className:"nav nav-tabs",id:"residenceTabs",children:[e.jsx("li",{className:"nav-item",children:e.jsx("a",{href:"#default-tab-1","data-bs-toggle":"tab",className:`nav-link ${i==="all"?"active":""}`,onClick:()=>Se("all"),children:"All Residence Records"})}),e.jsx("li",{className:"nav-item",children:e.jsx("a",{href:"#mainland-tab","data-bs-toggle":"tab",className:`nav-link ${i==="mainland"?"active":""}`,onClick:()=>Se("mainland"),children:"Mainland"})}),e.jsx("li",{className:"nav-item",children:e.jsx("a",{href:"#freezone-tab","data-bs-toggle":"tab",className:`nav-link ${i==="freezone"?"active":""}`,onClick:()=>Se("freezone"),children:"Freezone"})})]})}),e.jsxs("div",{children:[g&&e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"card",style:{backgroundColor:"#2d353c",border:"1px solid #495057"},children:[e.jsx("div",{className:"card-header",style:{backgroundColor:"#343a40",borderBottom:"1px solid #495057"},children:e.jsxs("h3",{className:"mb-0",style:{color:"#ffffff"},children:[e.jsx("i",{className:"fa fa-chart-bar me-2"}),"Residence Statistics Chart"]})}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"chartBox",children:[e.jsx("div",{className:"chartMenu"}),e.jsx("div",{className:"chartCard",children:e.jsx("div",{className:"chartBox",style:{width:"auto",height:"400px",padding:"20px",borderRadius:"20px"},children:e.jsx("canvas",{id:"myChart"})})})]})})]})}),e.jsx("div",{className:"mb-6",children:e.jsxs("button",{className:"btn btn-secondary",onClick:()=>j(!g),children:[e.jsx("i",{className:`fa fa-${g?"eye-slash":"chart-bar"} me-2`}),g?"Hide":"Show"," Statistics Chart"]})}),e.jsxs("div",{id:"DailyRpt",children:[n?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("i",{className:"fa fa-spinner fa-spin fa-2x text-gray-400"}),e.jsx("p",{className:"text-gray-400 mt-2",children:"Loading residences..."})]}):t.length===0?e.jsx("div",{className:"card p-6 text-center",style:{backgroundColor:"#2d353c",border:"1px solid #495057"},children:e.jsx("p",{className:"text-gray-400",children:"No residences found"})}):t.map(Ue=>e.jsx(nR,{residence:Ue,onContinue:yt=>s(`/residence/${yt.residenceID}`),onAttachments:Ve,onTawjeeh:xt,onILOE:ee,onPaymentHistory:Ie,onNOC:He,onSalaryCertificate:Dt,onPayTotal:Mt,onCancellationFee:At,onCreditAdjustment:Bt,onAddFine:rs,onViewFine:zt,onAddCustomCharge:$t,onGenerateInvoice:ys,onPerformTawjeeh:Te,onIssueInsurance:be,onDeleteResidence:lt,onCancelResidence:tt,onRenew:Et,isAdmin:!1},Ue.residenceID)),p>1&&(()=>{const yt=(()=>{const vt=[];if(p<=(Qe?5:10))for(let ve=1;ve<=p;ve++)vt.push(ve);else{vt.push(1);let ve=Math.max(2,h-1),Ze=Math.min(p-1,h+1);h<=3&&(Ze=Math.min(5,p-1)),h>=p-2&&(ve=Math.max(2,p-4)),ve>2&&vt.push("ellipsis-start");for(let Wt=ve;Wt<=Ze;Wt++)vt.push(Wt);Ze<p-1&&vt.push("ellipsis-end"),vt.push(p)}return vt})();return e.jsx("div",{id:"DailyRptPagination",className:"d-flex justify-content-center mt-6",children:e.jsx("nav",{children:e.jsxs("ul",{className:"pagination",children:[e.jsx("li",{className:`page-item ${h===1?"disabled":""}`,children:e.jsxs("button",{className:"page-link",onClick:()=>m(h-1),children:[e.jsx("span",{className:"d-none d-md-inline",children:"Previous"}),e.jsx("span",{className:"d-md-none",children:"Prev"})]})}),yt.map((vt,Ce)=>vt==="ellipsis-start"||vt==="ellipsis-end"?e.jsx("li",{className:"page-item disabled",children:e.jsx("span",{className:"page-link",children:"..."})},`ellipsis-${Ce}`):e.jsx("li",{className:`page-item ${h===vt?"active":""}`,children:e.jsx("button",{className:"page-link",onClick:()=>m(vt),children:vt})},vt)),e.jsx("li",{className:`page-item ${h===p?"disabled":""}`,children:e.jsxs("button",{className:"page-link",onClick:()=>m(h+1),children:[e.jsx("span",{className:"d-none d-md-inline",children:"Next"}),e.jsx("span",{className:"d-md-none",children:"Next"})]})})]})})})})()]})]}),v&&e.jsxs(e.Fragment,{children:[e.jsx(h0,{isOpen:E,onClose:()=>{L(!1),S(null)},residence:v,onLoadAttachments:async Ue=>{const yt=await Ft.getAttachments(Ue);return Array.isArray(yt)?yt:[]},onUploadAttachment:async(Ue,yt,vt,Ce)=>await Ft.uploadAttachment(Ue,yt,vt,Ce),onDeleteAttachment:async Ue=>{await Ft.deleteAttachment(Ue)}}),e.jsx(X5,{isOpen:z,onClose:()=>{V(!1),S(null)},residence:v,onSubmit:is}),e.jsx(G5,{isOpen:te,onClose:()=>{q(!1),S(null)},residence:v,onSubmit:qt}),e.jsx(rR,{isOpen:B,onClose:()=>{J(!1),S(null)},residence:v,onLoadHistory:async Ue=>{const yt=await Ft.getPaymentHistory(Ue);return Array.isArray(yt)?yt:[]}}),e.jsx(iR,{isOpen:P,onClose:()=>{K(!1),S(null)},onSubmit:Tt,residence:v,accounts:b.accounts,currencies:b.currencies}),H&&e.jsx(Q5,{residence:v,onCancel:Pt,onClose:()=>{se(!1),S(null)}}),X&&e.jsx(J5,{isOpen:X,onClose:()=>{R(!1),S(null)},onSubmit:kt,residence:v,accounts:b.accounts,currencies:b.currencies}),Q&&e.jsx(oR,{isOpen:Q,onClose:()=>{Y(!1),S(null)},residence:v,onAddFine:()=>{Y(!1),R(!0)},refreshTrigger:ke,accounts:b.accounts,currencies:b.currencies,onRefresh:()=>{Ye(Ue=>Ue+1),re()}}),$&&e.jsx(cR,{isOpen:$,onClose:()=>{me(!1),S(null)},residence:v,accounts:b.accounts,onChargeAdded:bt}),D&&e.jsx(dR,{isOpen:D,onClose:()=>{U(!1),S(null)},onSubmit:Je,residence:v,accounts:b.accounts}),le&&e.jsx(uR,{isOpen:le,onClose:()=>{de(!1),S(null)},onSubmit:Re,residence:v,accounts:b.accounts})]}),De&&e.jsx(hR,{isOpen:G,onClose:()=>{je(!1),Pe(null)},onGenerate:Lt,passengerName:De.passenger_name})]})}function mR(){const s=Vn(),[t,a]=A.useState([]),[n,r]=A.useState([]),[i,o]=A.useState(null),[c,u]=A.useState(null),[h,m]=A.useState(!1),[p,y]=A.useState(0);A.useEffect(()=>{g()},[]),A.useEffect(()=>{c?j():(a([]),y(0))},[i,c]);const g=async()=>{try{const E=((await Ft.getLookups()).currencies||[]).map(z=>({currencyID:z.currencyID,currencyName:z.currencyName}));r(E);const L=E.find(z=>{const V=z.currencyName?.toLowerCase()||"";return V==="aed"||V==="uae dirham"||V==="dirham"||V.includes("aed")||V.includes("dirham")||V.includes("uae")&&V.includes("dirham")});L?(console.log("Found AED currency:",L),u(L.currencyID)):E.length>0&&(console.log("AED currency not found, selecting first currency:",E[0]),u(E[0].currencyID))}catch(S){console.error("Error loading currencies:",S)}},j=async()=>{if(c){m(!0);try{const S=new FormData;S.append("customerID",i?.toString()||"0"),S.append("currencyID",c.toString());const E=await Ne.post("/residence/customer-pending-report.php",S,{headers:{"Content-Type":"multipart/form-data"}});if(console.log("Pending customers response:",E),console.log("Response data:",E.data),E&&E.data){const L=E.data;if(L.success&&L.data){let z=[];L.data.data&&Array.isArray(L.data.data)?z=L.data.data:Array.isArray(L.data)?z=L.data:Array.isArray(L)&&(z=L),a(z);const V=z.reduce((te,q)=>te+parseFloat(q.total?.toString()||"0"),0);y(V)}else a([]),y(0),L.message&&W.fire("Info",L.message,"info")}else a([]),y(0)}catch(S){console.error("Error loading pending customers:",S),console.error("Error response:",S.response);const E=S.response?.data?.message||S.message||"Failed to load pending customers";W.fire("Error",E,"error"),a([]),y(0)}finally{m(!1)}}},b=S=>{if(!c){W.fire("Error","Please select a currency first","error");return}s(`/residence/ledger/${S}?currencyID=${c}`)},N=()=>{const S=document.getElementById("printThisArea");if(!S)return;const E=window.open("","_blank");if(!E)return;const L=n.find(z=>z.currencyID===c)?.currencyName||"";E.document.write(`
      <!DOCTYPE html>
      <html>
        <head>
          <title>Residence Payments & Ledger Report</title>
          <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
          <style>
            body { padding: 20px; }
            table { width: 100%; border-collapse: collapse; margin-top: 20px; }
            th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
            th { background: linear-gradient(to left, #b31217, #e52d27); color: white; }
            .table-striped tbody tr:nth-of-type(odd) { background-color: rgba(0,0,0,.05); }
          </style>
        </head>
        <body>
          <h1 class="text-center"><i class="fa fa-home"></i> All Residence Report</h1>
          <h5 class="text-center">Currency: ${L}</h5>
          ${S.innerHTML}
        </body>
      </html>
    `),E.document.close(),E.print()},v=()=>{const S=document.getElementById("mainTable");if(!S)return;let E="";const L=S.querySelectorAll("tr");for(let q=0;q<L.length;q++){const B=L[q].querySelectorAll("td, th"),J=[];for(let P=0;P<B.length-1;P++)J.push(B[P].innerText);E+=J.join(",")+`
`}const z=new Blob([E],{type:"text/csv"}),V=window.URL.createObjectURL(z),te=document.createElement("a");te.href=V,te.download=`Residence_Report_${new Date().toISOString().split("T")[0]}.csv`,te.click(),window.URL.revokeObjectURL(V)};return e.jsxs("div",{className:"residence-report-page",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("h1",{className:"text-3xl font-bold text-white mb-2",children:[e.jsx("i",{className:"fa fa-money mr-2 text-danger"}),"Residence Payments & Ledger ",e.jsx("i",{className:"fa fa-arrow-down text-red"})]})}),e.jsxs("div",{className:"card mb-4",style:{backgroundColor:"#2d353c",border:"1px solid #495057"},children:[e.jsx("div",{className:"card-header text-white",style:{background:"linear-gradient(to left, #b31217, #e52d27)"},children:e.jsx("ul",{className:"nav nav-tabs card-header-tabs",children:e.jsx("li",{className:"nav-item",children:e.jsxs("a",{className:"nav-link active",children:[e.jsx("i",{className:"fa fa-money text-danger"})," All"]})})})}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"row align-items-end",children:[e.jsxs("div",{className:"col-md-3",children:[e.jsx("label",{className:"form-label text-white",children:"Customer (Optional)"}),e.jsx("select",{className:"form-control",value:i||"",onChange:S=>o(S.target.value?parseInt(S.target.value):null),children:e.jsx("option",{value:"",children:"-- All Customers --"})})]}),e.jsxs("div",{className:"col-md-2",children:[e.jsxs("label",{className:"form-label text-white",children:["Currency ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("select",{className:"form-control",value:c||"",onChange:S=>{u(S.target.value?parseInt(S.target.value):null),o(null)},required:!0,children:[e.jsx("option",{value:"",children:"-- Select Currency --"}),n.map(S=>e.jsx("option",{value:S.currencyID,children:S.currencyName},S.currencyID))]})]}),e.jsxs("div",{className:"col-md-3 offset-md-4",children:[e.jsxs("button",{type:"button",className:"btn btn-danger btn-sm rounded-pill me-2",onClick:N,disabled:!c||t.length===0,children:[e.jsx("i",{className:"fa fa-print me-1"})," Print"]}),e.jsxs("button",{type:"button",className:"btn btn-dark btn-sm rounded-pill",onClick:v,disabled:!c||t.length===0,children:[e.jsx("i",{className:"fa fa-file-excel-o me-1"})," Excel"]})]})]})})]}),e.jsx("div",{id:"printThisArea",children:e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-striped table-hover text-center",id:"mainTable",children:[e.jsx("thead",{className:"text-white",style:{background:"linear-gradient(to left, #b31217, #e52d27)",fontSize:"13px"},children:e.jsxs("tr",{children:[e.jsx("th",{children:"#"}),e.jsx("th",{children:"Customer Name"}),e.jsx("th",{children:"Customer Email"}),e.jsx("th",{children:"Customer Phone"}),e.jsx("th",{children:"Pending Amount"}),e.jsx("th",{"data-exclude":"true",children:"Action"})]})}),e.jsx("tbody",{children:h?e.jsx("tr",{children:e.jsxs("td",{colSpan:6,className:"text-center py-4",children:[e.jsx("i",{className:"fa fa-spinner fa-spin fa-2x"}),e.jsx("p",{className:"mt-2",children:"Loading..."})]})}):t.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"text-center py-4",children:c?"No records found":"Please select a currency to view pending customers"})}):e.jsxs(e.Fragment,{children:[t.map((S,E)=>e.jsxs("tr",{children:[e.jsx("td",{className:"p-3",children:E+1}),e.jsx("td",{className:"text-capitalize p-3",children:S.customer_name}),e.jsx("td",{className:"p-3",children:S.customer_email||"N/A"}),e.jsx("td",{className:"p-3",children:S.customer_phone||"N/A"}),e.jsx("td",{className:"p-3",children:parseFloat(S.total.toString()).toLocaleString()}),e.jsx("td",{"data-exclude":"true",children:e.jsxs("a",{href:"#",onClick:L=>{L.preventDefault(),b(S.main_customer)},className:"mt-2",style:{color:"#ED213A"},children:[e.jsx("i",{className:"fa fa-eye"})," View Ledger"]})})]},S.main_customer)),e.jsxs("tr",{children:[e.jsx("td",{colSpan:4,className:"text-end fw-bold p-3",children:"Total:"}),e.jsx("td",{className:"fw-bold p-3",children:p.toLocaleString()}),e.jsx("td",{"data-exclude":"true"})]})]})})]})})})]})}function pR(){const{id:s}=vv(),[t]=rc();Vn();const a=t.get("currencyID")||t.get("curID");console.log("ResidenceLedger - Route params:",{id:s}),console.log("ResidenceLedger - Search params:",{currencyID:t.get("currencyID"),curID:t.get("curID"),allParams:Object.fromEntries(t.entries())});const[n,r]=A.useState([]),[i,o]=A.useState(null),[c,u]=A.useState(""),[h,m]=A.useState(!1),[p,y]=A.useState(0),[g,j]=A.useState(0),[b,N]=A.useState(0),[v,S]=A.useState(1),[E,L]=A.useState(10),[z,V]=A.useState(1),[te,q]=A.useState(0);A.useEffect(()=>{console.log("ResidenceLedger useEffect - ID:",s,"CurrencyID:",a),s&&a?(B(),J(),P()):(console.warn("Missing required parameters - ID:",s,"CurrencyID:",a),W.fire("Error","Missing required parameters. Please provide customer ID and currency ID.","error"))},[s,a,v,E]);const B=async()=>{if(s)try{const me=new FormData;me.append("ID",s),console.log("Loading customer info for ID:",s);const D=await Ne.post("/invoice/get-customer-info.php",me,{headers:{"Content-Type":"multipart/form-data"}});if(console.log("Customer info response:",D),D&&D.data){let U=null;D.data.success&&D.data.data&&D.data.data.data?U=D.data.data.data[0]:D.data.data&&Array.isArray(D.data.data)?U=D.data.data[0]:Array.isArray(D.data)&&(U=D.data[0]),U&&o({customer_name:U.customer_name||"",customer_email:U.customer_email||"Nill",customer_phone:U.customer_phone||"Nill"})}}catch(me){console.error("Error loading customer info:",me),console.error("Error response:",me.response)}},J=async()=>{if(a)try{const me=new FormData;me.append("ID",a),console.log("Loading currency info for ID:",a);const D=await Ne.post("/invoice/get-ledger-currency.php",me,{headers:{"Content-Type":"multipart/form-data"}});if(console.log("Currency info response:",D),D&&D.data){let U=null;D.data.success&&D.data.data&&D.data.data.data?U=D.data.data.data[0]:D.data.data&&Array.isArray(D.data.data)?U=D.data.data[0]:Array.isArray(D.data)&&(U=D.data[0]),U&&u(U.currencyName||"")}}catch(me){console.error("Error loading currency info:",me),console.error("Error response:",me.response)}},P=async()=>{if(!s||!a){console.error("Missing parameters - ID:",s,"CurrencyID:",a);return}m(!0);try{const me=new FormData;me.append("ID",s),me.append("CurID",a),me.append("customerID",s),me.append("currencyID",a),me.append("page",v.toString()),me.append("limit",E.toString()),console.log("Loading ledger with ID:",s,"CurrencyID:",a,"Page:",v,"Limit:",E);const D=await Ne.post("/residence/residence-ledger-report.php",me,{headers:{"Content-Type":"multipart/form-data"}});if(console.log("Ledger response:",D),console.log("Response data:",D.data),D&&D.data){const U=D.data;let le=[],de=null,G=null;if(U.success&&U.data?Array.isArray(U.data.data)?(le=U.data.data,de=U.data.pagination||null,G=U.data.totals||null):Array.isArray(U.data)&&(le=U.data):Array.isArray(U)&&(le=U),r(le),G)y(G.totalCharges||0),j(G.totalPaid||0),N(G.outstandingBalance||0);else{let je=0,De=0;le.forEach(Pe=>{je+=parseFloat(Pe.sale_price?.toString()||"0")+parseFloat(Pe.fine?.toString()||"0")+parseFloat(Pe.cancellation_charges?.toString()||"0")+parseFloat(Pe.tawjeeh_charges?.toString()||"0")+parseFloat(Pe.iloe_charges?.toString()||"0")+parseFloat(Pe.custom_charges?.toString()||"0"),De+=parseFloat(Pe.residencePayment?.toString()||"0")+parseFloat(Pe.finePayment?.toString()||"0")+parseFloat(Pe.tawjeeh_payments?.toString()||"0")+parseFloat(Pe.iloe_payments?.toString()||"0")}),y(je),j(De),N(je-De)}de?(V(de.totalPages||1),q(de.totalRecords||le.length)):(V(1),q(le.length))}else r([]),y(0),j(0),N(0),V(1),q(0)}catch(me){console.error("Error loading ledger:",me),console.error("Error response:",me.response);const D=me.response?.data?.message||me.message||"Failed to load ledger";W.fire("Error",D,"error"),r([]),V(1),q(0)}finally{m(!1)}},K=A.useRef(null),H=()=>{if(!K.current){W.fire("Error","Print area not found","error");return}const me=window.open("","_blank");if(!me){W.fire("Error","Please allow popups to print","error");return}const D=K.current.innerHTML,U=i?.customer_name||"Customer";`${U}${new Date().toISOString().split("T")[0]}`,me.document.write(`
      <!DOCTYPE html>
      <html>
        <head>
          <title>Residence Ledger - ${U}</title>
          <meta charset="utf-8">
          <meta name="viewport" content="width=device-width, initial-scale=1.0">
          <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
          <style>
            * {
              margin: 0;
              padding: 0;
              box-sizing: border-box;
            }
            
            @page {
              size: A4 portrait;
              margin: 8mm 12mm;
            }
            
            html, body {
              width: 100%;
              height: auto;
              overflow: visible;
              font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
              font-size: 10px;
              color: #1a1a1a;
              background: #ffffff;
              padding: 0;
              margin: 0;
              line-height: 1.5;
            }
            
            .no-print {
              display: none !important;
            }
            
            .container-fluid {
              width: 100%;
              padding: 0;
              margin: 0;
            }
            
            .row {
              display: flex;
              flex-wrap: wrap;
              margin: 0;
              width: 100%;
            }
            
            .col-md-6 {
              width: 50%;
              padding: 0 10px;
            }
            
            .col-md-4 {
              width: 33.333%;
              padding: 0 10px;
            }
            
            .col-md-8 {
              width: 66.666%;
              padding: 0 10px;
            }
            
            .offset-md-2 {
              margin-left: 16.666%;
            }
            
            .offset-md-4 {
              margin-left: 33.333%;
            }
            
            .print-header {
              margin-bottom: 5px;
              page-break-inside: avoid;
              page-break-after: avoid;
              background: #000000;
              padding: 15px 20px;
              border-radius: 8px;
              color: white;
              position: relative;
              min-height: 180px;
            }
            
            .print-header .col-md-6 {
              display: flex;
              flex-direction: column;
              height: 100%;
            }
            
            .print-logo {
              height: auto;
              width: 100%;
              max-width: 150px;
              object-fit: contain;
              background: transparent;
              padding: 0;
              border-radius: 0;
              display: block;
              margin-bottom: 20px;
            }
            
            .print-company-info-wrapper {
              margin-top: auto;
              padding-top: 20px;
            }
            
            .print-company-info {
              font-family: 'Inter', sans-serif;
              font-size: 13px;
              margin-bottom: 4px;
              line-height: 1.6;
              color: rgba(255, 255, 255, 0.95);
              font-weight: 400;
            }
            
            .print-company-info b {
              font-size: 16px;
              font-weight: 600;
              color: #ffffff;
            }
            
            .print-customer-info {
              margin-top: 0;
              background: rgba(255, 255, 255, 0.1);
              padding: 15px;
              border-radius: 6px;
            }
            
            .print-customer-title {
              font-family: 'Inter', sans-serif;
              font-size: 16px;
              color: #ffffff;
              font-weight: 600;
              margin-top: 0;
              margin-bottom: 8px;
              text-transform: uppercase;
              letter-spacing: 0.5px;
            }
            
            .print-customer-detail {
              font-family: 'Inter', sans-serif;
              font-size: 13px;
              margin-bottom: 4px;
              line-height: 1.6;
              color: rgba(255, 255, 255, 0.95);
            }
            
            .print-date {
              font-family: 'Inter', sans-serif;
              font-size: 14px;
              color: rgba(255, 255, 255, 0.95);
              font-weight: 500;
            }
            
            hr.print-divider {
              border: none;
              width: 100%;
              border-bottom: 1px solid rgba(255, 255, 255, 0.3);
              margin: 8px 0 12px 0;
            }
            
            .table-responsive {
              width: 100%;
              overflow: visible;
              margin-top: 0;
              border-radius: 8px;
              overflow: hidden;
              box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
            }
            
            table {
              width: 100%;
              border-collapse: separate;
              border-spacing: 0;
              margin: 0;
              font-size: 11px;
              table-layout: fixed;
              background: white;
              max-width: 100%;
            }
            
            table th {
              background: #000000 !important;
              color: white !important;
              padding: 8px 4px;
              text-align: left;
              font-weight: 600;
              border: none;
              font-size: 11px;
              text-transform: uppercase;
              letter-spacing: 0.2px;
              font-family: 'Inter', sans-serif;
              -webkit-print-color-adjust: exact;
              print-color-adjust: exact;
              line-height: 1.4;
              overflow: hidden;
              text-overflow: ellipsis;
            }
            
            table th:first-child {
              border-top-left-radius: 8px;
              width: 3%;
            }
            
            table th:nth-child(13) {
              border-top-right-radius: 8px;
              width: 7%;
              max-width: 80px;
              padding: 8px 2px !important;
            }
            
            table td {
              padding: 7px 4px;
              border-bottom: 1px solid #e5e7eb;
              text-align: left;
              font-size: 11px;
              word-wrap: break-word;
              overflow: hidden;
              font-family: 'Inter', sans-serif;
              line-height: 1.4;
              max-width: 0;
            }
            
            table td:nth-child(13) {
              max-width: 80px;
              overflow: hidden;
              text-overflow: ellipsis;
              white-space: nowrap;
              padding: 4px 2px !important;
            }
            
            table tbody tr {
              page-break-inside: avoid;
              page-break-after: auto;
            }
            
            table tbody tr:nth-of-type(even) {
              background-color: #f9fafb;
            }
            
            table tbody tr:nth-of-type(odd) {
              background-color: #ffffff;
            }
            
            table tbody tr:last-child td {
              border-bottom: none;
            }
            
            .text-capitalize {
              text-transform: capitalize;
            }
            
            .text-muted {
              color: #6c757d;
            }
            
            small {
              font-size: 8px;
            }
            
            .print-totals {
              margin-top: 15px;
              page-break-inside: avoid;
              page-break-before: avoid;
              background: #000000;
              padding: 15px 20px;
              border-radius: 8px;
              color: white;
            }
            
            .print-totals .row {
              display: flex;
              justify-content: flex-end;
            }
            
            .print-totals .col-md-12 {
              text-align: right;
              width: 100%;
            }
            
            .print-totals .print-total-row {
              color: rgba(255, 255, 255, 0.95);
              text-align: right;
            }
            
            .print-totals .print-outstanding {
              color: #ffffff;
              text-align: right;
            }
            
            .print-totals hr {
              border-top: 1px solid rgba(255, 255, 255, 0.2);
              margin: 8px 0;
            }
            
            .print-total-row {
              font-size: 16px;
              font-weight: 600;
              margin-bottom: 10px;
              line-height: 1.8;
              color: rgba(255, 255, 255, 0.95);
              font-family: 'Inter', sans-serif;
              text-align: right;
            }
            
            .print-outstanding {
              font-size: 22px;
              font-weight: 700;
              margin-top: 12px;
              line-height: 1.8;
              color: #ffffff;
              font-family: 'Inter', sans-serif;
              padding-top: 12px;
              border-top: 2px solid rgba(255, 255, 255, 0.3);
              text-align: right;
            }
            
            .badge {
              padding: 2px 4px;
              border-radius: 6px;
              font-size: 8px;
              font-weight: 600;
              display: inline-block;
              text-transform: uppercase;
              letter-spacing: 0.1px;
              font-family: 'Inter', sans-serif;
              white-space: nowrap;
              overflow: hidden;
              text-overflow: ellipsis;
              max-width: 75px;
              line-height: 1.2;
            }
            
            .bg-success { 
              background: linear-gradient(135deg, #10b981 0%, #059669 100%) !important; 
              color: white; 
              box-shadow: 0 2px 4px rgba(16, 185, 129, 0.3);
            }
            .bg-danger { 
              background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%) !important; 
              color: white; 
              box-shadow: 0 2px 4px rgba(239, 68, 68, 0.3);
            }
            .bg-info { 
              background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%) !important; 
              color: white; 
              box-shadow: 0 2px 4px rgba(59, 130, 246, 0.3);
            }
            .bg-primary { 
              background: #000000 !important; 
              color: white; 
              box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
            }
            .bg-secondary { 
              background: linear-gradient(135deg, #6b7280 0%, #4b5563 100%) !important; 
              color: white; 
              box-shadow: 0 2px 4px rgba(107, 114, 128, 0.3);
            }
            
            hr {
              border: none;
              border-top: 1px solid rgba(0, 0, 0, 0.1);
              margin: 10px 0;
            }
            
            .text-muted {
              color: #6b7280;
              font-size: 8px;
            }
            
            small {
              font-size: 8px;
              opacity: 0.8;
            }
            
            @media print {
              html, body {
                width: 210mm;
                height: auto;
                min-height: 297mm;
                overflow: visible;
              }
              
              body {
                -webkit-print-color-adjust: exact;
                print-color-adjust: exact;
              }
              
              .container-fluid {
                page-break-inside: auto;
              }
              
              .print-header {
                page-break-after: avoid;
                page-break-inside: avoid;
                margin-bottom: 10px;
              }
              
              .table-responsive {
                page-break-inside: auto;
              }
              
              table {
                page-break-inside: auto;
              }
              
              table thead {
                display: table-header-group;
              }
              
              table tbody {
                display: table-row-group;
              }
              
              table tbody tr {
                page-break-inside: avoid;
                page-break-after: auto;
              }
              
              table th {
                -webkit-print-color-adjust: exact;
                print-color-adjust: exact;
              }
              
              .badge {
                -webkit-print-color-adjust: exact;
                print-color-adjust: exact;
              }
              
              .print-totals {
                page-break-before: avoid;
                page-break-inside: avoid;
              }
            }
          </style>
        </head>
        <body>
          <div class="container-fluid">
            ${D}
          </div>
        </body>
      </html>
    `),me.document.close(),setTimeout(()=>{me.focus(),me.print()},250)},se=me=>{const D=me?.toLowerCase()||"";let U="bg-secondary";return D==="active"?U="bg-success":D==="cancelled"||D==="replaced"||D==="cancelled & replaced"?U="bg-danger":D==="renewed"?U="bg-info":D==="completed"&&(U="bg-primary"),e.jsx("span",{className:`badge ${U}`,style:{WebkitPrintColorAdjust:"exact"},children:me})},X=me=>parseFloat(me?.toString()||"0").toLocaleString(),R=me=>{if(!me)return"N/A";try{const D=new Date(me),le=new Date().getTime()-D.getTime(),de=Math.floor(le/(1e3*60*60*24));return de<1?"today":de===1?"yesterday":de<7?`${de} days ago`:de<30?`${Math.floor(de/7)} weeks ago`:de<365?`${Math.floor(de/30)} months ago`:`${Math.floor(de/365)} years ago`}catch{return"N/A"}},Q=Math.min(v*E,te),Y=te>0?(v-1)*E+1:0;A.useEffect(()=>{v!==1&&S(1)},[E]);const $=me=>{me>=1&&me<=z&&S(me)};return e.jsx("div",{className:"residence-ledger-page",children:e.jsx("div",{className:"container-fluid",children:e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-md-12",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"row no-print",children:e.jsx("div",{className:"col-md-4 offset-md-8",children:e.jsx("button",{className:"btn btn-danger pull-right",onClick:H,children:"Print Ledger"})})}),e.jsx("div",{id:"printThisArea",ref:K,children:e.jsxs("div",{className:"card-body",children:[e.jsx("div",{className:"print-header",children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsx("img",{src:"/assets/logo-white.png",alt:"Logo",className:"print-logo"}),e.jsxs("div",{className:"print-company-info-wrapper",children:[e.jsx("p",{className:"print-company-info",children:e.jsx("b",{children:"Selab Nadiry Travel & Tourism"})}),e.jsx("p",{className:"print-company-info",children:"Address: Frij Murar Shop# 15, Deira, Dubai"}),e.jsx("p",{className:"print-company-info",children:"Contact:+971 4 298 4564,+971 58 514 0764"})]})]}),e.jsxs("div",{className:"col-md-4 offset-md-2 print-customer-info",children:[e.jsx("h3",{className:"print-customer-title",children:"Customer Information"}),e.jsx("hr",{className:"print-divider"}),e.jsxs("p",{className:"print-customer-detail",children:["Name: ",e.jsx("span",{className:"text-capitalize",children:i?.customer_name||"Loading..."})]}),e.jsxs("p",{className:"print-customer-detail",children:["Email: ",e.jsx("span",{children:i?.customer_email||"Loading..."})]}),e.jsxs("p",{className:"print-customer-detail",children:["Phone: ",e.jsx("span",{children:i?.customer_phone||"Loading..."})]}),e.jsxs("p",{className:"print-customer-detail",children:["Currency: ",e.jsx("span",{children:c||"Loading..."})]}),e.jsx("h3",{className:"print-customer-title",children:"Date"}),e.jsx("hr",{className:"print-divider"}),e.jsx("h3",{className:"print-date",children:new Date().toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})})]})]})}),!h&&n.length>0&&e.jsx("div",{className:"row no-print",style:{marginBottom:"15px",marginTop:"15px"},children:e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("label",{htmlFor:"recordsPerPage",className:"me-2",style:{marginBottom:0},children:"Records per page:"}),e.jsxs("select",{id:"recordsPerPage",className:"form-control form-control-sm",style:{width:"80px",display:"inline-block"},value:E,onChange:me=>L(Number(me.target.value)),children:[e.jsx("option",{value:5,children:"5"}),e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:25,children:"25"}),e.jsx("option",{value:50,children:"50"}),e.jsx("option",{value:100,children:"100"})]}),e.jsxs("span",{className:"ms-2 text-muted",children:["Showing ",Y," to ",Q," of ",te," records"]})]})})}),e.jsx("div",{className:"row",style:{marginTop:"5px"},children:e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{id:"myTable",className:"table table-striped table-hover table-bordered",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-danger text-white",children:[e.jsx("th",{style:{WebkitPrintColorAdjust:"exact"},children:"S#"}),e.jsx("th",{style:{WebkitPrintColorAdjust:"exact"},children:"Passenger Name"}),e.jsx("th",{style:{WebkitPrintColorAdjust:"exact"},children:"Establishment Name"}),e.jsx("th",{style:{WebkitPrintColorAdjust:"exact"},children:"Due Since"}),e.jsx("th",{style:{WebkitPrintColorAdjust:"exact"},children:"Total Sale"}),e.jsx("th",{style:{WebkitPrintColorAdjust:"exact"},children:"Total Fine"}),e.jsx("th",{style:{WebkitPrintColorAdjust:"exact"},children:"Cancellation Cost"}),e.jsx("th",{style:{WebkitPrintColorAdjust:"exact"},children:"TAWJEEH"}),e.jsx("th",{style:{WebkitPrintColorAdjust:"exact"},children:"ILOE"}),e.jsx("th",{style:{WebkitPrintColorAdjust:"exact"},children:"Custom Charges"}),e.jsx("th",{style:{WebkitPrintColorAdjust:"exact"},children:"Total Paid"}),e.jsx("th",{style:{WebkitPrintColorAdjust:"exact"},children:"Balance"}),e.jsx("th",{style:{WebkitPrintColorAdjust:"exact"},children:"Current Status"})]})}),e.jsx("tbody",{children:h?e.jsx("tr",{children:e.jsxs("td",{colSpan:13,className:"text-center py-4",children:[e.jsx("i",{className:"fa fa-spinner fa-spin fa-2x"}),e.jsx("p",{className:"mt-2",children:"Loading..."})]})}):n.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:13,className:"text-center py-4",children:"No outstanding balance records found for this customer with the selected currency"})}):n.map((me,D)=>{const U=parseFloat(me.residencePayment?.toString()||"0")+parseFloat(me.finePayment?.toString()||"0")+parseFloat(me.tawjeeh_payments?.toString()||"0")+parseFloat(me.iloe_payments?.toString()||"0"),de=parseFloat(me.sale_price?.toString()||"0")+parseFloat(me.fine?.toString()||"0")+parseFloat(me.cancellation_charges?.toString()||"0")+parseFloat(me.tawjeeh_charges?.toString()||"0")+parseFloat(me.iloe_charges?.toString()||"0")+parseFloat(me.custom_charges?.toString()||"0")-U;return e.jsxs("tr",{children:[e.jsx("td",{style:{WebkitPrintColorAdjust:"exact"},children:Y+D}),e.jsxs("td",{className:"text-capitalize",style:{WebkitPrintColorAdjust:"exact"},children:[me.main_passenger,e.jsx("br",{}),e.jsxs("small",{className:"text-muted",children:[e.jsx("i",{className:"fa fa-flag"})," ",me.nationality||"N/A"]})]}),e.jsx("td",{style:{WebkitPrintColorAdjust:"exact"},children:me.company_name||"N/A"}),e.jsx("td",{style:{WebkitPrintColorAdjust:"exact"},children:R(me.dt)}),e.jsx("td",{style:{WebkitPrintColorAdjust:"exact"},children:X(me.sale_price)}),e.jsx("td",{style:{WebkitPrintColorAdjust:"exact"},children:X(me.fine)}),e.jsx("td",{style:{WebkitPrintColorAdjust:"exact"},children:X(me.cancellation_charges)}),e.jsx("td",{style:{WebkitPrintColorAdjust:"exact"},children:X(me.tawjeeh_charges)}),e.jsx("td",{style:{WebkitPrintColorAdjust:"exact"},children:X(me.iloe_charges)}),e.jsx("td",{style:{WebkitPrintColorAdjust:"exact"},children:X(me.custom_charges)}),e.jsx("td",{style:{WebkitPrintColorAdjust:"exact"},children:X(U)}),e.jsx("td",{style:{WebkitPrintColorAdjust:"exact"},children:X(de)}),e.jsx("td",{style:{WebkitPrintColorAdjust:"exact"},children:se(me.current_status)})]},me.residenceID)})})]})})}),!h&&n.length>0&&z>1&&e.jsx("div",{className:"row no-print",style:{marginTop:"20px",marginBottom:"20px"},children:e.jsx("div",{className:"col-md-12",children:e.jsx("nav",{"aria-label":"Ledger pagination",children:e.jsxs("ul",{className:"pagination justify-content-center",children:[e.jsx("li",{className:`page-item ${v===1?"disabled":""}`,children:e.jsx("button",{className:"page-link",onClick:()=>$(v-1),disabled:v===1,children:"Previous"})}),Array.from({length:z},(me,D)=>D+1).map(me=>me===1||me===z||me>=v-1&&me<=v+1?e.jsx("li",{className:`page-item ${v===me?"active":""}`,children:e.jsx("button",{className:"page-link",onClick:()=>$(me),children:me})},me):me===v-2||me===v+2?e.jsx("li",{className:"page-item disabled",children:e.jsx("span",{className:"page-link",children:"..."})},me):null),e.jsx("li",{className:`page-item ${v===z?"disabled":""}`,children:e.jsx("button",{className:"page-link",onClick:()=>$(v+1),disabled:v===z,children:"Next"})})]})})})}),e.jsx("div",{className:"print-totals",children:e.jsxs("div",{style:{textAlign:"right"},children:[e.jsxs("p",{className:"print-total-row",children:["Total Charges: ",e.jsxs("span",{id:"total",children:[X(p)," ",c]})]}),e.jsx("hr",{}),e.jsxs("p",{className:"print-total-row",children:["Total Paid: ",e.jsxs("span",{id:"total_paid",children:[X(g)," ",c]})]}),e.jsx("hr",{}),e.jsx("p",{className:"print-outstanding",children:e.jsxs("b",{children:["Outstanding Balance: ",e.jsxs("span",{id:"outstanding_balance",children:[X(b)," ",c]})]})}),e.jsx("hr",{})]})})]})})]})})})})})}function gR({step:s,residence:t,isExpanded:a,onToggle:n,onUpdate:r,disabled:i}){const[o,c]=A.useState(!1),[u,h]=A.useState({}),[m,p]=A.useState(null),[y,g]=A.useState(!1),[j,b]=A.useState([]),[N,v]=A.useState([]),[S,E]=A.useState(1),[L,z]=A.useState(null),V=t.completedStep>=s.number,te=t.completedStep===s.number-1,q=t.completedStep<s.number-1,J={1:{fields:["mb_number","salaryCur","company","offerLetterCost","offerLetterCostCur","offerLChargOpt","offerLChargedEntity"],chargedType:"offerLetter",fileField:"offerLetterFile",currencyType:"offerLCostCur"},2:{fields:["insuranceCost","insuranceCur","insuranceChargOpt","insuranceChargedEntity"],chargedType:"insurance",fileField:"insuranceFile",currencyType:"insuranceCur"},3:{fields:["labor_card_id","labour_card_fee","laborCardCur","lrbChargOpt","lbrChargedEntity"],chargedType:"LaborCard",fileField:"laborCardFile",currencyType:"laborCardFeeCur"},4:{fields:["evisa_cost","eVisaCostCur","eVisaTChargOpt","eVisaTChargedEntity"],chargedType:"EVisaTyping",fileField:"eVisaFile",currencyType:"EvisaTying"},5:{fields:["changeStatusCost","changeStatusCur","changeSChargOpt","changeSChargedEntity"],chargedType:"changeStatus",fileField:"changeStatusFile",currencyType:"changeStatus"},6:{fields:["medical_cost","medicalCostCur","medicalTChargOpt","medicalTChargedEntity"],chargedType:"medicalTyping",fileField:"medicalFile",currencyType:"medicalTyping"},7:{fields:["emiratesIDCost","emiratesIDCostCur","emirateIDChargOpt","emiratesIDChargedEntity"],chargedType:"emiratesIDTyping",fileField:"emiratesIDFile",currencyType:"emiratesIDTyping"},8:{fields:["visaStampingCost","visaStampingCur","expiry_date","laborCardNumber","visaStampChargOpt","visaStampChargedEntity"],chargedType:"visaStamping",fileField:"visaStampingFile",currencyType:"visaStamping"},9:{fields:["emiratesIDNumber"],chargedType:null,fileField:"contractSubmissionFile",currencyType:null}}[s.number];A.useEffect(()=>{P()},[]),A.useEffect(()=>{m&&J&&(m.currencies&&j.length===0&&b(m.currencies),J.chargedType&&(S===1&&m.accounts&&N.length===0?(console.log("Loading accounts from lookups immediately:",m.accounts),v(m.accounts)):S===2&&m.suppliers&&N.length===0&&(console.log("Loading suppliers from lookups immediately:",m.suppliers),v(m.suppliers)),H().catch(D=>{console.log("API load failed, using lookups:",D)})))},[m,J,S]),A.useEffect(()=>{J&&(K(),J.chargedType&&H())},[s.number,t.residenceID,J]),A.useEffect(()=>{const D={};if(J&&(J.fields.forEach(U=>{const de={mb_number:"mb_number",salaryCur:"salaryCurID",company:"company",offerLetterCost:"offerLetterCost",offerLetterCostCur:"offerLetterCostCur",offerLChargOpt:"offerLChargOpt",offerLChargedEntity:"offerLChargedEntity",insuranceCost:"insuranceCost",insuranceCur:"insuranceCur",insuranceChargOpt:"insuranceChargOpt",insuranceChargedEntity:"insuranceChargedEntity",labor_card_id:"laborCardID",labour_card_fee:"laborCardFee",laborCardCur:"laborCardCur",lrbChargOpt:"lrbChargOpt",lbrChargedEntity:"lbrChargedEntity",evisa_cost:"eVisaCost",eVisaCostCur:"eVisaCur",eVisaTChargOpt:"eVisaTChargOpt",eVisaTChargedEntity:"eVisaTChargedEntity",changeStatusCost:"changeStatusCost",changeStatusCur:"changeStatusCur",changeSChargOpt:"changeSChargOpt",changeSChargedEntity:"changeSChargedEntity",medical_cost:"medicalTCost",medicalCostCur:"medicalTCur",medicalTChargOpt:"medicalTChargOpt",medicalTChargedEntity:"medicalTChargedEntity",emiratesIDCost:"emiratesIDCost",emiratesIDCostCur:"emiratesIDCur",emirateIDChargOpt:"emirateIDChargOpt",emiratesIDChargedEntity:"emiratesIDChargedEntity",visaStampingCost:"visaStampingCost",visaStampingCur:"visaStampingCur",expiry_date:"expiry_date",laborCardNumber:"LabourCardNumber",visaStampChargOpt:"visaStampChargOpt",visaStampChargedEntity:"visaStampChargedEntity",emiratesIDNumber:"EmiratesIDNumber"}[U]||U,G=t[de];G!=null&&(D[U]=G)}),J.chargedType)){const U=J.fields.find(le=>le.includes("ChargOpt"));if(U){const de={offerLChargOpt:"offerLetterSupplier",insuranceChargOpt:"insuranceSupplier",lrbChargOpt:"laborCardSupplier",eVisaTChargOpt:"eVisaSupplier",changeSChargOpt:"changeStatusSupplier",medicalTChargOpt:"medicalSupplier",emirateIDChargOpt:"emiratesIDSupplier",visaStampChargOpt:"visaStampingSupplier"}[U],je=de&&t[de]?2:1;E(je),D[U]=je}}h(D)},[s,t]);const P=async()=>{try{const D=await Ft.getLookups();p(D),D?.currencies&&b(D.currencies)}catch(D){console.error("Error loading lookups:",D)}},K=async()=>{try{if(J?.currencyType){const D=await Ft.getCurrencies(J.currencyType,t.residenceID);let U=D;D&&typeof D=="object"&&"data"in D&&(U=D.data),Array.isArray(U)?b(U):U&&Array.isArray(U.currencies)?b(U.currencies):m?.currencies?b(m.currencies):(console.warn("No currencies found in response:",D),b([]))}else m?.currencies&&b(m.currencies)}catch(D){console.error("Error loading currencies:",D),m?.currencies&&b(m.currencies)}},H=async D=>{if(J?.chargedType)try{const U=D!==void 0?D:S,le=await Ft.getChargedEntity(t.residenceID,J.chargedType,"load",U);console.log("Charged entities response:",le);let de=le;le&&typeof le=="object"&&"data"in le&&(de=le.data),Array.isArray(de)&&de.length>0?(console.log("Setting charged entities:",de),v(de)):(console.log("Using fallback from lookups, chargedON:",U),U===1&&m?.accounts?(console.log("Loading accounts from lookups:",m.accounts),v(m.accounts)):U===2&&m?.suppliers?(console.log("Loading suppliers from lookups:",m.suppliers),v(m.suppliers)):(console.warn("No charged entities found in response:",le),console.warn("Lookups available:",{accounts:m?.accounts,suppliers:m?.suppliers}),v([])))}catch(U){console.error("Error loading charged entities:",U);const le=D!==void 0?D:S;le===1&&m?.accounts?v(m.accounts):le===2&&m?.suppliers&&v(m.suppliers)}},se=D=>{E(D);const U=J.fields.find(le=>le.includes("ChargOpt"));U&&h({...u,[U]:D,[J.fields.find(le=>le.includes("ChargedEntity"))||""]:""}),H(D)},X=async(D=!1)=>{g(!0);try{const U={step:s.number,markComplete:D};Object.keys(u).forEach(de=>{U[de]=u[de]}),L&&J?.fileField&&(U.files={[J.fileField]:L}),await r(s.number,U,D)&&(c(!1),z(null))}finally{g(!1)}},R=D=>D?`AED ${D.toLocaleString()}`:"-",Q=D=>D?new Date(D).toLocaleDateString("en-GB"):"-",Y=()=>V?"bg-green-600":te?"bg-blue-600":"bg-gray-600",$=()=>V?"fa-check-circle":te?"fa-clock":"fa-lock",me=(D,U,le="text")=>{const de=u[D]||"";return le==="select"?e.jsx("select",{className:"form-select w-full",style:{backgroundColor:"#ffffff",color:"#2d353c",border:"1px solid #d1d5db"},value:de,onChange:G=>h({...u,[D]:G.target.value}),children:e.jsxs("option",{value:"",children:["--Select ",U,"--"]})}):le==="number"?e.jsx("input",{type:"number",className:"form-control w-full",style:{backgroundColor:"#ffffff",color:"#2d353c",border:"1px solid #d1d5db"},value:de,onChange:G=>h({...u,[D]:parseFloat(G.target.value)||0})}):le==="date"?e.jsx("input",{type:"date",className:"form-control w-full",style:{backgroundColor:"#ffffff",color:"#2d353c",border:"1px solid #d1d5db"},value:de,onChange:G=>h({...u,[D]:G.target.value})}):e.jsx("input",{type:"text",className:"form-control w-full",style:{backgroundColor:"#ffffff",color:"#2d353c",border:"1px solid #d1d5db"},value:de,onChange:G=>h({...u,[D]:G.target.value})})};return e.jsxs("div",{className:`card step-card overflow-hidden border-l-4 ${V?"border-green-600":te?"border-blue-600":"border-gray-600"}`,style:{backgroundColor:"#2d353c",borderColor:V?"#16a34a":te?"#2563eb":"#6b7280"},children:[e.jsx("div",{className:`p-4 cursor-pointer hover:bg-gray-700/50 transition-colors ${i?"opacity-60":""}`,onClick:n,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-full ${Y()} flex items-center justify-center text-white`,children:e.jsx("i",{className:`fa ${$()}`})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[e.jsx("i",{className:`fa ${s.icon}`}),"Step ",s.number,": ",s.title]}),e.jsxs("p",{className:"text-sm text-gray-400",children:[V&&"Completed",te&&"Ready to process",q&&"Locked - complete previous steps first"]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[s.fields.cost&&e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-xs text-gray-400",children:"Cost"}),e.jsx("div",{className:"text-white font-bold",children:R(s.fields.cost)})]}),s.fields.date&&e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-xs text-gray-400",children:"Date"}),e.jsx("div",{className:"text-white",children:Q(s.fields.date)})]}),e.jsx("i",{className:`fa ${a?"fa-chevron-up":"fa-chevron-down"} text-gray-400`})]})]})}),a&&e.jsx("div",{className:"border-t border-gray-700 p-4",style:{backgroundColor:"#1a1d23"},children:o?e.jsxs("div",{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[s.number===1&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"MB Number"}),me("mb_number","MB Number")]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Currency (Salary)"}),e.jsxs("select",{className:"form-select w-full",style:{backgroundColor:"#ffffff",color:"#2d353c",border:"1px solid #d1d5db"},value:u.salaryCur||"",onChange:D=>h({...u,salaryCur:parseInt(D.target.value)||null}),children:[e.jsx("option",{value:"",children:"Select Currency"}),j.map(D=>e.jsx("option",{value:D.currencyID,children:D.currencyName},D.currencyID))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Establishment"}),e.jsxs("select",{className:"form-select w-full",style:{backgroundColor:"#ffffff",color:"#2d353c",border:"1px solid #d1d5db"},value:u.company||"",onChange:D=>h({...u,company:parseInt(D.target.value)||null}),children:[e.jsx("option",{value:"",children:"Select Establishment"}),m?.companies?.map(D=>e.jsx("option",{value:D.company_id,children:D.company_name||D.username},D.company_id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Offer Letter Cost"}),me("offerLetterCost","Offer Letter Cost","number")]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Currency"}),e.jsxs("select",{className:"form-select w-full",style:{backgroundColor:"#ffffff",color:"#2d353c",border:"1px solid #d1d5db"},value:u.offerLetterCostCur||"",onChange:D=>h({...u,offerLetterCostCur:parseInt(D.target.value)||null}),children:[e.jsx("option",{value:"",children:"Select Currency"}),j.map(D=>e.jsx("option",{value:D.currencyID,children:D.currencyName},D.currencyID))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Charged ON"}),e.jsxs("select",{className:"form-select w-full",style:{backgroundColor:"#ffffff",color:"#2d353c",border:"1px solid #d1d5db"},value:u.offerLChargOpt||S,onChange:D=>se(parseInt(D.target.value)),children:[e.jsx("option",{value:"1",children:"Account"}),e.jsx("option",{value:"2",children:"Supplier"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Charged Entity"}),e.jsxs("select",{className:"form-select w-full",style:{backgroundColor:"#ffffff",color:"#2d353c",border:"1px solid #d1d5db"},value:u.offerLChargedEntity||"",onChange:D=>h({...u,offerLChargedEntity:parseInt(D.target.value)||null}),children:[e.jsxs("option",{value:"",children:["--Select ",S===1?"Account":"Supplier","--"]}),N.map(D=>e.jsx("option",{value:S===1?D.account_ID:D.supp_id,children:S===1?D.account_Name:D.supp_name},S===1?D.account_ID:D.supp_id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Attachment"}),e.jsx("input",{type:"file",className:"form-control w-full",style:{backgroundColor:"#ffffff",color:"#2d353c",border:"1px solid #d1d5db"},onChange:D=>z(D.target.files?.[0]||null)})]})]}),s.number===2&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Insurance Cost"}),me("insuranceCost","Insurance Cost","number")]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Currency"}),e.jsxs("select",{className:"form-select w-full",style:{backgroundColor:"#ffffff",color:"#2d353c",border:"1px solid #d1d5db"},value:u.insuranceCur||"",onChange:D=>h({...u,insuranceCur:parseInt(D.target.value)||null}),children:[e.jsx("option",{value:"",children:"Select Currency"}),j.map(D=>e.jsx("option",{value:D.currencyID,children:D.currencyName},D.currencyID))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Charged ON"}),e.jsxs("select",{className:"form-select w-full",style:{backgroundColor:"#ffffff",color:"#2d353c",border:"1px solid #d1d5db"},value:u.insuranceChargOpt||S,onChange:D=>se(parseInt(D.target.value)),children:[e.jsx("option",{value:"1",children:"Account"}),e.jsx("option",{value:"2",children:"Supplier"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Charged Entity"}),e.jsxs("select",{className:"form-select w-full",style:{backgroundColor:"#ffffff",color:"#2d353c",border:"1px solid #d1d5db"},value:u.insuranceChargedEntity||"",onChange:D=>h({...u,insuranceChargedEntity:parseInt(D.target.value)||null}),children:[e.jsxs("option",{value:"",children:["--Select ",S===1?"Account":"Supplier","--"]}),N.map(D=>e.jsx("option",{value:S===1?D.account_ID:D.supp_id,children:S===1?D.account_Name:D.supp_name},S===1?D.account_ID:D.supp_id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Attachment"}),e.jsx("input",{type:"file",className:"form-control w-full",style:{backgroundColor:"#ffffff",color:"#2d353c",border:"1px solid #d1d5db"},onChange:D=>z(D.target.files?.[0]||null)})]})]}),s.number===3&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Labor Card ID"}),me("labor_card_id","Labor Card ID")]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Labour Card Fee"}),me("labour_card_fee","Labour Card Fee","number")]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Currency"}),e.jsxs("select",{className:"form-select w-full",style:{backgroundColor:"#ffffff",color:"#2d353c",border:"1px solid #d1d5db"},value:u.laborCardCur||"",onChange:D=>h({...u,laborCardCur:parseInt(D.target.value)||null}),children:[e.jsx("option",{value:"",children:"Select Currency"}),j.map(D=>e.jsx("option",{value:D.currencyID,children:D.currencyName},D.currencyID))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Charged ON"}),e.jsxs("select",{className:"form-select w-full",style:{backgroundColor:"#ffffff",color:"#2d353c",border:"1px solid #d1d5db"},value:u.lrbChargOpt||S,onChange:D=>se(parseInt(D.target.value)),children:[e.jsx("option",{value:"1",children:"Account"}),e.jsx("option",{value:"2",children:"Supplier"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Charged Entity"}),e.jsxs("select",{className:"form-select w-full",style:{backgroundColor:"#ffffff",color:"#2d353c",border:"1px solid #d1d5db"},value:u.lbrChargedEntity||"",onChange:D=>h({...u,lbrChargedEntity:parseInt(D.target.value)||null}),children:[e.jsxs("option",{value:"",children:["--Select ",S===1?"Account":"Supplier","--"]}),N.map(D=>e.jsx("option",{value:S===1?D.account_ID:D.supp_id,children:S===1?D.account_Name:D.supp_name},S===1?D.account_ID:D.supp_id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Attachment"}),e.jsx("input",{type:"file",className:"form-control w-full",style:{backgroundColor:"#ffffff",color:"#2d353c",border:"1px solid #d1d5db"},onChange:D=>z(D.target.files?.[0]||null)})]})]}),s.number===4&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"E-Visa Cost"}),me("evisa_cost","E-Visa Cost","number")]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Currency"}),e.jsxs("select",{className:"form-select w-full",style:{backgroundColor:"#ffffff",color:"#2d353c",border:"1px solid #d1d5db"},value:u.eVisaCostCur||"",onChange:D=>h({...u,eVisaCostCur:parseInt(D.target.value)||null}),children:[e.jsx("option",{value:"",children:"Select Currency"}),j.map(D=>e.jsx("option",{value:D.currencyID,children:D.currencyName},D.currencyID))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Charged ON"}),e.jsxs("select",{className:"form-select w-full",style:{backgroundColor:"#ffffff",color:"#2d353c",border:"1px solid #d1d5db"},value:u.eVisaTChargOpt||S,onChange:D=>se(parseInt(D.target.value)),children:[e.jsx("option",{value:"1",children:"Account"}),e.jsx("option",{value:"2",children:"Supplier"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Charged Entity"}),e.jsxs("select",{className:"form-select w-full",style:{backgroundColor:"#ffffff",color:"#2d353c",border:"1px solid #d1d5db"},value:u.eVisaTChargedEntity||"",onChange:D=>h({...u,eVisaTChargedEntity:parseInt(D.target.value)||null}),children:[e.jsxs("option",{value:"",children:["--Select ",S===1?"Account":"Supplier","--"]}),N.map(D=>e.jsx("option",{value:S===1?D.account_ID:D.supp_id,children:S===1?D.account_Name:D.supp_name},S===1?D.account_ID:D.supp_id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Attachment"}),e.jsx("input",{type:"file",className:"form-control w-full",style:{backgroundColor:"#ffffff",color:"#2d353c",border:"1px solid #d1d5db"},onChange:D=>z(D.target.files?.[0]||null)})]})]}),s.number===5&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Change Status Cost"}),me("changeStatusCost","Change Status Cost","number")]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Currency"}),e.jsxs("select",{className:"form-select w-full",style:{backgroundColor:"#ffffff",color:"#2d353c",border:"1px solid #d1d5db"},value:u.changeStatusCur||"",onChange:D=>h({...u,changeStatusCur:parseInt(D.target.value)||null}),children:[e.jsx("option",{value:"",children:"Select Currency"}),j.map(D=>e.jsx("option",{value:D.currencyID,children:D.currencyName},D.currencyID))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Charged ON"}),e.jsxs("select",{className:"form-select w-full",style:{backgroundColor:"#ffffff",color:"#2d353c",border:"1px solid #d1d5db"},value:u.changeSChargOpt||S,onChange:D=>se(parseInt(D.target.value)),children:[e.jsx("option",{value:"1",children:"Account"}),e.jsx("option",{value:"2",children:"Supplier"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Charged Entity"}),e.jsxs("select",{className:"form-select w-full",style:{backgroundColor:"#ffffff",color:"#2d353c",border:"1px solid #d1d5db"},value:u.changeSChargedEntity||"",onChange:D=>h({...u,changeSChargedEntity:parseInt(D.target.value)||null}),children:[e.jsxs("option",{value:"",children:["--Select ",S===1?"Account":"Supplier","--"]}),N.map(D=>e.jsx("option",{value:S===1?D.account_ID:D.supp_id,children:S===1?D.account_Name:D.supp_name},S===1?D.account_ID:D.supp_id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Attachment"}),e.jsx("input",{type:"file",className:"form-control w-full",style:{backgroundColor:"#ffffff",color:"#2d353c",border:"1px solid #d1d5db"},onChange:D=>z(D.target.files?.[0]||null)})]})]}),s.number===6&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Medical Cost"}),me("medical_cost","Medical Cost","number")]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Currency"}),e.jsxs("select",{className:"form-select w-full",style:{backgroundColor:"#ffffff",color:"#2d353c",border:"1px solid #d1d5db"},value:u.medicalCostCur||"",onChange:D=>h({...u,medicalCostCur:parseInt(D.target.value)||null}),children:[e.jsx("option",{value:"",children:"Select Currency"}),j.map(D=>e.jsx("option",{value:D.currencyID,children:D.currencyName},D.currencyID))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Charged ON"}),e.jsxs("select",{className:"form-select w-full",style:{backgroundColor:"#ffffff",color:"#2d353c",border:"1px solid #d1d5db"},value:u.medicalTChargOpt||S,onChange:D=>se(parseInt(D.target.value)),children:[e.jsx("option",{value:"1",children:"Account"}),e.jsx("option",{value:"2",children:"Supplier"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Charged Entity"}),e.jsxs("select",{className:"form-select w-full",style:{backgroundColor:"#ffffff",color:"#2d353c",border:"1px solid #d1d5db"},value:u.medicalTChargedEntity||"",onChange:D=>h({...u,medicalTChargedEntity:parseInt(D.target.value)||null}),children:[e.jsxs("option",{value:"",children:["--Select ",S===1?"Account":"Supplier","--"]}),N.map(D=>e.jsx("option",{value:S===1?D.account_ID:D.supp_id,children:S===1?D.account_Name:D.supp_name},S===1?D.account_ID:D.supp_id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Attachment"}),e.jsx("input",{type:"file",className:"form-control w-full",style:{backgroundColor:"#ffffff",color:"#2d353c",border:"1px solid #d1d5db"},onChange:D=>z(D.target.files?.[0]||null)})]})]}),s.number===7&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Emirates ID Cost"}),me("emiratesIDCost","Emirates ID Cost","number")]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Currency"}),e.jsxs("select",{className:"form-select w-full",style:{backgroundColor:"#ffffff",color:"#2d353c",border:"1px solid #d1d5db"},value:u.emiratesIDCostCur||"",onChange:D=>h({...u,emiratesIDCostCur:parseInt(D.target.value)||null}),children:[e.jsx("option",{value:"",children:"Select Currency"}),j.map(D=>e.jsx("option",{value:D.currencyID,children:D.currencyName},D.currencyID))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Charged ON"}),e.jsxs("select",{className:"form-select w-full",style:{backgroundColor:"#ffffff",color:"#2d353c",border:"1px solid #d1d5db"},value:u.emirateIDChargOpt||S,onChange:D=>se(parseInt(D.target.value)),children:[e.jsx("option",{value:"1",children:"Account"}),e.jsx("option",{value:"2",children:"Supplier"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Charged Entity"}),e.jsxs("select",{className:"form-select w-full",style:{backgroundColor:"#ffffff",color:"#2d353c",border:"1px solid #d1d5db"},value:u.emiratesIDChargedEntity||"",onChange:D=>h({...u,emiratesIDChargedEntity:parseInt(D.target.value)||null}),children:[e.jsxs("option",{value:"",children:["--Select ",S===1?"Account":"Supplier","--"]}),N.map(D=>e.jsx("option",{value:S===1?D.account_ID:D.supp_id,children:S===1?D.account_Name:D.supp_name},S===1?D.account_ID:D.supp_id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Attachment"}),e.jsx("input",{type:"file",className:"form-control w-full",style:{backgroundColor:"#ffffff",color:"#2d353c",border:"1px solid #d1d5db"},onChange:D=>z(D.target.files?.[0]||null)})]})]}),s.number===8&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Visa Stamping Cost"}),me("visaStampingCost","Visa Stamping Cost","number")]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Currency"}),e.jsxs("select",{className:"form-select w-full",style:{backgroundColor:"#ffffff",color:"#2d353c",border:"1px solid #d1d5db"},value:u.visaStampingCur||"",onChange:D=>h({...u,visaStampingCur:parseInt(D.target.value)||null}),children:[e.jsx("option",{value:"",children:"Select Currency"}),j.map(D=>e.jsx("option",{value:D.currencyID,children:D.currencyName},D.currencyID))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Expiry Date"}),me("expiry_date","Expiry Date","date")]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Labor Card Number"}),me("laborCardNumber","Labor Card Number")]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Charged ON"}),e.jsxs("select",{className:"form-select w-full",style:{backgroundColor:"#ffffff",color:"#2d353c",border:"1px solid #d1d5db"},value:u.visaStampChargOpt||S,onChange:D=>se(parseInt(D.target.value)),children:[e.jsx("option",{value:"1",children:"Account"}),e.jsx("option",{value:"2",children:"Supplier"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Charged Entity"}),e.jsxs("select",{className:"form-select w-full",style:{backgroundColor:"#ffffff",color:"#2d353c",border:"1px solid #d1d5db"},value:u.visaStampChargedEntity||"",onChange:D=>h({...u,visaStampChargedEntity:parseInt(D.target.value)||null}),children:[e.jsxs("option",{value:"",children:["--Select ",S===1?"Account":"Supplier","--"]}),N.map(D=>e.jsx("option",{value:S===1?D.account_ID:D.supp_id,children:S===1?D.account_Name:D.supp_name},S===1?D.account_ID:D.supp_id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Attachment"}),e.jsx("input",{type:"file",className:"form-control w-full",style:{backgroundColor:"#ffffff",color:"#2d353c",border:"1px solid #d1d5db"},onChange:D=>z(D.target.files?.[0]||null)})]})]}),s.number===9&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Emirates ID Number"}),me("emiratesIDNumber","Emirates ID Number")]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Attachment"}),e.jsx("input",{type:"file",className:"form-control w-full",style:{backgroundColor:"#ffffff",color:"#2d353c",border:"1px solid #d1d5db"},onChange:D=>z(D.target.files?.[0]||null)})]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(pr,{onClick:()=>X(!1),disabled:y,children:[e.jsx("i",{className:"fa fa-save mr-2"}),y?"Saving...":"Save"]}),!V&&e.jsxs(pr,{variant:"success",onClick:()=>X(!0),disabled:y,children:[e.jsx("i",{className:"fa fa-check mr-2"}),y?"Saving...":"Save & Mark Complete"]}),e.jsx(pr,{variant:"secondary",onClick:()=>{c(!1),z(null)},disabled:y,children:"Cancel"})]})]}):e.jsxs("div",{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[s.fields.cost!==void 0&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Cost"}),e.jsx("div",{className:"text-white",children:R(s.fields.cost)})]}),s.fields.supplier&&m&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Supplier"}),e.jsx("div",{className:"text-white",children:m.suppliers?.find(D=>D.supplier_id===s.fields.supplier)?.supplier_name||"-"})]}),s.fields.account&&m&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Account"}),e.jsx("div",{className:"text-white",children:m.accounts?.find(D=>D.account_ID===s.fields.account)?.account_Name||"-"})]}),s.fields.status&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Status"}),e.jsx("div",{className:"text-white capitalize",children:s.fields.status})]}),s.fields.date&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Date"}),e.jsx("div",{className:"text-white",children:Q(s.fields.date)})]}),s.fields.mb_number&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"MB Number"}),e.jsx("div",{className:"text-white",children:s.fields.mb_number})]}),s.fields.laborCardID&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Labor Card ID"}),e.jsx("div",{className:"text-white",children:s.fields.laborCardID})]}),s.fields.emiratesIDNumber&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Emirates ID Number"}),e.jsx("div",{className:"text-white",children:s.fields.emiratesIDNumber})]}),s.fields.laborCardNumber&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Labour Card Number"}),e.jsx("div",{className:"text-white",children:s.fields.laborCardNumber})]}),s.fields.expiryDate&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Visa Expiry Date"}),e.jsx("div",{className:"text-white",children:Q(s.fields.expiryDate)})]})]}),!i&&!q&&e.jsx("div",{className:"flex gap-2",children:e.jsxs(pr,{size:"sm",onClick:()=>c(!0),children:[e.jsx("i",{className:"fa fa-edit mr-2"}),V?"Edit Step":"Process Step"]})})]})})]})}function xR({residence:s,onStepUpdate:t,disabled:a}){const[n,r]=A.useState(s.completedStep+1),i=[{number:1,title:"Offer Letter",icon:"fa-file-contract",fields:{cost:s.offerLetterCost,currency:s.offerLetterCostCur,supplier:s.offerLetterSupplier,account:s.offerLetterAccount,status:s.offerLetterStatus,date:s.offerLetterDate},fieldNames:{cost:"offerLetterCost",currency:"offerLetterCostCur",supplier:"offerLetterSupplier",account:"offerLetterAccount",status:"offerLetterStatus",date:"offerLetterDate"}},{number:2,title:"Insurance",icon:"fa-shield-alt",fields:{cost:s.insuranceCost,currency:s.insuranceCur,supplier:s.insuranceSupplier,account:s.insuranceAccount,date:s.insuranceDate},fieldNames:{cost:"insuranceCost",currency:"insuranceCur",supplier:"insuranceSupplier",account:"insuranceAccount",date:"insuranceDate"}},{number:3,title:"Labor Card",icon:"fa-id-card",fields:{mb_number:s.mb_number,laborCardID:s.laborCardID,cost:s.laborCardFee,currency:s.laborCardCur,supplier:s.laborCardSupplier,account:s.laborCardAccount,date:s.laborCardDate},fieldNames:{mb_number:"mb_number",laborCardID:"laborCardID",cost:"laborCardFee",currency:"laborCardCur",supplier:"laborCardSupplier",account:"laborCardAccount",date:"laborCardDate"}},{number:4,title:"E-Visa",icon:"fa-passport",fields:{cost:s.eVisaCost,currency:s.eVisaCur,supplier:s.eVisaSupplier,account:s.eVisaAccount,status:s.eVisaStatus,date:s.eVisaDate},fieldNames:{cost:"eVisaCost",currency:"eVisaCur",supplier:"eVisaSupplier",account:"eVisaAccount",status:"eVisaStatus",date:"eVisaDate"}},{number:5,title:"Change Status",icon:"fa-exchange-alt",fields:{cost:s.changeStatusCost,currency:s.changeStatusCur,supplier:s.changeStatusSupplier,account:s.changeStatusAccount,date:s.changeStatusDate},fieldNames:{cost:"changeStatusCost",currency:"changeStatusCur",supplier:"changeStatusSupplier",account:"changeStatusAccount",date:"changeStatusDate"}},{number:6,title:"Medical Test",icon:"fa-heartbeat",fields:{cost:s.medicalTCost,currency:s.medicalTCur,supplier:s.medicalSupplier,account:s.medicalAccount,date:s.medicalDate},fieldNames:{cost:"medicalTCost",currency:"medicalTCur",supplier:"medicalSupplier",account:"medicalAccount",date:"medicalDate"}},{number:7,title:"Emirates ID",icon:"fa-id-badge",fields:{cost:s.emiratesIDCost,currency:s.emiratesIDCur,supplier:s.emiratesIDSupplier,account:s.emiratesIDAccount,emiratesIDNumber:s.EmiratesIDNumber,date:s.emiratesIDDate},fieldNames:{cost:"emiratesIDCost",currency:"emiratesIDCur",supplier:"emiratesIDSupplier",account:"emiratesIDAccount",emiratesIDNumber:"EmiratesIDNumber",date:"emiratesIDDate"}},{number:8,title:"Visa Stamping",icon:"fa-stamp",fields:{cost:s.visaStampingCost,currency:s.visaStampingCur,supplier:s.visaStampingSupplier,account:s.visaStampingAccount,laborCardNumber:s.LabourCardNumber,expiryDate:s.expiry_date},fieldNames:{cost:"visaStampingCost",currency:"visaStampingCur",supplier:"visaStampingSupplier",account:"visaStampingAccount",laborCardNumber:"LabourCardNumber",expiryDate:"expiry_date"}},{number:9,title:"EID Received",icon:"fa-inbox",fields:{received:s.eid_received,receiveDate:s.eid_received_date,expiry:s.eid_expiry},fieldNames:{received:"eid_received",receiveDate:"eid_received_date",expiry:"eid_expiry"}},{number:10,title:"EID Delivered",icon:"fa-check-circle",fields:{delivered:s.eid_delivered,deliveredDate:s.eid_delivered_datetime},fieldNames:{delivered:"eid_delivered",deliveredDate:"eid_delivered_datetime"}}];return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("span",{className:"text-sm",style:{color:"#9ca3af"},children:"Overall Progress"}),e.jsxs("span",{className:"text-sm font-bold",style:{color:"#ffffff"},children:[Math.round(s.completedStep/10*100),"%"]})]}),e.jsx("div",{className:"w-full rounded-full h-3 overflow-hidden",style:{backgroundColor:"#374151"},children:e.jsx("div",{className:"h-full transition-all duration-500 rounded-full",style:{width:`${s.completedStep/10*100}%`,background:"linear-gradient(to right, #dc2626, #991b1b)"}})}),e.jsxs("div",{className:"flex justify-between mt-2 text-xs",style:{color:"#6b7280"},children:[e.jsx("span",{children:"Not Started"}),e.jsx("span",{children:"In Progress"}),e.jsx("span",{children:"Completed"})]})]}),i.map(o=>e.jsx(gR,{step:o,residence:s,isExpanded:n===o.number,onToggle:()=>r(n===o.number?null:o.number),onUpdate:t,disabled:a},o.number))]})}function bR({residence:s}){const t=n=>n?new Date(n).toLocaleDateString("en-GB"):"-",a=(n,r="AED")=>n?`${r} ${n.toLocaleString()}`:"-";return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"card p-4",style:{backgroundColor:"#2d353c",border:"1px solid #495057"},children:[e.jsxs("h3",{className:"text-lg font-bold text-white mb-3 border-b border-gray-700 pb-2",children:[e.jsx("i",{className:"fa fa-user mr-2"}),"Customer Information"]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Customer:"}),e.jsx("span",{className:"text-white font-medium",children:s.customer_name||"-"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Phone:"}),e.jsx("span",{className:"text-white",children:s.customer_phone||"-"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Email:"}),e.jsx("span",{className:"text-white text-xs",children:s.customer_email||"-"})]})]})]}),e.jsxs("div",{className:"card p-4",style:{backgroundColor:"#2d353c",border:"1px solid #495057"},children:[e.jsxs("h3",{className:"text-lg font-bold text-white mb-3 border-b border-gray-700 pb-2",children:[e.jsx("i",{className:"fa fa-passport mr-2"}),"Passenger Information"]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Name:"}),e.jsx("span",{className:"text-white font-medium",children:s.passenger_name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Nationality:"}),e.jsx("span",{className:"text-white",children:s.nationality_name||"-"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"DOB:"}),e.jsx("span",{className:"text-white",children:t(s.dob)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Gender:"}),e.jsx("span",{className:"text-white",children:s.gender||"-"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Passport:"}),e.jsx("span",{className:"text-white",children:s.passportNumber||"-"})]}),s.passportExpiryDate&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Passport Expiry:"}),e.jsx("span",{className:"text-white",children:t(s.passportExpiryDate)})]}),s.uid&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"UID:"}),e.jsx("span",{className:"text-white",children:s.uid})]}),s.EmiratesIDNumber&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Emirates ID:"}),e.jsx("span",{className:"text-white",children:s.EmiratesIDNumber})]})]})]}),e.jsxs("div",{className:"card p-4",style:{backgroundColor:"#2d353c",border:"1px solid #495057"},children:[e.jsxs("h3",{className:"text-lg font-bold text-white mb-3 border-b border-gray-700 pb-2",children:[e.jsx("i",{className:"fa fa-briefcase mr-2"}),"Visa & Employment"]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Visa Type:"}),e.jsx("span",{className:"text-white",children:s.visa_type_name||"-"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Company:"}),e.jsx("span",{className:"text-white",children:s.company_name||"Individual"})]}),s.position_name&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Position:"}),e.jsx("span",{className:"text-white",children:s.position_name})]}),s.salary_amount&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Salary:"}),e.jsx("span",{className:"text-white",children:a(s.salary_amount)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Type:"}),e.jsx("span",{className:"text-white",children:s.InsideOutside||"-"})]})]})]}),e.jsxs("div",{className:"card p-4",style:{backgroundColor:"#2d353c",border:"1px solid #495057"},children:[e.jsxs("h3",{className:"text-lg font-bold text-white mb-3 border-b border-gray-700 pb-2",children:[e.jsx("i",{className:"fa fa-money-bill mr-2"}),"Financial Summary"]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Sale Price:"}),e.jsx("span",{className:"text-green-400 font-bold",children:a(s.sale_price,s.sale_currency_symbol)})]}),(()=>{const n=parseFloat(s.custom_charges_total)||0,r=(s.offerLetterCost||0)+(s.insuranceCost||0)+(s.laborCardFee||0)+(s.eVisaCost||0)+(s.changeStatusCost||0)+(s.medicalTCost||0)+(s.emiratesIDCost||0)+(s.visaStampingCost||0)+(s.iloe_cost||0)+(s.tawjeeh_cost||0)+n,i=s.sale_price-r;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Total Costs:"}),e.jsxs("span",{className:"text-red-400 font-bold",children:["AED ",r.toLocaleString()]})]}),n>0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Custom Charges:"}),e.jsxs("span",{className:"text-yellow-400 font-bold",children:["AED ",n.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between pt-2 border-t border-gray-700",children:[e.jsx("span",{className:"text-gray-400",children:"Profit:"}),e.jsxs("span",{className:`font-bold ${i>=0?"text-green-400":"text-red-400"}`,children:["AED ",i.toLocaleString()]})]})]})})()]})]}),e.jsxs("div",{className:"card p-4",style:{backgroundColor:"#2d353c",border:"1px solid #495057"},children:[e.jsxs("h3",{className:"text-lg font-bold text-white mb-3 border-b border-gray-700 pb-2",children:[e.jsx("i",{className:"fa fa-clock mr-2"}),"Important Dates"]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Created:"}),e.jsx("span",{className:"text-white",children:t(s.datetime)})]}),s.expiry_date&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Visa Expiry:"}),e.jsx("span",{className:"text-white",children:t(s.expiry_date)})]}),s.eid_expiry&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"EID Expiry:"}),e.jsx("span",{className:"text-white",children:t(s.eid_expiry)})]}),s.cancelDate&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-red-400",children:"Cancelled:"}),e.jsx("span",{className:"text-red-300",children:t(s.cancelDate)})]})]})]}),s.remarks&&e.jsxs("div",{className:"card p-4",style:{backgroundColor:"#2d353c",border:"1px solid #495057"},children:[e.jsxs("h3",{className:"text-lg font-bold text-white mb-3 border-b border-gray-700 pb-2",children:[e.jsx("i",{className:"fa fa-comment mr-2"}),"Remarks"]}),e.jsx("p",{className:"text-sm text-gray-300",children:s.remarks})]})]})}function yR(){const{id:s}=vv(),t=Vn(),[a,n]=A.useState(null),[r,i]=A.useState(!0),[o,c]=A.useState(""),[u,h]=A.useState(!1);A.useEffect(()=>{s&&m()},[s]);const m=async()=>{if(s){i(!0),c("");try{const g=await Ft.getResidence(parseInt(s));n(g)}catch(g){c(g.response?.data?.message||"An error occurred while loading residence")}finally{i(!1)}}},p=async(g,j,b)=>{if(!a)return!1;try{const N={step:g,markComplete:b};return Object.keys(j).forEach(v=>{v!=="step"&&v!=="markComplete"&&v!=="files"&&(N[v]=j[v])}),j.files&&(N.files=j.files),await Ft.updateStep(a.residenceID,N),await m(),!0}catch(N){return alert(N.response?.data?.message||"An error occurred while updating step"),!1}},y=async g=>{if(a)try{await Ft.cancelResidence(a.residenceID,g),h(!1),await m(),alert("Residence cancelled successfully")}catch(j){alert(j.response?.data?.message||"An error occurred while cancelling residence")}};return r?e.jsx("div",{className:"flex items-center justify-center h-screen",children:e.jsx(u0,{})}):o||!a?e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"bg-red-900 border border-red-700 text-white px-4 py-3 rounded mb-4",children:o||"Residence not found"}),e.jsxs(pr,{onClick:()=>t("/residence"),children:[e.jsx("i",{className:"fa fa-arrow-left mr-2"}),"Back to List"]})]}):e.jsxs("div",{className:"residence-detail-page p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(pr,{variant:"secondary",size:"sm",onClick:()=>t("/residence"),children:e.jsx("i",{className:"fa fa-arrow-left"})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-white",children:["Residence #",a.residenceID]}),e.jsx("p",{className:"text-gray-400 mt-1",children:a.passenger_name})]})]})}),e.jsxs("div",{className:"flex gap-2",children:[!a.cancelled&&!a.hold&&a.completedStep<10&&e.jsxs(pr,{variant:"danger",onClick:()=>h(!0),children:[e.jsx("i",{className:"fa fa-times-circle mr-2"}),"Cancel Residence"]}),e.jsxs(pr,{variant:"secondary",onClick:m,children:[e.jsx("i",{className:"fa fa-sync mr-2"}),"Refresh"]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[a.cancelled&&e.jsx("span",{className:"px-3 py-1 text-sm font-semibold rounded bg-red-600 text-white",children:"CANCELLED"}),a.hold&&e.jsx("span",{className:"px-3 py-1 text-sm font-semibold rounded bg-yellow-600 text-white",children:"ON HOLD"}),a.completedStep===10&&!a.cancelled&&e.jsx("span",{className:"px-3 py-1 text-sm font-semibold rounded bg-green-600 text-white",children:"COMPLETED"}),a.completedStep<10&&!a.cancelled&&!a.hold&&e.jsxs("span",{className:"px-3 py-1 text-sm font-semibold rounded bg-blue-600 text-white",children:["IN PROGRESS - STEP ",a.completedStep,"/10"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsx(bR,{residence:a})}),e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"card p-6",style:{backgroundColor:"#2d353c",border:"1px solid #495057"},children:[e.jsx("h2",{className:"text-xl font-bold mb-6",style:{color:"#ffffff"},children:"10-Step Workflow Process"}),e.jsx(xR,{residence:a,onStepUpdate:p,disabled:a.cancelled===1||a.hold===1})]})})]}),u&&e.jsx(Q5,{residence:a,onCancel:y,onClose:()=>h(!1)})]})}function vR(){const s=Vn(),[t,a]=A.useState(1),[n,r]=A.useState({customer_id:null,insideOutside:"",res_type:"mainland",uid:"",salary_amount:null,position:null,sale_amount:null,sale_currency_type:null,tawjeeh_included:!1,insurance_included:!1,passengerName:"",nationality:null,passportNumber:"",passportExpiryDate:"",gender:"",dob:"",passportFile:null,photoFile:null,emiratesIdFrontFile:null,emiratesIdBackFile:null}),[i,o]=A.useState(null),[c,u]=A.useState(!0),[h,m]=A.useState(!1),[p,y]=A.useState(""),[g,j]=A.useState(!1),b=A.useRef(null);A.useEffect(()=>{N()},[]),A.useEffect(()=>{const R=Q=>{b.current&&!b.current.contains(Q.target)&&j(!1)};return g&&document.addEventListener("mousedown",R),()=>{document.removeEventListener("mousedown",R)}},[g]);const N=async()=>{try{const R=await Ft.getLookups();o(R)}catch{W.fire("Error","Failed to load form data","error")}finally{u(!1)}},v=(R,Q)=>{r(Y=>({...Y,[R]:Q}))},S=(R,Q)=>{r(Y=>({...Y,[R]:Q}))},E=()=>n.customer_id?n.insideOutside?n.insideOutside==="Inside"&&!n.uid.trim()?(W.fire("Validation Error","UID is required for Inside passengers","error"),!1):!n.salary_amount||n.salary_amount<=0?(W.fire("Validation Error","Please enter a valid salary amount","error"),!1):!n.sale_amount||n.sale_amount<=0?(W.fire("Validation Error","Please enter a valid sale amount","error"),!1):n.sale_currency_type?!0:(W.fire("Validation Error","Please select currency","error"),!1):(W.fire("Validation Error","Please select Inside/Outside","error"),!1):(W.fire("Validation Error","Please select a customer","error"),!1),L=()=>n.passportFile?n.photoFile?n.passengerName.trim()?n.nationality?n.passportNumber.trim()?n.passportExpiryDate?n.gender?n.dob?!0:(W.fire("Validation Error","Date of birth is required","error"),!1):(W.fire("Validation Error","Please select gender","error"),!1):(W.fire("Validation Error","Passport expiry date is required","error"),!1):(W.fire("Validation Error","Passport number is required","error"),!1):(W.fire("Validation Error","Please select nationality","error"),!1):(W.fire("Validation Error","Passenger name is required","error"),!1):(W.fire("Validation Error","Please upload passport photo","error"),!1):(W.fire("Validation Error","Please upload passport document","error"),!1),z=R=>{if(R&&(R.preventDefault(),R.stopPropagation()),t===1){if(!E())return}else if(t===2&&!L())return;a(Q=>Math.min(Q+1,3))},V=()=>{a(R=>Math.max(R-1,1))},te=async R=>{if(R.preventDefault(),!!L()){m(!0);try{const Q={customer_id:n.customer_id,passengerName:n.passengerName,nationality:n.nationality,passportNumber:n.passportNumber,passportExpiryDate:n.passportExpiryDate,gender:n.gender,dob:n.dob,visaType:17,sale_amount:n.sale_amount,sale_currency_type:n.sale_currency_type,insideOutside:n.insideOutside,uid:n.uid||null,salary_amount:n.salary_amount,position:n.position||0,res_type:n.res_type,tawjeeh_included:n.tawjeeh_included?1:0,insurance_included:n.insurance_included?1:0,passportFile:n.passportFile,photoFile:n.photoFile,emiratesIdFrontFile:n.emiratesIdFrontFile,emiratesIdBackFile:n.emiratesIdBackFile},Y=await Ft.createResidence(Q);W.fire({title:"Residence Created Successfully!",html:`<div class="alert alert-success">
                <strong>New Residence ID: ${Y.data?.residenceID}</strong><br>
                Basic information has been saved. What would you like to do next?
              </div>`,icon:"success",showCancelButton:!0,confirmButtonText:"Continue Editing",cancelButtonText:"Stay in Report",confirmButtonColor:"#2563eb",cancelButtonColor:"#10b981"}).then($=>{$.isConfirmed?s(`/residence/${Y.data?.residenceID}`):s("/residence")})}catch(Q){const Y=Q.response?.data?.message||"An error occurred while creating residence";if(Y.includes("DUPLICATE_ACTIVE")){const $=Y.split("|"),me=$[1],D=$[2];W.fire({title:"Duplicate Record",html:`A residence record already exists for this passport:<br><strong>${D}</strong> (ID: ${me})`,icon:"warning",confirmButtonText:"OK"})}else W.fire("Error",Y,"error")}finally{m(!1)}}},q=p?i?.customers&&Array.isArray(i.customers)?i.customers.filter(R=>R.customer_name?.toLowerCase().includes(p.toLowerCase())||R.customer_phone?.includes(p)||R.customer_email?.toLowerCase().includes(p.toLowerCase())):[]:i?.customers&&Array.isArray(i.customers)?i.customers:[],B=()=>n.customer_id&&q&&Array.isArray(q)?q.find(R=>R.customer_id===n.customer_id):null,J=()=>{const R=B();return R?R.customer_phone?`${R.customer_name} - ${R.customer_phone}`:R.customer_name:"Select Customer"},P=()=>i?.nationalities&&Array.isArray(i.nationalities)?i.nationalities.find(R=>R.nationality_id===n.nationality):null,K=()=>i?.currencies&&Array.isArray(i.currencies)?i.currencies.find(R=>R.currencyID===n.sale_currency_type):null,H=()=>i?.positions&&Array.isArray(i.positions)?i.positions.find(R=>R.position_id===n.position):null;if(c)return e.jsx("div",{className:"flex items-center justify-center h-screen",children:e.jsx(u0,{})});const se=t/3*100,X={1:"Step 1: Basic Information",2:"Step 2: Documents & Passport",3:"Step 3: Confirmation"};return e.jsx("div",{className:"create-residence-page",children:e.jsx("div",{className:"container-fluid p-4",children:e.jsxs("div",{className:"card bg-gray-800 border-0",children:[e.jsxs("div",{className:"card-header bg-primary text-white d-flex justify-content-between align-items-center",children:[e.jsxs("h5",{className:"mb-0",children:[e.jsx("i",{className:"fa fa-plus-circle me-2"}),"Add New Residence - ",e.jsx("span",{id:"modalStepTitle",children:X[t]})]}),e.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>s("/residence"),"aria-label":"Close"})]}),e.jsx("div",{className:"progress",style:{height:"4px",borderRadius:0},children:e.jsx("div",{className:"progress-bar bg-primary",role:"progressbar",style:{width:`${se}%`}})}),e.jsxs("form",{id:"addResidenceForm",onSubmit:R=>{if(t!==3)return R.preventDefault(),R.stopPropagation(),!1;te(R)},children:[e.jsxs("div",{className:"card-body p-4",children:[t===1&&e.jsxs("div",{className:"modal-step",children:[e.jsxs("div",{className:"alert alert-info",children:[e.jsx("i",{className:"fa fa-info-circle me-2"}),e.jsx("strong",{children:"Step 1:"})," Fill in the basic customer and financial information."]}),e.jsxs("div",{className:"row mb-3",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsxs("label",{className:"form-label",children:["Customer ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("div",{className:"position-relative",ref:b,children:[e.jsx("div",{className:"form-select",onClick:()=>j(!g),style:{cursor:"pointer",userSelect:"none"},children:J()}),g&&e.jsxs("div",{className:"position-absolute w-100 bg-white border rounded mt-1 shadow-lg",style:{zIndex:1e3,maxHeight:"300px",overflow:"hidden",borderColor:"#d1d5db",backgroundColor:"#ffffff"},children:[e.jsx("div",{className:"p-2 border-bottom",style:{borderColor:"#e5e7eb"},children:e.jsx("input",{type:"text",className:"form-control",placeholder:"Search customer...",value:p,onChange:R=>y(R.target.value),onClick:R=>R.stopPropagation(),onFocus:R=>R.stopPropagation(),autoFocus:!0,style:{backgroundColor:"#ffffff",color:"#2d353c"}})}),e.jsx("div",{style:{maxHeight:"250px",overflowY:"auto"},children:q&&Array.isArray(q)&&q.length>0?q.map(R=>e.jsxs("div",{className:"px-3 py-2 cursor-pointer",style:{cursor:"pointer",backgroundColor:n.customer_id===R.customer_id?"#e3f2fd":"transparent"},onClick:()=>{v("customer_id",R.customer_id),j(!1),y("")},onMouseEnter:Q=>{n.customer_id!==R.customer_id&&(Q.currentTarget.style.backgroundColor="#f5f5f5")},onMouseLeave:Q=>{n.customer_id!==R.customer_id&&(Q.currentTarget.style.backgroundColor="transparent")},children:[e.jsx("div",{className:"fw-semibold",style:{color:"#2d353c"},children:R.customer_name}),R.customer_phone&&e.jsx("div",{className:"text-muted small",style:{fontSize:"11px"},children:R.customer_phone})]},R.customer_id)):e.jsx("div",{className:"px-3 py-2 text-muted text-center",children:"No customers found"})})]})]})]}),e.jsxs("div",{className:"col-md-3",children:[e.jsxs("label",{className:"form-label",children:["Inside/Outside ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("select",{className:"form-select",value:n.insideOutside,onChange:R=>{v("insideOutside",R.target.value),R.target.value!=="Inside"&&v("uid","")},required:!0,children:[e.jsx("option",{value:"",children:"Choose"}),e.jsx("option",{value:"Inside",children:"Inside"}),e.jsx("option",{value:"Outside",children:"Outside"})]})]}),e.jsxs("div",{className:"col-md-3",children:[e.jsxs("label",{className:"form-label",children:["Residence Type ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("select",{className:"form-select",value:n.res_type,onChange:R=>v("res_type",R.target.value),required:!0,children:[e.jsx("option",{value:"mainland",children:"Mainland"}),e.jsx("option",{value:"freezone",children:"Freezone"})]})]})]}),e.jsxs("div",{className:"row mb-3",children:[e.jsxs("div",{className:"col-md-3",children:[e.jsxs("label",{className:"form-label",children:["UID ",n.insideOutside==="Inside"&&e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"text",className:"form-control",value:n.uid,onChange:R=>v("uid",R.target.value),placeholder:n.insideOutside==="Inside"?"Enter UID (Required)":"UID (Optional)",required:n.insideOutside==="Inside"})]}),e.jsxs("div",{className:"col-md-3",children:[e.jsxs("label",{className:"form-label",children:["Salary Amount ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"number",className:"form-control",value:n.salary_amount||"",onChange:R=>v("salary_amount",R.target.value?parseFloat(R.target.value):null),placeholder:"Enter Salary Amount",required:!0,min:"1"})]}),e.jsxs("div",{className:"col-md-3",children:[e.jsx("label",{className:"form-label",children:"Position"}),e.jsxs("select",{className:"form-select",value:n.position||"",onChange:R=>v("position",R.target.value?parseInt(R.target.value):null),children:[e.jsx("option",{value:"",children:"Select Position"}),i?.positions&&Array.isArray(i.positions)&&i.positions.map(R=>e.jsx("option",{value:R.position_id,children:R.position_name},R.position_id))]})]}),e.jsxs("div",{className:"col-md-3",children:[e.jsxs("label",{className:"form-label",children:["Sale Price ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"number",className:"form-control",value:n.sale_amount||"",onChange:R=>v("sale_amount",R.target.value?parseFloat(R.target.value):null),placeholder:"Enter Sale Amount",required:!0,min:"0",step:"0.01"})]})]}),e.jsxs("div",{className:"row mb-3",children:[e.jsxs("div",{className:"col-md-4",children:[e.jsxs("label",{className:"form-label",children:["Currency ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("select",{className:"form-select",value:n.sale_currency_type||"",onChange:R=>v("sale_currency_type",R.target.value?parseInt(R.target.value):null),required:!0,children:[e.jsx("option",{value:"",children:"Select Currency"}),i?.currencies&&Array.isArray(i.currencies)&&i.currencies.map(R=>e.jsx("option",{value:R.currencyID,children:R.currencyName},R.currencyID))]})]}),e.jsxs("div",{className:"col-md-8",children:[e.jsxs("label",{className:"form-label fw-bold",children:[e.jsx("i",{className:"fa fa-money-bill me-2"}),"Additional Charges Configuration"]}),e.jsx("div",{className:"card border-primary",children:e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"form-check",children:[e.jsx("input",{className:"form-check-input",type:"checkbox",checked:n.tawjeeh_included,onChange:R=>v("tawjeeh_included",R.target.checked),id:"tawjeehIncluded"}),e.jsxs("label",{className:"form-check-label fw-bold text-primary",htmlFor:"tawjeehIncluded",children:[e.jsx("i",{className:"fa fa-check-circle me-2"}),"TAWJEEH Service (150 AED)"]}),e.jsx("small",{className:"form-text text-muted d-block ms-4",children:"Check if TAWJEEH service cost is included in the sale price"})]})}),e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"form-check",children:[e.jsx("input",{className:"form-check-input",type:"checkbox",checked:n.insurance_included,onChange:R=>v("insurance_included",R.target.checked),id:"insuranceIncluded"}),e.jsxs("label",{className:"form-check-label fw-bold text-primary",htmlFor:"insuranceIncluded",children:[e.jsx("i",{className:"fa fa-shield-alt me-2"}),"ILOE Insurance (126 AED)"]}),e.jsx("small",{className:"form-text text-muted d-block ms-4",children:"Check if ILOE insurance cost is included in the sale price"})]})})]})})})]})]})]}),t===2&&e.jsxs("div",{className:"modal-step",children:[e.jsxs("div",{className:"alert alert-info",children:[e.jsx("i",{className:"fa fa-passport me-2"}),e.jsx("strong",{children:"Step 2:"})," Upload passport document for automatic data extraction, plus photo and Emirates ID."]}),e.jsxs("div",{className:"row mb-4",children:[e.jsx("div",{className:"col-12",children:e.jsxs("h6",{className:"text-primary mb-3",children:[e.jsx("i",{className:"fa fa-passport"})," Passport Information",e.jsx("small",{className:"text-muted",children:" (Auto-filled from document or enter manually)"})]})}),e.jsxs("div",{className:"col-lg-3",children:[e.jsxs("label",{className:"form-label",children:["Passenger Name ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{className:"form-control",value:n.passengerName,onChange:R=>v("passengerName",R.target.value),placeholder:"Enter or auto-filled from passport",required:!0})]}),e.jsxs("div",{className:"col-lg-3",children:[e.jsxs("label",{className:"form-label",children:["Nationality ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("select",{className:"form-select",value:n.nationality||"",onChange:R=>v("nationality",R.target.value?parseInt(R.target.value):null),required:!0,children:[e.jsx("option",{value:"",children:"Select Nationality"}),i?.nationalities&&Array.isArray(i.nationalities)&&i.nationalities.map(R=>e.jsx("option",{value:R.nationality_id,children:R.nationality_name},R.nationality_id))]})]}),e.jsxs("div",{className:"col-md-2",children:[e.jsxs("label",{className:"form-label",children:["Passport # ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"text",className:"form-control",value:n.passportNumber,onChange:R=>v("passportNumber",R.target.value),placeholder:"Enter passport number",required:!0})]}),e.jsxs("div",{className:"col-md-2",children:[e.jsxs("label",{className:"form-label",children:["Passport Expiry ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"date",className:"form-control",value:n.passportExpiryDate,onChange:R=>v("passportExpiryDate",R.target.value),required:!0})]}),e.jsxs("div",{className:"col-md-2",children:[e.jsxs("label",{className:"form-label",children:["Gender ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("select",{className:"form-select",value:n.gender,onChange:R=>v("gender",R.target.value),required:!0,children:[e.jsx("option",{value:"",children:"Choose gender"}),e.jsx("option",{value:"male",children:"Male"}),e.jsx("option",{value:"female",children:"Female"})]})]}),e.jsxs("div",{className:"col-md-2",children:[e.jsxs("label",{className:"form-label",children:["Date of Birth ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"date",className:"form-control",value:n.dob,onChange:R=>v("dob",R.target.value),required:!0})]})]}),e.jsxs("div",{className:"row mb-3",children:[e.jsxs("div",{className:"col-lg-3",children:[e.jsxs("label",{className:"form-label",children:["Passport ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"file",className:"form-control",accept:"image/jpeg,image/png,application/pdf",onChange:R=>S("passportFile",R.target.files?.[0]||null),required:!0}),e.jsx("small",{className:"text-muted",children:"Upload JPG/PNG/PDF passport documents"})]}),e.jsxs("div",{className:"col-lg-3",children:[e.jsxs("label",{className:"form-label",children:["Photo ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"file",className:"form-control",accept:"image/jpeg,image/png",onChange:R=>S("photoFile",R.target.files?.[0]||null),required:!0}),e.jsx("small",{className:"text-muted",children:"Upload passport photo"})]}),e.jsxs("div",{className:"col-lg-3",children:[e.jsx("label",{className:"form-label",children:"Emirates ID Front"}),e.jsx("input",{type:"file",className:"form-control",accept:"image/jpeg,image/png,application/pdf",onChange:R=>S("emiratesIdFrontFile",R.target.files?.[0]||null)}),e.jsx("small",{className:"text-muted",children:"Upload Emirates ID front (optional)"})]}),e.jsxs("div",{className:"col-lg-3",children:[e.jsx("label",{className:"form-label",children:"Emirates ID Back"}),e.jsx("input",{type:"file",className:"form-control",accept:"image/jpeg,image/png,application/pdf",onChange:R=>S("emiratesIdBackFile",R.target.files?.[0]||null)}),e.jsx("small",{className:"text-muted",children:"Upload Emirates ID back (optional)"})]})]})]}),t===3&&e.jsxs("div",{className:"modal-step",children:[e.jsxs("div",{className:"alert alert-success",children:[e.jsx("i",{className:"fa fa-check-circle me-2"}),e.jsx("strong",{children:"Step 3:"})," Review all information before creating the residence."]}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsx("h6",{className:"text-primary mb-3",children:"Basic Information"}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Customer:"})," ",B()?.customer_name||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Inside/Outside:"})," ",n.insideOutside]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Residence Type:"})," ",n.res_type]}),e.jsxs("p",{children:[e.jsx("strong",{children:"UID:"})," ",n.uid||(n.insideOutside==="Inside"?"Required but not provided":"Not required")]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Salary Amount:"})," ",n.salary_amount?.toLocaleString()||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Position:"})," ",H()?.position_name||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Sale Price:"})," ",n.sale_amount?.toLocaleString()||"N/A"," ",K()?.currencyName||""]}),e.jsxs("p",{children:[e.jsx("strong",{children:"TAWJEEH:"})," ",n.tawjeeh_included?"Included in sale price":"To be charged separately (150 AED)"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"ILOE Insurance:"})," ",n.insurance_included?"Included in sale price":"To be charged separately (126 AED)"]})]})})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("h6",{className:"text-primary mb-3",children:"Passport Information"}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Passenger Name:"})," ",n.passengerName||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Nationality:"})," ",P()?.nationality_name||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Passport Number:"})," ",n.passportNumber||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Passport Expiry:"})," ",n.passportExpiryDate||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Gender:"})," ",n.gender||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Date of Birth:"})," ",n.dob||"N/A"]})]})})]})]}),e.jsxs("div",{className:"row mt-3",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsx("h6",{className:"text-primary mb-3",children:"Financial Information"}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Sale Price:"})," ",n.sale_amount?.toLocaleString()||"N/A"," ",K()?.currencyName||""]}),e.jsxs("p",{children:[e.jsx("strong",{children:"TAWJEEH:"})," ",n.tawjeeh_included?"Included in sale price":"To be charged separately (150 AED)"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"ILOE Insurance:"})," ",n.insurance_included?"Included in sale price":"To be charged separately (126 AED)"]})]})})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("h6",{className:"text-primary mb-3",children:"Uploaded Documents"}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Passport:"})," ",n.passportFile?.name||"Not uploaded"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Photo:"})," ",n.photoFile?.name||"Not uploaded"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Emirates ID Front:"})," ",n.emiratesIdFrontFile?.name||"Not uploaded"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Emirates ID Back:"})," ",n.emiratesIdBackFile?.name||"Not uploaded"]})]})})]})]})]})]}),e.jsxs("div",{className:"card-footer d-flex justify-content-between",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>s("/residence"),children:"Cancel"}),e.jsxs("div",{className:"d-flex gap-2",children:[t>1&&e.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:V,disabled:h,children:[e.jsx("i",{className:"fa fa-arrow-left me-2"}),"Previous"]}),t<3?e.jsxs("button",{type:"button",className:"btn btn-primary",onClick:z,onKeyDown:R=>{R.key==="Enter"&&(R.preventDefault(),z())},children:["Next ",e.jsx("i",{className:"fa fa-arrow-right ms-2"})]}):e.jsx("button",{type:"button",className:"btn btn-success",onClick:te,disabled:h,children:h?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-border spinner-border-sm me-2"}),"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fa fa-save me-2"}),"Create Residence"]})})]})]})]})]})})})}function jR({isOpen:s,onClose:t,residenceId:a,onSuccess:n,companies:r,currencies:i,accounts:o,suppliers:c}){const[u,h]=A.useState({company_id:"",mbNumber:"",offerLetterCost:"50",offerLetterCurrency:"",offerLetterChargeOn:"1",offerLetterChargeAccount:"",offerLetterChargeSupplier:""}),[m,p]=A.useState(null),[y,g]=A.useState(!1),[j,b]=A.useState({});A.useEffect(()=>{s&&a&&(h({company_id:"",mbNumber:"",offerLetterCost:"50",offerLetterCurrency:i.length>0?i[0].currencyID.toString():"",offerLetterChargeOn:"1",offerLetterChargeAccount:"",offerLetterChargeSupplier:""}),p(null),b({}))},[s,a,i]);const N=E=>{const{name:L,value:z}=E.target;h(V=>({...V,[L]:z})),j[L]&&b(V=>({...V,[L]:""}))},v=E=>{E.target.files&&E.target.files[0]&&p(E.target.files[0])},S=async E=>{if(E.preventDefault(),!a)return;const L={};if(u.company_id||(L.company_id="Establishment is required"),u.mbNumber||(L.mbNumber="MB Number is required"),u.offerLetterCost||(L.offerLetterCost="Offer Letter Cost is required"),u.offerLetterCurrency||(L.offerLetterCurrency="Currency is required"),u.offerLetterChargeOn||(L.offerLetterChargeOn="Charge On is required"),u.offerLetterChargeOn==="1"&&!u.offerLetterChargeAccount&&(L.offerLetterChargeAccount="Charge Account is required"),u.offerLetterChargeOn==="2"&&!u.offerLetterChargeSupplier&&(L.offerLetterChargeSupplier="Charge Supplier is required"),Object.keys(L).length>0){b(L);return}g(!0);try{await Ft.updateStep(a,{step:1,markComplete:!0,company:u.company_id,mb_number:u.mbNumber,offerLetterCost:u.offerLetterCost,offerLetterCostCur:u.offerLetterCurrency,offerLChargOpt:u.offerLetterChargeOn,offerLChargedEntity:u.offerLetterChargeOn==="1"?u.offerLetterChargeAccount:u.offerLetterChargeSupplier,files:m?{offerLetterFile:m}:{}}),W.fire("Success","Offer letter set successfully","success"),n(),t()}catch(z){const V=z.response?.data?.message||z.message||"Failed to set offer letter";W.fire("Error",V,"error")}finally{g(!1)}};return s?e.jsx("div",{className:"modal-overlay",onClick:t,children:e.jsxs("div",{className:"modal-container",onClick:E=>E.stopPropagation(),style:{maxWidth:"700px",background:"#fff",color:"#222"},children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h3",{children:[e.jsx("i",{className:"fa fa-envelope"})," Offer Letter"]}),e.jsx("button",{className:"modal-close",onClick:t,children:e.jsx("i",{className:"fa fa-times"})})]}),e.jsxs("form",{onSubmit:S,children:[e.jsx("div",{className:"modal-body",style:{background:"#fff",padding:"2rem",border:"2px solid #d32f2f",borderRadius:"8px"},children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-12 mb-3",children:[e.jsxs("label",{className:"form-label",children:["Establishment ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("select",{name:"company_id",className:`form-select ${j.company_id?"is-invalid":""}`,value:u.company_id,onChange:N,children:[e.jsx("option",{value:"",children:"Select Establishment"}),r.map(E=>e.jsxs("option",{value:E.company_id,children:[E.company_name," (",E.starting_quota-E.totalEmployees,")"]},E.company_id))]}),j.company_id&&e.jsx("div",{className:"invalid-feedback",children:j.company_id})]}),e.jsxs("div",{className:"col-md-4 mb-3",children:[e.jsxs("label",{className:"form-label",children:["MB Number ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"text",name:"mbNumber",className:`form-control ${j.mbNumber?"is-invalid":""}`,value:u.mbNumber,onChange:N,placeholder:"MBXXXXXXAE"}),j.mbNumber&&e.jsx("div",{className:"invalid-feedback",children:j.mbNumber})]}),e.jsxs("div",{className:"col-md-8 mb-3",children:[e.jsx("label",{className:"form-label",children:"Offer Letter File"}),e.jsx("input",{type:"file",name:"offerLetterFile",className:"form-control",accept:".pdf",onChange:v})]}),e.jsxs("div",{className:"col-md-4 mb-3",children:[e.jsxs("label",{className:"form-label",children:["Offer Letter Cost ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"text",name:"offerLetterCost",className:`form-control ${j.offerLetterCost?"is-invalid":""}`,value:u.offerLetterCost,onChange:N}),j.offerLetterCost&&e.jsx("div",{className:"invalid-feedback",children:j.offerLetterCost})]}),e.jsxs("div",{className:"col-md-4 mb-3",children:[e.jsxs("label",{className:"form-label",children:["Currency ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("select",{name:"offerLetterCurrency",className:`form-select ${j.offerLetterCurrency?"is-invalid":""}`,value:u.offerLetterCurrency,onChange:N,children:[e.jsx("option",{value:"",children:"Select Currency"}),i.map(E=>e.jsx("option",{value:E.currencyID,children:E.currencyName},E.currencyID))]}),j.offerLetterCurrency&&e.jsx("div",{className:"invalid-feedback",children:j.offerLetterCurrency})]}),e.jsxs("div",{className:"col-md-4 mb-3",children:[e.jsxs("label",{className:"form-label",children:["Charge On ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("select",{name:"offerLetterChargeOn",className:`form-select ${j.offerLetterChargeOn?"is-invalid":""}`,value:u.offerLetterChargeOn,onChange:N,children:[e.jsx("option",{value:"1",children:"Account"}),e.jsx("option",{value:"2",children:"Supplier"})]}),j.offerLetterChargeOn&&e.jsx("div",{className:"invalid-feedback",children:j.offerLetterChargeOn})]}),u.offerLetterChargeOn==="1"&&e.jsxs("div",{className:"col-md-12 mb-3",children:[e.jsxs("label",{className:"form-label",children:["Charge Account ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("select",{name:"offerLetterChargeAccount",className:`form-select ${j.offerLetterChargeAccount?"is-invalid":""}`,value:u.offerLetterChargeAccount,onChange:N,children:[e.jsx("option",{value:"",children:"Select Account"}),o.map(E=>e.jsx("option",{value:E.account_ID,children:E.account_Name},E.account_ID))]}),j.offerLetterChargeAccount&&e.jsx("div",{className:"invalid-feedback",children:j.offerLetterChargeAccount})]}),u.offerLetterChargeOn==="2"&&e.jsxs("div",{className:"col-md-12 mb-3",children:[e.jsxs("label",{className:"form-label",children:["Charge Supplier ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("select",{name:"offerLetterChargeSupplier",className:`form-select ${j.offerLetterChargeSupplier?"is-invalid":""}`,value:u.offerLetterChargeSupplier,onChange:N,children:[e.jsx("option",{value:"",children:"Select Supplier"}),c.map(E=>e.jsx("option",{value:E.supp_id,children:E.supp_name},E.supp_id))]}),j.offerLetterChargeSupplier&&e.jsx("div",{className:"invalid-feedback",children:j.offerLetterChargeSupplier})]})]})}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:t,disabled:y,children:"Close"}),e.jsxs("button",{type:"submit",className:"btn btn-primary",disabled:y,children:[y?e.jsx("i",{className:"fa fa-spinner fa-spin me-2"}):null,"Submit"]})]})]})]})}):null}function NR({isOpen:s,onClose:t,residenceId:a,onSuccess:n,currencies:r,accounts:i,suppliers:o}){const[c,u]=A.useState({insuranceCost:"145",insuranceCurrency:"",insuranceChargeOn:"1",insuranceChargeAccount:"",insuranceChargeSupplier:""}),[h,m]=A.useState(null),[p,y]=A.useState(!1),[g,j]=A.useState({});A.useEffect(()=>{s&&a&&r.length>0&&(u({insuranceCost:"145",insuranceCurrency:r[0].currencyID.toString(),insuranceChargeOn:"1",insuranceChargeAccount:"",insuranceChargeSupplier:""}),m(null),j({}))},[s,a,r]);const b=async N=>{if(N.preventDefault(),!a)return;const v={};if(c.insuranceCost||(v.insuranceCost="Insurance Cost is required"),c.insuranceCurrency||(v.insuranceCurrency="Currency is required"),c.insuranceChargeOn||(v.insuranceChargeOn="Charge On is required"),c.insuranceChargeOn==="1"&&!c.insuranceChargeAccount&&(v.insuranceChargeAccount="Charge Account is required"),c.insuranceChargeOn==="2"&&!c.insuranceChargeSupplier&&(v.insuranceChargeSupplier="Charge Supplier is required"),Object.keys(v).length>0){j(v);return}y(!0);try{await Ft.updateStep(a,{step:2,markComplete:!0,insuranceCost:c.insuranceCost,insuranceCur:c.insuranceCurrency,insuranceChargOpt:c.insuranceChargeOn,insuranceChargedEntity:c.insuranceChargeOn==="1"?c.insuranceChargeAccount:c.insuranceChargeSupplier,files:h?{insuranceFile:h}:{}}),W.fire("Success","Insurance set successfully","success"),n(),t()}catch(S){console.error("Insurance update error:",S),W.fire("Error",S.response?.data?.message||"Failed to set insurance","error")}finally{y(!1)}};return s?e.jsx("div",{className:"modal-overlay",onClick:t,children:e.jsxs("div",{className:"modal-container",onClick:N=>N.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h3",{children:[e.jsx("i",{className:"fa fa-shield"})," Insurance"]}),e.jsx("button",{className:"modal-close",onClick:t,children:e.jsx("i",{className:"fa fa-times"})})]}),e.jsxs("form",{onSubmit:b,children:[e.jsx("div",{className:"modal-body",children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-4 mb-3",children:[e.jsxs("label",{className:"form-label",children:["Insurance Cost ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"text",name:"insuranceCost",className:`form-control ${g.insuranceCost?"is-invalid":""}`,value:c.insuranceCost,onChange:N=>{u(v=>({...v,insuranceCost:N.target.value})),j(v=>({...v,insuranceCost:""}))}}),g.insuranceCost&&e.jsx("div",{className:"invalid-feedback",children:g.insuranceCost})]}),e.jsxs("div",{className:"col-md-4 mb-3",children:[e.jsxs("label",{className:"form-label",children:["Currency ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("select",{name:"insuranceCurrency",className:`form-select ${g.insuranceCurrency?"is-invalid":""}`,value:c.insuranceCurrency,onChange:N=>{u(v=>({...v,insuranceCurrency:N.target.value})),j(v=>({...v,insuranceCurrency:""}))},children:[e.jsx("option",{value:"",children:"Select Currency"}),r.map(N=>e.jsx("option",{value:N.currencyID,children:N.currencyName},N.currencyID))]}),g.insuranceCurrency&&e.jsx("div",{className:"invalid-feedback",children:g.insuranceCurrency})]}),e.jsxs("div",{className:"col-md-4 mb-3",children:[e.jsxs("label",{className:"form-label",children:["Charge On ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("select",{name:"insuranceChargeOn",className:`form-select ${g.insuranceChargeOn?"is-invalid":""}`,value:c.insuranceChargeOn,onChange:N=>{u(v=>({...v,insuranceChargeOn:N.target.value})),j(v=>({...v,insuranceChargeOn:""}))},children:[e.jsx("option",{value:"1",children:"Account"}),e.jsx("option",{value:"2",children:"Supplier"})]}),g.insuranceChargeOn&&e.jsx("div",{className:"invalid-feedback",children:g.insuranceChargeOn})]}),c.insuranceChargeOn==="1"&&e.jsxs("div",{className:"col-md-12 mb-3",children:[e.jsxs("label",{className:"form-label",children:["Charge Account ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("select",{name:"insuranceChargeAccount",className:`form-select ${g.insuranceChargeAccount?"is-invalid":""}`,value:c.insuranceChargeAccount,onChange:N=>{u(v=>({...v,insuranceChargeAccount:N.target.value})),j(v=>({...v,insuranceChargeAccount:""}))},children:[e.jsx("option",{value:"",children:"Select Account"}),i.map(N=>e.jsx("option",{value:N.account_ID,children:N.account_Name},N.account_ID))]}),g.insuranceChargeAccount&&e.jsx("div",{className:"invalid-feedback",children:g.insuranceChargeAccount})]}),c.insuranceChargeOn==="2"&&e.jsxs("div",{className:"col-md-12 mb-3",children:[e.jsxs("label",{className:"form-label",children:["Charge Supplier ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("select",{name:"insuranceChargeSupplier",className:`form-select ${g.insuranceChargeSupplier?"is-invalid":""}`,value:c.insuranceChargeSupplier,onChange:N=>{u(v=>({...v,insuranceChargeSupplier:N.target.value})),j(v=>({...v,insuranceChargeSupplier:""}))},children:[e.jsx("option",{value:"",children:"Select Supplier"}),o.map(N=>e.jsx("option",{value:N.supp_id,children:N.supp_name},N.supp_id))]}),g.insuranceChargeSupplier&&e.jsx("div",{className:"invalid-feedback",children:g.insuranceChargeSupplier})]}),e.jsxs("div",{className:"col-md-12 mb-3",children:[e.jsx("label",{className:"form-label",children:"Insurance File"}),e.jsx("input",{type:"file",className:"form-control",onChange:N=>m(N.target.files?.[0]||null)})]})]})}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:t,disabled:p,children:"Close"}),e.jsxs("button",{type:"submit",className:"btn btn-primary",disabled:p,children:[p?e.jsx("i",{className:"fa fa-spinner fa-spin me-2"}):null,"Submit"]})]})]})]})}):null}function wR({isOpen:s,onClose:t,residenceId:a,onSuccess:n,currencies:r,accounts:i,suppliers:o}){const[c,u]=A.useState({labourCardNumber:"",labourCardCost:"1210",labourCardCurrency:"",labourCardChargeOn:"1",labourCardChargeAccount:"",labourCardChargeSupplier:""}),[h,m]=A.useState(null),[p,y]=A.useState(!1),[g,j]=A.useState({});A.useEffect(()=>{s&&a&&r.length>0&&(u(N=>({...N,labourCardCurrency:r[0].currencyID.toString(),labourCardNumber:n?.labourCardNumber||""})),m(null),j({}))},[s,a,r]);const b=async N=>{if(N.preventDefault(),!a)return;const v={};if(c.labourCardNumber||(v.labourCardNumber="Labour Card Number is required"),c.labourCardCost||(v.labourCardCost="Labour Card Cost is required"),c.labourCardCurrency||(v.labourCardCurrency="Currency is required"),c.labourCardChargeOn||(v.labourCardChargeOn="Charge On is required"),c.labourCardChargeOn==="1"&&!c.labourCardChargeAccount&&(v.labourCardChargeAccount="Charge Account is required"),c.labourCardChargeOn==="2"&&!c.labourCardChargeSupplier&&(v.labourCardChargeSupplier="Charge Supplier is required"),Object.keys(v).length>0){j(v);return}y(!0);try{await Ft.updateStep(a,{step:3,markComplete:!0,labor_card_id:c.labourCardNumber,labour_card_fee:c.labourCardCost,laborCardCur:c.labourCardCurrency,lrbChargOpt:c.labourCardChargeOn,lbrChargedEntity:c.labourCardChargeOn==="1"?c.labourCardChargeAccount:c.labourCardChargeSupplier,files:h?{laborCardFile:h}:{}}),W.fire("Success","Labour card set successfully","success"),n(),t()}catch(S){W.fire("Error",S.response?.data?.message||"Failed to set labour card","error")}finally{y(!1)}};return s?e.jsx("div",{className:"modal-overlay",onClick:t,children:e.jsxs("div",{className:"modal-container",onClick:N=>N.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h3",{children:[e.jsx("i",{className:"fa fa-credit-card"})," Labour Card"]}),e.jsx("button",{className:"modal-close",onClick:t,children:e.jsx("i",{className:"fa fa-times"})})]}),e.jsxs("form",{onSubmit:b,children:[e.jsx("div",{className:"modal-body",children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-4 mb-3",children:[e.jsxs("label",{className:"form-label",children:["Labour Card Number ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"text",name:"labourCardNumber",className:`form-control ${g.labourCardNumber?"is-invalid":""}`,value:c.labourCardNumber,onChange:N=>{u(v=>({...v,labourCardNumber:N.target.value})),j(v=>({...v,labourCardNumber:""}))}}),g.labourCardNumber&&e.jsx("div",{className:"invalid-feedback",children:g.labourCardNumber})]}),e.jsxs("div",{className:"col-md-4 mb-3",children:[e.jsxs("label",{className:"form-label",children:["Labour Card Cost ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"text",name:"labourCardCost",className:`form-control ${g.labourCardCost?"is-invalid":""}`,value:c.labourCardCost,onChange:N=>{u(v=>({...v,labourCardCost:N.target.value})),j(v=>({...v,labourCardCost:""}))}}),g.labourCardCost&&e.jsx("div",{className:"invalid-feedback",children:g.labourCardCost})]}),e.jsxs("div",{className:"col-md-4 mb-3",children:[e.jsxs("label",{className:"form-label",children:["Currency ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("select",{name:"labourCardCurrency",className:`form-select ${g.labourCardCurrency?"is-invalid":""}`,value:c.labourCardCurrency,onChange:N=>{u(v=>({...v,labourCardCurrency:N.target.value})),j(v=>({...v,labourCardCurrency:""}))},children:[e.jsx("option",{value:"",children:"Select Currency"}),r.map(N=>e.jsx("option",{value:N.currencyID,children:N.currencyName},N.currencyID))]}),g.labourCardCurrency&&e.jsx("div",{className:"invalid-feedback",children:g.labourCardCurrency})]}),e.jsxs("div",{className:"col-md-4 mb-3",children:[e.jsxs("label",{className:"form-label",children:["Charge On ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("select",{name:"labourCardChargeOn",className:`form-select ${g.labourCardChargeOn?"is-invalid":""}`,value:c.labourCardChargeOn,onChange:N=>{u(v=>({...v,labourCardChargeOn:N.target.value})),j(v=>({...v,labourCardChargeOn:""}))},children:[e.jsx("option",{value:"1",children:"Account"}),e.jsx("option",{value:"2",children:"Supplier"})]}),g.labourCardChargeOn&&e.jsx("div",{className:"invalid-feedback",children:g.labourCardChargeOn})]}),c.labourCardChargeOn==="1"&&e.jsxs("div",{className:"col-md-12 mb-3",children:[e.jsxs("label",{className:"form-label",children:["Charge Account ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("select",{name:"labourCardChargeAccount",className:`form-select ${g.labourCardChargeAccount?"is-invalid":""}`,value:c.labourCardChargeAccount,onChange:N=>{u(v=>({...v,labourCardChargeAccount:N.target.value})),j(v=>({...v,labourCardChargeAccount:""}))},children:[e.jsx("option",{value:"",children:"Select Account"}),i.map(N=>e.jsx("option",{value:N.account_ID,children:N.account_Name},N.account_ID))]}),g.labourCardChargeAccount&&e.jsx("div",{className:"invalid-feedback",children:g.labourCardChargeAccount})]}),c.labourCardChargeOn==="2"&&e.jsxs("div",{className:"col-md-12 mb-3",children:[e.jsxs("label",{className:"form-label",children:["Charge Supplier ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("select",{name:"labourCardChargeSupplier",className:`form-select ${g.labourCardChargeSupplier?"is-invalid":""}`,value:c.labourCardChargeSupplier,onChange:N=>{u(v=>({...v,labourCardChargeSupplier:N.target.value})),j(v=>({...v,labourCardChargeSupplier:""}))},children:[e.jsx("option",{value:"",children:"Select Supplier"}),o.map(N=>e.jsx("option",{value:N.supp_id,children:N.supp_name},N.supp_id))]}),g.labourCardChargeSupplier&&e.jsx("div",{className:"invalid-feedback",children:g.labourCardChargeSupplier})]}),e.jsxs("div",{className:"col-md-12 mb-3",children:[e.jsx("label",{className:"form-label",children:"Labour Card File"}),e.jsx("input",{type:"file",className:"form-control",onChange:N=>m(N.target.files?.[0]||null)})]})]})}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:t,disabled:p,children:"Close"}),e.jsxs("button",{type:"submit",className:"btn btn-primary",disabled:p,children:[p?e.jsx("i",{className:"fa fa-spinner fa-spin me-2"}):null,"Submit"]})]})]})]})}):null}function Z5({isOpen:s,onClose:t,residenceId:a,onSuccess:n,currencies:r,accounts:i,suppliers:o,isFamily:c=!1}){const[u,h]=A.useState({eVisaCost:"500",eVisaCurrency:"",eVisaChargeOn:"1",eVisaChargeAccount:"",eVisaChargeSupplier:""}),[m,p]=A.useState(null),[y,g]=A.useState(!1),[j,b]=A.useState({});A.useEffect(()=>{s&&a&&r.length>0&&(h({eVisaCost:"500",eVisaCurrency:r[0].currencyID.toString(),eVisaChargeOn:"1",eVisaChargeAccount:"",eVisaChargeSupplier:""}),p(null),b({}))},[s,a,r]);const N=async v=>{if(v.preventDefault(),!a)return;const S={};if(u.eVisaCost||(S.eVisaCost="E-Visa Cost is required"),u.eVisaCurrency||(S.eVisaCurrency="Currency is required"),u.eVisaChargeOn==="1"&&!u.eVisaChargeAccount&&(S.eVisaChargeAccount="Charge Account is required"),u.eVisaChargeOn==="2"&&!u.eVisaChargeSupplier&&(S.eVisaChargeSupplier="Charge Supplier is required"),Object.keys(S).length>0){b(S);return}g(!0);try{c?await Ft.updateFamilyStep(a,{step:1,cost:parseFloat(u.eVisaCost),account:u.eVisaChargeOn==="1"?parseInt(u.eVisaChargeAccount):null}):await Ft.updateStep(a,{step:4,markComplete:!0,eVisaCost:u.eVisaCost,eVisaCur:u.eVisaCurrency,eVisaChargOpt:u.eVisaChargeOn,eVisaChargedEntity:u.eVisaChargeOn==="1"?u.eVisaChargeAccount:u.eVisaChargeSupplier,files:m?{eVisaFile:m}:{}}),W.fire("Success","E-Visa set successfully","success"),n(),t()}catch(E){W.fire("Error",E.response?.data?.message||"Failed to set E-Visa","error")}finally{g(!1)}};return s?e.jsx("div",{className:"modal-overlay",onClick:t,children:e.jsxs("div",{className:"modal-container",onClick:v=>v.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h3",{children:[e.jsx("i",{className:"fa fa-ticket"})," E-Visa"]}),e.jsx("button",{className:"modal-close",onClick:t,children:e.jsx("i",{className:"fa fa-times"})})]}),e.jsxs("form",{onSubmit:N,children:[e.jsx("div",{className:"modal-body",children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-4 mb-3",children:[e.jsxs("label",{className:"form-label",children:["E-Visa Cost ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"text",name:"eVisaCost",className:`form-control ${j.eVisaCost?"is-invalid":""}`,value:u.eVisaCost,onChange:v=>{h(S=>({...S,eVisaCost:v.target.value})),b(S=>({...S,eVisaCost:""}))}}),j.eVisaCost&&e.jsx("div",{className:"invalid-feedback",children:j.eVisaCost})]}),e.jsxs("div",{className:"col-md-4 mb-3",children:[e.jsxs("label",{className:"form-label",children:["Currency ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("select",{name:"eVisaCurrency",className:`form-select ${j.eVisaCurrency?"is-invalid":""}`,value:u.eVisaCurrency,onChange:v=>{h(S=>({...S,eVisaCurrency:v.target.value})),b(S=>({...S,eVisaCurrency:""}))},children:[e.jsx("option",{value:"",children:"Select Currency"}),r.map(v=>e.jsx("option",{value:v.currencyID,children:v.currencyName},v.currencyID))]}),j.eVisaCurrency&&e.jsx("div",{className:"invalid-feedback",children:j.eVisaCurrency})]}),e.jsxs("div",{className:"col-md-4 mb-3",children:[e.jsxs("label",{className:"form-label",children:["Charge On ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("select",{name:"eVisaChargeOn",className:"form-select",value:u.eVisaChargeOn,onChange:v=>h(S=>({...S,eVisaChargeOn:v.target.value})),children:[e.jsx("option",{value:"1",children:"Account"}),e.jsx("option",{value:"2",children:"Supplier"})]})]}),u.eVisaChargeOn==="1"&&e.jsxs("div",{className:"col-md-12 mb-3",children:[e.jsxs("label",{className:"form-label",children:["Charge Account ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("select",{name:"eVisaChargeAccount",className:`form-select ${j.eVisaChargeAccount?"is-invalid":""}`,value:u.eVisaChargeAccount,onChange:v=>{h(S=>({...S,eVisaChargeAccount:v.target.value})),b(S=>({...S,eVisaChargeAccount:""}))},children:[e.jsx("option",{value:"",children:"Select Account"}),i.map(v=>e.jsx("option",{value:v.account_ID,children:v.account_Name},v.account_ID))]}),j.eVisaChargeAccount&&e.jsx("div",{className:"invalid-feedback",children:j.eVisaChargeAccount})]}),u.eVisaChargeOn==="2"&&e.jsxs("div",{className:"col-md-12 mb-3",children:[e.jsxs("label",{className:"form-label",children:["Charge Supplier ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("select",{name:"eVisaChargeSupplier",className:`form-select ${j.eVisaChargeSupplier?"is-invalid":""}`,value:u.eVisaChargeSupplier,onChange:v=>{h(S=>({...S,eVisaChargeSupplier:v.target.value})),b(S=>({...S,eVisaChargeSupplier:""}))},children:[e.jsx("option",{value:"",children:"Select Supplier"}),o.map(v=>e.jsx("option",{value:v.supp_id,children:v.supp_name},v.supp_id))]}),j.eVisaChargeSupplier&&e.jsx("div",{className:"invalid-feedback",children:j.eVisaChargeSupplier})]}),e.jsxs("div",{className:"col-md-12 mb-3",children:[e.jsx("label",{className:"form-label",children:"E-Visa File"}),e.jsx("input",{type:"file",className:"form-control",onChange:v=>p(v.target.files?.[0]||null)})]})]})}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:t,disabled:y,children:"Close"}),e.jsxs("button",{type:"submit",className:"btn btn-primary",disabled:y,children:[y?e.jsx("i",{className:"fa fa-spinner fa-spin me-2"}):null,"Submit"]})]})]})]})}):null}function eA({isOpen:s,onClose:t,residenceId:a,onSuccess:n,currencies:r,accounts:i,suppliers:o,isFamily:c=!1}){const[u,h]=A.useState({changeStatusCost:"300",changeStatusCurrency:"",changeStatusChargeOn:"1",changeStatusChargeAccount:"",changeStatusChargeSupplier:""}),[m,p]=A.useState(null),[y,g]=A.useState(!1),[j,b]=A.useState({});A.useEffect(()=>{s&&a&&r.length>0&&(h({changeStatusCost:"300",changeStatusCurrency:r[0].currencyID.toString(),changeStatusChargeOn:"1",changeStatusChargeAccount:"",changeStatusChargeSupplier:""}),p(null),b({}))},[s,a,r]);const N=async v=>{if(v.preventDefault(),!a)return;const S={};if(u.changeStatusCost||(S.changeStatusCost="Change Status Cost is required"),u.changeStatusCurrency||(S.changeStatusCurrency="Currency is required"),u.changeStatusChargeOn==="1"&&!u.changeStatusChargeAccount&&(S.changeStatusChargeAccount="Charge Account is required"),u.changeStatusChargeOn==="2"&&!u.changeStatusChargeSupplier&&(S.changeStatusChargeSupplier="Charge Supplier is required"),Object.keys(S).length>0){b(S);return}g(!0);try{c?await Ft.updateFamilyStep(a,{step:2,cost:parseFloat(u.changeStatusCost),account:u.changeStatusChargeOn==="1"?parseInt(u.changeStatusChargeAccount):null}):await Ft.updateStep(a,{step:5,markComplete:!0,changeStatusCost:u.changeStatusCost,changeStatusCur:u.changeStatusCurrency,changeStatusChargOpt:u.changeStatusChargeOn,changeStatusChargedEntity:u.changeStatusChargeOn==="1"?u.changeStatusChargeAccount:u.changeStatusChargeSupplier,files:m?{changeStatusFile:m}:{}}),W.fire("Success","Change Status set successfully","success"),n(),t()}catch(E){W.fire("Error",E.response?.data?.message||"Failed to set Change Status","error")}finally{g(!1)}};return s?e.jsx("div",{className:"modal-overlay",onClick:t,children:e.jsxs("div",{className:"modal-container",onClick:v=>v.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h3",{children:[e.jsx("i",{className:"fa fa-exchange"})," Change Status"]}),e.jsx("button",{className:"modal-close",onClick:t,children:e.jsx("i",{className:"fa fa-times"})})]}),e.jsxs("form",{onSubmit:N,children:[e.jsx("div",{className:"modal-body",children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-4 mb-3",children:[e.jsxs("label",{className:"form-label",children:["Change Status Cost ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"text",name:"changeStatusCost",className:`form-control ${j.changeStatusCost?"is-invalid":""}`,value:u.changeStatusCost,onChange:v=>{h(S=>({...S,changeStatusCost:v.target.value})),b(S=>({...S,changeStatusCost:""}))}}),j.changeStatusCost&&e.jsx("div",{className:"invalid-feedback",children:j.changeStatusCost})]}),e.jsxs("div",{className:"col-md-4 mb-3",children:[e.jsxs("label",{className:"form-label",children:["Currency ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("select",{name:"changeStatusCurrency",className:`form-select ${j.changeStatusCurrency?"is-invalid":""}`,value:u.changeStatusCurrency,onChange:v=>{h(S=>({...S,changeStatusCurrency:v.target.value})),b(S=>({...S,changeStatusCurrency:""}))},children:[e.jsx("option",{value:"",children:"Select Currency"}),r.map(v=>e.jsx("option",{value:v.currencyID,children:v.currencyName},v.currencyID))]}),j.changeStatusCurrency&&e.jsx("div",{className:"invalid-feedback",children:j.changeStatusCurrency})]}),e.jsxs("div",{className:"col-md-4 mb-3",children:[e.jsxs("label",{className:"form-label",children:["Charge On ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("select",{name:"changeStatusChargeOn",className:"form-select",value:u.changeStatusChargeOn,onChange:v=>h(S=>({...S,changeStatusChargeOn:v.target.value})),children:[e.jsx("option",{value:"1",children:"Account"}),e.jsx("option",{value:"2",children:"Supplier"})]})]}),u.changeStatusChargeOn==="1"&&e.jsxs("div",{className:"col-md-12 mb-3",children:[e.jsxs("label",{className:"form-label",children:["Charge Account ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("select",{name:"changeStatusChargeAccount",className:`form-select ${j.changeStatusChargeAccount?"is-invalid":""}`,value:u.changeStatusChargeAccount,onChange:v=>{h(S=>({...S,changeStatusChargeAccount:v.target.value})),b(S=>({...S,changeStatusChargeAccount:""}))},children:[e.jsx("option",{value:"",children:"Select Account"}),i.map(v=>e.jsx("option",{value:v.account_ID,children:v.account_Name},v.account_ID))]}),j.changeStatusChargeAccount&&e.jsx("div",{className:"invalid-feedback",children:j.changeStatusChargeAccount})]}),u.changeStatusChargeOn==="2"&&e.jsxs("div",{className:"col-md-12 mb-3",children:[e.jsxs("label",{className:"form-label",children:["Charge Supplier ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("select",{name:"changeStatusChargeSupplier",className:`form-select ${j.changeStatusChargeSupplier?"is-invalid":""}`,value:u.changeStatusChargeSupplier,onChange:v=>{h(S=>({...S,changeStatusChargeSupplier:v.target.value})),b(S=>({...S,changeStatusChargeSupplier:""}))},children:[e.jsx("option",{value:"",children:"Select Supplier"}),o.map(v=>e.jsx("option",{value:v.supp_id,children:v.supp_name},v.supp_id))]}),j.changeStatusChargeSupplier&&e.jsx("div",{className:"invalid-feedback",children:j.changeStatusChargeSupplier})]}),e.jsxs("div",{className:"col-md-12 mb-3",children:[e.jsx("label",{className:"form-label",children:"Change Status File"}),e.jsx("input",{type:"file",className:"form-control",onChange:v=>p(v.target.files?.[0]||null)})]})]})}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:t,disabled:y,children:"Close"}),e.jsxs("button",{type:"submit",className:"btn btn-primary",disabled:y,children:[y?e.jsx("i",{className:"fa fa-spinner fa-spin me-2"}):null,"Submit"]})]})]})]})}):null}function tA({isOpen:s,onClose:t,residenceId:a,onSuccess:n,currencies:r,accounts:i,suppliers:o,isFamily:c=!1}){const[u,h]=A.useState({medicalCost:"200",medicalCurrency:"",medicalChargeOn:"1",medicalChargeAccount:"",medicalChargeSupplier:""}),[m,p]=A.useState(null),[y,g]=A.useState(!1),[j,b]=A.useState({});A.useEffect(()=>{s&&a&&r.length>0&&(h({medicalCost:"200",medicalCurrency:r[0].currencyID.toString(),medicalChargeOn:"1",medicalChargeAccount:"",medicalChargeSupplier:""}),p(null),b({}))},[s,a,r]);const N=async v=>{if(v.preventDefault(),!a)return;const S={};if(u.medicalCost||(S.medicalCost="Medical Cost is required"),u.medicalCurrency||(S.medicalCurrency="Currency is required"),u.medicalChargeOn==="1"&&!u.medicalChargeAccount&&(S.medicalChargeAccount="Charge Account is required"),u.medicalChargeOn==="2"&&!u.medicalChargeSupplier&&(S.medicalChargeSupplier="Charge Supplier is required"),Object.keys(S).length>0){b(S);return}g(!0);try{c?await Ft.updateFamilyStep(a,{step:3,cost:parseFloat(u.medicalCost),account:u.medicalChargeOn==="1"?parseInt(u.medicalChargeAccount):null}):await Ft.updateStep(a,{step:6,markComplete:!0,medicalCost:u.medicalCost,medicalCur:u.medicalCurrency,medicalChargOpt:u.medicalChargeOn,medicalChargedEntity:u.medicalChargeOn==="1"?u.medicalChargeAccount:u.medicalChargeSupplier,files:m?{medicalFile:m}:{}}),W.fire("Success","Medical set successfully","success"),n(),t()}catch(E){W.fire("Error",E.response?.data?.message||"Failed to set Medical","error")}finally{g(!1)}};return s?e.jsx("div",{className:"modal-overlay",onClick:t,children:e.jsxs("div",{className:"modal-container",onClick:v=>v.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h3",{children:[e.jsx("i",{className:"fa fa-medkit"})," Medical"]}),e.jsx("button",{className:"modal-close",onClick:t,children:e.jsx("i",{className:"fa fa-times"})})]}),e.jsxs("form",{onSubmit:N,children:[e.jsx("div",{className:"modal-body",children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-4 mb-3",children:[e.jsxs("label",{className:"form-label",children:["Medical Cost ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"text",name:"medicalCost",className:`form-control ${j.medicalCost?"is-invalid":""}`,value:u.medicalCost,onChange:v=>{h(S=>({...S,medicalCost:v.target.value})),b(S=>({...S,medicalCost:""}))}}),j.medicalCost&&e.jsx("div",{className:"invalid-feedback",children:j.medicalCost})]}),e.jsxs("div",{className:"col-md-4 mb-3",children:[e.jsxs("label",{className:"form-label",children:["Currency ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("select",{name:"medicalCurrency",className:`form-select ${j.medicalCurrency?"is-invalid":""}`,value:u.medicalCurrency,onChange:v=>{h(S=>({...S,medicalCurrency:v.target.value})),b(S=>({...S,medicalCurrency:""}))},children:[e.jsx("option",{value:"",children:"Select Currency"}),r.map(v=>e.jsx("option",{value:v.currencyID,children:v.currencyName},v.currencyID))]}),j.medicalCurrency&&e.jsx("div",{className:"invalid-feedback",children:j.medicalCurrency})]}),e.jsxs("div",{className:"col-md-4 mb-3",children:[e.jsxs("label",{className:"form-label",children:["Charge On ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("select",{name:"medicalChargeOn",className:"form-select",value:u.medicalChargeOn,onChange:v=>h(S=>({...S,medicalChargeOn:v.target.value})),children:[e.jsx("option",{value:"1",children:"Account"}),e.jsx("option",{value:"2",children:"Supplier"})]})]}),u.medicalChargeOn==="1"&&e.jsxs("div",{className:"col-md-12 mb-3",children:[e.jsxs("label",{className:"form-label",children:["Charge Account ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("select",{name:"medicalChargeAccount",className:`form-select ${j.medicalChargeAccount?"is-invalid":""}`,value:u.medicalChargeAccount,onChange:v=>{h(S=>({...S,medicalChargeAccount:v.target.value})),b(S=>({...S,medicalChargeAccount:""}))},children:[e.jsx("option",{value:"",children:"Select Account"}),i.map(v=>e.jsx("option",{value:v.account_ID,children:v.account_Name},v.account_ID))]}),j.medicalChargeAccount&&e.jsx("div",{className:"invalid-feedback",children:j.medicalChargeAccount})]}),u.medicalChargeOn==="2"&&e.jsxs("div",{className:"col-md-12 mb-3",children:[e.jsxs("label",{className:"form-label",children:["Charge Supplier ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("select",{name:"medicalChargeSupplier",className:`form-select ${j.medicalChargeSupplier?"is-invalid":""}`,value:u.medicalChargeSupplier,onChange:v=>{h(S=>({...S,medicalChargeSupplier:v.target.value})),b(S=>({...S,medicalChargeSupplier:""}))},children:[e.jsx("option",{value:"",children:"Select Supplier"}),o.map(v=>e.jsx("option",{value:v.supp_id,children:v.supp_name},v.supp_id))]}),j.medicalChargeSupplier&&e.jsx("div",{className:"invalid-feedback",children:j.medicalChargeSupplier})]}),e.jsxs("div",{className:"col-md-12 mb-3",children:[e.jsx("label",{className:"form-label",children:"Medical File"}),e.jsx("input",{type:"file",className:"form-control",onChange:v=>p(v.target.files?.[0]||null)})]})]})}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:t,disabled:y,children:"Close"}),e.jsxs("button",{type:"submit",className:"btn btn-primary",disabled:y,children:[y?e.jsx("i",{className:"fa fa-spinner fa-spin me-2"}):null,"Submit"]})]})]})]})}):null}function sA({isOpen:s,onClose:t,residenceId:a,onSuccess:n,currencies:r,accounts:i,suppliers:o,isFamily:c=!1}){const[u,h]=A.useState({emiratesIDCost:"250",emiratesIDCurrency:"",emiratesIDChargeOn:"1",emiratesIDChargeAccount:"",emiratesIDChargeSupplier:"",emiratesIDNumber:""}),[m,p]=A.useState(null),[y,g]=A.useState(!1),[j,b]=A.useState({});A.useEffect(()=>{s&&a&&r.length>0&&(h({emiratesIDCost:"250",emiratesIDCurrency:r[0].currencyID.toString(),emiratesIDChargeOn:"1",emiratesIDChargeAccount:"",emiratesIDChargeSupplier:"",emiratesIDNumber:""}),p(null),b({}))},[s,a,r]);const N=async v=>{if(v.preventDefault(),!a)return;const S={};if(u.emiratesIDNumber||(S.emiratesIDNumber="Emirates ID Number is required"),u.emiratesIDCost||(S.emiratesIDCost="Emirates ID Cost is required"),u.emiratesIDCurrency||(S.emiratesIDCurrency="Currency is required"),u.emiratesIDChargeOn==="1"&&!u.emiratesIDChargeAccount&&(S.emiratesIDChargeAccount="Charge Account is required"),u.emiratesIDChargeOn==="2"&&!u.emiratesIDChargeSupplier&&(S.emiratesIDChargeSupplier="Charge Supplier is required"),Object.keys(S).length>0){b(S);return}g(!0);try{c?await Ft.updateFamilyStep(a,{step:4,cost:parseFloat(u.emiratesIDCost),account:u.emiratesIDChargeOn==="1"?parseInt(u.emiratesIDChargeAccount):null}):await Ft.updateStep(a,{step:7,markComplete:!0,emiratesIDNumber:u.emiratesIDNumber,emiratesIDCost:u.emiratesIDCost,emiratesIDCur:u.emiratesIDCurrency,emiratesIDChargOpt:u.emiratesIDChargeOn,emiratesIDChargedEntity:u.emiratesIDChargeOn==="1"?u.emiratesIDChargeAccount:u.emiratesIDChargeSupplier,files:m?{emiratesIDFile:m}:{}}),W.fire("Success","Emirates ID set successfully","success"),n(),t()}catch(E){W.fire("Error",E.response?.data?.message||"Failed to set Emirates ID","error")}finally{g(!1)}};return s?e.jsx("div",{className:"modal-overlay",onClick:t,children:e.jsxs("div",{className:"modal-container",onClick:v=>v.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h3",{children:[e.jsx("i",{className:"fa fa-id-card"})," Emirates ID"]}),e.jsx("button",{className:"modal-close",onClick:t,children:e.jsx("i",{className:"fa fa-times"})})]}),e.jsxs("form",{onSubmit:N,children:[e.jsx("div",{className:"modal-body",children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-12 mb-3",children:[e.jsxs("label",{className:"form-label",children:["Emirates ID Number ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"text",name:"emiratesIDNumber",className:`form-control ${j.emiratesIDNumber?"is-invalid":""}`,value:u.emiratesIDNumber,onChange:v=>{h(S=>({...S,emiratesIDNumber:v.target.value})),b(S=>({...S,emiratesIDNumber:""}))},placeholder:"784-XXXX-XXXXXXX-X"}),j.emiratesIDNumber&&e.jsx("div",{className:"invalid-feedback",children:j.emiratesIDNumber})]}),e.jsxs("div",{className:"col-md-4 mb-3",children:[e.jsxs("label",{className:"form-label",children:["Emirates ID Cost ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"text",name:"emiratesIDCost",className:`form-control ${j.emiratesIDCost?"is-invalid":""}`,value:u.emiratesIDCost,onChange:v=>{h(S=>({...S,emiratesIDCost:v.target.value})),b(S=>({...S,emiratesIDCost:""}))}}),j.emiratesIDCost&&e.jsx("div",{className:"invalid-feedback",children:j.emiratesIDCost})]}),e.jsxs("div",{className:"col-md-4 mb-3",children:[e.jsxs("label",{className:"form-label",children:["Currency ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("select",{name:"emiratesIDCurrency",className:`form-select ${j.emiratesIDCurrency?"is-invalid":""}`,value:u.emiratesIDCurrency,onChange:v=>{h(S=>({...S,emiratesIDCurrency:v.target.value})),b(S=>({...S,emiratesIDCurrency:""}))},children:[e.jsx("option",{value:"",children:"Select Currency"}),r.map(v=>e.jsx("option",{value:v.currencyID,children:v.currencyName},v.currencyID))]}),j.emiratesIDCurrency&&e.jsx("div",{className:"invalid-feedback",children:j.emiratesIDCurrency})]}),e.jsxs("div",{className:"col-md-4 mb-3",children:[e.jsxs("label",{className:"form-label",children:["Charge On ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("select",{name:"emiratesIDChargeOn",className:"form-select",value:u.emiratesIDChargeOn,onChange:v=>h(S=>({...S,emiratesIDChargeOn:v.target.value})),children:[e.jsx("option",{value:"1",children:"Account"}),e.jsx("option",{value:"2",children:"Supplier"})]})]}),u.emiratesIDChargeOn==="1"&&e.jsxs("div",{className:"col-md-12 mb-3",children:[e.jsxs("label",{className:"form-label",children:["Charge Account ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("select",{name:"emiratesIDChargeAccount",className:`form-select ${j.emiratesIDChargeAccount?"is-invalid":""}`,value:u.emiratesIDChargeAccount,onChange:v=>{h(S=>({...S,emiratesIDChargeAccount:v.target.value})),b(S=>({...S,emiratesIDChargeAccount:""}))},children:[e.jsx("option",{value:"",children:"Select Account"}),i.map(v=>e.jsx("option",{value:v.account_ID,children:v.account_Name},v.account_ID))]}),j.emiratesIDChargeAccount&&e.jsx("div",{className:"invalid-feedback",children:j.emiratesIDChargeAccount})]}),u.emiratesIDChargeOn==="2"&&e.jsxs("div",{className:"col-md-12 mb-3",children:[e.jsxs("label",{className:"form-label",children:["Charge Supplier ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("select",{name:"emiratesIDChargeSupplier",className:`form-select ${j.emiratesIDChargeSupplier?"is-invalid":""}`,value:u.emiratesIDChargeSupplier,onChange:v=>{h(S=>({...S,emiratesIDChargeSupplier:v.target.value})),b(S=>({...S,emiratesIDChargeSupplier:""}))},children:[e.jsx("option",{value:"",children:"Select Supplier"}),o.map(v=>e.jsx("option",{value:v.supp_id,children:v.supp_name},v.supp_id))]}),j.emiratesIDChargeSupplier&&e.jsx("div",{className:"invalid-feedback",children:j.emiratesIDChargeSupplier})]}),e.jsxs("div",{className:"col-md-12 mb-3",children:[e.jsx("label",{className:"form-label",children:"Emirates ID File"}),e.jsx("input",{type:"file",className:"form-control",onChange:v=>p(v.target.files?.[0]||null)})]})]})}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:t,disabled:y,children:"Close"}),e.jsxs("button",{type:"submit",className:"btn btn-primary",disabled:y,children:[y?e.jsx("i",{className:"fa fa-spinner fa-spin me-2"}):null,"Submit"]})]})]})]})}):null}function aA({isOpen:s,onClose:t,residenceId:a,onSuccess:n,currencies:r,accounts:i,suppliers:o,isFamily:c=!1}){const[u,h]=A.useState({visaStampingCost:"150",visaStampingCurrency:"",visaStampingChargeOn:"1",visaStampingChargeAccount:"",visaStampingChargeSupplier:"",visaStampingExpiry:""}),[m,p]=A.useState(null),[y,g]=A.useState(!1),[j,b]=A.useState({});A.useEffect(()=>{s&&a&&r.length>0&&(h({visaStampingCost:"150",visaStampingCurrency:r[0].currencyID.toString(),visaStampingChargeOn:"1",visaStampingChargeAccount:"",visaStampingChargeSupplier:"",visaStampingExpiry:""}),p(null),b({}))},[s,a,r]);const N=async v=>{if(v.preventDefault(),!a)return;const S={};if(u.visaStampingCost||(S.visaStampingCost="Visa Stamping Cost is required"),u.visaStampingCurrency||(S.visaStampingCurrency="Currency is required"),u.visaStampingChargeOn==="1"&&!u.visaStampingChargeAccount&&(S.visaStampingChargeAccount="Charge Account is required"),u.visaStampingChargeOn==="2"&&!u.visaStampingChargeSupplier&&(S.visaStampingChargeSupplier="Charge Supplier is required"),c&&!u.visaStampingExpiry&&(S.visaStampingExpiry="Visa Expiry is required"),Object.keys(S).length>0){b(S);return}g(!0);try{c?await Ft.updateFamilyStep(a,{step:5,cost:parseFloat(u.visaStampingCost),account:u.visaStampingChargeOn==="1"?parseInt(u.visaStampingChargeAccount):null,expiry:u.visaStampingExpiry}):await Ft.updateStep(a,{step:8,markComplete:!0,visaStampingCost:u.visaStampingCost,visaStampingCur:u.visaStampingCurrency,visaStampingChargOpt:u.visaStampingChargeOn,visaStampingChargedEntity:u.visaStampingChargeOn==="1"?u.visaStampingChargeAccount:u.visaStampingChargeSupplier,files:m?{visaStampingFile:m}:{}}),W.fire("Success","Visa Stamping set successfully","success"),n(),t()}catch(E){W.fire("Error",E.response?.data?.message||"Failed to set Visa Stamping","error")}finally{g(!1)}};return s?e.jsx("div",{className:"modal-overlay",onClick:t,children:e.jsxs("div",{className:"modal-container",onClick:v=>v.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h3",{children:[e.jsx("i",{className:"fas fa-stamp"})," Visa Stamping"]}),e.jsx("button",{className:"modal-close",onClick:t,children:e.jsx("i",{className:"fa fa-times"})})]}),e.jsxs("form",{onSubmit:N,children:[e.jsx("div",{className:"modal-body",children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-4 mb-3",children:[e.jsxs("label",{className:"form-label",children:["Visa Stamping Cost ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"text",name:"visaStampingCost",className:`form-control ${j.visaStampingCost?"is-invalid":""}`,value:u.visaStampingCost,onChange:v=>{h(S=>({...S,visaStampingCost:v.target.value})),b(S=>({...S,visaStampingCost:""}))}}),j.visaStampingCost&&e.jsx("div",{className:"invalid-feedback",children:j.visaStampingCost})]}),e.jsxs("div",{className:"col-md-4 mb-3",children:[e.jsxs("label",{className:"form-label",children:["Currency ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("select",{name:"visaStampingCurrency",className:`form-select ${j.visaStampingCurrency?"is-invalid":""}`,value:u.visaStampingCurrency,onChange:v=>{h(S=>({...S,visaStampingCurrency:v.target.value})),b(S=>({...S,visaStampingCurrency:""}))},children:[e.jsx("option",{value:"",children:"Select Currency"}),r.map(v=>e.jsx("option",{value:v.currencyID,children:v.currencyName},v.currencyID))]}),j.visaStampingCurrency&&e.jsx("div",{className:"invalid-feedback",children:j.visaStampingCurrency})]}),e.jsxs("div",{className:"col-md-4 mb-3",children:[e.jsxs("label",{className:"form-label",children:["Charge On ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("select",{name:"visaStampingChargeOn",className:"form-select",value:u.visaStampingChargeOn,onChange:v=>h(S=>({...S,visaStampingChargeOn:v.target.value})),children:[e.jsx("option",{value:"1",children:"Account"}),e.jsx("option",{value:"2",children:"Supplier"})]})]}),u.visaStampingChargeOn==="1"&&e.jsxs("div",{className:"col-md-12 mb-3",children:[e.jsxs("label",{className:"form-label",children:["Charge Account ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("select",{name:"visaStampingChargeAccount",className:`form-select ${j.visaStampingChargeAccount?"is-invalid":""}`,value:u.visaStampingChargeAccount,onChange:v=>{h(S=>({...S,visaStampingChargeAccount:v.target.value})),b(S=>({...S,visaStampingChargeAccount:""}))},children:[e.jsx("option",{value:"",children:"Select Account"}),i.map(v=>e.jsx("option",{value:v.account_ID,children:v.account_Name},v.account_ID))]}),j.visaStampingChargeAccount&&e.jsx("div",{className:"invalid-feedback",children:j.visaStampingChargeAccount})]}),u.visaStampingChargeOn==="2"&&e.jsxs("div",{className:"col-md-12 mb-3",children:[e.jsxs("label",{className:"form-label",children:["Charge Supplier ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("select",{name:"visaStampingChargeSupplier",className:`form-select ${j.visaStampingChargeSupplier?"is-invalid":""}`,value:u.visaStampingChargeSupplier,onChange:v=>{h(S=>({...S,visaStampingChargeSupplier:v.target.value})),b(S=>({...S,visaStampingChargeSupplier:""}))},children:[e.jsx("option",{value:"",children:"Select Supplier"}),o.map(v=>e.jsx("option",{value:v.supp_id,children:v.supp_name},v.supp_id))]}),j.visaStampingChargeSupplier&&e.jsx("div",{className:"invalid-feedback",children:j.visaStampingChargeSupplier})]}),c&&e.jsxs("div",{className:"col-md-12 mb-3",children:[e.jsxs("label",{className:"form-label",children:["Visa Expiry ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"date",name:"visaStampingExpiry",className:`form-control ${j.visaStampingExpiry?"is-invalid":""}`,value:u.visaStampingExpiry,onChange:v=>{h(S=>({...S,visaStampingExpiry:v.target.value})),b(S=>({...S,visaStampingExpiry:""}))}}),j.visaStampingExpiry&&e.jsx("div",{className:"invalid-feedback",children:j.visaStampingExpiry})]}),e.jsxs("div",{className:"col-md-12 mb-3",children:[e.jsx("label",{className:"form-label",children:"Visa Stamping File"}),e.jsx("input",{type:"file",className:"form-control",onChange:v=>p(v.target.files?.[0]||null)})]})]})}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:t,disabled:y,children:"Close"}),e.jsxs("button",{type:"submit",className:"btn btn-primary",disabled:y,children:[y?e.jsx("i",{className:"fa fa-spinner fa-spin me-2"}):null,"Submit"]})]})]})]})}):null}function _R({isOpen:s,onClose:t,residenceId:a,onSuccess:n,currencies:r,accounts:i,suppliers:o}){const[c,u]=A.useState({contractSubmissionCost:"100",contractSubmissionCurrency:"",contractSubmissionChargeOn:"1",contractSubmissionChargeAccount:"",contractSubmissionChargeSupplier:""}),[h,m]=A.useState(null),[p,y]=A.useState(!1),[g,j]=A.useState({});A.useEffect(()=>{s&&a&&r.length>0&&(u({contractSubmissionCost:"100",contractSubmissionCurrency:r[0].currencyID.toString(),contractSubmissionChargeOn:"1",contractSubmissionChargeAccount:"",contractSubmissionChargeSupplier:""}),m(null),j({}))},[s,a,r]);const b=async N=>{if(N.preventDefault(),!a)return;const v={};if(c.contractSubmissionCost||(v.contractSubmissionCost="Contract Submission Cost is required"),c.contractSubmissionCurrency||(v.contractSubmissionCurrency="Currency is required"),c.contractSubmissionChargeOn==="1"&&!c.contractSubmissionChargeAccount&&(v.contractSubmissionChargeAccount="Charge Account is required"),c.contractSubmissionChargeOn==="2"&&!c.contractSubmissionChargeSupplier&&(v.contractSubmissionChargeSupplier="Charge Supplier is required"),Object.keys(v).length>0){j(v);return}y(!0);try{await Ft.updateStep(a,{step:9,markComplete:!0,contractSubmissionCost:c.contractSubmissionCost,contractSubmissionCur:c.contractSubmissionCurrency,contractSubmissionChargOpt:c.contractSubmissionChargeOn,contractSubmissionChargedEntity:c.contractSubmissionChargeOn==="1"?c.contractSubmissionChargeAccount:c.contractSubmissionChargeSupplier,files:h?{contractSubmissionFile:h}:{}}),W.fire("Success","Contract Submission set successfully","success"),n(),t()}catch(S){W.fire("Error",S.response?.data?.message||"Failed to set Contract Submission","error")}finally{y(!1)}};return s?e.jsx("div",{className:"modal-overlay",onClick:t,children:e.jsxs("div",{className:"modal-container",onClick:N=>N.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h3",{children:[e.jsx("i",{className:"fas fa-file-signature"})," Contract Submission"]}),e.jsx("button",{className:"modal-close",onClick:t,children:e.jsx("i",{className:"fa fa-times"})})]}),e.jsxs("form",{onSubmit:b,children:[e.jsx("div",{className:"modal-body",children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-4 mb-3",children:[e.jsxs("label",{className:"form-label",children:["Contract Submission Cost ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"text",name:"contractSubmissionCost",className:`form-control ${g.contractSubmissionCost?"is-invalid":""}`,value:c.contractSubmissionCost,onChange:N=>{u(v=>({...v,contractSubmissionCost:N.target.value})),j(v=>({...v,contractSubmissionCost:""}))}}),g.contractSubmissionCost&&e.jsx("div",{className:"invalid-feedback",children:g.contractSubmissionCost})]}),e.jsxs("div",{className:"col-md-4 mb-3",children:[e.jsxs("label",{className:"form-label",children:["Currency ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("select",{name:"contractSubmissionCurrency",className:`form-select ${g.contractSubmissionCurrency?"is-invalid":""}`,value:c.contractSubmissionCurrency,onChange:N=>{u(v=>({...v,contractSubmissionCurrency:N.target.value})),j(v=>({...v,contractSubmissionCurrency:""}))},children:[e.jsx("option",{value:"",children:"Select Currency"}),r.map(N=>e.jsx("option",{value:N.currencyID,children:N.currencyName},N.currencyID))]}),g.contractSubmissionCurrency&&e.jsx("div",{className:"invalid-feedback",children:g.contractSubmissionCurrency})]}),e.jsxs("div",{className:"col-md-4 mb-3",children:[e.jsxs("label",{className:"form-label",children:["Charge On ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("select",{name:"contractSubmissionChargeOn",className:"form-select",value:c.contractSubmissionChargeOn,onChange:N=>u(v=>({...v,contractSubmissionChargeOn:N.target.value})),children:[e.jsx("option",{value:"1",children:"Account"}),e.jsx("option",{value:"2",children:"Supplier"})]})]}),c.contractSubmissionChargeOn==="1"&&e.jsxs("div",{className:"col-md-12 mb-3",children:[e.jsxs("label",{className:"form-label",children:["Charge Account ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("select",{name:"contractSubmissionChargeAccount",className:`form-select ${g.contractSubmissionChargeAccount?"is-invalid":""}`,value:c.contractSubmissionChargeAccount,onChange:N=>{u(v=>({...v,contractSubmissionChargeAccount:N.target.value})),j(v=>({...v,contractSubmissionChargeAccount:""}))},children:[e.jsx("option",{value:"",children:"Select Account"}),i.map(N=>e.jsx("option",{value:N.account_ID,children:N.account_Name},N.account_ID))]}),g.contractSubmissionChargeAccount&&e.jsx("div",{className:"invalid-feedback",children:g.contractSubmissionChargeAccount})]}),c.contractSubmissionChargeOn==="2"&&e.jsxs("div",{className:"col-md-12 mb-3",children:[e.jsxs("label",{className:"form-label",children:["Charge Supplier ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("select",{name:"contractSubmissionChargeSupplier",className:`form-select ${g.contractSubmissionChargeSupplier?"is-invalid":""}`,value:c.contractSubmissionChargeSupplier,onChange:N=>{u(v=>({...v,contractSubmissionChargeSupplier:N.target.value})),j(v=>({...v,contractSubmissionChargeSupplier:""}))},children:[e.jsx("option",{value:"",children:"Select Supplier"}),o.map(N=>e.jsx("option",{value:N.supp_id,children:N.supp_name},N.supp_id))]}),g.contractSubmissionChargeSupplier&&e.jsx("div",{className:"invalid-feedback",children:g.contractSubmissionChargeSupplier})]}),e.jsxs("div",{className:"col-md-12 mb-3",children:[e.jsx("label",{className:"form-label",children:"Contract Submission File"}),e.jsx("input",{type:"file",className:"form-control",onChange:N=>m(N.target.files?.[0]||null)})]})]})}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:t,disabled:p,children:"Close"}),e.jsxs("button",{type:"submit",className:"btn btn-primary",disabled:p,children:[p?e.jsx("i",{className:"fa fa-spinner fa-spin me-2"}):null,"Submit"]})]})]})]})}):null}function nA({isOpen:s,onClose:t,residenceId:a,currentRemarks:n="",currentStep:r,onSuccess:i,showHistoryByDefault:o=!1,isFamily:c=!1}){const[u,h]=A.useState(""),[m,p]=A.useState([]),[y,g]=A.useState(!1),[j,b]=A.useState(!1),[N,v]=A.useState(!1);A.useEffect(()=>{s&&a&&(h(n||""),v(o),S())},[s,a,n,o]);const S=async()=>{if(a){b(!0);try{console.log("Loading remarks history for residence:",a,"isFamily:",c);const L=c?await Ft.getFamilyRemarksHistory(a):await Ft.getRemarksHistory(a);console.log("Remarks history received:",L),p(Array.isArray(L)?L:[])}catch(L){console.error("Error loading remarks history:",L),console.error("Error response:",L.response),W.fire("Error",L.response?.data?.message||"Failed to load remarks history","error"),p([])}finally{b(!1)}}},E=async L=>{if(L.preventDefault(),!!a){g(!0);try{c?await Ft.addFamilyRemarks(a,u,r):await Ft.addRemarks(a,u,r),W.fire("Success","Remarks saved successfully","success"),i(),t()}catch(z){W.fire("Error",z.response?.data?.message||"Failed to save remarks","error")}finally{g(!1)}}};return s?e.jsx("div",{className:"modal-overlay",onClick:t,children:e.jsxs("div",{className:"modal-container",onClick:L=>L.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h3",{children:[e.jsx("i",{className:"fa fa-comment"})," ",n?"Edit":"Add"," Remarks"]}),e.jsx("button",{className:"modal-close",onClick:t,children:e.jsx("i",{className:"fa fa-times"})})]}),e.jsxs("form",{onSubmit:E,children:[e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:e.jsx("strong",{children:"Remarks"})}),e.jsx("textarea",{className:"form-control",rows:5,value:u,onChange:L=>h(L.target.value),placeholder:"Enter remarks here...",style:{resize:"vertical"}})]}),e.jsx("div",{className:"mb-3",children:e.jsxs("button",{type:"button",className:"btn btn-sm btn-outline-info",onClick:L=>{L.preventDefault(),L.stopPropagation();const z=!N;v(z),z&&S()},children:[e.jsx("i",{className:"fa fa-history"})," ",N?"Hide":"Show"," History"]})}),N&&e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:e.jsx("strong",{children:"Remarks History"})}),j?e.jsxs("div",{className:"text-center py-3",children:[e.jsx("i",{className:"fa fa-spinner fa-spin"})," Loading history..."]}):m.length===0?e.jsxs("div",{className:"alert alert-info",children:[e.jsx("i",{className:"fa fa-info-circle"})," No remarks history found"]}):e.jsx("div",{style:{maxHeight:"200px",overflowY:"auto",border:"1px solid #e5e7eb",borderRadius:"8px",padding:"12px"},children:m.map((L,z)=>e.jsxs("div",{style:{padding:"10px",marginBottom:z<m.length-1?"10px":"0",borderBottom:z<m.length-1?"1px solid #e5e7eb":"none",background:"#f9fafb",borderRadius:"6px"},children:[e.jsxs("div",{style:{fontSize:"12px",color:"#6b7280",marginBottom:"4px"},children:[e.jsxs("strong",{children:["Step ",L.step]}),"  ",new Date(L.datetime).toLocaleString(),"  ",L.username]}),e.jsx("div",{style:{fontSize:"13px",color:"#000000"},children:L.remarks})]},L.remarks_id||z))})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:t,disabled:y,children:"Close"}),e.jsxs("button",{type:"submit",className:"btn btn-primary",disabled:y,children:[y?e.jsx("i",{className:"fa fa-spinner fa-spin me-2"}):null,"Save Remarks"]})]})]})]})}):null}const hw={1:{name:"Offer Letter",count:0,icon:"fa fa-envelope"},"1a":{name:"Offer Letter (S)",count:0,icon:"fa fa-envelope"},2:{name:"Insurance",count:0,icon:"fa fa-shield"},3:{name:"Labour Card",count:0,icon:"fa fa-credit-card"},4:{name:"E-Visa",count:0,icon:"fa fa-ticket",showAccess:!0},"4a":{name:"E-Visa (S)",count:0,icon:"fa fa-file-ticket",showAccess:!0},5:{name:"Change Status",count:0,icon:"fa fa-exchange",showAccess:!0},6:{name:"Medical",count:0,icon:"fa fa-medkit"},7:{name:"EID",count:0,icon:"fa fa-id-card"},8:{name:"Visa Stamping",count:0,icon:"fas fa-stamp"},9:{name:"Contract Submission",count:0,icon:"fas fa-file-signature"},10:{name:"Completed",count:0,icon:"fa fa-hand-holding"}};function SR(){const[s,t]=rc();Vn();const a=s.get("step")||"1",n=s.get("company_id")||"",r=s.get("search")||"",[i,o]=A.useState([]),[c,u]=A.useState(!1),[h,m]=A.useState([]),[p,y]=A.useState({}),[g,j]=A.useState(n),[b,N]=A.useState({currencies:[],accounts:[],suppliers:[],customers:[],positions:[],nationalities:[]}),[v,S]=A.useState(!1),[E,L]=A.useState(!1),[z,V]=A.useState(!1),[te,q]=A.useState(!1),[B,J]=A.useState(!1),[P,K]=A.useState(!1),[H,se]=A.useState(!1),[X,R]=A.useState(!1),[Q,Y]=A.useState(!1),[$,me]=A.useState(!1),[D,U]=A.useState(!1),[le,de]=A.useState(!1),[G,je]=A.useState(!1),[De,Pe]=A.useState(!1),[ke,Ye]=A.useState(!1),[Qe,et]=A.useState(null),[Xe,re]=A.useState(1),[ne,Se]=A.useState(10);A.useEffect(()=>{Mt(),Dt()},[]),A.useEffect(()=>{console.log("useEffect triggered - currentStep:",a,"companyId:",n,"searchQuery:",r),At(),re(1)},[a,n,r]),A.useEffect(()=>{n!==g&&j(n)},[n]);const Ve=Math.ceil(i.length/ne),xt=(Xe-1)*ne,ee=xt+ne,Ie=i.slice(xt,ee),He=Te=>{re(Te),window.scrollTo({top:0,behavior:"smooth"})},Lt=Te=>{Se(Te),re(1)},Dt=async()=>{try{const Te=await Ft.getLookups();N({currencies:Array.isArray(Te.currencies)?Te.currencies:[],accounts:Array.isArray(Te.accounts)?Te.accounts:[],suppliers:Array.isArray(Te.suppliers)?Te.suppliers:[],customers:Array.isArray(Te.customers)?Te.customers:[],positions:Array.isArray(Te.positions)?Te.positions:[],nationalities:Array.isArray(Te.nationalities)?Te.nationalities:[]})}catch(Te){console.error("Error loading lookups:",Te)}},Mt=async()=>{try{const Te=await Ft.getCompanies();m(Array.isArray(Te)?Te:[])}catch(Te){console.error("Error loading companies:",Te)}},At=async()=>{u(!0);try{console.log("Loading tasks for step:",a,"company:",n,"search:",r);const Te=await Ft.getTasks({step:a,company_id:n||void 0,search:r||void 0});if(console.log("Tasks data received:",Te),console.log("Tasks data.residences:",Te?.residences),console.log("Tasks data.stepCounts:",Te?.stepCounts),Te&&Te.residences){const Je=Array.isArray(Te.residences)?Te.residences:[];console.log("Setting residences:",Je.length),o(Je)}else console.log("No residences in data, setting empty array"),o([]);Te&&Te.stepCounts?(console.log("Setting stepCounts:",Te.stepCounts),y(Te.stepCounts)):console.log("No stepCounts in data")}catch(Te){console.error("Error loading tasks:",Te),console.error("Error details:",Te.response),o([]);const Je=Te.response?.data?.message||Te.message||"Failed to load tasks";W.fire("Error",Je,"error")}finally{u(!1)}},Bt=Te=>{const Je=new URLSearchParams(s);Je.set("step",Te),r?Je.set("search",r):Je.delete("search"),g&&g!=="0"?Je.set("company_id",g):Je.delete("company_id"),t(Je,{replace:!1})},rs=Te=>{Te.preventDefault();const be=new FormData(Te.currentTarget).get("search"),Re=new URLSearchParams(s);Re.set("search",be),Re.set("step",a),g&&Re.set("company_id",g),t(Re)},kt=Te=>{j(Te);const Je=new URLSearchParams(s);Je.set("step",a),r&&Je.set("search",r),Te&&Te!=="0"?Je.set("company_id",Te):Je.delete("company_id"),t(Je)},zt=Te=>{const Je=[],be=a;return be==="10"&&(Te.tawjeeh_charge===0&&Je.push(e.jsx("button",{className:"btn btn-warning btn-sm",onClick:()=>{et(Te.residenceID),U(!0)},children:"Tawjeeh"},"tawjeeh")),Te.iloe_charge===0&&Je.push(e.jsx("button",{className:"btn btn-warning btn-sm",onClick:()=>{et(Te.residenceID),de(!0)},children:"ILOE"},"iloe"))),be==="1"?Je.push(e.jsx("button",{className:"btn btn-success btn-sm",onClick:()=>{et(Te.residenceID),L(!0)},children:"Continue"},"continue")):be==="2"?Je.push(e.jsx("button",{className:"btn btn-success btn-sm",onClick:()=>{et(Te.residenceID),V(!0)},children:"Continue"},"continue")):be==="3"?Je.push(e.jsx("button",{className:"btn btn-success btn-sm",onClick:()=>{et(Te.residenceID),q(!0)},children:"Continue"},"continue")):be==="4"?Je.push(e.jsx("button",{className:"btn btn-success btn-sm",onClick:()=>{et(Te.residenceID),J(!0)},children:"Continue"},"continue")):be==="5"?Je.push(e.jsx("button",{className:"btn btn-success btn-sm",onClick:()=>{et(Te.residenceID),K(!0)},children:"Continue"},"continue")):be==="6"?Je.push(e.jsx("button",{className:"btn btn-success btn-sm",onClick:()=>{et(Te.residenceID),se(!0)},children:"Continue"},"continue")):be==="7"?Je.push(e.jsx("button",{className:"btn btn-success btn-sm",onClick:()=>{et(Te.residenceID),R(!0)},children:"Continue"},"continue")):be==="8"?Je.push(e.jsx("button",{className:"btn btn-success btn-sm",onClick:()=>{et(Te.residenceID),Y(!0)},children:"Continue"},"continue")):be==="9"&&Je.push(e.jsx("button",{className:"btn btn-success btn-sm",onClick:()=>{et(Te.residenceID),me(!0)},children:"Continue"},"continue")),be==="1a"?Je.push(e.jsx("button",{className:"btn btn-success btn-sm",onClick:Re=>{Re.preventDefault(),Re.stopPropagation(),console.log("Accept button clicked for residence:",Te.residenceID),$t(Te.residenceID,"accepted")},children:"Accept"},"accept"),e.jsx("button",{className:"btn btn-danger btn-sm",onClick:Re=>{Re.preventDefault(),Re.stopPropagation(),console.log("Reject button clicked for residence:",Te.residenceID),$t(Te.residenceID,"rejected")},children:"Reject"},"reject")):be==="4a"&&(Te.eVisaStatus==="rejected"?Je.push(e.jsxs("button",{className:"btn btn-warning btn-sm",onClick:()=>{et(Te.residenceID),J(!0)},children:[e.jsx("i",{className:"fa fa-redo"})," Re-apply"]},"reapply")):Je.push(e.jsx("button",{className:"btn btn-success btn-sm",onClick:()=>bt(Te.residenceID,"accepted"),children:"Accept"},"accept"),e.jsx("button",{className:"btn btn-danger btn-sm",onClick:()=>bt(Te.residenceID,"rejected"),children:"Reject"},"reject"))),Te.hold===0&&Je.push(e.jsx("a",{href:`/residence/${Te.residenceID}?stp=${be}`,target:"_blank",className:"btn btn-sm btn-primary",children:e.jsx("i",{className:"fa fa-file"})},"file")),be!=="1a"&&be!=="4a"&&Je.push(e.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>ys(Te.residenceID,be),children:"Move"},"move")),Je.push(e.jsx("button",{className:"btn btn-info btn-sm",onClick:()=>{et(Te.residenceID),je(!0)},title:"View/Upload Attachments",children:e.jsx("i",{className:"fa fa-paperclip"})},"attachments")),Je},$t=async(Te,Je)=>{try{console.log("handleOfferLetterStatus called:",{id:Te,status:Je});const be=await Ft.setOfferLetterStatus(Te,Je);console.log("setOfferLetterStatus result:",be),await At(),W.fire("Success",`Offer letter ${Je} successfully`,"success")}catch(be){console.error("handleOfferLetterStatus error:",be),console.error("Error response:",be.response),W.fire("Error",be.response?.data?.message||be.message||"Failed to update status","error")}},bt=async(Te,Je)=>{try{await Ft.setEVisaStatus(Te,Je),await At(),W.fire("Success",`E-Visa ${Je} successfully`,"success")}catch(be){W.fire("Error",be.response?.data?.message||"Failed to update status","error")}},ys=async(Te,Je)=>{const Re={1:1,"1a":2,2:3,3:4,4:5,"4a":5,5:6,6:7,7:8,8:9,9:10,10:10}[Je]||0,lt=[{value:"1",label:"1 - Offer Letter",completedStep:1},{value:"1a",label:"1a - Offer Letter (Submitted)",completedStep:2},{value:"2",label:"2 - Insurance",completedStep:3},{value:"3",label:"3 - Labour Card",completedStep:4},{value:"4",label:"4 - E-Visa",completedStep:5},{value:"4a",label:"4a - E-Visa (Submitted)",completedStep:5},{value:"5",label:"5 - Change Status",completedStep:6},{value:"6",label:"6 - Medical",completedStep:7},{value:"7",label:"7 - Emirates ID",completedStep:8},{value:"8",label:"8 - Visa Stamping",completedStep:9},{value:"9",label:"9 - Contract Submission",completedStep:10},{value:"10",label:"10 - Completed",completedStep:10}],tt=lt.filter(Pt=>Pt.completedStep>Re);if(tt.length===0){W.fire("Info","No steps available to move forward. This residence is already at the final step.","info");return}const Et=tt.map(Pt=>`<option value="${Pt.value}">${Pt.label}</option>`).join(""),is=lt.filter(Pt=>Pt.completedStep<=Re).map(Pt=>Pt.value).join(", "),{value:qt}=await W.fire({title:"Move Residence to Step",html:`
        <div class="text-start">
          <label class="form-label mb-2">Select Target Step:</label>
          <select id="targetStep" class="form-select">
            ${Et}
          </select>
          <small class="text-muted d-block mt-2">
            <strong>Current step:</strong> ${Je}<br>
            <strong>Cannot move back to:</strong> ${is}
          </small>
        </div>
      `,showCancelButton:!0,confirmButtonText:"Move",cancelButtonText:"Cancel",confirmButtonColor:"#007bff",cancelButtonColor:"#6c757d",didOpen:()=>{const Pt=document.getElementById("targetStep");Pt&&Pt.focus()},preConfirm:()=>{const Pt=document.getElementById("targetStep");if(!Pt||!Pt.value)return W.showValidationMessage("Please select a target step"),!1;const Tt=lt.find(Ue=>Ue.value===Pt.value);return Tt&&Tt.completedStep<=Re?(W.showValidationMessage("Cannot move back to a completed step"),!1):Pt.value}});if(qt)try{await Ft.moveResidenceToStep(Te,qt),await At(),W.fire("Success",`Residence moved to step ${qt} successfully`,"success")}catch(Pt){W.fire("Error",Pt.response?.data?.message||Pt.message||"Failed to move residence","error")}};return e.jsxs("div",{className:"residence-tasks-page",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"mb-2",style:{fontSize:"1.75rem",fontWeight:"bold",color:"#000000"},children:[e.jsx("i",{className:"fa fa-tasks me-2"}),"Residence Tasks (Mainland)"]}),e.jsx("p",{style:{color:"#000000"},children:"Manage residence processing steps"})]}),e.jsxs("div",{className:"d-flex gap-2",children:[e.jsxs("button",{className:"btn btn-primary",onClick:()=>S(!0),children:[e.jsx("i",{className:"fa fa-plus-circle me-2"}),"Add New Residence"]}),e.jsxs("a",{href:"/residence/cancellation",className:"btn btn-danger",children:[e.jsx("i",{className:"fa fa-times-circle me-2"}),"Cancellations"]}),e.jsxs("a",{href:"/residence/replacements",className:"btn btn-warning",children:[e.jsx("i",{className:"fa fa-exchange me-2"}),"Replacements"]})]})]})}),e.jsx("div",{className:"mb-6",children:e.jsx("form",{onSubmit:rs,className:"card p-4",children:e.jsxs("div",{className:"input-group",children:[e.jsx("input",{type:"text",className:"form-control",name:"search",defaultValue:r,placeholder:"Search by name or Passport Number"}),e.jsxs("button",{type:"submit",className:"btn btn-primary",children:[e.jsx("i",{className:"fa fa-search mr-2"}),"Search"]})]})})}),e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"btn-group btn-group-block w-100",children:["1","1a","2","3","4","4a","5","6","7","8","9","10"].map(Te=>{const Je=hw[Te];return Je?e.jsxs("button",{type:"button",className:`btn btn-white btn-block step-nav-link ${a===Te?"active":""}`,onClick:be=>{be.preventDefault(),Bt(Te)},children:[e.jsx("span",{children:Je.name}),p[Te]>0&&e.jsx("span",{className:"badge bg-red ms-1",children:p[Te]})]},Te):null})})}),a!=="1"&&e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"card p-4",children:[e.jsx("label",{className:"form-label mb-2",style:{color:"#374151",fontWeight:500},children:"Establishment"}),e.jsxs("select",{className:"form-select",value:g,onChange:Te=>kt(Te.target.value),children:[e.jsx("option",{value:"0",children:"All"}),h.filter(Te=>Te&&Te.company_id).map(Te=>e.jsxs("option",{value:String(Te.company_id||""),children:[Te.company_name||"Unknown"," (",(Te.starting_quota||0)-(Te.totalEmployees||0),")"]},Te.company_id))]})]})}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"mb-0",style:{color:"#1f2937",fontWeight:600},children:"Resident"})}),e.jsxs("div",{className:"card-body",children:[c?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("i",{className:"fa fa-spinner fa-spin fa-2x",style:{color:"#9ca3af"}}),e.jsx("p",{className:"mt-2",style:{color:"#6b7280"},children:"Loading residences..."})]}):i.length===0?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{style:{color:"#6b7280"},children:"No residences found"})}):e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-striped table-bordered align-middle text-nowrap",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"ID"}),e.jsx("th",{children:"App. Date"}),e.jsx("th",{children:"Passenger Name"}),e.jsx("th",{children:"Customer"}),e.jsx("th",{children:"Establishment"}),e.jsx("th",{children:"Passport"}),e.jsx("th",{children:"Remarks"}),e.jsx("th",{children:"Action"})]})}),e.jsx("tbody",{children:Ie.map(Te=>e.jsxs("tr",{className:Te.hold===1?"bg-hold":"",children:[e.jsx("td",{children:Te.residenceID}),e.jsx("td",{children:new Date(Te.datetime).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}),e.jsxs("td",{children:[e.jsx("img",{src:`https://flagpedia.net/data/flags/h24/${Te.countryCode?.toLowerCase()}.png`,alt:Te.countryName,height:"12",className:"me-2"}),e.jsx("strong",{children:Te.passenger_name.toUpperCase()}),Te.uid&&e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("strong",{children:"UID: "}),Te.uid]}),e.jsx("br",{}),e.jsx("strong",{children:"Sale Price: "}),Te.sale_price.toLocaleString(),e.jsx("br",{}),e.jsx("strong",{children:"Paid Amount: "}),Te.paid_amount.toLocaleString()," ",e.jsxs("span",{className:Te.paid_amount===Te.sale_price?"text-success":"text-danger",children:["(",Te.paid_amount===0?0:Math.round(Te.paid_amount/Te.sale_price*100),"%)"]})]}),e.jsx("td",{children:Te.customer_name}),e.jsxs("td",{children:[Te.company_name&&e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:Te.company_name}),Te.company_number&&e.jsxs(e.Fragment,{children:[" - ",Te.company_number]})]}),Te.mb_number&&e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("strong",{children:"MB Number: "}),Te.mb_number]}),Te.mohreStatus&&e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("strong",{children:"MOHRE Status: "}),e.jsx("span",{className:Te.mb_number?"text-primary":"text-danger",children:Te.mb_number?Te.mohreStatus:"Provide MB Number"})]}),hw[a]?.showAccess&&Te.username&&e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("strong",{children:"Username: "}),Te.username,Te.password&&e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("strong",{children:"Password: "}),Te.password]})]})]}),e.jsxs("td",{children:[Te.passportNumber,(a==="4"||a==="5")&&Te.insideOutside&&e.jsx("span",{className:`badge bg-${Te.insideOutside==="inside"?"success":"danger"} ms-2`,children:Te.insideOutside.toUpperCase()})]}),e.jsxs("td",{children:[Te.remarks&&e.jsxs("div",{className:"remarks-content",style:{maxWidth:"200px",wordWrap:"break-word"},children:[e.jsx("strong",{children:"Current Remarks:"}),e.jsx("br",{}),e.jsx("span",{className:"text-info",children:Te.remarks}),e.jsx("br",{}),e.jsxs("button",{className:"btn btn-sm btn-outline-primary btn-view-remarks-history mt-1",onClick:()=>{et(Te.residenceID),Ye(!0),Pe(!0)},children:[e.jsx("i",{className:"fa fa-history"})," History"]})]}),e.jsxs("button",{className:"btn btn-sm btn-outline-success btn-add-remarks",onClick:()=>{et(Te.residenceID),Ye(!1),Pe(!0)},children:[e.jsx("i",{className:"fa fa-plus"})," ",Te.remarks?"Edit":"Add"," Remarks"]})]}),e.jsx("td",{children:e.jsx("div",{className:"d-flex flex-wrap gap-1",children:zt(Te)})})]},Te.residenceID))})]})}),!c&&i.length>0&&e.jsxs("div",{className:"pagination-container",style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"16px 20px",borderTop:"1px solid #e5e7eb",flexWrap:"wrap",gap:"12px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("span",{style:{fontSize:"14px",color:"#6b7280"},children:"Show"}),e.jsxs("select",{value:ne,onChange:Te=>Lt(Number(Te.target.value)),style:{padding:"6px 10px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px",backgroundColor:"#ffffff",cursor:"pointer"},children:[e.jsx("option",{value:5,children:"5"}),e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:25,children:"25"}),e.jsx("option",{value:50,children:"50"}),e.jsx("option",{value:100,children:"100"})]}),e.jsxs("span",{style:{fontSize:"14px",color:"#6b7280"},children:["entries (Showing ",xt+1,"-",Math.min(ee,i.length)," of ",i.length,")"]})]}),e.jsxs("div",{style:{display:"flex",gap:"4px",alignItems:"center"},children:[e.jsx("button",{onClick:()=>He(1),disabled:Xe===1,style:{padding:"6px 12px",border:"1px solid #d1d5db",borderRadius:"6px",backgroundColor:Xe===1?"#f3f4f6":"#ffffff",cursor:Xe===1?"not-allowed":"pointer",fontSize:"14px",color:Xe===1?"#9ca3af":"#374151"},children:e.jsx("i",{className:"fa fa-angle-double-left"})}),e.jsx("button",{onClick:()=>He(Xe-1),disabled:Xe===1,style:{padding:"6px 12px",border:"1px solid #d1d5db",borderRadius:"6px",backgroundColor:Xe===1?"#f3f4f6":"#ffffff",cursor:Xe===1?"not-allowed":"pointer",fontSize:"14px",color:Xe===1?"#9ca3af":"#374151"},children:e.jsx("i",{className:"fa fa-angle-left"})}),Array.from({length:Math.min(5,Ve)},(Te,Je)=>{let be;return Ve<=5||Xe<=3?be=Je+1:Xe>=Ve-2?be=Ve-4+Je:be=Xe-2+Je,e.jsx("button",{onClick:()=>He(be),style:{padding:"6px 12px",border:"1px solid #d1d5db",borderRadius:"6px",backgroundColor:Xe===be?"#000000":"#ffffff",color:Xe===be?"#ffffff":"#374151",cursor:"pointer",fontSize:"14px",fontWeight:Xe===be?"600":"400",minWidth:"36px"},children:be},be)}),e.jsx("button",{onClick:()=>He(Xe+1),disabled:Xe===Ve,style:{padding:"6px 12px",border:"1px solid #d1d5db",borderRadius:"6px",backgroundColor:Xe===Ve?"#f3f4f6":"#ffffff",cursor:Xe===Ve?"not-allowed":"pointer",fontSize:"14px",color:Xe===Ve?"#9ca3af":"#374151"},children:e.jsx("i",{className:"fa fa-angle-right"})}),e.jsx("button",{onClick:()=>He(Ve),disabled:Xe===Ve,style:{padding:"6px 12px",border:"1px solid #d1d5db",borderRadius:"6px",backgroundColor:Xe===Ve?"#f3f4f6":"#ffffff",cursor:Xe===Ve?"not-allowed":"pointer",fontSize:"14px",color:Xe===Ve?"#9ca3af":"#374151"},children:e.jsx("i",{className:"fa fa-angle-double-right"})})]})]})]})]}),Qe&&e.jsxs(e.Fragment,{children:[e.jsx(jR,{isOpen:E,onClose:()=>{L(!1),et(null)},residenceId:Qe,onSuccess:At,companies:h,currencies:b.currencies,accounts:b.accounts,suppliers:b.suppliers}),e.jsx(NR,{isOpen:z,onClose:()=>{V(!1),et(null)},residenceId:Qe,onSuccess:At,currencies:b.currencies,accounts:b.accounts,suppliers:b.suppliers}),e.jsx(wR,{isOpen:te,onClose:()=>{q(!1),et(null)},residenceId:Qe,onSuccess:At,currencies:b.currencies,accounts:b.accounts,suppliers:b.suppliers}),e.jsx(Z5,{isOpen:B,onClose:()=>{J(!1),et(null)},residenceId:Qe,onSuccess:At,currencies:b.currencies,accounts:b.accounts,suppliers:b.suppliers}),e.jsx(eA,{isOpen:P,onClose:()=>{K(!1),et(null)},residenceId:Qe,onSuccess:At,currencies:b.currencies,accounts:b.accounts,suppliers:b.suppliers}),e.jsx(tA,{isOpen:H,onClose:()=>{se(!1),et(null)},residenceId:Qe,onSuccess:At,currencies:b.currencies,accounts:b.accounts,suppliers:b.suppliers}),e.jsx(sA,{isOpen:X,onClose:()=>{R(!1),et(null)},residenceId:Qe,onSuccess:At,currencies:b.currencies,accounts:b.accounts,suppliers:b.suppliers}),e.jsx(aA,{isOpen:Q,onClose:()=>{Y(!1),et(null)},residenceId:Qe,onSuccess:At,currencies:b.currencies,accounts:b.accounts,suppliers:b.suppliers}),e.jsx(_R,{isOpen:$,onClose:()=>{me(!1),et(null)},residenceId:Qe,onSuccess:At,currencies:b.currencies,accounts:b.accounts,suppliers:b.suppliers}),i.find(Te=>Te.residenceID===Qe)&&e.jsx(h0,{isOpen:G,onClose:()=>{je(!1),et(null)},residence:i.find(Te=>Te.residenceID===Qe),onLoadAttachments:async Te=>{const Je=await Ft.getAttachments(Te);return Array.isArray(Je)?Je:[]},onUploadAttachment:async(Te,Je,be,Re)=>{await Ft.uploadAttachment(Te,Je,be,Re)},onDeleteAttachment:async Te=>{await Ft.deleteAttachment(Te)}}),i.find(Te=>Te.residenceID===Qe)&&e.jsx(X5,{isOpen:D,onClose:()=>{U(!1),et(null)},residence:i.find(Te=>Te.residenceID===Qe),onSubmit:async(Te,Je,be)=>{await Ft.updateStep(Te,{step:10,tawjeehIncluded:Je,tawjeeh_amount:be}),At()}}),i.find(Te=>Te.residenceID===Qe)&&e.jsx(G5,{isOpen:le,onClose:()=>{de(!1),et(null)},residence:i.find(Te=>Te.residenceID===Qe),onSubmit:async(Te,Je,be,Re,lt)=>{await Ft.updateStep(Te,{step:2,insuranceIncluded:Je,insuranceAmount:be,iloe_fine:Re,iloe_fine_remarks:lt}),At()}}),Qe&&e.jsx(nA,{isOpen:De,onClose:()=>{Pe(!1),Ye(!1),et(null)},residenceId:Qe,currentRemarks:i.find(Te=>Te.residenceID===Qe)?.remarks||"",currentStep:a,onSuccess:At,showHistoryByDefault:ke})]})]})}const fw={1:{name:"E-Visa",count:0,icon:"fa fa-ticket",showAccess:!0},2:{name:"Change Status",count:0,icon:"fa fa-exchange",showAccess:!0},3:{name:"Medical",count:0,icon:"fa fa-medkit"},4:{name:"Emirates ID",count:0,icon:"fa fa-id-card"},5:{name:"Visa Stamping",count:0,icon:"fas fa-stamp"},6:{name:"Completed",count:0,icon:"fa fa-check-circle"}};function CR(){const[s,t]=rc();Vn();const a=s.get("step")||"1",n=s.get("company_id")||"",r=s.get("search")||"",[i,o]=A.useState([]),[c,u]=A.useState(!1),[h,m]=A.useState([]),[p,y]=A.useState({}),[g,j]=A.useState(n),[b,N]=A.useState({currencies:[],accounts:[],suppliers:[],customers:[],positions:[],nationalities:[]}),[v,S]=A.useState(!1),[E,L]=A.useState(!1),[z,V]=A.useState(!1),[te,q]=A.useState(!1),[B,J]=A.useState(!1),[P,K]=A.useState(!1),[H,se]=A.useState(!1),[X,R]=A.useState(!1),[Q,Y]=A.useState(null),[$,me]=A.useState(!1),[D,U]=A.useState(1),[le,de]=A.useState(10);A.useEffect(()=>{et(),Qe()},[]),A.useEffect(()=>{Xe(),U(1)},[a,n,r]),A.useEffect(()=>{n!==g&&j(n)},[n]);const G=Math.ceil(i.length/le),je=(D-1)*le,De=je+le,Pe=i.slice(je,De),ke=ee=>{U(ee),window.scrollTo({top:0,behavior:"smooth"})},Ye=ee=>{de(ee),U(1)},Qe=async()=>{try{const ee=await Ft.getLookups();N({currencies:Array.isArray(ee.currencies)?ee.currencies:[],accounts:Array.isArray(ee.accounts)?ee.accounts:[],suppliers:Array.isArray(ee.suppliers)?ee.suppliers:[],customers:Array.isArray(ee.customers)?ee.customers:[],positions:Array.isArray(ee.positions)?ee.positions:[],nationalities:Array.isArray(ee.nationalities)?ee.nationalities.map(Ie=>({airport_id:Ie.nationality_id||Ie.airport_id,countryName:Ie.nationality_name||Ie.countryName})):[]})}catch(ee){console.error("Error loading lookups:",ee)}},et=async()=>{try{const ee=await Ft.getCompanies();m(Array.isArray(ee)?ee:[])}catch(ee){console.error("Error loading companies:",ee)}},Xe=async()=>{u(!0);try{const ee=await Ft.getFamilyTasks({step:a,company_id:n||void 0,search:r||void 0});console.log("Family tasks data received:",ee),console.log("Families array:",ee?.families),console.log("Step counts:",ee?.stepCounts),ee&&ee.families?o(Array.isArray(ee.families)?ee.families:[]):o([]),ee&&ee.stepCounts&&y(ee.stepCounts)}catch(ee){console.error("Error loading family tasks:",ee),console.error("Error response:",ee.response),o([]);const Ie=ee.response?.data?.message||ee.message||"Failed to load tasks";W.fire("Error",Ie,"error")}finally{u(!1)}},re=ee=>{const Ie=new URLSearchParams(s);Ie.set("step",ee),r?Ie.set("search",r):Ie.delete("search"),g&&g!=="0"?Ie.set("company_id",g):Ie.delete("company_id"),t(Ie,{replace:!1})},ne=ee=>{ee.preventDefault();const He=new FormData(ee.currentTarget).get("search"),Lt=new URLSearchParams(s);Lt.set("search",He),Lt.set("step",a),g&&Lt.set("company_id",g),t(Lt)},Se=ee=>{j(ee);const Ie=new URLSearchParams(s);Ie.set("step",a),r&&Ie.set("search",r),ee&&ee!=="0"?Ie.set("company_id",ee):Ie.delete("company_id"),t(Ie)},Ve=ee=>{const Ie=[],He=a;return He==="1"?Ie.push(e.jsx("button",{className:"btn btn-success btn-sm",onClick:()=>{Y(ee.familyResidenceID),S(!0)},children:"Continue"},"continue")):He==="2"?Ie.push(e.jsx("button",{className:"btn btn-success btn-sm",onClick:()=>{Y(ee.familyResidenceID),L(!0)},children:"Continue"},"continue")):He==="3"?Ie.push(e.jsx("button",{className:"btn btn-success btn-sm",onClick:()=>{Y(ee.familyResidenceID),V(!0)},children:"Continue"},"continue")):He==="4"?Ie.push(e.jsx("button",{className:"btn btn-success btn-sm",onClick:()=>{Y(ee.familyResidenceID),q(!0)},children:"Continue"},"continue")):He==="5"&&Ie.push(e.jsx("button",{className:"btn btn-success btn-sm",onClick:()=>{Y(ee.familyResidenceID),J(!0)},children:"Continue"},"continue")),ee.hold===0&&Ie.push(e.jsx("a",{href:`/residence/family/${ee.familyResidenceID}?stp=${He}`,target:"_blank",className:"btn btn-sm btn-primary",children:e.jsx("i",{className:"fa fa-file"})},"file")),Ie.push(e.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>xt(ee.familyResidenceID,He),children:"Move"},"move")),Ie.push(e.jsx("button",{className:"btn btn-info btn-sm",onClick:()=>{Y(ee.familyResidenceID),K(!0)},title:"View/Upload Attachments",children:e.jsx("i",{className:"fa fa-paperclip"})},"attachments")),Ie},xt=async(ee,Ie)=>{const Lt={1:1,2:2,3:3,4:4,5:5,6:6}[Ie]||0,Dt=[{value:"1",label:"1 - E-Visa",completedStep:1},{value:"2",label:"2 - Change Status",completedStep:2},{value:"3",label:"3 - Medical",completedStep:3},{value:"4",label:"4 - Emirates ID",completedStep:4},{value:"5",label:"5 - Visa Stamping",completedStep:5},{value:"6",label:"6 - Completed",completedStep:6}],Mt=Dt.filter(kt=>kt.completedStep>Lt);if(Mt.length===0){W.fire("Info","No steps available to move forward. This family residence is already at the final step.","info");return}const At=Mt.map(kt=>`<option value="${kt.value}">${kt.label}</option>`).join(""),Bt=Dt.filter(kt=>kt.completedStep<=Lt).map(kt=>kt.value).join(", "),{value:rs}=await W.fire({title:"Move Family Residence to Step",html:`
        <div class="text-start">
          <label class="form-label mb-2">Select Target Step:</label>
          <select id="targetStep" class="form-select">
            ${At}
          </select>
          <small class="text-muted d-block mt-2">
            <strong>Current step:</strong> ${Ie}<br>
            <strong>Cannot move back to:</strong> ${Bt}
          </small>
        </div>
      `,showCancelButton:!0,confirmButtonText:"Move",cancelButtonText:"Cancel",confirmButtonColor:"#007bff",cancelButtonColor:"#6c757d",didOpen:()=>{const kt=document.getElementById("targetStep");kt&&kt.focus()},preConfirm:()=>{const kt=document.getElementById("targetStep");if(!kt||!kt.value)return W.showValidationMessage("Please select a target step"),!1;const zt=Dt.find($t=>$t.value===kt.value);return zt&&zt.completedStep<=Lt?(W.showValidationMessage("Cannot move back to a completed step"),!1):kt.value}});if(rs)try{await Ft.moveFamilyToStep(ee,rs),await Xe(),W.fire("Success",`Family residence moved to step ${rs} successfully`,"success")}catch(kt){W.fire("Error",kt.response?.data?.message||kt.message||"Failed to move family residence","error")}};return e.jsxs("div",{className:"residence-tasks-page",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"mb-2",style:{fontSize:"1.75rem",fontWeight:"bold",color:"#000000"},children:[e.jsx("i",{className:"fa fa-users me-2"}),"Family Residence Tasks"]}),e.jsx("p",{style:{color:"#000000"},children:"Manage family residence processing steps"})]}),e.jsxs("button",{className:"btn btn-primary",onClick:()=>me(!0),children:[e.jsx("i",{className:"fa fa-plus me-2"}),"Add New Family Residence"]})]})}),e.jsx("div",{className:"mb-6",children:e.jsx("form",{onSubmit:ne,className:"card p-4",children:e.jsxs("div",{className:"input-group",children:[e.jsx("input",{type:"text",className:"form-control",name:"search",defaultValue:r,placeholder:"Search by name or Passport Number"}),e.jsxs("button",{type:"submit",className:"btn btn-primary",children:[e.jsx("i",{className:"fa fa-search mr-2"}),"Search"]})]})})}),e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"btn-group btn-group-block w-100",children:["1","2","3","4","5","6"].map(ee=>{const Ie=fw[ee];return Ie?e.jsxs("button",{type:"button",className:`btn btn-white btn-block step-nav-link ${a===ee?"active":""}`,onClick:He=>{He.preventDefault(),re(ee)},children:[e.jsx("span",{children:Ie.name}),p[ee]>0&&e.jsx("span",{className:"badge bg-red ms-1",children:p[ee]})]},ee):null})})}),a!=="1"&&e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"card p-4",children:[e.jsx("label",{className:"form-label mb-2",style:{color:"#374151",fontWeight:500},children:"Establishment"}),e.jsxs("select",{className:"form-select",value:g,onChange:ee=>Se(ee.target.value),children:[e.jsx("option",{value:"0",children:"All"}),h.filter(ee=>ee&&ee.company_id).map(ee=>e.jsxs("option",{value:String(ee.company_id||""),children:[ee.company_name||"Unknown"," (",(ee.starting_quota||0)-(ee.totalEmployees||0),")"]},ee.company_id))]})]})}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"mb-0",style:{color:"#1f2937",fontWeight:600},children:"Family Resident"})}),e.jsxs("div",{className:"card-body",children:[c?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("i",{className:"fa fa-spinner fa-spin fa-2x",style:{color:"#9ca3af"}}),e.jsx("p",{className:"mt-2",style:{color:"#6b7280"},children:"Loading family residences..."})]}):i.length===0?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{style:{color:"#6b7280"},children:"No family residences found"})}):e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-striped table-bordered align-middle text-nowrap",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"ID"}),e.jsx("th",{children:"App. Date"}),e.jsx("th",{children:"Passenger Name"}),e.jsx("th",{children:"Customer"}),e.jsx("th",{children:"Establishment"}),e.jsx("th",{children:"Passport"}),e.jsx("th",{children:"Remarks"}),e.jsx("th",{children:"Action"})]})}),e.jsx("tbody",{children:Pe.map(ee=>e.jsxs("tr",{className:ee.hold===1?"bg-hold":"",children:[e.jsx("td",{children:ee.familyResidenceID}),e.jsx("td",{children:new Date(ee.datetime).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}),e.jsxs("td",{children:[e.jsx("img",{src:`https://flagpedia.net/data/flags/h24/${ee.countryCode?.toLowerCase()}.png`,alt:ee.countryName,height:"12",className:"me-2"}),e.jsx("strong",{children:ee.passenger_name.toUpperCase()}),ee.uid&&e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("strong",{children:"UID: "}),ee.uid]}),e.jsx("br",{}),e.jsx("strong",{children:"Sale Price: "}),ee.sale_price.toLocaleString(),e.jsx("br",{}),e.jsx("strong",{children:"Paid Amount: "}),ee.paid_amount.toLocaleString()," ",e.jsxs("span",{className:ee.paid_amount===ee.sale_price?"text-success":"text-danger",children:["(",ee.paid_amount===0?0:Math.round(ee.paid_amount/ee.sale_price*100),"%)"]})]}),e.jsx("td",{children:ee.customer_name}),e.jsxs("td",{children:[ee.company_name&&e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:ee.company_name}),ee.company_number&&e.jsxs(e.Fragment,{children:[" - ",ee.company_number]})]}),ee.mb_number&&e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("strong",{children:"MB Number: "}),ee.mb_number]}),ee.mohreStatus&&e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("strong",{children:"MOHRE Status: "}),e.jsx("span",{className:ee.mb_number?"text-primary":"text-danger",children:ee.mb_number?ee.mohreStatus:"Provide MB Number"})]}),fw[a]?.showAccess&&ee.username&&e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("strong",{children:"Username: "}),ee.username,ee.password&&e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("strong",{children:"Password: "}),ee.password]})]})]}),e.jsxs("td",{children:[ee.passportNumber,ee.insideOutside&&e.jsx("span",{className:`badge bg-${ee.insideOutside==="inside"?"success":"danger"} ms-2`,children:ee.insideOutside.toUpperCase()})]}),e.jsxs("td",{children:[ee.remarks&&e.jsxs("div",{className:"remarks-content",style:{maxWidth:"200px",wordWrap:"break-word"},children:[e.jsx("strong",{children:"Current Remarks:"}),e.jsx("br",{}),e.jsx("span",{className:"text-info",children:ee.remarks}),e.jsx("br",{}),e.jsxs("button",{className:"btn btn-sm btn-outline-primary btn-view-remarks-history mt-1",onClick:()=>{Y(ee.familyResidenceID),R(!0),se(!0)},children:[e.jsx("i",{className:"fa fa-history"})," History"]})]}),e.jsxs("button",{className:"btn btn-sm btn-outline-success btn-add-remarks",onClick:()=>{Y(ee.familyResidenceID),R(!1),se(!0)},children:[e.jsx("i",{className:"fa fa-plus"})," ",ee.remarks?"Edit":"Add"," Remarks"]})]}),e.jsx("td",{children:e.jsx("div",{className:"d-flex flex-wrap gap-1",children:Ve(ee)})})]},ee.familyResidenceID))})]})}),!c&&i.length>0&&e.jsxs("div",{className:"pagination-container",style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"16px 20px",borderTop:"1px solid #e5e7eb",flexWrap:"wrap",gap:"12px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("span",{style:{fontSize:"14px",color:"#6b7280"},children:"Show"}),e.jsxs("select",{value:le,onChange:ee=>Ye(Number(ee.target.value)),style:{padding:"6px 10px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px",backgroundColor:"#ffffff",cursor:"pointer"},children:[e.jsx("option",{value:5,children:"5"}),e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:25,children:"25"}),e.jsx("option",{value:50,children:"50"}),e.jsx("option",{value:100,children:"100"})]}),e.jsxs("span",{style:{fontSize:"14px",color:"#6b7280"},children:["entries (Showing ",je+1,"-",Math.min(De,i.length)," of ",i.length,")"]})]}),e.jsxs("div",{style:{display:"flex",gap:"4px",alignItems:"center"},children:[e.jsx("button",{onClick:()=>ke(1),disabled:D===1,style:{padding:"6px 12px",border:"1px solid #d1d5db",borderRadius:"6px",backgroundColor:D===1?"#f3f4f6":"#ffffff",cursor:D===1?"not-allowed":"pointer",fontSize:"14px",color:D===1?"#9ca3af":"#374151"},children:e.jsx("i",{className:"fa fa-angle-double-left"})}),e.jsx("button",{onClick:()=>ke(D-1),disabled:D===1,style:{padding:"6px 12px",border:"1px solid #d1d5db",borderRadius:"6px",backgroundColor:D===1?"#f3f4f6":"#ffffff",cursor:D===1?"not-allowed":"pointer",fontSize:"14px",color:D===1?"#9ca3af":"#374151"},children:e.jsx("i",{className:"fa fa-angle-left"})}),Array.from({length:Math.min(5,G)},(ee,Ie)=>{let He;return G<=5||D<=3?He=Ie+1:D>=G-2?He=G-4+Ie:He=D-2+Ie,e.jsx("button",{onClick:()=>ke(He),style:{padding:"6px 12px",border:"1px solid #d1d5db",borderRadius:"6px",backgroundColor:D===He?"#000000":"#ffffff",color:D===He?"#ffffff":"#374151",cursor:"pointer",fontSize:"14px",fontWeight:D===He?"600":"400",minWidth:"36px"},children:He},He)}),e.jsx("button",{onClick:()=>ke(D+1),disabled:D===G,style:{padding:"6px 12px",border:"1px solid #d1d5db",borderRadius:"6px",backgroundColor:D===G?"#f3f4f6":"#ffffff",cursor:D===G?"not-allowed":"pointer",fontSize:"14px",color:D===G?"#9ca3af":"#374151"},children:e.jsx("i",{className:"fa fa-angle-right"})}),e.jsx("button",{onClick:()=>ke(G),disabled:D===G,style:{padding:"6px 12px",border:"1px solid #d1d5db",borderRadius:"6px",backgroundColor:D===G?"#f3f4f6":"#ffffff",cursor:D===G?"not-allowed":"pointer",fontSize:"14px",color:D===G?"#9ca3af":"#374151"},children:e.jsx("i",{className:"fa fa-angle-double-right"})})]})]})]})]}),Q&&e.jsxs(e.Fragment,{children:[e.jsx(Z5,{isOpen:v,onClose:()=>{S(!1),Y(null)},residenceId:Q,onSuccess:Xe,currencies:b.currencies,accounts:b.accounts,suppliers:b.suppliers,isFamily:!0}),e.jsx(eA,{isOpen:E,onClose:()=>{L(!1),Y(null)},residenceId:Q,onSuccess:Xe,currencies:b.currencies,accounts:b.accounts,suppliers:b.suppliers,isFamily:!0}),e.jsx(tA,{isOpen:z,onClose:()=>{V(!1),Y(null)},residenceId:Q,onSuccess:Xe,currencies:b.currencies,accounts:b.accounts,suppliers:b.suppliers,isFamily:!0}),e.jsx(sA,{isOpen:te,onClose:()=>{q(!1),Y(null)},residenceId:Q,onSuccess:Xe,currencies:b.currencies,accounts:b.accounts,suppliers:b.suppliers,isFamily:!0}),e.jsx(aA,{isOpen:B,onClose:()=>{J(!1),Y(null)},residenceId:Q,onSuccess:Xe,currencies:b.currencies,accounts:b.accounts,suppliers:b.suppliers,isFamily:!0}),i.find(ee=>ee.familyResidenceID===Q)&&e.jsx(h0,{isOpen:P,onClose:()=>{K(!1),Y(null)},residence:{...i.find(ee=>ee.familyResidenceID===Q),familyResidenceID:Q},onLoadAttachments:async ee=>{const Ie=await Ft.getFamilyAttachments(ee);return Array.isArray(Ie)?Ie:[]},onUploadAttachment:async(ee,Ie,He,Lt)=>{await Ft.uploadFamilyAttachment(ee,Ie,He,Lt)},onDeleteAttachment:async ee=>{await Ft.deleteFamilyAttachment(ee)}}),Q&&e.jsx(nA,{isOpen:H,onClose:()=>{se(!1),R(!1),Y(null)},residenceId:Q,currentRemarks:i.find(ee=>ee.familyResidenceID===Q)?.remarks||"",currentStep:a,onSuccess:Xe,showHistoryByDefault:X,isFamily:!0})]}),e.jsx(AR,{isOpen:$,onClose:()=>me(!1),onSuccess:Xe,customers:b.customers,nationalities:b.nationalities,currencies:b.currencies})]})}function AR({isOpen:s,onClose:t,onSuccess:a,customers:n,nationalities:r,currencies:i}){const[o,c]=A.useState({customer_id:"",residence_id:"",passenger_name:"",passport_number:"",passport_expiry:"",date_of_birth:"",gender:"",nationality:"",relation_type:"",inside_outside:"",sale_price:"0",sale_currency:"AED",remarks:""}),[u,h]=A.useState({passport_doc:null,photo_doc:null,id_front_doc:null,id_back_doc:null,birth_certificate_doc:null,marriage_certificate_doc:null,other_doc:null}),[m,p]=A.useState(!1),[y,g]=A.useState({});A.useEffect(()=>{s&&(c({customer_id:"",residence_id:"",passenger_name:"",passport_number:"",passport_expiry:"",date_of_birth:"",gender:"",nationality:"",relation_type:"",inside_outside:"",sale_price:"0",sale_currency:"AED",remarks:""}),h({passport_doc:null,photo_doc:null,id_front_doc:null,id_back_doc:null,birth_certificate_doc:null,marriage_certificate_doc:null,other_doc:null}),g({}))},[s]);const j=async b=>{b.preventDefault();const N={};if(o.customer_id||(N.customer_id="Customer is required"),o.passenger_name||(N.passenger_name="Passenger Name is required"),o.passport_number||(N.passport_number="Passport Number is required"),o.relation_type||(N.relation_type="Relation Type is required"),o.inside_outside||(N.inside_outside="Location is required"),o.nationality||(N.nationality="Nationality is required"),Object.keys(N).length>0){g(N);return}p(!0);try{await Ft.addFamilyResidence({customer_id:parseInt(o.customer_id),residence_id:o.residence_id?parseInt(o.residence_id):void 0,passenger_name:o.passenger_name,passport_number:o.passport_number,passport_expiry:o.passport_expiry||void 0,date_of_birth:o.date_of_birth||void 0,gender:o.gender||void 0,nationality:parseInt(o.nationality),relation_type:o.relation_type,inside_outside:o.inside_outside,sale_price:parseFloat(o.sale_price),sale_currency:o.sale_currency,remarks:o.remarks||void 0,documents:u}),W.fire("Success","Family residence added successfully","success"),a(),t()}catch(v){W.fire("Error",v.response?.data?.message||"Failed to add family residence","error")}finally{p(!1)}};return s?e.jsx("div",{className:"modal-overlay",onClick:t,children:e.jsxs("div",{className:"modal-container",style:{maxWidth:"800px"},onClick:b=>b.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h3",{children:[e.jsx("i",{className:"fa fa-plus"})," Add New Family Residence"]}),e.jsx("button",{className:"modal-close",onClick:t,children:e.jsx("i",{className:"fa fa-times"})})]}),e.jsxs("form",{onSubmit:j,encType:"multipart/form-data",children:[e.jsx("div",{className:"modal-body",children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6 mb-3",children:[e.jsxs("label",{className:"form-label",children:["Customer ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("select",{className:`form-select ${y.customer_id?"is-invalid":""}`,value:o.customer_id,onChange:b=>{c(N=>({...N,customer_id:b.target.value})),g(N=>({...N,customer_id:""}))},required:!0,children:[e.jsx("option",{value:"",children:"Select Customer"}),n.map(b=>e.jsx("option",{value:b.customer_id,children:b.customer_name},b.customer_id))]}),y.customer_id&&e.jsx("div",{className:"invalid-feedback",children:y.customer_id})]}),e.jsxs("div",{className:"col-md-6 mb-3",children:[e.jsx("label",{className:"form-label",children:"Residence ID (Optional)"}),e.jsx("input",{type:"number",className:"form-control",value:o.residence_id,onChange:b=>c(N=>({...N,residence_id:b.target.value}))})]}),e.jsxs("div",{className:"col-md-6 mb-3",children:[e.jsxs("label",{className:"form-label",children:["Passenger Name ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"text",className:`form-control ${y.passenger_name?"is-invalid":""}`,value:o.passenger_name,onChange:b=>{c(N=>({...N,passenger_name:b.target.value})),g(N=>({...N,passenger_name:""}))},required:!0}),y.passenger_name&&e.jsx("div",{className:"invalid-feedback",children:y.passenger_name})]}),e.jsxs("div",{className:"col-md-6 mb-3",children:[e.jsxs("label",{className:"form-label",children:["Passport Number ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"text",className:`form-control ${y.passport_number?"is-invalid":""}`,value:o.passport_number,onChange:b=>{c(N=>({...N,passport_number:b.target.value})),g(N=>({...N,passport_number:""}))},required:!0}),y.passport_number&&e.jsx("div",{className:"invalid-feedback",children:y.passport_number})]}),e.jsxs("div",{className:"col-md-6 mb-3",children:[e.jsx("label",{className:"form-label",children:"Passport Expiry"}),e.jsx("input",{type:"date",className:"form-control",value:o.passport_expiry,onChange:b=>c(N=>({...N,passport_expiry:b.target.value}))})]}),e.jsxs("div",{className:"col-md-6 mb-3",children:[e.jsx("label",{className:"form-label",children:"Date of Birth"}),e.jsx("input",{type:"date",className:"form-control",value:o.date_of_birth,onChange:b=>c(N=>({...N,date_of_birth:b.target.value}))})]}),e.jsxs("div",{className:"col-md-6 mb-3",children:[e.jsx("label",{className:"form-label",children:"Gender"}),e.jsxs("select",{className:"form-select",value:o.gender,onChange:b=>c(N=>({...N,gender:b.target.value})),children:[e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"Male",children:"Male"}),e.jsx("option",{value:"Female",children:"Female"})]})]}),e.jsxs("div",{className:"col-md-6 mb-3",children:[e.jsxs("label",{className:"form-label",children:["Nationality ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("select",{className:`form-select ${y.nationality?"is-invalid":""}`,value:o.nationality,onChange:b=>{c(N=>({...N,nationality:b.target.value})),g(N=>({...N,nationality:""}))},required:!0,children:[e.jsx("option",{value:"",children:"Select Nationality"}),r.map(b=>e.jsx("option",{value:b.airport_id,children:b.countryName},b.airport_id))]}),y.nationality&&e.jsx("div",{className:"invalid-feedback",children:y.nationality})]}),e.jsxs("div",{className:"col-md-6 mb-3",children:[e.jsxs("label",{className:"form-label",children:["Relation Type ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("select",{className:`form-select ${y.relation_type?"is-invalid":""}`,value:o.relation_type,onChange:b=>{c(N=>({...N,relation_type:b.target.value})),g(N=>({...N,relation_type:""}))},required:!0,children:[e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"spouse",children:"Spouse"}),e.jsx("option",{value:"son",children:"Son"}),e.jsx("option",{value:"daughter",children:"Daughter"}),e.jsx("option",{value:"father",children:"Father"}),e.jsx("option",{value:"mother",children:"Mother"}),e.jsx("option",{value:"brother",children:"Brother"}),e.jsx("option",{value:"sister",children:"Sister"}),e.jsx("option",{value:"other",children:"Other"})]}),y.relation_type&&e.jsx("div",{className:"invalid-feedback",children:y.relation_type})]}),e.jsxs("div",{className:"col-md-6 mb-3",children:[e.jsxs("label",{className:"form-label",children:["Location ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("select",{className:`form-select ${y.inside_outside?"is-invalid":""}`,value:o.inside_outside,onChange:b=>{c(N=>({...N,inside_outside:b.target.value})),g(N=>({...N,inside_outside:""}))},required:!0,children:[e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"inside",children:"Inside UAE"}),e.jsx("option",{value:"outside",children:"Outside UAE"})]}),y.inside_outside&&e.jsx("div",{className:"invalid-feedback",children:y.inside_outside})]}),e.jsxs("div",{className:"col-md-6 mb-3",children:[e.jsx("label",{className:"form-label",children:"Sale Price"}),e.jsx("input",{type:"number",step:"0.01",className:"form-control",value:o.sale_price,onChange:b=>c(N=>({...N,sale_price:b.target.value}))})]}),e.jsxs("div",{className:"col-md-6 mb-3",children:[e.jsx("label",{className:"form-label",children:"Currency"}),e.jsx("select",{className:"form-select",value:o.sale_currency,onChange:b=>c(N=>({...N,sale_currency:b.target.value})),children:i.map(b=>e.jsx("option",{value:b.currencyName,children:b.currencyName},b.currencyID))})]}),e.jsxs("div",{className:"col-md-12 mb-3",children:[e.jsx("label",{className:"form-label",children:"Remarks"}),e.jsx("textarea",{className:"form-control",rows:3,value:o.remarks,onChange:b=>c(N=>({...N,remarks:b.target.value}))})]}),e.jsxs("div",{className:"col-md-12 mb-3",children:[e.jsx("hr",{}),e.jsxs("h5",{className:"mb-3",children:[e.jsx("i",{className:"fa fa-file me-2"}),"Documents"]})]}),e.jsxs("div",{className:"col-md-6 mb-3",children:[e.jsx("label",{className:"form-label",children:"Passport Copy"}),e.jsx("input",{type:"file",className:"form-control",accept:".pdf,.jpg,.jpeg,.png,.doc,.docx",onChange:b=>h(N=>({...N,passport_doc:b.target.files?.[0]||null}))})]}),e.jsxs("div",{className:"col-md-6 mb-3",children:[e.jsx("label",{className:"form-label",children:"Photo"}),e.jsx("input",{type:"file",className:"form-control",accept:".jpg,.jpeg,.png",onChange:b=>h(N=>({...N,photo_doc:b.target.files?.[0]||null}))})]}),e.jsxs("div",{className:"col-md-6 mb-3",children:[e.jsx("label",{className:"form-label",children:"ID Front"}),e.jsx("input",{type:"file",className:"form-control",accept:".pdf,.jpg,.jpeg,.png",onChange:b=>h(N=>({...N,id_front_doc:b.target.files?.[0]||null}))})]}),e.jsxs("div",{className:"col-md-6 mb-3",children:[e.jsx("label",{className:"form-label",children:"ID Back"}),e.jsx("input",{type:"file",className:"form-control",accept:".pdf,.jpg,.jpeg,.png",onChange:b=>h(N=>({...N,id_back_doc:b.target.files?.[0]||null}))})]}),e.jsxs("div",{className:"col-md-6 mb-3",children:[e.jsx("label",{className:"form-label",children:"Birth Certificate"}),e.jsx("input",{type:"file",className:"form-control",accept:".pdf,.jpg,.jpeg,.png,.doc,.docx",onChange:b=>h(N=>({...N,birth_certificate_doc:b.target.files?.[0]||null}))})]}),e.jsxs("div",{className:"col-md-6 mb-3",children:[e.jsx("label",{className:"form-label",children:"Marriage Certificate"}),e.jsx("input",{type:"file",className:"form-control",accept:".pdf,.jpg,.jpeg,.png,.doc,.docx",onChange:b=>h(N=>({...N,marriage_certificate_doc:b.target.files?.[0]||null}))})]}),e.jsxs("div",{className:"col-md-12 mb-3",children:[e.jsx("label",{className:"form-label",children:"Other Document"}),e.jsx("input",{type:"file",className:"form-control",accept:".pdf,.jpg,.jpeg,.png,.doc,.docx",onChange:b=>h(N=>({...N,other_doc:b.target.files?.[0]||null}))})]})]})}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:t,disabled:m,children:"Close"}),e.jsxs("button",{type:"submit",className:"btn btn-primary",disabled:m,children:[m?e.jsx("i",{className:"fa fa-spinner fa-spin me-2"}):null,"Add Family Residence"]})]})]})]})}):null}const Yc={getTickets:async s=>{const t=new URLSearchParams;s?.startDate&&t.append("startDate",s.startDate),s?.endDate&&t.append("endDate",s.endDate),s?.customerId&&t.append("customerId",s.customerId.toString()),s?.supplierId&&t.append("supplierId",s.supplierId.toString()),s?.pnr&&t.append("pnr",s.pnr),s?.passengerName&&t.append("passengerName",s.passengerName),s?.ticketNumber&&t.append("ticketNumber",s.ticketNumber),s?.flightType&&t.append("flightType",s.flightType),s?.fromAirport&&t.append("fromAirport",s.fromAirport.toString()),s?.toAirport&&t.append("toAirport",s.toAirport.toString());const a=t.toString(),n=`/ticket/list.php${a?`?${a}`:""}`;return(await Ne.get(n)).data.data||[]},getDropdowns:async()=>(await Ne.get("/ticket/dropdowns.php")).data.data,createTicket:async s=>(await Ne.post("/ticket/create.php",s)).data.data,deleteTicket:async s=>{await Ne.post("/ticket/delete.php",{ticket_id:s})},updateTicket:async(s,t)=>{await Ne.put("/ticket/update.php",{ticket_id:s,...t})},changeDate:async(s,t)=>{const a=new FormData;a.append("ticket_id",s.toString()),a.append("extended_date",t.extended_date),a.append("supplier_id",t.supplier_id.toString()),a.append("net_amount",t.net_amount.toString()),a.append("net_currency_id",t.net_currency_id.toString()),a.append("sale_amount",t.sale_amount.toString()),a.append("sale_currency_id",t.sale_currency_id.toString()),t.remarks&&a.append("remarks",t.remarks),t.changedTicket&&a.append("changedTicket",t.changedTicket),await Ne.post("/ticket/change-date.php",a,{headers:{"Content-Type":"multipart/form-data"}})},uploadTicketCopy:async(s,t)=>{const a=new FormData;return a.append("ticket_id",s.toString()),a.append("ticketCopy",t),(await Ne.post("/ticket/upload-copy.php",a,{headers:{"Content-Type":"multipart/form-data"}})).data},refundTicket:async(s,t)=>{await Ne.post("/ticket/refund.php",{ticket_id:s,...t})}},_t=({label:s,name:t,type:a="text",value:n,onChange:r,options:i=[],required:o=!1,disabled:c=!1,placeholder:u,icon:h,error:m,helpText:p,rows:y=3,min:g,max:j,searchable:b=!1})=>{const N=S=>{const E=a==="number"?parseFloat(S.target.value)||0:S.target.value;r(E)},v=()=>{const S={id:t,name:t,value:n,onChange:N,required:o,disabled:c,placeholder:u||s,className:`form-field-input ${m?"error":""} ${c?"disabled":""}`};switch(a){case"select":return b?e.jsx(It,{options:i,value:n,onChange:r,placeholder:u||`Select ${s}`,disabled:c,required:o}):e.jsxs("select",{...S,children:[e.jsxs("option",{value:"",children:["Select ",s]}),i.map(E=>e.jsx("option",{value:E.value,children:E.label},E.value))]});case"textarea":return e.jsx("textarea",{...S,rows:y});default:return e.jsx("input",{...S,type:a,min:g,max:j})}};return e.jsxs("div",{className:`form-field-wrapper ${c?"disabled":""}`,children:[e.jsxs("label",{htmlFor:t,className:"form-field-label",children:[h&&e.jsx("i",{className:`${h} me-2`}),s,o&&e.jsx("span",{className:"required-indicator",children:"*"})]}),e.jsxs("div",{className:"form-field-input-wrapper",children:[v(),m&&e.jsxs("div",{className:"form-field-error",children:[e.jsx("i",{className:"fa fa-exclamation-circle me-1"}),m]}),p&&!m&&e.jsxs("div",{className:"form-field-help",children:[e.jsx("i",{className:"fa fa-info-circle me-1"}),p]})]})]})},ul=({title:s,icon:t,children:a,collapsible:n=!1,defaultCollapsed:r=!1})=>{const[i,o]=Wg.useState(r),c=()=>{n&&o(!i)};return e.jsxs("div",{className:"form-section",children:[e.jsxs("div",{className:`form-section-header ${n?"collapsible":""}`,onClick:c,children:[e.jsxs("div",{className:"form-section-title",children:[t&&e.jsx("i",{className:`${t} me-2`}),s]}),n&&e.jsx("i",{className:`fa fa-chevron-${i?"down":"up"} collapse-icon`})]}),!i&&e.jsx("div",{className:"form-section-body",children:a})]})};function kR({isOpen:s,onClose:t,onSubmit:a,ticketId:n,passengerName:r,currentDate:i,supplierId:o,netPrice:c,netCurrencyId:u,salePrice:h,saleCurrencyId:m,suppliers:p,currencies:y}){const[g,j]=A.useState({extended_date:i,supplier_id:o,net_amount:c,net_currency_id:u,sale_amount:h,sale_currency_id:m,remarks:""}),[b,N]=A.useState(null),[v,S]=A.useState(!1);A.useEffect(()=>{s&&(j({extended_date:i,supplier_id:o,net_amount:c,net_currency_id:u,sale_amount:h,sale_currency_id:m,remarks:""}),N(null))},[s,i,o,c,u,h,m]);const E=(V,te)=>{j(q=>({...q,[V]:te}))},L=V=>{V.target.files&&V.target.files[0]&&N(V.target.files[0])},z=async V=>{V.preventDefault(),S(!0);try{const te={...g,changedTicket:b||void 0};await a(te),t()}catch(te){console.error("Failed to save date change:",te)}finally{S(!1)}};return s?e.jsx("div",{className:"modal-overlay",onClick:t,children:e.jsxs("div",{className:"modal-container",onClick:V=>V.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h3",{children:[e.jsx("i",{className:"fa fa-calendar-alt me-2"}),"Date Change / Reissue"]}),e.jsx("button",{className:"modal-close",onClick:t,children:e.jsx("i",{className:"fa fa-times"})})]}),e.jsxs("form",{onSubmit:z,children:[e.jsxs("div",{className:"modal-body",children:[e.jsxs("p",{className:"mb-2",children:["Passenger: ",e.jsx("strong",{children:r})," (Ticket #",n,")"]}),e.jsxs("div",{className:"row g-2 mb-2",children:[e.jsx("div",{className:"col-md-6",children:e.jsx(_t,{label:"Supplier",name:"supplier_id",type:"select",value:g.supplier_id,onChange:V=>E("supplier_id",parseInt(V)),options:p.map(V=>({value:V.supp_id,label:V.supp_name})),required:!0,searchable:!0})}),e.jsx("div",{className:"col-md-6",children:e.jsx(_t,{label:"Extended Date",name:"extended_date",type:"date",value:g.extended_date,onChange:V=>E("extended_date",V),required:!0})})]}),e.jsxs("div",{className:"row g-2 mb-2",children:[e.jsx("div",{className:"col-md-6",children:e.jsx(_t,{label:"Net Price",name:"net_amount",type:"number",value:g.net_amount,onChange:V=>E("net_amount",parseFloat(V)),required:!0})}),e.jsx("div",{className:"col-md-6",children:e.jsx(_t,{label:"Currency",name:"net_currency_id",type:"select",value:g.net_currency_id,onChange:V=>E("net_currency_id",parseInt(V)),options:y.map(V=>({value:V.currencyID,label:V.currencyName})),required:!0})})]}),e.jsxs("div",{className:"row g-2 mb-2",children:[e.jsx("div",{className:"col-md-6",children:e.jsx(_t,{label:"Sale Price",name:"sale_amount",type:"number",value:g.sale_amount,onChange:V=>E("sale_amount",parseFloat(V)),required:!0})}),e.jsx("div",{className:"col-md-6",children:e.jsx(_t,{label:"Currency",name:"sale_currency_id",type:"select",value:g.sale_currency_id,onChange:V=>E("sale_currency_id",parseInt(V)),options:y.map(V=>({value:V.currencyID,label:V.currencyName})),required:!0})})]}),e.jsx("div",{className:"row g-2 mb-2",children:e.jsxs("div",{className:"col-md-12",children:[e.jsx("label",{className:"form-label",children:"Remarks"}),e.jsx("textarea",{className:"form-control",rows:3,value:g.remarks,onChange:V=>E("remarks",V.target.value),placeholder:"Enter remarks..."})]})}),e.jsx("div",{className:"row g-2 mb-2",children:e.jsxs("div",{className:"col-md-12",children:[e.jsx("label",{className:"form-label",children:"Changed Ticket Copy (Optional)"}),e.jsx("input",{type:"file",className:"form-control",accept:"image/*,.pdf",onChange:L}),b&&e.jsxs("small",{className:"text-muted",children:["Selected: ",b.name]})]})})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:t,disabled:v,children:"Close"}),e.jsx("button",{type:"submit",className:"btn btn-warning",disabled:v,children:v?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-border spinner-border-sm me-2"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fa fa-save me-2"}),"Save Date Change"]})})]})]})]})}):null}function DR({isOpen:s,onClose:t,onSubmit:a,ticketId:n,passengerName:r,netPrice:i,netCurrencyId:o,salePrice:c,saleCurrencyId:u,currencies:h}){const[m,p]=A.useState({refund_net_amount:i,net_currency_id:o,refund_sale_amount:c,sale_currency_id:u,remarks:""}),[y,g]=A.useState(!1);A.useEffect(()=>{s&&p({refund_net_amount:i,net_currency_id:o,refund_sale_amount:c,sale_currency_id:u,remarks:""})},[s,i,o,c,u]);const j=(N,v)=>{p(S=>({...S,[N]:v}))},b=async N=>{N.preventDefault(),g(!0);try{await a(m),t()}catch(v){console.error("Failed to process refund:",v)}finally{g(!1)}};return s?e.jsx("div",{className:"modal-overlay",onClick:t,children:e.jsxs("div",{className:"modal-container refund-modal",onClick:N=>N.stopPropagation(),children:[e.jsxs("div",{className:"modal-header refund-header",children:[e.jsxs("h3",{children:[e.jsx("i",{className:"fa fa-undo me-2"}),"Refund Ticket"]}),e.jsx("button",{className:"modal-close",onClick:t,children:e.jsx("i",{className:"fa fa-times"})})]}),e.jsxs("form",{onSubmit:b,children:[e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"alert alert-warning d-flex align-items-center mb-2",style:{padding:"0.5rem 0.75rem",fontSize:"0.8125rem"},children:[e.jsx("i",{className:"fa fa-exclamation-triangle me-2"}),e.jsx("strong",{children:"Warning:"}),"This will mark the ticket as refunded."]}),e.jsxs("p",{className:"mb-2",children:["Refunding ticket for: ",e.jsx("strong",{children:r})," (Ticket #",n,")"]}),e.jsxs("div",{className:"row g-2 mb-2",children:[e.jsx("div",{className:"col-md-6",children:e.jsx(_t,{label:"Refund Net Amount",name:"refund_net_amount",type:"number",value:m.refund_net_amount,onChange:N=>j("refund_net_amount",parseFloat(N)),required:!0})}),e.jsx("div",{className:"col-md-6",children:e.jsx(_t,{label:"Currency",name:"net_currency_id",type:"select",value:m.net_currency_id,onChange:N=>j("net_currency_id",parseInt(N)),options:h.map(N=>({value:N.currencyID,label:N.currencyName})),required:!0})})]}),e.jsxs("div",{className:"row g-2 mb-2",children:[e.jsx("div",{className:"col-md-6",children:e.jsx(_t,{label:"Refund Sale Amount",name:"refund_sale_amount",type:"number",value:m.refund_sale_amount,onChange:N=>j("refund_sale_amount",parseFloat(N)),required:!0})}),e.jsx("div",{className:"col-md-6",children:e.jsx(_t,{label:"Currency",name:"sale_currency_id",type:"select",value:m.sale_currency_id,onChange:N=>j("sale_currency_id",parseInt(N)),options:h.map(N=>({value:N.currencyID,label:N.currencyName})),required:!0})})]}),e.jsx("div",{className:"row g-2 mb-2",children:e.jsxs("div",{className:"col-md-12",children:[e.jsx("label",{className:"form-label",children:"Refund Remarks"}),e.jsx("textarea",{className:"form-control",rows:4,value:m.remarks,onChange:N=>j("remarks",N.target.value),placeholder:"Enter refund remarks..."})]})})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:t,disabled:y,children:"Close"}),e.jsx("button",{type:"submit",className:"btn btn-danger",disabled:y,children:y?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-border spinner-border-sm me-2"}),"Processing..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fa fa-undo me-2"}),"Process Refund"]})})]})]})]})}):null}function ER({isOpen:s,onClose:t,onSubmit:a,ticket:n,suppliers:r,airports:i,currencies:o}){const[c,u]=A.useState({}),[h,m]=A.useState(!1);A.useEffect(()=>{s&&n&&u({ticketNumber:n.ticketNumber||"",Pnr:n.Pnr,passenger_name:n.passenger_name,date_of_travel:n.date_of_travel,return_date:n.return_date||"",from_id:n.from_id,to_id:n.to_id,supp_id:n.supp_id,flight_type:n.flight_type,flight_number:n.flight_number||"",return_flight_number:n.return_flight_number||"",departure_time:n.departure_time||"",arrival_time:n.arrival_time||"",return_departure_time:n.return_departure_time||"",return_arrival_time:n.return_arrival_time||"",sale:n.sale,currencyID:n.currencyID,net_price:n.net_price,net_CurrencyID:n.net_CurrencyID,remarks:n.remarks||""})},[s,n]);const p=(j,b)=>{u(N=>({...N,[j]:b}))},y=async j=>{j.preventDefault(),m(!0);try{await a(n.ticket,c),t()}catch(b){console.error("Failed to update ticket:",b)}finally{m(!1)}};if(!s)return null;const g=c.flight_type==="OW";return e.jsx("div",{className:"modal-overlay",onClick:t,children:e.jsxs("div",{className:"modal-container",onClick:j=>j.stopPropagation(),children:[e.jsxs("div",{className:"modal-header edit-header",children:[e.jsxs("h3",{children:[e.jsx("i",{className:"fa fa-edit me-2"}),"Edit Ticket"]}),e.jsx("button",{className:"modal-close",onClick:t,children:e.jsx("i",{className:"fa fa-times"})})]}),e.jsxs("form",{onSubmit:y,children:[e.jsxs("div",{className:"modal-body",children:[e.jsxs("p",{className:"mb-3",children:["Editing ticket for: ",e.jsx("strong",{children:n.passenger_name})," (Ticket #",n.ticket,")"]}),e.jsxs("div",{className:"row g-3 mb-3",children:[e.jsx("div",{className:"col-md-4",children:e.jsx(_t,{label:"PNR",name:"Pnr",value:c.Pnr||"",onChange:j=>p("Pnr",j),required:!0})}),e.jsx("div",{className:"col-md-4",children:e.jsx(_t,{label:"Ticket Number",name:"ticketNumber",value:c.ticketNumber||"",onChange:j=>p("ticketNumber",j)})}),e.jsx("div",{className:"col-md-4",children:e.jsx(_t,{label:"Passenger Name",name:"passenger_name",value:c.passenger_name||"",onChange:j=>p("passenger_name",j),required:!0})})]}),e.jsxs("div",{className:"row g-3 mb-3",children:[e.jsx("div",{className:"col-md-4",children:e.jsx(_t,{label:"From Airport",name:"from_id",type:"select",value:c.from_id||0,onChange:j=>p("from_id",parseInt(j)),options:i.map(j=>({value:j.airport_id,label:`${j.airport_code} - ${j.name}`})),required:!0,searchable:!0})}),e.jsx("div",{className:"col-md-4",children:e.jsx(_t,{label:"To Airport",name:"to_id",type:"select",value:c.to_id||0,onChange:j=>p("to_id",parseInt(j)),options:i.map(j=>({value:j.airport_id,label:`${j.airport_code} - ${j.name}`})),required:!0,searchable:!0})}),e.jsx("div",{className:"col-md-4",children:e.jsx(_t,{label:"Supplier",name:"supp_id",type:"select",value:c.supp_id||0,onChange:j=>p("supp_id",parseInt(j)),options:r.map(j=>({value:j.supp_id,label:j.supp_name})),required:!0,searchable:!0})})]}),e.jsxs("div",{className:"row g-3 mb-3",children:[e.jsx("div",{className:"col-md-3",children:e.jsx(_t,{label:"Flight Type",name:"flight_type",type:"select",value:c.flight_type||"OW",onChange:j=>p("flight_type",j),options:[{value:"OW",label:"One Way"},{value:"RT",label:"Round Trip"}],required:!0})}),e.jsx("div",{className:"col-md-3",children:e.jsx(_t,{label:"Travel Date",name:"date_of_travel",type:"date",value:c.date_of_travel||"",onChange:j=>p("date_of_travel",j),required:!0})}),e.jsx("div",{className:"col-md-3",children:e.jsx(_t,{label:"Return Date",name:"return_date",type:"date",value:c.return_date||"",onChange:j=>p("return_date",j),disabled:g})}),e.jsx("div",{className:"col-md-3",children:e.jsx(_t,{label:"Flight Number",name:"flight_number",value:c.flight_number||"",onChange:j=>p("flight_number",j)})})]}),e.jsxs("div",{className:"row g-3 mb-3",children:[e.jsx("div",{className:"col-md-3",children:e.jsx(_t,{label:"Departure Time",name:"departure_time",type:"time",value:c.departure_time||"",onChange:j=>p("departure_time",j)})}),e.jsx("div",{className:"col-md-3",children:e.jsx(_t,{label:"Arrival Time",name:"arrival_time",type:"time",value:c.arrival_time||"",onChange:j=>p("arrival_time",j)})}),e.jsx("div",{className:"col-md-3",children:e.jsx(_t,{label:"Return Flight #",name:"return_flight_number",value:c.return_flight_number||"",onChange:j=>p("return_flight_number",j),disabled:g})}),e.jsx("div",{className:"col-md-3",children:e.jsx(_t,{label:"Return Dep. Time",name:"return_departure_time",type:"time",value:c.return_departure_time||"",onChange:j=>p("return_departure_time",j),disabled:g})})]}),e.jsxs("div",{className:"row g-3 mb-3",children:[e.jsx("div",{className:"col-md-3",children:e.jsx(_t,{label:"Sale Price",name:"sale",type:"number",value:c.sale||0,onChange:j=>p("sale",parseFloat(j)),required:!0})}),e.jsx("div",{className:"col-md-3",children:e.jsx(_t,{label:"Sale Currency",name:"currencyID",type:"select",value:c.currencyID||1,onChange:j=>p("currencyID",parseInt(j)),options:o.map(j=>({value:j.currencyID,label:j.currencyName})),required:!0})}),e.jsx("div",{className:"col-md-3",children:e.jsx(_t,{label:"Net Price",name:"net_price",type:"number",value:c.net_price||0,onChange:j=>p("net_price",parseFloat(j)),required:!0})}),e.jsx("div",{className:"col-md-3",children:e.jsx(_t,{label:"Net Currency",name:"net_CurrencyID",type:"select",value:c.net_CurrencyID||1,onChange:j=>p("net_CurrencyID",parseInt(j)),options:o.map(j=>({value:j.currencyID,label:j.currencyName})),required:!0})})]}),e.jsx("div",{className:"row g-3",children:e.jsxs("div",{className:"col-md-12",children:[e.jsx("label",{className:"form-label",children:"Remarks"}),e.jsx("textarea",{className:"form-control",rows:3,value:c.remarks||"",onChange:j=>p("remarks",j.target.value),placeholder:"Enter remarks..."})]})})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:t,disabled:h,children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:h,children:h?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-border spinner-border-sm me-2"}),"Updating..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fa fa-save me-2"}),"Update Ticket"]})})]})]})]})})}function TR({isOpen:s,onClose:t,onSubmit:a,visa:n,suppliers:r,countries:i,nationalities:o,currencies:c}){const[u,h]=A.useState({}),[m,p]=A.useState(!1);A.useEffect(()=>{s&&n&&h({passenger_name:n.passenger_name,PassportNum:n.PassportNum||"",nationalityID:n.nationalityID,address:n.address,gaurantee:n.gaurantee,country_id:n.country_id,supp_id:n.supp_id,net_price:n.net_price,netCurrencyID:n.netCurrencyID,sale:n.sale,saleCurrencyID:n.saleCurrencyID,pendingvisa:n.pendingvisa||1})},[s,n]);const y=(j,b)=>{h(N=>({...N,[j]:b}))},g=async j=>{j.preventDefault(),p(!0);try{await a(n.visa_id,u),t()}catch(b){console.error("Failed to update visa:",b)}finally{p(!1)}};return s?e.jsx("div",{className:"modal-overlay",onClick:t,children:e.jsxs("div",{className:"modal-container",onClick:j=>j.stopPropagation(),children:[e.jsxs("div",{className:"modal-header edit-header",children:[e.jsxs("h3",{children:[e.jsx("i",{className:"fa fa-edit me-2"}),"Edit Visa"]}),e.jsx("button",{className:"modal-close",onClick:t,children:e.jsx("i",{className:"fa fa-times"})})]}),e.jsxs("form",{onSubmit:g,children:[e.jsxs("div",{className:"modal-body",children:[e.jsxs("p",{className:"mb-2",children:["Editing visa for: ",e.jsx("strong",{children:n.passenger_name})," (Visa #",n.visa_id,")"]}),e.jsxs("div",{className:"row g-2 mb-2",children:[e.jsx("div",{className:"col-md-6",children:e.jsx(_t,{label:"Passenger Name",name:"passenger_name",value:u.passenger_name||"",onChange:j=>y("passenger_name",j),required:!0})}),e.jsx("div",{className:"col-md-6",children:e.jsx(_t,{label:"Passport Number",name:"PassportNum",value:u.PassportNum||"",onChange:j=>y("PassportNum",j)})})]}),e.jsxs("div",{className:"row g-2 mb-2",children:[e.jsx("div",{className:"col-md-6",children:e.jsx(_t,{label:"Nationality",name:"nationalityID",type:"select",value:u.nationalityID||0,onChange:j=>y("nationalityID",parseInt(j)),options:o.map(j=>({value:j.nationalityID,label:j.nationality})),required:!0,searchable:!0})}),e.jsx("div",{className:"col-md-6",children:e.jsx(_t,{label:"Address",name:"address",value:u.address||"",onChange:j=>y("address",j),required:!0})})]}),e.jsx("div",{className:"row g-2 mb-2",children:e.jsx("div",{className:"col-md-12",children:e.jsx(_t,{label:"Guarantee Person",name:"gaurantee",value:u.gaurantee||"",onChange:j=>y("gaurantee",j),required:!0})})}),e.jsxs("div",{className:"row g-2 mb-2",children:[e.jsx("div",{className:"col-md-6",children:e.jsx(_t,{label:"Country & Visa Type",name:"country_id",type:"select",value:u.country_id||0,onChange:j=>y("country_id",parseInt(j)),options:i.map(j=>({value:j.country_id,label:j.country_names})),required:!0,searchable:!0})}),e.jsx("div",{className:"col-md-6",children:e.jsx(_t,{label:"Supplier",name:"supp_id",type:"select",value:u.supp_id||0,onChange:j=>y("supp_id",parseInt(j)),options:r.map(j=>({value:j.supp_id,label:j.supp_name})),required:!0,searchable:!0})})]}),e.jsxs("div",{className:"row g-2 mb-2",children:[e.jsx("div",{className:"col-md-6",children:e.jsx(_t,{label:"Net Price",name:"net_price",type:"number",value:u.net_price||0,onChange:j=>y("net_price",parseFloat(j)),required:!0})}),e.jsx("div",{className:"col-md-6",children:e.jsx(_t,{label:"Net Currency",name:"netCurrencyID",type:"select",value:u.netCurrencyID||1,onChange:j=>y("netCurrencyID",parseInt(j)),options:c.map(j=>({value:j.currencyID,label:j.currencyName})),required:!0})})]}),e.jsxs("div",{className:"row g-2 mb-2",children:[e.jsx("div",{className:"col-md-6",children:e.jsx(_t,{label:"Sale Price",name:"sale",type:"number",value:u.sale||0,onChange:j=>y("sale",parseFloat(j)),required:!0})}),e.jsx("div",{className:"col-md-6",children:e.jsx(_t,{label:"Sale Currency",name:"saleCurrencyID",type:"select",value:u.saleCurrencyID||1,onChange:j=>y("saleCurrencyID",parseInt(j)),options:c.map(j=>({value:j.currencyID,label:j.currencyName})),required:!0})})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:t,disabled:m,children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:m,children:m?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-border spinner-border-sm me-2"}),"Updating..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fa fa-save me-2"}),"Update Visa"]})})]})]})]})}):null}const qp=()=>new Date().toISOString().split("T")[0];function LR(){const[s,t]=A.useState([]),[a,n]=A.useState(!0),[r,i]=A.useState({startDate:qp(),endDate:qp(),customerId:void 0,supplierId:void 0,pnr:"",passengerName:"",ticketNumber:"",flightType:"",fromAirport:void 0,toAirport:void 0}),[o,c]=A.useState([]),[u,h]=A.useState([]),[m,p]=A.useState([]),[y,g]=A.useState([]),[j,b]=A.useState({isOpen:!1,ticket:null}),[N,v]=A.useState({isOpen:!1,ticket:null}),[S,E]=A.useState({isOpen:!1,ticket:null});A.useEffect(()=>{L(),z()},[]);const L=async()=>{try{const $=await Yc.getDropdowns();c($.customers),h($.suppliers),p($.airports),g($.currencies)}catch($){console.error("Failed to load dropdowns:",$)}},z=async()=>{n(!0);try{const $=await Yc.getTickets(r);t($)}catch($){console.error("Failed to load tickets:",$),W.fire("Error","Failed to load tickets","error")}finally{n(!1)}},V=($,me)=>{i(D=>({...D,[$]:me}))},te=()=>{z()},q=()=>{i({startDate:qp(),endDate:qp(),customerId:void 0,supplierId:void 0,pnr:"",passengerName:"",ticketNumber:"",flightType:"",fromAirport:void 0,toAirport:void 0}),setTimeout(()=>z(),100)},B=async($,me)=>{if((await W.fire({title:"Are you sure?",text:`Delete ticket for ${me}?`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#dc2626",cancelButtonColor:"#6b7280",confirmButtonText:"Yes, delete it!"})).isConfirmed)try{await Yc.deleteTicket($),W.fire("Deleted!","Ticket has been deleted.","success"),z()}catch{W.fire("Error","Failed to delete ticket","error")}},J=$=>{b({isOpen:!0,ticket:$})},P=async $=>{try{if(!j.ticket)return;await Yc.changeDate(j.ticket.ticket,$),W.fire("Success!","Date change saved successfully","success"),b({isOpen:!1,ticket:null}),z()}catch(me){throw W.fire("Error",me.response?.data?.message||"Failed to save date change","error"),me}},K=async($,me)=>{const D=await W.fire({title:"Upload Ticket Copy",html:`
        <p class="mb-3">Upload ticket for: <strong>${me}</strong></p>
        <input type="file" id="ticketFile" class="swal2-file" accept="image/*,.pdf" style="width: 80%;">
        <p class="text-muted mt-2" style="font-size: 0.875rem;">Accepted: JPG, PNG, GIF, PDF (Max 5MB)</p>
      `,icon:"info",showCancelButton:!0,confirmButtonColor:"#10b981",cancelButtonColor:"#6b7280",confirmButtonText:"Upload",preConfirm:()=>{const le=document.getElementById("ticketFile")?.files?.[0];return le?le.size>5242880?(W.showValidationMessage("File size must be less than 5MB"),!1):le:(W.showValidationMessage("Please select a file"),!1)}});if(D.isConfirmed&&D.value)try{W.fire({title:"Uploading...",allowOutsideClick:!1,didOpen:()=>W.showLoading()}),await Yc.uploadTicketCopy($,D.value),W.fire("Success!","Ticket copy uploaded successfully","success"),z()}catch{W.fire("Error","Failed to upload ticket copy","error")}},H=$=>{v({isOpen:!0,ticket:$})},se=async $=>{try{if(!N.ticket)return;await Yc.refundTicket(N.ticket.ticket,$),W.fire("Success!","Ticket refunded successfully","success"),v({isOpen:!1,ticket:null}),z()}catch(me){throw W.fire("Error",me.response?.data?.message||"Failed to process refund","error"),me}},X=$=>{E({isOpen:!0,ticket:$})},R=async($,me)=>{try{await Yc.updateTicket($,me),W.fire("Success!","Ticket updated successfully","success"),E({isOpen:!1,ticket:null}),z()}catch(D){throw W.fire("Error",D.response?.data?.message||"Failed to update ticket","error"),D}},Q=($,me)=>`${$.toLocaleString()} ${me}`,Y=$=>{switch($){case 1:return e.jsx("span",{className:"badge bg-danger",children:"Issued"});case 2:return e.jsx("span",{className:"badge bg-warning text-dark",children:"Date Changed"});case 3:return e.jsx("span",{className:"badge bg-secondary",children:"Refunded"});default:return e.jsx("span",{className:"badge bg-danger",children:"Issued"})}};return e.jsxs("div",{className:"container-fluid",children:[e.jsx("div",{className:"row mb-3",children:e.jsx("div",{className:"col-md-12",children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsxs("h3",{children:[e.jsx("i",{className:"fa fa-plane"})," Ticket Management"]}),e.jsxs(dl,{to:"/ticket/new",className:"btn btn-primary",children:[e.jsx("i",{className:"fa fa-plus"})," New Ticket"]})]})})}),e.jsxs(ul,{title:"Search Filters",icon:"fa fa-search",children:[e.jsxs("div",{className:"row g-3",children:[e.jsx("div",{className:"col-md-3",children:e.jsx(_t,{label:"Start Date",name:"startDate",type:"date",value:r.startDate,onChange:$=>V("startDate",$),icon:"fa fa-calendar"})}),e.jsx("div",{className:"col-md-3",children:e.jsx(_t,{label:"End Date",name:"endDate",type:"date",value:r.endDate,onChange:$=>V("endDate",$),icon:"fa fa-calendar"})}),e.jsx("div",{className:"col-md-3",children:e.jsx(_t,{label:"Customer",name:"customerId",type:"select",value:r.customerId||0,onChange:$=>V("customerId",$?parseInt($):void 0),options:[{value:0,label:"All Customers"},...o.map($=>({value:$.customer_id,label:`${$.customer_name} - ${$.customer_phone}`}))],icon:"fa fa-user",searchable:!0})}),e.jsx("div",{className:"col-md-3",children:e.jsx(_t,{label:"Supplier",name:"supplierId",type:"select",value:r.supplierId||0,onChange:$=>V("supplierId",$?parseInt($):void 0),options:[{value:0,label:"All Suppliers"},...u.map($=>({value:$.supp_id,label:$.supp_name}))],icon:"fa fa-building",searchable:!0})}),e.jsx("div",{className:"col-md-3",children:e.jsx(_t,{label:"PNR",name:"pnr",value:r.pnr,onChange:$=>V("pnr",$),placeholder:"Enter PNR",icon:"fa fa-ticket"})}),e.jsx("div",{className:"col-md-3",children:e.jsx(_t,{label:"Passenger Name",name:"passengerName",value:r.passengerName,onChange:$=>V("passengerName",$),placeholder:"Passenger name",icon:"fa fa-user-tie"})}),e.jsx("div",{className:"col-md-3",children:e.jsx(_t,{label:"Ticket Number",name:"ticketNumber",value:r.ticketNumber,onChange:$=>V("ticketNumber",$),placeholder:"Ticket number",icon:"fa fa-hashtag"})}),e.jsx("div",{className:"col-md-3",children:e.jsx(_t,{label:"Flight Type",name:"flightType",type:"select",value:r.flightType,onChange:$=>V("flightType",$),options:[{value:"",label:"All Types"},{value:"OW",label:"One Way"},{value:"RT",label:"Round Trip"}],icon:"fa fa-plane"})})]}),e.jsx("div",{className:"row mt-3",children:e.jsxs("div",{className:"col-md-12",children:[e.jsxs("button",{className:"btn btn-primary me-2",onClick:te,children:[e.jsx("i",{className:"fa fa-search me-1"})," Search"]}),e.jsxs("button",{className:"btn btn-secondary",onClick:q,children:[e.jsx("i",{className:"fa fa-redo me-1"})," Reset"]})]})})]}),e.jsx(ul,{title:`Tickets (${s.length})`,icon:"fa fa-list",children:a?e.jsx("div",{className:"text-center py-5",children:e.jsx("div",{className:"spinner-border text-primary",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):s.length===0?e.jsx("div",{className:"alert alert-info",children:"No tickets found"}):e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-striped table-bordered",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Ticket #"}),e.jsx("th",{children:"Issue Date"}),e.jsx("th",{children:"PNR"}),e.jsx("th",{children:"Passenger"}),e.jsx("th",{children:"Customer"}),e.jsx("th",{children:"Supplier"}),e.jsx("th",{children:"Route"}),e.jsx("th",{children:"Travel Date"}),e.jsx("th",{children:"Type"}),e.jsx("th",{children:"Sale"}),e.jsx("th",{children:"Net"}),e.jsx("th",{children:"Profit"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Branch"}),e.jsx("th",{style:{width:"200px"},children:"Actions"})]})}),e.jsx("tbody",{children:s.map($=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsxs("strong",{children:["084 2317 ",$.ticket]})}),e.jsx("td",{children:new Date($.datetime).toLocaleDateString()}),e.jsx("td",{children:e.jsx("span",{className:"badge bg-primary",children:$.Pnr})}),e.jsx("td",{children:$.passenger_name}),e.jsxs("td",{children:[e.jsx("div",{className:"fw-bold",children:$.customer_name}),e.jsx("small",{className:"text-muted",children:$.customer_phone})]}),e.jsx("td",{children:$.supplier_name}),e.jsxs("td",{children:[e.jsx("span",{className:"badge bg-info",children:$.from_code}),"  ",e.jsx("span",{className:"badge bg-success",children:$.to_code})]}),e.jsx("td",{children:new Date($.date_of_travel).toLocaleDateString()}),e.jsx("td",{children:e.jsx("span",{className:"badge bg-danger",children:$.flight_type==="OW"?"One Way":$.flight_type==="RT"?"Round Trip":$.flight_type})}),e.jsx("td",{children:Q($.sale,$.currency_name||"")}),e.jsx("td",{children:Q($.net_price,$.net_currency_name||"")}),e.jsx("td",{className:"text-success fw-bold",children:Q($.sale-$.net_price,$.currency_name||"")}),e.jsx("td",{children:Y($.status)}),e.jsx("td",{children:"Main Office"}),e.jsx("td",{children:e.jsxs("div",{className:"btn-group-vertical d-flex flex-row gap-1",role:"group",children:[e.jsx("button",{className:"btn btn-sm btn-primary",title:"View",onClick:()=>W.fire("Coming Soon","View feature will be implemented soon","info"),children:e.jsx("i",{className:"fa fa-eye"})}),e.jsx("button",{className:"btn btn-sm btn-info",title:"Edit",onClick:()=>X($),children:e.jsx("i",{className:"fa fa-edit"})}),e.jsx("button",{className:"btn btn-sm btn-success",title:"Upload Ticket",onClick:()=>K($.ticket,$.passenger_name),children:e.jsx("i",{className:"fa fa-upload"})}),e.jsx("button",{className:"btn btn-sm btn-warning",title:"Date Change",onClick:()=>J($),children:e.jsx("i",{className:"fa fa-calendar-alt"})}),e.jsx("button",{className:"btn btn-sm btn-secondary",title:"Refund",onClick:()=>H($),children:e.jsx("i",{className:"fa fa-undo"})}),e.jsx("button",{className:"btn btn-sm btn-danger",title:"Delete",onClick:()=>B($.ticket,$.passenger_name),children:e.jsx("i",{className:"fa fa-trash"})})]})})]},$.ticket))})]})})}),j.ticket&&e.jsx(kR,{isOpen:j.isOpen,onClose:()=>b({isOpen:!1,ticket:null}),onSubmit:P,ticketId:j.ticket.ticket,passengerName:j.ticket.passenger_name,currentDate:j.ticket.date_of_travel,supplierId:j.ticket.supp_id,netPrice:j.ticket.net_price,netCurrencyId:j.ticket.net_CurrencyID,salePrice:j.ticket.sale,saleCurrencyId:j.ticket.currencyID,suppliers:u,currencies:y}),N.ticket&&e.jsx(DR,{isOpen:N.isOpen,onClose:()=>v({isOpen:!1,ticket:null}),onSubmit:se,ticketId:N.ticket.ticket,passengerName:N.ticket.passenger_name,netPrice:N.ticket.net_price,netCurrencyId:N.ticket.net_CurrencyID,salePrice:N.ticket.sale,saleCurrencyId:N.ticket.currencyID,currencies:y}),S.ticket&&e.jsx(ER,{isOpen:S.isOpen,onClose:()=>E({isOpen:!1,ticket:null}),onSubmit:R,ticket:S.ticket,suppliers:u,airports:m,currencies:y})]})}function PR(){const s=Vn(),[t,a]=A.useState(!1),[n,r]=A.useState([]),[i,o]=A.useState([]),[c,u]=A.useState([]),[h,m]=A.useState([]),[p,y]=A.useState([]),[g,j]=A.useState({pnr:"",customer_id:0,date_of_travel:"",return_date:"",from_id:0,to_id:0,supp_id:0,flight_type:"OW",flight_number:"",return_flight_number:"",departure_time:"",arrival_time:"",return_departure_time:"",return_arrival_time:"",remarks:"",customer_payment:0,payment_currency_type:0,account_id:0}),[b,N]=A.useState([{passenger_name:"",ticketNumber:"",net_price:0,net_CurrencyID:0,sale:0,currencyID:0}]);A.useEffect(()=>{v()},[]);const v=async()=>{try{const q=await Yc.getDropdowns();r(q.customers),o(q.suppliers),u(q.airports),m(q.currencies),y(q.accounts)}catch(q){console.error("Failed to load dropdowns:",q),W.fire("Error","Failed to load form data","error")}},S=(q,B)=>{j(J=>({...J,[q]:B}))},E=(q,B,J)=>{const P=[...b];P[q]={...P[q],[B]:J},N(P)},L=()=>{N([...b,{passenger_name:"",ticketNumber:"",net_price:0,net_CurrencyID:0,sale:0,currencyID:0}])},z=q=>{b.length>1&&N(b.filter((B,J)=>J!==q))},V=async q=>{if(q.preventDefault(),!g.pnr){W.fire("Error","PNR is required","error");return}if(!g.customer_id){W.fire("Error","Please select a customer","error");return}if(b.some(B=>!B.passenger_name)){W.fire("Error","All passengers must have a name","error");return}a(!0);try{await Yc.createTicket({...g,passengers:b}),W.fire({icon:"success",title:"Success!",text:"Ticket created successfully",confirmButtonColor:"#dc2626"}).then(()=>{s("/ticket/report")})}catch(B){console.error("Failed to create ticket:",B),W.fire("Error",B.response?.data?.message||"Failed to create ticket","error")}finally{a(!1)}},te=g.flight_type==="OW";return e.jsxs("div",{className:"create-ticket-container",children:[e.jsxs("div",{className:"page-header",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"page-title",children:[e.jsx("i",{className:"fa fa-plane-departure me-3"}),"Create New Ticket"]}),e.jsx("p",{className:"page-subtitle",children:"Book a new flight ticket for your customer"})]}),e.jsxs("button",{type:"button",className:"btn-back",onClick:()=>s("/ticket/report"),children:[e.jsx("i",{className:"fa fa-arrow-left me-2"}),"Back to Tickets"]})]}),e.jsxs("form",{onSubmit:V,children:[e.jsxs("div",{className:"two-column-layout",children:[e.jsx(ul,{title:"Basic Information",icon:"fa fa-info-circle",children:e.jsxs("div",{className:"form-grid basic-info-grid",children:[e.jsx(_t,{label:"PNR Number",name:"pnr",value:g.pnr,onChange:q=>S("pnr",q),required:!0,icon:"fa fa-ticket",placeholder:"Enter PNR number"}),e.jsx(_t,{label:"Customer",name:"customer_id",type:"select",value:g.customer_id,onChange:q=>S("customer_id",parseInt(q)),options:n.map(q=>({value:q.customer_id,label:`${q.customer_name} - ${q.customer_phone}`})),required:!0,icon:"fa fa-user",searchable:!0}),e.jsx(_t,{label:"Supplier",name:"supp_id",type:"select",value:g.supp_id,onChange:q=>S("supp_id",parseInt(q)),options:i.map(q=>({value:q.supp_id,label:q.supp_name})),required:!0,icon:"fa fa-building",searchable:!0}),e.jsx(_t,{label:"Flight Type",name:"flight_type",type:"select",value:g.flight_type,onChange:q=>S("flight_type",q),options:[{value:"OW",label:"One Way"},{value:"RT",label:"Round Trip"}],required:!0,icon:"fa fa-plane"})]})}),e.jsx(ul,{title:"Flight Details",icon:"fa fa-route",children:e.jsxs("div",{className:"form-grid flight-details-grid",children:[e.jsx(_t,{label:"From Airport",name:"from_id",type:"select",value:g.from_id,onChange:q=>S("from_id",parseInt(q)),options:c.map(q=>({value:q.airport_id,label:`${q.airport_code} - ${q.name}`})),required:!0,icon:"fa fa-plane-departure",searchable:!0}),e.jsx(_t,{label:"To Airport",name:"to_id",type:"select",value:g.to_id,onChange:q=>S("to_id",parseInt(q)),options:c.map(q=>({value:q.airport_id,label:`${q.airport_code} - ${q.name}`})),required:!0,icon:"fa fa-plane-arrival",searchable:!0}),e.jsx(_t,{label:"Departure Date",name:"date_of_travel",type:"date",value:g.date_of_travel,onChange:q=>S("date_of_travel",q),required:!0,icon:"fa fa-calendar"}),e.jsx(_t,{label:"Return Date",name:"return_date",type:"date",value:g.return_date,onChange:q=>S("return_date",q),disabled:te,icon:"fa fa-calendar-check",helpText:te?"Only for Round Trip flights":""}),e.jsx(_t,{label:"Flight Number",name:"flight_number",value:g.flight_number,onChange:q=>S("flight_number",q),icon:"fa fa-hashtag",placeholder:"e.g. AA123"}),e.jsx(_t,{label:"Return Flight Number",name:"return_flight_number",value:g.return_flight_number,onChange:q=>S("return_flight_number",q),disabled:te,icon:"fa fa-hashtag",placeholder:"e.g. AA456",helpText:te?"Only for Round Trip flights":""}),e.jsx(_t,{label:"Departure Time",name:"departure_time",type:"time",value:g.departure_time,onChange:q=>S("departure_time",q),icon:"fa fa-clock"}),e.jsx(_t,{label:"Arrival Time",name:"arrival_time",type:"time",value:g.arrival_time,onChange:q=>S("arrival_time",q),icon:"fa fa-clock"}),e.jsx(_t,{label:"Return Departure Time",name:"return_departure_time",type:"time",value:g.return_departure_time,onChange:q=>S("return_departure_time",q),disabled:te,icon:"fa fa-clock",helpText:te?"Only for Round Trip flights":""}),e.jsx(_t,{label:"Return Arrival Time",name:"return_arrival_time",type:"time",value:g.return_arrival_time,onChange:q=>S("return_arrival_time",q),disabled:te,icon:"fa fa-clock",helpText:te?"Only for Round Trip flights":""})]})})]}),e.jsxs(ul,{title:"Passengers",icon:"fa fa-users",children:[e.jsxs("div",{className:"passengers-header",children:[e.jsxs("p",{className:"passengers-count",children:["Total Passengers: ",b.length]}),e.jsxs("button",{type:"button",className:"btn-add-passenger",onClick:L,children:[e.jsx("i",{className:"fa fa-plus-circle me-2"}),"Add Passenger"]})]}),b.map((q,B)=>e.jsxs("div",{className:"passenger-card",children:[e.jsxs("div",{className:"passenger-card-header",children:[e.jsxs("h4",{className:"passenger-title",children:[e.jsx("i",{className:"fa fa-user me-2"}),"Passenger ",B+1]}),b.length>1&&e.jsx("button",{type:"button",className:"btn-remove-passenger",onClick:()=>z(B),children:e.jsx("i",{className:"fa fa-times"})})]}),e.jsxs("div",{className:"form-grid",children:[e.jsx(_t,{label:"Passenger Name",name:`passenger_name_${B}`,value:q.passenger_name,onChange:J=>E(B,"passenger_name",J),required:!0,icon:"fa fa-id-card",placeholder:"Full name as per passport"}),e.jsx(_t,{label:"Ticket Number",name:`ticketNumber_${B}`,value:q.ticketNumber,onChange:J=>E(B,"ticketNumber",J),icon:"fa fa-ticket-alt",placeholder:"Optional"}),e.jsx(_t,{label:"Net Price",name:`net_price_${B}`,type:"number",value:q.net_price,onChange:J=>E(B,"net_price",parseFloat(J)||0),required:!0,icon:"fa fa-dollar-sign",min:"0"}),e.jsx(_t,{label:"Net Currency",name:`net_CurrencyID_${B}`,type:"select",value:q.net_CurrencyID,onChange:J=>E(B,"net_CurrencyID",parseInt(J)),options:h.map(J=>({value:J.currencyID,label:J.currencyName})),required:!0,icon:"fa fa-money-bill"}),e.jsx(_t,{label:"Sale Price",name:`sale_${B}`,type:"number",value:q.sale,onChange:J=>E(B,"sale",parseFloat(J)||0),required:!0,icon:"fa fa-tag",min:"0"}),e.jsx(_t,{label:"Sale Currency",name:`currencyID_${B}`,type:"select",value:q.currencyID,onChange:J=>E(B,"currencyID",parseInt(J)),options:h.map(J=>({value:J.currencyID,label:J.currencyName})),required:!0,icon:"fa fa-money-bill-wave"})]})]},B))]}),e.jsxs(ul,{title:"Payment & Additional Information",icon:"fa fa-money-check",children:[e.jsxs("div",{className:"form-grid",children:[e.jsx(_t,{label:"Customer Payment",name:"customer_payment",type:"number",value:g.customer_payment,onChange:q=>S("customer_payment",parseFloat(q)||0),icon:"fa fa-hand-holding-usd",placeholder:"Optional",min:"0"}),e.jsx(_t,{label:"Payment Currency",name:"payment_currency_type",type:"select",value:g.payment_currency_type,onChange:q=>S("payment_currency_type",parseInt(q)),options:h.map(q=>({value:q.currencyID,label:q.currencyName})),icon:"fa fa-coins"}),e.jsx(_t,{label:"Payment Account",name:"account_id",type:"select",value:g.account_id,onChange:q=>S("account_id",parseInt(q)),options:p.map(q=>({value:q.accountID,label:q.accountName})),icon:"fa fa-university"})]}),e.jsx(_t,{label:"Remarks / Notes",name:"remarks",type:"textarea",value:g.remarks,onChange:q=>S("remarks",q),icon:"fa fa-sticky-note",placeholder:"Any additional information...",rows:2})]}),e.jsxs("div",{className:"form-actions",children:[e.jsx("button",{type:"submit",className:"btn-submit",disabled:t,children:t?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-border spinner-border-sm me-2"}),"Creating Ticket..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fa fa-save me-2"}),"Create Ticket"]})}),e.jsxs("button",{type:"button",className:"btn-cancel",onClick:()=>s("/ticket/report"),disabled:t,children:[e.jsx("i",{className:"fa fa-times me-2"}),"Cancel"]})]})]})]})}const hl={getDropdowns:async()=>(await Ne.get("/visa/dropdowns.php")).data.data,getVisas:async s=>(await Ne.get("/visa/list.php",{params:s})).data.data,createVisa:async s=>s instanceof FormData?(await Ne.post("/visa/create.php",s,{headers:{"Content-Type":"multipart/form-data"}})).data:(await Ne.post("/visa/create.php",s)).data,updateVisa:async(s,t)=>{await Ne.put("/visa/update.php",{visa_id:s,...t})},deleteVisa:async s=>{await Ne.delete("/visa/delete.php",{data:{visa_id:s}})},uploadVisaCopy:async(s,t)=>{const a=new FormData;return a.append("visa_id",s.toString()),a.append("visaCopy",t),(await Ne.post("/visa/upload-copy.php",a,{headers:{"Content-Type":"multipart/form-data"}})).data},getEIDTasks:async s=>{const t=await Ne.get("/visa/eid-tasks.php",{params:s});return t.data.data||t.data},getEIDResidence:async(s,t)=>{const a=new URLSearchParams;a.append("action","getResidence"),a.append("id",s.toString()),a.append("type",t);const n=await Ne.post("/visa/eid-tasks-controller.php",a,{headers:{"Content-Type":"application/x-www-form-urlencoded"}});return n.data.data||n.data},getEIDPositions:async()=>{const s=new URLSearchParams;s.append("action","getPositions");const t=await Ne.post("/visa/eid-tasks-controller.php",s,{headers:{"Content-Type":"application/x-www-form-urlencoded"}});return t.data.data||t.data},getEIDCompanies:async()=>{const s=new URLSearchParams;s.append("action","getCompanies");const t=await Ne.post("/visa/eid-tasks-controller.php",s,{headers:{"Content-Type":"application/x-www-form-urlencoded"}});return t.data.data||t.data},markEIDReceived:async s=>{const t=new FormData;t.append("action","setMarkReceived"),t.append("id",s.id.toString()),t.append("type",s.type),t.append("eidNumber",s.eidNumber),t.append("eidExpiryDate",s.eidExpiryDate),t.append("passenger_name",s.passenger_name),t.append("gender",s.gender),t.append("dob",s.dob),s.occupation&&t.append("occupation",s.occupation.toString()),s.establishmentName&&t.append("establishmentName",s.establishmentName.toString()),s.emiratesIDBackFile&&t.append("emiratesIDBack",s.emiratesIDBackFile),s.emiratesIDFrontFile&&t.append("emiratesIDFront",s.emiratesIDFrontFile),await Ne.post("/visa/eid-tasks-controller.php",t,{headers:{"Content-Type":"multipart/form-data"}})},markEIDDelivered:async s=>{const t=new URLSearchParams;t.append("action","setMarkDelivered"),t.append("id",s.id.toString()),t.append("type",s.type),await Ne.post("/visa/eid-tasks-controller.php",t,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})}},Up=()=>new Date().toISOString().split("T")[0];function FR(){const[s,t]=A.useState([]),[a,n]=A.useState(!0),[r,i]=A.useState({startDate:Up(),endDate:Up()}),[o,c]=A.useState({customers:[],suppliers:[],countries:[],nationalities:[],currencies:[],accounts:[]}),[u,h]=A.useState({isOpen:!1,visa:null});A.useEffect(()=>{m(),p()},[]);const m=async()=>{try{const L=await hl.getDropdowns();c(L)}catch(L){console.error("Failed to load dropdowns:",L)}},p=async()=>{try{n(!0);const L=await hl.getVisas(r);t(L)}catch(L){console.error("Failed to load visas:",L),W.fire("Error","Failed to load visas","error")}finally{n(!1)}},y=(L,z)=>{i(V=>({...V,[L]:z}))},g=()=>{p()},j=()=>{i({startDate:Up(),endDate:Up()}),setTimeout(()=>p(),100)},b=async(L,z)=>{if((await W.fire({title:"Are you sure?",text:`Delete visa for ${z}?`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#dc2626",cancelButtonColor:"#6b7280",confirmButtonText:"Yes, delete it!"})).isConfirmed)try{await hl.deleteVisa(L),W.fire("Deleted!","Visa has been deleted.","success"),p()}catch{W.fire("Error","Failed to delete visa","error")}},N=L=>{h({isOpen:!0,visa:L})},v=async(L,z)=>{try{await hl.updateVisa(L,z),W.fire("Success!","Visa updated successfully","success"),h({isOpen:!1,visa:null}),p()}catch(V){throw W.fire("Error",V.response?.data?.message||"Failed to update visa","error"),V}},S=async(L,z)=>{const V=await W.fire({title:"Upload Visa Copy",html:`
        <p class="mb-3">Upload visa for: <strong>${z}</strong></p>
        <input type="file" id="visaFile" class="swal2-file" accept="image/*,.pdf" style="width: 80%;">
        <p class="text-muted mt-2" style="font-size: 0.875rem;">Accepted: JPG, PNG, GIF, PDF (Max 5MB)</p>
      `,icon:"info",showCancelButton:!0,confirmButtonColor:"#10b981",cancelButtonColor:"#6b7280",confirmButtonText:"Upload",preConfirm:()=>{const q=document.getElementById("visaFile")?.files?.[0];return q?q.size>5242880?(W.showValidationMessage("File size must be less than 5MB"),!1):q:(W.showValidationMessage("Please select a file"),!1)}});if(V.isConfirmed&&V.value)try{W.fire({title:"Uploading...",allowOutsideClick:!1,didOpen:()=>{W.showLoading()}}),await hl.uploadVisaCopy(L,V.value),W.fire("Success!","Visa copy uploaded successfully","success"),p()}catch{W.fire("Error","Failed to upload visa copy","error")}},E=(L,z)=>`${L.toLocaleString()} ${z}`;return e.jsxs("div",{className:"container-fluid",children:[e.jsx("div",{className:"row mb-3",children:e.jsx("div",{className:"col-md-12",children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsxs("h3",{children:[e.jsx("i",{className:"fa fa-cc-visa"})," Visa Management"]}),e.jsxs(dl,{to:"/visa/new",className:"btn btn-danger",children:[e.jsx("i",{className:"fa fa-plus"})," New Visa"]})]})})}),e.jsx(ul,{title:"Search Filters",icon:"fa fa-search",children:e.jsxs("div",{className:"row g-3",children:[e.jsx("div",{className:"col-md-3",children:e.jsx(_t,{label:"Start Date",name:"startDate",type:"date",value:r.startDate,onChange:L=>y("startDate",L),icon:"fa fa-calendar"})}),e.jsx("div",{className:"col-md-3",children:e.jsx(_t,{label:"End Date",name:"endDate",type:"date",value:r.endDate,onChange:L=>y("endDate",L),icon:"fa fa-calendar"})}),e.jsx("div",{className:"col-md-3",children:e.jsx(_t,{label:"Customer",name:"customerId",type:"select",value:r.customerId||0,onChange:L=>y("customerId",L?parseInt(L):void 0),options:[{value:0,label:"All Customers"},...o.customers.map(L=>({value:L.customer_id,label:`${L.customer_name} - ${L.customer_phone}`}))],icon:"fa fa-user",searchable:!0})}),e.jsx("div",{className:"col-md-3",children:e.jsx(_t,{label:"Country/Visa Type",name:"countryId",type:"select",value:r.countryId||0,onChange:L=>y("countryId",L?parseInt(L):void 0),options:[{value:0,label:"All Countries"},...o.countries.map(L=>({value:L.country_id,label:L.country_names}))],icon:"fa fa-flag",searchable:!0})}),e.jsx("div",{className:"col-md-3",children:e.jsx(_t,{label:"Passport Number",name:"passportNum",value:r.passportNum,onChange:L=>y("passportNum",L),placeholder:"Enter passport number",icon:"fa fa-passport"})}),e.jsx("div",{className:"col-md-3",children:e.jsx(_t,{label:"Passenger Name",name:"passengerName",value:r.passengerName,onChange:L=>y("passengerName",L),placeholder:"Passenger name",icon:"fa fa-user"})}),e.jsx("div",{className:"col-md-3",children:e.jsxs("button",{type:"button",className:"btn btn-dark w-100",onClick:g,style:{marginTop:"28px"},children:[e.jsx("i",{className:"fa fa-search"})," Search"]})}),e.jsx("div",{className:"col-md-3",children:e.jsxs("button",{type:"button",className:"btn btn-secondary w-100",onClick:j,style:{marginTop:"28px"},children:[e.jsx("i",{className:"fa fa-redo"})," Reset"]})})]})}),e.jsx(ul,{title:`Visas (${s.length})`,icon:"fa fa-list",children:a?e.jsx("div",{className:"text-center py-5",children:e.jsx("div",{className:"spinner-border text-danger",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):s.length===0?e.jsx("div",{className:"alert alert-info",children:"No visas found"}):e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-striped table-bordered",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Date"}),e.jsx("th",{children:"Customer"}),e.jsx("th",{children:"Passenger"}),e.jsx("th",{children:"Passport#"}),e.jsx("th",{children:"Country/Visa Type"}),e.jsx("th",{children:"Net"}),e.jsx("th",{children:"Sale"}),e.jsx("th",{children:"Profit"}),e.jsx("th",{children:"Supplier"}),e.jsx("th",{children:"Guarantee"}),e.jsx("th",{style:{width:"150px"},children:"Actions"})]})}),e.jsx("tbody",{children:s.map(L=>e.jsxs("tr",{children:[e.jsx("td",{children:new Date(L.datetime).toLocaleDateString()}),e.jsxs("td",{children:[e.jsx("div",{className:"fw-bold",children:L.customer_name}),e.jsx("small",{className:"text-muted",children:L.customer_phone})]}),e.jsx("td",{children:L.passenger_name}),e.jsx("td",{children:L.PassportNum||"-"}),e.jsx("td",{children:e.jsx("span",{className:"badge bg-primary",children:L.country_name})}),e.jsx("td",{children:E(L.net_price,L.net_currency_name||"")}),e.jsx("td",{children:E(L.sale,L.sale_currency_name||"")}),e.jsx("td",{className:"text-success fw-bold",children:E(L.sale-L.net_price,L.sale_currency_name||"")}),e.jsx("td",{children:L.supplier_name}),e.jsx("td",{children:L.gaurantee}),e.jsx("td",{children:e.jsxs("div",{className:"btn-group-vertical d-flex flex-row gap-1",role:"group",children:[e.jsx("button",{className:"btn btn-sm btn-info",title:"Edit",onClick:()=>N(L),children:e.jsx("i",{className:"fa fa-edit"})}),e.jsx("button",{className:"btn btn-sm btn-success",title:"Upload Visa",onClick:()=>S(L.visa_id,L.passenger_name),children:e.jsx("i",{className:"fa fa-upload"})}),e.jsx("button",{className:"btn btn-sm btn-danger",title:"Delete",onClick:()=>b(L.visa_id,L.passenger_name),children:e.jsx("i",{className:"fa fa-trash"})})]})})]},L.visa_id))})]})})}),u.visa&&e.jsx(TR,{isOpen:u.isOpen,onClose:()=>h({isOpen:!1,visa:null}),onSubmit:v,visa:u.visa,suppliers:o.suppliers,countries:o.countries,nationalities:o.nationalities,currencies:o.currencies})]})}function IR(){const s=Vn(),[t,a]=A.useState(!1),[n,r]=A.useState({customers:[],suppliers:[],countries:[],nationalities:[],currencies:[],accounts:[]}),[i,o]=A.useState({customer_id:0,passenger_name:"",PassportNum:"",nationalityID:0,address:"",gaurantee:"",country_id:0,supp_id:0,net_price:0,netCurrencyID:1,sale:0,saleCurrencyID:1,pendingvisa:1}),[c,u]=A.useState(null);A.useEffect(()=>{h()},[]);const h=async()=>{try{const g=await hl.getDropdowns();r(g)}catch(g){console.error("Failed to load dropdowns:",g),W.fire("Error","Failed to load form data","error")}},m=(g,j)=>{o(b=>({...b,[g]:j}))},p=g=>{g.target.files&&g.target.files[0]&&u(g.target.files[0])},y=async g=>{if(g.preventDefault(),!i.customer_id){W.fire("Error","Please select a customer","error");return}if(!i.passenger_name){W.fire("Error","Please enter passenger name","error");return}if(!i.country_id){W.fire("Error","Please select a country/visa type","error");return}if(!i.supp_id){W.fire("Error","Please select a supplier","error");return}if(!i.nationalityID){W.fire("Error","Please select nationality","error");return}a(!0);try{const j=new FormData;Object.keys(i).forEach(b=>{j.append(b,String(i[b]))}),c&&j.append("visaCopy",c),await hl.createVisa(j),W.fire("Success!","Visa created successfully","success"),s("/visa/report")}catch(j){console.error("Failed to create visa:",j),W.fire("Error",j.response?.data?.message||"Failed to create visa","error")}finally{a(!1)}};return e.jsxs("div",{className:"container-fluid",children:[e.jsx("div",{className:"row mb-3",children:e.jsx("div",{className:"col-md-12",children:e.jsxs("h3",{children:[e.jsx("i",{className:"fa fa-cc-visa"})," Create New Visa"]})})}),e.jsxs("form",{onSubmit:y,children:[e.jsxs(ul,{title:"Customer Information",icon:"fa fa-user",children:[e.jsxs("div",{className:"row g-3",children:[e.jsx("div",{className:"col-md-4",children:e.jsx(_t,{label:"Customer",name:"customer_id",type:"select",value:i.customer_id,onChange:g=>m("customer_id",parseInt(g)),options:[{value:0,label:"Select Customer"},...n.customers.map(g=>({value:g.customer_id,label:`${g.customer_name} - ${g.customer_phone}`}))],required:!0,searchable:!0,icon:"fa fa-user"})}),e.jsx("div",{className:"col-md-4",children:e.jsx(_t,{label:"Nationality",name:"nationalityID",type:"select",value:i.nationalityID,onChange:g=>m("nationalityID",parseInt(g)),options:[{value:0,label:"Select Nationality"},...n.nationalities.map(g=>({value:g.nationalityID,label:g.nationality}))],required:!0,searchable:!0,icon:"fa fa-flag"})}),e.jsx("div",{className:"col-md-4",children:e.jsx(_t,{label:"Address",name:"address",value:i.address,onChange:g=>m("address",g),placeholder:"Enter address",required:!0,icon:"fa fa-map-marker"})})]}),e.jsx("div",{className:"row g-3 mt-2",children:e.jsx("div",{className:"col-md-12",children:e.jsx(_t,{label:"Guarantee Person",name:"gaurantee",value:i.gaurantee,onChange:g=>m("gaurantee",g),placeholder:"Enter guarantee person name",required:!0,icon:"fa fa-user-shield"})})})]}),e.jsx(ul,{title:"Visa Details",icon:"fa fa-cc-visa",children:e.jsxs("div",{className:"row g-3",children:[e.jsx("div",{className:"col-md-6",children:e.jsx(_t,{label:"Country & Visa Type",name:"country_id",type:"select",value:i.country_id,onChange:g=>m("country_id",parseInt(g)),options:[{value:0,label:"Select Country"},...n.countries.map(g=>({value:g.country_id,label:g.country_names}))],required:!0,searchable:!0,icon:"fa fa-flag"})}),e.jsx("div",{className:"col-md-6",children:e.jsx(_t,{label:"Supplier",name:"supp_id",type:"select",value:i.supp_id,onChange:g=>m("supp_id",parseInt(g)),options:[{value:0,label:"Select Supplier"},...n.suppliers.map(g=>({value:g.supp_id,label:g.supp_name}))],required:!0,searchable:!0,icon:"fa fa-building"})})]})}),e.jsx(ul,{title:"Passenger Details",icon:"fa fa-users",children:e.jsxs("div",{className:"row g-3",children:[e.jsx("div",{className:"col-md-6",children:e.jsx(_t,{label:"Passenger Name",name:"passenger_name",value:i.passenger_name,onChange:g=>m("passenger_name",g),placeholder:"Enter passenger name",required:!0,icon:"fa fa-user"})}),e.jsx("div",{className:"col-md-6",children:e.jsx(_t,{label:"Passport Number",name:"PassportNum",value:i.PassportNum,onChange:g=>m("PassportNum",g),placeholder:"Enter passport number",icon:"fa fa-passport"})})]})}),e.jsx(ul,{title:"Pricing Information",icon:"fa fa-dollar-sign",children:e.jsxs("div",{className:"row g-3",children:[e.jsx("div",{className:"col-md-3",children:e.jsx(_t,{label:"Net Price",name:"net_price",type:"number",value:i.net_price,onChange:g=>m("net_price",parseFloat(g)),placeholder:"0.00",required:!0,icon:"fa fa-dollar-sign"})}),e.jsx("div",{className:"col-md-3",children:e.jsx(_t,{label:"Net Currency",name:"netCurrencyID",type:"select",value:i.netCurrencyID,onChange:g=>m("netCurrencyID",parseInt(g)),options:n.currencies.map(g=>({value:g.currencyID,label:g.currencyName})),required:!0,icon:"fa fa-coins"})}),e.jsx("div",{className:"col-md-3",children:e.jsx(_t,{label:"Sale Price",name:"sale",type:"number",value:i.sale,onChange:g=>m("sale",parseFloat(g)),placeholder:"0.00",required:!0,icon:"fa fa-dollar-sign"})}),e.jsx("div",{className:"col-md-3",children:e.jsx(_t,{label:"Sale Currency",name:"saleCurrencyID",type:"select",value:i.saleCurrencyID,onChange:g=>m("saleCurrencyID",parseInt(g)),options:n.currencies.map(g=>({value:g.currencyID,label:g.currencyName})),required:!0,icon:"fa fa-coins"})})]})}),e.jsx(ul,{title:"Upload Visa Copy",icon:"fa fa-upload",children:e.jsx("div",{className:"row g-3",children:e.jsxs("div",{className:"col-md-12",children:[e.jsx("label",{className:"form-label",children:"Visa Copy (Optional)"}),e.jsx("input",{type:"file",className:"form-control",accept:"image/*,.pdf",onChange:p}),c&&e.jsxs("small",{className:"text-muted",children:["Selected: ",c.name]})]})})}),e.jsx("div",{className:"row mt-4",children:e.jsxs("div",{className:"col-md-12",children:[e.jsx("button",{type:"submit",className:"btn btn-danger me-2",disabled:t,children:t?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-border spinner-border-sm me-2"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fa fa-save me-2"}),"Save Visa"]})}),e.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:()=>s("/visa/report"),disabled:t,children:[e.jsx("i",{className:"fa fa-times me-2"}),"Cancel"]})]})})]})]})}function OR({isOpen:s,onClose:t,task:a,onSuccess:n}){const[r,i]=A.useState({eidNumber:"784-",eidExpiryDate:new Date(Date.now()+63072e6).toISOString().split("T")[0],passenger_name:"",gender:"male",dob:"",occupation:"",establishmentName:""}),[o,c]=A.useState(null),[u,h]=A.useState([]),[m,p]=A.useState([]),[y,g]=A.useState(!1),[j,b]=A.useState(!1),[N,v]=A.useState({}),[S,E]=A.useState(null),[L,z]=A.useState(null),[V,te]=A.useState(null),[q,B]=A.useState(null);A.useEffect(()=>{s&&a&&(J(),P(),K())},[s,a]),A.useEffect(()=>{o&&i(X=>({...X,passenger_name:o.passenger_name||a.passenger_name||"",dob:o.dob||"",gender:o.gender||"male",occupation:o.positionID?String(o.positionID):"",establishmentName:o.company?String(o.company):""}))},[o]);const J=async()=>{b(!0);try{const X=await hl.getEIDResidence(a.residenceID,a.type);X&&X.residence&&c(X.residence)}catch(X){console.error("Error loading residence data:",X)}finally{b(!1)}},P=async()=>{try{const X=await hl.getEIDPositions();X&&X.positions&&h(X.positions)}catch(X){console.error("Error loading positions:",X)}},K=async()=>{try{const X=await hl.getEIDCompanies();X&&X.companies&&p(X.companies)}catch(X){console.error("Error loading companies:",X)}},H=(X,R)=>{const Q=X.target.files?.[0];if(Q)if(R==="back"){E(Q);const Y=new FileReader;Y.onloadend=()=>{te(Y.result)},Y.readAsDataURL(Q)}else{z(Q);const Y=new FileReader;Y.onloadend=()=>{B(Y.result)},Y.readAsDataURL(Q)}},se=async X=>{X.preventDefault();const R={};if((!r.eidNumber||r.eidNumber.trim()==="")&&(R.eidNumber="EID Number is required"),r.eidExpiryDate||(R.eidExpiryDate="EID Expiry Date is required"),(!r.passenger_name||r.passenger_name.trim()==="")&&(R.passenger_name="Passenger Name is required"),r.gender||(R.gender="Gender is required"),r.dob||(R.dob="Date of Birth is required"),Object.keys(R).length>0){v(R);return}g(!0);try{await hl.markEIDReceived({id:a.residenceID,type:a.type,eidNumber:r.eidNumber,eidExpiryDate:r.eidExpiryDate,passenger_name:r.passenger_name,gender:r.gender,dob:r.dob,occupation:r.occupation?parseInt(r.occupation):null,establishmentName:r.establishmentName?parseInt(r.establishmentName):null,emiratesIDBackFile:S,emiratesIDFrontFile:L}),W.fire("Success","Emirates ID marked as received successfully","success"),n(),t()}catch(Q){console.error("Error marking as received:",Q),W.fire("Error",Q.response?.data?.message||"Failed to mark as received","error")}finally{g(!1)}};return s?e.jsx("div",{className:"modal-overlay",onClick:t,children:e.jsxs("div",{className:"modal-container",onClick:X=>X.stopPropagation(),style:{maxWidth:"800px"},children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h3",{children:[e.jsx("i",{className:"fa fa-check-circle"})," Mark as Received"]}),e.jsx("button",{className:"modal-close",onClick:t,children:e.jsx("i",{className:"fa fa-times"})})]}),e.jsxs("form",{onSubmit:se,children:[e.jsx("div",{className:"modal-body",children:j?e.jsxs("div",{className:"text-center py-4",children:[e.jsx("i",{className:"fa fa-spinner fa-spin fa-2x"}),e.jsx("p",{className:"mt-2",children:"Loading residence data..."})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-8 mb-3",children:[e.jsxs("label",{className:"form-label",children:["EID Number ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"text",className:`form-control ${N.eidNumber?"is-invalid":""}`,value:r.eidNumber,onChange:X=>{i(R=>({...R,eidNumber:X.target.value})),v(R=>({...R,eidNumber:""}))},placeholder:"784-XXXX-XXXXXXX-X"}),N.eidNumber&&e.jsx("div",{className:"invalid-feedback",children:N.eidNumber})]}),e.jsxs("div",{className:"col-md-4 mb-3",children:[e.jsxs("label",{className:"form-label",children:["EID Expiry Date ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"date",className:`form-control ${N.eidExpiryDate?"is-invalid":""}`,value:r.eidExpiryDate,onChange:X=>{i(R=>({...R,eidExpiryDate:X.target.value})),v(R=>({...R,eidExpiryDate:""}))}}),N.eidExpiryDate&&e.jsx("div",{className:"invalid-feedback",children:N.eidExpiryDate})]})]}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-12 mb-3",children:[e.jsxs("label",{className:"form-label",children:["Passenger Full Name ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"text",className:`form-control ${N.passenger_name?"is-invalid":""}`,value:r.passenger_name,onChange:X=>{i(R=>({...R,passenger_name:X.target.value})),v(R=>({...R,passenger_name:""}))}}),N.passenger_name&&e.jsx("div",{className:"invalid-feedback",children:N.passenger_name})]}),e.jsxs("div",{className:"col-md-4 mb-3",children:[e.jsxs("label",{className:"form-label",children:["Gender ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("select",{className:`form-select ${N.gender?"is-invalid":""}`,value:r.gender,onChange:X=>{i(R=>({...R,gender:X.target.value})),v(R=>({...R,gender:""}))},children:[e.jsx("option",{value:"male",children:"Male"}),e.jsx("option",{value:"female",children:"Female"})]}),N.gender&&e.jsx("div",{className:"invalid-feedback",children:N.gender})]}),e.jsxs("div",{className:"col-md-4 mb-3",children:[e.jsxs("label",{className:"form-label",children:["Date of Birth ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"date",className:`form-control ${N.dob?"is-invalid":""}`,value:r.dob,onChange:X=>{i(R=>({...R,dob:X.target.value})),v(R=>({...R,dob:""}))}}),N.dob&&e.jsx("div",{className:"invalid-feedback",children:N.dob})]}),e.jsxs("div",{className:"col-md-4 mb-3",children:[e.jsxs("label",{className:"form-label",children:["Occupation ",e.jsx("span",{className:"text-muted",children:"(From ID)"})]}),e.jsxs("select",{className:"form-select",value:r.occupation,onChange:X=>i(R=>({...R,occupation:X.target.value})),children:[e.jsx("option",{value:"",children:"-- Select Occupation --"}),u.map(X=>e.jsx("option",{value:X.position_id,children:X.position_name},X.position_id))]}),o?.positionName&&e.jsxs("small",{className:"text-muted",children:["Current: ",o.positionName]})]}),e.jsxs("div",{className:"col-md-8 mb-3",children:[e.jsxs("label",{className:"form-label",children:["Establishment Name ",e.jsx("small",{className:"text-muted",children:"(From Emirates ID)"})]}),e.jsxs("select",{className:"form-select",value:r.establishmentName,onChange:X=>i(R=>({...R,establishmentName:X.target.value})),children:[e.jsx("option",{value:"",children:"-- Select Company --"}),m.map(X=>e.jsx("option",{value:X.company_id,children:X.company_name},X.company_id))]}),o?.company_name&&e.jsxs("small",{className:"text-muted",children:["Current: ",o.company_name]})]})]}),e.jsx("div",{className:"row",children:e.jsxs("div",{className:"col-md-12 mb-3",children:[e.jsxs("label",{className:"form-label",children:["Emirates ID Front ",e.jsx("small",{className:"text-muted",children:"(Upload to auto-extract details)"})]}),e.jsx("input",{type:"file",className:"form-control",accept:"image/jpeg,image/png,application/pdf",onChange:X=>H(X,"back")}),V&&e.jsxs("div",{className:"mt-2",children:[e.jsx("img",{src:V,alt:"Preview",className:"img-thumbnail",style:{maxHeight:"200px"}}),e.jsxs("button",{type:"button",className:"btn btn-sm btn-danger mt-1",onClick:()=>{te(null),E(null)},children:[e.jsx("i",{className:"fa fa-times"})," Remove"]})]})]})}),e.jsx("div",{className:"row",children:e.jsxs("div",{className:"col-md-12 mb-3",children:[e.jsxs("label",{className:"form-label",children:["Emirates ID Back ",e.jsx("small",{className:"text-muted",children:"(Upload to store in database)"})]}),e.jsx("input",{type:"file",className:"form-control",accept:"image/jpeg,image/png,application/pdf",onChange:X=>H(X,"front")}),q&&e.jsxs("div",{className:"mt-2",children:[e.jsx("img",{src:q,alt:"Preview",className:"img-thumbnail",style:{maxHeight:"200px"}}),e.jsxs("button",{type:"button",className:"btn btn-sm btn-danger mt-1",onClick:()=>{B(null),z(null)},children:[e.jsx("i",{className:"fa fa-times"})," Remove"]})]})]})})]})}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:t,disabled:y,children:"Close"}),e.jsxs("button",{type:"submit",className:"btn btn-primary",disabled:y||j,children:[y?e.jsx("i",{className:"fa fa-spinner fa-spin me-2"}):null,"Submit"]})]})]})]})}):null}function MR({isOpen:s,onClose:t,task:a,onSuccess:n}){const[r,i]=A.useState(!1),o=async()=>{if((await W.fire({title:"Confirm",text:"Are you sure you want to mark this Emirates ID as delivered?",icon:"question",showCancelButton:!0,confirmButtonText:"Yes, mark as delivered",cancelButtonText:"Cancel",confirmButtonColor:"#06b6d4",cancelButtonColor:"#6c757d"})).isConfirmed){i(!0);try{await hl.markEIDDelivered({id:a.residenceID,type:a.type}),W.fire("Success","Emirates ID marked as delivered successfully","success"),n(),t()}catch(u){console.error("Error marking as delivered:",u),W.fire("Error",u.response?.data?.message||"Failed to mark as delivered","error")}finally{i(!1)}}};return s?e.jsx("div",{className:"modal-overlay",onClick:t,children:e.jsxs("div",{className:"modal-container",onClick:c=>c.stopPropagation(),style:{maxWidth:"500px"},children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h3",{children:[e.jsx("i",{className:"fa fa-check-circle"})," Mark as Delivered"]}),e.jsx("button",{className:"modal-close",onClick:t,children:e.jsx("i",{className:"fa fa-times"})})]}),e.jsxs("div",{className:"modal-body",children:[e.jsx("p",{children:"Are you sure you want to mark this Emirates ID as delivered?"}),e.jsxs("div",{className:"mt-3",children:[e.jsx("strong",{children:"ID:"})," ",a.residenceID,e.jsx("br",{}),e.jsx("strong",{children:"Passenger:"})," ",a.passenger_name,e.jsx("br",{}),e.jsx("strong",{children:"EID Number:"})," ",a.EmiratesIDNumber||"N/A",e.jsx("br",{}),e.jsx("strong",{children:"Type:"})," ",a.type]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:t,disabled:r,children:"Cancel"}),e.jsxs("button",{type:"button",className:"btn btn-info",onClick:o,disabled:r,children:[r?e.jsx("i",{className:"fa fa-spinner fa-spin me-2"}):null,"Mark as Delivered"]})]})]})}):null}const RR=[{name:"Pending Delivery",count:0,slug:"pending"},{name:"Received",count:0,slug:"received"},{name:"Delivered",count:0,slug:"delivered"}];function BR(){const[s,t]=rc(),a=s.get("step")||"pending",[n,r]=A.useState([]),[i,o]=A.useState(!1),[c,u]=A.useState({pending:0,received:0,delivered:0}),[h,m]=A.useState(0),[p,y]=A.useState(!1),[g,j]=A.useState(!1),[b,N]=A.useState(null),[v,S]=A.useState(1),[E,L]=A.useState(10);A.useEffect(()=>{z()},[a]);const z=async()=>{o(!0);try{const X=await hl.getEIDTasks({step:a});X&&X.tasks?r(Array.isArray(X.tasks)?X.tasks:[]):r([]),X&&X.stepCounts&&u(X.stepCounts),X&&X.totalRemainingBalance!==void 0&&m(X.totalRemainingBalance)}catch(X){console.error("Error loading tasks:",X),r([]);const R=X.response?.data?.message||X.message||"Failed to load tasks";W.fire("Error",R,"error")}finally{o(!1)}},V=X=>{const R=new URLSearchParams(s);R.set("step",X),t(R,{replace:!1}),S(1)},te=X=>{N(X),y(!0)},q=X=>{N(X),j(!0)},B=Math.ceil(n.length/E),J=(v-1)*E,P=J+E,K=n.slice(J,P),H=X=>{S(X),window.scrollTo({top:0,behavior:"smooth"})},se=X=>{L(X),S(1)};return e.jsxs("div",{className:"emirates-id-tasks-page",children:[e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"d-flex align-items-center justify-content-between mb-4",children:e.jsxs("div",{children:[e.jsxs("h1",{className:"mb-2",style:{fontSize:"1.75rem",fontWeight:"bold",color:"#000000"},children:[e.jsx("i",{className:"fa fa-id-card me-2"}),"Emirates ID Tasks"]}),e.jsx("p",{style:{color:"#000000"},children:"Manage Emirates ID delivery status"}),e.jsx("span",{className:"badge bg-info",children:"Filtered: After August 2024"})]})})}),e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"btn-group btn-group-block w-100",children:RR.map(X=>{const R=c[X.slug]||0;return e.jsxs("button",{type:"button",className:`btn btn-white btn-block step-nav-link ${a===X.slug?"active":""}`,onClick:()=>V(X.slug),children:[e.jsx("span",{children:X.name}),R>0&&e.jsx("span",{className:"badge bg-red ms-1",children:R})]},X.slug)})})}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"mb-0",style:{color:"#1f2937",fontWeight:600},children:"Emirates ID Supplier"})}),e.jsx("div",{className:"card-body",children:i?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("i",{className:"fa fa-spinner fa-spin fa-2x",style:{color:"#9ca3af"}}),e.jsx("p",{className:"mt-2",style:{color:"#6b7280"},children:"Loading tasks..."})]}):n.length===0?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{style:{color:"#6b7280"},children:"No records found"})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-striped table-bordered align-middle text-nowrap",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{width:"50",children:"ID"}),e.jsx("th",{children:"Customer Name"}),e.jsx("th",{children:"Passenger Name"}),e.jsx("th",{width:"150",children:"Passport Number"}),e.jsx("th",{width:"150",children:"EID Number"}),e.jsx("th",{width:"150",children:"Remaining Balance"}),e.jsx("th",{children:"Type"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Action"})]})}),e.jsx("tbody",{children:K.map(X=>e.jsxs("tr",{children:[e.jsx("td",{children:X.residenceID}),e.jsx("td",{children:X.customer_name||"-"}),e.jsx("td",{children:X.passenger_name}),e.jsx("td",{children:X.passportNumber}),e.jsx("td",{children:X.EmiratesIDNumber||"-"}),e.jsx("td",{className:X.remaining_balance>0?"text-danger":"",children:e.jsx("strong",{children:X.remaining_balance.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})})}),e.jsx("td",{children:e.jsx("span",{className:`badge bg-${X.type==="ML"?"success":"danger"}`,children:X.type})}),e.jsx("td",{children:X.completedStep<8&&e.jsx("span",{className:"badge bg-red",children:"Waiting For Residency"})}),e.jsxs("td",{children:[a==="pending"&&e.jsx("button",{className:"btn btn-success btn-sm",onClick:()=>te(X),children:"Mark as Received"}),a==="received"&&e.jsx("button",{className:"btn btn-info btn-sm",onClick:()=>q(X),children:"Mark as Delivered"})]})]},`${X.type}-${X.residenceID}`))})]})}),e.jsx("div",{className:"text-right mt-3",children:e.jsxs("strong",{children:["Total Remaining Balance: ",h.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})}),!i&&n.length>0&&e.jsxs("div",{className:"pagination-container",style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"16px 20px",borderTop:"1px solid #e5e7eb",flexWrap:"wrap",gap:"12px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("span",{style:{fontSize:"14px",color:"#6b7280"},children:"Show"}),e.jsxs("select",{value:E,onChange:X=>se(Number(X.target.value)),style:{padding:"6px 10px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px",backgroundColor:"#ffffff",cursor:"pointer"},children:[e.jsx("option",{value:5,children:"5"}),e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:25,children:"25"}),e.jsx("option",{value:50,children:"50"}),e.jsx("option",{value:100,children:"100"})]}),e.jsxs("span",{style:{fontSize:"14px",color:"#6b7280"},children:["entries (Showing ",J+1,"-",Math.min(P,n.length)," of ",n.length,")"]})]}),e.jsxs("div",{style:{display:"flex",gap:"4px",alignItems:"center"},children:[e.jsx("button",{onClick:()=>H(1),disabled:v===1,style:{padding:"6px 12px",border:"1px solid #d1d5db",borderRadius:"6px",backgroundColor:v===1?"#f3f4f6":"#ffffff",cursor:v===1?"not-allowed":"pointer",fontSize:"14px",color:v===1?"#9ca3af":"#374151"},children:e.jsx("i",{className:"fa fa-angle-double-left"})}),e.jsx("button",{onClick:()=>H(v-1),disabled:v===1,style:{padding:"6px 12px",border:"1px solid #d1d5db",borderRadius:"6px",backgroundColor:v===1?"#f3f4f6":"#ffffff",cursor:v===1?"not-allowed":"pointer",fontSize:"14px",color:v===1?"#9ca3af":"#374151"},children:e.jsx("i",{className:"fa fa-angle-left"})}),Array.from({length:Math.min(5,B)},(X,R)=>{let Q;return B<=5||v<=3?Q=R+1:v>=B-2?Q=B-4+R:Q=v-2+R,e.jsx("button",{onClick:()=>H(Q),style:{padding:"6px 12px",border:"1px solid #d1d5db",borderRadius:"6px",backgroundColor:v===Q?"#000000":"#ffffff",color:v===Q?"#ffffff":"#374151",cursor:"pointer",fontSize:"14px",fontWeight:v===Q?"600":"400",minWidth:"36px"},children:Q},Q)}),e.jsx("button",{onClick:()=>H(v+1),disabled:v===B,style:{padding:"6px 12px",border:"1px solid #d1d5db",borderRadius:"6px",backgroundColor:v===B?"#f3f4f6":"#ffffff",cursor:v===B?"not-allowed":"pointer",fontSize:"14px",color:v===B?"#9ca3af":"#374151"},children:e.jsx("i",{className:"fa fa-angle-right"})}),e.jsx("button",{onClick:()=>H(B),disabled:v===B,style:{padding:"6px 12px",border:"1px solid #d1d5db",borderRadius:"6px",backgroundColor:v===B?"#f3f4f6":"#ffffff",cursor:v===B?"not-allowed":"pointer",fontSize:"14px",color:v===B?"#9ca3af":"#374151"},children:e.jsx("i",{className:"fa fa-angle-double-right"})})]})]})]})})]}),b&&e.jsxs(e.Fragment,{children:[e.jsx(OR,{isOpen:p,onClose:()=>{y(!1),N(null)},task:b,onSuccess:z}),e.jsx(MR,{isOpen:g,onClose:()=>{j(!1),N(null)},task:b,onSuccess:z})]})]})}const fl={async getTasks(s){const t=await Ne.get("/freezone/tasks.php",{params:s});return console.log("Freezone tasks API response:",t.data),t.data.success!==void 0?{success:t.data.success,residences:t.data.residences||[],stepCounts:t.data.stepCounts||{}}:{success:!0,residences:t.data.data?.residences||t.data.residences||[],stepCounts:t.data.data?.stepCounts||t.data.stepCounts||{}}},async setEVisa(s,t){const a=new URLSearchParams;a.append("action","seteVisa"),a.append("id",s.toString()),a.append("companyID",t.companyID),a.append("eVisaPositionID",t.eVisaPositionID),a.append("eVisaCost",t.eVisaCost||"4020"),t.eVisaAccountID&&a.append("eVisaAccountID",t.eVisaAccountID),t.eVisaCurrencyID&&a.append("eVisaCurrencyID",t.eVisaCurrencyID);const n=await Ne.post("/freezone/tasks-controller.php",a,{headers:{"Content-Type":"application/x-www-form-urlencoded"}});return n.data.data||n.data},async acceptEVisa(s,t){const a=new FormData;a.append("action","seteVisaAccept"),a.append("id",s.toString()),t&&a.append("eVisaFile",t);const n=await Ne.post("/freezone/tasks-controller.php",a,{headers:{"Content-Type":"multipart/form-data"}});return n.data.data||n.data},async rejectEVisa(s){const t=new URLSearchParams;t.append("action","rejectEVisa"),t.append("id",s.toString());const a=await Ne.post("/freezone/tasks-controller.php",t,{headers:{"Content-Type":"application/x-www-form-urlencoded"}});return a.data.data||a.data},async setChangeStatus(s,t){const a=new FormData;a.append("action","setChangeStatus"),a.append("id",s.toString()),a.append("changeStatusCost",t.changeStatusCost),a.append("changeStatusAccountType",t.changeStatusAccountType),t.changeStatusAccountID&&a.append("changeStatusAccountID",t.changeStatusAccountID),t.changeStatusSupplierID&&a.append("changeStatusSupplierID",t.changeStatusSupplierID),t.changeStatusCurrencyID&&a.append("changeStatusCurrencyID",t.changeStatusCurrencyID),t.changeStatusFile&&a.append("changeStatusFile",t.changeStatusFile);const n=await Ne.post("/freezone/tasks-controller.php",a,{headers:{"Content-Type":"multipart/form-data"}});return n.data.data||n.data},async setMedical(s,t){const a=new FormData;a.append("action","setMedical"),a.append("id",s.toString()),a.append("medicalCost",t.medicalCost),t.medicalAccountID&&a.append("medicalAccountID",t.medicalAccountID),t.medicalCurrencyID&&a.append("medicalCurrencyID",t.medicalCurrencyID),t.medicalFile&&a.append("medicalFile",t.medicalFile);const n=await Ne.post("/freezone/tasks-controller.php",a,{headers:{"Content-Type":"multipart/form-data"}});return n.data.data||n.data},async setEmiratesID(s,t){const a=new FormData;a.append("action","setEmiratesID"),a.append("id",s.toString()),a.append("emiratesIDCost",t.emiratesIDCost),t.emiratesIDAccountID&&a.append("emiratesIDAccountID",t.emiratesIDAccountID),t.emiratesIDCurrencyID&&a.append("emiratesIDCurrencyID",t.emiratesIDCurrencyID),t.emiratesIDFile&&a.append("emiratesIDFile",t.emiratesIDFile);const n=await Ne.post("/freezone/tasks-controller.php",a,{headers:{"Content-Type":"multipart/form-data"}});return n.data.data||n.data},async setVisaStamping(s,t){const a=new URLSearchParams;a.append("action","setVisaStamping"),a.append("id",s.toString()),a.append("emiratesIDNumber",t.emiratesIDNumber),a.append("visaExpiryDate",t.visaExpiryDate);const n=await Ne.post("/freezone/tasks-controller.php",a,{headers:{"Content-Type":"application/x-www-form-urlencoded"}});return n.data.data||n.data},async addFreezoneResidence(s){const t=new FormData;t.append("action","addFreezoneResidence"),t.append("customerID",s.customerID),t.append("uid",s.uid),t.append("passportNumber",s.passportNumber),t.append("passportExpiryDate",s.passportExpiryDate),t.append("passangerName",s.passangerName),t.append("nationality",s.nationality),t.append("gender",s.gender),t.append("dob",s.dob),t.append("insideOutside",s.insideOutside),t.append("positionID",s.positionID),t.append("salary",s.salary),t.append("salePrice",s.salePrice),t.append("saleCurrency",s.saleCurrency),t.append("passportFile",s.passportFile),t.append("photoFile",s.photoFile),s.idFrontFile&&t.append("idFrontFile",s.idFrontFile),s.idBackFile&&t.append("idBackFile",s.idBackFile);const a=await Ne.post("/freezone/tasks-controller.php",t,{headers:{"Content-Type":"multipart/form-data"}});return a.data.data||a.data},async getCompanies(){try{const s=await Ne.get("/residence/get-companies.php",{params:{type:"Freezone"}});if(console.log("getCompanies raw response:",s.data),console.log("Response keys:",Object.keys(s.data)),console.log("response.data.companies:",s.data.companies),console.log("response.data.data:",s.data.data),s.data.success!==void 0){if(Array.isArray(s.data.companies))return console.log("Found companies in response.data.companies:",s.data.companies.length),s.data.companies;if(Array.isArray(s.data.data))return console.log("Found companies in response.data.data:",s.data.data.length),s.data.data;const a=Object.keys(s.data).filter(n=>!isNaN(Number(n)));if(a.length>0){const n=a.map(r=>s.data[r]).filter(r=>r&&r.company_id);return console.log("Found companies in numeric keys:",n.length),n}return console.warn("No companies found in response"),[]}const t=Array.isArray(s.data)?s.data:s.data?.data||s.data?.companies||[];return console.log("Using fallback, result:",t),t}catch(s){throw console.error("Error in getCompanies:",s),console.error("Error response:",s.response),s}},async getLookups(){const s=await Ne.get("/residence/lookups.php");return console.log("getLookups raw response:",s.data),s.data.success!==void 0,s.data.data||s.data},async getAttachments(s){const t=await Ne.get("/freezone/attachments.php",{params:{action:"get",id:s}});return console.log("Freezone attachments API response:",t.data),t.data.success!==void 0?t.data.attachments||t.data.data||[]:t.data.data||t.data||[]},async uploadAttachment(s,t,a){const n=new FormData;n.append("action","upload"),n.append("id",s.toString()),n.append("fileType",t),n.append("file",a);const r=await Ne.post("/freezone/attachments.php",n,{headers:{"Content-Type":"multipart/form-data"}});return r.data.data||r.data},async deleteAttachment(s){const t=new URLSearchParams;t.append("action","delete"),t.append("id",s.toString());const a=await Ne.post("/freezone/attachments.php",t,{headers:{"Content-Type":"application/x-www-form-urlencoded"}});return a.data.data||a.data}};function zR({isOpen:s,onClose:t,residenceId:a,onSuccess:n,companies:r,positions:i,accounts:o,currencies:c,residence:u}){const[h,m]=A.useState({companyID:"",eVisaPositionID:"",eVisaCost:"4020",eVisaAccountID:"",eVisaCurrencyID:""}),[p,y]=A.useState(!1),[g,j]=A.useState({});A.useEffect(()=>{s&&a&&(m({companyID:"",eVisaPositionID:u?.positionID?u.positionID.toString():"",eVisaCost:"4020",eVisaAccountID:"",eVisaCurrencyID:c&&c.length>0?c[0].currencyID.toString():""}),j({}))},[s,a,u,c]);const b=async N=>{if(N.preventDefault(),!a)return;const v={};if(h.companyID||(v.companyID="Establishment is required"),h.eVisaPositionID||(v.eVisaPositionID="Position is required"),h.eVisaCost||(v.eVisaCost="Cost is required"),h.eVisaAccountID||(v.eVisaAccountID="Account is required"),h.eVisaCurrencyID||(v.eVisaCurrencyID="Currency is required"),Object.keys(v).length>0){j(v);return}y(!0);try{await fl.setEVisa(a,{companyID:h.companyID,eVisaPositionID:h.eVisaPositionID,eVisaCost:h.eVisaCost,eVisaAccountID:h.eVisaAccountID,eVisaCurrencyID:h.eVisaCurrencyID}),W.fire("Success","eVisa set successfully","success"),n(),t()}catch(S){console.error("eVisa update error:",S),W.fire("Error",S.response?.data?.message||"Failed to set eVisa","error")}finally{y(!1)}};return s?(console.log("FreezoneEVisaModal props:",{companies:r.length,positions:i.length,residence:u}),e.jsx("div",{className:"modal-overlay",onClick:t,children:e.jsxs("div",{className:"modal-container",onClick:N=>N.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h3",{children:[e.jsx("i",{className:"fa fa-ticket"})," Submit eVisa"]}),e.jsx("button",{className:"modal-close",onClick:t,children:e.jsx("i",{className:"fa fa-times"})})]}),e.jsxs("form",{onSubmit:b,children:[e.jsx("div",{className:"modal-body",children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-12 mb-3",children:[e.jsxs("label",{className:"form-label",children:["Establishment ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("div",{className:g.companyID?"is-invalid":"",children:e.jsx(It,{options:r&&r.length>0?r.map(N=>({value:N.company_id.toString(),label:N.company_name})):[],value:h.companyID||"",onChange:N=>m({...h,companyID:N?N.toString():""}),placeholder:"Select Establishment",required:!0})}),g.companyID&&e.jsx("div",{className:"invalid-feedback d-block",children:g.companyID})]}),e.jsxs("div",{className:"col-md-12 mb-3",children:[e.jsxs("label",{className:"form-label",children:["Position ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("div",{className:g.eVisaPositionID?"is-invalid":"",children:e.jsx(It,{options:i&&i.length>0?i.map(N=>({value:N.position_id.toString(),label:N.posiiton_name||N.position_name||""})):[],value:h.eVisaPositionID||"",onChange:N=>m({...h,eVisaPositionID:N?N.toString():""}),placeholder:"Select Position",required:!0})}),g.eVisaPositionID&&e.jsx("div",{className:"invalid-feedback d-block",children:g.eVisaPositionID})]}),e.jsxs("div",{className:"col-md-6 mb-3",children:[e.jsxs("label",{className:"form-label",children:["eVisa Cost ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"text",className:`form-control ${g.eVisaCost?"is-invalid":""}`,value:h.eVisaCost,onChange:N=>m({...h,eVisaCost:N.target.value})}),g.eVisaCost&&e.jsx("div",{className:"invalid-feedback",children:g.eVisaCost})]}),e.jsxs("div",{className:"col-md-6 mb-3",children:[e.jsxs("label",{className:"form-label",children:["Currency ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("div",{className:g.eVisaCurrencyID?"is-invalid":"",children:e.jsx(It,{options:c&&c.length>0?c.map(N=>({value:N.currencyID.toString(),label:N.currencyName})):[],value:h.eVisaCurrencyID||"",onChange:N=>m({...h,eVisaCurrencyID:N?N.toString():""}),placeholder:"Select Currency",required:!0})}),g.eVisaCurrencyID&&e.jsx("div",{className:"invalid-feedback d-block",children:g.eVisaCurrencyID})]}),e.jsxs("div",{className:"col-md-12 mb-3",children:[e.jsxs("label",{className:"form-label",children:["Account ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("div",{className:g.eVisaAccountID?"is-invalid":"",children:e.jsx(It,{options:o&&o.length>0?o.map(N=>({value:N.account_ID.toString(),label:N.account_Name})):[],value:h.eVisaAccountID||"",onChange:N=>m({...h,eVisaAccountID:N?N.toString():""}),placeholder:"Select Account",required:!0})}),g.eVisaAccountID&&e.jsx("div",{className:"invalid-feedback d-block",children:g.eVisaAccountID})]})]})}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:t,children:"Close"}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:p,children:p?"Submitting...":"Submit"})]})]})]})})):null}function qR({isOpen:s,onClose:t,residenceId:a,onSuccess:n}){const[r,i]=A.useState(null),[o,c]=A.useState(!1);A.useEffect(()=>{s&&i(null)},[s]);const u=async h=>{if(h.preventDefault(),!!a){c(!0);try{await fl.acceptEVisa(a,r||void 0),W.fire("Success","eVisa accepted successfully","success"),n(),t()}catch(m){console.error("eVisa accept error:",m),W.fire("Error",m.response?.data?.message||"Failed to accept eVisa","error")}finally{c(!1)}}};return s?e.jsx("div",{className:"modal-overlay",onClick:t,children:e.jsxs("div",{className:"modal-container",onClick:h=>h.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h3",{children:[e.jsx("i",{className:"fa fa-check-circle"})," Accept eVisa"]}),e.jsx("button",{className:"modal-close",onClick:t,children:e.jsx("i",{className:"fa fa-times"})})]}),e.jsxs("form",{onSubmit:u,children:[e.jsx("div",{className:"modal-body",children:e.jsx("div",{className:"row",children:e.jsxs("div",{className:"col-md-12 mb-3",children:[e.jsx("label",{className:"form-label",children:"eVisa File"}),e.jsx("input",{type:"file",className:"form-control",accept:".pdf,.jpg,.jpeg,.png",onChange:h=>i(h.target.files?.[0]||null)})]})})}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:t,children:"Close"}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:o,children:o?"Submitting...":"Submit"})]})]})]})}):null}function UR({isOpen:s,onClose:t,residenceId:a,onSuccess:n,accounts:r,suppliers:i,currencies:o}){const[c,u]=A.useState({changeStatusCost:"1520",changeStatusAccountType:"1",changeStatusAccountID:"",changeStatusSupplierID:"",changeStatusCurrencyID:""}),[h,m]=A.useState(null),[p,y]=A.useState(!1),[g,j]=A.useState({});A.useEffect(()=>{s&&a&&(u({changeStatusCost:"1520",changeStatusAccountType:"1",changeStatusAccountID:"",changeStatusSupplierID:"",changeStatusCurrencyID:o&&o.length>0?o[0].currencyID.toString():""}),m(null),j({}))},[s,a,o]);const b=async N=>{if(N.preventDefault(),!a)return;const v={};if(c.changeStatusCost||(v.changeStatusCost="Cost is required"),c.changeStatusCurrencyID||(v.changeStatusCurrencyID="Currency is required"),c.changeStatusAccountType==="1"&&!c.changeStatusAccountID&&(v.changeStatusAccountID="Account is required"),c.changeStatusAccountType==="2"&&!c.changeStatusSupplierID&&(v.changeStatusSupplierID="Supplier is required"),Object.keys(v).length>0){j(v);return}y(!0);try{await fl.setChangeStatus(a,{changeStatusCost:c.changeStatusCost,changeStatusAccountType:c.changeStatusAccountType,changeStatusAccountID:c.changeStatusAccountType==="1"?c.changeStatusAccountID:void 0,changeStatusSupplierID:c.changeStatusAccountType==="2"?c.changeStatusSupplierID:void 0,changeStatusCurrencyID:c.changeStatusCurrencyID,changeStatusFile:h||void 0}),W.fire("Success","Status changed successfully","success"),n(),t()}catch(S){console.error("Change status error:",S),W.fire("Error",S.response?.data?.message||"Failed to change status","error")}finally{y(!1)}};return s?e.jsx("div",{className:"modal-overlay",onClick:t,children:e.jsxs("div",{className:"modal-container",onClick:N=>N.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h3",{children:[e.jsx("i",{className:"fa fa-exchange"})," Change Status"]}),e.jsx("button",{className:"modal-close",onClick:t,children:e.jsx("i",{className:"fa fa-times"})})]}),e.jsxs("form",{onSubmit:b,children:[e.jsx("div",{className:"modal-body",children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-4 mb-3",children:[e.jsxs("label",{className:"form-label",children:["Change Status Cost ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"number",className:`form-control ${g.changeStatusCost?"is-invalid":""}`,value:c.changeStatusCost,onChange:N=>u({...c,changeStatusCost:N.target.value})}),g.changeStatusCost&&e.jsx("div",{className:"invalid-feedback",children:g.changeStatusCost})]}),e.jsxs("div",{className:"col-md-6 mb-3",children:[e.jsxs("label",{className:"form-label",children:["Account Type ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("select",{className:"form-select",value:c.changeStatusAccountType,onChange:N=>u({...c,changeStatusAccountType:N.target.value,changeStatusAccountID:"",changeStatusSupplierID:""}),children:[e.jsx("option",{value:"1",children:"Account"}),e.jsx("option",{value:"2",children:"Supplier"})]})]}),c.changeStatusAccountType==="1"&&e.jsxs("div",{className:"col-md-12 mb-3",children:[e.jsxs("label",{className:"form-label",children:["Account ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("select",{className:`form-select ${g.changeStatusAccountID?"is-invalid":""}`,value:c.changeStatusAccountID,onChange:N=>u({...c,changeStatusAccountID:N.target.value}),children:[e.jsx("option",{value:"",children:"Select Account"}),r.map(N=>e.jsx("option",{value:N.account_ID,children:N.account_Name},N.account_ID))]}),g.changeStatusAccountID&&e.jsx("div",{className:"invalid-feedback",children:g.changeStatusAccountID})]}),c.changeStatusAccountType==="2"&&e.jsxs("div",{className:"col-md-12 mb-3",children:[e.jsxs("label",{className:"form-label",children:["Supplier ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("select",{className:`form-select ${g.changeStatusSupplierID?"is-invalid":""}`,value:c.changeStatusSupplierID,onChange:N=>u({...c,changeStatusSupplierID:N.target.value}),children:[e.jsx("option",{value:"",children:"Select Supplier"}),i.map(N=>e.jsx("option",{value:N.supp_id,children:N.supp_name},N.supp_id))]}),g.changeStatusSupplierID&&e.jsx("div",{className:"invalid-feedback",children:g.changeStatusSupplierID})]}),e.jsxs("div",{className:"col-md-6 mb-3",children:[e.jsxs("label",{className:"form-label",children:["Currency ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("div",{className:g.changeStatusCurrencyID?"is-invalid":"",children:e.jsx(It,{options:o&&o.length>0?o.map(N=>({value:N.currencyID.toString(),label:N.currencyName})):[],value:c.changeStatusCurrencyID,onChange:N=>u({...c,changeStatusCurrencyID:N}),placeholder:"Select Currency"})}),g.changeStatusCurrencyID&&e.jsx("div",{className:"invalid-feedback",children:g.changeStatusCurrencyID})]}),e.jsxs("div",{className:"col-md-12 mb-3",children:[e.jsx("label",{className:"form-label",children:"Change Status File"}),e.jsx("input",{type:"file",className:"form-control",accept:".pdf,.jpg,.jpeg,.png",onChange:N=>m(N.target.files?.[0]||null)})]})]})}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:t,children:"Close"}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:p,children:p?"Submitting...":"Submit"})]})]})]})}):null}function HR({isOpen:s,onClose:t,residenceId:a,onSuccess:n,accounts:r,currencies:i}){const[o,c]=A.useState({medicalCost:"275",medicalAccountID:"",medicalCurrencyID:""}),[u,h]=A.useState(null),[m,p]=A.useState(!1),[y,g]=A.useState({});A.useEffect(()=>{s&&a&&(c({medicalCost:"275",medicalAccountID:"",medicalCurrencyID:i&&i.length>0?i[0].currencyID.toString():""}),h(null),g({}))},[s,a,i]);const j=async b=>{if(b.preventDefault(),!a)return;const N={};if(o.medicalCost||(N.medicalCost="Medical Cost is required"),o.medicalAccountID||(N.medicalAccountID="Account is required"),o.medicalCurrencyID||(N.medicalCurrencyID="Currency is required"),Object.keys(N).length>0){g(N);return}p(!0);try{await fl.setMedical(a,{medicalCost:o.medicalCost,medicalAccountID:o.medicalAccountID,medicalCurrencyID:o.medicalCurrencyID,medicalFile:u||void 0}),W.fire("Success","Medical set successfully","success"),n(),t()}catch(v){console.error("Medical update error:",v),W.fire("Error",v.response?.data?.message||"Failed to set medical","error")}finally{p(!1)}};return s?e.jsx("div",{className:"modal-overlay",onClick:t,children:e.jsxs("div",{className:"modal-container",onClick:b=>b.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h3",{children:[e.jsx("i",{className:"fa fa-medkit"})," Medical"]}),e.jsx("button",{className:"modal-close",onClick:t,children:e.jsx("i",{className:"fa fa-times"})})]}),e.jsxs("form",{onSubmit:j,children:[e.jsx("div",{className:"modal-body",children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-4 mb-3",children:[e.jsxs("label",{className:"form-label",children:["Medical Cost ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"number",className:`form-control ${y.medicalCost?"is-invalid":""}`,value:o.medicalCost,onChange:b=>c({...o,medicalCost:b.target.value})}),y.medicalCost&&e.jsx("div",{className:"invalid-feedback",children:y.medicalCost})]}),e.jsxs("div",{className:"col-md-6 mb-3",children:[e.jsxs("label",{className:"form-label",children:["Account ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("div",{className:y.medicalAccountID?"is-invalid":"",children:e.jsx(It,{options:r&&r.length>0?r.map(b=>({value:b.account_ID.toString(),label:b.account_Name})):[],value:o.medicalAccountID,onChange:b=>c({...o,medicalAccountID:b}),placeholder:"Select Account"})}),y.medicalAccountID&&e.jsx("div",{className:"invalid-feedback",children:y.medicalAccountID})]}),e.jsxs("div",{className:"col-md-6 mb-3",children:[e.jsxs("label",{className:"form-label",children:["Currency ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("div",{className:y.medicalCurrencyID?"is-invalid":"",children:e.jsx(It,{options:i&&i.length>0?i.map(b=>({value:b.currencyID.toString(),label:b.currencyName})):[],value:o.medicalCurrencyID,onChange:b=>c({...o,medicalCurrencyID:b}),placeholder:"Select Currency"})}),y.medicalCurrencyID&&e.jsx("div",{className:"invalid-feedback",children:y.medicalCurrencyID})]}),e.jsxs("div",{className:"col-md-12 mb-3",children:[e.jsx("label",{className:"form-label",children:"Medical File"}),e.jsx("input",{type:"file",className:"form-control",accept:".pdf,.jpg,.jpeg,.png",onChange:b=>h(b.target.files?.[0]||null)})]})]})}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:t,children:"Close"}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:m,children:m?"Submitting...":"Submit"})]})]})]})}):null}function $R({isOpen:s,onClose:t,residenceId:a,onSuccess:n,accounts:r,currencies:i}){const[o,c]=A.useState({emiratesIDCost:"375",emiratesIDAccountID:"",emiratesIDCurrencyID:""}),[u,h]=A.useState(null),[m,p]=A.useState(!1),[y,g]=A.useState({});A.useEffect(()=>{s&&a&&(c({emiratesIDCost:"375",emiratesIDAccountID:"",emiratesIDCurrencyID:i&&i.length>0?i[0].currencyID.toString():""}),h(null),g({}))},[s,a,i]);const j=async b=>{if(b.preventDefault(),!a)return;const N={};if(o.emiratesIDCost||(N.emiratesIDCost="Emirates ID Cost is required"),o.emiratesIDAccountID||(N.emiratesIDAccountID="Account is required"),o.emiratesIDCurrencyID||(N.emiratesIDCurrencyID="Currency is required"),Object.keys(N).length>0){g(N);return}p(!0);try{await fl.setEmiratesID(a,{emiratesIDCost:o.emiratesIDCost,emiratesIDAccountID:o.emiratesIDAccountID,emiratesIDCurrencyID:o.emiratesIDCurrencyID,emiratesIDFile:u||void 0}),W.fire("Success","Emirates ID set successfully","success"),n(),t()}catch(v){console.error("Emirates ID update error:",v),W.fire("Error",v.response?.data?.message||"Failed to set Emirates ID","error")}finally{p(!1)}};return s?e.jsx("div",{className:"modal-overlay",onClick:t,children:e.jsxs("div",{className:"modal-container",onClick:b=>b.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h3",{children:[e.jsx("i",{className:"fa fa-id-card"})," Emirates ID"]}),e.jsx("button",{className:"modal-close",onClick:t,children:e.jsx("i",{className:"fa fa-times"})})]}),e.jsxs("form",{onSubmit:j,children:[e.jsx("div",{className:"modal-body",children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-4 mb-3",children:[e.jsxs("label",{className:"form-label",children:["Emirates ID Cost ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"number",className:`form-control ${y.emiratesIDCost?"is-invalid":""}`,value:o.emiratesIDCost,onChange:b=>c({...o,emiratesIDCost:b.target.value})}),y.emiratesIDCost&&e.jsx("div",{className:"invalid-feedback",children:y.emiratesIDCost})]}),e.jsxs("div",{className:"col-md-6 mb-3",children:[e.jsxs("label",{className:"form-label",children:["Account ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("div",{className:y.emiratesIDAccountID?"is-invalid":"",children:e.jsx(It,{options:r&&r.length>0?r.map(b=>({value:b.account_ID.toString(),label:b.account_Name})):[],value:o.emiratesIDAccountID,onChange:b=>c({...o,emiratesIDAccountID:b}),placeholder:"Select Account"})}),y.emiratesIDAccountID&&e.jsx("div",{className:"invalid-feedback",children:y.emiratesIDAccountID})]}),e.jsxs("div",{className:"col-md-6 mb-3",children:[e.jsxs("label",{className:"form-label",children:["Currency ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("div",{className:y.emiratesIDCurrencyID?"is-invalid":"",children:e.jsx(It,{options:i&&i.length>0?i.map(b=>({value:b.currencyID.toString(),label:b.currencyName})):[],value:o.emiratesIDCurrencyID,onChange:b=>c({...o,emiratesIDCurrencyID:b}),placeholder:"Select Currency"})}),y.emiratesIDCurrencyID&&e.jsx("div",{className:"invalid-feedback",children:y.emiratesIDCurrencyID})]}),e.jsxs("div",{className:"col-md-12 mb-3",children:[e.jsx("label",{className:"form-label",children:"Emirates ID File"}),e.jsx("input",{type:"file",className:"form-control",accept:".pdf,.jpg,.jpeg,.png",onChange:b=>h(b.target.files?.[0]||null)})]})]})}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:t,children:"Close"}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:m,children:m?"Submitting...":"Submit"})]})]})]})}):null}function VR({isOpen:s,onClose:t,residenceId:a,onSuccess:n}){const[r,i]=A.useState({emiratesIDNumber:"",visaExpiryDate:""}),[o,c]=A.useState(!1),[u,h]=A.useState({});A.useEffect(()=>{s&&a&&(i({emiratesIDNumber:"",visaExpiryDate:""}),h({}))},[s,a]);const m=async p=>{if(p.preventDefault(),!a)return;const y={};if(r.emiratesIDNumber||(y.emiratesIDNumber="Emirates ID Number is required"),r.visaExpiryDate||(y.visaExpiryDate="Visa Expiry Date is required"),Object.keys(y).length>0){h(y);return}c(!0);try{await fl.setVisaStamping(a,{emiratesIDNumber:r.emiratesIDNumber,visaExpiryDate:r.visaExpiryDate}),W.fire("Success","Visa stamping set successfully","success"),n(),t()}catch(g){console.error("Visa stamping error:",g),W.fire("Error",g.response?.data?.message||"Failed to set visa stamping","error")}finally{c(!1)}};return s?e.jsx("div",{className:"modal-overlay",onClick:t,children:e.jsxs("div",{className:"modal-container",onClick:p=>p.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h3",{children:[e.jsx("i",{className:"fas fa-stamp"})," Visa Stamping"]}),e.jsx("button",{className:"modal-close",onClick:t,children:e.jsx("i",{className:"fa fa-times"})})]}),e.jsxs("form",{onSubmit:m,children:[e.jsx("div",{className:"modal-body",children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6 mb-3",children:[e.jsxs("label",{className:"form-label",children:["Emirates ID Number ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"text",className:`form-control ${u.emiratesIDNumber?"is-invalid":""}`,value:r.emiratesIDNumber,onChange:p=>i({...r,emiratesIDNumber:p.target.value})}),u.emiratesIDNumber&&e.jsx("div",{className:"invalid-feedback",children:u.emiratesIDNumber})]}),e.jsxs("div",{className:"col-md-4 mb-3",children:[e.jsxs("label",{className:"form-label",children:["Visa Expiry Date ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"date",className:`form-control ${u.visaExpiryDate?"is-invalid":""}`,value:r.visaExpiryDate,onChange:p=>i({...r,visaExpiryDate:p.target.value})}),u.visaExpiryDate&&e.jsx("div",{className:"invalid-feedback",children:u.visaExpiryDate})]})]})}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:t,children:"Close"}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:o,children:o?"Submitting...":"Submit"})]})]})]})}):null}const Hp=s=>`/freezoneFiles/${s}`,mw=s=>{const t=s.toLowerCase();return["jpg","jpeg","png","gif"].includes(t)?"fa fa-file-image":t==="pdf"?"fa fa-file-pdf":["doc","docx"].includes(t)?"fa fa-file-word":["xls","xlsx"].includes(t)?"fa fa-file-excel":"fa fa-file"},WR=({isOpen:s,onClose:t,residenceId:a})=>{const[n,r]=A.useState([]),[i,o]=A.useState(!1),[c,u]=A.useState(!1),[h,m]=A.useState(null),[p,y]=A.useState("");A.useEffect(()=>{s&&a&&g()},[s,a]);const g=async()=>{if(a){o(!0);try{const N=await fl.getAttachments(a);console.log("Loaded freezone attachments:",N),r(Array.isArray(N)?N:[])}catch(N){console.error("Error loading attachments:",N),W.fire("Error","Failed to load attachments: "+(N.response?.data?.message||N.message),"error")}finally{o(!1)}}},j=async N=>{if(N.preventDefault(),!a||!h||!p){W.fire("Error","Please select a file and file type","error");return}u(!0);try{await fl.uploadAttachment(a,p,h),W.fire("Success","File uploaded successfully","success"),m(null),y(""),g()}catch(v){console.error("Error uploading attachment:",v),W.fire("Error",v.response?.data?.message||"Failed to upload file","error")}finally{u(!1)}},b=async N=>{if((await W.fire({title:"Delete File",text:"Are you sure you want to delete this file?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#dc3545",cancelButtonColor:"#6c757d",confirmButtonText:"Yes, delete it"})).isConfirmed)try{await fl.deleteAttachment(N),W.fire("Success","File deleted successfully","success"),g()}catch(S){console.error("Error deleting attachment:",S),W.fire("Error",S.response?.data?.message||"Failed to delete file","error")}};return s?e.jsx("div",{className:"modal-overlay",onClick:t,children:e.jsxs("div",{className:"modal-container",onClick:N=>N.stopPropagation(),style:{maxWidth:"800px"},children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h3",{children:[e.jsx("i",{className:"fa fa-paperclip"})," Freezone Attachments"]}),e.jsx("button",{className:"modal-close",onClick:t,children:e.jsx("i",{className:"fa fa-times"})})]}),e.jsx("div",{className:"modal-body",children:i?e.jsxs("div",{className:"text-center py-4",children:[e.jsx("i",{className:"fa fa-spinner fa-spin fa-2x"}),e.jsx("p",{className:"mt-2",children:"Loading attachments..."})]}):e.jsxs(e.Fragment,{children:[e.jsxs("form",{onSubmit:j,className:"mb-4 p-3 border rounded",children:[e.jsx("h5",{className:"mb-3",children:"Upload New File"}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-4 mb-3",children:[e.jsxs("label",{className:"form-label",children:["File Type ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"text",className:"form-control",value:p,onChange:N=>y(N.target.value),placeholder:"e.g., passport, eVisa, medical",required:!0})]}),e.jsxs("div",{className:"col-md-6 mb-3",children:[e.jsxs("label",{className:"form-label",children:["File ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"file",className:"form-control",onChange:N=>m(N.target.files?.[0]||null),required:!0})]}),e.jsx("div",{className:"col-md-2 mb-3 d-flex align-items-end",children:e.jsx("button",{type:"submit",className:"btn btn-primary w-100",disabled:c,children:c?"Uploading...":"Upload"})})]})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"mb-3",children:"Attachments"}),n.length===0?e.jsx("div",{className:"alert alert-info",children:"No attachments found"}):e.jsx("div",{className:"row",children:n.map(N=>{const v=N.file_name.split(".").pop()?.toLowerCase()||"",S=["jpg","jpeg","png","gif"].includes(v),E=v==="pdf";return e.jsx("div",{className:"col-md-4 mb-3",children:e.jsx("div",{className:"card",children:e.jsxs("div",{className:"card-body text-center",children:[S?e.jsx("img",{src:Hp(N.file_name),alt:N.original_name,style:{width:"100%",height:"150px",objectFit:"cover",borderRadius:"4px"},onError:L=>{L.target.style.display="none",L.target.nextElementSibling?.classList.remove("d-none")}}):E?e.jsx("object",{data:Hp(N.file_name),type:"application/pdf",width:"100%",height:"150px",style:{borderRadius:"4px"},children:e.jsx("i",{className:`${mw(v)} fa-3x text-primary`})}):e.jsx("i",{className:`${mw(v)} fa-3x text-primary`}),e.jsx("h6",{className:"mt-2 mb-1",style:{fontSize:"0.9rem",wordBreak:"break-word"},children:N.fileType}),e.jsx("p",{className:"text-muted small mb-2",children:N.original_name}),e.jsxs("div",{className:"d-flex gap-1 justify-content-center",children:[e.jsx("a",{href:Hp(N.file_name),target:"_blank",rel:"noopener noreferrer",className:"btn btn-sm btn-primary",children:e.jsx("i",{className:"fa fa-eye"})}),e.jsx("a",{href:Hp(N.file_name),download:!0,className:"btn btn-sm btn-info",children:e.jsx("i",{className:"fa fa-download"})}),e.jsx("button",{className:"btn btn-sm btn-danger",onClick:()=>b(N.id),children:e.jsx("i",{className:"fa fa-trash"})})]})]})})},N.id)})})]})]})}),e.jsx("div",{className:"modal-footer",children:e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:t,children:"Close"})})]})}):null},YR={1:{name:"eVisa",count:0,icon:"fa fa-ticket"},"1a":{name:"eVisa (Submitted)",count:0,icon:"fa fa-file-ticket"},2:{name:"Change Status",count:0,icon:"fa fa-exchange"},3:{name:"Medical",count:0,icon:"fa fa-medkit"},4:{name:"Emirates ID",count:0,icon:"fa fa-id-card"},5:{name:"Visa Stamping",count:0,icon:"fas fa-stamp"},6:{name:"Completed",count:0,icon:"fa fa-check-circle"}};function KR(){const[s,t]=rc(),a=s.get("step")||"1",[n,r]=A.useState([]),[i,o]=A.useState(!1),[c,u]=A.useState([]),[h,m]=A.useState({}),[p,y]=A.useState({currencies:[],accounts:[],suppliers:[],customers:[],positions:[],nationalities:[]}),[g,j]=A.useState(!1),[b,N]=A.useState(!1),[v,S]=A.useState(!1),[E,L]=A.useState(!1),[z,V]=A.useState(!1),[te,q]=A.useState(!1),[B,J]=A.useState(!1),[P,K]=A.useState(!1),[H,se]=A.useState(null),[X,R]=A.useState(null),[Q,Y]=A.useState(1),[$,me]=A.useState(10);A.useEffect(()=>{U(),D()},[]),A.useEffect(()=>{console.log("useEffect triggered - currentStep:",a),le(),Y(1)},[a]);const D=async()=>{try{const ee=await fl.getLookups();console.log("Lookups API response:",ee);const Ie=Array.isArray(ee.positions)?ee.positions.map(He=>({position_id:He.position_id,posiiton_name:He.position_name||He.posiiton_name||""})):[];y({currencies:Array.isArray(ee.currencies)?ee.currencies:[],accounts:Array.isArray(ee.accounts)?ee.accounts:[],suppliers:Array.isArray(ee.suppliers)?ee.suppliers:[],customers:Array.isArray(ee.customers)?ee.customers:[],positions:Ie,nationalities:Array.isArray(ee.nationalities)?ee.nationalities:[]}),console.log("Set lookups:",{positions:Ie.length,accounts:ee.accounts?.length,suppliers:ee.suppliers?.length})}catch(ee){console.error("Error loading lookups:",ee)}},U=async()=>{try{const ee=await fl.getCompanies();console.log("Companies API response in component:",ee),console.log("Is array?",Array.isArray(ee));const Ie=Array.isArray(ee)?ee:[];console.log("Setting companies array:",Ie),console.log("Companies count:",Ie.length),Ie.length>0&&console.log("First company:",Ie[0]),u(Ie)}catch(ee){console.error("Error loading companies:",ee),W.fire("Error","Failed to load establishments. Please check console for details.","error")}},le=async()=>{o(!0);try{const ee=await fl.getTasks({step:a});if(console.log("Freezone tasks data received:",ee),ee&&ee.residences){const Ie=Array.isArray(ee.residences)?ee.residences:[];console.log("Setting residences:",Ie.length),r(Ie)}else console.log("No residences in data, setting empty array"),r([]);ee&&ee.stepCounts?(console.log("Setting stepCounts:",ee.stepCounts),m(ee.stepCounts)):m({})}catch(ee){console.error("Error loading tasks:",ee),console.error("Error response:",ee.response),r([]),m({}),W.fire("Error",ee.response?.data?.message||ee.message||"Failed to load tasks","error")}finally{o(!1)}},de=ee=>{const Ie=new URLSearchParams(s);Ie.set("step",ee),t(Ie,{replace:!1})},G=async ee=>{const Ie=n.find(He=>He.id===ee);Ie&&(console.log("Opening eVisa modal - companies:",c.length,"positions:",p.positions?.length),R(Ie),se(ee),N(!0))},je=async ee=>{const Ie=n.find(He=>He.id===ee);Ie&&(R(Ie),se(ee),S(!0))},De=async ee=>{if((await W.fire({title:"Reject eVisa",text:"Are you sure you want to reject this eVisa?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#dc3545",cancelButtonColor:"#6c757d",confirmButtonText:"Yes, reject it"})).isConfirmed)try{await fl.rejectEVisa(ee),await le(),W.fire("Success","eVisa rejected successfully","success")}catch(He){W.fire("Error",He.response?.data?.message||"Failed to reject eVisa","error")}},Pe=async ee=>{const Ie=n.find(He=>He.id===ee);Ie&&(R(Ie),se(ee),L(!0))},ke=async ee=>{const Ie=n.find(He=>He.id===ee);Ie&&(R(Ie),se(ee),V(!0))},Ye=async ee=>{const Ie=n.find(He=>He.id===ee);Ie&&(R(Ie),se(ee),q(!0))},Qe=async ee=>{const Ie=n.find(He=>He.id===ee);Ie&&(R(Ie),se(ee),J(!0))},et=async ee=>{const Ie=n.find(He=>He.id===ee);Ie&&(R(Ie),se(ee),K(!0))},Xe=Math.ceil(n.length/$),re=(Q-1)*$,ne=re+$,Se=n.slice(re,ne),Ve=ee=>{Y(ee),window.scrollTo({top:0,behavior:"smooth"})},xt=ee=>{me(ee),Y(1)};return e.jsxs("div",{className:"freezone-tasks-page",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"mb-2",style:{fontSize:"1.75rem",fontWeight:"bold",color:"#000000"},children:[e.jsx("i",{className:"fa fa-tasks me-2"}),"Residence Tasks (Freezone)"]}),e.jsx("p",{style:{color:"#000000"},children:"Manage freezone residence processing steps"})]}),e.jsx("div",{className:"d-flex gap-2",children:e.jsxs("button",{className:"btn btn-primary",onClick:()=>j(!0),children:[e.jsx("i",{className:"fa fa-plus-circle me-2"}),"Add New Residence"]})})]})}),e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"btn-group btn-group-block w-100",children:["1","1a","2","3","4","5","6"].map(ee=>{const Ie=YR[ee];return Ie?e.jsxs("button",{type:"button",className:`btn btn-white btn-block step-nav-link ${a===ee?"active":""}`,onClick:He=>{He.preventDefault(),de(ee)},children:[e.jsx("span",{children:Ie.name}),h[ee]>0&&e.jsx("span",{className:"badge bg-red ms-1",children:h[ee]})]},ee):null})})}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"mb-0",style:{color:"#1f2937",fontWeight:600},children:"Freezone Residence List"})}),e.jsxs("div",{className:"card-body",children:[i?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("i",{className:"fa fa-spinner fa-spin fa-2x",style:{color:"#9ca3af"}}),e.jsx("p",{className:"mt-2",style:{color:"#6b7280"},children:"Loading residences..."})]}):n.length===0?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{style:{color:"#6b7280"},children:"No residences found"})}):e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-striped table-bordered align-middle text-nowrap",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"ID"}),e.jsx("th",{children:"App. Date"}),e.jsx("th",{children:"Passenger"}),e.jsx("th",{children:"Customer"}),a!=="1"&&e.jsx("th",{children:"Establishment"}),e.jsx("th",{children:"Passport"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:Se.map(ee=>(console.log("Rendering residence:",ee),e.jsxs("tr",{children:[e.jsx("td",{children:ee.id}),e.jsx("td",{children:ee.datetime?new Date(ee.datetime).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"N/A"}),e.jsxs("td",{children:[e.jsx("img",{src:`https://flagpedia.net/data/flags/h24/${ee.countryCode?.toLowerCase()}.png`,alt:ee.countryName,height:"12",className:"me-2"}),e.jsx("strong",{children:(ee.passenger_name||"").toUpperCase()}),e.jsx("br",{}),e.jsx("strong",{children:"Nationality:"})," ",ee.countryName||"N/A"," (",ee.countryCode||"N/A",")",ee.uid&&ee.uid.toLowerCase()!=="outside"&&e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("strong",{children:"UID:"})," ",ee.uid]})]}),e.jsx("td",{children:ee.customer_name||"N/A"}),a!=="1"&&e.jsx("td",{children:ee.company_name||"N/A"}),e.jsxs("td",{children:["Number: ",ee.passportNumber||"N/A",e.jsx("br",{}),"Exp: ",ee.passportExpiryDate?new Date(ee.passportExpiryDate).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"N/A"]}),e.jsx("td",{children:e.jsxs("div",{className:"d-flex flex-wrap gap-1",children:[a==="1"&&e.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>G(ee.id),children:"Continue"}),a==="1a"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"btn btn-sm btn-success",onClick:()=>je(ee.id),children:"Approve"}),e.jsx("button",{className:"btn btn-sm btn-danger",onClick:()=>De(ee.id),children:"Reject"})]}),a==="2"&&e.jsx("button",{className:"btn btn-sm btn-success",onClick:()=>Pe(ee.id),children:"Continue"}),a==="3"&&e.jsx("button",{className:"btn btn-sm btn-success",onClick:()=>ke(ee.id),children:"Continue"}),a==="4"&&e.jsx("button",{className:"btn btn-sm btn-success",onClick:()=>Ye(ee.id),children:"Continue"}),a==="5"&&e.jsx("button",{className:"btn btn-sm btn-success",onClick:()=>Qe(ee.id),children:"Continue"}),e.jsx("button",{className:"btn btn-sm btn-info",onClick:()=>et(ee.id),children:e.jsx("i",{className:"fa fa-paperclip"})})]})})]},ee.id)))})]})}),!i&&n.length>0&&e.jsxs("div",{className:"pagination-container",style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"16px 20px",borderTop:"1px solid #e5e7eb",flexWrap:"wrap",gap:"12px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("span",{style:{fontSize:"14px",color:"#6b7280"},children:"Show"}),e.jsxs("select",{value:$,onChange:ee=>xt(Number(ee.target.value)),style:{padding:"6px 10px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px",backgroundColor:"#ffffff",cursor:"pointer"},children:[e.jsx("option",{value:5,children:"5"}),e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:25,children:"25"}),e.jsx("option",{value:50,children:"50"}),e.jsx("option",{value:100,children:"100"})]}),e.jsxs("span",{style:{fontSize:"14px",color:"#6b7280"},children:["entries (Showing ",re+1,"-",Math.min(ne,n.length)," of ",n.length,")"]})]}),e.jsxs("div",{style:{display:"flex",gap:"4px",alignItems:"center"},children:[e.jsx("button",{onClick:()=>Ve(1),disabled:Q===1,style:{padding:"6px 12px",border:"1px solid #d1d5db",borderRadius:"6px",backgroundColor:Q===1?"#f3f4f6":"#ffffff",cursor:Q===1?"not-allowed":"pointer",fontSize:"14px",color:Q===1?"#9ca3af":"#374151"},children:e.jsx("i",{className:"fa fa-angle-double-left"})}),e.jsx("button",{onClick:()=>Ve(Q-1),disabled:Q===1,style:{padding:"6px 12px",border:"1px solid #d1d5db",borderRadius:"6px",backgroundColor:Q===1?"#f3f4f6":"#ffffff",cursor:Q===1?"not-allowed":"pointer",fontSize:"14px",color:Q===1?"#9ca3af":"#374151"},children:e.jsx("i",{className:"fa fa-angle-left"})}),Array.from({length:Math.min(5,Xe)},(ee,Ie)=>{let He;return Xe<=5||Q<=3?He=Ie+1:Q>=Xe-2?He=Xe-4+Ie:He=Q-2+Ie,e.jsx("button",{onClick:()=>Ve(He),style:{padding:"6px 12px",border:"1px solid #d1d5db",borderRadius:"6px",backgroundColor:Q===He?"#000000":"#ffffff",color:Q===He?"#ffffff":"#374151",cursor:"pointer",fontSize:"14px",fontWeight:Q===He?"600":"400",minWidth:"36px"},children:He},He)}),e.jsx("button",{onClick:()=>Ve(Q+1),disabled:Q===Xe,style:{padding:"6px 12px",border:"1px solid #d1d5db",borderRadius:"6px",backgroundColor:Q===Xe?"#f3f4f6":"#ffffff",cursor:Q===Xe?"not-allowed":"pointer",fontSize:"14px",color:Q===Xe?"#9ca3af":"#374151"},children:e.jsx("i",{className:"fa fa-angle-right"})}),e.jsx("button",{onClick:()=>Ve(Xe),disabled:Q===Xe,style:{padding:"6px 12px",border:"1px solid #d1d5db",borderRadius:"6px",backgroundColor:Q===Xe?"#f3f4f6":"#ffffff",cursor:Q===Xe?"not-allowed":"pointer",fontSize:"14px",color:Q===Xe?"#9ca3af":"#374151"},children:e.jsx("i",{className:"fa fa-angle-double-right"})})]})]})]})]}),e.jsx(zR,{isOpen:b,onClose:()=>{N(!1),se(null),R(null)},residenceId:H,onSuccess:le,companies:c||[],positions:p.positions||[],accounts:p.accounts||[],suppliers:p.suppliers||[],currencies:p.currencies||[],residence:X}),e.jsx(qR,{isOpen:v,onClose:()=>{S(!1),se(null),R(null)},residenceId:H,onSuccess:le}),e.jsx(UR,{isOpen:E,onClose:()=>{L(!1),se(null),R(null)},residenceId:H,onSuccess:le,companies:c||[],positions:p.positions||[],accounts:p.accounts||[],suppliers:p.suppliers||[],currencies:p.currencies||[]}),e.jsx(HR,{isOpen:z,onClose:()=>{V(!1),se(null),R(null)},residenceId:H,onSuccess:le,companies:c||[],positions:p.positions||[],accounts:p.accounts||[],suppliers:p.suppliers||[],currencies:p.currencies||[]}),e.jsx($R,{isOpen:te,onClose:()=>{q(!1),se(null),R(null)},residenceId:H,onSuccess:le,companies:c||[],positions:p.positions||[],accounts:p.accounts||[],suppliers:p.suppliers||[],currencies:p.currencies||[]}),e.jsx(VR,{isOpen:B,onClose:()=>{J(!1),se(null),R(null)},residenceId:H,onSuccess:le,companies:c||[],positions:p.positions||[],accounts:p.accounts||[],suppliers:p.suppliers||[]}),e.jsx(WR,{isOpen:P,onClose:()=>{K(!1),se(null),R(null)},residenceId:H})]})}const XR={async getEstablishments(s={}){const t=new FormData;s.companyName&&t.append("companyName",s.companyName),s.companyType&&t.append("companyType",s.companyType),s.localName&&t.append("localName",s.localName),t.append("page",(s.page||1).toString()),t.append("limit",(s.limit||10).toString());const a=await Ne.post("/establishments/get-establishments.php",t,{headers:{"Content-Type":"multipart/form-data"}});if(console.log("Raw API Response:",a.data),a.data.success){if(Array.isArray(a.data.data))return{data:a.data.data,pagination:a.data.pagination||{currentPage:1,totalPages:1,totalRecords:a.data.data.length,recordsPerPage:10},statistics:a.data.statistics||{totalEstablishments:0,totalEmployees:0,totalQuota:0,availableQuota:0},localNames:a.data.localNames||[]};if(a.data.data&&typeof a.data.data=="object"&&!Array.isArray(a.data.data))return a.data.data}throw new Error(a.data.message||"Failed to fetch establishments")}};function rA({embedded:s=!1}){const t=Vn(),[a,n]=rc(),[r,i]=A.useState([]),[o,c]=A.useState(!1),[u,h]=A.useState({totalEstablishments:0,totalEmployees:0,totalQuota:0,availableQuota:0}),[m,p]=A.useState([]),[y,g]=A.useState(a.get("companyName")||""),[j,b]=A.useState(a.get("companyType")||""),[N,v]=A.useState(a.get("localName")||""),[S,E]=A.useState(parseInt(a.get("page")||"1")),[L,z]=A.useState(1),[V,te]=A.useState(0),q=10;A.useEffect(()=>{B()},[S,y,j,N]);const B=async()=>{c(!0);try{const R={companyName:y||void 0,companyType:j||void 0,localName:N||void 0,page:S,limit:q},Q=await XR.getEstablishments(R);console.log("Establishments API Response:",Q),Q&&Q.data?(i(Q.data||[]),h(Q.statistics||{totalEstablishments:0,totalEmployees:0,totalQuota:0,availableQuota:0}),p(Q.localNames||[]),Q.pagination?(z(Q.pagination.totalPages||1),te(Q.pagination.totalRecords||0)):(z(1),te(Q.data?.length||0))):(i([]),h({totalEstablishments:0,totalEmployees:0,totalQuota:0,availableQuota:0}),p([]),z(1),te(0));const Y=new URLSearchParams;y&&Y.set("companyName",y),j&&Y.set("companyType",j),N&&Y.set("localName",N),S>1&&Y.set("page",S.toString()),n(Y)}catch(R){console.error("Error loading establishments:",R),console.error("Error details:",R.response?.data),W.fire("Error",R.message||"Failed to load establishments","error"),i([]),h({totalEstablishments:0,totalEmployees:0,totalQuota:0,availableQuota:0}),p([]),z(1),te(0)}finally{c(!1)}},J=R=>{R.preventDefault(),E(1),B()},P=R=>{R>=1&&R<=L&&E(R)},K=R=>{t(`/establishments/${R}/employees`)},H=()=>{t("/establishments/manage")},se=R=>{if(!R)return"N/A";try{return new Date(R).toLocaleDateString("en-US",{month:"short",day:"2-digit",year:"numeric"})}catch{return"N/A"}},X=R=>R.toLocaleString();return e.jsx("div",{className:"establishments-page",children:e.jsxs("div",{className:"container-fluid",children:[e.jsxs("div",{className:"row mb-4",children:[e.jsx("div",{className:"col-md-5",children:e.jsx("h3",{children:"Establishments"})}),!s&&e.jsx("div",{className:"col-md-7 text-end",children:e.jsx("button",{className:"btn btn-success",onClick:H,children:"Manage Establishments"})})]}),e.jsxs("div",{className:"row mb-4",children:[e.jsx("div",{className:"col-md-3 mb-3",children:e.jsxs("div",{className:"widget widget-stats bg-blue",children:[e.jsx("div",{className:"stats-icon",children:e.jsx("i",{className:"fa fa-building"})}),e.jsxs("div",{className:"stats-info",children:[e.jsx("h4",{children:"TOTAL ESTABLISHMENTS"}),e.jsx("p",{id:"totalCompanies",children:X(u.totalEstablishments)})]})]})}),e.jsx("div",{className:"col-md-3 mb-3",children:e.jsxs("div",{className:"widget widget-stats bg-red",children:[e.jsx("div",{className:"stats-icon",children:e.jsx("i",{className:"fa fa-users"})}),e.jsxs("div",{className:"stats-info",children:[e.jsx("h4",{children:"TOTAL EMPLOYEES"}),e.jsx("p",{id:"totalEmployees",children:X(u.totalEmployees)})]})]})}),e.jsx("div",{className:"col-md-3 mb-3",children:e.jsxs("div",{className:"widget widget-stats bg-purple",children:[e.jsx("div",{className:"stats-icon",children:e.jsx("i",{className:"fa fa-address-card"})}),e.jsxs("div",{className:"stats-info",children:[e.jsx("h4",{children:"TOTAL QUOTA"}),e.jsx("p",{id:"totalQuota",children:X(u.totalQuota)})]})]})}),e.jsx("div",{className:"col-md-3 mb-3",children:e.jsxs("div",{className:"widget widget-stats bg-green",children:[e.jsx("div",{className:"stats-icon",children:e.jsx("i",{className:"fa fa-at"})}),e.jsxs("div",{className:"stats-info",children:[e.jsx("h4",{children:"AVAILABLE QUOTA"}),e.jsx("p",{id:"availableQuota",children:X(u.availableQuota)})]})]})})]}),e.jsx("form",{onSubmit:J,className:"mb-4",children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-3",children:[e.jsx("label",{className:"form-label",htmlFor:"companyName",children:"Company Name"}),e.jsx("input",{type:"text",name:"companyName",id:"companyName",className:"form-control",placeholder:"Enter Company Name",value:y,onChange:R=>g(R.target.value)})]}),e.jsxs("div",{className:"col-md-3",children:[e.jsxs("label",{className:"form-label",htmlFor:"companyType",children:["Company Type ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("select",{name:"companyType",id:"companyType",className:"form-select",value:j,onChange:R=>b(R.target.value),children:[e.jsx("option",{value:"",children:"All Types"}),e.jsx("option",{value:"Mainland",children:"Mainland"}),e.jsx("option",{value:"Freezone",children:"Freezone"})]})]}),e.jsxs("div",{className:"col-md-3",children:[e.jsx("label",{className:"form-label",htmlFor:"localName",children:"Local name"}),e.jsxs("select",{name:"localName",id:"localName",className:"form-select",value:N,onChange:R=>v(R.target.value),children:[e.jsx("option",{value:"",children:"Select Local Name"}),m.map((R,Q)=>e.jsx("option",{value:R.local_name?btoa(R.local_name):"",children:R.local_name},Q))]})]}),e.jsxs("div",{className:"col-md-1",children:[e.jsx("label",{htmlFor:"submit",children:""}),e.jsx("button",{type:"submit",id:"submit",className:"btn btn-primary w-100",children:"Filter"})]})]})}),o?e.jsxs("div",{className:"text-center py-5",children:[e.jsx("i",{className:"fa fa-spinner fa-spin fa-3x"}),e.jsx("p",{className:"mt-3",children:"Loading establishments..."})]}):r.length===0?e.jsx("div",{className:"text-center py-5",children:e.jsx("p",{className:"text-muted",children:"No establishments found"})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"row",children:r.map(R=>{const Q=R.starting_quota-R.totalEmployees;return e.jsx("div",{className:"col-sm-6 mb-3",children:e.jsx("div",{className:"card",children:e.jsxs("div",{className:"card-body",children:[e.jsx("h5",{className:"mb-0",children:R.company_name}),e.jsxs("p",{className:"mb-0",children:[e.jsx("i",{className:"fa fa-building"})," ",R.company_type]}),e.jsxs("div",{className:"row mt-3",children:[e.jsxs("div",{className:"col-md-3",children:[e.jsx("strong",{children:"Employees"}),e.jsx("br",{}),R.totalEmployees]}),e.jsxs("div",{className:"col-md-3",children:[e.jsx("strong",{children:"A. Quota"}),e.jsx("br",{}),Q]}),e.jsxs("div",{className:"col-md-3",children:[e.jsx("strong",{children:"Expiry Date"}),e.jsx("br",{}),se(R.company_expiry)]}),e.jsxs("div",{className:"col-md-3",children:[e.jsx("strong",{children:"Code"}),e.jsx("br",{}),R.company_number]})]}),e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-md-12 mt-4",children:e.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>K(R.company_id),children:"View Employees"})})})]})})},R.company_id)})}),L>1&&e.jsx("nav",{"aria-label":"Page navigation",className:"custom-pagination mt-4 mb-4",children:e.jsxs("ul",{className:"pagination justify-content-center",children:[S>1&&e.jsx("li",{className:"page-item",children:e.jsx("button",{className:"page-link",onClick:()=>P(S-1),children:" Previous"})}),Array.from({length:L},(R,Q)=>Q+1).map(R=>e.jsx("li",{className:`page-item ${S===R?"active":""}`,children:e.jsx("button",{className:"page-link",onClick:()=>P(R),children:R})},R)),S<L&&e.jsx("li",{className:"page-item",children:e.jsx("button",{className:"page-link",onClick:()=>P(S+1),children:"Next "})})]})})]})]})})}const GR="modulepreload",QR=function(s){return"/"+s},pw={},og=function(t,a,n){let r=Promise.resolve();if(a&&a.length>0){let u=function(h){return Promise.all(h.map(m=>Promise.resolve(m).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),c=o?.nonce||o?.getAttribute("nonce");r=u(a.map(h=>{if(h=QR(h),h in pw)return;pw[h]=!0;const m=h.endsWith(".css"),p=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${p}`))return;const y=document.createElement("link");if(y.rel=m?"stylesheet":GR,m||(y.as="script"),y.crossOrigin="",y.href=h,c&&y.setAttribute("nonce",c),document.head.appendChild(y),m)return new Promise((g,j)=>{y.addEventListener("load",g),y.addEventListener("error",()=>j(new Error(`Unable to preload CSS for ${h}`)))})}))}function i(o){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=o,window.dispatchEvent(c),!c.defaultPrevented)throw o}return r.then(o=>{for(const c of o||[])c.status==="rejected"&&i(c.reason);return t().catch(i)})};function va(s){"@babel/helpers - typeof";return va=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},va(s)}var jo=Uint8Array,ml=Uint16Array,f0=Int32Array,m0=new jo([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),p0=new jo([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),gw=new jo([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),iA=function(s,t){for(var a=new ml(31),n=0;n<31;++n)a[n]=t+=1<<s[n-1];for(var r=new f0(a[30]),n=1;n<30;++n)for(var i=a[n];i<a[n+1];++i)r[i]=i-a[n]<<5|n;return{b:a,r}},lA=iA(m0,2),JR=lA.b,sv=lA.r;JR[28]=258,sv[258]=28;var ZR=iA(p0,0),xw=ZR.r,av=new ml(32768);for(var $a=0;$a<32768;++$a){var Pd=($a&43690)>>1|($a&21845)<<1;Pd=(Pd&52428)>>2|(Pd&13107)<<2,Pd=(Pd&61680)>>4|(Pd&3855)<<4,av[$a]=((Pd&65280)>>8|(Pd&255)<<8)>>1}var em=(function(s,t,a){for(var n=s.length,r=0,i=new ml(t);r<n;++r)s[r]&&++i[s[r]-1];var o=new ml(t);for(r=1;r<t;++r)o[r]=o[r-1]+i[r-1]<<1;var c;if(a){c=new ml(1<<t);var u=15-t;for(r=0;r<n;++r)if(s[r])for(var h=r<<4|s[r],m=t-s[r],p=o[s[r]-1]++<<m,y=p|(1<<m)-1;p<=y;++p)c[av[p]>>u]=h}else for(c=new ml(n),r=0;r<n;++r)s[r]&&(c[r]=av[o[s[r]-1]++]>>15-s[r]);return c}),qu=new jo(288);for(var $a=0;$a<144;++$a)qu[$a]=8;for(var $a=144;$a<256;++$a)qu[$a]=9;for(var $a=256;$a<280;++$a)qu[$a]=7;for(var $a=280;$a<288;++$a)qu[$a]=8;var Rg=new jo(32);for(var $a=0;$a<32;++$a)Rg[$a]=5;var e7=em(qu,9,0),t7=em(Rg,5,0),oA=function(s){return(s+7)/8|0},s7=function(s,t,a){return(a==null||a>s.length)&&(a=s.length),new jo(s.subarray(t,a))},Uc=function(s,t,a){a<<=t&7;var n=t/8|0;s[n]|=a,s[n+1]|=a>>8},zf=function(s,t,a){a<<=t&7;var n=t/8|0;s[n]|=a,s[n+1]|=a>>8,s[n+2]|=a>>16},sy=function(s,t){for(var a=[],n=0;n<s.length;++n)s[n]&&a.push({s:n,f:s[n]});var r=a.length,i=a.slice();if(!r)return{t:dA,l:0};if(r==1){var o=new jo(a[0].s+1);return o[a[0].s]=1,{t:o,l:1}}a.sort(function(z,V){return z.f-V.f}),a.push({s:-1,f:25001});var c=a[0],u=a[1],h=0,m=1,p=2;for(a[0]={s:-1,f:c.f+u.f,l:c,r:u};m!=r-1;)c=a[a[h].f<a[p].f?h++:p++],u=a[h!=m&&a[h].f<a[p].f?h++:p++],a[m++]={s:-1,f:c.f+u.f,l:c,r:u};for(var y=i[0].s,n=1;n<r;++n)i[n].s>y&&(y=i[n].s);var g=new ml(y+1),j=nv(a[m-1],g,0);if(j>t){var n=0,b=0,N=j-t,v=1<<N;for(i.sort(function(V,te){return g[te.s]-g[V.s]||V.f-te.f});n<r;++n){var S=i[n].s;if(g[S]>t)b+=v-(1<<j-g[S]),g[S]=t;else break}for(b>>=N;b>0;){var E=i[n].s;g[E]<t?b-=1<<t-g[E]++-1:++n}for(;n>=0&&b;--n){var L=i[n].s;g[L]==t&&(--g[L],++b)}j=t}return{t:new jo(g),l:j}},nv=function(s,t,a){return s.s==-1?Math.max(nv(s.l,t,a+1),nv(s.r,t,a+1)):t[s.s]=a},bw=function(s){for(var t=s.length;t&&!s[--t];);for(var a=new ml(++t),n=0,r=s[0],i=1,o=function(u){a[n++]=u},c=1;c<=t;++c)if(s[c]==r&&c!=t)++i;else{if(!r&&i>2){for(;i>138;i-=138)o(32754);i>2&&(o(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(o(r),--i;i>6;i-=6)o(8304);i>2&&(o(i-3<<5|8208),i=0)}for(;i--;)o(r);i=1,r=s[c]}return{c:a.subarray(0,n),n:t}},qf=function(s,t){for(var a=0,n=0;n<t.length;++n)a+=s[n]*t[n];return a},cA=function(s,t,a){var n=a.length,r=oA(t+2);s[r]=n&255,s[r+1]=n>>8,s[r+2]=s[r]^255,s[r+3]=s[r+1]^255;for(var i=0;i<n;++i)s[r+i+4]=a[i];return(r+4+n)*8},yw=function(s,t,a,n,r,i,o,c,u,h,m){Uc(t,m++,a),++r[256];for(var p=sy(r,15),y=p.t,g=p.l,j=sy(i,15),b=j.t,N=j.l,v=bw(y),S=v.c,E=v.n,L=bw(b),z=L.c,V=L.n,te=new ml(19),q=0;q<S.length;++q)++te[S[q]&31];for(var q=0;q<z.length;++q)++te[z[q]&31];for(var B=sy(te,7),J=B.t,P=B.l,K=19;K>4&&!J[gw[K-1]];--K);var H=h+5<<3,se=qf(r,qu)+qf(i,Rg)+o,X=qf(r,y)+qf(i,b)+o+14+3*K+qf(te,J)+2*te[16]+3*te[17]+7*te[18];if(u>=0&&H<=se&&H<=X)return cA(t,m,s.subarray(u,u+h));var R,Q,Y,$;if(Uc(t,m,1+(X<se)),m+=2,X<se){R=em(y,g,0),Q=y,Y=em(b,N,0),$=b;var me=em(J,P,0);Uc(t,m,E-257),Uc(t,m+5,V-1),Uc(t,m+10,K-4),m+=14;for(var q=0;q<K;++q)Uc(t,m+3*q,J[gw[q]]);m+=3*K;for(var D=[S,z],U=0;U<2;++U)for(var le=D[U],q=0;q<le.length;++q){var de=le[q]&31;Uc(t,m,me[de]),m+=J[de],de>15&&(Uc(t,m,le[q]>>5&127),m+=le[q]>>12)}}else R=e7,Q=qu,Y=t7,$=Rg;for(var q=0;q<c;++q){var G=n[q];if(G>255){var de=G>>18&31;zf(t,m,R[de+257]),m+=Q[de+257],de>7&&(Uc(t,m,G>>23&31),m+=m0[de]);var je=G&31;zf(t,m,Y[je]),m+=$[je],je>3&&(zf(t,m,G>>5&8191),m+=p0[je])}else zf(t,m,R[G]),m+=Q[G]}return zf(t,m,R[256]),m+Q[256]},a7=new f0([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),dA=new jo(0),n7=function(s,t,a,n,r,i){var o=i.z||s.length,c=new jo(n+o+5*(1+Math.ceil(o/7e3))+r),u=c.subarray(n,c.length-r),h=i.l,m=(i.r||0)&7;if(t){m&&(u[0]=i.r>>3);for(var p=a7[t-1],y=p>>13,g=p&8191,j=(1<<a)-1,b=i.p||new ml(32768),N=i.h||new ml(j+1),v=Math.ceil(a/3),S=2*v,E=function(re){return(s[re]^s[re+1]<<v^s[re+2]<<S)&j},L=new f0(25e3),z=new ml(288),V=new ml(32),te=0,q=0,B=i.i||0,J=0,P=i.w||0,K=0;B+2<o;++B){var H=E(B),se=B&32767,X=N[H];if(b[se]=X,N[H]=se,P<=B){var R=o-B;if((te>7e3||J>24576)&&(R>423||!h)){m=yw(s,u,0,L,z,V,q,J,K,B-K,m),J=te=q=0,K=B;for(var Q=0;Q<286;++Q)z[Q]=0;for(var Q=0;Q<30;++Q)V[Q]=0}var Y=2,$=0,me=g,D=se-X&32767;if(R>2&&H==E(B-D))for(var U=Math.min(y,R)-1,le=Math.min(32767,B),de=Math.min(258,R);D<=le&&--me&&se!=X;){if(s[B+Y]==s[B+Y-D]){for(var G=0;G<de&&s[B+G]==s[B+G-D];++G);if(G>Y){if(Y=G,$=D,G>U)break;for(var je=Math.min(D,G-2),De=0,Q=0;Q<je;++Q){var Pe=B-D+Q&32767,ke=b[Pe],Ye=Pe-ke&32767;Ye>De&&(De=Ye,X=Pe)}}}se=X,X=b[se],D+=se-X&32767}if($){L[J++]=268435456|sv[Y]<<18|xw[$];var Qe=sv[Y]&31,et=xw[$]&31;q+=m0[Qe]+p0[et],++z[257+Qe],++V[et],P=B+Y,++te}else L[J++]=s[B],++z[s[B]]}}for(B=Math.max(B,P);B<o;++B)L[J++]=s[B],++z[s[B]];m=yw(s,u,h,L,z,V,q,J,K,B-K,m),h||(i.r=m&7|u[m/8|0]<<3,m-=7,i.h=N,i.p=b,i.i=B,i.w=P)}else{for(var B=i.w||0;B<o+h;B+=65535){var Xe=B+65535;Xe>=o&&(u[m/8|0]=h,Xe=o),m=cA(u,m+1,s.subarray(B,Xe))}i.i=o}return s7(c,0,n+oA(m)+r)},uA=function(){var s=1,t=0;return{p:function(a){for(var n=s,r=t,i=a.length|0,o=0;o!=i;){for(var c=Math.min(o+2655,i);o<c;++o)r+=n+=a[o];n=(n&65535)+15*(n>>16),r=(r&65535)+15*(r>>16)}s=n,t=r},d:function(){return s%=65521,t%=65521,(s&255)<<24|(s&65280)<<8|(t&255)<<8|t>>8}}},r7=function(s,t,a,n,r){if(!r&&(r={l:1},t.dictionary)){var i=t.dictionary.subarray(-32768),o=new jo(i.length+s.length);o.set(i),o.set(s,i.length),s=o,r.w=i.length}return n7(s,t.level==null?6:t.level,t.mem==null?r.l?Math.ceil(Math.max(8,Math.min(13,Math.log(s.length)))*1.5):20:12+t.mem,a,n,r)},hA=function(s,t,a){for(;a;++t)s[t]=a,a>>>=8},i7=function(s,t){var a=t.level,n=a==0?0:a<6?1:a==9?3:2;if(s[0]=120,s[1]=n<<6|(t.dictionary&&32),s[1]|=31-(s[0]<<8|s[1])%31,t.dictionary){var r=uA();r.p(t.dictionary),hA(s,2,r.d())}};function rv(s,t){t||(t={});var a=uA();a.p(s);var n=r7(s,t,t.dictionary?6:2,4);return i7(n,t),hA(n,n.length-4,a.d()),n}var l7=typeof TextDecoder<"u"&&new TextDecoder,o7=0;try{l7.decode(dA,{stream:!0}),o7=1}catch{}function c7(s){if(Array.isArray(s))return s}function d7(s,t){var a=s==null?null:typeof Symbol<"u"&&s[Symbol.iterator]||s["@@iterator"];if(a!=null){var n,r,i,o,c=[],u=!0,h=!1;try{if(i=(a=a.call(s)).next,t!==0)for(;!(u=(n=i.call(a)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(m){h=!0,r=m}finally{try{if(!u&&a.return!=null&&(o=a.return(),Object(o)!==o))return}finally{if(h)throw r}}return c}}function vw(s,t){(t==null||t>s.length)&&(t=s.length);for(var a=0,n=Array(t);a<t;a++)n[a]=s[a];return n}function u7(s,t){if(s){if(typeof s=="string")return vw(s,t);var a={}.toString.call(s).slice(8,-1);return a==="Object"&&s.constructor&&(a=s.constructor.name),a==="Map"||a==="Set"?Array.from(s):a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?vw(s,t):void 0}}function h7(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jw(s,t){return c7(s)||d7(s,t)||u7(s,t)||h7()}function Nw(s,t="utf8"){return new TextDecoder(t).decode(s)}const f7=new TextEncoder;function m7(s){return f7.encode(s)}const p7=1024*8,g7=(()=>{const s=new Uint8Array(4),t=new Uint32Array(s.buffer);return!((t[0]=1)&s[0])})(),ay={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class g0{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(t=p7,a={}){let n=!1;typeof t=="number"?t=new ArrayBuffer(t):(n=!0,this.lastWrittenByte=t.byteLength);const r=a.offset?a.offset>>>0:0,i=t.byteLength-r;let o=r;(ArrayBuffer.isView(t)||t instanceof g0)&&(t.byteLength!==t.buffer.byteLength&&(o=t.byteOffset+r),t=t.buffer),n?this.lastWrittenByte=i:this.lastWrittenByte=0,this.buffer=t,this.length=i,this.byteLength=i,this.byteOffset=o,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,o,i),this._mark=0,this._marks=[]}available(t=1){return this.offset+t<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(t=1){return this.offset+=t,this}back(t=1){return this.offset-=t,this}seek(t){return this.offset=t,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const t=this._marks.pop();if(t===void 0)throw new Error("Mark stack empty");return this.seek(t),this}rewind(){return this.offset=0,this}ensureAvailable(t=1){if(!this.available(t)){const n=(this.offset+t)*2,r=new Uint8Array(n);r.set(new Uint8Array(this.buffer)),this.buffer=r.buffer,this.length=n,this.byteLength=n,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(t=1){return this.readArray(t,"uint8")}readArray(t,a){const n=ay[a].BYTES_PER_ELEMENT*t,r=this.byteOffset+this.offset,i=this.buffer.slice(r,r+n);if(this.littleEndian===g7&&a!=="uint8"&&a!=="int8"){const c=new Uint8Array(this.buffer.slice(r,r+n));c.reverse();const u=new ay[a](c.buffer);return this.offset+=n,u.reverse(),u}const o=new ay[a](i);return this.offset+=n,o}readInt16(){const t=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,t}readUint16(){const t=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,t}readInt32(){const t=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,t}readUint32(){const t=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat32(){const t=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat64(){const t=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,t}readBigInt64(){const t=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,t}readBigUint64(){const t=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,t}readChar(){return String.fromCharCode(this.readInt8())}readChars(t=1){let a="";for(let n=0;n<t;n++)a+=this.readChar();return a}readUtf8(t=1){return Nw(this.readBytes(t))}decodeText(t=1,a="utf8"){return Nw(this.readBytes(t),a)}writeBoolean(t){return this.writeUint8(t?255:0),this}writeInt8(t){return this.ensureAvailable(1),this._data.setInt8(this.offset++,t),this._updateLastWrittenByte(),this}writeUint8(t){return this.ensureAvailable(1),this._data.setUint8(this.offset++,t),this._updateLastWrittenByte(),this}writeByte(t){return this.writeUint8(t)}writeBytes(t){this.ensureAvailable(t.length);for(let a=0;a<t.length;a++)this._data.setUint8(this.offset++,t[a]);return this._updateLastWrittenByte(),this}writeInt16(t){return this.ensureAvailable(2),this._data.setInt16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(t){return this.ensureAvailable(2),this._data.setUint16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(t){return this.ensureAvailable(4),this._data.setInt32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(t){return this.ensureAvailable(4),this._data.setUint32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(t){return this.ensureAvailable(4),this._data.setFloat32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(t){return this.ensureAvailable(8),this._data.setFloat64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(t){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(t){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(t){return this.writeUint8(t.charCodeAt(0))}writeChars(t){for(let a=0;a<t.length;a++)this.writeUint8(t.charCodeAt(a));return this}writeUtf8(t){return this.writeBytes(m7(t))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function sf(s){let t=s.length;for(;--t>=0;)s[t]=0}const x7=3,b7=258,fA=29,y7=256,v7=y7+1+fA,mA=30,j7=512,N7=new Array((v7+2)*2);sf(N7);const w7=new Array(mA*2);sf(w7);const _7=new Array(j7);sf(_7);const S7=new Array(b7-x7+1);sf(S7);const C7=new Array(fA);sf(C7);const A7=new Array(mA);sf(A7);const k7=(s,t,a,n)=>{let r=s&65535|0,i=s>>>16&65535|0,o=0;for(;a!==0;){o=a>2e3?2e3:a,a-=o;do r=r+t[n++]|0,i=i+r|0;while(--o);r%=65521,i%=65521}return r|i<<16|0};var iv=k7;const D7=()=>{let s,t=[];for(var a=0;a<256;a++){s=a;for(var n=0;n<8;n++)s=s&1?3988292384^s>>>1:s>>>1;t[a]=s}return t},E7=new Uint32Array(D7()),T7=(s,t,a,n)=>{const r=E7,i=n+a;s^=-1;for(let o=n;o<i;o++)s=s>>>8^r[(s^t[o])&255];return s^-1};var Xo=T7,lv={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},pA={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const L7=(s,t)=>Object.prototype.hasOwnProperty.call(s,t);var P7=function(s){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const a=t.shift();if(a){if(typeof a!="object")throw new TypeError(a+"must be non-object");for(const n in a)L7(a,n)&&(s[n]=a[n])}}return s},F7=s=>{let t=0;for(let n=0,r=s.length;n<r;n++)t+=s[n].length;const a=new Uint8Array(t);for(let n=0,r=0,i=s.length;n<i;n++){let o=s[n];a.set(o,r),r+=o.length}return a},gA={assign:P7,flattenChunks:F7};let xA=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{xA=!1}const hm=new Uint8Array(256);for(let s=0;s<256;s++)hm[s]=s>=252?6:s>=248?5:s>=240?4:s>=224?3:s>=192?2:1;hm[254]=hm[254]=1;var I7=s=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(s);let t,a,n,r,i,o=s.length,c=0;for(r=0;r<o;r++)a=s.charCodeAt(r),(a&64512)===55296&&r+1<o&&(n=s.charCodeAt(r+1),(n&64512)===56320&&(a=65536+(a-55296<<10)+(n-56320),r++)),c+=a<128?1:a<2048?2:a<65536?3:4;for(t=new Uint8Array(c),i=0,r=0;i<c;r++)a=s.charCodeAt(r),(a&64512)===55296&&r+1<o&&(n=s.charCodeAt(r+1),(n&64512)===56320&&(a=65536+(a-55296<<10)+(n-56320),r++)),a<128?t[i++]=a:a<2048?(t[i++]=192|a>>>6,t[i++]=128|a&63):a<65536?(t[i++]=224|a>>>12,t[i++]=128|a>>>6&63,t[i++]=128|a&63):(t[i++]=240|a>>>18,t[i++]=128|a>>>12&63,t[i++]=128|a>>>6&63,t[i++]=128|a&63);return t};const O7=(s,t)=>{if(t<65534&&s.subarray&&xA)return String.fromCharCode.apply(null,s.length===t?s:s.subarray(0,t));let a="";for(let n=0;n<t;n++)a+=String.fromCharCode(s[n]);return a};var M7=(s,t)=>{const a=t||s.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(s.subarray(0,t));let n,r;const i=new Array(a*2);for(r=0,n=0;n<a;){let o=s[n++];if(o<128){i[r++]=o;continue}let c=hm[o];if(c>4){i[r++]=65533,n+=c-1;continue}for(o&=c===2?31:c===3?15:7;c>1&&n<a;)o=o<<6|s[n++]&63,c--;if(c>1){i[r++]=65533;continue}o<65536?i[r++]=o:(o-=65536,i[r++]=55296|o>>10&1023,i[r++]=56320|o&1023)}return O7(i,r)},R7=(s,t)=>{t=t||s.length,t>s.length&&(t=s.length);let a=t-1;for(;a>=0&&(s[a]&192)===128;)a--;return a<0||a===0?t:a+hm[s[a]]>t?a:t},ov={string2buf:I7,buf2string:M7,utf8border:R7};function B7(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var z7=B7;const $p=16209,q7=16191;var U7=function(t,a){let n,r,i,o,c,u,h,m,p,y,g,j,b,N,v,S,E,L,z,V,te,q,B,J;const P=t.state;n=t.next_in,B=t.input,r=n+(t.avail_in-5),i=t.next_out,J=t.output,o=i-(a-t.avail_out),c=i+(t.avail_out-257),u=P.dmax,h=P.wsize,m=P.whave,p=P.wnext,y=P.window,g=P.hold,j=P.bits,b=P.lencode,N=P.distcode,v=(1<<P.lenbits)-1,S=(1<<P.distbits)-1;e:do{j<15&&(g+=B[n++]<<j,j+=8,g+=B[n++]<<j,j+=8),E=b[g&v];t:for(;;){if(L=E>>>24,g>>>=L,j-=L,L=E>>>16&255,L===0)J[i++]=E&65535;else if(L&16){z=E&65535,L&=15,L&&(j<L&&(g+=B[n++]<<j,j+=8),z+=g&(1<<L)-1,g>>>=L,j-=L),j<15&&(g+=B[n++]<<j,j+=8,g+=B[n++]<<j,j+=8),E=N[g&S];s:for(;;){if(L=E>>>24,g>>>=L,j-=L,L=E>>>16&255,L&16){if(V=E&65535,L&=15,j<L&&(g+=B[n++]<<j,j+=8,j<L&&(g+=B[n++]<<j,j+=8)),V+=g&(1<<L)-1,V>u){t.msg="invalid distance too far back",P.mode=$p;break e}if(g>>>=L,j-=L,L=i-o,V>L){if(L=V-L,L>m&&P.sane){t.msg="invalid distance too far back",P.mode=$p;break e}if(te=0,q=y,p===0){if(te+=h-L,L<z){z-=L;do J[i++]=y[te++];while(--L);te=i-V,q=J}}else if(p<L){if(te+=h+p-L,L-=p,L<z){z-=L;do J[i++]=y[te++];while(--L);if(te=0,p<z){L=p,z-=L;do J[i++]=y[te++];while(--L);te=i-V,q=J}}}else if(te+=p-L,L<z){z-=L;do J[i++]=y[te++];while(--L);te=i-V,q=J}for(;z>2;)J[i++]=q[te++],J[i++]=q[te++],J[i++]=q[te++],z-=3;z&&(J[i++]=q[te++],z>1&&(J[i++]=q[te++]))}else{te=i-V;do J[i++]=J[te++],J[i++]=J[te++],J[i++]=J[te++],z-=3;while(z>2);z&&(J[i++]=J[te++],z>1&&(J[i++]=J[te++]))}}else if((L&64)===0){E=N[(E&65535)+(g&(1<<L)-1)];continue s}else{t.msg="invalid distance code",P.mode=$p;break e}break}}else if((L&64)===0){E=b[(E&65535)+(g&(1<<L)-1)];continue t}else if(L&32){P.mode=q7;break e}else{t.msg="invalid literal/length code",P.mode=$p;break e}break}}while(n<r&&i<c);z=j>>3,n-=z,j-=z<<3,g&=(1<<j)-1,t.next_in=n,t.next_out=i,t.avail_in=n<r?5+(r-n):5-(n-r),t.avail_out=i<c?257+(c-i):257-(i-c),P.hold=g,P.bits=j};const gh=15,ww=852,_w=592,Sw=0,ny=1,Cw=2,H7=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),$7=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),V7=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),W7=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),Y7=(s,t,a,n,r,i,o,c)=>{const u=c.bits;let h=0,m=0,p=0,y=0,g=0,j=0,b=0,N=0,v=0,S=0,E,L,z,V,te,q=null,B;const J=new Uint16Array(gh+1),P=new Uint16Array(gh+1);let K=null,H,se,X;for(h=0;h<=gh;h++)J[h]=0;for(m=0;m<n;m++)J[t[a+m]]++;for(g=u,y=gh;y>=1&&J[y]===0;y--);if(g>y&&(g=y),y===0)return r[i++]=1<<24|64<<16|0,r[i++]=1<<24|64<<16|0,c.bits=1,0;for(p=1;p<y&&J[p]===0;p++);for(g<p&&(g=p),N=1,h=1;h<=gh;h++)if(N<<=1,N-=J[h],N<0)return-1;if(N>0&&(s===Sw||y!==1))return-1;for(P[1]=0,h=1;h<gh;h++)P[h+1]=P[h]+J[h];for(m=0;m<n;m++)t[a+m]!==0&&(o[P[t[a+m]]++]=m);if(s===Sw?(q=K=o,B=20):s===ny?(q=H7,K=$7,B=257):(q=V7,K=W7,B=0),S=0,m=0,h=p,te=i,j=g,b=0,z=-1,v=1<<g,V=v-1,s===ny&&v>ww||s===Cw&&v>_w)return 1;for(;;){H=h-b,o[m]+1<B?(se=0,X=o[m]):o[m]>=B?(se=K[o[m]-B],X=q[o[m]-B]):(se=96,X=0),E=1<<h-b,L=1<<j,p=L;do L-=E,r[te+(S>>b)+L]=H<<24|se<<16|X|0;while(L!==0);for(E=1<<h-1;S&E;)E>>=1;if(E!==0?(S&=E-1,S+=E):S=0,m++,--J[h]===0){if(h===y)break;h=t[a+o[m]]}if(h>g&&(S&V)!==z){for(b===0&&(b=g),te+=p,j=h-b,N=1<<j;j+b<y&&(N-=J[j+b],!(N<=0));)j++,N<<=1;if(v+=1<<j,s===ny&&v>ww||s===Cw&&v>_w)return 1;z=S&V,r[z]=g<<24|j<<16|te-i|0}}return S!==0&&(r[te+S]=h-b<<24|64<<16|0),c.bits=g,0};var tm=Y7;const K7=0,bA=1,yA=2,{Z_FINISH:Aw,Z_BLOCK:X7,Z_TREES:Vp,Z_OK:Uu,Z_STREAM_END:G7,Z_NEED_DICT:Q7,Z_STREAM_ERROR:Hl,Z_DATA_ERROR:vA,Z_MEM_ERROR:jA,Z_BUF_ERROR:J7,Z_DEFLATED:kw}=pA,fx=16180,Dw=16181,Ew=16182,Tw=16183,Lw=16184,Pw=16185,Fw=16186,Iw=16187,Ow=16188,Mw=16189,Bg=16190,Hc=16191,ry=16192,Rw=16193,iy=16194,Bw=16195,zw=16196,qw=16197,Uw=16198,Wp=16199,Yp=16200,Hw=16201,$w=16202,Vw=16203,Ww=16204,Yw=16205,ly=16206,Kw=16207,Xw=16208,Za=16209,NA=16210,wA=16211,Z7=852,eB=592,tB=15,sB=tB,Gw=s=>(s>>>24&255)+(s>>>8&65280)+((s&65280)<<8)+((s&255)<<24);function aB(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Wu=s=>{if(!s)return 1;const t=s.state;return!t||t.strm!==s||t.mode<fx||t.mode>wA?1:0},_A=s=>{if(Wu(s))return Hl;const t=s.state;return s.total_in=s.total_out=t.total=0,s.msg="",t.wrap&&(s.adler=t.wrap&1),t.mode=fx,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(Z7),t.distcode=t.distdyn=new Int32Array(eB),t.sane=1,t.back=-1,Uu},SA=s=>{if(Wu(s))return Hl;const t=s.state;return t.wsize=0,t.whave=0,t.wnext=0,_A(s)},CA=(s,t)=>{let a;if(Wu(s))return Hl;const n=s.state;return t<0?(a=0,t=-t):(a=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15)?Hl:(n.window!==null&&n.wbits!==t&&(n.window=null),n.wrap=a,n.wbits=t,SA(s))},AA=(s,t)=>{if(!s)return Hl;const a=new aB;s.state=a,a.strm=s,a.window=null,a.mode=fx;const n=CA(s,t);return n!==Uu&&(s.state=null),n},nB=s=>AA(s,sB);let Qw=!0,oy,cy;const rB=s=>{if(Qw){oy=new Int32Array(512),cy=new Int32Array(32);let t=0;for(;t<144;)s.lens[t++]=8;for(;t<256;)s.lens[t++]=9;for(;t<280;)s.lens[t++]=7;for(;t<288;)s.lens[t++]=8;for(tm(bA,s.lens,0,288,oy,0,s.work,{bits:9}),t=0;t<32;)s.lens[t++]=5;tm(yA,s.lens,0,32,cy,0,s.work,{bits:5}),Qw=!1}s.lencode=oy,s.lenbits=9,s.distcode=cy,s.distbits=5},kA=(s,t,a,n)=>{let r;const i=s.state;return i.window===null&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new Uint8Array(i.wsize)),n>=i.wsize?(i.window.set(t.subarray(a-i.wsize,a),0),i.wnext=0,i.whave=i.wsize):(r=i.wsize-i.wnext,r>n&&(r=n),i.window.set(t.subarray(a-n,a-n+r),i.wnext),n-=r,n?(i.window.set(t.subarray(a-n,a),0),i.wnext=n,i.whave=i.wsize):(i.wnext+=r,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=r))),0},iB=(s,t)=>{let a,n,r,i,o,c,u,h,m,p,y,g,j,b,N=0,v,S,E,L,z,V,te,q;const B=new Uint8Array(4);let J,P;const K=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Wu(s)||!s.output||!s.input&&s.avail_in!==0)return Hl;a=s.state,a.mode===Hc&&(a.mode=ry),o=s.next_out,r=s.output,u=s.avail_out,i=s.next_in,n=s.input,c=s.avail_in,h=a.hold,m=a.bits,p=c,y=u,q=Uu;e:for(;;)switch(a.mode){case fx:if(a.wrap===0){a.mode=ry;break}for(;m<16;){if(c===0)break e;c--,h+=n[i++]<<m,m+=8}if(a.wrap&2&&h===35615){a.wbits===0&&(a.wbits=15),a.check=0,B[0]=h&255,B[1]=h>>>8&255,a.check=Xo(a.check,B,2,0),h=0,m=0,a.mode=Dw;break}if(a.head&&(a.head.done=!1),!(a.wrap&1)||(((h&255)<<8)+(h>>8))%31){s.msg="incorrect header check",a.mode=Za;break}if((h&15)!==kw){s.msg="unknown compression method",a.mode=Za;break}if(h>>>=4,m-=4,te=(h&15)+8,a.wbits===0&&(a.wbits=te),te>15||te>a.wbits){s.msg="invalid window size",a.mode=Za;break}a.dmax=1<<a.wbits,a.flags=0,s.adler=a.check=1,a.mode=h&512?Mw:Hc,h=0,m=0;break;case Dw:for(;m<16;){if(c===0)break e;c--,h+=n[i++]<<m,m+=8}if(a.flags=h,(a.flags&255)!==kw){s.msg="unknown compression method",a.mode=Za;break}if(a.flags&57344){s.msg="unknown header flags set",a.mode=Za;break}a.head&&(a.head.text=h>>8&1),a.flags&512&&a.wrap&4&&(B[0]=h&255,B[1]=h>>>8&255,a.check=Xo(a.check,B,2,0)),h=0,m=0,a.mode=Ew;case Ew:for(;m<32;){if(c===0)break e;c--,h+=n[i++]<<m,m+=8}a.head&&(a.head.time=h),a.flags&512&&a.wrap&4&&(B[0]=h&255,B[1]=h>>>8&255,B[2]=h>>>16&255,B[3]=h>>>24&255,a.check=Xo(a.check,B,4,0)),h=0,m=0,a.mode=Tw;case Tw:for(;m<16;){if(c===0)break e;c--,h+=n[i++]<<m,m+=8}a.head&&(a.head.xflags=h&255,a.head.os=h>>8),a.flags&512&&a.wrap&4&&(B[0]=h&255,B[1]=h>>>8&255,a.check=Xo(a.check,B,2,0)),h=0,m=0,a.mode=Lw;case Lw:if(a.flags&1024){for(;m<16;){if(c===0)break e;c--,h+=n[i++]<<m,m+=8}a.length=h,a.head&&(a.head.extra_len=h),a.flags&512&&a.wrap&4&&(B[0]=h&255,B[1]=h>>>8&255,a.check=Xo(a.check,B,2,0)),h=0,m=0}else a.head&&(a.head.extra=null);a.mode=Pw;case Pw:if(a.flags&1024&&(g=a.length,g>c&&(g=c),g&&(a.head&&(te=a.head.extra_len-a.length,a.head.extra||(a.head.extra=new Uint8Array(a.head.extra_len)),a.head.extra.set(n.subarray(i,i+g),te)),a.flags&512&&a.wrap&4&&(a.check=Xo(a.check,n,g,i)),c-=g,i+=g,a.length-=g),a.length))break e;a.length=0,a.mode=Fw;case Fw:if(a.flags&2048){if(c===0)break e;g=0;do te=n[i+g++],a.head&&te&&a.length<65536&&(a.head.name+=String.fromCharCode(te));while(te&&g<c);if(a.flags&512&&a.wrap&4&&(a.check=Xo(a.check,n,g,i)),c-=g,i+=g,te)break e}else a.head&&(a.head.name=null);a.length=0,a.mode=Iw;case Iw:if(a.flags&4096){if(c===0)break e;g=0;do te=n[i+g++],a.head&&te&&a.length<65536&&(a.head.comment+=String.fromCharCode(te));while(te&&g<c);if(a.flags&512&&a.wrap&4&&(a.check=Xo(a.check,n,g,i)),c-=g,i+=g,te)break e}else a.head&&(a.head.comment=null);a.mode=Ow;case Ow:if(a.flags&512){for(;m<16;){if(c===0)break e;c--,h+=n[i++]<<m,m+=8}if(a.wrap&4&&h!==(a.check&65535)){s.msg="header crc mismatch",a.mode=Za;break}h=0,m=0}a.head&&(a.head.hcrc=a.flags>>9&1,a.head.done=!0),s.adler=a.check=0,a.mode=Hc;break;case Mw:for(;m<32;){if(c===0)break e;c--,h+=n[i++]<<m,m+=8}s.adler=a.check=Gw(h),h=0,m=0,a.mode=Bg;case Bg:if(a.havedict===0)return s.next_out=o,s.avail_out=u,s.next_in=i,s.avail_in=c,a.hold=h,a.bits=m,Q7;s.adler=a.check=1,a.mode=Hc;case Hc:if(t===X7||t===Vp)break e;case ry:if(a.last){h>>>=m&7,m-=m&7,a.mode=ly;break}for(;m<3;){if(c===0)break e;c--,h+=n[i++]<<m,m+=8}switch(a.last=h&1,h>>>=1,m-=1,h&3){case 0:a.mode=Rw;break;case 1:if(rB(a),a.mode=Wp,t===Vp){h>>>=2,m-=2;break e}break;case 2:a.mode=zw;break;case 3:s.msg="invalid block type",a.mode=Za}h>>>=2,m-=2;break;case Rw:for(h>>>=m&7,m-=m&7;m<32;){if(c===0)break e;c--,h+=n[i++]<<m,m+=8}if((h&65535)!==(h>>>16^65535)){s.msg="invalid stored block lengths",a.mode=Za;break}if(a.length=h&65535,h=0,m=0,a.mode=iy,t===Vp)break e;case iy:a.mode=Bw;case Bw:if(g=a.length,g){if(g>c&&(g=c),g>u&&(g=u),g===0)break e;r.set(n.subarray(i,i+g),o),c-=g,i+=g,u-=g,o+=g,a.length-=g;break}a.mode=Hc;break;case zw:for(;m<14;){if(c===0)break e;c--,h+=n[i++]<<m,m+=8}if(a.nlen=(h&31)+257,h>>>=5,m-=5,a.ndist=(h&31)+1,h>>>=5,m-=5,a.ncode=(h&15)+4,h>>>=4,m-=4,a.nlen>286||a.ndist>30){s.msg="too many length or distance symbols",a.mode=Za;break}a.have=0,a.mode=qw;case qw:for(;a.have<a.ncode;){for(;m<3;){if(c===0)break e;c--,h+=n[i++]<<m,m+=8}a.lens[K[a.have++]]=h&7,h>>>=3,m-=3}for(;a.have<19;)a.lens[K[a.have++]]=0;if(a.lencode=a.lendyn,a.lenbits=7,J={bits:a.lenbits},q=tm(K7,a.lens,0,19,a.lencode,0,a.work,J),a.lenbits=J.bits,q){s.msg="invalid code lengths set",a.mode=Za;break}a.have=0,a.mode=Uw;case Uw:for(;a.have<a.nlen+a.ndist;){for(;N=a.lencode[h&(1<<a.lenbits)-1],v=N>>>24,S=N>>>16&255,E=N&65535,!(v<=m);){if(c===0)break e;c--,h+=n[i++]<<m,m+=8}if(E<16)h>>>=v,m-=v,a.lens[a.have++]=E;else{if(E===16){for(P=v+2;m<P;){if(c===0)break e;c--,h+=n[i++]<<m,m+=8}if(h>>>=v,m-=v,a.have===0){s.msg="invalid bit length repeat",a.mode=Za;break}te=a.lens[a.have-1],g=3+(h&3),h>>>=2,m-=2}else if(E===17){for(P=v+3;m<P;){if(c===0)break e;c--,h+=n[i++]<<m,m+=8}h>>>=v,m-=v,te=0,g=3+(h&7),h>>>=3,m-=3}else{for(P=v+7;m<P;){if(c===0)break e;c--,h+=n[i++]<<m,m+=8}h>>>=v,m-=v,te=0,g=11+(h&127),h>>>=7,m-=7}if(a.have+g>a.nlen+a.ndist){s.msg="invalid bit length repeat",a.mode=Za;break}for(;g--;)a.lens[a.have++]=te}}if(a.mode===Za)break;if(a.lens[256]===0){s.msg="invalid code -- missing end-of-block",a.mode=Za;break}if(a.lenbits=9,J={bits:a.lenbits},q=tm(bA,a.lens,0,a.nlen,a.lencode,0,a.work,J),a.lenbits=J.bits,q){s.msg="invalid literal/lengths set",a.mode=Za;break}if(a.distbits=6,a.distcode=a.distdyn,J={bits:a.distbits},q=tm(yA,a.lens,a.nlen,a.ndist,a.distcode,0,a.work,J),a.distbits=J.bits,q){s.msg="invalid distances set",a.mode=Za;break}if(a.mode=Wp,t===Vp)break e;case Wp:a.mode=Yp;case Yp:if(c>=6&&u>=258){s.next_out=o,s.avail_out=u,s.next_in=i,s.avail_in=c,a.hold=h,a.bits=m,U7(s,y),o=s.next_out,r=s.output,u=s.avail_out,i=s.next_in,n=s.input,c=s.avail_in,h=a.hold,m=a.bits,a.mode===Hc&&(a.back=-1);break}for(a.back=0;N=a.lencode[h&(1<<a.lenbits)-1],v=N>>>24,S=N>>>16&255,E=N&65535,!(v<=m);){if(c===0)break e;c--,h+=n[i++]<<m,m+=8}if(S&&(S&240)===0){for(L=v,z=S,V=E;N=a.lencode[V+((h&(1<<L+z)-1)>>L)],v=N>>>24,S=N>>>16&255,E=N&65535,!(L+v<=m);){if(c===0)break e;c--,h+=n[i++]<<m,m+=8}h>>>=L,m-=L,a.back+=L}if(h>>>=v,m-=v,a.back+=v,a.length=E,S===0){a.mode=Yw;break}if(S&32){a.back=-1,a.mode=Hc;break}if(S&64){s.msg="invalid literal/length code",a.mode=Za;break}a.extra=S&15,a.mode=Hw;case Hw:if(a.extra){for(P=a.extra;m<P;){if(c===0)break e;c--,h+=n[i++]<<m,m+=8}a.length+=h&(1<<a.extra)-1,h>>>=a.extra,m-=a.extra,a.back+=a.extra}a.was=a.length,a.mode=$w;case $w:for(;N=a.distcode[h&(1<<a.distbits)-1],v=N>>>24,S=N>>>16&255,E=N&65535,!(v<=m);){if(c===0)break e;c--,h+=n[i++]<<m,m+=8}if((S&240)===0){for(L=v,z=S,V=E;N=a.distcode[V+((h&(1<<L+z)-1)>>L)],v=N>>>24,S=N>>>16&255,E=N&65535,!(L+v<=m);){if(c===0)break e;c--,h+=n[i++]<<m,m+=8}h>>>=L,m-=L,a.back+=L}if(h>>>=v,m-=v,a.back+=v,S&64){s.msg="invalid distance code",a.mode=Za;break}a.offset=E,a.extra=S&15,a.mode=Vw;case Vw:if(a.extra){for(P=a.extra;m<P;){if(c===0)break e;c--,h+=n[i++]<<m,m+=8}a.offset+=h&(1<<a.extra)-1,h>>>=a.extra,m-=a.extra,a.back+=a.extra}if(a.offset>a.dmax){s.msg="invalid distance too far back",a.mode=Za;break}a.mode=Ww;case Ww:if(u===0)break e;if(g=y-u,a.offset>g){if(g=a.offset-g,g>a.whave&&a.sane){s.msg="invalid distance too far back",a.mode=Za;break}g>a.wnext?(g-=a.wnext,j=a.wsize-g):j=a.wnext-g,g>a.length&&(g=a.length),b=a.window}else b=r,j=o-a.offset,g=a.length;g>u&&(g=u),u-=g,a.length-=g;do r[o++]=b[j++];while(--g);a.length===0&&(a.mode=Yp);break;case Yw:if(u===0)break e;r[o++]=a.length,u--,a.mode=Yp;break;case ly:if(a.wrap){for(;m<32;){if(c===0)break e;c--,h|=n[i++]<<m,m+=8}if(y-=u,s.total_out+=y,a.total+=y,a.wrap&4&&y&&(s.adler=a.check=a.flags?Xo(a.check,r,y,o-y):iv(a.check,r,y,o-y)),y=u,a.wrap&4&&(a.flags?h:Gw(h))!==a.check){s.msg="incorrect data check",a.mode=Za;break}h=0,m=0}a.mode=Kw;case Kw:if(a.wrap&&a.flags){for(;m<32;){if(c===0)break e;c--,h+=n[i++]<<m,m+=8}if(a.wrap&4&&h!==(a.total&4294967295)){s.msg="incorrect length check",a.mode=Za;break}h=0,m=0}a.mode=Xw;case Xw:q=G7;break e;case Za:q=vA;break e;case NA:return jA;case wA:default:return Hl}return s.next_out=o,s.avail_out=u,s.next_in=i,s.avail_in=c,a.hold=h,a.bits=m,(a.wsize||y!==s.avail_out&&a.mode<Za&&(a.mode<ly||t!==Aw))&&kA(s,s.output,s.next_out,y-s.avail_out),p-=s.avail_in,y-=s.avail_out,s.total_in+=p,s.total_out+=y,a.total+=y,a.wrap&4&&y&&(s.adler=a.check=a.flags?Xo(a.check,r,y,s.next_out-y):iv(a.check,r,y,s.next_out-y)),s.data_type=a.bits+(a.last?64:0)+(a.mode===Hc?128:0)+(a.mode===Wp||a.mode===iy?256:0),(p===0&&y===0||t===Aw)&&q===Uu&&(q=J7),q},lB=s=>{if(Wu(s))return Hl;let t=s.state;return t.window&&(t.window=null),s.state=null,Uu},oB=(s,t)=>{if(Wu(s))return Hl;const a=s.state;return(a.wrap&2)===0?Hl:(a.head=t,t.done=!1,Uu)},cB=(s,t)=>{const a=t.length;let n,r,i;return Wu(s)||(n=s.state,n.wrap!==0&&n.mode!==Bg)?Hl:n.mode===Bg&&(r=1,r=iv(r,t,a,0),r!==n.check)?vA:(i=kA(s,t,a,a),i?(n.mode=NA,jA):(n.havedict=1,Uu))};var dB=SA,uB=CA,hB=_A,fB=nB,mB=AA,pB=iB,gB=lB,xB=oB,bB=cB,yB="pako inflate (from Nodeca project)",Xc={inflateReset:dB,inflateReset2:uB,inflateResetKeep:hB,inflateInit:fB,inflateInit2:mB,inflate:pB,inflateEnd:gB,inflateGetHeader:xB,inflateSetDictionary:bB,inflateInfo:yB};function vB(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var jB=vB;const DA=Object.prototype.toString,{Z_NO_FLUSH:NB,Z_FINISH:wB,Z_OK:fm,Z_STREAM_END:dy,Z_NEED_DICT:uy,Z_STREAM_ERROR:_B,Z_DATA_ERROR:Jw,Z_MEM_ERROR:SB}=pA;function Tm(s){this.options=gA.assign({chunkSize:1024*64,windowBits:15,to:""},s||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(s&&s.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15)===0&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new z7,this.strm.avail_out=0;let a=Xc.inflateInit2(this.strm,t.windowBits);if(a!==fm)throw new Error(lv[a]);if(this.header=new jB,Xc.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=ov.string2buf(t.dictionary):DA.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(a=Xc.inflateSetDictionary(this.strm,t.dictionary),a!==fm)))throw new Error(lv[a])}Tm.prototype.push=function(s,t){const a=this.strm,n=this.options.chunkSize,r=this.options.dictionary;let i,o,c;if(this.ended)return!1;for(t===~~t?o=t:o=t===!0?wB:NB,DA.call(s)==="[object ArrayBuffer]"?a.input=new Uint8Array(s):a.input=s,a.next_in=0,a.avail_in=a.input.length;;){for(a.avail_out===0&&(a.output=new Uint8Array(n),a.next_out=0,a.avail_out=n),i=Xc.inflate(a,o),i===uy&&r&&(i=Xc.inflateSetDictionary(a,r),i===fm?i=Xc.inflate(a,o):i===Jw&&(i=uy));a.avail_in>0&&i===dy&&a.state.wrap>0&&s[a.next_in]!==0;)Xc.inflateReset(a),i=Xc.inflate(a,o);switch(i){case _B:case Jw:case uy:case SB:return this.onEnd(i),this.ended=!0,!1}if(c=a.avail_out,a.next_out&&(a.avail_out===0||i===dy))if(this.options.to==="string"){let u=ov.utf8border(a.output,a.next_out),h=a.next_out-u,m=ov.buf2string(a.output,u);a.next_out=h,a.avail_out=n-h,h&&a.output.set(a.output.subarray(u,u+h),0),this.onData(m)}else this.onData(a.output.length===a.next_out?a.output:a.output.subarray(0,a.next_out));if(!(i===fm&&c===0)){if(i===dy)return i=Xc.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,!0;if(a.avail_in===0)break}}return!0};Tm.prototype.onData=function(s){this.chunks.push(s)};Tm.prototype.onEnd=function(s){s===fm&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=gA.flattenChunks(this.chunks)),this.chunks=[],this.err=s,this.msg=this.strm.msg};function CB(s,t){const a=new Tm(t);if(a.push(s),a.err)throw a.msg||lv[a.err];return a.result}var AB=Tm,kB=CB,DB={Inflate:AB,inflate:kB};const{Inflate:EB,inflate:TB}=DB;var Zw=EB,LB=TB;const EA=[];for(let s=0;s<256;s++){let t=s;for(let a=0;a<8;a++)t&1?t=3988292384^t>>>1:t=t>>>1;EA[s]=t}const e_=4294967295;function PB(s,t,a){let n=s;for(let r=0;r<a;r++)n=EA[(n^t[r])&255]^n>>>8;return n}function FB(s,t){return(PB(e_,s,t)^e_)>>>0}function t_(s,t,a){const n=s.readUint32(),r=FB(new Uint8Array(s.buffer,s.byteOffset+s.offset-t-4,t),t);if(r!==n)throw new Error(`CRC mismatch for chunk ${a}. Expected ${n}, found ${r}`)}function TA(s,t,a){for(let n=0;n<a;n++)t[n]=s[n]}function LA(s,t,a,n){let r=0;for(;r<n;r++)t[r]=s[r];for(;r<a;r++)t[r]=s[r]+t[r-n]&255}function PA(s,t,a,n){let r=0;if(a.length===0)for(;r<n;r++)t[r]=s[r];else for(;r<n;r++)t[r]=s[r]+a[r]&255}function FA(s,t,a,n,r){let i=0;if(a.length===0){for(;i<r;i++)t[i]=s[i];for(;i<n;i++)t[i]=s[i]+(t[i-r]>>1)&255}else{for(;i<r;i++)t[i]=s[i]+(a[i]>>1)&255;for(;i<n;i++)t[i]=s[i]+(t[i-r]+a[i]>>1)&255}}function IA(s,t,a,n,r){let i=0;if(a.length===0){for(;i<r;i++)t[i]=s[i];for(;i<n;i++)t[i]=s[i]+t[i-r]&255}else{for(;i<r;i++)t[i]=s[i]+a[i]&255;for(;i<n;i++)t[i]=s[i]+IB(t[i-r],a[i],a[i-r])&255}}function IB(s,t,a){const n=s+t-a,r=Math.abs(n-s),i=Math.abs(n-t),o=Math.abs(n-a);return r<=i&&r<=o?s:i<=o?t:a}function OB(s,t,a,n,r,i){switch(s){case 0:TA(t,a,r);break;case 1:LA(t,a,r,i);break;case 2:PA(t,a,n,r);break;case 3:FA(t,a,n,r,i);break;case 4:IA(t,a,n,r,i);break;default:throw new Error(`Unsupported filter: ${s}`)}}const MB=new Uint16Array([255]),RB=new Uint8Array(MB.buffer),BB=RB[0]===255;function zB(s){const{data:t,width:a,height:n,channels:r,depth:i}=s,o=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],c=Math.ceil(i/8)*r,u=new Uint8Array(n*a*c);let h=0;for(let m=0;m<7;m++){const p=o[m],y=Math.ceil((a-p.x)/p.xStep),g=Math.ceil((n-p.y)/p.yStep);if(y<=0||g<=0)continue;const j=y*c,b=new Uint8Array(j);for(let N=0;N<g;N++){const v=t[h++],S=t.subarray(h,h+j);h+=j;const E=new Uint8Array(j);OB(v,S,E,b,j,c),b.set(E);for(let L=0;L<y;L++){const z=p.x+L*p.xStep,V=p.y+N*p.yStep;if(!(z>=a||V>=n))for(let te=0;te<c;te++)u[(V*a+z)*c+te]=E[L*c+te]}}}if(i===16){const m=new Uint16Array(u.buffer);if(BB)for(let p=0;p<m.length;p++)m[p]=qB(m[p]);return m}else return u}function qB(s){return(s&255)<<8|s>>8&255}const UB=new Uint16Array([255]),HB=new Uint8Array(UB.buffer),$B=HB[0]===255,VB=new Uint8Array(0);function s_(s){const{data:t,width:a,height:n,channels:r,depth:i}=s,o=Math.ceil(i/8)*r,c=Math.ceil(i/8*r*a),u=new Uint8Array(n*c);let h=VB,m=0,p,y;for(let g=0;g<n;g++){switch(p=t.subarray(m+1,m+1+c),y=u.subarray(g*c,(g+1)*c),t[m]){case 0:TA(p,y,c);break;case 1:LA(p,y,c,o);break;case 2:PA(p,y,h,c);break;case 3:FA(p,y,h,c,o);break;case 4:IA(p,y,h,c,o);break;default:throw new Error(`Unsupported filter: ${t[m]}`)}h=y,m+=c+1}if(i===16){const g=new Uint16Array(u.buffer);if($B)for(let j=0;j<g.length;j++)g[j]=WB(g[j]);return g}else return u}function WB(s){return(s&255)<<8|s>>8&255}const cg=Uint8Array.of(137,80,78,71,13,10,26,10);function a_(s){if(!YB(s.readBytes(cg.length)))throw new Error("wrong PNG signature")}function YB(s){if(s.length<cg.length)return!1;for(let t=0;t<cg.length;t++)if(s[t]!==cg[t])return!1;return!0}const KB="tEXt",XB=0,OA=new TextDecoder("latin1");function GB(s){if(JB(s),s.length===0||s.length>79)throw new Error("keyword length must be between 1 and 79")}const QB=/^[\u0000-\u00FF]*$/;function JB(s){if(!QB.test(s))throw new Error("invalid latin1 text")}function ZB(s,t,a){const n=MA(t);s[n]=ez(t,a-n.length-1)}function MA(s){for(s.mark();s.readByte()!==XB;);const t=s.offset;s.reset();const a=OA.decode(s.readBytes(t-s.offset-1));return s.skip(1),GB(a),a}function ez(s,t){return OA.decode(s.readBytes(t))}const ll={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},hy={UNKNOWN:-1,DEFLATE:0},n_={UNKNOWN:-1,ADAPTIVE:0},fy={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},Kp={NONE:0,BACKGROUND:1,PREVIOUS:2},my={SOURCE:0,OVER:1};class tz extends g0{_checkCrc;_inflator;_png;_apng;_end;_hasPalette;_palette;_hasTransparency;_transparency;_compressionMethod;_filterMethod;_interlaceMethod;_colorType;_isAnimated;_numberOfFrames;_numberOfPlays;_frames;_writingDataChunks;constructor(t,a={}){super(t);const{checkCrc:n=!1}=a;this._checkCrc=n,this._inflator=new Zw,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=hy.UNKNOWN,this._filterMethod=n_.UNKNOWN,this._interlaceMethod=fy.UNKNOWN,this._colorType=ll.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(a_(this);!this._end;){const t=this.readUint32(),a=this.readChars(4);this.decodeChunk(t,a)}return this.decodeImage(),this._png}decodeApng(){for(a_(this);!this._end;){const t=this.readUint32(),a=this.readChars(4);this.decodeApngChunk(t,a)}return this.decodeApngImage(),this._apng}decodeChunk(t,a){const n=this.offset;switch(a){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(t);break;case"IDAT":this.decodeIDAT(t);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(t);break;case"iCCP":this.decodeiCCP(t);break;case KB:ZB(this._png.text,this,t);break;case"pHYs":this.decodepHYs();break;default:this.skip(t);break}if(this.offset-n!==t)throw new Error(`Length mismatch while decoding chunk ${a}`);this._checkCrc?t_(this,t+4,a):this.skip(4)}decodeApngChunk(t,a){const n=this.offset;switch(a!=="fdAT"&&a!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),a){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(t);break;default:this.decodeChunk(t,a),this.offset=n+t;break}if(this.offset-n!==t)throw new Error(`Length mismatch while decoding chunk ${a}`);this._checkCrc?t_(this,t+4,a):this.skip(4)}decodeIHDR(){const t=this._png;t.width=this.readUint32(),t.height=this.readUint32(),t.depth=sz(this.readUint8());const a=this.readUint8();this._colorType=a;let n;switch(a){case ll.GREYSCALE:n=1;break;case ll.TRUECOLOUR:n=3;break;case ll.INDEXED_COLOUR:n=1;break;case ll.GREYSCALE_ALPHA:n=2;break;case ll.TRUECOLOUR_ALPHA:n=4;break;case ll.UNKNOWN:default:throw new Error(`Unknown color type: ${a}`)}if(this._png.channels=n,this._compressionMethod=this.readUint8(),this._compressionMethod!==hy.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const t={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(t)}decodePLTE(t){if(t%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${t}`);const a=t/3;this._hasPalette=!0;const n=[];this._palette=n;for(let r=0;r<a;r++)n.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(t){this._writingDataChunks=!0;const a=t,n=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,n,a)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(t)}decodeFDAT(t){this._writingDataChunks=!0;let a=t,n=this.offset+this.byteOffset;if(n+=4,a-=4,this._inflator.push(new Uint8Array(this.buffer,n,a)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(t)}decodetRNS(t){switch(this._colorType){case ll.GREYSCALE:case ll.TRUECOLOUR:{if(t%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${t}`);if(t/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${t/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(t/2);for(let a=0;a<t/2;a++)this._transparency[a]=this.readUint16();break}case ll.INDEXED_COLOUR:{if(t>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${t} vs ${this._palette.length})`);let a=0;for(;a<t;a++){const n=this.readByte();this._palette[a].push(n)}for(;a<this._palette.length;a++)this._palette[a].push(255);break}case ll.UNKNOWN:case ll.GREYSCALE_ALPHA:case ll.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(t){const a=MA(this),n=this.readUint8();if(n!==hy.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${n}`);const r=this.readBytes(t-a.length-2);this._png.iccEmbeddedProfile={name:a,profile:LB(r)}}decodepHYs(){const t=this.readUint32(),a=this.readUint32(),n=this.readByte();this._png.resolution={x:t,y:a,unit:n}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let t=0;t<this._numberOfFrames;t++){const a={sequenceNumber:this._frames[t].sequenceNumber,delayNumber:this._frames[t].delayNumber,delayDenominator:this._frames[t].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},n=this._frames.at(t);if(n){if(n.data=s_({data:n.data,width:n.width,height:n.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),t===0||n.xOffset===0&&n.yOffset===0&&n.width===this._png.width&&n.height===this._png.height)a.data=n.data;else{const r=this._apng.frames.at(t-1);this.disposeFrame(n,r,a),this.addFrameDataToCanvas(a,n)}this._apng.frames.push(a)}}return this._apng}disposeFrame(t,a,n){switch(t.disposeOp){case Kp.NONE:break;case Kp.BACKGROUND:for(let r=0;r<this._png.height;r++)for(let i=0;i<this._png.width;i++){const o=(r*t.width+i)*this._png.channels;for(let c=0;c<this._png.channels;c++)n.data[o+c]=0}break;case Kp.PREVIOUS:n.data.set(a.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(t,a){const n=1<<this._png.depth,r=(i,o)=>{const c=((i+a.yOffset)*this._png.width+a.xOffset+o)*this._png.channels,u=(i*a.width+o)*this._png.channels;return{index:c,frameIndex:u}};switch(a.blendOp){case my.SOURCE:for(let i=0;i<a.height;i++)for(let o=0;o<a.width;o++){const{index:c,frameIndex:u}=r(i,o);for(let h=0;h<this._png.channels;h++)t.data[c+h]=a.data[u+h]}break;case my.OVER:for(let i=0;i<a.height;i++)for(let o=0;o<a.width;o++){const{index:c,frameIndex:u}=r(i,o);for(let h=0;h<this._png.channels;h++){const m=a.data[u+this._png.channels-1]/n,p=h%(this._png.channels-1)===0?1:a.data[u+h],y=Math.floor(m*p+(1-m)*t.data[c+h]);t.data[c+h]+=y}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const t=this._isAnimated?(this._frames?.at(0)).data:this._inflator.result;if(this._filterMethod!==n_.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===fy.NO_INTERLACE)this._png.data=s_({data:t,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===fy.ADAM7)this._png.data=zB({data:t,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const t=this._inflator.result,a=this._frames.at(-1);a?a.data=t:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:Kp.NONE,blendOp:my.SOURCE,data:t}),this._inflator=new Zw,this._writingDataChunks=!1}}function sz(s){if(s!==1&&s!==2&&s!==4&&s!==8&&s!==16)throw new Error(`invalid bit depth: ${s}`);return s}var r_;(function(s){s[s.UNKNOWN=0]="UNKNOWN",s[s.METRE=1]="METRE"})(r_||(r_={}));function az(s,t){return new tz(s,t).decode()}var js=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function py(){js.console&&typeof js.console.log=="function"&&js.console.log.apply(js.console,arguments)}var Ta={log:py,warn:function(s){js.console&&(typeof js.console.warn=="function"?js.console.warn.apply(js.console,arguments):py.call(null,arguments))},error:function(s){js.console&&(typeof js.console.error=="function"?js.console.error.apply(js.console,arguments):py(s))}};function gy(s,t,a){var n=new XMLHttpRequest;n.open("GET",s),n.responseType="blob",n.onload=function(){Su(n.response,t,a)},n.onerror=function(){Ta.error("could not download file")},n.send()}function i_(s){var t=new XMLHttpRequest;t.open("HEAD",s,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function Xp(s){try{s.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),s.dispatchEvent(t)}}var Su=js.saveAs||((typeof window>"u"?"undefined":va(window))!=="object"||window!==js?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(s,t,a){var n=js.URL||js.webkitURL,r=document.createElement("a");t=t||s.name||"download",r.download=t,r.rel="noopener",typeof s=="string"?(r.href=s,r.origin!==location.origin?i_(r.href)?gy(s,t,a):Xp(r,r.target="_blank"):Xp(r)):(r.href=n.createObjectURL(s),setTimeout(function(){n.revokeObjectURL(r.href)},4e4),setTimeout(function(){Xp(r)},0))}:"msSaveOrOpenBlob"in navigator?function(s,t,a){if(t=t||s.name||"download",typeof s=="string")if(i_(s))gy(s,t,a);else{var n=document.createElement("a");n.href=s,n.target="_blank",setTimeout(function(){Xp(n)})}else navigator.msSaveOrOpenBlob((function(r,i){return i===void 0?i={autoBom:!1}:va(i)!=="object"&&(Ta.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(r.type)?new Blob(["\uFEFF",r],{type:r.type}):r})(s,a),t)}:function(s,t,a,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof s=="string")return gy(s,t,a);var r=s.type==="application/octet-stream",i=/constructor/i.test(js.HTMLElement)||js.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||r&&i)&&(typeof FileReader>"u"?"undefined":va(FileReader))==="object"){var c=new FileReader;c.onloadend=function(){var m=c.result;m=o?m:m.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=m:location=m,n=null},c.readAsDataURL(s)}else{var u=js.URL||js.webkitURL,h=u.createObjectURL(s);n?n.location=h:location.href=h,n=null,setTimeout(function(){u.revokeObjectURL(h)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function RA(s){var t;s=s||"",this.ok=!1,s.charAt(0)=="#"&&(s=s.substr(1,6)),s={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[s=(s=s.replace(/ /g,"")).toLowerCase()]||s;for(var a=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(c){return[parseInt(c[1]),parseInt(c[2]),parseInt(c[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(c){return[parseInt(c[1],16),parseInt(c[2],16),parseInt(c[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(c){return[parseInt(c[1]+c[1],16),parseInt(c[2]+c[2],16),parseInt(c[3]+c[3],16)]}}],n=0;n<a.length;n++){var r=a[n].re,i=a[n].process,o=r.exec(s);o&&(t=i(o),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var c=this.r.toString(16),u=this.g.toString(16),h=this.b.toString(16);return c.length==1&&(c="0"+c),u.length==1&&(u="0"+u),h.length==1&&(h="0"+h),"#"+c+u+h}}var dg=js.atob.bind(js),l_=js.btoa.bind(js);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function xy(s,t){var a=s[0],n=s[1],r=s[2],i=s[3];a=Wr(a,n,r,i,t[0],7,-680876936),i=Wr(i,a,n,r,t[1],12,-389564586),r=Wr(r,i,a,n,t[2],17,606105819),n=Wr(n,r,i,a,t[3],22,-1044525330),a=Wr(a,n,r,i,t[4],7,-176418897),i=Wr(i,a,n,r,t[5],12,1200080426),r=Wr(r,i,a,n,t[6],17,-1473231341),n=Wr(n,r,i,a,t[7],22,-45705983),a=Wr(a,n,r,i,t[8],7,1770035416),i=Wr(i,a,n,r,t[9],12,-1958414417),r=Wr(r,i,a,n,t[10],17,-42063),n=Wr(n,r,i,a,t[11],22,-1990404162),a=Wr(a,n,r,i,t[12],7,1804603682),i=Wr(i,a,n,r,t[13],12,-40341101),r=Wr(r,i,a,n,t[14],17,-1502002290),a=Yr(a,n=Wr(n,r,i,a,t[15],22,1236535329),r,i,t[1],5,-165796510),i=Yr(i,a,n,r,t[6],9,-1069501632),r=Yr(r,i,a,n,t[11],14,643717713),n=Yr(n,r,i,a,t[0],20,-373897302),a=Yr(a,n,r,i,t[5],5,-701558691),i=Yr(i,a,n,r,t[10],9,38016083),r=Yr(r,i,a,n,t[15],14,-660478335),n=Yr(n,r,i,a,t[4],20,-405537848),a=Yr(a,n,r,i,t[9],5,568446438),i=Yr(i,a,n,r,t[14],9,-1019803690),r=Yr(r,i,a,n,t[3],14,-187363961),n=Yr(n,r,i,a,t[8],20,1163531501),a=Yr(a,n,r,i,t[13],5,-1444681467),i=Yr(i,a,n,r,t[2],9,-51403784),r=Yr(r,i,a,n,t[7],14,1735328473),a=Kr(a,n=Yr(n,r,i,a,t[12],20,-1926607734),r,i,t[5],4,-378558),i=Kr(i,a,n,r,t[8],11,-2022574463),r=Kr(r,i,a,n,t[11],16,1839030562),n=Kr(n,r,i,a,t[14],23,-35309556),a=Kr(a,n,r,i,t[1],4,-1530992060),i=Kr(i,a,n,r,t[4],11,1272893353),r=Kr(r,i,a,n,t[7],16,-155497632),n=Kr(n,r,i,a,t[10],23,-1094730640),a=Kr(a,n,r,i,t[13],4,681279174),i=Kr(i,a,n,r,t[0],11,-358537222),r=Kr(r,i,a,n,t[3],16,-722521979),n=Kr(n,r,i,a,t[6],23,76029189),a=Kr(a,n,r,i,t[9],4,-640364487),i=Kr(i,a,n,r,t[12],11,-421815835),r=Kr(r,i,a,n,t[15],16,530742520),a=Xr(a,n=Kr(n,r,i,a,t[2],23,-995338651),r,i,t[0],6,-198630844),i=Xr(i,a,n,r,t[7],10,1126891415),r=Xr(r,i,a,n,t[14],15,-1416354905),n=Xr(n,r,i,a,t[5],21,-57434055),a=Xr(a,n,r,i,t[12],6,1700485571),i=Xr(i,a,n,r,t[3],10,-1894986606),r=Xr(r,i,a,n,t[10],15,-1051523),n=Xr(n,r,i,a,t[1],21,-2054922799),a=Xr(a,n,r,i,t[8],6,1873313359),i=Xr(i,a,n,r,t[15],10,-30611744),r=Xr(r,i,a,n,t[6],15,-1560198380),n=Xr(n,r,i,a,t[13],21,1309151649),a=Xr(a,n,r,i,t[4],6,-145523070),i=Xr(i,a,n,r,t[11],10,-1120210379),r=Xr(r,i,a,n,t[2],15,718787259),n=Xr(n,r,i,a,t[9],21,-343485551),s[0]=Wd(a,s[0]),s[1]=Wd(n,s[1]),s[2]=Wd(r,s[2]),s[3]=Wd(i,s[3])}function mx(s,t,a,n,r,i){return t=Wd(Wd(t,s),Wd(n,i)),Wd(t<<r|t>>>32-r,a)}function Wr(s,t,a,n,r,i,o){return mx(t&a|~t&n,s,t,r,i,o)}function Yr(s,t,a,n,r,i,o){return mx(t&n|a&~n,s,t,r,i,o)}function Kr(s,t,a,n,r,i,o){return mx(t^a^n,s,t,r,i,o)}function Xr(s,t,a,n,r,i,o){return mx(a^(t|~n),s,t,r,i,o)}function BA(s){var t,a=s.length,n=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=s.length;t+=64)xy(n,nz(s.substring(t-64,t)));s=s.substring(t-64);var r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<s.length;t++)r[t>>2]|=s.charCodeAt(t)<<(t%4<<3);if(r[t>>2]|=128<<(t%4<<3),t>55)for(xy(n,r),t=0;t<16;t++)r[t]=0;return r[14]=8*a,xy(n,r),n}function nz(s){var t,a=[];for(t=0;t<64;t+=4)a[t>>2]=s.charCodeAt(t)+(s.charCodeAt(t+1)<<8)+(s.charCodeAt(t+2)<<16)+(s.charCodeAt(t+3)<<24);return a}var o_="0123456789abcdef".split("");function rz(s){for(var t="",a=0;a<4;a++)t+=o_[s>>8*a+4&15]+o_[s>>8*a&15];return t}function iz(s){return String.fromCharCode(255&s,(65280&s)>>8,(16711680&s)>>16,(4278190080&s)>>24)}function cv(s){return BA(s).map(iz).join("")}var lz=(function(s){for(var t=0;t<s.length;t++)s[t]=rz(s[t]);return s.join("")})(BA("hello"))!="5d41402abc4b2a76b9719d911017c592";function Wd(s,t){if(lz){var a=(65535&s)+(65535&t);return(s>>16)+(t>>16)+(a>>16)<<16|65535&a}return s+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function dv(s,t){var a,n,r,i;if(s!==a){for(var o=(r=s,i=1+(256/s.length|0),new Array(i+1).join(r)),c=[],u=0;u<256;u++)c[u]=u;var h=0;for(u=0;u<256;u++){var m=c[u];h=(h+m+o.charCodeAt(u))%256,c[u]=c[h],c[h]=m}a=s,n=c}else c=n;var p=t.length,y=0,g=0,j="";for(u=0;u<p;u++)g=(g+(m=c[y=(y+1)%256]))%256,c[y]=c[g],c[g]=m,o=c[(c[y]+c[g])%256],j+=String.fromCharCode(t.charCodeAt(u)^o);return j}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var c_={print:4,modify:8,copy:16,"annot-forms":32};function Sh(s,t,a,n){this.v=1,this.r=2;var r=192;s.forEach(function(c){if(c_.perm!==void 0)throw new Error("Invalid permission: "+c);r+=c_[c]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var i=(t+this.padding).substr(0,32),o=(a+this.padding).substr(0,32);this.O=this.processOwnerPassword(i,o),this.P=-(1+(255^r)),this.encryptionKey=cv(i+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=dv(this.encryptionKey,this.padding)}function Ch(s){if(/[^\u0000-\u00ff]/.test(s))throw new Error("Invalid PDF Name Object: "+s+", Only accept ASCII characters.");for(var t="",a=s.length,n=0;n<a;n++){var r=s.charCodeAt(n);t+=r<33||r===35||r===37||r===40||r===41||r===47||r===60||r===62||r===91||r===93||r===123||r===125||r>126?"#"+("0"+r.toString(16)).slice(-2):s[n]}return t}function d_(s){if(va(s)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(a,n,r){if(r=r||!1,typeof a!="string"||typeof n!="function"||typeof r!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(a)||(t[a]={});var i=Math.random().toString(35);return t[a][i]=[n,!!r],i},this.unsubscribe=function(a){for(var n in t)if(t[n][a])return delete t[n][a],Object.keys(t[n]).length===0&&delete t[n],!0;return!1},this.publish=function(a){if(t.hasOwnProperty(a)){var n=Array.prototype.slice.call(arguments,1),r=[];for(var i in t[a]){var o=t[a][i];try{o[0].apply(s,n)}catch(c){js.console&&Ta.error("jsPDF PubSub Error",c.message,c)}o[1]&&r.push(i)}r.length&&r.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function zg(s){if(!(this instanceof zg))return new zg(s);var t="opacity,stroke-opacity".split(",");for(var a in s)s.hasOwnProperty(a)&&t.indexOf(a)>=0&&(this[a]=s[a]);this.id="",this.objectNumber=-1}function zA(s,t){this.gState=s,this.matrix=t,this.id="",this.objectNumber=-1}function Au(s,t,a,n,r){if(!(this instanceof Au))return new Au(s,t,a,n,r);this.type=s==="axial"?2:3,this.coords=t,this.colors=a,zA.call(this,n,r)}function kh(s,t,a,n,r){if(!(this instanceof kh))return new kh(s,t,a,n,r);this.boundingBox=s,this.xStep=t,this.yStep=a,this.stream="",this.cloneIndex=0,zA.call(this,n,r)}function ts(s){var t,a=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],r=arguments[2],i=arguments[3],o=[],c=1,u=16,h="S",m=null;va(s=s||{})==="object"&&(a=s.orientation,n=s.unit||n,r=s.format||r,i=s.compress||s.compressPdf||i,(m=s.encryption||null)!==null&&(m.userPassword=m.userPassword||"",m.ownerPassword=m.ownerPassword||"",m.userPermissions=m.userPermissions||[]),c=typeof s.userUnit=="number"?Math.abs(s.userUnit):1,s.precision!==void 0&&(t=s.precision),s.floatPrecision!==void 0&&(u=s.floatPrecision),h=s.defaultPathOperation||"S"),o=s.filters||(i===!0?["FlateEncode"]:o),n=n||"mm",a=(""+(a||"P")).toLowerCase();var p=s.putOnlyUsedFonts||!1,y={},g={internal:{},__private__:{}};g.__private__.PubSub=d_;var j="1.3",b=g.__private__.getPdfVersion=function(){return j};g.__private__.setPdfVersion=function(F){j=F};var N={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};g.__private__.getPageFormats=function(){return N};var v=g.__private__.getPageFormat=function(F){return N[F]};r=r||"a4";var S="compat",E="advanced",L=S;function z(){this.saveGraphicsState(),ne(new Ze($t,0,0,-$t,0,wi()*$t).toString()+" cm"),this.setFontSize(this.getFontSize()/$t),h="n",L=E}function V(){this.restoreGraphicsState(),h="S",L=S}var te=g.__private__.combineFontStyleAndFontWeight=function(F,oe){if(F=="bold"&&oe=="normal"||F=="bold"&&oe==400||F=="normal"&&oe=="italic"||F=="bold"&&oe=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return oe&&(F=oe==400||oe==="normal"?F==="italic"?"italic":"normal":oe!=700&&oe!=="bold"||F!=="normal"?(oe==700?"bold":oe)+""+F:"bold"),F};g.advancedAPI=function(F){var oe=L===S;return oe&&z.call(this),typeof F!="function"||(F(this),oe&&V.call(this)),this},g.compatAPI=function(F){var oe=L===E;return oe&&V.call(this),typeof F!="function"||(F(this),oe&&z.call(this)),this},g.isAdvancedAPI=function(){return L===E};var q,B=function(F){if(L!==E)throw new Error(F+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},J=g.roundToPrecision=g.__private__.roundToPrecision=function(F,oe){var _e=t||oe;if(isNaN(F)||isNaN(_e))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return F.toFixed(_e).replace(/0+$/,"")};q=g.hpf=g.__private__.hpf=typeof u=="number"?function(F){if(isNaN(F))throw new Error("Invalid argument passed to jsPDF.hpf");return J(F,u)}:u==="smart"?function(F){if(isNaN(F))throw new Error("Invalid argument passed to jsPDF.hpf");return J(F,F>-1&&F<1?16:5)}:function(F){if(isNaN(F))throw new Error("Invalid argument passed to jsPDF.hpf");return J(F,16)};var P=g.f2=g.__private__.f2=function(F){if(isNaN(F))throw new Error("Invalid argument passed to jsPDF.f2");return J(F,2)},K=g.__private__.f3=function(F){if(isNaN(F))throw new Error("Invalid argument passed to jsPDF.f3");return J(F,3)},H=g.scale=g.__private__.scale=function(F){if(isNaN(F))throw new Error("Invalid argument passed to jsPDF.scale");return L===S?F*$t:L===E?F:void 0},se=function(F){return H((function(oe){return L===S?wi()-oe:L===E?oe:void 0})(F))};g.__private__.setPrecision=g.setPrecision=function(F){typeof parseInt(F,10)=="number"&&(t=parseInt(F,10))};var X,R="00000000000000000000000000000000",Q=g.__private__.getFileId=function(){return R},Y=g.__private__.setFileId=function(F){return R=F!==void 0&&/^[a-fA-F0-9]{32}$/.test(F)?F.toUpperCase():R.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),m!==null&&(zs=new Sh(m.userPermissions,m.userPassword,m.ownerPassword,R)),R};g.setFileId=function(F){return Y(F),this},g.getFileId=function(){return Q()};var $=g.__private__.convertDateToPDFDate=function(F){var oe=F.getTimezoneOffset(),_e=oe<0?"+":"-",Le=Math.floor(Math.abs(oe/60)),ze=Math.abs(oe%60),ot=[_e,de(Le),"'",de(ze),"'"].join("");return["D:",F.getFullYear(),de(F.getMonth()+1),de(F.getDate()),de(F.getHours()),de(F.getMinutes()),de(F.getSeconds()),ot].join("")},me=g.__private__.convertPDFDateToDate=function(F){var oe=parseInt(F.substr(2,4),10),_e=parseInt(F.substr(6,2),10)-1,Le=parseInt(F.substr(8,2),10),ze=parseInt(F.substr(10,2),10),ot=parseInt(F.substr(12,2),10),mt=parseInt(F.substr(14,2),10);return new Date(oe,_e,Le,ze,ot,mt,0)},D=g.__private__.setCreationDate=function(F){var oe;if(F===void 0&&(F=new Date),F instanceof Date)oe=$(F);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(F))throw new Error("Invalid argument passed to jsPDF.setCreationDate");oe=F}return X=oe},U=g.__private__.getCreationDate=function(F){var oe=X;return F==="jsDate"&&(oe=me(X)),oe};g.setCreationDate=function(F){return D(F),this},g.getCreationDate=function(F){return U(F)};var le,de=g.__private__.padd2=function(F){return("0"+parseInt(F)).slice(-2)},G=g.__private__.padd2Hex=function(F){return("00"+(F=F.toString())).substr(F.length)},je=0,De=[],Pe=[],ke=0,Ye=[],Qe=[],et=!1,Xe=Pe;g.__private__.setCustomOutputDestination=function(F){et=!0,Xe=F};var re=function(F){et||(Xe=F)};g.__private__.resetCustomOutputDestination=function(){et=!1,Xe=Pe};var ne=g.__private__.out=function(F){return F=F.toString(),ke+=F.length+1,Xe.push(F),Xe},Se=g.__private__.write=function(F){return ne(arguments.length===1?F.toString():Array.prototype.join.call(arguments," "))},Ve=g.__private__.getArrayBuffer=function(F){for(var oe=F.length,_e=new ArrayBuffer(oe),Le=new Uint8Array(_e);oe--;)Le[oe]=F.charCodeAt(oe);return _e},xt=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];g.__private__.getStandardFonts=function(){return xt};var ee=s.fontSize||16;g.__private__.setFontSize=g.setFontSize=function(F){return ee=L===E?F/$t:F,this};var Ie,He=g.__private__.getFontSize=g.getFontSize=function(){return L===S?ee:ee*$t},Lt=s.R2L||!1;g.__private__.setR2L=g.setR2L=function(F){return Lt=F,this},g.__private__.getR2L=g.getR2L=function(){return Lt};var Dt,Mt=g.__private__.setZoomMode=function(F){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(F))Ie=F;else if(isNaN(F)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(F)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+F+'" is not recognized.');Ie=F}else Ie=parseInt(F,10)};g.__private__.getZoomMode=function(){return Ie};var At,Bt=g.__private__.setPageMode=function(F){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(F)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+F+'" is not recognized.');Dt=F};g.__private__.getPageMode=function(){return Dt};var rs=g.__private__.setLayoutMode=function(F){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(F)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+F+'" is not recognized.');At=F};g.__private__.getLayoutMode=function(){return At},g.__private__.setDisplayMode=g.setDisplayMode=function(F,oe,_e){return Mt(F),rs(oe),Bt(_e),this};var kt={title:"",subject:"",author:"",keywords:"",creator:""};g.__private__.getDocumentProperty=function(F){if(Object.keys(kt).indexOf(F)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return kt[F]},g.__private__.getDocumentProperties=function(){return kt},g.__private__.setDocumentProperties=g.setProperties=g.setDocumentProperties=function(F){for(var oe in kt)kt.hasOwnProperty(oe)&&F[oe]&&(kt[oe]=F[oe]);return this},g.__private__.setDocumentProperty=function(F,oe){if(Object.keys(kt).indexOf(F)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return kt[F]=oe};var zt,$t,bt,ys,Te,Je={},be={},Re=[],lt={},tt={},Et={},is={},qt=null,Pt=0,Tt=[],Ue=new d_(g),yt=s.hotfixes||[],vt={},Ce={},ve=[],Ze=function F(oe,_e,Le,ze,ot,mt){if(!(this instanceof F))return new F(oe,_e,Le,ze,ot,mt);isNaN(oe)&&(oe=1),isNaN(_e)&&(_e=0),isNaN(Le)&&(Le=0),isNaN(ze)&&(ze=1),isNaN(ot)&&(ot=0),isNaN(mt)&&(mt=0),this._matrix=[oe,_e,Le,ze,ot,mt]};Object.defineProperty(Ze.prototype,"sx",{get:function(){return this._matrix[0]},set:function(F){this._matrix[0]=F}}),Object.defineProperty(Ze.prototype,"shy",{get:function(){return this._matrix[1]},set:function(F){this._matrix[1]=F}}),Object.defineProperty(Ze.prototype,"shx",{get:function(){return this._matrix[2]},set:function(F){this._matrix[2]=F}}),Object.defineProperty(Ze.prototype,"sy",{get:function(){return this._matrix[3]},set:function(F){this._matrix[3]=F}}),Object.defineProperty(Ze.prototype,"tx",{get:function(){return this._matrix[4]},set:function(F){this._matrix[4]=F}}),Object.defineProperty(Ze.prototype,"ty",{get:function(){return this._matrix[5]},set:function(F){this._matrix[5]=F}}),Object.defineProperty(Ze.prototype,"a",{get:function(){return this._matrix[0]},set:function(F){this._matrix[0]=F}}),Object.defineProperty(Ze.prototype,"b",{get:function(){return this._matrix[1]},set:function(F){this._matrix[1]=F}}),Object.defineProperty(Ze.prototype,"c",{get:function(){return this._matrix[2]},set:function(F){this._matrix[2]=F}}),Object.defineProperty(Ze.prototype,"d",{get:function(){return this._matrix[3]},set:function(F){this._matrix[3]=F}}),Object.defineProperty(Ze.prototype,"e",{get:function(){return this._matrix[4]},set:function(F){this._matrix[4]=F}}),Object.defineProperty(Ze.prototype,"f",{get:function(){return this._matrix[5]},set:function(F){this._matrix[5]=F}}),Object.defineProperty(Ze.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Ze.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Ze.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Ze.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Ze.prototype.join=function(F){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(q).join(F)},Ze.prototype.multiply=function(F){var oe=F.sx*this.sx+F.shy*this.shx,_e=F.sx*this.shy+F.shy*this.sy,Le=F.shx*this.sx+F.sy*this.shx,ze=F.shx*this.shy+F.sy*this.sy,ot=F.tx*this.sx+F.ty*this.shx+this.tx,mt=F.tx*this.shy+F.ty*this.sy+this.ty;return new Ze(oe,_e,Le,ze,ot,mt)},Ze.prototype.decompose=function(){var F=this.sx,oe=this.shy,_e=this.shx,Le=this.sy,ze=this.tx,ot=this.ty,mt=Math.sqrt(F*F+oe*oe),Yt=(F/=mt)*_e+(oe/=mt)*Le;_e-=F*Yt,Le-=oe*Yt;var Gt=Math.sqrt(_e*_e+Le*Le);return Yt/=Gt,F*(Le/=Gt)<oe*(_e/=Gt)&&(F=-F,oe=-oe,Yt=-Yt,mt=-mt),{scale:new Ze(mt,0,0,Gt,0,0),translate:new Ze(1,0,0,1,ze,ot),rotate:new Ze(F,oe,-oe,F,0,0),skew:new Ze(1,0,Yt,1,0,0)}},Ze.prototype.toString=function(F){return this.join(" ")},Ze.prototype.inversed=function(){var F=this.sx,oe=this.shy,_e=this.shx,Le=this.sy,ze=this.tx,ot=this.ty,mt=1/(F*Le-oe*_e),Yt=Le*mt,Gt=-oe*mt,ls=-_e*mt,xs=F*mt;return new Ze(Yt,Gt,ls,xs,-Yt*ze-ls*ot,-Gt*ze-xs*ot)},Ze.prototype.applyToPoint=function(F){var oe=F.x*this.sx+F.y*this.shx+this.tx,_e=F.x*this.shy+F.y*this.sy+this.ty;return new Pr(oe,_e)},Ze.prototype.applyToRectangle=function(F){var oe=this.applyToPoint(F),_e=this.applyToPoint(new Pr(F.x+F.w,F.y+F.h));return new bi(oe.x,oe.y,_e.x-oe.x,_e.y-oe.y)},Ze.prototype.clone=function(){var F=this.sx,oe=this.shy,_e=this.shx,Le=this.sy,ze=this.tx,ot=this.ty;return new Ze(F,oe,_e,Le,ze,ot)},g.Matrix=Ze;var Wt=g.matrixMult=function(F,oe){return oe.multiply(F)},Fs=new Ze(1,0,0,1,0,0);g.unitMatrix=g.identityMatrix=Fs;var Ts=function(F,oe){if(!tt[F]){var _e=(oe instanceof Au?"Sh":"P")+(Object.keys(lt).length+1).toString(10);oe.id=_e,tt[F]=_e,lt[_e]=oe,Ue.publish("addPattern",oe)}};g.ShadingPattern=Au,g.TilingPattern=kh,g.addShadingPattern=function(F,oe){return B("addShadingPattern()"),Ts(F,oe),this},g.beginTilingPattern=function(F){B("beginTilingPattern()"),Xi(F.boundingBox[0],F.boundingBox[1],F.boundingBox[2]-F.boundingBox[0],F.boundingBox[3]-F.boundingBox[1],F.matrix)},g.endTilingPattern=function(F,oe){B("endTilingPattern()"),oe.stream=Qe[le].join(`
`),Ts(F,oe),Ue.publish("endTilingPattern",oe),ve.pop().restore()};var aa,Os=g.__private__.newObject=function(){var F=$s();return ja(F,!0),F},$s=g.__private__.newObjectDeferred=function(){return je++,De[je]=function(){return ke},je},ja=function(F,oe){return oe=typeof oe=="boolean"&&oe,De[F]=ke,oe&&ne(F+" 0 obj"),F},Ln=g.__private__.newAdditionalObject=function(){var F={objId:$s(),content:""};return Ye.push(F),F},La=$s(),Zs=$s(),Sa=g.__private__.decodeColorString=function(F){var oe=F.split(" ");if(oe.length!==2||oe[1]!=="g"&&oe[1]!=="G")oe.length!==5||oe[4]!=="k"&&oe[4]!=="K"||(oe=[(1-oe[0])*(1-oe[3]),(1-oe[1])*(1-oe[3]),(1-oe[2])*(1-oe[3]),"r"]);else{var _e=parseFloat(oe[0]);oe=[_e,_e,_e,"r"]}for(var Le="#",ze=0;ze<3;ze++)Le+=("0"+Math.floor(255*parseFloat(oe[ze])).toString(16)).slice(-2);return Le},cn=g.__private__.encodeColorString=function(F){var oe;typeof F=="string"&&(F={ch1:F});var _e=F.ch1,Le=F.ch2,ze=F.ch3,ot=F.ch4,mt=F.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof _e=="string"&&_e.charAt(0)!=="#"){var Yt=new RA(_e);if(Yt.ok)_e=Yt.toHex();else if(!/^\d*\.?\d*$/.test(_e))throw new Error('Invalid color "'+_e+'" passed to jsPDF.encodeColorString.')}if(typeof _e=="string"&&/^#[0-9A-Fa-f]{3}$/.test(_e)&&(_e="#"+_e[1]+_e[1]+_e[2]+_e[2]+_e[3]+_e[3]),typeof _e=="string"&&/^#[0-9A-Fa-f]{6}$/.test(_e)){var Gt=parseInt(_e.substr(1),16);_e=Gt>>16&255,Le=Gt>>8&255,ze=255&Gt}if(Le===void 0||ot===void 0&&_e===Le&&Le===ze)oe=typeof _e=="string"?_e+" "+mt[0]:F.precision===2?P(_e/255)+" "+mt[0]:K(_e/255)+" "+mt[0];else if(ot===void 0||va(ot)==="object"){if(ot&&!isNaN(ot.a)&&ot.a===0)return["1.","1.","1.",mt[1]].join(" ");oe=typeof _e=="string"?[_e,Le,ze,mt[1]].join(" "):F.precision===2?[P(_e/255),P(Le/255),P(ze/255),mt[1]].join(" "):[K(_e/255),K(Le/255),K(ze/255),mt[1]].join(" ")}else oe=typeof _e=="string"?[_e,Le,ze,ot,mt[2]].join(" "):F.precision===2?[P(_e),P(Le),P(ze),P(ot),mt[2]].join(" "):[K(_e),K(Le),K(ze),K(ot),mt[2]].join(" ");return oe},yr=g.__private__.getFilters=function(){return o},Ar=g.__private__.putStream=function(F){var oe=(F=F||{}).data||"",_e=F.filters||yr(),Le=F.alreadyAppliedFilters||[],ze=F.addLength1||!1,ot=oe.length,mt=F.objectId,Yt=function(Xa){return Xa};if(m!==null&&mt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");m!==null&&(Yt=zs.encryptor(mt,0));var Gt={};_e===!0&&(_e=["FlateEncode"]);var ls=F.additionalKeyValues||[],xs=(Gt=ts.API.processDataByFilters!==void 0?ts.API.processDataByFilters(oe,_e):{data:oe,reverseChain:[]}).reverseChain+(Array.isArray(Le)?Le.join(" "):Le.toString());if(Gt.data.length!==0&&(ls.push({key:"Length",value:Gt.data.length}),ze===!0&&ls.push({key:"Length1",value:ot})),xs.length!=0)if(xs.split("/").length-1==1)ls.push({key:"Filter",value:xs});else{ls.push({key:"Filter",value:"["+xs+"]"});for(var Vs=0;Vs<ls.length;Vs+=1)if(ls[Vs].key==="DecodeParms"){for(var sa=[],Aa=0;Aa<Gt.reverseChain.split("/").length-1;Aa+=1)sa.push("null");sa.push(ls[Vs].value),ls[Vs].value="["+sa.join(" ")+"]"}}ne("<<");for(var ha=0;ha<ls.length;ha++)ne("/"+ls[ha].key+" "+ls[ha].value);ne(">>"),Gt.data.length!==0&&(ne("stream"),ne(Yt(Gt.data)),ne("endstream"))},kr=g.__private__.putPage=function(F){var oe=F.number,_e=F.data,Le=F.objId,ze=F.contentsObjId;ja(Le,!0),ne("<</Type /Page"),ne("/Parent "+F.rootDictionaryObjId+" 0 R"),ne("/Resources "+F.resourceDictionaryObjId+" 0 R"),ne("/MediaBox ["+parseFloat(q(F.mediaBox.bottomLeftX))+" "+parseFloat(q(F.mediaBox.bottomLeftY))+" "+q(F.mediaBox.topRightX)+" "+q(F.mediaBox.topRightY)+"]"),F.cropBox!==null&&ne("/CropBox ["+q(F.cropBox.bottomLeftX)+" "+q(F.cropBox.bottomLeftY)+" "+q(F.cropBox.topRightX)+" "+q(F.cropBox.topRightY)+"]"),F.bleedBox!==null&&ne("/BleedBox ["+q(F.bleedBox.bottomLeftX)+" "+q(F.bleedBox.bottomLeftY)+" "+q(F.bleedBox.topRightX)+" "+q(F.bleedBox.topRightY)+"]"),F.trimBox!==null&&ne("/TrimBox ["+q(F.trimBox.bottomLeftX)+" "+q(F.trimBox.bottomLeftY)+" "+q(F.trimBox.topRightX)+" "+q(F.trimBox.topRightY)+"]"),F.artBox!==null&&ne("/ArtBox ["+q(F.artBox.bottomLeftX)+" "+q(F.artBox.bottomLeftY)+" "+q(F.artBox.topRightX)+" "+q(F.artBox.topRightY)+"]"),typeof F.userUnit=="number"&&F.userUnit!==1&&ne("/UserUnit "+F.userUnit),Ue.publish("putPage",{objId:Le,pageContext:Tt[oe],pageNumber:oe,page:_e}),ne("/Contents "+ze+" 0 R"),ne(">>"),ne("endobj");var ot=_e.join(`
`);return L===E&&(ot+=`
Q`),ja(ze,!0),Ar({data:ot,filters:yr(),objectId:ze}),ne("endobj"),Le},pa=g.__private__.putPages=function(){var F,oe,_e=[];for(F=1;F<=Pt;F++)Tt[F].objId=$s(),Tt[F].contentsObjId=$s();for(F=1;F<=Pt;F++)_e.push(kr({number:F,data:Qe[F],objId:Tt[F].objId,contentsObjId:Tt[F].contentsObjId,mediaBox:Tt[F].mediaBox,cropBox:Tt[F].cropBox,bleedBox:Tt[F].bleedBox,trimBox:Tt[F].trimBox,artBox:Tt[F].artBox,userUnit:Tt[F].userUnit,rootDictionaryObjId:La,resourceDictionaryObjId:Zs}));ja(La,!0),ne("<</Type /Pages");var Le="/Kids [";for(oe=0;oe<Pt;oe++)Le+=_e[oe]+" 0 R ";ne(Le+"]"),ne("/Count "+Pt),ne(">>"),ne("endobj"),Ue.publish("postPutPages")},Ca=function(F){Ue.publish("putFont",{font:F,out:ne,newObject:Os,putStream:Ar}),F.isAlreadyPutted!==!0&&(F.objectNumber=Os(),ne("<<"),ne("/Type /Font"),ne("/BaseFont /"+Ch(F.postScriptName)),ne("/Subtype /Type1"),typeof F.encoding=="string"&&ne("/Encoding /"+F.encoding),ne("/FirstChar 32"),ne("/LastChar 255"),ne(">>"),ne("endobj"))},Ya=function(F){F.objectNumber=Os();var oe=[];oe.push({key:"Type",value:"/XObject"}),oe.push({key:"Subtype",value:"/Form"}),oe.push({key:"BBox",value:"["+[q(F.x),q(F.y),q(F.x+F.width),q(F.y+F.height)].join(" ")+"]"}),oe.push({key:"Matrix",value:"["+F.matrix.toString()+"]"});var _e=F.pages[1].join(`
`);Ar({data:_e,additionalKeyValues:oe,objectId:F.objectNumber}),ne("endobj")},ga=function(F,oe){oe||(oe=21);var _e=Os(),Le=(function(mt,Yt){var Gt,ls=[],xs=1/(Yt-1);for(Gt=0;Gt<1;Gt+=xs)ls.push(Gt);if(ls.push(1),mt[0].offset!=0){var Vs={offset:0,color:mt[0].color};mt.unshift(Vs)}if(mt[mt.length-1].offset!=1){var sa={offset:1,color:mt[mt.length-1].color};mt.push(sa)}for(var Aa="",ha=0,Xa=0;Xa<ls.length;Xa++){for(Gt=ls[Xa];Gt>mt[ha+1].offset;)ha++;var Ga=mt[ha].offset,xn=(Gt-Ga)/(mt[ha+1].offset-Ga),Ir=mt[ha].color,or=mt[ha+1].color;Aa+=G(Math.round((1-xn)*Ir[0]+xn*or[0]).toString(16))+G(Math.round((1-xn)*Ir[1]+xn*or[1]).toString(16))+G(Math.round((1-xn)*Ir[2]+xn*or[2]).toString(16))}return Aa.trim()})(F.colors,oe),ze=[];ze.push({key:"FunctionType",value:"0"}),ze.push({key:"Domain",value:"[0.0 1.0]"}),ze.push({key:"Size",value:"["+oe+"]"}),ze.push({key:"BitsPerSample",value:"8"}),ze.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ze.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ar({data:Le,additionalKeyValues:ze,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:_e}),ne("endobj"),F.objectNumber=Os(),ne("<< /ShadingType "+F.type),ne("/ColorSpace /DeviceRGB");var ot="/Coords ["+q(parseFloat(F.coords[0]))+" "+q(parseFloat(F.coords[1]))+" ";F.type===2?ot+=q(parseFloat(F.coords[2]))+" "+q(parseFloat(F.coords[3])):ot+=q(parseFloat(F.coords[2]))+" "+q(parseFloat(F.coords[3]))+" "+q(parseFloat(F.coords[4]))+" "+q(parseFloat(F.coords[5])),ne(ot+="]"),F.matrix&&ne("/Matrix ["+F.matrix.toString()+"]"),ne("/Function "+_e+" 0 R"),ne("/Extend [true true]"),ne(">>"),ne("endobj")},ir=function(F,oe){var _e=$s(),Le=Os();oe.push({resourcesOid:_e,objectOid:Le}),F.objectNumber=Le;var ze=[];ze.push({key:"Type",value:"/Pattern"}),ze.push({key:"PatternType",value:"1"}),ze.push({key:"PaintType",value:"1"}),ze.push({key:"TilingType",value:"1"}),ze.push({key:"BBox",value:"["+F.boundingBox.map(q).join(" ")+"]"}),ze.push({key:"XStep",value:q(F.xStep)}),ze.push({key:"YStep",value:q(F.yStep)}),ze.push({key:"Resources",value:_e+" 0 R"}),F.matrix&&ze.push({key:"Matrix",value:"["+F.matrix.toString()+"]"}),Ar({data:F.stream,additionalKeyValues:ze,objectId:F.objectNumber}),ne("endobj")},Dr=function(F){for(var oe in F.objectNumber=Os(),ne("<<"),F)switch(oe){case"opacity":ne("/ca "+P(F[oe]));break;case"stroke-opacity":ne("/CA "+P(F[oe]))}ne(">>"),ne("endobj")},Pn=function(F){ja(F.resourcesOid,!0),ne("<<"),ne("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var oe in ne("/Font <<"),Je)Je.hasOwnProperty(oe)&&(p===!1||p===!0&&y.hasOwnProperty(oe))&&ne("/"+oe+" "+Je[oe].objectNumber+" 0 R");ne(">>")})(),(function(){if(Object.keys(lt).length>0){for(var oe in ne("/Shading <<"),lt)lt.hasOwnProperty(oe)&&lt[oe]instanceof Au&&lt[oe].objectNumber>=0&&ne("/"+oe+" "+lt[oe].objectNumber+" 0 R");Ue.publish("putShadingPatternDict"),ne(">>")}})(),(function(oe){if(Object.keys(lt).length>0){for(var _e in ne("/Pattern <<"),lt)lt.hasOwnProperty(_e)&&lt[_e]instanceof g.TilingPattern&&lt[_e].objectNumber>=0&&lt[_e].objectNumber<oe&&ne("/"+_e+" "+lt[_e].objectNumber+" 0 R");Ue.publish("putTilingPatternDict"),ne(">>")}})(F.objectOid),(function(){if(Object.keys(Et).length>0){var oe;for(oe in ne("/ExtGState <<"),Et)Et.hasOwnProperty(oe)&&Et[oe].objectNumber>=0&&ne("/"+oe+" "+Et[oe].objectNumber+" 0 R");Ue.publish("putGStateDict"),ne(">>")}})(),(function(){for(var oe in ne("/XObject <<"),vt)vt.hasOwnProperty(oe)&&vt[oe].objectNumber>=0&&ne("/"+oe+" "+vt[oe].objectNumber+" 0 R");Ue.publish("putXobjectDict"),ne(">>")})(),ne(">>"),ne("endobj")},ua=function(F){be[F.fontName]=be[F.fontName]||{},be[F.fontName][F.fontStyle]=F.id},Co=function(F,oe,_e,Le,ze){var ot={id:"F"+(Object.keys(Je).length+1).toString(10),postScriptName:F,fontName:oe,fontStyle:_e,encoding:Le,isStandardFont:ze||!1,metadata:{}};return Ue.publish("addFont",{font:ot,instance:this}),Je[ot.id]=ot,ua(ot),ot.id},Wn=g.__private__.pdfEscape=g.pdfEscape=function(F,oe){return(function(_e,Le){var ze,ot,mt,Yt,Gt,ls,xs,Vs,sa;if(mt=(Le=Le||{}).sourceEncoding||"Unicode",Gt=Le.outputEncoding,(Le.autoencode||Gt)&&Je[zt].metadata&&Je[zt].metadata[mt]&&Je[zt].metadata[mt].encoding&&(Yt=Je[zt].metadata[mt].encoding,!Gt&&Je[zt].encoding&&(Gt=Je[zt].encoding),!Gt&&Yt.codePages&&(Gt=Yt.codePages[0]),typeof Gt=="string"&&(Gt=Yt[Gt]),Gt)){for(xs=!1,ls=[],ze=0,ot=_e.length;ze<ot;ze++)(Vs=Gt[_e.charCodeAt(ze)])?ls.push(String.fromCharCode(Vs)):ls.push(_e[ze]),ls[ze].charCodeAt(0)>>8&&(xs=!0);_e=ls.join("")}for(ze=_e.length;xs===void 0&&ze!==0;)_e.charCodeAt(ze-1)>>8&&(xs=!0),ze--;if(!xs)return _e;for(ls=Le.noBOM?[]:[254,255],ze=0,ot=_e.length;ze<ot;ze++){if((sa=(Vs=_e.charCodeAt(ze))>>8)>>8)throw new Error("Character at position "+ze+" of string '"+_e+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");ls.push(sa),ls.push(Vs-(sa<<8))}return String.fromCharCode.apply(void 0,ls)})(F,oe).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Fn=g.__private__.beginPage=function(F){Qe[++Pt]=[],Tt[Pt]={objId:0,contentsObjId:0,userUnit:Number(c),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(F[0]),topRightY:Number(F[1])}},Yl(Pt),re(Qe[le])},hi=function(F,oe){var _e,Le,ze;switch(a=oe||a,typeof F=="string"&&(_e=v(F.toLowerCase()),Array.isArray(_e)&&(Le=_e[0],ze=_e[1])),Array.isArray(F)&&(Le=F[0]*$t,ze=F[1]*$t),isNaN(Le)&&(Le=r[0],ze=r[1]),(Le>14400||ze>14400)&&(Ta.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Le=Math.min(14400,Le),ze=Math.min(14400,ze)),r=[Le,ze],a.substr(0,1)){case"l":ze>Le&&(r=[ze,Le]);break;case"p":Le>ze&&(r=[ze,Le])}Fn(r),gi(yl),ne(Kn),Zl!==0&&ne(Zl+" J"),Ka!==0&&ne(Ka+" j"),Ue.publish("addPage",{pageNumber:Pt})},Wl=function(F){F>0&&F<=Pt&&(Qe.splice(F,1),Tt.splice(F,1),Pt--,le>Pt&&(le=Pt),this.setPage(le))},Yl=function(F){F>0&&F<=Pt&&(le=F)},Ao=g.__private__.getNumberOfPages=g.getNumberOfPages=function(){return Qe.length-1},lc=function(F,oe,_e){var Le,ze=void 0;return _e=_e||{},F=F!==void 0?F:Je[zt].fontName,oe=oe!==void 0?oe:Je[zt].fontStyle,Le=F.toLowerCase(),be[Le]!==void 0&&be[Le][oe]!==void 0?ze=be[Le][oe]:be[F]!==void 0&&be[F][oe]!==void 0?ze=be[F][oe]:_e.disableWarning===!1&&Ta.warn("Unable to look up font label for font '"+F+"', '"+oe+"'. Refer to getFontList() for available fonts."),ze||_e.noFallback||(ze=be.times[oe])==null&&(ze=be.times.normal),ze},fi=g.__private__.putInfo=function(){var F=Os(),oe=function(Le){return Le};for(var _e in m!==null&&(oe=zs.encryptor(F,0)),ne("<<"),ne("/Producer ("+Wn(oe("jsPDF "+ts.version))+")"),kt)kt.hasOwnProperty(_e)&&kt[_e]&&ne("/"+_e.substr(0,1).toUpperCase()+_e.substr(1)+" ("+Wn(oe(kt[_e]))+")");ne("/CreationDate ("+Wn(oe(X))+")"),ne(">>"),ne("endobj")},Kl=g.__private__.putCatalog=function(F){var oe=(F=F||{}).rootDictionaryObjId||La;switch(Os(),ne("<<"),ne("/Type /Catalog"),ne("/Pages "+oe+" 0 R"),Ie||(Ie="fullwidth"),Ie){case"fullwidth":ne("/OpenAction [3 0 R /FitH null]");break;case"fullheight":ne("/OpenAction [3 0 R /FitV null]");break;case"fullpage":ne("/OpenAction [3 0 R /Fit]");break;case"original":ne("/OpenAction [3 0 R /XYZ null null 1]");break;default:var _e=""+Ie;_e.substr(_e.length-1)==="%"&&(Ie=parseInt(Ie)/100),typeof Ie=="number"&&ne("/OpenAction [3 0 R /XYZ null null "+P(Ie)+"]")}switch(At||(At="continuous"),At){case"continuous":ne("/PageLayout /OneColumn");break;case"single":ne("/PageLayout /SinglePage");break;case"two":case"twoleft":ne("/PageLayout /TwoColumnLeft");break;case"tworight":ne("/PageLayout /TwoColumnRight")}Dt&&ne("/PageMode /"+Dt),Ue.publish("putCatalog"),ne(">>"),ne("endobj")},ta=g.__private__.putTrailer=function(){ne("trailer"),ne("<<"),ne("/Size "+(je+1)),ne("/Root "+je+" 0 R"),ne("/Info "+(je-1)+" 0 R"),m!==null&&ne("/Encrypt "+zs.oid+" 0 R"),ne("/ID [ <"+R+"> <"+R+"> ]"),ne(">>")},In=g.__private__.putHeader=function(){ne("%PDF-"+j),ne("%")},ko=g.__private__.putXRef=function(){var F="0000000000";ne("xref"),ne("0 "+(je+1)),ne("0000000000 65535 f ");for(var oe=1;oe<=je;oe++)typeof De[oe]=="function"?ne((F+De[oe]()).slice(-10)+" 00000 n "):De[oe]!==void 0?ne((F+De[oe]).slice(-10)+" 00000 n "):ne("0000000000 00000 n ")},mi=g.__private__.buildDocument=function(){var F;je=0,ke=0,Pe=[],De=[],Ye=[],La=$s(),Zs=$s(),re(Pe),Ue.publish("buildDocument"),In(),pa(),(function(){Ue.publish("putAdditionalObjects");for(var _e=0;_e<Ye.length;_e++){var Le=Ye[_e];ja(Le.objId,!0),ne(Le.content),ne("endobj")}Ue.publish("postPutAdditionalObjects")})(),F=[],(function(){for(var _e in Je)Je.hasOwnProperty(_e)&&(p===!1||p===!0&&y.hasOwnProperty(_e))&&Ca(Je[_e])})(),(function(){var _e;for(_e in Et)Et.hasOwnProperty(_e)&&Dr(Et[_e])})(),(function(){for(var _e in vt)vt.hasOwnProperty(_e)&&Ya(vt[_e])})(),(function(_e){var Le;for(Le in lt)lt.hasOwnProperty(Le)&&(lt[Le]instanceof Au?ga(lt[Le]):lt[Le]instanceof kh&&ir(lt[Le],_e))})(F),Ue.publish("putResources"),F.forEach(Pn),Pn({resourcesOid:Zs,objectOid:Number.MAX_SAFE_INTEGER}),Ue.publish("postPutResources"),m!==null&&(zs.oid=Os(),ne("<<"),ne("/Filter /Standard"),ne("/V "+zs.v),ne("/R "+zs.r),ne("/U <"+zs.toHexString(zs.U)+">"),ne("/O <"+zs.toHexString(zs.O)+">"),ne("/P "+zs.P),ne(">>"),ne("endobj")),fi(),Kl();var oe=ke;return ko(),ta(),ne("startxref"),ne(""+oe),ne("%%EOF"),re(Qe[le]),Pe.join(`
`)},pi=g.__private__.getBlob=function(F){return new Blob([Ve(F)],{type:"application/pdf"})},vr=g.output=g.__private__.output=(aa=function(F,oe){switch(typeof(oe=oe||{})=="string"?oe={filename:oe}:oe.filename=oe.filename||"generated.pdf",F){case void 0:return mi();case"save":g.save(oe.filename);break;case"arraybuffer":return Ve(mi());case"blob":return pi(mi());case"bloburi":case"bloburl":if(js.URL!==void 0&&typeof js.URL.createObjectURL=="function")return js.URL&&js.URL.createObjectURL(pi(mi()))||void 0;Ta.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var _e="",Le=mi();try{_e=l_(Le)}catch{_e=l_(unescape(encodeURIComponent(Le)))}return"data:application/pdf;filename="+oe.filename+";base64,"+_e;case"pdfobjectnewwindow":if(Object.prototype.toString.call(js)==="[object Window]"){var ze="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",ot=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';oe.pdfObjectUrl&&(ze=oe.pdfObjectUrl,ot="");var mt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+ze+'"'+ot+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(oe)+");<\/script></body></html>",Yt=js.open();return Yt!==null&&Yt.document.write(mt),Yt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(js)==="[object Window]"){var Gt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(oe.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+oe.filename+'" width="500px" height="400px" /></body></html>',ls=js.open();if(ls!==null){ls.document.write(Gt);var xs=this;ls.document.documentElement.querySelector("#pdfViewer").onload=function(){ls.document.title=oe.filename,ls.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(xs.output("bloburl"))}}return ls}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(js)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Vs='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",oe)+'"></iframe></body></html>',sa=js.open();if(sa!==null&&(sa.document.write(Vs),sa.document.title=oe.filename),sa||typeof safari>"u")return sa;break;case"datauri":case"dataurl":return js.document.location.href=this.output("datauristring",oe);default:return null}},aa.foo=function(){try{return aa.apply(this,arguments)}catch(_e){var F=_e.stack||"";~F.indexOf(" at ")&&(F=F.split(" at ")[1]);var oe="Error in function "+F.split(`
`)[0].split("<")[0]+": "+_e.message;if(!js.console)throw new Error(oe);js.console.error(oe,_e),js.alert&&alert(oe)}},aa.foo.bar=aa,aa.foo),an=function(F){return Array.isArray(yt)===!0&&yt.indexOf(F)>-1};switch(n){case"pt":$t=1;break;case"mm":$t=72/25.4;break;case"cm":$t=72/2.54;break;case"in":$t=72;break;case"px":$t=an("px_scaling")==1?.75:96/72;break;case"pc":case"em":$t=12;break;case"ex":$t=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);$t=n}var zs=null;D(),Y();var Pa=g.__private__.getPageInfo=g.getPageInfo=function(F){if(isNaN(F)||F%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Tt[F].objId,pageNumber:F,pageContext:Tt[F]}},On=g.__private__.getPageInfoByObjId=function(F){if(isNaN(F)||F%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var oe in Tt)if(Tt[oe].objId===F)break;return Pa(oe)},Do=g.__private__.getCurrentPageInfo=g.getCurrentPageInfo=function(){return{objId:Tt[le].objId,pageNumber:le,pageContext:Tt[le]}};g.addPage=function(){return hi.apply(this,arguments),this},g.setPage=function(){return Yl.apply(this,arguments),re.call(this,Qe[le]),this},g.insertPage=function(F){return this.addPage(),this.movePage(le,F),this},g.movePage=function(F,oe){var _e,Le;if(F>oe){_e=Qe[F],Le=Tt[F];for(var ze=F;ze>oe;ze--)Qe[ze]=Qe[ze-1],Tt[ze]=Tt[ze-1];Qe[oe]=_e,Tt[oe]=Le,this.setPage(oe)}else if(F<oe){_e=Qe[F],Le=Tt[F];for(var ot=F;ot<oe;ot++)Qe[ot]=Qe[ot+1],Tt[ot]=Tt[ot+1];Qe[oe]=_e,Tt[oe]=Le,this.setPage(oe)}return this},g.deletePage=function(){return Wl.apply(this,arguments),this},g.__private__.text=g.text=function(F,oe,_e,Le,ze){var ot,mt,Yt,Gt,ls,xs,Vs,sa,Aa,ha=(Le=Le||{}).scope||this;if(typeof F=="number"&&typeof oe=="number"&&(typeof _e=="string"||Array.isArray(_e))){var Xa=_e;_e=oe,oe=F,F=Xa}if(arguments[3]instanceof Ze==0?(Yt=arguments[4],Gt=arguments[5],va(Vs=arguments[3])==="object"&&Vs!==null||(typeof Yt=="string"&&(Gt=Yt,Yt=null),typeof Vs=="string"&&(Gt=Vs,Vs=null),typeof Vs=="number"&&(Yt=Vs,Vs=null),Le={flags:Vs,angle:Yt,align:Gt})):(B("The transform parameter of text() with a Matrix value"),Aa=ze),isNaN(oe)||isNaN(_e)||F==null)throw new Error("Invalid arguments passed to jsPDF.text");if(F.length===0)return ha;var Ga,xn="",Ir=typeof Le.lineHeightFactor=="number"?Le.lineHeightFactor:Er,or=ha.internal.scaleFactor;function mc(Ws){return Ws=Ws.split("	").join(Array(Le.TabLen||9).join(" ")),Wn(Ws,Vs)}function eo(Ws){for(var Ms,na=Ws.concat(),za=[],Ei=na.length;Ei--;)typeof(Ms=na.shift())=="string"?za.push(Ms):Array.isArray(Ws)&&(Ms.length===1||Ms[1]===void 0&&Ms[2]===void 0)?za.push(Ms[0]):za.push([Ms[0],Ms[1],Ms[2]]);return za}function to(Ws,Ms){var na;if(typeof Ws=="string")na=Ms(Ws)[0];else if(Array.isArray(Ws)){for(var za,Ei,jn=Ws.concat(),Zn=[],Ro=jn.length;Ro--;)typeof(za=jn.shift())=="string"?Zn.push(Ms(za)[0]):Array.isArray(za)&&typeof za[0]=="string"&&(Ei=Ms(za[0],za[1],za[2]),Zn.push([Ei[0],Ei[1],Ei[2]]));na=Zn}return na}var Gn=!1,bn=!0;if(typeof F=="string")Gn=!0;else if(Array.isArray(F)){var so=F.concat();mt=[];for(var ni,yn=so.length;yn--;)(typeof(ni=so.shift())!="string"||Array.isArray(ni)&&typeof ni[0]!="string")&&(bn=!1);Gn=bn}if(Gn===!1)throw new Error('Type of text must be string or Array. "'+F+'" is not recognized.');typeof F=="string"&&(F=F.match(/[\r?\n]/)?F.split(/\r\n|\r|\n/g):[F]);var Nl=ee/ha.internal.scaleFactor,wl=Nl*(Ir-1);switch(Le.baseline){case"bottom":_e-=wl;break;case"top":_e+=Nl-wl;break;case"hanging":_e+=Nl-2*wl;break;case"middle":_e+=Nl/2-wl}if((xs=Le.maxWidth||0)>0&&(typeof F=="string"?F=ha.splitTextToSize(F,xs):Object.prototype.toString.call(F)==="[object Array]"&&(F=F.reduce(function(Ws,Ms){return Ws.concat(ha.splitTextToSize(Ms,xs))},[]))),ot={text:F,x:oe,y:_e,options:Le,mutex:{pdfEscape:Wn,activeFontKey:zt,fonts:Je,activeFontSize:ee}},Ue.publish("preProcessText",ot),F=ot.text,Yt=(Le=ot.options).angle,Aa instanceof Ze==0&&Yt&&typeof Yt=="number"){Yt*=Math.PI/180,Le.rotationDirection===0&&(Yt=-Yt),L===E&&(Yt=-Yt);var Po=Math.cos(Yt),_i=Math.sin(Yt);Aa=new Ze(Po,_i,-_i,Po,0,0)}else Yt&&Yt instanceof Ze&&(Aa=Yt);L!==E||Aa||(Aa=Fs),(ls=Le.charSpace||Lr)!==void 0&&(xn+=q(H(ls))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(sa=Le.horizontalScale)!==void 0&&(xn+=q(100*sa)+` Tz
`),Le.lang;var Ia=-1,Qi=Le.renderingMode!==void 0?Le.renderingMode:Le.stroke,Fo=ha.internal.getCurrentPageInfo().pageContext;switch(Qi){case 0:case!1:case"fill":Ia=0;break;case 1:case!0:case"stroke":Ia=1;break;case 2:case"fillThenStroke":Ia=2;break;case 3:case"invisible":Ia=3;break;case 4:case"fillAndAddForClipping":Ia=4;break;case 5:case"strokeAndAddPathForClipping":Ia=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Ia=6;break;case 7:case"addToPathForClipping":Ia=7}var Qn=Fo.usedRenderingMode!==void 0?Fo.usedRenderingMode:-1;Ia!==-1?xn+=Ia+` Tr
`:Qn!==-1&&(xn+=`0 Tr
`),Ia!==-1&&(Fo.usedRenderingMode=Ia),Gt=Le.align||"left";var cr,Or=ee*Ir,Si=ha.internal.pageSize.getWidth(),pc=Je[zt];ls=Le.charSpace||Lr,xs=Le.maxWidth||0,Vs=Object.assign({autoencode:!0,noBOM:!0},Le.flags);var ri=[],Ji=function(Ws){return ha.getStringUnitWidth(Ws,{font:pc,charSpace:ls,fontSize:ee,doKerning:!1})*ee/or};if(Object.prototype.toString.call(F)==="[object Array]"){var vn;mt=eo(F),Gt!=="left"&&(cr=mt.map(Ji));var Jn,Ci=0;if(Gt==="right"){oe-=cr[0],F=[],yn=mt.length;for(var ii=0;ii<yn;ii++)ii===0?(Jn=lr(oe),vn=Fa(_e)):(Jn=H(Ci-cr[ii]),vn=-Or),F.push([mt[ii],Jn,vn]),Ci=cr[ii]}else if(Gt==="center"){oe-=cr[0]/2,F=[],yn=mt.length;for(var Zi=0;Zi<yn;Zi++)Zi===0?(Jn=lr(oe),vn=Fa(_e)):(Jn=H((Ci-cr[Zi])/2),vn=-Or),F.push([mt[Zi],Jn,vn]),Ci=cr[Zi]}else if(Gt==="left"){F=[],yn=mt.length;for(var Io=0;Io<yn;Io++)F.push(mt[Io])}else if(Gt==="justify"&&pc.encoding==="Identity-H"){F=[],yn=mt.length,xs=xs!==0?xs:Si;for(var ao=0,Oa=0;Oa<yn;Oa++)if(vn=Oa===0?Fa(_e):-Or,Jn=Oa===0?lr(oe):ao,Oa<yn-1){var gc=H((xs-cr[Oa])/(mt[Oa].split(" ").length-1)),jr=mt[Oa].split(" ");F.push([jr[0]+" ",Jn,vn]),ao=0;for(var li=1;li<jr.length;li++){var nn=(Ji(jr[li-1]+" "+jr[li])-Ji(jr[li]))*or+gc;li==jr.length-1?F.push([jr[li],nn,0]):F.push([jr[li]+" ",nn,0]),ao-=nn}}else F.push([mt[Oa],Jn,vn]);F.push(["",ao,0])}else{if(Gt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(F=[],yn=mt.length,xs=xs!==0?xs:Si,Oa=0;Oa<yn;Oa++){vn=Oa===0?Fa(_e):-Or,Jn=Oa===0?lr(oe):0;var Qa=mt[Oa].split(" ").length-1,Oo=Qa>0?(xs-cr[Oa])/Qa:0;Oa<yn-1?ri.push(q(H(Oo))):ri.push(0),F.push([mt[Oa],Jn,vn])}}}(typeof Le.R2L=="boolean"?Le.R2L:Lt)===!0&&(F=to(F,function(Ws,Ms,na){return[Ws.split("").reverse().join(""),Ms,na]})),ot={text:F,x:oe,y:_e,options:Le,mutex:{pdfEscape:Wn,activeFontKey:zt,fonts:Je,activeFontSize:ee}},Ue.publish("postProcessText",ot),F=ot.text,Ga=ot.mutex.isHex||!1;var Mo=Je[zt].encoding;Mo!=="WinAnsiEncoding"&&Mo!=="StandardEncoding"||(F=to(F,function(Ws,Ms,na){return[mc(Ws),Ms,na]})),mt=eo(F),F=[];for(var Ai,ki,Di,no=Array.isArray(mt[0])?1:0,Nr="",el=function(Ws,Ms,na){var za="";return na instanceof Ze?(na=typeof Le.angle=="number"?Wt(na,new Ze(1,0,0,1,Ws,Ms)):Wt(new Ze(1,0,0,1,Ws,Ms),na),L===E&&(na=Wt(new Ze(1,0,0,-1,0,0),na)),za=na.join(" ")+` Tm
`):za=q(Ws)+" "+q(Ms)+` Td
`,za},Mn=0;Mn<mt.length;Mn++){switch(Nr="",no){case 1:Di=(Ga?"<":"(")+mt[Mn][0]+(Ga?">":")"),Ai=parseFloat(mt[Mn][1]),ki=parseFloat(mt[Mn][2]);break;case 0:Di=(Ga?"<":"(")+mt[Mn]+(Ga?">":")"),Ai=lr(oe),ki=Fa(_e)}ri!==void 0&&ri[Mn]!==void 0&&(Nr=ri[Mn]+` Tw
`),Mn===0?F.push(Nr+el(Ai,ki,Aa)+Di):no===0?F.push(Nr+Di):no===1&&F.push(Nr+el(Ai,ki,Aa)+Di)}F=no===0?F.join(` Tj
T* `):F.join(` Tj
`),F+=` Tj
`;var Mr=`BT
/`;return Mr+=zt+" "+ee+` Tf
`,Mr+=q(ee*Ir)+` TL
`,Mr+=Tr+`
`,Mr+=xn,Mr+=F,ne(Mr+="ET"),y[zt]=!0,ha};var Xl=g.__private__.clip=g.clip=function(F){return ne(F==="evenodd"?"W*":"W"),this};g.clipEvenOdd=function(){return Xl("evenodd")},g.__private__.discardPath=g.discardPath=function(){return ne("n"),this};var Na=g.__private__.isValidStyle=function(F){var oe=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(F)!==-1&&(oe=!0),oe};g.__private__.setDefaultPathOperation=g.setDefaultPathOperation=function(F){return Na(F)&&(h=F),this};var si=g.__private__.getStyle=g.getStyle=function(F){var oe=h;switch(F){case"D":case"S":oe="S";break;case"F":oe="f";break;case"FD":case"DF":oe="B";break;case"f":case"f*":case"B":case"B*":oe=F}return oe},bl=g.close=function(){return ne("h"),this};g.stroke=function(){return ne("S"),this},g.fill=function(F){return dn("f",F),this},g.fillEvenOdd=function(F){return dn("f*",F),this},g.fillStroke=function(F){return dn("B",F),this},g.fillStrokeEvenOdd=function(F){return dn("B*",F),this};var dn=function(F,oe){va(oe)==="object"?Ki(oe,F):ne(F)},Gl=function(F){F===null||L===E&&F===void 0||(F=si(F),ne(F))};function oc(F,oe,_e,Le,ze){var ot=new kh(oe||this.boundingBox,_e||this.xStep,Le||this.yStep,this.gState,ze||this.matrix);ot.stream=this.stream;var mt=F+"$$"+this.cloneIndex+++"$$";return Ts(mt,ot),ot}var Ki=function(F,oe){var _e=tt[F.key],Le=lt[_e];if(Le instanceof Au)ne("q"),ne(Ql(oe)),Le.gState&&g.setGState(Le.gState),ne(F.matrix.toString()+" cm"),ne("/"+_e+" sh"),ne("Q");else if(Le instanceof kh){var ze=new Ze(1,0,0,-1,0,wi());F.matrix&&(ze=ze.multiply(F.matrix||Fs),_e=oc.call(Le,F.key,F.boundingBox,F.xStep,F.yStep,ze).id),ne("q"),ne("/Pattern cs"),ne("/"+_e+" scn"),Le.gState&&g.setGState(Le.gState),ne(oe),ne("Q")}},Ql=function(F){switch(F){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Eo=g.moveTo=function(F,oe){return ne(q(H(F))+" "+q(se(oe))+" m"),this},Yn=g.lineTo=function(F,oe){return ne(q(H(F))+" "+q(se(oe))+" l"),this},ai=g.curveTo=function(F,oe,_e,Le,ze,ot){return ne([q(H(F)),q(se(oe)),q(H(_e)),q(se(Le)),q(H(ze)),q(se(ot)),"c"].join(" ")),this};g.__private__.line=g.line=function(F,oe,_e,Le,ze){if(isNaN(F)||isNaN(oe)||isNaN(_e)||isNaN(Le)||!Na(ze))throw new Error("Invalid arguments passed to jsPDF.line");return L===S?this.lines([[_e-F,Le-oe]],F,oe,[1,1],ze||"S"):this.lines([[_e-F,Le-oe]],F,oe,[1,1]).stroke()},g.__private__.lines=g.lines=function(F,oe,_e,Le,ze,ot){var mt,Yt,Gt,ls,xs,Vs,sa,Aa,ha,Xa,Ga,xn;if(typeof F=="number"&&(xn=_e,_e=oe,oe=F,F=xn),Le=Le||[1,1],ot=ot||!1,isNaN(oe)||isNaN(_e)||!Array.isArray(F)||!Array.isArray(Le)||!Na(ze)||typeof ot!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Eo(oe,_e),mt=Le[0],Yt=Le[1],ls=F.length,Xa=oe,Ga=_e,Gt=0;Gt<ls;Gt++)(xs=F[Gt]).length===2?(Xa=xs[0]*mt+Xa,Ga=xs[1]*Yt+Ga,Yn(Xa,Ga)):(Vs=xs[0]*mt+Xa,sa=xs[1]*Yt+Ga,Aa=xs[2]*mt+Xa,ha=xs[3]*Yt+Ga,Xa=xs[4]*mt+Xa,Ga=xs[5]*Yt+Ga,ai(Vs,sa,Aa,ha,Xa,Ga));return ot&&bl(),Gl(ze),this},g.path=function(F){for(var oe=0;oe<F.length;oe++){var _e=F[oe],Le=_e.c;switch(_e.op){case"m":Eo(Le[0],Le[1]);break;case"l":Yn(Le[0],Le[1]);break;case"c":ai.apply(this,Le);break;case"h":bl()}}return this},g.__private__.rect=g.rect=function(F,oe,_e,Le,ze){if(isNaN(F)||isNaN(oe)||isNaN(_e)||isNaN(Le)||!Na(ze))throw new Error("Invalid arguments passed to jsPDF.rect");return L===S&&(Le=-Le),ne([q(H(F)),q(se(oe)),q(H(_e)),q(H(Le)),"re"].join(" ")),Gl(ze),this},g.__private__.triangle=g.triangle=function(F,oe,_e,Le,ze,ot,mt){if(isNaN(F)||isNaN(oe)||isNaN(_e)||isNaN(Le)||isNaN(ze)||isNaN(ot)||!Na(mt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[_e-F,Le-oe],[ze-_e,ot-Le],[F-ze,oe-ot]],F,oe,[1,1],mt,!0),this},g.__private__.roundedRect=g.roundedRect=function(F,oe,_e,Le,ze,ot,mt){if(isNaN(F)||isNaN(oe)||isNaN(_e)||isNaN(Le)||isNaN(ze)||isNaN(ot)||!Na(mt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Yt=4/3*(Math.SQRT2-1);return ze=Math.min(ze,.5*_e),ot=Math.min(ot,.5*Le),this.lines([[_e-2*ze,0],[ze*Yt,0,ze,ot-ot*Yt,ze,ot],[0,Le-2*ot],[0,ot*Yt,-ze*Yt,ot,-ze,ot],[2*ze-_e,0],[-ze*Yt,0,-ze,-ot*Yt,-ze,-ot],[0,2*ot-Le],[0,-ot*Yt,ze*Yt,-ot,ze,-ot]],F+ze,oe,[1,1],mt,!0),this},g.__private__.ellipse=g.ellipse=function(F,oe,_e,Le,ze){if(isNaN(F)||isNaN(oe)||isNaN(_e)||isNaN(Le)||!Na(ze))throw new Error("Invalid arguments passed to jsPDF.ellipse");var ot=4/3*(Math.SQRT2-1)*_e,mt=4/3*(Math.SQRT2-1)*Le;return Eo(F+_e,oe),ai(F+_e,oe-mt,F+ot,oe-Le,F,oe-Le),ai(F-ot,oe-Le,F-_e,oe-mt,F-_e,oe),ai(F-_e,oe+mt,F-ot,oe+Le,F,oe+Le),ai(F+ot,oe+Le,F+_e,oe+mt,F+_e,oe),Gl(ze),this},g.__private__.circle=g.circle=function(F,oe,_e,Le){if(isNaN(F)||isNaN(oe)||isNaN(_e)||!Na(Le))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(F,oe,_e,_e,Le)},g.setFont=function(F,oe,_e){return _e&&(oe=te(oe,_e)),zt=lc(F,oe,{disableWarning:!1}),this};var un=g.__private__.getFont=g.getFont=function(){return Je[lc.apply(g,arguments)]};g.__private__.getFontList=g.getFontList=function(){var F,oe,_e={};for(F in be)if(be.hasOwnProperty(F))for(oe in _e[F]=[],be[F])be[F].hasOwnProperty(oe)&&_e[F].push(oe);return _e},g.addFont=function(F,oe,_e,Le,ze){var ot=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&ot.indexOf(arguments[3])!==-1?ze=arguments[3]:arguments[3]&&ot.indexOf(arguments[3])==-1&&(_e=te(_e,Le)),Co.call(this,F,oe,_e,ze=ze||"Identity-H")};var Er,yl=s.lineWidth||.200025,es=g.__private__.getLineWidth=g.getLineWidth=function(){return yl},gi=g.__private__.setLineWidth=g.setLineWidth=function(F){return yl=F,ne(q(H(F))+" w"),this};g.__private__.setLineDash=ts.API.setLineDash=ts.API.setLineDashPattern=function(F,oe){if(F=F||[],oe=oe||0,isNaN(oe)||!Array.isArray(F))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return F=F.map(function(_e){return q(H(_e))}).join(" "),oe=q(H(oe)),ne("["+F+"] "+oe+" d"),this};var vl=g.__private__.getLineHeight=g.getLineHeight=function(){return ee*Er};g.__private__.getLineHeight=g.getLineHeight=function(){return ee*Er};var To=g.__private__.setLineHeightFactor=g.setLineHeightFactor=function(F){return typeof(F=F||1.15)=="number"&&(Er=F),this},cc=g.__private__.getLineHeightFactor=g.getLineHeightFactor=function(){return Er};To(s.lineHeight);var lr=g.__private__.getHorizontalCoordinate=function(F){return H(F)},Fa=g.__private__.getVerticalCoordinate=function(F){return L===E?F:Tt[le].mediaBox.topRightY-Tt[le].mediaBox.bottomLeftY-H(F)},dc=g.__private__.getHorizontalCoordinateString=g.getHorizontalCoordinateString=function(F){return q(lr(F))},jl=g.__private__.getVerticalCoordinateString=g.getVerticalCoordinateString=function(F){return q(Fa(F))},Kn=s.strokeColor||"0 G";g.__private__.getStrokeColor=g.getDrawColor=function(){return Sa(Kn)},g.__private__.setStrokeColor=g.setDrawColor=function(F,oe,_e,Le){return Kn=cn({ch1:F,ch2:oe,ch3:_e,ch4:Le,pdfColorType:"draw",precision:2}),ne(Kn),this};var xi=s.fillColor||"0 g";g.__private__.getFillColor=g.getFillColor=function(){return Sa(xi)},g.__private__.setFillColor=g.setFillColor=function(F,oe,_e,Le){return xi=cn({ch1:F,ch2:oe,ch3:_e,ch4:Le,pdfColorType:"fill",precision:2}),ne(xi),this};var Tr=s.textColor||"0 g",Jl=g.__private__.getTextColor=g.getTextColor=function(){return Sa(Tr)};g.__private__.setTextColor=g.setTextColor=function(F,oe,_e,Le){return Tr=cn({ch1:F,ch2:oe,ch3:_e,ch4:Le,pdfColorType:"text",precision:3}),this};var Lr=s.charSpace,Lo=g.__private__.getCharSpace=g.getCharSpace=function(){return parseFloat(Lr||0)};g.__private__.setCharSpace=g.setCharSpace=function(F){if(isNaN(F))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Lr=F,this};var Zl=0;g.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},g.__private__.setLineCap=g.setLineCap=function(F){var oe=g.CapJoinStyles[F];if(oe===void 0)throw new Error("Line cap style of '"+F+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Zl=oe,ne(oe+" J"),this};var Ka=0;g.__private__.setLineJoin=g.setLineJoin=function(F){var oe=g.CapJoinStyles[F];if(oe===void 0)throw new Error("Line join style of '"+F+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Ka=oe,ne(oe+" j"),this},g.__private__.setLineMiterLimit=g.__private__.setMiterLimit=g.setLineMiterLimit=g.setMiterLimit=function(F){if(F=F||0,isNaN(F))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return ne(q(H(F))+" M"),this},g.GState=zg,g.setGState=function(F){(F=typeof F=="string"?Et[is[F]]:Xn(null,F)).equals(qt)||(ne("/"+F.id+" gs"),qt=F)};var Xn=function(F,oe){if(!F||!is[F]){var _e=!1;for(var Le in Et)if(Et.hasOwnProperty(Le)&&Et[Le].equals(oe)){_e=!0;break}if(_e)oe=Et[Le];else{var ze="GS"+(Object.keys(Et).length+1).toString(10);Et[ze]=oe,oe.id=ze}return F&&(is[F]=oe.id),Ue.publish("addGState",oe),oe}};g.addGState=function(F,oe){return Xn(F,oe),this},g.saveGraphicsState=function(){return ne("q"),Re.push({key:zt,size:ee,color:Tr}),this},g.restoreGraphicsState=function(){ne("Q");var F=Re.pop();return zt=F.key,ee=F.size,Tr=F.color,qt=null,this},g.setCurrentTransformationMatrix=function(F){return ne(F.toString()+" cm"),this},g.comment=function(F){return ne("#"+F),this};var Pr=function(F,oe){var _e=F||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return _e},set:function(ot){isNaN(ot)||(_e=parseFloat(ot))}});var Le=oe||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Le},set:function(ot){isNaN(ot)||(Le=parseFloat(ot))}});var ze="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return ze},set:function(ot){ze=ot.toString()}}),this},bi=function(F,oe,_e,Le){Pr.call(this,F,oe),this.type="rect";var ze=_e||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return ze},set:function(mt){isNaN(mt)||(ze=parseFloat(mt))}});var ot=Le||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return ot},set:function(mt){isNaN(mt)||(ot=parseFloat(mt))}}),this},yi=function(){this.page=Pt,this.currentPage=le,this.pages=Qe.slice(0),this.pagesContext=Tt.slice(0),this.x=bt,this.y=ys,this.matrix=Te,this.width=Gi(le),this.height=ji(le),this.outputDestination=Xe,this.id="",this.objectNumber=-1};yi.prototype.restore=function(){Pt=this.page,le=this.currentPage,Tt=this.pagesContext,Qe=this.pages,bt=this.x,ys=this.y,Te=this.matrix,Fr(le,this.width),Ni(le,this.height),Xe=this.outputDestination};var Xi=function(F,oe,_e,Le,ze){ve.push(new yi),Pt=le=0,Qe=[],bt=F,ys=oe,Te=ze,Fn([_e,Le])};for(var vi in g.beginFormObject=function(F,oe,_e,Le,ze){return Xi(F,oe,_e,Le,ze),this},g.endFormObject=function(F){return(function(oe){if(Ce[oe])ve.pop().restore();else{var _e=new yi,Le="Xo"+(Object.keys(vt).length+1).toString(10);_e.id=Le,Ce[oe]=Le,vt[Le]=_e,Ue.publish("addFormObject",_e),ve.pop().restore()}})(F),this},g.doFormObject=function(F,oe){var _e=vt[Ce[F]];return ne("q"),ne(oe.toString()+" cm"),ne("/"+_e.id+" Do"),ne("Q"),this},g.getFormObject=function(F){var oe=vt[Ce[F]];return{x:oe.x,y:oe.y,width:oe.width,height:oe.height,matrix:oe.matrix}},g.save=function(F,oe){return F=F||"generated.pdf",(oe=oe||{}).returnPromise=oe.returnPromise||!1,oe.returnPromise===!1?(Su(pi(mi()),F),typeof Su.unload=="function"&&js.setTimeout&&setTimeout(Su.unload,911),this):new Promise(function(_e,Le){try{var ze=Su(pi(mi()),F);typeof Su.unload=="function"&&js.setTimeout&&setTimeout(Su.unload,911),_e(ze)}catch(ot){Le(ot.message)}})},ts.API)ts.API.hasOwnProperty(vi)&&(vi==="events"&&ts.API.events.length?(function(F,oe){var _e,Le,ze;for(ze=oe.length-1;ze!==-1;ze--)_e=oe[ze][0],Le=oe[ze][1],F.subscribe.apply(F,[_e].concat(typeof Le=="function"?[Le]:Le))})(Ue,ts.API.events):g[vi]=ts.API[vi]);function Gi(F){return Tt[F].mediaBox.topRightX-Tt[F].mediaBox.bottomLeftX}function Fr(F,oe){Tt[F].mediaBox.topRightX=oe+Tt[F].mediaBox.bottomLeftX}function ji(F){return Tt[F].mediaBox.topRightY-Tt[F].mediaBox.bottomLeftY}function Ni(F,oe){Tt[F].mediaBox.topRightY=oe+Tt[F].mediaBox.bottomLeftY}var uc=g.getPageWidth=function(F){return Gi(F=F||le)/$t},hc=g.setPageWidth=function(F,oe){Fr(F,oe*$t)},wi=g.getPageHeight=function(F){return ji(F=F||le)/$t},fc=g.setPageHeight=function(F,oe){Ni(F,oe*$t)};return g.internal={pdfEscape:Wn,getStyle:si,getFont:un,getFontSize:He,getCharSpace:Lo,getTextColor:Jl,getLineHeight:vl,getLineHeightFactor:cc,getLineWidth:es,write:Se,getHorizontalCoordinate:lr,getVerticalCoordinate:Fa,getCoordinateString:dc,getVerticalCoordinateString:jl,collections:{},newObject:Os,newAdditionalObject:Ln,newObjectDeferred:$s,newObjectDeferredBegin:ja,getFilters:yr,putStream:Ar,events:Ue,scaleFactor:$t,pageSize:{getWidth:function(){return uc(le)},setWidth:function(F){hc(le,F)},getHeight:function(){return wi(le)},setHeight:function(F){fc(le,F)}},encryptionOptions:m,encryption:zs,getEncryptor:function(F){return m!==null?zs.encryptor(F,0):function(oe){return oe}},output:vr,getNumberOfPages:Ao,pages:Qe,out:ne,f2:P,f3:K,getPageInfo:Pa,getPageInfoByObjId:On,getCurrentPageInfo:Do,getPDFVersion:b,Point:Pr,Rectangle:bi,Matrix:Ze,hasHotfix:an},Object.defineProperty(g.internal.pageSize,"width",{get:function(){return uc(le)},set:function(F){hc(le,F)},enumerable:!0,configurable:!0}),Object.defineProperty(g.internal.pageSize,"height",{get:function(){return wi(le)},set:function(F){fc(le,F)},enumerable:!0,configurable:!0}),(function(F){for(var oe=0,_e=xt.length;oe<_e;oe++){var Le=Co.call(this,F[oe][0],F[oe][1],F[oe][2],xt[oe][3],!0);p===!1&&(y[Le]=!0);var ze=F[oe][0].split("-");ua({id:Le,fontName:ze[0],fontStyle:ze[1]||""})}Ue.publish("addFonts",{fonts:Je,dictionary:be})}).call(g,xt),zt="F1",hi(r,a),Ue.publish("initialized"),g}Sh.prototype.lsbFirstWord=function(s){return String.fromCharCode(255&s,s>>8&255,s>>16&255,s>>24&255)},Sh.prototype.toHexString=function(s){return s.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Sh.prototype.hexToBytes=function(s){for(var t=[],a=0;a<s.length;a+=2)t.push(String.fromCharCode(parseInt(s.substr(a,2),16)));return t.join("")},Sh.prototype.processOwnerPassword=function(s,t){return dv(cv(t).substr(0,5),s)},Sh.prototype.encryptor=function(s,t){var a=cv(this.encryptionKey+String.fromCharCode(255&s,s>>8&255,s>>16&255,255&t,t>>8&255)).substr(0,10);return function(n){return dv(a,n)}},zg.prototype.equals=function(s){var t,a="id,objectNumber,equals";if(!s||va(s)!==va(this))return!1;var n=0;for(t in this)if(!(a.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!s.hasOwnProperty(t)||this[t]!==s[t])return!1;n++}for(t in s)s.hasOwnProperty(t)&&a.indexOf(t)<0&&n--;return n===0},ts.API={events:[]},ts.version="3.0.3";var pn=ts.API,x0=1,Yu=function(s){return s.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},xh=function(s){return s.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},As=function(s){return s.toFixed(2)},Fd=function(s){return s.toFixed(5)};pn.__acroform__={};var Yi=function(s,t){s.prototype=Object.create(t.prototype),s.prototype.constructor=s},u_=function(s){return s*x0},Jo=function(s){var t=new UA,a=Xt.internal.getHeight(s)||0,n=Xt.internal.getWidth(s)||0;return t.BBox=[0,0,Number(As(n)),Number(As(a))],t},oz=pn.__acroform__.setBit=function(s,t){if(s=s||0,t=t||0,isNaN(s)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return s|1<<t},cz=pn.__acroform__.clearBit=function(s,t){if(s=s||0,t=t||0,isNaN(s)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return s&~(1<<t)},dz=pn.__acroform__.getBit=function(s,t){if(isNaN(s)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return s&1<<t?1:0},An=pn.__acroform__.getBitForPdf=function(s,t){if(isNaN(s)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return dz(s,t-1)},kn=pn.__acroform__.setBitForPdf=function(s,t){if(isNaN(s)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return oz(s,t-1)},Dn=pn.__acroform__.clearBitForPdf=function(s,t){if(isNaN(s)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return cz(s,t-1)},uz=pn.__acroform__.calculateCoordinates=function(s,t){var a=t.internal.getHorizontalCoordinate,n=t.internal.getVerticalCoordinate,r=s[0],i=s[1],o=s[2],c=s[3],u={};return u.lowerLeft_X=a(r)||0,u.lowerLeft_Y=n(i+c)||0,u.upperRight_X=a(r+o)||0,u.upperRight_Y=n(i)||0,[Number(As(u.lowerLeft_X)),Number(As(u.lowerLeft_Y)),Number(As(u.upperRight_X)),Number(As(u.upperRight_Y))]},hz=function(s){if(s.appearanceStreamContent)return s.appearanceStreamContent;if(s.V||s.DV){var t=[],a=s._V||s.DV,n=uv(s,a),r=s.scope.internal.getFont(s.fontName,s.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(s.scope.__private__.encodeColorString(s.color)),t.push("/"+r+" "+As(n.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(n.text),t.push("ET"),t.push("Q"),t.push("EMC");var i=Jo(s);return i.scope=s.scope,i.stream=t.join(`
`),i}},uv=function(s,t){var a=s.fontSize===0?s.maxFontSize:s.fontSize,n={text:"",fontSize:""},r=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");r=s.multiline?r.map(function(P){return P.split(`
`)}):r.map(function(P){return[P]});var i=a,o=Xt.internal.getHeight(s)||0;o=o<0?-o:o;var c=Xt.internal.getWidth(s)||0;c=c<0?-c:c;var u=function(P,K,H){if(P+1<r.length){var se=K+" "+r[P+1][0];return Gp(se,s,H).width<=c-4}return!1};i++;e:for(;i>0;){t="",i--;var h,m,p=Gp("3",s,i).height,y=s.multiline?o-i:(o-p)/2,g=y+=2,j=0,b=0,N=0;if(i<=0){t=`(...) Tj
`,t+="% Width of Text: "+Gp(t,s,i=12).width+", FieldWidth:"+c+`
`;break}for(var v="",S=0,E=0;E<r.length;E++)if(r.hasOwnProperty(E)){var L=!1;if(r[E].length!==1&&N!==r[E].length-1){if((p+2)*(S+2)+2>o)continue e;v+=r[E][N],L=!0,b=E,E--}else{v=(v+=r[E][N]+" ").substr(v.length-1)==" "?v.substr(0,v.length-1):v;var z=parseInt(E),V=u(z,v,i),te=E>=r.length-1;if(V&&!te){v+=" ",N=0;continue}if(V||te){if(te)b=z;else if(s.multiline&&(p+2)*(S+2)+2>o)continue e}else{if(!s.multiline||(p+2)*(S+2)+2>o)continue e;b=z}}for(var q="",B=j;B<=b;B++){var J=r[B];if(s.multiline){if(B===b){q+=J[N]+" ",N=(N+1)%J.length;continue}if(B===j){q+=J[J.length-1]+" ";continue}}q+=J[0]+" "}switch(q=q.substr(q.length-1)==" "?q.substr(0,q.length-1):q,m=Gp(q,s,i).width,s.textAlign){case"right":h=c-m-2;break;case"center":h=(c-m)/2;break;default:h=2}t+=As(h)+" "+As(g)+` Td
`,t+="("+Yu(q)+`) Tj
`,t+=-As(h)+` 0 Td
`,g=-(i+2),m=0,j=L?b:b+1,S++,v=""}break}return n.text=t,n.fontSize=i,n},Gp=function(s,t,a){var n=t.scope.internal.getFont(t.fontName,t.fontStyle),r=t.scope.getStringUnitWidth(s,{font:n,fontSize:parseFloat(a),charSpace:0})*parseFloat(a);return{height:t.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(a),charSpace:0})*parseFloat(a)*1.5,width:r}},fz={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},mz=function(s,t){var a={type:"reference",object:s};t.internal.getPageInfo(s.page).pageContext.annotations.find(function(n){return n.type===a.type&&n.object===a.object})===void 0&&t.internal.getPageInfo(s.page).pageContext.annotations.push(a)},pz=function(s,t){if(t.scope=s,s.internal!==void 0&&(s.internal.acroformPlugin===void 0||s.internal.acroformPlugin.isInitialized===!1)){if(_o.FieldNum=0,s.internal.acroformPlugin=JSON.parse(JSON.stringify(fz)),s.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");x0=s.internal.scaleFactor,s.internal.acroformPlugin.acroFormDictionaryRoot=new HA,s.internal.acroformPlugin.acroFormDictionaryRoot.scope=s,s.internal.acroformPlugin.acroFormDictionaryRoot._eventID=s.internal.events.subscribe("postPutResources",function(){(function(a){a.internal.events.unsubscribe(a.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete a.internal.acroformPlugin.acroFormDictionaryRoot._eventID,a.internal.acroformPlugin.printedOut=!0})(s)}),s.internal.events.subscribe("buildDocument",function(){(function(a){a.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=a.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var r in n)if(n.hasOwnProperty(r)){var i=n[r];i.objId=void 0,i.hasAnnotation&&mz(i,a)}})(s)}),s.internal.events.subscribe("putCatalog",function(){(function(a){if(a.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");a.internal.write("/AcroForm "+a.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(s)}),s.internal.events.subscribe("postPutPages",function(a){(function(n,r){var i=!n;for(var o in n||(r.internal.newObjectDeferredBegin(r.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),r.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||r.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(o)){var c=n[o],u=[],h=c.Rect;if(c.Rect&&(c.Rect=uz(c.Rect,r)),r.internal.newObjectDeferredBegin(c.objId,!0),c.DA=Xt.createDefaultAppearanceStream(c),va(c)==="object"&&typeof c.getKeyValueListForStream=="function"&&(u=c.getKeyValueListForStream()),c.Rect=h,c.hasAppearanceStream&&!c.appearanceStreamContent){var m=hz(c);u.push({key:"AP",value:"<</N "+m+">>"}),r.internal.acroformPlugin.xForms.push(m)}if(c.appearanceStreamContent){var p="";for(var y in c.appearanceStreamContent)if(c.appearanceStreamContent.hasOwnProperty(y)){var g=c.appearanceStreamContent[y];if(p+="/"+y+" ",p+="<<",Object.keys(g).length>=1||Array.isArray(g)){for(var o in g)if(g.hasOwnProperty(o)){var j=g[o];typeof j=="function"&&(j=j.call(r,c)),p+="/"+o+" "+j+" ",r.internal.acroformPlugin.xForms.indexOf(j)>=0||r.internal.acroformPlugin.xForms.push(j)}}else typeof(j=g)=="function"&&(j=j.call(r,c)),p+="/"+o+" "+j,r.internal.acroformPlugin.xForms.indexOf(j)>=0||r.internal.acroformPlugin.xForms.push(j);p+=">>"}u.push({key:"AP",value:`<<
`+p+">>"})}r.internal.putStream({additionalKeyValues:u,objectId:c.objId}),r.internal.out("endobj")}i&&(function(b,N){for(var v in b)if(b.hasOwnProperty(v)){var S=v,E=b[v];N.internal.newObjectDeferredBegin(E.objId,!0),va(E)==="object"&&typeof E.putStream=="function"&&E.putStream(),delete b[S]}})(r.internal.acroformPlugin.xForms,r)})(a,s)}),s.internal.acroformPlugin.isInitialized=!0}},qA=pn.__acroform__.arrayToPdfArray=function(s,t,a){var n=function(o){return o};if(Array.isArray(s)){for(var r="[",i=0;i<s.length;i++)switch(i!==0&&(r+=" "),va(s[i])){case"boolean":case"number":case"object":r+=s[i].toString();break;case"string":s[i].substr(0,1)!=="/"?(t!==void 0&&a&&(n=a.internal.getEncryptor(t)),r+="("+Yu(n(s[i].toString()))+")"):r+=s[i].toString()}return r+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},by=function(s,t,a){var n=function(r){return r};return t!==void 0&&a&&(n=a.internal.getEncryptor(t)),(s=s||"").toString(),"("+Yu(n(s))+")"},sc=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(s){this._objId=s}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};sc.prototype.toString=function(){return this.objId+" 0 R"},sc.prototype.putStream=function(){var s=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:s,objectId:this.objId}),this.scope.internal.out("endobj")},sc.prototype.getKeyValueListForStream=function(){var s=[],t=Object.getOwnPropertyNames(this).filter(function(i){return i!="content"&&i!="appearanceStreamContent"&&i!="scope"&&i!="objId"&&i.substring(0,1)!="_"});for(var a in t)if(Object.getOwnPropertyDescriptor(this,t[a]).configurable===!1){var n=t[a],r=this[n];r&&(Array.isArray(r)?s.push({key:n,value:qA(r,this.objId,this.scope)}):r instanceof sc?(r.scope=this.scope,s.push({key:n,value:r.objId+" 0 R"})):typeof r!="function"&&s.push({key:n,value:r}))}return s};var UA=function(){sc.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var s,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(a){t=a}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(a){s=a.trim()},get:function(){return s||null}})};Yi(UA,sc);var HA=function(){sc.call(this);var s,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(s){var a=function(n){return n};return this.scope&&(a=this.scope.internal.getEncryptor(this.objId)),"("+Yu(a(s))+")"}},set:function(a){s=a}})};Yi(HA,sc);var _o=function s(){sc.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(v){if(isNaN(v))throw new Error('Invalid value "'+v+'" for attribute F supplied.');t=v}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!An(t,3)},set:function(v){v?this.F=kn(t,3):this.F=Dn(t,3)}});var a=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return a},set:function(v){if(isNaN(v))throw new Error('Invalid value "'+v+'" for attribute Ff supplied.');a=v}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(v){n=v!==void 0?v:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(v){n[0]=v}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(v){n[1]=v}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(v){n[2]=v}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(v){n[3]=v}});var r="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return r},set:function(v){switch(v){case"/Btn":case"/Tx":case"/Ch":case"/Sig":r=v;break;default:throw new Error('Invalid value "'+v+'" for attribute FT supplied.')}}});var i=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!i||i.length<1){if(this instanceof qg)return;i="FieldObject"+s.FieldNum++}var v=function(S){return S};return this.scope&&(v=this.scope.internal.getEncryptor(this.objId)),"("+Yu(v(i))+")"},set:function(v){i=v.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return i},set:function(v){i=v}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(v){o=v}});var c="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return c},set:function(v){c=v}});var u=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return u},set:function(v){u=v}});var h=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return h===void 0?50/x0:h},set:function(v){h=v}});var m="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return m},set:function(v){m=v}});var p="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!p||this instanceof qg||this instanceof Fu))return by(p,this.objId,this.scope)},set:function(v){v=v.toString(),p=v}});var y=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(y)return this instanceof gr==0?by(y,this.objId,this.scope):y},set:function(v){v=v.toString(),y=this instanceof gr==0?v.substr(0,1)==="("?xh(v.substr(1,v.length-2)):xh(v):v}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof gr==1?xh(y.substr(1,y.length-1)):y},set:function(v){v=v.toString(),y=this instanceof gr==1?"/"+v:v}});var g=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(g)return g},set:function(v){this.V=v}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(g)return this instanceof gr==0?by(g,this.objId,this.scope):g},set:function(v){v=v.toString(),g=this instanceof gr==0?v.substr(0,1)==="("?xh(v.substr(1,v.length-2)):xh(v):v}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof gr==1?xh(g.substr(1,g.length-1)):g},set:function(v){v=v.toString(),g=this instanceof gr==1?"/"+v:v}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var j,b=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return b},set:function(v){v=!!v,b=v}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(j)return j},set:function(v){j=v}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!An(this.Ff,1)},set:function(v){v?this.Ff=kn(this.Ff,1):this.Ff=Dn(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!An(this.Ff,2)},set:function(v){v?this.Ff=kn(this.Ff,2):this.Ff=Dn(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!An(this.Ff,3)},set:function(v){v?this.Ff=kn(this.Ff,3):this.Ff=Dn(this.Ff,3)}});var N=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(N!==null)return N},set:function(v){if([0,1,2].indexOf(v)===-1)throw new Error('Invalid value "'+v+'" for attribute Q supplied.');N=v}}),Object.defineProperty(this,"textAlign",{get:function(){var v;switch(N){case 0:default:v="left";break;case 1:v="center";break;case 2:v="right"}return v},configurable:!0,enumerable:!0,set:function(v){switch(v){case"right":case 2:N=2;break;case"center":case 1:N=1;break;default:N=0}}})};Yi(_o,sc);var Ph=function(){_o.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var s=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return s},set:function(a){s=a}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return s},set:function(a){s=a}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return qA(t,this.objId,this.scope)},set:function(a){var n,r;r=[],typeof(n=a)=="string"&&(r=(function(i,o,c){c||(c=1);for(var u,h=[];u=o.exec(i);)h.push(u[c]);return h})(n,/\((.*?)\)/g)),t=r}}),this.getOptions=function(){return t},this.setOptions=function(a){t=a,this.sort&&t.sort()},this.addOption=function(a){a=(a=a||"").toString(),t.push(a),this.sort&&t.sort()},this.removeOption=function(a,n){for(n=n||!1,a=(a=a||"").toString();t.indexOf(a)!==-1&&(t.splice(t.indexOf(a),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!An(this.Ff,18)},set:function(a){a?this.Ff=kn(this.Ff,18):this.Ff=Dn(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!An(this.Ff,19)},set:function(a){this.combo===!0&&(a?this.Ff=kn(this.Ff,19):this.Ff=Dn(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!An(this.Ff,20)},set:function(a){a?(this.Ff=kn(this.Ff,20),t.sort()):this.Ff=Dn(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!An(this.Ff,22)},set:function(a){a?this.Ff=kn(this.Ff,22):this.Ff=Dn(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!An(this.Ff,23)},set:function(a){a?this.Ff=kn(this.Ff,23):this.Ff=Dn(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!An(this.Ff,27)},set:function(a){a?this.Ff=kn(this.Ff,27):this.Ff=Dn(this.Ff,27)}}),this.hasAppearanceStream=!1};Yi(Ph,_o);var Fh=function(){Ph.call(this),this.fontName="helvetica",this.combo=!1};Yi(Fh,Ph);var Ih=function(){Fh.call(this),this.combo=!0};Yi(Ih,Fh);var ug=function(){Ih.call(this),this.edit=!0};Yi(ug,Ih);var gr=function(){_o.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!An(this.Ff,15)},set:function(a){a?this.Ff=kn(this.Ff,15):this.Ff=Dn(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!An(this.Ff,16)},set:function(a){a?this.Ff=kn(this.Ff,16):this.Ff=Dn(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!An(this.Ff,17)},set:function(a){a?this.Ff=kn(this.Ff,17):this.Ff=Dn(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!An(this.Ff,26)},set:function(a){a?this.Ff=kn(this.Ff,26):this.Ff=Dn(this.Ff,26)}});var s,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(i){return i};if(this.scope&&(a=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var n,r=[];for(n in r.push("<<"),t)r.push("/"+n+" ("+Yu(a(t[n]))+")");return r.push(">>"),r.join(`
`)}},set:function(a){va(a)==="object"&&(t=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(a){typeof a=="string"&&(t.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return s},set:function(a){s=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return s.substr(1,s.length-1)},set:function(a){s="/"+a}})};Yi(gr,_o);var hg=function(){gr.call(this),this.pushButton=!0};Yi(hg,gr);var Oh=function(){gr.call(this),this.radio=!0,this.pushButton=!1;var s=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return s},set:function(t){s=t!==void 0?t:[]}})};Yi(Oh,gr);var qg=function(){var s,t;_o.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return s},set:function(r){s=r}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(r){t=r}});var a,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(c){return c};this.scope&&(r=this.scope.internal.getEncryptor(this.objId));var i,o=[];for(i in o.push("<<"),n)o.push("/"+i+" ("+Yu(r(n[i]))+")");return o.push(">>"),o.join(`
`)},set:function(r){va(r)==="object"&&(n=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(r){typeof r=="string"&&(n.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return a},set:function(r){a=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return a.substr(1,a.length-1)},set:function(r){a="/"+r}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Xt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Yi(qg,_o),Oh.prototype.setAppearance=function(s){if(!("createAppearanceStream"in s)||!("getCA"in s))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var a=this.Kids[t];a.appearanceStreamContent=s.createAppearanceStream(a.optionName),a.caption=s.getCA()}},Oh.prototype.createOption=function(s){var t=new qg;return t.Parent=this,t.optionName=s,this.Kids.push(t),gz.call(this.scope,t),t};var fg=function(){gr.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Xt.CheckBox.createAppearanceStream()};Yi(fg,gr);var Fu=function(){_o.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!An(this.Ff,13)},set:function(t){t?this.Ff=kn(this.Ff,13):this.Ff=Dn(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!An(this.Ff,21)},set:function(t){t?this.Ff=kn(this.Ff,21):this.Ff=Dn(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!An(this.Ff,23)},set:function(t){t?this.Ff=kn(this.Ff,23):this.Ff=Dn(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!An(this.Ff,24)},set:function(t){t?this.Ff=kn(this.Ff,24):this.Ff=Dn(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!An(this.Ff,25)},set:function(t){t?this.Ff=kn(this.Ff,25):this.Ff=Dn(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!An(this.Ff,26)},set:function(t){t?this.Ff=kn(this.Ff,26):this.Ff=Dn(this.Ff,26)}});var s=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return s},set:function(t){s=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return s},set:function(t){Number.isInteger(t)&&(s=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Yi(Fu,_o);var mg=function(){Fu.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!An(this.Ff,14)},set:function(s){s?this.Ff=kn(this.Ff,14):this.Ff=Dn(this.Ff,14)}}),this.password=!0};Yi(mg,Fu);var Xt={CheckBox:{createAppearanceStream:function(){return{N:{On:Xt.CheckBox.YesNormal},D:{On:Xt.CheckBox.YesPushDown,Off:Xt.CheckBox.OffPushDown}}},YesPushDown:function(s){var t=Jo(s);t.scope=s.scope;var a=[],n=s.scope.internal.getFont(s.fontName,s.fontStyle).id,r=s.scope.__private__.encodeColorString(s.color),i=uv(s,s.caption);return a.push("0.749023 g"),a.push("0 0 "+As(Xt.internal.getWidth(s))+" "+As(Xt.internal.getHeight(s))+" re"),a.push("f"),a.push("BMC"),a.push("q"),a.push("0 0 1 rg"),a.push("/"+n+" "+As(i.fontSize)+" Tf "+r),a.push("BT"),a.push(i.text),a.push("ET"),a.push("Q"),a.push("EMC"),t.stream=a.join(`
`),t},YesNormal:function(s){var t=Jo(s);t.scope=s.scope;var a=s.scope.internal.getFont(s.fontName,s.fontStyle).id,n=s.scope.__private__.encodeColorString(s.color),r=[],i=Xt.internal.getHeight(s),o=Xt.internal.getWidth(s),c=uv(s,s.caption);return r.push("1 g"),r.push("0 0 "+As(o)+" "+As(i)+" re"),r.push("f"),r.push("q"),r.push("0 0 1 rg"),r.push("0 0 "+As(o-1)+" "+As(i-1)+" re"),r.push("W"),r.push("n"),r.push("0 g"),r.push("BT"),r.push("/"+a+" "+As(c.fontSize)+" Tf "+n),r.push(c.text),r.push("ET"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(s){var t=Jo(s);t.scope=s.scope;var a=[];return a.push("0.749023 g"),a.push("0 0 "+As(Xt.internal.getWidth(s))+" "+As(Xt.internal.getHeight(s))+" re"),a.push("f"),t.stream=a.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(s){var t={D:{Off:Xt.RadioButton.Circle.OffPushDown},N:{}};return t.N[s]=Xt.RadioButton.Circle.YesNormal,t.D[s]=Xt.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(s){var t=Jo(s);t.scope=s.scope;var a=[],n=Xt.internal.getWidth(s)<=Xt.internal.getHeight(s)?Xt.internal.getWidth(s)/4:Xt.internal.getHeight(s)/4;n=Number((.9*n).toFixed(5));var r=Xt.internal.Bezier_C,i=Number((n*r).toFixed(5));return a.push("q"),a.push("1 0 0 1 "+Fd(Xt.internal.getWidth(s)/2)+" "+Fd(Xt.internal.getHeight(s)/2)+" cm"),a.push(n+" 0 m"),a.push(n+" "+i+" "+i+" "+n+" 0 "+n+" c"),a.push("-"+i+" "+n+" -"+n+" "+i+" -"+n+" 0 c"),a.push("-"+n+" -"+i+" -"+i+" -"+n+" 0 -"+n+" c"),a.push(i+" -"+n+" "+n+" -"+i+" "+n+" 0 c"),a.push("f"),a.push("Q"),t.stream=a.join(`
`),t},YesPushDown:function(s){var t=Jo(s);t.scope=s.scope;var a=[],n=Xt.internal.getWidth(s)<=Xt.internal.getHeight(s)?Xt.internal.getWidth(s)/4:Xt.internal.getHeight(s)/4;n=Number((.9*n).toFixed(5));var r=Number((2*n).toFixed(5)),i=Number((r*Xt.internal.Bezier_C).toFixed(5)),o=Number((n*Xt.internal.Bezier_C).toFixed(5));return a.push("0.749023 g"),a.push("q"),a.push("1 0 0 1 "+Fd(Xt.internal.getWidth(s)/2)+" "+Fd(Xt.internal.getHeight(s)/2)+" cm"),a.push(r+" 0 m"),a.push(r+" "+i+" "+i+" "+r+" 0 "+r+" c"),a.push("-"+i+" "+r+" -"+r+" "+i+" -"+r+" 0 c"),a.push("-"+r+" -"+i+" -"+i+" -"+r+" 0 -"+r+" c"),a.push(i+" -"+r+" "+r+" -"+i+" "+r+" 0 c"),a.push("f"),a.push("Q"),a.push("0 g"),a.push("q"),a.push("1 0 0 1 "+Fd(Xt.internal.getWidth(s)/2)+" "+Fd(Xt.internal.getHeight(s)/2)+" cm"),a.push(n+" 0 m"),a.push(n+" "+o+" "+o+" "+n+" 0 "+n+" c"),a.push("-"+o+" "+n+" -"+n+" "+o+" -"+n+" 0 c"),a.push("-"+n+" -"+o+" -"+o+" -"+n+" 0 -"+n+" c"),a.push(o+" -"+n+" "+n+" -"+o+" "+n+" 0 c"),a.push("f"),a.push("Q"),t.stream=a.join(`
`),t},OffPushDown:function(s){var t=Jo(s);t.scope=s.scope;var a=[],n=Xt.internal.getWidth(s)<=Xt.internal.getHeight(s)?Xt.internal.getWidth(s)/4:Xt.internal.getHeight(s)/4;n=Number((.9*n).toFixed(5));var r=Number((2*n).toFixed(5)),i=Number((r*Xt.internal.Bezier_C).toFixed(5));return a.push("0.749023 g"),a.push("q"),a.push("1 0 0 1 "+Fd(Xt.internal.getWidth(s)/2)+" "+Fd(Xt.internal.getHeight(s)/2)+" cm"),a.push(r+" 0 m"),a.push(r+" "+i+" "+i+" "+r+" 0 "+r+" c"),a.push("-"+i+" "+r+" -"+r+" "+i+" -"+r+" 0 c"),a.push("-"+r+" -"+i+" -"+i+" -"+r+" 0 -"+r+" c"),a.push(i+" -"+r+" "+r+" -"+i+" "+r+" 0 c"),a.push("f"),a.push("Q"),t.stream=a.join(`
`),t}},Cross:{createAppearanceStream:function(s){var t={D:{Off:Xt.RadioButton.Cross.OffPushDown},N:{}};return t.N[s]=Xt.RadioButton.Cross.YesNormal,t.D[s]=Xt.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(s){var t=Jo(s);t.scope=s.scope;var a=[],n=Xt.internal.calculateCross(s);return a.push("q"),a.push("1 1 "+As(Xt.internal.getWidth(s)-2)+" "+As(Xt.internal.getHeight(s)-2)+" re"),a.push("W"),a.push("n"),a.push(As(n.x1.x)+" "+As(n.x1.y)+" m"),a.push(As(n.x2.x)+" "+As(n.x2.y)+" l"),a.push(As(n.x4.x)+" "+As(n.x4.y)+" m"),a.push(As(n.x3.x)+" "+As(n.x3.y)+" l"),a.push("s"),a.push("Q"),t.stream=a.join(`
`),t},YesPushDown:function(s){var t=Jo(s);t.scope=s.scope;var a=Xt.internal.calculateCross(s),n=[];return n.push("0.749023 g"),n.push("0 0 "+As(Xt.internal.getWidth(s))+" "+As(Xt.internal.getHeight(s))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+As(Xt.internal.getWidth(s)-2)+" "+As(Xt.internal.getHeight(s)-2)+" re"),n.push("W"),n.push("n"),n.push(As(a.x1.x)+" "+As(a.x1.y)+" m"),n.push(As(a.x2.x)+" "+As(a.x2.y)+" l"),n.push(As(a.x4.x)+" "+As(a.x4.y)+" m"),n.push(As(a.x3.x)+" "+As(a.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(s){var t=Jo(s);t.scope=s.scope;var a=[];return a.push("0.749023 g"),a.push("0 0 "+As(Xt.internal.getWidth(s))+" "+As(Xt.internal.getHeight(s))+" re"),a.push("f"),t.stream=a.join(`
`),t}}},createDefaultAppearanceStream:function(s){var t=s.scope.internal.getFont(s.fontName,s.fontStyle).id,a=s.scope.__private__.encodeColorString(s.color);return"/"+t+" "+s.fontSize+" Tf "+a}};Xt.internal={Bezier_C:.551915024494,calculateCross:function(s){var t=Xt.internal.getWidth(s),a=Xt.internal.getHeight(s),n=Math.min(t,a);return{x1:{x:(t-n)/2,y:(a-n)/2+n},x2:{x:(t-n)/2+n,y:(a-n)/2},x3:{x:(t-n)/2,y:(a-n)/2},x4:{x:(t-n)/2+n,y:(a-n)/2+n}}}},Xt.internal.getWidth=function(s){var t=0;return va(s)==="object"&&(t=u_(s.Rect[2])),t},Xt.internal.getHeight=function(s){var t=0;return va(s)==="object"&&(t=u_(s.Rect[3])),t};var gz=pn.addField=function(s){if(pz(this,s),!(s instanceof _o))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=s).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),s.page=s.scope.internal.getCurrentPageInfo().pageNumber,this};pn.AcroFormChoiceField=Ph,pn.AcroFormListBox=Fh,pn.AcroFormComboBox=Ih,pn.AcroFormEditBox=ug,pn.AcroFormButton=gr,pn.AcroFormPushButton=hg,pn.AcroFormRadioButton=Oh,pn.AcroFormCheckBox=fg,pn.AcroFormTextField=Fu,pn.AcroFormPasswordField=mg,pn.AcroFormAppearance=Xt,pn.AcroForm={ChoiceField:Ph,ListBox:Fh,ComboBox:Ih,EditBox:ug,Button:gr,PushButton:hg,RadioButton:Oh,CheckBox:fg,TextField:Fu,PasswordField:mg,Appearance:Xt},ts.AcroForm={ChoiceField:Ph,ListBox:Fh,ComboBox:Ih,EditBox:ug,Button:gr,PushButton:hg,RadioButton:Oh,CheckBox:fg,TextField:Fu,PasswordField:mg,Appearance:Xt};ts.AcroForm;function $A(s){return s.reduce(function(t,a,n){return t[a]=n,t},{})}(function(s){var t="addImage_";s.__addimage__={};var a="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=s.__addimage__.getImageFileTypeByImageData=function(P,K){var H,se,X,R,Q,Y=a;if((K=K||a)==="RGBA"||P.data!==void 0&&P.data instanceof Uint8ClampedArray&&"height"in P&&"width"in P)return"RGBA";if(V(P))for(Q in n)for(X=n[Q],H=0;H<X.length;H+=1){for(R=!0,se=0;se<X[H].length;se+=1)if(X[H][se]!==void 0&&X[H][se]!==P[se]){R=!1;break}if(R===!0){Y=Q;break}}else for(Q in n)for(X=n[Q],H=0;H<X.length;H+=1){for(R=!0,se=0;se<X[H].length;se+=1)if(X[H][se]!==void 0&&X[H][se]!==P.charCodeAt(se)){R=!1;break}if(R===!0){Y=Q;break}}return Y===a&&K!==a&&(Y=K),Y},i=function P(K){for(var H=this.internal.write,se=this.internal.putStream,X=(0,this.internal.getFilters)();X.indexOf("FlateEncode")!==-1;)X.splice(X.indexOf("FlateEncode"),1);K.objectId=this.internal.newObject();var R=[];if(R.push({key:"Type",value:"/XObject"}),R.push({key:"Subtype",value:"/Image"}),R.push({key:"Width",value:K.width}),R.push({key:"Height",value:K.height}),K.colorSpace===v.INDEXED?R.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(K.palette.length/3-1)+" "+("sMask"in K&&K.sMask!==void 0?K.objectId+2:K.objectId+1)+" 0 R]"}):(R.push({key:"ColorSpace",value:"/"+K.colorSpace}),K.colorSpace===v.DEVICE_CMYK&&R.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),R.push({key:"BitsPerComponent",value:K.bitsPerComponent}),"decodeParameters"in K&&K.decodeParameters!==void 0&&R.push({key:"DecodeParms",value:"<<"+K.decodeParameters+">>"}),"transparency"in K&&Array.isArray(K.transparency)&&K.transparency.length>0){for(var Q="",Y=0,$=K.transparency.length;Y<$;Y++)Q+=K.transparency[Y]+" "+K.transparency[Y]+" ";R.push({key:"Mask",value:"["+Q+"]"})}K.sMask!==void 0&&R.push({key:"SMask",value:K.objectId+1+" 0 R"});var me=K.filter!==void 0?["/"+K.filter]:void 0;if(se({data:K.data,additionalKeyValues:R,alreadyAppliedFilters:me,objectId:K.objectId}),H("endobj"),"sMask"in K&&K.sMask!==void 0){var D,U=(D=K.sMaskBitsPerComponent)!==null&&D!==void 0?D:K.bitsPerComponent,le={width:K.width,height:K.height,colorSpace:"DeviceGray",bitsPerComponent:U,data:K.sMask};"filter"in K&&(le.decodeParameters="/Predictor ".concat(K.predictor," /Colors 1 /BitsPerComponent ").concat(U," /Columns ").concat(K.width),le.filter=K.filter),P.call(this,le)}if(K.colorSpace===v.INDEXED){var de=this.internal.newObject();se({data:q(new Uint8Array(K.palette)),objectId:de}),H("endobj")}},o=function(){var P=this.internal.collections[t+"images"];for(var K in P)i.call(this,P[K])},c=function(){var P,K=this.internal.collections[t+"images"],H=this.internal.write;for(var se in K)H("/I"+(P=K[se]).index,P.objectId,"0","R")},u=function(){this.internal.collections[t+"images"]||(this.internal.collections[t+"images"]={},this.internal.events.subscribe("putResources",o),this.internal.events.subscribe("putXobjectDict",c))},h=function(){var P=this.internal.collections[t+"images"];return u.call(this),P},m=function(){return Object.keys(this.internal.collections[t+"images"]).length},p=function(P){return typeof s["process"+P.toUpperCase()]=="function"},y=function(P){return va(P)==="object"&&P.nodeType===1},g=function(P,K){if(P.nodeName==="IMG"&&P.hasAttribute("src")){var H=""+P.getAttribute("src");if(H.indexOf("data:image/")===0)return dg(unescape(H).split("base64,").pop());var se=s.loadFile(H,!0);if(se!==void 0)return se}if(P.nodeName==="CANVAS"){if(P.width===0||P.height===0)throw new Error("Given canvas must have data. Canvas width: "+P.width+", height: "+P.height);var X;switch(K){case"PNG":X="image/png";break;case"WEBP":X="image/webp";break;default:X="image/jpeg"}return dg(P.toDataURL(X,1).split("base64,").pop())}},j=function(P){var K=this.internal.collections[t+"images"];if(K){for(var H in K)if(P===K[H].alias)return K[H]}},b=function(P,K,H){return P||K||(P=-96,K=-96),P<0&&(P=-1*H.width*72/P/this.internal.scaleFactor),K<0&&(K=-1*H.height*72/K/this.internal.scaleFactor),P===0&&(P=K*H.width/H.height),K===0&&(K=P*H.height/H.width),[P,K]},N=function(P,K,H,se,X,R){var Q=b.call(this,H,se,X),Y=this.internal.getCoordinateString,$=this.internal.getVerticalCoordinateString,me=h.call(this);if(H=Q[0],se=Q[1],me[X.index]=X,R){R*=Math.PI/180;var D=Math.cos(R),U=Math.sin(R),le=function(G){return G.toFixed(4)},de=[le(D),le(U),le(-1*U),le(D),0,0,"cm"]}this.internal.write("q"),R?(this.internal.write([1,"0","0",1,Y(P),$(K+se),"cm"].join(" ")),this.internal.write(de.join(" ")),this.internal.write([Y(H),"0","0",Y(se),"0","0","cm"].join(" "))):this.internal.write([Y(H),"0","0",Y(se),Y(P),$(K+se),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+X.index+" Do"),this.internal.write("Q")},v=s.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};s.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var S=s.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},E=s.__addimage__.sHashCode=function(P){var K,H,se=0;if(typeof P=="string")for(H=P.length,K=0;K<H;K++)se=(se<<5)-se+P.charCodeAt(K),se|=0;else if(V(P))for(H=P.byteLength/2,K=0;K<H;K++)se=(se<<5)-se+P[K],se|=0;return se},L=s.__addimage__.validateStringAsBase64=function(P){(P=P||"").toString().trim();var K=!0;return P.length===0&&(K=!1),P.length%4!=0&&(K=!1),/^[A-Za-z0-9+/]+$/.test(P.substr(0,P.length-2))===!1&&(K=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(P.substr(-2))===!1&&(K=!1),K},z=s.__addimage__.extractImageFromDataUrl=function(P){if(P==null||!(P=P.trim()).startsWith("data:"))return null;var K=P.indexOf(",");return K<0?null:P.substring(0,K).trim().endsWith("base64")?P.substring(K+1):null};s.__addimage__.isArrayBuffer=function(P){return P instanceof ArrayBuffer};var V=s.__addimage__.isArrayBufferView=function(P){return P instanceof Int8Array||P instanceof Uint8Array||P instanceof Uint8ClampedArray||P instanceof Int16Array||P instanceof Uint16Array||P instanceof Int32Array||P instanceof Uint32Array||P instanceof Float32Array||P instanceof Float64Array},te=s.__addimage__.binaryStringToUint8Array=function(P){for(var K=P.length,H=new Uint8Array(K),se=0;se<K;se++)H[se]=P.charCodeAt(se);return H},q=s.__addimage__.arrayBufferToBinaryString=function(P){for(var K="",H=V(P)?P:new Uint8Array(P),se=0;se<H.length;se+=8192)K+=String.fromCharCode.apply(null,H.subarray(se,se+8192));return K};s.addImage=function(){var P,K,H,se,X,R,Q,Y,$;if(typeof arguments[1]=="number"?(K=a,H=arguments[1],se=arguments[2],X=arguments[3],R=arguments[4],Q=arguments[5],Y=arguments[6],$=arguments[7]):(K=arguments[1],H=arguments[2],se=arguments[3],X=arguments[4],R=arguments[5],Q=arguments[6],Y=arguments[7],$=arguments[8]),va(P=arguments[0])==="object"&&!y(P)&&"imageData"in P){var me=P;P=me.imageData,K=me.format||K||a,H=me.x||H||0,se=me.y||se||0,X=me.w||me.width||X,R=me.h||me.height||R,Q=me.alias||Q,Y=me.compression||Y,$=me.rotation||me.angle||$}var D=this.internal.getFilters();if(Y===void 0&&D.indexOf("FlateEncode")!==-1&&(Y="SLOW"),isNaN(H)||isNaN(se))throw new Error("Invalid coordinates passed to jsPDF.addImage");u.call(this);var U=B.call(this,P,K,Q,Y);return N.call(this,H,se,X,R,U,$),this};var B=function(P,K,H,se){var X,R,Q;if(typeof P=="string"&&r(P)===a){P=unescape(P);var Y=J(P,!1);(Y!==""||(Y=s.loadFile(P,!0))!==void 0)&&(P=Y)}if(y(P)&&(P=g(P,K)),K=r(P,K),!p(K))throw new Error("addImage does not support files of type '"+K+"', please ensure that a plugin for '"+K+"' support is added.");if(((Q=H)==null||Q.length===0)&&(H=(function($){return typeof $=="string"||V($)?E($):V($.data)?E($.data):null})(P)),(X=j.call(this,H))||(P instanceof Uint8Array||K==="RGBA"||(R=P,P=te(P)),X=this["process"+K.toUpperCase()](P,m.call(this),H,(function($){return $&&typeof $=="string"&&($=$.toUpperCase()),$ in s.image_compression?$:S.NONE})(se),R)),!X)throw new Error("An unknown error occurred whilst processing the image.");return X},J=s.__addimage__.convertBase64ToBinaryString=function(P,K){K=typeof K!="boolean"||K;var H,se="";if(typeof P=="string"){var X;H=(X=z(P))!==null&&X!==void 0?X:P;try{se=dg(H)}catch(R){if(K)throw L(H)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+R.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return se};s.getImageProperties=function(P){var K,H,se="";if(y(P)&&(P=g(P)),typeof P=="string"&&r(P)===a&&((se=J(P,!1))===""&&(se=s.loadFile(P)||""),P=se),H=r(P),!p(H))throw new Error("addImage does not support files of type '"+H+"', please ensure that a plugin for '"+H+"' support is added.");if(P instanceof Uint8Array||(P=te(P)),!(K=this["process"+H.toUpperCase()](P)))throw new Error("An unknown error occurred whilst processing the image");return K.fileType=H,K}})(ts.API),(function(s){var t=function(a){if(a!==void 0&&a!="")return!0};ts.API.events.push(["addPage",function(a){this.internal.getPageInfo(a.pageNumber).pageContext.annotations=[]}]),s.events.push(["putPage",function(a){for(var n,r,i,o=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString,u=this.internal.getPageInfoByObjId(a.objId),h=a.pageContext.annotations,m=!1,p=0;p<h.length&&!m;p++)switch((n=h[p]).type){case"link":(t(n.options.url)||t(n.options.pageNumber))&&(m=!0);break;case"reference":case"text":case"freetext":m=!0}if(m!=0){this.internal.write("/Annots [");for(var y=0;y<h.length;y++){n=h[y];var g=this.internal.pdfEscape,j=this.internal.getEncryptor(a.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var b=this.internal.newAdditionalObject(),N=this.internal.newAdditionalObject(),v=this.internal.getEncryptor(b.objId),S=n.title||"Note";i="<</Type /Annot /Subtype /Text "+(r="/Rect ["+o(n.bounds.x)+" "+c(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w)+" "+c(n.bounds.y)+"] ")+"/Contents ("+g(v(n.contents))+")",i+=" /Popup "+N.objId+" 0 R",i+=" /P "+u.objId+" 0 R",i+=" /T ("+g(v(S))+") >>",b.content=i;var E=b.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(r="/Rect ["+o(n.bounds.x+30)+" "+c(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w+30)+" "+c(n.bounds.y)+"] ")+" /Parent "+E,n.open&&(i+=" /Open true"),i+=" >>",N.content=i,this.internal.write(b.objId,"0 R",N.objId,"0 R");break;case"freetext":r="/Rect ["+o(n.bounds.x)+" "+c(n.bounds.y)+" "+o(n.bounds.x+n.bounds.w)+" "+c(n.bounds.y+n.bounds.h)+"] ";var L=n.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+r+"/Contents ("+g(j(n.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+L+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(n.options.name){var z=this.annotations._nameMap[n.options.name];n.options.pageNumber=z.page,n.options.top=z.y}else n.options.top||(n.options.top=0);if(r="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",i="",n.options.url)i="<</Type /Annot /Subtype /Link "+r+"/Border [0 0 0] /A <</S /URI /URI ("+g(j(n.options.url))+") >>";else if(n.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+r+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,i+=" /FitV "+n.options.left+"]";break;default:var V=c(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),i+=" /XYZ "+n.options.left+" "+V+" "+n.options.zoom+"]"}i!=""&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),s.createAnnotation=function(a){var n=this.internal.getCurrentPageInfo();switch(a.type){case"link":this.link(a.bounds.x,a.bounds.y,a.bounds.w,a.bounds.h,a);break;case"text":case"freetext":n.pageContext.annotations.push(a)}},s.link=function(a,n,r,i,o){var c=this.internal.getCurrentPageInfo(),u=this.internal.getCoordinateString,h=this.internal.getVerticalCoordinateString;c.pageContext.annotations.push({finalBounds:{x:u(a),y:h(n),w:u(a+r),h:h(n+i)},options:o,type:"link"})},s.textWithLink=function(a,n,r,i){var o,c,u=this.getTextWidth(a),h=this.internal.getLineHeight()/this.internal.scaleFactor;if(i.maxWidth!==void 0){c=i.maxWidth;var m=this.splitTextToSize(a,c).length;o=Math.ceil(h*m)}else c=u,o=h;return this.text(a,n,r,i),r+=.2*h,i.align==="center"&&(n-=u/2),i.align==="right"&&(n-=u),this.link(n,r-h,c,o,i),u},s.getTextWidth=function(a){var n=this.internal.getFontSize();return this.getStringUnitWidth(a)*n/this.internal.scaleFactor}})(ts.API),(function(s){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},a={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},r=[1570,1571,1573,1575];s.__arabicParser__={};var i=s.__arabicParser__.isInArabicSubstitutionA=function(b){return t[b.charCodeAt(0)]!==void 0},o=s.__arabicParser__.isArabicLetter=function(b){return typeof b=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(b)},c=s.__arabicParser__.isArabicEndLetter=function(b){return o(b)&&i(b)&&t[b.charCodeAt(0)].length<=2},u=s.__arabicParser__.isArabicAlfLetter=function(b){return o(b)&&r.indexOf(b.charCodeAt(0))>=0};s.__arabicParser__.arabicLetterHasIsolatedForm=function(b){return o(b)&&i(b)&&t[b.charCodeAt(0)].length>=1};var h=s.__arabicParser__.arabicLetterHasFinalForm=function(b){return o(b)&&i(b)&&t[b.charCodeAt(0)].length>=2};s.__arabicParser__.arabicLetterHasInitialForm=function(b){return o(b)&&i(b)&&t[b.charCodeAt(0)].length>=3};var m=s.__arabicParser__.arabicLetterHasMedialForm=function(b){return o(b)&&i(b)&&t[b.charCodeAt(0)].length==4},p=s.__arabicParser__.resolveLigatures=function(b){var N=0,v=a,S="",E=0;for(N=0;N<b.length;N+=1)v[b.charCodeAt(N)]!==void 0?(E++,typeof(v=v[b.charCodeAt(N)])=="number"&&(S+=String.fromCharCode(v),v=a,E=0),N===b.length-1&&(v=a,S+=b.charAt(N-(E-1)),N-=E-1,E=0)):(v=a,S+=b.charAt(N-E),N-=E,E=0);return S};s.__arabicParser__.isArabicDiacritic=function(b){return b!==void 0&&n[b.charCodeAt(0)]!==void 0};var y=s.__arabicParser__.getCorrectForm=function(b,N,v){return o(b)?i(b)===!1?-1:!h(b)||!o(N)&&!o(v)||!o(v)&&c(N)||c(b)&&!o(N)||c(b)&&u(N)||c(b)&&c(N)?0:m(b)&&o(N)&&!c(N)&&o(v)&&h(v)?3:c(b)||!o(v)?1:2:-1},g=function(b){var N=0,v=0,S=0,E="",L="",z="",V=(b=b||"").split("\\s+"),te=[];for(N=0;N<V.length;N+=1){for(te.push(""),v=0;v<V[N].length;v+=1)E=V[N][v],L=V[N][v-1],z=V[N][v+1],o(E)?(S=y(E,L,z),te[N]+=S!==-1?String.fromCharCode(t[E.charCodeAt(0)][S]):E):te[N]+=E;te[N]=p(te[N])}return te.join(" ")},j=s.__arabicParser__.processArabic=s.processArabic=function(){var b,N=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,v=[];if(Array.isArray(N)){var S=0;for(v=[],S=0;S<N.length;S+=1)Array.isArray(N[S])?v.push([g(N[S][0]),N[S][1],N[S][2]]):v.push([g(N[S])]);b=v}else b=g(N);return typeof arguments[0]=="string"?b:(arguments[0].text=b,arguments[0])};s.events.push(["preProcessText",j])})(ts.API),ts.API.autoPrint=function(s){var t;return(s=s||{}).variant=s.variant||"non-conform",s.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})),this},(function(s){var t=function(){var a=void 0;Object.defineProperty(this,"pdf",{get:function(){return a},set:function(c){a=c}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(c){n=isNaN(c)||Number.isInteger(c)===!1||c<0?150:c,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var r=300;Object.defineProperty(this,"height",{get:function(){return r},set:function(c){r=isNaN(c)||Number.isInteger(c)===!1||c<0?300:c,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=r+1)}});var i=[];Object.defineProperty(this,"childNodes",{get:function(){return i},set:function(c){i=c}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(c){o=c}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(a,n){var r;if((a=a||"2d")!=="2d")return null;for(r in n)this.pdf.context2d.hasOwnProperty(r)&&(this.pdf.context2d[r]=n[r]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},s.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])})(ts.API),(function(s){var t={left:0,top:0,bottom:0,right:0},a=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),r.call(this))},r=function(){this.internal.__cell__.lastCell=new i,this.internal.__cell__.pages=1},i=function(){var u=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return u},set:function(b){u=b}});var h=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return h},set:function(b){h=b}});var m=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return m},set:function(b){m=b}});var p=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return p},set:function(b){p=b}});var y=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return y},set:function(b){y=b}});var g=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return g},set:function(b){g=b}});var j=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return j},set:function(b){j=b}}),this};i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},i.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},s.setHeaderFunction=function(u){return n.call(this),this.internal.__cell__.headerFunction=typeof u=="function"?u:void 0,this},s.getTextDimensions=function(u,h){n.call(this);var m=(h=h||{}).fontSize||this.getFontSize(),p=h.font||this.getFont(),y=h.scaleFactor||this.internal.scaleFactor,g=0,j=0,b=0,N=this;if(!Array.isArray(u)&&typeof u!="string"){if(typeof u!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");u=String(u)}var v=h.maxWidth;v>0?typeof u=="string"?u=this.splitTextToSize(u,v):Object.prototype.toString.call(u)==="[object Array]"&&(u=u.reduce(function(E,L){return E.concat(N.splitTextToSize(L,v))},[])):u=Array.isArray(u)?u:[u];for(var S=0;S<u.length;S++)g<(b=this.getStringUnitWidth(u[S],{font:p})*m)&&(g=b);return g!==0&&(j=u.length),{w:g/=y,h:Math.max((j*m*this.getLineHeightFactor()-m*(this.getLineHeightFactor()-1))/y,0)}},s.cellAddPage=function(){n.call(this),this.addPage();var u=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new i(u.left,u.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=s.cell=function(){var u;u=arguments[0]instanceof i?arguments[0]:new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var h=this.internal.__cell__.lastCell,m=this.internal.__cell__.padding,p=this.internal.__cell__.margins||t,y=this.internal.__cell__.tableHeaderRow,g=this.internal.__cell__.printHeaders;return h.lineNumber!==void 0&&(h.lineNumber===u.lineNumber?(u.x=(h.x||0)+(h.width||0),u.y=h.y||0):h.y+h.height+u.height+p.bottom>this.getPageHeight()?(this.cellAddPage(),u.y=p.top,g&&y&&(this.printHeaderRow(u.lineNumber,!0),u.y+=y[0].height)):u.y=h.y+h.height||u.y),u.text[0]!==void 0&&(this.rect(u.x,u.y,u.width,u.height,a===!0?"FD":void 0),u.align==="right"?this.text(u.text,u.x+u.width-m,u.y+m,{align:"right",baseline:"top"}):u.align==="center"?this.text(u.text,u.x+u.width/2,u.y+m,{align:"center",baseline:"top",maxWidth:u.width-m-m}):this.text(u.text,u.x+m,u.y+m,{align:"left",baseline:"top",maxWidth:u.width-m-m})),this.internal.__cell__.lastCell=u,this};s.table=function(u,h,m,p,y){if(n.call(this),!m)throw new Error("No data for PDF table.");var g,j,b,N,v=[],S=[],E=[],L={},z={},V=[],te=[],q=(y=y||{}).autoSize||!1,B=y.printHeaders!==!1,J=y.css&&y.css["font-size"]!==void 0?16*y.css["font-size"]:y.fontSize||12,P=y.margins||Object.assign({width:this.getPageWidth()},t),K=typeof y.padding=="number"?y.padding:3,H=y.headerBackgroundColor||"#c8c8c8",se=y.headerTextColor||"#000";if(r.call(this),this.internal.__cell__.printHeaders=B,this.internal.__cell__.margins=P,this.internal.__cell__.table_font_size=J,this.internal.__cell__.padding=K,this.internal.__cell__.headerBackgroundColor=H,this.internal.__cell__.headerTextColor=se,this.setFontSize(J),p==null)S=v=Object.keys(m[0]),E=v.map(function(){return"left"});else if(Array.isArray(p)&&va(p[0])==="object")for(v=p.map(function(me){return me.name}),S=p.map(function(me){return me.prompt||me.name||""}),E=p.map(function(me){return me.align||"left"}),g=0;g<p.length;g+=1)z[p[g].name]=.7499990551181103*p[g].width;else Array.isArray(p)&&typeof p[0]=="string"&&(S=v=p,E=v.map(function(){return"left"}));if(q||Array.isArray(p)&&typeof p[0]=="string")for(g=0;g<v.length;g+=1){for(L[N=v[g]]=m.map(function(me){return me[N]}),this.setFont(void 0,"bold"),V.push(this.getTextDimensions(S[g],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),j=L[N],this.setFont(void 0,"normal"),b=0;b<j.length;b+=1)V.push(this.getTextDimensions(j[b],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);z[N]=Math.max.apply(null,V)+K+K,V=[]}if(B){var X={};for(g=0;g<v.length;g+=1)X[v[g]]={},X[v[g]].text=S[g],X[v[g]].align=E[g];var R=c.call(this,X,z);te=v.map(function(me){return new i(u,h,z[me],R,X[me].text,void 0,X[me].align)}),this.setTableHeaderRow(te),this.printHeaderRow(1,!1)}var Q=p.reduce(function(me,D){return me[D.name]=D.align,me},{});for(g=0;g<m.length;g+=1){"rowStart"in y&&y.rowStart instanceof Function&&y.rowStart({row:g,data:m[g]},this);var Y=c.call(this,m[g],z);for(b=0;b<v.length;b+=1){var $=m[g][v[b]];"cellStart"in y&&y.cellStart instanceof Function&&y.cellStart({row:g,col:b,data:$},this),o.call(this,new i(u,h,z[v[b]],Y,$,g+2,Q[v[b]]))}}return this.internal.__cell__.table_x=u,this.internal.__cell__.table_y=h,this};var c=function(u,h){var m=this.internal.__cell__.padding,p=this.internal.__cell__.table_font_size,y=this.internal.scaleFactor;return Object.keys(u).map(function(g){var j=u[g];return this.splitTextToSize(j.hasOwnProperty("text")?j.text:j,h[g]-m-m)},this).map(function(g){return this.getLineHeightFactor()*g.length*p/y+m+m},this).reduce(function(g,j){return Math.max(g,j)},0)};s.setTableHeaderRow=function(u){n.call(this),this.internal.__cell__.tableHeaderRow=u},s.printHeaderRow=function(u,h){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var m;if(a=!0,typeof this.internal.__cell__.headerFunction=="function"){var p=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new i(p[0],p[1],p[2],p[3],void 0,-1)}this.setFont(void 0,"bold");for(var y=[],g=0;g<this.internal.__cell__.tableHeaderRow.length;g+=1){m=this.internal.__cell__.tableHeaderRow[g].clone(),h&&(m.y=this.internal.__cell__.margins.top||0,y.push(m)),m.lineNumber=u;var j=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,m),this.setTextColor(j)}y.length>0&&this.setTableHeaderRow(y),this.setFont(void 0,"normal"),a=!1}})(ts.API);var VA={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},WA=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],hv=$A(WA),YA=[100,200,300,400,500,600,700,800,900],xz=$A(YA);function yy(s){var t=s.family.replace(/"|'/g,"").toLowerCase(),a=(function(i){return VA[i=i||"normal"]?i:"normal"})(s.style),n=(function(i){return i?typeof i=="number"?i>=100&&i<=900&&i%100==0?i:400:/^\d00$/.test(i)?parseInt(i):i==="bold"?700:400:400})(s.weight),r=(function(i){return typeof hv[i=i||"normal"]=="number"?i:"normal"})(s.stretch);return{family:t,style:a,weight:n,stretch:r,src:s.src||[],ref:s.ref||{name:t,style:[r,a,n].join(" ")}}}function h_(s,t,a,n){var r;for(r=a;r>=0&&r<t.length;r+=n)if(s[t[r]])return s[t[r]];for(r=a;r>=0&&r<t.length;r-=n)if(s[t[r]])return s[t[r]]}var bz={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},f_={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function m_(s){return[s.stretch,s.style,s.weight,s.family].join(" ")}function p_(s){return s.trimLeft()}function yz(s,t){for(var a=0;a<s.length;){if(s.charAt(a)===t)return[s.substring(0,a),s.substring(a+1)];a+=1}return null}function vz(s){var t=s.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],s.substring(t[0].length)]}var Qp,g_,x_,bh,Jp,b_,y_,v_,vy=["times"];function j_(s,t,a,n,r){var i=4,o=w_;switch(r){case ts.API.image_compression.FAST:i=1,o=N_;break;case ts.API.image_compression.MEDIUM:i=6,o=__;break;case ts.API.image_compression.SLOW:i=9,o=S_}s=(function(u,h,m,p){for(var y,g=u.length/h,j=new Uint8Array(u.length+g),b=[jz,N_,w_,__,S_],N=0;N<g;N+=1){var v=N*h,S=u.subarray(v,v+h);if(p)j.set(p(S,m,y),v+N);else{for(var E=b.length,L=[],z=0;z<E;z+=1)L[z]=b[z](S,m,y);var V=wz(L.concat());j.set(L[V],v+N)}y=S}return j})(s,t,Math.ceil(a*n/8),o);var c=rv(s,{level:i});return ts.API.__addimage__.arrayBufferToBinaryString(c)}function jz(s){var t=Array.apply([],s);return t.unshift(0),t}function N_(s,t){var a=s.length,n=[];n[0]=1;for(var r=0;r<a;r+=1){var i=s[r-t]||0;n[r+1]=s[r]-i+256&255}return n}function w_(s,t,a){var n=s.length,r=[];r[0]=2;for(var i=0;i<n;i+=1){var o=a&&a[i]||0;r[i+1]=s[i]-o+256&255}return r}function __(s,t,a){var n=s.length,r=[];r[0]=3;for(var i=0;i<n;i+=1){var o=s[i-t]||0,c=a&&a[i]||0;r[i+1]=s[i]+256-(o+c>>>1)&255}return r}function S_(s,t,a){var n=s.length,r=[];r[0]=4;for(var i=0;i<n;i+=1){var o=Nz(s[i-t]||0,a&&a[i]||0,a&&a[i-t]||0);r[i+1]=s[i]-o+256&255}return r}function Nz(s,t,a){if(s===t&&t===a)return s;var n=Math.abs(t-a),r=Math.abs(s-a),i=Math.abs(s+t-a-a);return n<=r&&n<=i?s:r<=i?t:a}function wz(s){var t=s.map(function(a){return a.reduce(function(n,r){return n+Math.abs(r)},0)});return t.indexOf(Math.min.apply(null,t))}function jy(s,t,a){var n=t*a,r=Math.floor(n/8),i=16-(n-8*r+a),o=(1<<a)-1;return KA(s,r)>>i&o}function C_(s,t,a,n){var r=a*n,i=Math.floor(r/8),o=16-(r-8*i+n),c=(1<<n)-1,u=(t&c)<<o;(function(h,m,p){if(m+1<h.byteLength)h.setUint16(m,p,!1);else{var y=p>>8&255;h.setUint8(m,y)}})(s,i,KA(s,i)&~(c<<o)&65535|u)}function KA(s,t){return t+1<s.byteLength?s.getUint16(t,!1):s.getUint8(t)<<8}function _z(s){var t=0;if(s[t++]!==71||s[t++]!==73||s[t++]!==70||s[t++]!==56||(s[t++]+1&253)!=56||s[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var a=s[t++]|s[t++]<<8,n=s[t++]|s[t++]<<8,r=s[t++],i=r>>7,o=1<<1+(7&r);s[t++],s[t++];var c=null,u=null;i&&(c=t,u=o,t+=3*o);var h=!0,m=[],p=0,y=null,g=0,j=null;for(this.width=a,this.height=n;h&&t<s.length;)switch(s[t++]){case 33:switch(s[t++]){case 255:if(s[t]!==11||s[t+1]==78&&s[t+2]==69&&s[t+3]==84&&s[t+4]==83&&s[t+5]==67&&s[t+6]==65&&s[t+7]==80&&s[t+8]==69&&s[t+9]==50&&s[t+10]==46&&s[t+11]==48&&s[t+12]==3&&s[t+13]==1&&s[t+16]==0)t+=14,j=s[t++]|s[t++]<<8,t++;else for(t+=12;;){if(!((P=s[t++])>=0))throw Error("Invalid block size");if(P===0)break;t+=P}break;case 249:if(s[t++]!==4||s[t+4]!==0)throw new Error("Invalid graphics extension block.");var b=s[t++];p=s[t++]|s[t++]<<8,y=s[t++],1&b||(y=null),g=b>>2&7,t++;break;case 254:for(;;){if(!((P=s[t++])>=0))throw Error("Invalid block size");if(P===0)break;t+=P}break;default:throw new Error("Unknown graphic control label: 0x"+s[t-1].toString(16))}break;case 44:var N=s[t++]|s[t++]<<8,v=s[t++]|s[t++]<<8,S=s[t++]|s[t++]<<8,E=s[t++]|s[t++]<<8,L=s[t++],z=L>>6&1,V=1<<1+(7&L),te=c,q=u,B=!1;L>>7&&(B=!0,te=t,q=V,t+=3*V);var J=t;for(t++;;){var P;if(!((P=s[t++])>=0))throw Error("Invalid block size");if(P===0)break;t+=P}m.push({x:N,y:v,width:S,height:E,has_local_palette:B,palette_offset:te,palette_size:q,data_offset:J,data_length:t-J,transparent_index:y,interlaced:!!z,delay:p,disposal:g});break;case 59:h=!1;break;default:throw new Error("Unknown gif block: 0x"+s[t-1].toString(16))}this.numFrames=function(){return m.length},this.loopCount=function(){return j},this.frameInfo=function(K){if(K<0||K>=m.length)throw new Error("Frame index out of range.");return m[K]},this.decodeAndBlitFrameBGRA=function(K,H){var se=this.frameInfo(K),X=se.width*se.height,R=new Uint8Array(X);A_(s,se.data_offset,R,X);var Q=se.palette_offset,Y=se.transparent_index;Y===null&&(Y=256);var $=se.width,me=a-$,D=$,U=4*(se.y*a+se.x),le=4*((se.y+se.height)*a+se.x),de=U,G=4*me;se.interlaced===!0&&(G+=4*a*7);for(var je=8,De=0,Pe=R.length;De<Pe;++De){var ke=R[De];if(D===0&&(D=$,(de+=G)>=le&&(G=4*me+4*a*(je-1),de=U+($+me)*(je<<1),je>>=1)),ke===Y)de+=4;else{var Ye=s[Q+3*ke],Qe=s[Q+3*ke+1],et=s[Q+3*ke+2];H[de++]=et,H[de++]=Qe,H[de++]=Ye,H[de++]=255}--D}},this.decodeAndBlitFrameRGBA=function(K,H){var se=this.frameInfo(K),X=se.width*se.height,R=new Uint8Array(X);A_(s,se.data_offset,R,X);var Q=se.palette_offset,Y=se.transparent_index;Y===null&&(Y=256);var $=se.width,me=a-$,D=$,U=4*(se.y*a+se.x),le=4*((se.y+se.height)*a+se.x),de=U,G=4*me;se.interlaced===!0&&(G+=4*a*7);for(var je=8,De=0,Pe=R.length;De<Pe;++De){var ke=R[De];if(D===0&&(D=$,(de+=G)>=le&&(G=4*me+4*a*(je-1),de=U+($+me)*(je<<1),je>>=1)),ke===Y)de+=4;else{var Ye=s[Q+3*ke],Qe=s[Q+3*ke+1],et=s[Q+3*ke+2];H[de++]=Ye,H[de++]=Qe,H[de++]=et,H[de++]=255}--D}}}function A_(s,t,a,n){for(var r=s[t++],i=1<<r,o=i+1,c=o+1,u=r+1,h=(1<<u)-1,m=0,p=0,y=0,g=s[t++],j=new Int32Array(4096),b=null;;){for(;m<16&&g!==0;)p|=s[t++]<<m,m+=8,g===1?g=s[t++]:--g;if(m<u)break;var N=p&h;if(p>>=u,m-=u,N!==i){if(N===o)break;for(var v=N<c?N:b,S=0,E=v;E>i;)E=j[E]>>8,++S;var L=E;if(y+S+(v!==N?1:0)>n)return void Ta.log("Warning, gif stream longer than expected.");a[y++]=L;var z=y+=S;for(v!==N&&(a[y++]=L),E=v;S--;)E=j[E],a[--z]=255&E,E>>=8;b!==null&&c<4096&&(j[c++]=b<<8|L,c>=h+1&&u<12&&(++u,h=h<<1|1)),b=N}else c=o+1,h=(1<<(u=r+1))-1,b=null}return y!==n&&Ta.log("Warning, gif stream shorter than expected."),a}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Ny(s){var t,a,n,r,i,o=Math.floor,c=new Array(64),u=new Array(64),h=new Array(64),m=new Array(64),p=new Array(65535),y=new Array(65535),g=new Array(64),j=new Array(64),b=[],N=0,v=7,S=new Array(64),E=new Array(64),L=new Array(64),z=new Array(256),V=new Array(2048),te=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],q=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],B=[0,1,2,3,4,5,6,7,8,9,10,11],J=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],P=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],K=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],H=[0,1,2,3,4,5,6,7,8,9,10,11],se=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],X=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function R(U,le){for(var de=0,G=0,je=new Array,De=1;De<=16;De++){for(var Pe=1;Pe<=U[De];Pe++)je[le[G]]=[],je[le[G]][0]=de,je[le[G]][1]=De,G++,de++;de*=2}return je}function Q(U){for(var le=U[0],de=U[1]-1;de>=0;)le&1<<de&&(N|=1<<v),de--,--v<0&&(N==255?(Y(255),Y(0)):Y(N),v=7,N=0)}function Y(U){b.push(U)}function $(U){Y(U>>8&255),Y(255&U)}function me(U,le,de,G,je){for(var De,Pe=je[0],ke=je[240],Ye=(function(ee,Ie){var He,Lt,Dt,Mt,At,Bt,rs,kt,zt,$t,bt=0;for(zt=0;zt<8;++zt){He=ee[bt],Lt=ee[bt+1],Dt=ee[bt+2],Mt=ee[bt+3],At=ee[bt+4],Bt=ee[bt+5],rs=ee[bt+6];var ys=He+(kt=ee[bt+7]),Te=He-kt,Je=Lt+rs,be=Lt-rs,Re=Dt+Bt,lt=Dt-Bt,tt=Mt+At,Et=Mt-At,is=ys+tt,qt=ys-tt,Pt=Je+Re,Tt=Je-Re;ee[bt]=is+Pt,ee[bt+4]=is-Pt;var Ue=.707106781*(Tt+qt);ee[bt+2]=qt+Ue,ee[bt+6]=qt-Ue;var yt=.382683433*((is=Et+lt)-(Tt=be+Te)),vt=.5411961*is+yt,Ce=1.306562965*Tt+yt,ve=.707106781*(Pt=lt+be),Ze=Te+ve,Wt=Te-ve;ee[bt+5]=Wt+vt,ee[bt+3]=Wt-vt,ee[bt+1]=Ze+Ce,ee[bt+7]=Ze-Ce,bt+=8}for(bt=0,zt=0;zt<8;++zt){He=ee[bt],Lt=ee[bt+8],Dt=ee[bt+16],Mt=ee[bt+24],At=ee[bt+32],Bt=ee[bt+40],rs=ee[bt+48];var Fs=He+(kt=ee[bt+56]),Ts=He-kt,aa=Lt+rs,Os=Lt-rs,$s=Dt+Bt,ja=Dt-Bt,Ln=Mt+At,La=Mt-At,Zs=Fs+Ln,Sa=Fs-Ln,cn=aa+$s,yr=aa-$s;ee[bt]=Zs+cn,ee[bt+32]=Zs-cn;var Ar=.707106781*(yr+Sa);ee[bt+16]=Sa+Ar,ee[bt+48]=Sa-Ar;var kr=.382683433*((Zs=La+ja)-(yr=Os+Ts)),pa=.5411961*Zs+kr,Ca=1.306562965*yr+kr,Ya=.707106781*(cn=ja+Os),ga=Ts+Ya,ir=Ts-Ya;ee[bt+40]=ir+pa,ee[bt+24]=ir-pa,ee[bt+8]=ga+Ca,ee[bt+56]=ga-Ca,bt++}for(zt=0;zt<64;++zt)$t=ee[zt]*Ie[zt],g[zt]=$t>0?$t+.5|0:$t-.5|0;return g})(U,le),Qe=0;Qe<64;++Qe)j[te[Qe]]=Ye[Qe];var et=j[0]-de;de=j[0],et==0?Q(G[0]):(Q(G[y[De=32767+et]]),Q(p[De]));for(var Xe=63;Xe>0&&j[Xe]==0;)Xe--;if(Xe==0)return Q(Pe),de;for(var re,ne=1;ne<=Xe;){for(var Se=ne;j[ne]==0&&ne<=Xe;)++ne;var Ve=ne-Se;if(Ve>=16){re=Ve>>4;for(var xt=1;xt<=re;++xt)Q(ke);Ve&=15}De=32767+j[ne],Q(je[(Ve<<4)+y[De]]),Q(p[De]),ne++}return Xe!=63&&Q(Pe),de}function D(U){U=Math.min(Math.max(U,1),100),i!=U&&((function(le){for(var de=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],G=0;G<64;G++){var je=o((de[G]*le+50)/100);je=Math.min(Math.max(je,1),255),c[te[G]]=je}for(var De=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Pe=0;Pe<64;Pe++){var ke=o((De[Pe]*le+50)/100);ke=Math.min(Math.max(ke,1),255),u[te[Pe]]=ke}for(var Ye=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Qe=0,et=0;et<8;et++)for(var Xe=0;Xe<8;Xe++)h[Qe]=1/(c[te[Qe]]*Ye[et]*Ye[Xe]*8),m[Qe]=1/(u[te[Qe]]*Ye[et]*Ye[Xe]*8),Qe++})(U<50?Math.floor(5e3/U):Math.floor(200-2*U)),i=U)}this.encode=function(U,le){le&&D(le),b=new Array,N=0,v=7,$(65496),$(65504),$(16),Y(74),Y(70),Y(73),Y(70),Y(0),Y(1),Y(1),Y(0),$(1),$(1),Y(0),Y(0),(function(){$(65499),$(132),Y(0);for(var Lt=0;Lt<64;Lt++)Y(c[Lt]);Y(1);for(var Dt=0;Dt<64;Dt++)Y(u[Dt])})(),(function(Lt,Dt){$(65472),$(17),Y(8),$(Dt),$(Lt),Y(3),Y(1),Y(17),Y(0),Y(2),Y(17),Y(1),Y(3),Y(17),Y(1)})(U.width,U.height),(function(){$(65476),$(418),Y(0);for(var Lt=0;Lt<16;Lt++)Y(q[Lt+1]);for(var Dt=0;Dt<=11;Dt++)Y(B[Dt]);Y(16);for(var Mt=0;Mt<16;Mt++)Y(J[Mt+1]);for(var At=0;At<=161;At++)Y(P[At]);Y(1);for(var Bt=0;Bt<16;Bt++)Y(K[Bt+1]);for(var rs=0;rs<=11;rs++)Y(H[rs]);Y(17);for(var kt=0;kt<16;kt++)Y(se[kt+1]);for(var zt=0;zt<=161;zt++)Y(X[zt])})(),$(65498),$(12),Y(3),Y(1),Y(0),Y(2),Y(17),Y(3),Y(17),Y(0),Y(63),Y(0);var de=0,G=0,je=0;N=0,v=7,this.encode.displayName="_encode_";for(var De,Pe,ke,Ye,Qe,et,Xe,re,ne,Se=U.data,Ve=U.width,xt=U.height,ee=4*Ve,Ie=0;Ie<xt;){for(De=0;De<ee;){for(Qe=ee*Ie+De,Xe=-1,re=0,ne=0;ne<64;ne++)et=Qe+(re=ne>>3)*ee+(Xe=4*(7&ne)),Ie+re>=xt&&(et-=ee*(Ie+1+re-xt)),De+Xe>=ee&&(et-=De+Xe-ee+4),Pe=Se[et++],ke=Se[et++],Ye=Se[et++],S[ne]=(V[Pe]+V[ke+256|0]+V[Ye+512|0]>>16)-128,E[ne]=(V[Pe+768|0]+V[ke+1024|0]+V[Ye+1280|0]>>16)-128,L[ne]=(V[Pe+1280|0]+V[ke+1536|0]+V[Ye+1792|0]>>16)-128;de=me(S,h,de,t,n),G=me(E,m,G,a,r),je=me(L,m,je,a,r),De+=32}Ie+=8}if(v>=0){var He=[];He[1]=v+1,He[0]=(1<<v+1)-1,Q(He)}return $(65497),new Uint8Array(b)},s=s||50,(function(){for(var U=String.fromCharCode,le=0;le<256;le++)z[le]=U(le)})(),t=R(q,B),a=R(K,H),n=R(J,P),r=R(se,X),(function(){for(var U=1,le=2,de=1;de<=15;de++){for(var G=U;G<le;G++)y[32767+G]=de,p[32767+G]=[],p[32767+G][1]=de,p[32767+G][0]=G;for(var je=-(le-1);je<=-U;je++)y[32767+je]=de,p[32767+je]=[],p[32767+je][1]=de,p[32767+je][0]=le-1+je;U<<=1,le<<=1}})(),(function(){for(var U=0;U<256;U++)V[U]=19595*U,V[U+256|0]=38470*U,V[U+512|0]=7471*U+32768,V[U+768|0]=-11059*U,V[U+1024|0]=-21709*U,V[U+1280|0]=32768*U+8421375,V[U+1536|0]=-27439*U,V[U+1792|0]=-5329*U})(),D(s)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function xo(s,t){if(this.pos=0,this.buffer=s,this.datav=new DataView(s.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function k_(s){function t(B){if(!B)throw Error("assert :P")}function a(B,J,P){for(var K=0;4>K;K++)if(B[J+K]!=P.charCodeAt(K))return!0;return!1}function n(B,J,P,K,H){for(var se=0;se<H;se++)B[J+se]=P[K+se]}function r(B,J,P,K){for(var H=0;H<K;H++)B[J+H]=P}function i(B){return new Int32Array(B)}function o(B,J){for(var P=[],K=0;K<B;K++)P.push(new J);return P}function c(B,J){var P=[];return(function K(H,se,X){for(var R=X[se],Q=0;Q<R&&(H.push(X.length>se+1?[]:new J),!(X.length<se+1));Q++)K(H[Q],se+1,X)})(P,0,B),P}var u=function(){var B=this;function J(w,k){for(var M=1<<k-1>>>0;w&M;)M>>>=1;return M?(w&M-1)+M:w}function P(w,k,M,Z,ce){t(!(Z%M));do w[k+(Z-=M)]=ce;while(0<Z)}function K(w,k,M,Z,ce){if(t(2328>=ce),512>=ce)var ue=i(512);else if((ue=i(ce))==null)return 0;return(function(he,ge,xe,we,Fe,$e){var O,_,I=ge,ie=1<<xe,fe=i(16),ye=i(16);for(t(Fe!=0),t(we!=null),t(he!=null),t(0<xe),_=0;_<Fe;++_){if(15<we[_])return 0;++fe[we[_]]}if(fe[0]==Fe)return 0;for(ye[1]=0,O=1;15>O;++O){if(fe[O]>1<<O)return 0;ye[O+1]=ye[O]+fe[O]}for(_=0;_<Fe;++_)O=we[_],0<we[_]&&($e[ye[O]++]=_);if(ye[15]==1)return(we=new H).g=0,we.value=$e[0],P(he,I,1,ie,we),ie;var Ae,Oe=-1,Be=ie-1,it=0,nt=1,dt=1,gt=1<<xe;for(_=0,O=1,Fe=2;O<=xe;++O,Fe<<=1){if(nt+=dt<<=1,0>(dt-=fe[O]))return 0;for(;0<fe[O];--fe[O])(we=new H).g=O,we.value=$e[_++],P(he,I+it,Fe,gt,we),it=J(it,O)}for(O=xe+1,Fe=2;15>=O;++O,Fe<<=1){if(nt+=dt<<=1,0>(dt-=fe[O]))return 0;for(;0<fe[O];--fe[O]){if(we=new H,(it&Be)!=Oe){for(I+=gt,Ae=1<<(Oe=O)-xe;15>Oe&&!(0>=(Ae-=fe[Oe]));)++Oe,Ae<<=1;ie+=gt=1<<(Ae=Oe-xe),he[ge+(Oe=it&Be)].g=Ae+xe,he[ge+Oe].value=I-ge-Oe}we.g=O-xe,we.value=$e[_++],P(he,I+(it>>xe),Fe,gt,we),it=J(it,O)}}return nt!=2*ye[15]-1?0:ie})(w,k,M,Z,ce,ue)}function H(){this.value=this.g=0}function se(){this.value=this.g=0}function X(){this.G=o(5,H),this.H=i(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(Ji,se)}function R(w,k,M,Z){t(w!=null),t(k!=null),t(2147483648>Z),w.Ca=254,w.I=0,w.b=-8,w.Ka=0,w.oa=k,w.pa=M,w.Jd=k,w.Yc=M+Z,w.Zc=4<=Z?M+Z-4+1:M,Pe(w)}function Q(w,k){for(var M=0;0<k--;)M|=Ye(w,128)<<k;return M}function Y(w,k){var M=Q(w,k);return ke(w)?-M:M}function $(w,k,M,Z){var ce,ue=0;for(t(w!=null),t(k!=null),t(4294967288>Z),w.Sb=Z,w.Ra=0,w.u=0,w.h=0,4<Z&&(Z=4),ce=0;ce<Z;++ce)ue+=k[M+ce]<<8*ce;w.Ra=ue,w.bb=Z,w.oa=k,w.pa=M}function me(w){for(;8<=w.u&&w.bb<w.Sb;)w.Ra>>>=8,w.Ra+=w.oa[w.pa+w.bb]<<Ci-8>>>0,++w.bb,w.u-=8;G(w)&&(w.h=1,w.u=0)}function D(w,k){if(t(0<=k),!w.h&&k<=Jn){var M=de(w)&vn[k];return w.u+=k,me(w),M}return w.h=1,w.u=0}function U(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function le(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function de(w){return w.Ra>>>(w.u&Ci-1)>>>0}function G(w){return t(w.bb<=w.Sb),w.h||w.bb==w.Sb&&w.u>Ci}function je(w,k){w.u=k,w.h=G(w)}function De(w){w.u>=ii&&(t(w.u>=ii),me(w))}function Pe(w){t(w!=null&&w.oa!=null),w.pa<w.Zc?(w.I=(w.oa[w.pa++]|w.I<<8)>>>0,w.b+=8):(t(w!=null&&w.oa!=null),w.pa<w.Yc?(w.b+=8,w.I=w.oa[w.pa++]|w.I<<8):w.Ka?w.b=0:(w.I<<=8,w.b+=8,w.Ka=1))}function ke(w){return Q(w,1)}function Ye(w,k){var M=w.Ca;0>w.b&&Pe(w);var Z=w.b,ce=M*k>>>8,ue=(w.I>>>Z>ce)+0;for(ue?(M-=ce,w.I-=ce+1<<Z>>>0):M=ce+1,Z=M,ce=0;256<=Z;)ce+=8,Z>>=8;return Z=7^ce+Zi[Z],w.b-=Z,w.Ca=(M<<Z)-1,ue}function Qe(w,k,M){w[k+0]=M>>24&255,w[k+1]=M>>16&255,w[k+2]=M>>8&255,w[k+3]=255&M}function et(w,k){return w[k+0]|w[k+1]<<8}function Xe(w,k){return et(w,k)|w[k+2]<<16}function re(w,k){return et(w,k)|et(w,k+2)<<16}function ne(w,k){var M=1<<k;return t(w!=null),t(0<k),w.X=i(M),w.X==null?0:(w.Mb=32-k,w.Xa=k,1)}function Se(w,k){t(w!=null),t(k!=null),t(w.Xa==k.Xa),n(k.X,0,w.X,0,1<<k.Xa)}function Ve(){this.X=[],this.Xa=this.Mb=0}function xt(w,k,M,Z){t(M!=null),t(Z!=null);var ce=M[0],ue=Z[0];return ce==0&&(ce=(w*ue+k/2)/k),ue==0&&(ue=(k*ce+w/2)/w),0>=ce||0>=ue?0:(M[0]=ce,Z[0]=ue,1)}function ee(w,k){return w+(1<<k)-1>>>k}function Ie(w,k){return((4278255360&w)+(4278255360&k)>>>0&4278255360)+((16711935&w)+(16711935&k)>>>0&16711935)>>>0}function He(w,k){B[k]=function(M,Z,ce,ue,he,ge,xe){var we;for(we=0;we<he;++we){var Fe=B[w](ge[xe+we-1],ce,ue+we);ge[xe+we]=Ie(M[Z+we],Fe)}}}function Lt(){this.ud=this.hd=this.jd=0}function Dt(w,k){return((4278124286&(w^k))>>>1)+(w&k)>>>0}function Mt(w){return 0<=w&&256>w?w:0>w?0:255<w?255:void 0}function At(w,k){return Mt(w+(w-k+.5>>1))}function Bt(w,k,M){return Math.abs(k-M)-Math.abs(w-M)}function rs(w,k,M,Z,ce,ue,he){for(Z=ue[he-1],M=0;M<ce;++M)ue[he+M]=Z=Ie(w[k+M],Z)}function kt(w,k,M,Z,ce){var ue;for(ue=0;ue<M;++ue){var he=w[k+ue],ge=he>>8&255,xe=16711935&(xe=(xe=16711935&he)+((ge<<16)+ge));Z[ce+ue]=(4278255360&he)+xe>>>0}}function zt(w,k){k.jd=255&w,k.hd=w>>8&255,k.ud=w>>16&255}function $t(w,k,M,Z,ce,ue){var he;for(he=0;he<Z;++he){var ge=k[M+he],xe=ge>>>8,we=ge,Fe=255&(Fe=(Fe=ge>>>16)+((w.jd<<24>>24)*(xe<<24>>24)>>>5));we=255&(we=(we+=(w.hd<<24>>24)*(xe<<24>>24)>>>5)+((w.ud<<24>>24)*(Fe<<24>>24)>>>5)),ce[ue+he]=(4278255360&ge)+(Fe<<16)+we}}function bt(w,k,M,Z,ce){B[k]=function(ue,he,ge,xe,we,Fe,$e,O,_){for(xe=$e;xe<O;++xe)for($e=0;$e<_;++$e)we[Fe++]=ce(ge[Z(ue[he++])])},B[w]=function(ue,he,ge,xe,we,Fe,$e){var O=8>>ue.b,_=ue.Ea,I=ue.K[0],ie=ue.w;if(8>O)for(ue=(1<<ue.b)-1,ie=(1<<O)-1;he<ge;++he){var fe,ye=0;for(fe=0;fe<_;++fe)fe&ue||(ye=Z(xe[we++])),Fe[$e++]=ce(I[ye&ie]),ye>>=O}else B["VP8LMapColor"+M](xe,we,I,ie,Fe,$e,he,ge,_)}}function ys(w,k,M,Z,ce){for(M=k+M;k<M;){var ue=w[k++];Z[ce++]=ue>>16&255,Z[ce++]=ue>>8&255,Z[ce++]=255&ue}}function Te(w,k,M,Z,ce){for(M=k+M;k<M;){var ue=w[k++];Z[ce++]=ue>>16&255,Z[ce++]=ue>>8&255,Z[ce++]=255&ue,Z[ce++]=ue>>24&255}}function Je(w,k,M,Z,ce){for(M=k+M;k<M;){var ue=(he=w[k++])>>16&240|he>>12&15,he=240&he|he>>28&15;Z[ce++]=ue,Z[ce++]=he}}function be(w,k,M,Z,ce){for(M=k+M;k<M;){var ue=(he=w[k++])>>16&248|he>>13&7,he=he>>5&224|he>>3&31;Z[ce++]=ue,Z[ce++]=he}}function Re(w,k,M,Z,ce){for(M=k+M;k<M;){var ue=w[k++];Z[ce++]=255&ue,Z[ce++]=ue>>8&255,Z[ce++]=ue>>16&255}}function lt(w,k,M,Z,ce,ue){if(ue==0)for(M=k+M;k<M;)Qe(Z,((ue=w[k++])[0]>>24|ue[1]>>8&65280|ue[2]<<8&16711680|ue[3]<<24)>>>0),ce+=32;else n(Z,ce,w,k,M)}function tt(w,k){B[k][0]=B[w+"0"],B[k][1]=B[w+"1"],B[k][2]=B[w+"2"],B[k][3]=B[w+"3"],B[k][4]=B[w+"4"],B[k][5]=B[w+"5"],B[k][6]=B[w+"6"],B[k][7]=B[w+"7"],B[k][8]=B[w+"8"],B[k][9]=B[w+"9"],B[k][10]=B[w+"10"],B[k][11]=B[w+"11"],B[k][12]=B[w+"12"],B[k][13]=B[w+"13"],B[k][14]=B[w+"0"],B[k][15]=B[w+"0"]}function Et(w){return w==_l||w==ud||w==lo||w==vc}function is(){this.eb=[],this.size=this.A=this.fb=0}function qt(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Pt(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new is,this.f.kb=new qt,this.sd=null}function Tt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Ue(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function yt(w){return alert("todo:WebPSamplerProcessPlane"),w.T}function vt(w,k){var M=w.T,Z=k.ba.f.RGBA,ce=Z.eb,ue=Z.fb+w.ka*Z.A,he=Sn[k.ba.S],ge=w.y,xe=w.O,we=w.f,Fe=w.N,$e=w.ea,O=w.W,_=k.cc,I=k.dc,ie=k.Mc,fe=k.Nc,ye=w.ka,Ae=w.ka+w.T,Oe=w.U,Be=Oe+1>>1;for(ye==0?he(ge,xe,null,null,we,Fe,$e,O,we,Fe,$e,O,ce,ue,null,null,Oe):(he(k.ec,k.fc,ge,xe,_,I,ie,fe,we,Fe,$e,O,ce,ue-Z.A,ce,ue,Oe),++M);ye+2<Ae;ye+=2)_=we,I=Fe,ie=$e,fe=O,Fe+=w.Rc,O+=w.Rc,ue+=2*Z.A,he(ge,(xe+=2*w.fa)-w.fa,ge,xe,_,I,ie,fe,we,Fe,$e,O,ce,ue-Z.A,ce,ue,Oe);return xe+=w.fa,w.j+Ae<w.o?(n(k.ec,k.fc,ge,xe,Oe),n(k.cc,k.dc,we,Fe,Be),n(k.Mc,k.Nc,$e,O,Be),M--):1&Ae||he(ge,xe,null,null,we,Fe,$e,O,we,Fe,$e,O,ce,ue+Z.A,null,null,Oe),M}function Ce(w,k,M){var Z=w.F,ce=[w.J];if(Z!=null){var ue=w.U,he=k.ba.S,ge=he==yc||he==lo;k=k.ba.f.RGBA;var xe=[0],we=w.ka;xe[0]=w.T,w.Kb&&(we==0?--xe[0]:(--we,ce[0]-=w.width),w.j+w.ka+w.T==w.o&&(xe[0]=w.o-w.j-we));var Fe=k.eb;we=k.fb+we*k.A,w=Bo(Z,ce[0],w.width,ue,xe,Fe,we+(ge?0:3),k.A),t(M==xe),w&&Et(he)&&ro(Fe,we,ge,ue,xe,k.A)}return 0}function ve(w){var k=w.ma,M=k.ba.S,Z=11>M,ce=M==Bn||M==Br||M==yc||M==qo||M==12||Et(M);if(k.memory=null,k.Ib=null,k.Jb=null,k.Nd=null,!Si(k.Oa,w,ce?11:12))return 0;if(ce&&Et(M)&&mc(),w.da)alert("todo:use_scaling");else{if(Z){if(k.Ib=yt,w.Kb){if(M=w.U+1>>1,k.memory=i(w.U+2*M),k.memory==null)return 0;k.ec=k.memory,k.fc=0,k.cc=k.ec,k.dc=k.fc+w.U,k.Mc=k.cc,k.Nc=k.dc+M,k.Ib=vt,mc()}}else alert("todo:EmitYUV");ce&&(k.Jb=Ce,Z&&Ir())}if(Z&&!ur){for(w=0;256>w;++w)fn[w]=89858*(w-128)+Ho>>_r,ou[w]=-22014*(w-128)+Ho,lu[w]=-45773*(w-128),$o[w]=113618*(w-128)+Ho>>_r;for(w=El;w<Pi;++w)k=76283*(w-16)+Ho>>_r,Ku[w-El]=Ia(k,255),cu[w-El]=Ia(k+8>>4,15);ur=1}return 1}function Ze(w){var k=w.ma,M=w.U,Z=w.T;return t(!(1&w.ka)),0>=M||0>=Z?0:(M=k.Ib(w,k),k.Jb!=null&&k.Jb(w,k,M),k.Dc+=M,1)}function Wt(w){w.ma.memory=null}function Fs(w,k,M,Z){return D(w,8)!=47?0:(k[0]=D(w,14)+1,M[0]=D(w,14)+1,Z[0]=D(w,1),D(w,3)!=0?0:!w.h)}function Ts(w,k){if(4>w)return w+1;var M=w-2>>1;return(2+(1&w)<<M)+D(k,M)+1}function aa(w,k){return 120<k?k-120:1<=(M=((M=zr[k-1])>>4)*w+(8-(15&M)))?M:1;var M}function Os(w,k,M){var Z=de(M),ce=w[k+=255&Z].g-8;return 0<ce&&(je(M,M.u+8),Z=de(M),k+=w[k].value,k+=Z&(1<<ce)-1),je(M,M.u+w[k].g),w[k].value}function $s(w,k,M){return M.g+=w.g,M.value+=w.value<<k>>>0,t(8>=M.g),w.g}function ja(w,k,M){var Z=w.xc;return t((k=Z==0?0:w.vc[w.md*(M>>Z)+(k>>Z)])<w.Wb),w.Ya[k]}function Ln(w,k,M,Z){var ce=w.ab,ue=w.c*k,he=w.C;k=he+k;var ge=M,xe=Z;for(Z=w.Ta,M=w.Ua;0<ce--;){var we=w.gc[ce],Fe=he,$e=k,O=ge,_=xe,I=(xe=Z,ge=M,we.Ea);switch(t(Fe<$e),t($e<=we.nc),we.hc){case 2:Oa(O,_,($e-Fe)*I,xe,ge);break;case 0:var ie=Fe,fe=$e,ye=xe,Ae=ge,Oe=(gt=we).Ea;ie==0&&(Io(O,_,null,null,1,ye,Ae),rs(O,_+1,0,0,Oe-1,ye,Ae+1),_+=Oe,Ae+=Oe,++ie);for(var Be=1<<gt.b,it=Be-1,nt=ee(Oe,gt.b),dt=gt.K,gt=gt.w+(ie>>gt.b)*nt;ie<fe;){var St=dt,Ut=gt,jt=1;for(ao(O,_,ye,Ae-Oe,1,ye,Ae);jt<Oe;){var ht=(jt&~it)+Be;ht>Oe&&(ht=Oe),(0,Qa[St[Ut++]>>8&15])(O,_+ +jt,ye,Ae+jt-Oe,ht-jt,ye,Ae+jt),jt=ht}_+=Oe,Ae+=Oe,++ie&it||(gt+=nt)}$e!=we.nc&&n(xe,ge-I,xe,ge+($e-Fe-1)*I,I);break;case 1:for(I=O,fe=_,Oe=(O=we.Ea)-(Ae=O&~(ye=(_=1<<we.b)-1)),ie=ee(O,we.b),Be=we.K,we=we.w+(Fe>>we.b)*ie;Fe<$e;){for(it=Be,nt=we,dt=new Lt,gt=fe+Ae,St=fe+O;fe<gt;)zt(it[nt++],dt),Oo(dt,I,fe,_,xe,ge),fe+=_,ge+=_;fe<St&&(zt(it[nt++],dt),Oo(dt,I,fe,Oe,xe,ge),fe+=Oe,ge+=Oe),++Fe&ye||(we+=ie)}break;case 3:if(O==xe&&_==ge&&0<we.b){for(fe=xe,O=I=ge+($e-Fe)*I-(Ae=($e-Fe)*ee(we.Ea,we.b)),_=xe,ye=ge,ie=[],Ae=(Oe=Ae)-1;0<=Ae;--Ae)ie[Ae]=_[ye+Ae];for(Ae=Oe-1;0<=Ae;--Ae)fe[O+Ae]=ie[Ae];gc(we,Fe,$e,xe,I,xe,ge)}else gc(we,Fe,$e,O,_,xe,ge)}ge=Z,xe=M}xe!=M&&n(Z,M,ge,xe,ue)}function La(w,k){var M=w.V,Z=w.Ba+w.c*w.C,ce=k-w.C;if(t(k<=w.l.o),t(16>=ce),0<ce){var ue=w.l,he=w.Ta,ge=w.Ua,xe=ue.width;if(Ln(w,ce,M,Z),ce=ge=[ge],t((M=w.C)<(Z=k)),t(ue.v<ue.va),Z>ue.o&&(Z=ue.o),M<ue.j){var we=ue.j-M;M=ue.j,ce[0]+=we*xe}if(M>=Z?M=0:(ce[0]+=4*ue.v,ue.ka=M-ue.j,ue.U=ue.va-ue.v,ue.T=Z-M,M=1),M){if(ge=ge[0],11>(M=w.ca).S){var Fe=M.f.RGBA,$e=(Z=M.S,ce=ue.U,ue=ue.T,we=Fe.eb,Fe.A),O=ue;for(Fe=Fe.fb+w.Ma*Fe.A;0<O--;){var _=he,I=ge,ie=ce,fe=we,ye=Fe;switch(Z){case cd:Mo(_,I,ie,fe,ye);break;case Bn:Ai(_,I,ie,fe,ye);break;case _l:Ai(_,I,ie,fe,ye),ro(fe,ye,0,ie,1,0);break;case dd:no(_,I,ie,fe,ye);break;case Br:lt(_,I,ie,fe,ye,1);break;case ud:lt(_,I,ie,fe,ye,1),ro(fe,ye,0,ie,1,0);break;case yc:lt(_,I,ie,fe,ye,0);break;case lo:lt(_,I,ie,fe,ye,0),ro(fe,ye,1,ie,1,0);break;case qo:ki(_,I,ie,fe,ye);break;case vc:ki(_,I,ie,fe,ye),Rr(fe,ye,ie,1,0);break;case Ti:Di(_,I,ie,fe,ye);break;default:t(0)}ge+=xe,Fe+=$e}w.Ma+=ue}else alert("todo:EmitRescaledRowsYUVA");t(w.Ma<=M.height)}}w.C=k,t(w.C<=w.i)}function Zs(w){var k;if(0<w.ua)return 0;for(k=0;k<w.Wb;++k){var M=w.Ya[k].G,Z=w.Ya[k].H;if(0<M[1][Z[1]+0].g||0<M[2][Z[2]+0].g||0<M[3][Z[3]+0].g)return 0}return 1}function Sa(w,k,M,Z,ce,ue){if(w.Z!=0){var he=w.qd,ge=w.rd;for(t(er[w.Z]!=null);k<M;++k)er[w.Z](he,ge,Z,ce,Z,ce,ue),he=Z,ge=ce,ce+=ue;w.qd=he,w.rd=ge}}function cn(w,k){var M=w.l.ma,Z=M.Z==0||M.Z==1?w.l.j:w.C;if(Z=w.C<Z?Z:w.C,t(k<=w.l.o),k>Z){var ce=w.l.width,ue=M.ca,he=M.tb+ce*Z,ge=w.V,xe=w.Ba+w.c*Z,we=w.gc;t(w.ab==1),t(we[0].hc==3),li(we[0],Z,k,ge,xe,ue,he),Sa(M,Z,k,ue,he,ce)}w.C=w.Ma=k}function yr(w,k,M,Z,ce,ue,he){var ge=w.$/Z,xe=w.$%Z,we=w.m,Fe=w.s,$e=M+w.$,O=$e;ce=M+Z*ce;var _=M+Z*ue,I=280+Fe.ua,ie=w.Pb?ge:16777216,fe=0<Fe.ua?Fe.Wa:null,ye=Fe.wc,Ae=$e<_?ja(Fe,xe,ge):null;t(w.C<ue),t(_<=ce);var Oe=!1;e:for(;;){for(;Oe||$e<_;){var Be=0;if(ge>=ie){var it=$e-M;t((ie=w).Pb),ie.wd=ie.m,ie.xd=it,0<ie.s.ua&&Se(ie.s.Wa,ie.s.vb),ie=ge+Cl}if(xe&ye||(Ae=ja(Fe,xe,ge)),t(Ae!=null),Ae.Qb&&(k[$e]=Ae.qb,Oe=!0),!Oe)if(De(we),Ae.jc){Be=we,it=k;var nt=$e,dt=Ae.pd[de(Be)&Ji-1];t(Ae.jc),256>dt.g?(je(Be,Be.u+dt.g),it[nt]=dt.value,Be=0):(je(Be,Be.u+dt.g-256),t(256<=dt.value),Be=dt.value),Be==0&&(Oe=!0)}else Be=Os(Ae.G[0],Ae.H[0],we);if(we.h)break;if(Oe||256>Be){if(!Oe)if(Ae.nd)k[$e]=(Ae.qb|Be<<8)>>>0;else{if(De(we),Oe=Os(Ae.G[1],Ae.H[1],we),De(we),it=Os(Ae.G[2],Ae.H[2],we),nt=Os(Ae.G[3],Ae.H[3],we),we.h)break;k[$e]=(nt<<24|Oe<<16|Be<<8|it)>>>0}if(Oe=!1,++$e,++xe>=Z&&(xe=0,++ge,he!=null&&ge<=ue&&!(ge%16)&&he(w,ge),fe!=null))for(;O<$e;)Be=k[O++],fe.X[(506832829*Be&4294967295)>>>fe.Mb]=Be}else if(280>Be){if(Be=Ts(Be-256,we),it=Os(Ae.G[4],Ae.H[4],we),De(we),it=aa(Z,it=Ts(it,we)),we.h)break;if($e-M<it||ce-$e<Be)break e;for(nt=0;nt<Be;++nt)k[$e+nt]=k[$e+nt-it];for($e+=Be,xe+=Be;xe>=Z;)xe-=Z,++ge,he!=null&&ge<=ue&&!(ge%16)&&he(w,ge);if(t($e<=ce),xe&ye&&(Ae=ja(Fe,xe,ge)),fe!=null)for(;O<$e;)Be=k[O++],fe.X[(506832829*Be&4294967295)>>>fe.Mb]=Be}else{if(!(Be<I))break e;for(Oe=Be-280,t(fe!=null);O<$e;)Be=k[O++],fe.X[(506832829*Be&4294967295)>>>fe.Mb]=Be;Be=$e,t(!(Oe>>>(it=fe).Xa)),k[Be]=it.X[Oe],Oe=!0}Oe||t(we.h==G(we))}if(w.Pb&&we.h&&$e<ce)t(w.m.h),w.a=5,w.m=w.wd,w.$=w.xd,0<w.s.ua&&Se(w.s.vb,w.s.Wa);else{if(we.h)break e;he?.(w,ge>ue?ue:ge),w.a=0,w.$=$e-M}return 1}return w.a=3,0}function Ar(w){t(w!=null),w.vc=null,w.yc=null,w.Ya=null;var k=w.Wa;k!=null&&(k.X=null),w.vb=null,t(w!=null)}function kr(){var w=new Gt;return w==null?null:(w.a=0,w.xb=oo,tt("Predictor","VP8LPredictors"),tt("Predictor","VP8LPredictors_C"),tt("PredictorAdd","VP8LPredictorsAdd"),tt("PredictorAdd","VP8LPredictorsAdd_C"),Oa=kt,Oo=$t,Mo=ys,Ai=Te,ki=Je,Di=be,no=Re,B.VP8LMapColor32b=jr,B.VP8LMapColor8b=nn,w)}function pa(w,k,M,Z,ce){var ue=1,he=[w],ge=[k],xe=Z.m,we=Z.s,Fe=null,$e=0;e:for(;;){if(M)for(;ue&&D(xe,1);){var O=he,_=ge,I=Z,ie=1,fe=I.m,ye=I.gc[I.ab],Ae=D(fe,2);if(I.Oc&1<<Ae)ue=0;else{switch(I.Oc|=1<<Ae,ye.hc=Ae,ye.Ea=O[0],ye.nc=_[0],ye.K=[null],++I.ab,t(4>=I.ab),Ae){case 0:case 1:ye.b=D(fe,3)+2,ie=pa(ee(ye.Ea,ye.b),ee(ye.nc,ye.b),0,I,ye.K),ye.K=ye.K[0];break;case 3:var Oe,Be=D(fe,8)+1,it=16<Be?0:4<Be?1:2<Be?2:3;if(O[0]=ee(ye.Ea,it),ye.b=it,Oe=ie=pa(Be,1,0,I,ye.K)){var nt,dt=Be,gt=ye,St=1<<(8>>gt.b),Ut=i(St);if(Ut==null)Oe=0;else{var jt=gt.K[0],ht=gt.w;for(Ut[0]=gt.K[0][0],nt=1;nt<1*dt;++nt)Ut[nt]=Ie(jt[ht+nt],Ut[nt-1]);for(;nt<4*St;++nt)Ut[nt]=0;gt.K[0]=null,gt.K[0]=Ut,Oe=1}}ie=Oe;break;case 2:break;default:t(0)}ue=ie}}if(he=he[0],ge=ge[0],ue&&D(xe,1)&&!(ue=1<=($e=D(xe,4))&&11>=$e)){Z.a=3;break e}var pt;if(pt=ue)t:{var os,Nt,Ot,Ht=Z,ss=he,bs=ge,as=$e,cs=M,Is=Ht.m,Ys=Ht.s,ds=[null],fs=1,Rs=0,Ns=hn[as];s:for(;;){if(cs&&D(Is,1)){var _s=D(Is,3)+2,Ks=ee(ss,_s),ws=ee(bs,_s),fa=Ks*ws;if(!pa(Ks,ws,0,Ht,ds))break s;for(ds=ds[0],Ys.xc=_s,os=0;os<fa;++os){var ms=ds[os]>>8&65535;ds[os]=ms,ms>=fs&&(fs=ms+1)}}if(Is.h)break s;for(Nt=0;5>Nt;++Nt){var ps=tl[Nt];!Nt&&0<as&&(ps+=1<<as),Rs<ps&&(Rs=ps)}var Bs=o(fs*Ns,H),Ds=fs,Ss=o(Ds,X);if(Ss==null)var rn=null;else t(65536>=Ds),rn=Ss;var ka=i(Rs);if(rn==null||ka==null||Bs==null){Ht.a=1;break s}var Zt=Bs;for(os=Ot=0;os<fs;++os){var Jt=rn[os],Xs=Jt.G,hr=Jt.H,fr=0,tr=1,Ua=0;for(Nt=0;5>Nt;++Nt){ps=tl[Nt],Xs[Nt]=Zt,hr[Nt]=Ot,!Nt&&0<as&&(ps+=1<<as);n:{var Tl,sl=ps,Cc=Ht,ma=ka,du=Zt,al=Ot,uo=0,Fi=Cc.m,Xu=D(Fi,1);if(r(ma,0,0,sl),Xu){var Ac=D(Fi,1)+1,gd=D(Fi,1),kc=D(Fi,gd==0?1:8);ma[kc]=1,Ac==2&&(ma[kc=D(Fi,8)]=1);var ln=1}else{var Da=i(19),Dc=D(Fi,4)+4;if(19<Dc){Cc.a=3;var Ll=0;break n}for(Tl=0;Tl<Dc;++Tl)Da[jc[Tl]]=D(Fi,3);var Pl=void 0,Fl=void 0,Il=Cc,Gu=Da,xd=sl,Qu=ma,Ju=0,ho=Il.m,af=8,nf=o(128,H);a:for(;K(nf,0,7,Gu,19);){if(D(ho,1)){var Lm=2+2*D(ho,3);if((Pl=2+D(ho,Lm))>xd)break a}else Pl=xd;for(Fl=0;Fl<xd&&Pl--;){De(ho);var rf=nf[0+(127&de(ho))];je(ho,ho.u+rf.g);var Vo=rf.value;if(16>Vo)Qu[Fl++]=Vo,Vo!=0&&(af=Vo);else{var Pm=Vo==16,Fm=Vo-16,Im=Sl[Fm],lf=D(ho,zn[Fm])+Im;if(Fl+lf>xd)break a;for(var Om=Pm?af:0;0<lf--;)Qu[Fl++]=Om}}Ju=1;break a}Ju||(Il.a=3),ln=Ju}(ln=ln&&!Fi.h)&&(uo=K(du,al,8,ma,sl)),ln&&uo!=0?Ll=uo:(Cc.a=3,Ll=0)}if(Ll==0)break s;if(tr&&hd[Nt]==1&&(tr=Zt[Ot].g==0),fr+=Zt[Ot].g,Ot+=Ll,3>=Nt){var Ec,Zu=ka[0];for(Ec=1;Ec<ps;++Ec)ka[Ec]>Zu&&(Zu=ka[Ec]);Ua+=Zu}}if(Jt.nd=tr,Jt.Qb=0,tr&&(Jt.qb=(Xs[3][hr[3]+0].value<<24|Xs[1][hr[1]+0].value<<16|Xs[2][hr[2]+0].value)>>>0,fr==0&&256>Xs[0][hr[0]+0].value&&(Jt.Qb=1,Jt.qb+=Xs[0][hr[0]+0].value<<8)),Jt.jc=!Jt.Qb&&6>Ua,Jt.jc){var uu,Ol=Jt;for(uu=0;uu<Ji;++uu){var fo=uu,mo=Ol.pd[fo],eh=Ol.G[0][Ol.H[0]+fo];256<=eh.value?(mo.g=eh.g+256,mo.value=eh.value):(mo.g=0,mo.value=0,fo>>=$s(eh,8,mo),fo>>=$s(Ol.G[1][Ol.H[1]+fo],16,mo),fo>>=$s(Ol.G[2][Ol.H[2]+fo],0,mo),$s(Ol.G[3][Ol.H[3]+fo],24,mo))}}}Ys.vc=ds,Ys.Wb=fs,Ys.Ya=rn,Ys.yc=Bs,pt=1;break t}pt=0}if(!(ue=pt)){Z.a=3;break e}if(0<$e){if(we.ua=1<<$e,!ne(we.Wa,$e)){Z.a=1,ue=0;break e}}else we.ua=0;var th=Z,Tc=he,Mm=ge,bd=th.s,yd=bd.xc;if(th.c=Tc,th.i=Mm,bd.md=ee(Tc,yd),bd.wc=yd==0?-1:(1<<yd)-1,M){Z.xb=Al;break e}if((Fe=i(he*ge))==null){Z.a=1,ue=0;break e}ue=(ue=yr(Z,Fe,0,he,ge,ge,null))&&!xe.h;break e}return ue?(ce!=null?ce[0]=Fe:(t(Fe==null),t(M)),Z.$=0,M||Ar(we)):Ar(we),ue}function Ca(w,k){var M=w.c*w.i,Z=M+k+16*k;return t(w.c<=k),w.V=i(Z),w.V==null?(w.Ta=null,w.Ua=0,w.a=1,0):(w.Ta=w.V,w.Ua=w.Ba+M+k,1)}function Ya(w,k){var M=w.C,Z=k-M,ce=w.V,ue=w.Ba+w.c*M;for(t(k<=w.l.o);0<Z;){var he=16<Z?16:Z,ge=w.l.ma,xe=w.l.width,we=xe*he,Fe=ge.ca,$e=ge.tb+xe*M,O=w.Ta,_=w.Ua;Ln(w,he,ce,ue),dr(O,_,Fe,$e,we),Sa(ge,M,M+he,Fe,$e,xe),Z-=he,ce+=he*w.c,M+=he}t(M==k),w.C=w.Ma=k}function ga(){this.ub=this.yd=this.td=this.Rb=0}function ir(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Dr(){this.Fb=this.Bb=this.Cb=0,this.Zb=i(4),this.Lb=i(4)}function Pn(){this.Yb=(function(){var w=[];return(function k(M,Z,ce){for(var ue=ce[Z],he=0;he<ue&&(M.push(ce.length>Z+1?[]:0),!(ce.length<Z+1));he++)k(M[he],Z+1,ce)})(w,0,[3,11]),w})()}function ua(){this.jb=i(3),this.Wc=c([4,8],Pn),this.Xc=c([4,17],Pn)}function Co(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new i(4),this.od=new i(4)}function Wn(){this.ld=this.La=this.dd=this.tc=0}function Fn(){this.Na=this.la=0}function hi(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Wl(){this.ad=i(384),this.Za=0,this.Ob=i(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Yl(){this.uc=this.M=this.Nb=0,this.wa=Array(new Wn),this.Y=0,this.ya=Array(new Wl),this.aa=0,this.l=new fi}function Ao(){this.y=i(16),this.f=i(8),this.ea=i(8)}function lc(){this.cb=this.a=0,this.sc="",this.m=new U,this.Od=new ga,this.Kc=new ir,this.ed=new Co,this.Qa=new Dr,this.Ic=this.$c=this.Aa=0,this.D=new Yl,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,U),this.ia=0,this.pb=o(4,hi),this.Pa=new ua,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Ao),this.Hd=0,this.rb=Array(new Fn),this.sb=0,this.wa=Array(new Wn),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Wl),this.L=this.aa=0,this.gd=c([4,2],Wn),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function fi(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Kl(){var w=new lc;return w!=null&&(w.a=0,w.sc="OK",w.cb=0,w.Xb=0,wr||(wr=mi)),w}function ta(w,k,M){return w.a==0&&(w.a=k,w.sc=M,w.cb=0),0}function In(w,k,M){return 3<=M&&w[k+0]==157&&w[k+1]==1&&w[k+2]==42}function ko(w,k){if(w==null)return 0;if(w.a=0,w.sc="OK",k==null)return ta(w,2,"null VP8Io passed to VP8GetHeaders()");var M=k.data,Z=k.w,ce=k.ha;if(4>ce)return ta(w,7,"Truncated header.");var ue=M[Z+0]|M[Z+1]<<8|M[Z+2]<<16,he=w.Od;if(he.Rb=!(1&ue),he.td=ue>>1&7,he.yd=ue>>4&1,he.ub=ue>>5,3<he.td)return ta(w,3,"Incorrect keyframe parameters.");if(!he.yd)return ta(w,4,"Frame not displayable.");Z+=3,ce-=3;var ge=w.Kc;if(he.Rb){if(7>ce)return ta(w,7,"cannot parse picture header");if(!In(M,Z,ce))return ta(w,3,"Bad code word");ge.c=16383&(M[Z+4]<<8|M[Z+3]),ge.Td=M[Z+4]>>6,ge.i=16383&(M[Z+6]<<8|M[Z+5]),ge.Ud=M[Z+6]>>6,Z+=7,ce-=7,w.za=ge.c+15>>4,w.Ub=ge.i+15>>4,k.width=ge.c,k.height=ge.i,k.Da=0,k.j=0,k.v=0,k.va=k.width,k.o=k.height,k.da=0,k.ib=k.width,k.hb=k.height,k.U=k.width,k.T=k.height,r((ue=w.Pa).jb,0,255,ue.jb.length),t((ue=w.Qa)!=null),ue.Cb=0,ue.Bb=0,ue.Fb=1,r(ue.Zb,0,0,ue.Zb.length),r(ue.Lb,0,0,ue.Lb)}if(he.ub>ce)return ta(w,7,"bad partition length");R(ue=w.m,M,Z,he.ub),Z+=he.ub,ce-=he.ub,he.Rb&&(ge.Ld=ke(ue),ge.Kd=ke(ue)),ge=w.Qa;var xe,we=w.Pa;if(t(ue!=null),t(ge!=null),ge.Cb=ke(ue),ge.Cb){if(ge.Bb=ke(ue),ke(ue)){for(ge.Fb=ke(ue),xe=0;4>xe;++xe)ge.Zb[xe]=ke(ue)?Y(ue,7):0;for(xe=0;4>xe;++xe)ge.Lb[xe]=ke(ue)?Y(ue,6):0}if(ge.Bb)for(xe=0;3>xe;++xe)we.jb[xe]=ke(ue)?Q(ue,8):255}else ge.Bb=0;if(ue.Ka)return ta(w,3,"cannot parse segment header");if((ge=w.ed).zd=ke(ue),ge.Tb=Q(ue,6),ge.wb=Q(ue,3),ge.Pc=ke(ue),ge.Pc&&ke(ue)){for(we=0;4>we;++we)ke(ue)&&(ge.vd[we]=Y(ue,6));for(we=0;4>we;++we)ke(ue)&&(ge.od[we]=Y(ue,6))}if(w.L=ge.Tb==0?0:ge.zd?1:2,ue.Ka)return ta(w,3,"cannot parse filter header");var Fe=ce;if(ce=xe=Z,Z=xe+Fe,ge=Fe,w.Xb=(1<<Q(w.m,2))-1,Fe<3*(we=w.Xb))M=7;else{for(xe+=3*we,ge-=3*we,Fe=0;Fe<we;++Fe){var $e=M[ce+0]|M[ce+1]<<8|M[ce+2]<<16;$e>ge&&($e=ge),R(w.Jc[+Fe],M,xe,$e),xe+=$e,ge-=$e,ce+=3}R(w.Jc[+we],M,xe,ge),M=xe<Z?0:5}if(M!=0)return ta(w,M,"cannot parse partitions");for(M=Q(xe=w.m,7),ce=ke(xe)?Y(xe,4):0,Z=ke(xe)?Y(xe,4):0,ge=ke(xe)?Y(xe,4):0,we=ke(xe)?Y(xe,4):0,xe=ke(xe)?Y(xe,4):0,Fe=w.Qa,$e=0;4>$e;++$e){if(Fe.Cb){var O=Fe.Zb[$e];Fe.Fb||(O+=M)}else{if(0<$e){w.pb[$e]=w.pb[0];continue}O=M}var _=w.pb[$e];_.Sc[0]=qr[Ia(O+ce,127)],_.Sc[1]=Ur[Ia(O+0,127)],_.Eb[0]=2*qr[Ia(O+Z,127)],_.Eb[1]=101581*Ur[Ia(O+ge,127)]>>16,8>_.Eb[1]&&(_.Eb[1]=8),_.Qc[0]=qr[Ia(O+we,117)],_.Qc[1]=Ur[Ia(O+xe,127)],_.lc=O+xe}if(!he.Rb)return ta(w,4,"Not a key frame.");for(ke(ue),he=w.Pa,M=0;4>M;++M){for(ce=0;8>ce;++ce)for(Z=0;3>Z;++Z)for(ge=0;11>ge;++ge)we=Ye(ue,ea[M][ce][Z][ge])?Q(ue,8):ru[M][ce][Z][ge],he.Wc[M][ce].Yb[Z][ge]=we;for(ce=0;17>ce;++ce)he.Xc[M][ce]=he.Wc[M][Ls[ce]]}return w.kc=ke(ue),w.kc&&(w.Bd=Q(ue,8)),w.cb=1}function mi(w,k,M,Z,ce,ue,he){var ge=k[ce].Yb[M];for(M=0;16>ce;++ce){if(!Ye(w,ge[M+0]))return ce;for(;!Ye(w,ge[M+1]);)if(ge=k[++ce].Yb[0],M=0,ce==16)return 16;var xe=k[ce+1].Yb;if(Ye(w,ge[M+2])){var we=w,Fe=0;if(Ye(we,(O=ge)[($e=M)+3]))if(Ye(we,O[$e+6])){for(ge=0,$e=2*(Fe=Ye(we,O[$e+8]))+(O=Ye(we,O[$e+9+Fe])),Fe=0,O=Nc[$e];O[ge];++ge)Fe+=Fe+Ye(we,O[ge]);Fe+=3+(8<<$e)}else Ye(we,O[$e+7])?(Fe=7+2*Ye(we,165),Fe+=Ye(we,145)):Fe=5+Ye(we,159);else Fe=Ye(we,O[$e+4])?3+Ye(we,O[$e+5]):2;ge=xe[2]}else Fe=1,ge=xe[1];xe=he+wc[ce],0>(we=w).b&&Pe(we);var $e,O=we.b,_=($e=we.Ca>>1)-(we.I>>O)>>31;--we.b,we.Ca+=_,we.Ca|=1,we.I-=($e+1&_)<<O,ue[xe]=((Fe^_)-_)*Z[(0<ce)+0]}return 16}function pi(w){var k=w.rb[w.sb-1];k.la=0,k.Na=0,r(w.zc,0,0,w.zc.length),w.ja=0}function vr(w,k,M,Z,ce){ce=w[k+M+32*Z]+(ce>>3),w[k+M+32*Z]=-256&ce?0>ce?0:255:ce}function an(w,k,M,Z,ce,ue){vr(w,k,0,M,Z+ce),vr(w,k,1,M,Z+ue),vr(w,k,2,M,Z-ue),vr(w,k,3,M,Z-ce)}function zs(w){return(20091*w>>16)+w}function Pa(w,k,M,Z){var ce,ue=0,he=i(16);for(ce=0;4>ce;++ce){var ge=w[k+0]+w[k+8],xe=w[k+0]-w[k+8],we=(35468*w[k+4]>>16)-zs(w[k+12]),Fe=zs(w[k+4])+(35468*w[k+12]>>16);he[ue+0]=ge+Fe,he[ue+1]=xe+we,he[ue+2]=xe-we,he[ue+3]=ge-Fe,ue+=4,k++}for(ce=ue=0;4>ce;++ce)ge=(w=he[ue+0]+4)+he[ue+8],xe=w-he[ue+8],we=(35468*he[ue+4]>>16)-zs(he[ue+12]),vr(M,Z,0,0,ge+(Fe=zs(he[ue+4])+(35468*he[ue+12]>>16))),vr(M,Z,1,0,xe+we),vr(M,Z,2,0,xe-we),vr(M,Z,3,0,ge-Fe),ue++,Z+=32}function On(w,k,M,Z){var ce=w[k+0]+4,ue=35468*w[k+4]>>16,he=zs(w[k+4]),ge=35468*w[k+1]>>16;an(M,Z,0,ce+he,w=zs(w[k+1]),ge),an(M,Z,1,ce+ue,w,ge),an(M,Z,2,ce-ue,w,ge),an(M,Z,3,ce-he,w,ge)}function Do(w,k,M,Z,ce){Pa(w,k,M,Z),ce&&Pa(w,k+16,M,Z+4)}function Xl(w,k,M,Z){el(w,k+0,M,Z,1),el(w,k+32,M,Z+128,1)}function Na(w,k,M,Z){var ce;for(w=w[k+0]+4,ce=0;4>ce;++ce)for(k=0;4>k;++k)vr(M,Z,k,ce,w)}function si(w,k,M,Z){w[k+0]&&Ws(w,k+0,M,Z),w[k+16]&&Ws(w,k+16,M,Z+4),w[k+32]&&Ws(w,k+32,M,Z+128),w[k+48]&&Ws(w,k+48,M,Z+128+4)}function bl(w,k,M,Z){var ce,ue=i(16);for(ce=0;4>ce;++ce){var he=w[k+0+ce]+w[k+12+ce],ge=w[k+4+ce]+w[k+8+ce],xe=w[k+4+ce]-w[k+8+ce],we=w[k+0+ce]-w[k+12+ce];ue[0+ce]=he+ge,ue[8+ce]=he-ge,ue[4+ce]=we+xe,ue[12+ce]=we-xe}for(ce=0;4>ce;++ce)he=(w=ue[0+4*ce]+3)+ue[3+4*ce],ge=ue[1+4*ce]+ue[2+4*ce],xe=ue[1+4*ce]-ue[2+4*ce],we=w-ue[3+4*ce],M[Z+0]=he+ge>>3,M[Z+16]=we+xe>>3,M[Z+32]=he-ge>>3,M[Z+48]=we-xe>>3,Z+=64}function dn(w,k,M){var Z,ce=k-32,ue=Rn,he=255-w[ce-1];for(Z=0;Z<M;++Z){var ge,xe=ue,we=he+w[k-1];for(ge=0;ge<M;++ge)w[k+ge]=xe[we+w[ce+ge]];k+=32}}function Gl(w,k){dn(w,k,4)}function oc(w,k){dn(w,k,8)}function Ki(w,k){dn(w,k,16)}function Ql(w,k){var M;for(M=0;16>M;++M)n(w,k+32*M,w,k-32,16)}function Eo(w,k){var M;for(M=16;0<M;--M)r(w,k,w[k-1],16),k+=32}function Yn(w,k,M){var Z;for(Z=0;16>Z;++Z)r(k,M+32*Z,w,16)}function ai(w,k){var M,Z=16;for(M=0;16>M;++M)Z+=w[k-1+32*M]+w[k+M-32];Yn(Z>>5,w,k)}function un(w,k){var M,Z=8;for(M=0;16>M;++M)Z+=w[k-1+32*M];Yn(Z>>4,w,k)}function Er(w,k){var M,Z=8;for(M=0;16>M;++M)Z+=w[k+M-32];Yn(Z>>4,w,k)}function yl(w,k){Yn(128,w,k)}function es(w,k,M){return w+2*k+M+2>>2}function gi(w,k){var M,Z=k-32;for(Z=new Uint8Array([es(w[Z-1],w[Z+0],w[Z+1]),es(w[Z+0],w[Z+1],w[Z+2]),es(w[Z+1],w[Z+2],w[Z+3]),es(w[Z+2],w[Z+3],w[Z+4])]),M=0;4>M;++M)n(w,k+32*M,Z,0,Z.length)}function vl(w,k){var M=w[k-1],Z=w[k-1+32],ce=w[k-1+64],ue=w[k-1+96];Qe(w,k+0,16843009*es(w[k-1-32],M,Z)),Qe(w,k+32,16843009*es(M,Z,ce)),Qe(w,k+64,16843009*es(Z,ce,ue)),Qe(w,k+96,16843009*es(ce,ue,ue))}function To(w,k){var M,Z=4;for(M=0;4>M;++M)Z+=w[k+M-32]+w[k-1+32*M];for(Z>>=3,M=0;4>M;++M)r(w,k+32*M,Z,4)}function cc(w,k){var M=w[k-1+0],Z=w[k-1+32],ce=w[k-1+64],ue=w[k-1-32],he=w[k+0-32],ge=w[k+1-32],xe=w[k+2-32],we=w[k+3-32];w[k+0+96]=es(Z,ce,w[k-1+96]),w[k+1+96]=w[k+0+64]=es(M,Z,ce),w[k+2+96]=w[k+1+64]=w[k+0+32]=es(ue,M,Z),w[k+3+96]=w[k+2+64]=w[k+1+32]=w[k+0+0]=es(he,ue,M),w[k+3+64]=w[k+2+32]=w[k+1+0]=es(ge,he,ue),w[k+3+32]=w[k+2+0]=es(xe,ge,he),w[k+3+0]=es(we,xe,ge)}function lr(w,k){var M=w[k+1-32],Z=w[k+2-32],ce=w[k+3-32],ue=w[k+4-32],he=w[k+5-32],ge=w[k+6-32],xe=w[k+7-32];w[k+0+0]=es(w[k+0-32],M,Z),w[k+1+0]=w[k+0+32]=es(M,Z,ce),w[k+2+0]=w[k+1+32]=w[k+0+64]=es(Z,ce,ue),w[k+3+0]=w[k+2+32]=w[k+1+64]=w[k+0+96]=es(ce,ue,he),w[k+3+32]=w[k+2+64]=w[k+1+96]=es(ue,he,ge),w[k+3+64]=w[k+2+96]=es(he,ge,xe),w[k+3+96]=es(ge,xe,xe)}function Fa(w,k){var M=w[k-1+0],Z=w[k-1+32],ce=w[k-1+64],ue=w[k-1-32],he=w[k+0-32],ge=w[k+1-32],xe=w[k+2-32],we=w[k+3-32];w[k+0+0]=w[k+1+64]=ue+he+1>>1,w[k+1+0]=w[k+2+64]=he+ge+1>>1,w[k+2+0]=w[k+3+64]=ge+xe+1>>1,w[k+3+0]=xe+we+1>>1,w[k+0+96]=es(ce,Z,M),w[k+0+64]=es(Z,M,ue),w[k+0+32]=w[k+1+96]=es(M,ue,he),w[k+1+32]=w[k+2+96]=es(ue,he,ge),w[k+2+32]=w[k+3+96]=es(he,ge,xe),w[k+3+32]=es(ge,xe,we)}function dc(w,k){var M=w[k+0-32],Z=w[k+1-32],ce=w[k+2-32],ue=w[k+3-32],he=w[k+4-32],ge=w[k+5-32],xe=w[k+6-32],we=w[k+7-32];w[k+0+0]=M+Z+1>>1,w[k+1+0]=w[k+0+64]=Z+ce+1>>1,w[k+2+0]=w[k+1+64]=ce+ue+1>>1,w[k+3+0]=w[k+2+64]=ue+he+1>>1,w[k+0+32]=es(M,Z,ce),w[k+1+32]=w[k+0+96]=es(Z,ce,ue),w[k+2+32]=w[k+1+96]=es(ce,ue,he),w[k+3+32]=w[k+2+96]=es(ue,he,ge),w[k+3+64]=es(he,ge,xe),w[k+3+96]=es(ge,xe,we)}function jl(w,k){var M=w[k-1+0],Z=w[k-1+32],ce=w[k-1+64],ue=w[k-1+96];w[k+0+0]=M+Z+1>>1,w[k+2+0]=w[k+0+32]=Z+ce+1>>1,w[k+2+32]=w[k+0+64]=ce+ue+1>>1,w[k+1+0]=es(M,Z,ce),w[k+3+0]=w[k+1+32]=es(Z,ce,ue),w[k+3+32]=w[k+1+64]=es(ce,ue,ue),w[k+3+64]=w[k+2+64]=w[k+0+96]=w[k+1+96]=w[k+2+96]=w[k+3+96]=ue}function Kn(w,k){var M=w[k-1+0],Z=w[k-1+32],ce=w[k-1+64],ue=w[k-1+96],he=w[k-1-32],ge=w[k+0-32],xe=w[k+1-32],we=w[k+2-32];w[k+0+0]=w[k+2+32]=M+he+1>>1,w[k+0+32]=w[k+2+64]=Z+M+1>>1,w[k+0+64]=w[k+2+96]=ce+Z+1>>1,w[k+0+96]=ue+ce+1>>1,w[k+3+0]=es(ge,xe,we),w[k+2+0]=es(he,ge,xe),w[k+1+0]=w[k+3+32]=es(M,he,ge),w[k+1+32]=w[k+3+64]=es(Z,M,he),w[k+1+64]=w[k+3+96]=es(ce,Z,M),w[k+1+96]=es(ue,ce,Z)}function xi(w,k){var M;for(M=0;8>M;++M)n(w,k+32*M,w,k-32,8)}function Tr(w,k){var M;for(M=0;8>M;++M)r(w,k,w[k-1],8),k+=32}function Jl(w,k,M){var Z;for(Z=0;8>Z;++Z)r(k,M+32*Z,w,8)}function Lr(w,k){var M,Z=8;for(M=0;8>M;++M)Z+=w[k+M-32]+w[k-1+32*M];Jl(Z>>4,w,k)}function Lo(w,k){var M,Z=4;for(M=0;8>M;++M)Z+=w[k+M-32];Jl(Z>>3,w,k)}function Zl(w,k){var M,Z=4;for(M=0;8>M;++M)Z+=w[k-1+32*M];Jl(Z>>3,w,k)}function Ka(w,k){Jl(128,w,k)}function Xn(w,k,M){var Z=w[k-M],ce=w[k+0],ue=3*(ce-Z)+Nn[1020+w[k-2*M]-w[k+M]],he=zo[112+(ue+4>>3)];w[k-M]=Rn[255+Z+zo[112+(ue+3>>3)]],w[k+0]=Rn[255+ce-he]}function Pr(w,k,M,Z){var ce=w[k+0],ue=w[k+M];return wn[255+w[k-2*M]-w[k-M]]>Z||wn[255+ue-ce]>Z}function bi(w,k,M,Z){return 4*wn[255+w[k-M]-w[k+0]]+wn[255+w[k-2*M]-w[k+M]]<=Z}function yi(w,k,M,Z,ce){var ue=w[k-3*M],he=w[k-2*M],ge=w[k-M],xe=w[k+0],we=w[k+M],Fe=w[k+2*M],$e=w[k+3*M];return 4*wn[255+ge-xe]+wn[255+he-we]>Z?0:wn[255+w[k-4*M]-ue]<=ce&&wn[255+ue-he]<=ce&&wn[255+he-ge]<=ce&&wn[255+$e-Fe]<=ce&&wn[255+Fe-we]<=ce&&wn[255+we-xe]<=ce}function Xi(w,k,M,Z){var ce=2*Z+1;for(Z=0;16>Z;++Z)bi(w,k+Z,M,ce)&&Xn(w,k+Z,M)}function vi(w,k,M,Z){var ce=2*Z+1;for(Z=0;16>Z;++Z)bi(w,k+Z*M,1,ce)&&Xn(w,k+Z*M,1)}function Gi(w,k,M,Z){var ce;for(ce=3;0<ce;--ce)Xi(w,k+=4*M,M,Z)}function Fr(w,k,M,Z){var ce;for(ce=3;0<ce;--ce)vi(w,k+=4,M,Z)}function ji(w,k,M,Z,ce,ue,he,ge){for(ue=2*ue+1;0<ce--;){if(yi(w,k,M,ue,he))if(Pr(w,k,M,ge))Xn(w,k,M);else{var xe=w,we=k,Fe=M,$e=xe[we-2*Fe],O=xe[we-Fe],_=xe[we+0],I=xe[we+Fe],ie=xe[we+2*Fe],fe=27*(Ae=Nn[1020+3*(_-O)+Nn[1020+$e-I]])+63>>7,ye=18*Ae+63>>7,Ae=9*Ae+63>>7;xe[we-3*Fe]=Rn[255+xe[we-3*Fe]+Ae],xe[we-2*Fe]=Rn[255+$e+ye],xe[we-Fe]=Rn[255+O+fe],xe[we+0]=Rn[255+_-fe],xe[we+Fe]=Rn[255+I-ye],xe[we+2*Fe]=Rn[255+ie-Ae]}k+=Z}}function Ni(w,k,M,Z,ce,ue,he,ge){for(ue=2*ue+1;0<ce--;){if(yi(w,k,M,ue,he))if(Pr(w,k,M,ge))Xn(w,k,M);else{var xe=w,we=k,Fe=M,$e=xe[we-Fe],O=xe[we+0],_=xe[we+Fe],I=zo[112+(4+(ie=3*(O-$e))>>3)],ie=zo[112+(ie+3>>3)],fe=I+1>>1;xe[we-2*Fe]=Rn[255+xe[we-2*Fe]+fe],xe[we-Fe]=Rn[255+$e+ie],xe[we+0]=Rn[255+O-I],xe[we+Fe]=Rn[255+_-fe]}k+=Z}}function uc(w,k,M,Z,ce,ue){ji(w,k,M,1,16,Z,ce,ue)}function hc(w,k,M,Z,ce,ue){ji(w,k,1,M,16,Z,ce,ue)}function wi(w,k,M,Z,ce,ue){var he;for(he=3;0<he;--he)Ni(w,k+=4*M,M,1,16,Z,ce,ue)}function fc(w,k,M,Z,ce,ue){var he;for(he=3;0<he;--he)Ni(w,k+=4,1,M,16,Z,ce,ue)}function F(w,k,M,Z,ce,ue,he,ge){ji(w,k,ce,1,8,ue,he,ge),ji(M,Z,ce,1,8,ue,he,ge)}function oe(w,k,M,Z,ce,ue,he,ge){ji(w,k,1,ce,8,ue,he,ge),ji(M,Z,1,ce,8,ue,he,ge)}function _e(w,k,M,Z,ce,ue,he,ge){Ni(w,k+4*ce,ce,1,8,ue,he,ge),Ni(M,Z+4*ce,ce,1,8,ue,he,ge)}function Le(w,k,M,Z,ce,ue,he,ge){Ni(w,k+4,1,ce,8,ue,he,ge),Ni(M,Z+4,1,ce,8,ue,he,ge)}function ze(){this.ba=new Pt,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Ue,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function ot(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function mt(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Yt(){this.ua=0,this.Wa=new Ve,this.vb=new Ve,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new X,this.yc=new H}function Gt(){this.xb=this.a=0,this.l=new fi,this.ca=new Pt,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new le,this.Pb=0,this.wd=new le,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Yt,this.ab=0,this.gc=o(4,mt),this.Oc=0}function ls(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new fi,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function xs(w,k,M,Z,ce,ue,he){for(w=w==null?0:w[k+0],k=0;k<he;++k)ce[ue+k]=w+M[Z+k]&255,w=ce[ue+k]}function Vs(w,k,M,Z,ce,ue,he){var ge;if(w==null)xs(null,null,M,Z,ce,ue,he);else for(ge=0;ge<he;++ge)ce[ue+ge]=w[k+ge]+M[Z+ge]&255}function sa(w,k,M,Z,ce,ue,he){if(w==null)xs(null,null,M,Z,ce,ue,he);else{var ge,xe=w[k+0],we=xe,Fe=xe;for(ge=0;ge<he;++ge)we=Fe+(xe=w[k+ge])-we,Fe=M[Z+ge]+(-256&we?0>we?0:255:we)&255,we=xe,ce[ue+ge]=Fe}}function Aa(w,k,M,Z){var ce=k.width,ue=k.o;if(t(w!=null&&k!=null),0>M||0>=Z||M+Z>ue)return null;if(!w.Cc){if(w.ga==null){var he;if(w.ga=new ls,(he=w.ga==null)||(he=k.width*k.o,t(w.Gb.length==0),w.Gb=i(he),w.Uc=0,w.Gb==null?he=0:(w.mb=w.Gb,w.nb=w.Uc,w.rc=null,he=1),he=!he),!he){he=w.ga;var ge=w.Fa,xe=w.P,we=w.qc,Fe=w.mb,$e=w.nb,O=xe+1,_=we-1,I=he.l;if(t(ge!=null&&Fe!=null&&k!=null),er[0]=null,er[1]=xs,er[2]=Vs,er[3]=sa,he.ca=Fe,he.tb=$e,he.c=k.width,he.i=k.height,t(0<he.c&&0<he.i),1>=we)k=0;else if(he.$a=3&ge[xe+0],he.Z=ge[xe+0]>>2&3,he.Lc=ge[xe+0]>>4&3,xe=ge[xe+0]>>6&3,0>he.$a||1<he.$a||4<=he.Z||1<he.Lc||xe)k=0;else if(I.put=Ze,I.ac=ve,I.bc=Wt,I.ma=he,I.width=k.width,I.height=k.height,I.Da=k.Da,I.v=k.v,I.va=k.va,I.j=k.j,I.o=k.o,he.$a)e:{t(he.$a==1),k=kr();t:for(;;){if(k==null){k=0;break e}if(t(he!=null),he.mc=k,k.c=he.c,k.i=he.i,k.l=he.l,k.l.ma=he,k.l.width=he.c,k.l.height=he.i,k.a=0,$(k.m,ge,O,_),!pa(he.c,he.i,1,k,null)||(k.ab==1&&k.gc[0].hc==3&&Zs(k.s)?(he.ic=1,ge=k.c*k.i,k.Ta=null,k.Ua=0,k.V=i(ge),k.Ba=0,k.V==null?(k.a=1,k=0):k=1):(he.ic=0,k=Ca(k,he.c)),!k))break t;k=1;break e}he.mc=null,k=0}else k=_>=he.c*he.i;he=!k}if(he)return null;w.ga.Lc!=1?w.Ga=0:Z=ue-M}t(w.ga!=null),t(M+Z<=ue);e:{if(k=(ge=w.ga).c,ue=ge.l.o,ge.$a==0){if(O=w.rc,_=w.Vc,I=w.Fa,xe=w.P+1+M*k,we=w.mb,Fe=w.nb+M*k,t(xe<=w.P+w.qc),ge.Z!=0)for(t(er[ge.Z]!=null),he=0;he<Z;++he)er[ge.Z](O,_,I,xe,we,Fe,k),O=we,_=Fe,Fe+=k,xe+=k;else for(he=0;he<Z;++he)n(we,Fe,I,xe,k),O=we,_=Fe,Fe+=k,xe+=k;w.rc=O,w.Vc=_}else{if(t(ge.mc!=null),k=M+Z,t((he=ge.mc)!=null),t(k<=he.i),he.C>=k)k=1;else if(ge.ic||Ir(),ge.ic){ge=he.V,O=he.Ba,_=he.c;var ie=he.i,fe=(I=1,xe=he.$/_,we=he.$%_,Fe=he.m,$e=he.s,he.$),ye=_*ie,Ae=_*k,Oe=$e.wc,Be=fe<Ae?ja($e,we,xe):null;t(fe<=ye),t(k<=ie),t(Zs($e));t:for(;;){for(;!Fe.h&&fe<Ae;){if(we&Oe||(Be=ja($e,we,xe)),t(Be!=null),De(Fe),256>(ie=Os(Be.G[0],Be.H[0],Fe)))ge[O+fe]=ie,++fe,++we>=_&&(we=0,++xe<=k&&!(xe%16)&&cn(he,xe));else{if(!(280>ie)){I=0;break t}ie=Ts(ie-256,Fe);var it,nt=Os(Be.G[4],Be.H[4],Fe);if(De(Fe),!(fe>=(nt=aa(_,nt=Ts(nt,Fe)))&&ye-fe>=ie)){I=0;break t}for(it=0;it<ie;++it)ge[O+fe+it]=ge[O+fe+it-nt];for(fe+=ie,we+=ie;we>=_;)we-=_,++xe<=k&&!(xe%16)&&cn(he,xe);fe<Ae&&we&Oe&&(Be=ja($e,we,xe))}t(Fe.h==G(Fe))}cn(he,xe>k?k:xe);break t}!I||Fe.h&&fe<ye?(I=0,he.a=Fe.h?5:3):he.$=fe,k=I}else k=yr(he,he.V,he.Ba,he.c,he.i,k,Ya);if(!k){Z=0;break e}}M+Z>=ue&&(w.Cc=1),Z=1}if(!Z)return null;if(w.Cc&&((Z=w.ga)!=null&&(Z.mc=null),w.ga=null,0<w.Ga))return alert("todo:WebPDequantizeLevels"),null}return w.nb+M*ce}function ha(w,k,M,Z,ce,ue){for(;0<ce--;){var he,ge=w,xe=k+(M?1:0),we=w,Fe=k+(M?0:3);for(he=0;he<Z;++he){var $e=we[Fe+4*he];$e!=255&&($e*=32897,ge[xe+4*he+0]=ge[xe+4*he+0]*$e>>23,ge[xe+4*he+1]=ge[xe+4*he+1]*$e>>23,ge[xe+4*he+2]=ge[xe+4*he+2]*$e>>23)}k+=ue}}function Xa(w,k,M,Z,ce){for(;0<Z--;){var ue;for(ue=0;ue<M;++ue){var he=w[k+2*ue+0],ge=15&(we=w[k+2*ue+1]),xe=4369*ge,we=(240&we|we>>4)*xe>>16;w[k+2*ue+0]=(240&he|he>>4)*xe>>16&240|(15&he|he<<4)*xe>>16>>4&15,w[k+2*ue+1]=240&we|ge}k+=ce}}function Ga(w,k,M,Z,ce,ue,he,ge){var xe,we,Fe=255;for(we=0;we<ce;++we){for(xe=0;xe<Z;++xe){var $e=w[k+xe];ue[he+4*xe]=$e,Fe&=$e}k+=M,he+=ge}return Fe!=255}function xn(w,k,M,Z,ce){var ue;for(ue=0;ue<ce;++ue)M[Z+ue]=w[k+ue]>>8}function Ir(){ro=ha,Rr=Xa,Bo=Ga,dr=xn}function or(w,k,M){B[w]=function(Z,ce,ue,he,ge,xe,we,Fe,$e,O,_,I,ie,fe,ye,Ae,Oe){var Be,it=Oe-1>>1,nt=ge[xe+0]|we[Fe+0]<<16,dt=$e[O+0]|_[I+0]<<16;t(Z!=null);var gt=3*nt+dt+131074>>2;for(k(Z[ce+0],255&gt,gt>>16,ie,fe),ue!=null&&(gt=3*dt+nt+131074>>2,k(ue[he+0],255&gt,gt>>16,ye,Ae)),Be=1;Be<=it;++Be){var St=ge[xe+Be]|we[Fe+Be]<<16,Ut=$e[O+Be]|_[I+Be]<<16,jt=nt+St+dt+Ut+524296,ht=jt+2*(St+dt)>>3;gt=ht+nt>>1,nt=(jt=jt+2*(nt+Ut)>>3)+St>>1,k(Z[ce+2*Be-1],255&gt,gt>>16,ie,fe+(2*Be-1)*M),k(Z[ce+2*Be-0],255&nt,nt>>16,ie,fe+(2*Be-0)*M),ue!=null&&(gt=jt+dt>>1,nt=ht+Ut>>1,k(ue[he+2*Be-1],255&gt,gt>>16,ye,Ae+(2*Be-1)*M),k(ue[he+2*Be+0],255&nt,nt>>16,ye,Ae+(2*Be+0)*M)),nt=St,dt=Ut}1&Oe||(gt=3*nt+dt+131074>>2,k(Z[ce+Oe-1],255&gt,gt>>16,ie,fe+(Oe-1)*M),ue!=null&&(gt=3*dt+nt+131074>>2,k(ue[he+Oe-1],255&gt,gt>>16,ye,Ae+(Oe-1)*M)))}}function mc(){Sn[cd]=co,Sn[Bn]=Uo,Sn[dd]=iu,Sn[Br]=md,Sn[yc]=kl,Sn[qo]=Li,Sn[Ti]=Dl,Sn[_l]=Uo,Sn[ud]=md,Sn[lo]=kl,Sn[vc]=Li}function eo(w){return w&-16384?0>w?0:255:w>>_c}function to(w,k){return eo((19077*w>>8)+(26149*k>>8)-14234)}function Gn(w,k,M){return eo((19077*w>>8)-(6419*k>>8)-(13320*M>>8)+8708)}function bn(w,k){return eo((19077*w>>8)+(33050*k>>8)-17685)}function so(w,k,M,Z,ce){Z[ce+0]=to(w,M),Z[ce+1]=Gn(w,k,M),Z[ce+2]=bn(w,k)}function ni(w,k,M,Z,ce){Z[ce+0]=bn(w,k),Z[ce+1]=Gn(w,k,M),Z[ce+2]=to(w,M)}function yn(w,k,M,Z,ce){var ue=Gn(w,k,M);k=ue<<3&224|bn(w,k)>>3,Z[ce+0]=248&to(w,M)|ue>>5,Z[ce+1]=k}function Nl(w,k,M,Z,ce){var ue=240&bn(w,k)|15;Z[ce+0]=240&to(w,M)|Gn(w,k,M)>>4,Z[ce+1]=ue}function wl(w,k,M,Z,ce){Z[ce+0]=255,so(w,k,M,Z,ce+1)}function Po(w,k,M,Z,ce){ni(w,k,M,Z,ce),Z[ce+3]=255}function _i(w,k,M,Z,ce){so(w,k,M,Z,ce),Z[ce+3]=255}function Ia(w,k){return 0>w?0:w>k?k:w}function Qi(w,k,M){B[w]=function(Z,ce,ue,he,ge,xe,we,Fe,$e){for(var O=Fe+(-2&$e)*M;Fe!=O;)k(Z[ce+0],ue[he+0],ge[xe+0],we,Fe),k(Z[ce+1],ue[he+0],ge[xe+0],we,Fe+M),ce+=2,++he,++xe,Fe+=2*M;1&$e&&k(Z[ce+0],ue[he+0],ge[xe+0],we,Fe)}}function Fo(w,k,M){return M==0?w==0?k==0?6:5:k==0?4:0:M}function Qn(w,k,M,Z,ce){switch(w>>>30){case 3:el(k,M,Z,ce,0);break;case 2:Mn(k,M,Z,ce);break;case 1:Ws(k,M,Z,ce)}}function cr(w,k){var M,Z,ce=k.M,ue=k.Nb,he=w.oc,ge=w.pc+40,xe=w.oc,we=w.pc+584,Fe=w.oc,$e=w.pc+600;for(M=0;16>M;++M)he[ge+32*M-1]=129;for(M=0;8>M;++M)xe[we+32*M-1]=129,Fe[$e+32*M-1]=129;for(0<ce?he[ge-1-32]=xe[we-1-32]=Fe[$e-1-32]=129:(r(he,ge-32-1,127,21),r(xe,we-32-1,127,9),r(Fe,$e-32-1,127,9)),Z=0;Z<w.za;++Z){var O=k.ya[k.aa+Z];if(0<Z){for(M=-1;16>M;++M)n(he,ge+32*M-4,he,ge+32*M+12,4);for(M=-1;8>M;++M)n(xe,we+32*M-4,xe,we+32*M+4,4),n(Fe,$e+32*M-4,Fe,$e+32*M+4,4)}var _=w.Gd,I=w.Hd+Z,ie=O.ad,fe=O.Hc;if(0<ce&&(n(he,ge-32,_[I].y,0,16),n(xe,we-32,_[I].f,0,8),n(Fe,$e-32,_[I].ea,0,8)),O.Za){var ye=he,Ae=ge-32+16;for(0<ce&&(Z>=w.za-1?r(ye,Ae,_[I].y[15],4):n(ye,Ae,_[I+1].y,0,4)),M=0;4>M;M++)ye[Ae+128+M]=ye[Ae+256+M]=ye[Ae+384+M]=ye[Ae+0+M];for(M=0;16>M;++M,fe<<=2)ye=he,Ae=ge+qa[M],Ma[O.Ob[M]](ye,Ae),Qn(fe,ie,16*+M,ye,Ae)}else if(ye=Fo(Z,ce,O.Ob[0]),qn[ye](he,ge),fe!=0)for(M=0;16>M;++M,fe<<=2)Qn(fe,ie,16*+M,he,ge+qa[M]);for(M=O.Gc,ye=Fo(Z,ce,O.Dd),oi[ye](xe,we),oi[ye](Fe,$e),fe=ie,ye=xe,Ae=we,255&(O=0|M)&&(170&O?Mr(fe,256,ye,Ae):Ms(fe,256,ye,Ae)),O=Fe,fe=$e,255&(M>>=8)&&(170&M?Mr(ie,320,O,fe):Ms(ie,320,O,fe)),ce<w.Ub-1&&(n(_[I].y,0,he,ge+480,16),n(_[I].f,0,xe,we+224,8),n(_[I].ea,0,Fe,$e+224,8)),M=8*ue*w.B,_=w.sa,I=w.ta+16*Z+16*ue*w.R,ie=w.qa,O=w.ra+8*Z+M,fe=w.Ha,ye=w.Ia+8*Z+M,M=0;16>M;++M)n(_,I+M*w.R,he,ge+32*M,16);for(M=0;8>M;++M)n(ie,O+M*w.B,xe,we+32*M,8),n(fe,ye+M*w.B,Fe,$e+32*M,8)}}function Or(w,k,M,Z,ce,ue,he,ge,xe){var we=[0],Fe=[0],$e=0,O=xe!=null?xe.kd:0,_=xe??new ot;if(w==null||12>M)return 7;_.data=w,_.w=k,_.ha=M,k=[k],M=[M],_.gb=[_.gb];e:{var I=k,ie=M,fe=_.gb;if(t(w!=null),t(ie!=null),t(fe!=null),fe[0]=0,12<=ie[0]&&!a(w,I[0],"RIFF")){if(a(w,I[0]+8,"WEBP")){fe=3;break e}var ye=re(w,I[0]+4);if(12>ye||4294967286<ye){fe=3;break e}if(O&&ye>ie[0]-8){fe=7;break e}fe[0]=ye,I[0]+=12,ie[0]-=12}fe=0}if(fe!=0)return fe;for(ye=0<_.gb[0],M=M[0];;){e:{var Ae=w;ie=k,fe=M;var Oe=we,Be=Fe,it=I=[0];if((gt=$e=[$e])[0]=0,8>fe[0])fe=7;else{if(!a(Ae,ie[0],"VP8X")){if(re(Ae,ie[0]+4)!=10){fe=3;break e}if(18>fe[0]){fe=7;break e}var nt=re(Ae,ie[0]+8),dt=1+Xe(Ae,ie[0]+12);if(2147483648<=dt*(Ae=1+Xe(Ae,ie[0]+15))){fe=3;break e}it!=null&&(it[0]=nt),Oe!=null&&(Oe[0]=dt),Be!=null&&(Be[0]=Ae),ie[0]+=18,fe[0]-=18,gt[0]=1}fe=0}}if($e=$e[0],I=I[0],fe!=0)return fe;if(ie=!!(2&I),!ye&&$e)return 3;if(ue!=null&&(ue[0]=!!(16&I)),he!=null&&(he[0]=ie),ge!=null&&(ge[0]=0),he=we[0],I=Fe[0],$e&&ie&&xe==null){fe=0;break}if(4>M){fe=7;break}if(ye&&$e||!ye&&!$e&&!a(w,k[0],"ALPH")){M=[M],_.na=[_.na],_.P=[_.P],_.Sa=[_.Sa];e:{nt=w,fe=k,ye=M;var gt=_.gb;Oe=_.na,Be=_.P,it=_.Sa,dt=22,t(nt!=null),t(ye!=null),Ae=fe[0];var St=ye[0];for(t(Oe!=null),t(it!=null),Oe[0]=null,Be[0]=null,it[0]=0;;){if(fe[0]=Ae,ye[0]=St,8>St){fe=7;break e}var Ut=re(nt,Ae+4);if(4294967286<Ut){fe=3;break e}var jt=8+Ut+1&-2;if(dt+=jt,0<gt&&dt>gt){fe=3;break e}if(!a(nt,Ae,"VP8 ")||!a(nt,Ae,"VP8L")){fe=0;break e}if(St[0]<jt){fe=7;break e}a(nt,Ae,"ALPH")||(Oe[0]=nt,Be[0]=Ae+8,it[0]=Ut),Ae+=jt,St-=jt}}if(M=M[0],_.na=_.na[0],_.P=_.P[0],_.Sa=_.Sa[0],fe!=0)break}M=[M],_.Ja=[_.Ja],_.xa=[_.xa];e:if(gt=w,fe=k,ye=M,Oe=_.gb[0],Be=_.Ja,it=_.xa,nt=fe[0],Ae=!a(gt,nt,"VP8 "),dt=!a(gt,nt,"VP8L"),t(gt!=null),t(ye!=null),t(Be!=null),t(it!=null),8>ye[0])fe=7;else{if(Ae||dt){if(gt=re(gt,nt+4),12<=Oe&&gt>Oe-12){fe=3;break e}if(O&&gt>ye[0]-8){fe=7;break e}Be[0]=gt,fe[0]+=8,ye[0]-=8,it[0]=dt}else it[0]=5<=ye[0]&&gt[nt+0]==47&&!(gt[nt+4]>>5),Be[0]=ye[0];fe=0}if(M=M[0],_.Ja=_.Ja[0],_.xa=_.xa[0],k=k[0],fe!=0)break;if(4294967286<_.Ja)return 3;if(ge==null||ie||(ge[0]=_.xa?2:1),he=[he],I=[I],_.xa){if(5>M){fe=7;break}ge=he,O=I,ie=ue,w==null||5>M?w=0:5<=M&&w[k+0]==47&&!(w[k+4]>>5)?(ye=[0],gt=[0],Oe=[0],$(Be=new le,w,k,M),Fs(Be,ye,gt,Oe)?(ge!=null&&(ge[0]=ye[0]),O!=null&&(O[0]=gt[0]),ie!=null&&(ie[0]=Oe[0]),w=1):w=0):w=0}else{if(10>M){fe=7;break}ge=I,w==null||10>M||!In(w,k+3,M-3)?w=0:(O=w[k+0]|w[k+1]<<8|w[k+2]<<16,ie=16383&(w[k+7]<<8|w[k+6]),w=16383&(w[k+9]<<8|w[k+8]),1&O||3<(O>>1&7)||!(O>>4&1)||O>>5>=_.Ja||!ie||!w?w=0:(he&&(he[0]=ie),ge&&(ge[0]=w),w=1))}if(!w||(he=he[0],I=I[0],$e&&(we[0]!=he||Fe[0]!=I)))return 3;xe!=null&&(xe[0]=_,xe.offset=k-xe.w,t(4294967286>k-xe.w),t(xe.offset==xe.ha-M));break}return fe==0||fe==7&&$e&&xe==null?(ue!=null&&(ue[0]|=_.na!=null&&0<_.na.length),Z!=null&&(Z[0]=he),ce!=null&&(ce[0]=I),0):fe}function Si(w,k,M){var Z=k.width,ce=k.height,ue=0,he=0,ge=Z,xe=ce;if(k.Da=w!=null&&0<w.Da,k.Da&&(ge=w.cd,xe=w.bd,ue=w.v,he=w.j,11>M||(ue&=-2,he&=-2),0>ue||0>he||0>=ge||0>=xe||ue+ge>Z||he+xe>ce))return 0;if(k.v=ue,k.j=he,k.va=ue+ge,k.o=he+xe,k.U=ge,k.T=xe,k.da=w!=null&&0<w.da,k.da){if(!xt(ge,xe,M=[w.ib],ue=[w.hb]))return 0;k.ib=M[0],k.hb=ue[0]}return k.ob=w!=null&&w.ob,k.Kb=w==null||!w.Sd,k.da&&(k.ob=k.ib<3*Z/4&&k.hb<3*ce/4,k.Kb=0),1}function pc(w){if(w==null)return 2;if(11>w.S){var k=w.f.RGBA;k.fb+=(w.height-1)*k.A,k.A=-k.A}else k=w.f.kb,w=w.height,k.O+=(w-1)*k.fa,k.fa=-k.fa,k.N+=(w-1>>1)*k.Ab,k.Ab=-k.Ab,k.W+=(w-1>>1)*k.Db,k.Db=-k.Db,k.F!=null&&(k.J+=(w-1)*k.lb,k.lb=-k.lb);return 0}function ri(w,k,M,Z){if(Z==null||0>=w||0>=k)return 2;if(M!=null){if(M.Da){var ce=M.cd,ue=M.bd,he=-2&M.v,ge=-2&M.j;if(0>he||0>ge||0>=ce||0>=ue||he+ce>w||ge+ue>k)return 2;w=ce,k=ue}if(M.da){if(!xt(w,k,ce=[M.ib],ue=[M.hb]))return 2;w=ce[0],k=ue[0]}}Z.width=w,Z.height=k;e:{var xe=Z.width,we=Z.height;if(w=Z.S,0>=xe||0>=we||!(w>=cd&&13>w))w=2;else{if(0>=Z.Rd&&Z.sd==null){he=ue=ce=k=0;var Fe=(ge=xe*pd[w])*we;if(11>w||(ue=(we+1)/2*(k=(xe+1)/2),w==12&&(he=(ce=xe)*we)),(we=i(Fe+2*ue+he))==null){w=1;break e}Z.sd=we,11>w?((xe=Z.f.RGBA).eb=we,xe.fb=0,xe.A=ge,xe.size=Fe):((xe=Z.f.kb).y=we,xe.O=0,xe.fa=ge,xe.Fd=Fe,xe.f=we,xe.N=0+Fe,xe.Ab=k,xe.Cd=ue,xe.ea=we,xe.W=0+Fe+ue,xe.Db=k,xe.Ed=ue,w==12&&(xe.F=we,xe.J=0+Fe+2*ue),xe.Tc=he,xe.lb=ce)}if(k=1,ce=Z.S,ue=Z.width,he=Z.height,ce>=cd&&13>ce)if(11>ce)w=Z.f.RGBA,k&=(ge=Math.abs(w.A))*(he-1)+ue<=w.size,k&=ge>=ue*pd[ce],k&=w.eb!=null;else{w=Z.f.kb,ge=(ue+1)/2,Fe=(he+1)/2,xe=Math.abs(w.fa),we=Math.abs(w.Ab);var $e=Math.abs(w.Db),O=Math.abs(w.lb),_=O*(he-1)+ue;k&=xe*(he-1)+ue<=w.Fd,k&=we*(Fe-1)+ge<=w.Cd,k=(k&=$e*(Fe-1)+ge<=w.Ed)&xe>=ue&we>=ge&$e>=ge,k&=w.y!=null,k&=w.f!=null,k&=w.ea!=null,ce==12&&(k&=O>=ue,k&=_<=w.Tc,k&=w.F!=null)}else k=0;w=k?0:2}}return w!=0||M!=null&&M.fd&&(w=pc(Z)),w}var Ji=64,vn=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Jn=24,Ci=32,ii=8,Zi=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];He("Predictor0","PredictorAdd0"),B.Predictor0=function(){return 4278190080},B.Predictor1=function(w){return w},B.Predictor2=function(w,k,M){return k[M+0]},B.Predictor3=function(w,k,M){return k[M+1]},B.Predictor4=function(w,k,M){return k[M-1]},B.Predictor5=function(w,k,M){return Dt(Dt(w,k[M+1]),k[M+0])},B.Predictor6=function(w,k,M){return Dt(w,k[M-1])},B.Predictor7=function(w,k,M){return Dt(w,k[M+0])},B.Predictor8=function(w,k,M){return Dt(k[M-1],k[M+0])},B.Predictor9=function(w,k,M){return Dt(k[M+0],k[M+1])},B.Predictor10=function(w,k,M){return Dt(Dt(w,k[M-1]),Dt(k[M+0],k[M+1]))},B.Predictor11=function(w,k,M){var Z=k[M+0];return 0>=Bt(Z>>24&255,w>>24&255,(k=k[M-1])>>24&255)+Bt(Z>>16&255,w>>16&255,k>>16&255)+Bt(Z>>8&255,w>>8&255,k>>8&255)+Bt(255&Z,255&w,255&k)?Z:w},B.Predictor12=function(w,k,M){var Z=k[M+0];return(Mt((w>>24&255)+(Z>>24&255)-((k=k[M-1])>>24&255))<<24|Mt((w>>16&255)+(Z>>16&255)-(k>>16&255))<<16|Mt((w>>8&255)+(Z>>8&255)-(k>>8&255))<<8|Mt((255&w)+(255&Z)-(255&k)))>>>0},B.Predictor13=function(w,k,M){var Z=k[M-1];return(At((w=Dt(w,k[M+0]))>>24&255,Z>>24&255)<<24|At(w>>16&255,Z>>16&255)<<16|At(w>>8&255,Z>>8&255)<<8|At(255&w,255&Z))>>>0};var Io=B.PredictorAdd0;B.PredictorAdd1=rs,He("Predictor2","PredictorAdd2"),He("Predictor3","PredictorAdd3"),He("Predictor4","PredictorAdd4"),He("Predictor5","PredictorAdd5"),He("Predictor6","PredictorAdd6"),He("Predictor7","PredictorAdd7"),He("Predictor8","PredictorAdd8"),He("Predictor9","PredictorAdd9"),He("Predictor10","PredictorAdd10"),He("Predictor11","PredictorAdd11"),He("Predictor12","PredictorAdd12"),He("Predictor13","PredictorAdd13");var ao=B.PredictorAdd2;bt("ColorIndexInverseTransform","MapARGB","32b",function(w){return w>>8&255},function(w){return w}),bt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(w){return w},function(w){return w>>8&255});var Oa,gc=B.ColorIndexInverseTransform,jr=B.MapARGB,li=B.VP8LColorIndexInverseTransformAlpha,nn=B.MapAlpha,Qa=B.VP8LPredictorsAdd=[];Qa.length=16,(B.VP8LPredictors=[]).length=16,(B.VP8LPredictorsAdd_C=[]).length=16,(B.VP8LPredictors_C=[]).length=16;var Oo,Mo,Ai,ki,Di,no,Nr,el,Mn,Mr,Ws,Ms,na,za,Ei,jn,Zn,Ro,eu,tu,su,au,id,nu,ro,Rr,Bo,dr,io=i(511),ld=i(2041),xc=i(225),bc=i(767),od=0,Nn=ld,zo=xc,Rn=bc,wn=io,cd=0,Bn=1,dd=2,Br=3,yc=4,qo=5,Ti=6,_l=7,ud=8,lo=9,vc=10,zn=[2,3,7],Sl=[3,3,11],tl=[280,256,256,256,40],hd=[0,1,1,1,0],jc=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],zr=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],hn=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Cl=8,qr=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Ur=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],wr=null,Nc=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],wc=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],fd=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],ru=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],_n=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],ea=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Ls=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],qn=[],Ma=[],oi=[],Al=1,oo=2,er=[],Sn=[];or("UpsampleRgbLinePair",so,3),or("UpsampleBgrLinePair",ni,3),or("UpsampleRgbaLinePair",_i,4),or("UpsampleBgraLinePair",Po,4),or("UpsampleArgbLinePair",wl,4),or("UpsampleRgba4444LinePair",Nl,2),or("UpsampleRgb565LinePair",yn,2);var co=B.UpsampleRgbLinePair,iu=B.UpsampleBgrLinePair,Uo=B.UpsampleRgbaLinePair,md=B.UpsampleBgraLinePair,kl=B.UpsampleArgbLinePair,Li=B.UpsampleRgba4444LinePair,Dl=B.UpsampleRgb565LinePair,_r=16,Ho=1<<_r-1,El=-227,Pi=482,_c=6,ur=0,fn=i(256),$o=i(256),lu=i(256),ou=i(256),Ku=i(Pi-El),cu=i(Pi-El);Qi("YuvToRgbRow",so,3),Qi("YuvToBgrRow",ni,3),Qi("YuvToRgbaRow",_i,4),Qi("YuvToBgraRow",Po,4),Qi("YuvToArgbRow",wl,4),Qi("YuvToRgba4444Row",Nl,2),Qi("YuvToRgb565Row",yn,2);var qa=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Hr=[0,2,8],$r=[8,7,6,4,4,2,2,2,1,1,1,1],Sc=1;this.WebPDecodeRGBA=function(w,k,M,Z,ce){var ue=Bn,he=new ze,ge=new Pt;he.ba=ge,ge.S=ue,ge.width=[ge.width],ge.height=[ge.height];var xe=ge.width,we=ge.height,Fe=new Tt;if(Fe==null||w==null)var $e=2;else t(Fe!=null),$e=Or(w,k,M,Fe.width,Fe.height,Fe.Pd,Fe.Qd,Fe.format,null);if($e!=0?xe=0:(xe!=null&&(xe[0]=Fe.width[0]),we!=null&&(we[0]=Fe.height[0]),xe=1),xe){ge.width=ge.width[0],ge.height=ge.height[0],Z!=null&&(Z[0]=ge.width),ce!=null&&(ce[0]=ge.height);e:{if(Z=new fi,(ce=new ot).data=w,ce.w=k,ce.ha=M,ce.kd=1,k=[0],t(ce!=null),((w=Or(ce.data,ce.w,ce.ha,null,null,null,k,null,ce))==0||w==7)&&k[0]&&(w=4),(k=w)==0){if(t(he!=null),Z.data=ce.data,Z.w=ce.w+ce.offset,Z.ha=ce.ha-ce.offset,Z.put=Ze,Z.ac=ve,Z.bc=Wt,Z.ma=he,ce.xa){if((w=kr())==null){he=1;break e}if((function(O,_){var I=[0],ie=[0],fe=[0];t:for(;;){if(O==null)return 0;if(_==null)return O.a=2,0;if(O.l=_,O.a=0,$(O.m,_.data,_.w,_.ha),!Fs(O.m,I,ie,fe)){O.a=3;break t}if(O.xb=oo,_.width=I[0],_.height=ie[0],!pa(I[0],ie[0],1,O,null))break t;return 1}return t(O.a!=0),0})(w,Z)){if(Z=(k=ri(Z.width,Z.height,he.Oa,he.ba))==0){t:{Z=w;s:for(;;){if(Z==null){Z=0;break t}if(t(Z.s.yc!=null),t(Z.s.Ya!=null),t(0<Z.s.Wb),t((M=Z.l)!=null),t((ce=M.ma)!=null),Z.xb!=0){if(Z.ca=ce.ba,Z.tb=ce.tb,t(Z.ca!=null),!Si(ce.Oa,M,Br)){Z.a=2;break s}if(!Ca(Z,M.width)||M.da)break s;if((M.da||Et(Z.ca.S))&&Ir(),11>Z.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),Z.ca.f.kb.F!=null&&Ir()),Z.Pb&&0<Z.s.ua&&Z.s.vb.X==null&&!ne(Z.s.vb,Z.s.Wa.Xa)){Z.a=1;break s}Z.xb=0}if(!yr(Z,Z.V,Z.Ba,Z.c,Z.i,M.o,La))break s;ce.Dc=Z.Ma,Z=1;break t}t(Z.a!=0),Z=0}Z=!Z}Z&&(k=w.a)}else k=w.a}else{if((w=new Kl)==null){he=1;break e}if(w.Fa=ce.na,w.P=ce.P,w.qc=ce.Sa,ko(w,Z)){if((k=ri(Z.width,Z.height,he.Oa,he.ba))==0){if(w.Aa=0,M=he.Oa,t((ce=w)!=null),M!=null){if(0<(xe=0>(xe=M.Md)?0:100<xe?255:255*xe/100)){for(we=Fe=0;4>we;++we)12>($e=ce.pb[we]).lc&&($e.ia=xe*$r[0>$e.lc?0:$e.lc]>>3),Fe|=$e.ia;Fe&&(alert("todo:VP8InitRandom"),ce.ia=1)}ce.Ga=M.Id,100<ce.Ga?ce.Ga=100:0>ce.Ga&&(ce.Ga=0)}(function(O,_){if(O==null)return 0;if(_==null)return ta(O,2,"NULL VP8Io parameter in VP8Decode().");if(!O.cb&&!ko(O,_))return 0;if(t(O.cb),_.ac==null||_.ac(_)){_.ob&&(O.L=0);var I=Hr[O.L];if(O.L==2?(O.yb=0,O.zb=0):(O.yb=_.v-I>>4,O.zb=_.j-I>>4,0>O.yb&&(O.yb=0),0>O.zb&&(O.zb=0)),O.Va=_.o+15+I>>4,O.Hb=_.va+15+I>>4,O.Hb>O.za&&(O.Hb=O.za),O.Va>O.Ub&&(O.Va=O.Ub),0<O.L){var ie=O.ed;for(I=0;4>I;++I){var fe;if(O.Qa.Cb){var ye=O.Qa.Lb[I];O.Qa.Fb||(ye+=ie.Tb)}else ye=ie.Tb;for(fe=0;1>=fe;++fe){var Ae=O.gd[I][fe],Oe=ye;if(ie.Pc&&(Oe+=ie.vd[0],fe&&(Oe+=ie.od[0])),0<(Oe=0>Oe?0:63<Oe?63:Oe)){var Be=Oe;0<ie.wb&&(Be=4<ie.wb?Be>>2:Be>>1)>9-ie.wb&&(Be=9-ie.wb),1>Be&&(Be=1),Ae.dd=Be,Ae.tc=2*Oe+Be,Ae.ld=40<=Oe?2:15<=Oe?1:0}else Ae.tc=0;Ae.La=fe}}}I=0}else ta(O,6,"Frame setup failed"),I=O.a;if(I=I==0){if(I){O.$c=0,0<O.Aa||(O.Ic=Sc);t:{I=O.Ic,ie=4*(Be=O.za);var it=32*Be,nt=Be+1,dt=0<O.L?Be*(0<O.Aa?2:1):0,gt=(O.Aa==2?2:1)*Be;if((Ae=ie+832+(fe=3*(16*I+Hr[O.L])/2*it)+(ye=O.Fa!=null&&0<O.Fa.length?O.Kc.c*O.Kc.i:0))!=Ae)I=0;else{if(Ae>O.Vb){if(O.Vb=0,O.Ec=i(Ae),O.Fc=0,O.Ec==null){I=ta(O,1,"no memory during frame initialization.");break t}O.Vb=Ae}Ae=O.Ec,Oe=O.Fc,O.Ac=Ae,O.Bc=Oe,Oe+=ie,O.Gd=o(it,Ao),O.Hd=0,O.rb=o(nt+1,Fn),O.sb=1,O.wa=dt?o(dt,Wn):null,O.Y=0,O.D.Nb=0,O.D.wa=O.wa,O.D.Y=O.Y,0<O.Aa&&(O.D.Y+=Be),t(!0),O.oc=Ae,O.pc=Oe,Oe+=832,O.ya=o(gt,Wl),O.aa=0,O.D.ya=O.ya,O.D.aa=O.aa,O.Aa==2&&(O.D.aa+=Be),O.R=16*Be,O.B=8*Be,Be=(it=Hr[O.L])*O.R,it=it/2*O.B,O.sa=Ae,O.ta=Oe+Be,O.qa=O.sa,O.ra=O.ta+16*I*O.R+it,O.Ha=O.qa,O.Ia=O.ra+8*I*O.B+it,O.$c=0,Oe+=fe,O.mb=ye?Ae:null,O.nb=ye?Oe:null,t(Oe+ye<=O.Fc+O.Vb),pi(O),r(O.Ac,O.Bc,0,ie),I=1}}if(I){if(_.ka=0,_.y=O.sa,_.O=O.ta,_.f=O.qa,_.N=O.ra,_.ea=O.Ha,_.Vd=O.Ia,_.fa=O.R,_.Rc=O.B,_.F=null,_.J=0,!od){for(I=-255;255>=I;++I)io[255+I]=0>I?-I:I;for(I=-1020;1020>=I;++I)ld[1020+I]=-128>I?-128:127<I?127:I;for(I=-112;112>=I;++I)xc[112+I]=-16>I?-16:15<I?15:I;for(I=-255;510>=I;++I)bc[255+I]=0>I?0:255<I?255:I;od=1}Nr=bl,el=Do,Mr=Xl,Ws=Na,Ms=si,Mn=On,na=uc,za=hc,Ei=F,jn=oe,Zn=wi,Ro=fc,eu=_e,tu=Le,su=Xi,au=vi,id=Gi,nu=Fr,Ma[0]=To,Ma[1]=Gl,Ma[2]=gi,Ma[3]=vl,Ma[4]=cc,Ma[5]=Fa,Ma[6]=lr,Ma[7]=dc,Ma[8]=Kn,Ma[9]=jl,qn[0]=ai,qn[1]=Ki,qn[2]=Ql,qn[3]=Eo,qn[4]=un,qn[5]=Er,qn[6]=yl,oi[0]=Lr,oi[1]=oc,oi[2]=xi,oi[3]=Tr,oi[4]=Zl,oi[5]=Lo,oi[6]=Ka,I=1}else I=0}I&&(I=(function(St,Ut){for(St.M=0;St.M<St.Va;++St.M){var jt,ht=St.Jc[St.M&St.Xb],pt=St.m,os=St;for(jt=0;jt<os.za;++jt){var Nt=pt,Ot=os,Ht=Ot.Ac,ss=Ot.Bc+4*jt,bs=Ot.zc,as=Ot.ya[Ot.aa+jt];if(Ot.Qa.Bb?as.$b=Ye(Nt,Ot.Pa.jb[0])?2+Ye(Nt,Ot.Pa.jb[2]):Ye(Nt,Ot.Pa.jb[1]):as.$b=0,Ot.kc&&(as.Ad=Ye(Nt,Ot.Bd)),as.Za=!Ye(Nt,145)+0,as.Za){var cs=as.Ob,Is=0;for(Ot=0;4>Ot;++Ot){var Ys,ds=bs[0+Ot];for(Ys=0;4>Ys;++Ys){ds=_n[Ht[ss+Ys]][ds];for(var fs=fd[Ye(Nt,ds[0])];0<fs;)fs=fd[2*fs+Ye(Nt,ds[fs])];ds=-fs,Ht[ss+Ys]=ds}n(cs,Is,Ht,ss,4),Is+=4,bs[0+Ot]=ds}}else ds=Ye(Nt,156)?Ye(Nt,128)?1:3:Ye(Nt,163)?2:0,as.Ob[0]=ds,r(Ht,ss,ds,4),r(bs,0,ds,4);as.Dd=Ye(Nt,142)?Ye(Nt,114)?Ye(Nt,183)?1:3:2:0}if(os.m.Ka)return ta(St,7,"Premature end-of-partition0 encountered.");for(;St.ja<St.za;++St.ja){if(os=ht,Nt=(pt=St).rb[pt.sb-1],Ht=pt.rb[pt.sb+pt.ja],jt=pt.ya[pt.aa+pt.ja],ss=pt.kc?jt.Ad:0)Nt.la=Ht.la=0,jt.Za||(Nt.Na=Ht.Na=0),jt.Hc=0,jt.Gc=0,jt.ia=0;else{var Rs,Ns;if(Nt=Ht,Ht=os,ss=pt.Pa.Xc,bs=pt.ya[pt.aa+pt.ja],as=pt.pb[bs.$b],Ot=bs.ad,cs=0,Is=pt.rb[pt.sb-1],ds=Ys=0,r(Ot,cs,0,384),bs.Za)var _s=0,Ks=ss[3];else{fs=i(16);var ws=Nt.Na+Is.Na;if(ws=wr(Ht,ss[1],ws,as.Eb,0,fs,0),Nt.Na=Is.Na=(0<ws)+0,1<ws)Nr(fs,0,Ot,cs);else{var fa=fs[0]+3>>3;for(fs=0;256>fs;fs+=16)Ot[cs+fs]=fa}_s=1,Ks=ss[0]}var ms=15&Nt.la,ps=15&Is.la;for(fs=0;4>fs;++fs){var Bs=1&ps;for(fa=Ns=0;4>fa;++fa)ms=ms>>1|(Bs=(ws=wr(Ht,Ks,ws=Bs+(1&ms),as.Sc,_s,Ot,cs))>_s)<<7,Ns=Ns<<2|(3<ws?3:1<ws?2:Ot[cs+0]!=0),cs+=16;ms>>=4,ps=ps>>1|Bs<<7,Ys=(Ys<<8|Ns)>>>0}for(Ks=ms,_s=ps>>4,Rs=0;4>Rs;Rs+=2){for(Ns=0,ms=Nt.la>>4+Rs,ps=Is.la>>4+Rs,fs=0;2>fs;++fs){for(Bs=1&ps,fa=0;2>fa;++fa)ws=Bs+(1&ms),ms=ms>>1|(Bs=0<(ws=wr(Ht,ss[2],ws,as.Qc,0,Ot,cs)))<<3,Ns=Ns<<2|(3<ws?3:1<ws?2:Ot[cs+0]!=0),cs+=16;ms>>=2,ps=ps>>1|Bs<<5}ds|=Ns<<4*Rs,Ks|=ms<<4<<Rs,_s|=(240&ps)<<Rs}Nt.la=Ks,Is.la=_s,bs.Hc=Ys,bs.Gc=ds,bs.ia=43690&ds?0:as.ia,ss=!(Ys|ds)}if(0<pt.L&&(pt.wa[pt.Y+pt.ja]=pt.gd[jt.$b][jt.Za],pt.wa[pt.Y+pt.ja].La|=!ss),os.Ka)return ta(St,7,"Premature end-of-file encountered.")}if(pi(St),pt=Ut,os=1,jt=(ht=St).D,Nt=0<ht.L&&ht.M>=ht.zb&&ht.M<=ht.Va,ht.Aa==0)t:{if(jt.M=ht.M,jt.uc=Nt,cr(ht,jt),os=1,jt=(Ns=ht.D).Nb,Nt=(ds=Hr[ht.L])*ht.R,Ht=ds/2*ht.B,fs=16*jt*ht.R,fa=8*jt*ht.B,ss=ht.sa,bs=ht.ta-Nt+fs,as=ht.qa,Ot=ht.ra-Ht+fa,cs=ht.Ha,Is=ht.Ia-Ht+fa,ps=(ms=Ns.M)==0,Ys=ms>=ht.Va-1,ht.Aa==2&&cr(ht,Ns),Ns.uc)for(Bs=(ws=ht).D.M,t(ws.D.uc),Ns=ws.yb;Ns<ws.Hb;++Ns){_s=Ns,Ks=Bs;var Ds=(Ss=(Ua=ws).D).Nb;Rs=Ua.R;var Ss=Ss.wa[Ss.Y+_s],rn=Ua.sa,ka=Ua.ta+16*Ds*Rs+16*_s,Zt=Ss.dd,Jt=Ss.tc;if(Jt!=0)if(t(3<=Jt),Ua.L==1)0<_s&&au(rn,ka,Rs,Jt+4),Ss.La&&nu(rn,ka,Rs,Jt),0<Ks&&su(rn,ka,Rs,Jt+4),Ss.La&&id(rn,ka,Rs,Jt);else{var Xs=Ua.B,hr=Ua.qa,fr=Ua.ra+8*Ds*Xs+8*_s,tr=Ua.Ha,Ua=Ua.Ia+8*Ds*Xs+8*_s;Ds=Ss.ld,0<_s&&(za(rn,ka,Rs,Jt+4,Zt,Ds),jn(hr,fr,tr,Ua,Xs,Jt+4,Zt,Ds)),Ss.La&&(Ro(rn,ka,Rs,Jt,Zt,Ds),tu(hr,fr,tr,Ua,Xs,Jt,Zt,Ds)),0<Ks&&(na(rn,ka,Rs,Jt+4,Zt,Ds),Ei(hr,fr,tr,Ua,Xs,Jt+4,Zt,Ds)),Ss.La&&(Zn(rn,ka,Rs,Jt,Zt,Ds),eu(hr,fr,tr,Ua,Xs,Jt,Zt,Ds))}}if(ht.ia&&alert("todo:DitherRow"),pt.put!=null){if(Ns=16*ms,ms=16*(ms+1),ps?(pt.y=ht.sa,pt.O=ht.ta+fs,pt.f=ht.qa,pt.N=ht.ra+fa,pt.ea=ht.Ha,pt.W=ht.Ia+fa):(Ns-=ds,pt.y=ss,pt.O=bs,pt.f=as,pt.N=Ot,pt.ea=cs,pt.W=Is),Ys||(ms-=ds),ms>pt.o&&(ms=pt.o),pt.F=null,pt.J=null,ht.Fa!=null&&0<ht.Fa.length&&Ns<ms&&(pt.J=Aa(ht,pt,Ns,ms-Ns),pt.F=ht.mb,pt.F==null&&pt.F.length==0)){os=ta(ht,3,"Could not decode alpha data.");break t}Ns<pt.j&&(ds=pt.j-Ns,Ns=pt.j,t(!(1&ds)),pt.O+=ht.R*ds,pt.N+=ht.B*(ds>>1),pt.W+=ht.B*(ds>>1),pt.F!=null&&(pt.J+=pt.width*ds)),Ns<ms&&(pt.O+=pt.v,pt.N+=pt.v>>1,pt.W+=pt.v>>1,pt.F!=null&&(pt.J+=pt.v),pt.ka=Ns-pt.j,pt.U=pt.va-pt.v,pt.T=ms-Ns,os=pt.put(pt))}jt+1!=ht.Ic||Ys||(n(ht.sa,ht.ta-Nt,ss,bs+16*ht.R,Nt),n(ht.qa,ht.ra-Ht,as,Ot+8*ht.B,Ht),n(ht.Ha,ht.Ia-Ht,cs,Is+8*ht.B,Ht))}if(!os)return ta(St,6,"Output aborted.")}return 1})(O,_)),_.bc!=null&&_.bc(_),I&=1}return I?(O.cb=0,I):0})(w,Z)||(k=w.a)}}else k=w.a}k==0&&he.Oa!=null&&he.Oa.fd&&(k=pc(he.ba))}he=k}ue=he!=0?null:11>ue?ge.f.RGBA.eb:ge.f.kb.y}else ue=null;return ue};var pd=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function h(B,J){for(var P="",K=0;K<4;K++)P+=String.fromCharCode(B[J++]);return P}function m(B,J){return B[J+0]|B[J+1]<<8}function p(B,J){return(B[J+0]|B[J+1]<<8|B[J+2]<<16)>>>0}function y(B,J){return(B[J+0]|B[J+1]<<8|B[J+2]<<16|B[J+3]<<24)>>>0}new u;var g=[0],j=[0],b=[],N=new u,v=s,S=(function(B,J){var P={},K=0,H=!1,se=0,X=0;if(P.frames=[],!(function(U,le){for(var de=0;de<4;de++)if(U[le+de]!="RIFF".charCodeAt(de))return!0;return!1})(B,J)){for(y(B,J+=4),J+=8;J<B.length;){var R=h(B,J),Q=y(B,J+=4);J+=4;var Y=Q+(1&Q);switch(R){case"VP8 ":case"VP8L":P.frames[K]===void 0&&(P.frames[K]={}),(D=P.frames[K]).src_off=H?X:J-8,D.src_size=se+Q+8,K++,H&&(H=!1,se=0,X=0);break;case"VP8X":(D=P.header={}).feature_flags=B[J];var $=J+4;D.canvas_width=1+p(B,$),$+=3,D.canvas_height=1+p(B,$),$+=3;break;case"ALPH":H=!0,se=Y+8,X=J-8;break;case"ANIM":(D=P.header).bgcolor=y(B,J),$=J+4,D.loop_count=m(B,$),$+=2;break;case"ANMF":var me,D;(D=P.frames[K]={}).offset_x=2*p(B,J),J+=3,D.offset_y=2*p(B,J),J+=3,D.width=1+p(B,J),J+=3,D.height=1+p(B,J),J+=3,D.duration=p(B,J),J+=3,me=B[J++],D.dispose=1&me,D.blend=me>>1&1}R!="ANMF"&&(J+=Y)}return P}})(v,0);S.response=v,S.rgbaoutput=!0,S.dataurl=!1;var E=S.header?S.header:null,L=S.frames?S.frames:null;if(E){E.loop_counter=E.loop_count,g=[E.canvas_height],j=[E.canvas_width];for(var z=0;z<L.length&&L[z].blend!=0;z++);}var V=L[0],te=N.WebPDecodeRGBA(v,V.src_off,V.src_size,j,g);V.rgba=te,V.imgwidth=j[0],V.imgheight=g[0];for(var q=0;q<j[0]*g[0]*4;q++)b[q]=te[q];return this.width=j,this.height=g,this.data=b,this}(function(s){var t,a,n,r,i,o,c,u,h,m=function(U){return U=U||{},this.isStrokeTransparent=U.isStrokeTransparent||!1,this.strokeOpacity=U.strokeOpacity||1,this.strokeStyle=U.strokeStyle||"#000000",this.fillStyle=U.fillStyle||"#000000",this.isFillTransparent=U.isFillTransparent||!1,this.fillOpacity=U.fillOpacity||1,this.font=U.font||"10px sans-serif",this.textBaseline=U.textBaseline||"alphabetic",this.textAlign=U.textAlign||"left",this.lineWidth=U.lineWidth||1,this.lineJoin=U.lineJoin||"miter",this.lineCap=U.lineCap||"butt",this.path=U.path||[],this.transform=U.transform!==void 0?U.transform.clone():new u,this.globalCompositeOperation=U.globalCompositeOperation||"normal",this.globalAlpha=U.globalAlpha||1,this.clip_path=U.clip_path||[],this.currentPoint=U.currentPoint||new o,this.miterLimit=U.miterLimit||10,this.lastPoint=U.lastPoint||new o,this.lineDashOffset=U.lineDashOffset||0,this.lineDash=U.lineDash||[],this.margin=U.margin||[0,0,0,0],this.prevPageLastElemOffset=U.prevPageLastElemOffset||0,this.ignoreClearRect=typeof U.ignoreClearRect!="boolean"||U.ignoreClearRect,this};s.events.push(["initialized",function(){this.context2d=new p(this),t=this.internal.f2,a=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,r=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,o=this.internal.Point,c=this.internal.Rectangle,u=this.internal.Matrix,h=new m}]);var p=function(U){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var le=U;Object.defineProperty(this,"pdf",{get:function(){return le}});var de=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return de},set:function(re){de=!!re}});var G=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return G},set:function(re){G=!!re}});var je=0;Object.defineProperty(this,"posX",{get:function(){return je},set:function(re){isNaN(re)||(je=re)}});var De=0;Object.defineProperty(this,"posY",{get:function(){return De},set:function(re){isNaN(re)||(De=re)}}),Object.defineProperty(this,"margin",{get:function(){return h.margin},set:function(re){var ne;typeof re=="number"?ne=[re,re,re,re]:((ne=new Array(4))[0]=re[0],ne[1]=re.length>=2?re[1]:ne[0],ne[2]=re.length>=3?re[2]:ne[0],ne[3]=re.length>=4?re[3]:ne[1]),h.margin=ne}});var Pe=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Pe},set:function(re){Pe=re}});var ke=0;Object.defineProperty(this,"lastBreak",{get:function(){return ke},set:function(re){ke=re}});var Ye=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Ye},set:function(re){Ye=re}}),Object.defineProperty(this,"ctx",{get:function(){return h},set:function(re){re instanceof m&&(h=re)}}),Object.defineProperty(this,"path",{get:function(){return h.path},set:function(re){h.path=re}});var Qe=[];Object.defineProperty(this,"ctxStack",{get:function(){return Qe},set:function(re){Qe=re}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(re){var ne;ne=y(re),this.ctx.fillStyle=ne.style,this.ctx.isFillTransparent=ne.a===0,this.ctx.fillOpacity=ne.a,this.pdf.setFillColor(ne.r,ne.g,ne.b,{a:ne.a}),this.pdf.setTextColor(ne.r,ne.g,ne.b,{a:ne.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(re){var ne=y(re);this.ctx.strokeStyle=ne.style,this.ctx.isStrokeTransparent=ne.a===0,this.ctx.strokeOpacity=ne.a,ne.a===0?this.pdf.setDrawColor(255,255,255):(ne.a,this.pdf.setDrawColor(ne.r,ne.g,ne.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(re){["butt","round","square"].indexOf(re)!==-1&&(this.ctx.lineCap=re,this.pdf.setLineCap(re))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(re){isNaN(re)||(this.ctx.lineWidth=re,this.pdf.setLineWidth(re))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(re){["bevel","round","miter"].indexOf(re)!==-1&&(this.ctx.lineJoin=re,this.pdf.setLineJoin(re))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(re){isNaN(re)||(this.ctx.miterLimit=re,this.pdf.setMiterLimit(re))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(re){this.ctx.textBaseline=re}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(re){["right","end","center","left","start"].indexOf(re)!==-1&&(this.ctx.textAlign=re)}});var et=null,Xe=null;Object.defineProperty(this,"fontFaces",{get:function(){return Xe},set:function(re){et=null,Xe=re}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(re){var ne;if(this.ctx.font=re,(ne=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(re))!==null){var Se=ne[1];ne[2];var Ve=ne[3],xt=ne[4];ne[5];var ee=ne[6],Ie=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(xt)[2];xt=Math.floor(Ie==="px"?parseFloat(xt)*this.pdf.internal.scaleFactor:Ie==="em"?parseFloat(xt)*this.pdf.getFontSize():parseFloat(xt)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(xt);var He=(function($t){var bt,ys,Te=[],Je=$t.trim();if(Je==="")return vy;if(Je in f_)return[f_[Je]];for(;Je!=="";){switch(ys=null,bt=(Je=p_(Je)).charAt(0)){case'"':case"'":ys=yz(Je.substring(1),bt);break;default:ys=vz(Je)}if(ys===null||(Te.push(ys[0]),(Je=p_(ys[1]))!==""&&Je.charAt(0)!==","))return vy;Je=Je.replace(/^,/,"")}return Te})(ee);if(this.fontFaces){var Lt=(function($t,bt){if(et===null){var ys=(function(Te){var Je=[];return Object.keys(Te).forEach(function(be){Te[be].forEach(function(Re){var lt=null;switch(Re){case"bold":lt={family:be,weight:"bold"};break;case"italic":lt={family:be,style:"italic"};break;case"bolditalic":lt={family:be,weight:"bold",style:"italic"};break;case"":case"normal":lt={family:be}}lt!==null&&(lt.ref={name:be,style:Re},Je.push(lt))})}),Je})($t.getFontList());et=(function(Te){for(var Je={},be=0;be<Te.length;++be){var Re=yy(Te[be]),lt=Re.family,tt=Re.stretch,Et=Re.style,is=Re.weight;Je[lt]=Je[lt]||{},Je[lt][tt]=Je[lt][tt]||{},Je[lt][tt][Et]=Je[lt][tt][Et]||{},Je[lt][tt][Et][is]=Re}return Je})(ys.concat(bt))}return et})(this.pdf,this.fontFaces),Dt=He.map(function($t){return{family:$t,stretch:"normal",weight:Ve,style:Se}}),Mt=(function($t,bt,ys){for(var Te=(ys=ys||{}).defaultFontFamily||"times",Je=Object.assign({},bz,ys.genericFontFamilies||{}),be=null,Re=null,lt=0;lt<bt.length;++lt)if(Je[(be=yy(bt[lt])).family]&&(be.family=Je[be.family]),$t.hasOwnProperty(be.family)){Re=$t[be.family];break}if(!(Re=Re||$t[Te]))throw new Error("Could not find a font-family for the rule '"+m_(be)+"' and default family '"+Te+"'.");if(Re=(function(tt,Et){if(Et[tt])return Et[tt];var is=hv[tt],qt=is<=hv.normal?-1:1,Pt=h_(Et,WA,is,qt);if(!Pt)throw new Error("Could not find a matching font-stretch value for "+tt);return Pt})(be.stretch,Re),Re=(function(tt,Et){if(Et[tt])return Et[tt];for(var is=VA[tt],qt=0;qt<is.length;++qt)if(Et[is[qt]])return Et[is[qt]];throw new Error("Could not find a matching font-style for "+tt)})(be.style,Re),!(Re=(function(tt,Et){if(Et[tt])return Et[tt];if(tt===400&&Et[500])return Et[500];if(tt===500&&Et[400])return Et[400];var is=xz[tt],qt=h_(Et,YA,is,tt<400?-1:1);if(!qt)throw new Error("Could not find a matching font-weight for value "+tt);return qt})(be.weight,Re)))throw new Error("Failed to resolve a font for the rule '"+m_(be)+"'.");return Re})(Lt,Dt);this.pdf.setFont(Mt.ref.name,Mt.ref.style)}else{var At="";(Ve==="bold"||parseInt(Ve,10)>=700||Se==="bold")&&(At="bold"),Se==="italic"&&(At+="italic"),At.length===0&&(At="normal");for(var Bt="",rs={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},kt=0;kt<He.length;kt++){if(this.pdf.internal.getFont(He[kt],At,{noFallback:!0,disableWarning:!0})!==void 0){Bt=He[kt];break}if(At==="bolditalic"&&this.pdf.internal.getFont(He[kt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Bt=He[kt],At="bold";else if(this.pdf.internal.getFont(He[kt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Bt=He[kt],At="normal";break}}if(Bt===""){for(var zt=0;zt<He.length;zt++)if(rs[He[zt]]){Bt=rs[He[zt]];break}}Bt=Bt===""?"Times":Bt,this.pdf.setFont(Bt,At)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(re){this.ctx.globalCompositeOperation=re}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(re){this.ctx.globalAlpha=re}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(re){this.ctx.lineDashOffset=re,D.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(re){this.ctx.lineDash=re,D.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(re){this.ctx.ignoreClearRect=!!re}})};p.prototype.setLineDash=function(U){this.lineDash=U},p.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},p.prototype.fill=function(){L.call(this,"fill",!1)},p.prototype.stroke=function(){L.call(this,"stroke",!1)},p.prototype.beginPath=function(){this.path=[{type:"begin"}]},p.prototype.moveTo=function(U,le){if(isNaN(U)||isNaN(le))throw Ta.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var de=this.ctx.transform.applyToPoint(new o(U,le));this.path.push({type:"mt",x:de.x,y:de.y}),this.ctx.lastPoint=new o(U,le)},p.prototype.closePath=function(){var U=new o(0,0),le=0;for(le=this.path.length-1;le!==-1;le--)if(this.path[le].type==="begin"&&va(this.path[le+1])==="object"&&typeof this.path[le+1].x=="number"){U=new o(this.path[le+1].x,this.path[le+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(U.x,U.y)},p.prototype.lineTo=function(U,le){if(isNaN(U)||isNaN(le))throw Ta.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var de=this.ctx.transform.applyToPoint(new o(U,le));this.path.push({type:"lt",x:de.x,y:de.y}),this.ctx.lastPoint=new o(de.x,de.y)},p.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),L.call(this,null,!0)},p.prototype.quadraticCurveTo=function(U,le,de,G){if(isNaN(de)||isNaN(G)||isNaN(U)||isNaN(le))throw Ta.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var je=this.ctx.transform.applyToPoint(new o(de,G)),De=this.ctx.transform.applyToPoint(new o(U,le));this.path.push({type:"qct",x1:De.x,y1:De.y,x:je.x,y:je.y}),this.ctx.lastPoint=new o(je.x,je.y)},p.prototype.bezierCurveTo=function(U,le,de,G,je,De){if(isNaN(je)||isNaN(De)||isNaN(U)||isNaN(le)||isNaN(de)||isNaN(G))throw Ta.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Pe=this.ctx.transform.applyToPoint(new o(je,De)),ke=this.ctx.transform.applyToPoint(new o(U,le)),Ye=this.ctx.transform.applyToPoint(new o(de,G));this.path.push({type:"bct",x1:ke.x,y1:ke.y,x2:Ye.x,y2:Ye.y,x:Pe.x,y:Pe.y}),this.ctx.lastPoint=new o(Pe.x,Pe.y)},p.prototype.arc=function(U,le,de,G,je,De){if(isNaN(U)||isNaN(le)||isNaN(de)||isNaN(G)||isNaN(je))throw Ta.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(De=!!De,!this.ctx.transform.isIdentity){var Pe=this.ctx.transform.applyToPoint(new o(U,le));U=Pe.x,le=Pe.y;var ke=this.ctx.transform.applyToPoint(new o(0,de)),Ye=this.ctx.transform.applyToPoint(new o(0,0));de=Math.sqrt(Math.pow(ke.x-Ye.x,2)+Math.pow(ke.y-Ye.y,2))}Math.abs(je-G)>=2*Math.PI&&(G=0,je=2*Math.PI),this.path.push({type:"arc",x:U,y:le,radius:de,startAngle:G,endAngle:je,counterclockwise:De})},p.prototype.arcTo=function(U,le,de,G,je){throw new Error("arcTo not implemented.")},p.prototype.rect=function(U,le,de,G){if(isNaN(U)||isNaN(le)||isNaN(de)||isNaN(G))throw Ta.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(U,le),this.lineTo(U+de,le),this.lineTo(U+de,le+G),this.lineTo(U,le+G),this.lineTo(U,le),this.lineTo(U+de,le),this.lineTo(U,le)},p.prototype.fillRect=function(U,le,de,G){if(isNaN(U)||isNaN(le)||isNaN(de)||isNaN(G))throw Ta.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!g.call(this)){var je={};this.lineCap!=="butt"&&(je.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(je.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(U,le,de,G),this.fill(),je.hasOwnProperty("lineCap")&&(this.lineCap=je.lineCap),je.hasOwnProperty("lineJoin")&&(this.lineJoin=je.lineJoin)}},p.prototype.strokeRect=function(U,le,de,G){if(isNaN(U)||isNaN(le)||isNaN(de)||isNaN(G))throw Ta.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");j.call(this)||(this.beginPath(),this.rect(U,le,de,G),this.stroke())},p.prototype.clearRect=function(U,le,de,G){if(isNaN(U)||isNaN(le)||isNaN(de)||isNaN(G))throw Ta.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(U,le,de,G))},p.prototype.save=function(U){U=typeof U!="boolean"||U;for(var le=this.pdf.internal.getCurrentPageInfo().pageNumber,de=0;de<this.pdf.internal.getNumberOfPages();de++)this.pdf.setPage(de+1),this.pdf.internal.out("q");if(this.pdf.setPage(le),U){this.ctx.fontSize=this.pdf.internal.getFontSize();var G=new m(this.ctx);this.ctxStack.push(this.ctx),this.ctx=G}},p.prototype.restore=function(U){U=typeof U!="boolean"||U;for(var le=this.pdf.internal.getCurrentPageInfo().pageNumber,de=0;de<this.pdf.internal.getNumberOfPages();de++)this.pdf.setPage(de+1),this.pdf.internal.out("Q");this.pdf.setPage(le),U&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},p.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var y=function(U){var le,de,G,je;if(U.isCanvasGradient===!0&&(U=U.getColor()),!U)return{r:0,g:0,b:0,a:0,style:U};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(U))le=0,de=0,G=0,je=0;else{var De=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(U);if(De!==null)le=parseInt(De[1]),de=parseInt(De[2]),G=parseInt(De[3]),je=1;else if((De=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(U))!==null)le=parseInt(De[1]),de=parseInt(De[2]),G=parseInt(De[3]),je=parseFloat(De[4]);else{if(je=1,typeof U=="string"&&U.charAt(0)!=="#"){var Pe=new RA(U);U=Pe.ok?Pe.toHex():"#000000"}U.length===4?(le=U.substring(1,2),le+=le,de=U.substring(2,3),de+=de,G=U.substring(3,4),G+=G):(le=U.substring(1,3),de=U.substring(3,5),G=U.substring(5,7)),le=parseInt(le,16),de=parseInt(de,16),G=parseInt(G,16)}}return{r:le,g:de,b:G,a:je,style:U}},g=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},j=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};p.prototype.fillText=function(U,le,de,G){if(isNaN(le)||isNaN(de)||typeof U!="string")throw Ta.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(G=isNaN(G)?void 0:G,!g.call(this)){var je=Y(this.ctx.transform.rotation),De=this.ctx.transform.scaleX;K.call(this,{text:U,x:le,y:de,scale:De,angle:je,align:this.textAlign,maxWidth:G})}},p.prototype.strokeText=function(U,le,de,G){if(isNaN(le)||isNaN(de)||typeof U!="string")throw Ta.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!j.call(this)){G=isNaN(G)?void 0:G;var je=Y(this.ctx.transform.rotation),De=this.ctx.transform.scaleX;K.call(this,{text:U,x:le,y:de,scale:De,renderingMode:"stroke",angle:je,align:this.textAlign,maxWidth:G})}},p.prototype.measureText=function(U){if(typeof U!="string")throw Ta.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var le=this.pdf,de=this.pdf.internal.scaleFactor,G=le.internal.getFontSize(),je=le.getStringUnitWidth(U)*G/le.internal.scaleFactor;return new function(De){var Pe=(De=De||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Pe}}),this}({width:je*=Math.round(96*de/72*1e4)/1e4})},p.prototype.scale=function(U,le){if(isNaN(U)||isNaN(le))throw Ta.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var de=new u(U,0,0,le,0,0);this.ctx.transform=this.ctx.transform.multiply(de)},p.prototype.rotate=function(U){if(isNaN(U))throw Ta.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var le=new u(Math.cos(U),Math.sin(U),-Math.sin(U),Math.cos(U),0,0);this.ctx.transform=this.ctx.transform.multiply(le)},p.prototype.translate=function(U,le){if(isNaN(U)||isNaN(le))throw Ta.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var de=new u(1,0,0,1,U,le);this.ctx.transform=this.ctx.transform.multiply(de)},p.prototype.transform=function(U,le,de,G,je,De){if(isNaN(U)||isNaN(le)||isNaN(de)||isNaN(G)||isNaN(je)||isNaN(De))throw Ta.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Pe=new u(U,le,de,G,je,De);this.ctx.transform=this.ctx.transform.multiply(Pe)},p.prototype.setTransform=function(U,le,de,G,je,De){U=isNaN(U)?1:U,le=isNaN(le)?0:le,de=isNaN(de)?0:de,G=isNaN(G)?1:G,je=isNaN(je)?0:je,De=isNaN(De)?0:De,this.ctx.transform=new u(U,le,de,G,je,De)};var b=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};p.prototype.drawImage=function(U,le,de,G,je,De,Pe,ke,Ye){var Qe=this.pdf.getImageProperties(U),et=1,Xe=1,re=1,ne=1;G!==void 0&&ke!==void 0&&(re=ke/G,ne=Ye/je,et=Qe.width/G*ke/G,Xe=Qe.height/je*Ye/je),De===void 0&&(De=le,Pe=de,le=0,de=0),G!==void 0&&ke===void 0&&(ke=G,Ye=je),G===void 0&&ke===void 0&&(ke=Qe.width,Ye=Qe.height);for(var Se,Ve=this.ctx.transform.decompose(),xt=Y(Ve.rotate.shx),ee=new u,Ie=(ee=(ee=(ee=ee.multiply(Ve.translate)).multiply(Ve.skew)).multiply(Ve.scale)).applyToRectangle(new c(De-le*re,Pe-de*ne,G*et,je*Xe)),He=N.call(this,Ie),Lt=[],Dt=0;Dt<He.length;Dt+=1)Lt.indexOf(He[Dt])===-1&&Lt.push(He[Dt]);if(E(Lt),this.autoPaging)for(var Mt=Lt[0],At=Lt[Lt.length-1],Bt=Mt;Bt<At+1;Bt++){this.pdf.setPage(Bt);var rs=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],kt=Bt===1?this.posY+this.margin[0]:this.margin[0],zt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],$t=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],bt=Bt===1?0:zt+(Bt-2)*$t;if(this.ctx.clip_path.length!==0){var ys=this.path;Se=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=S(Se,this.posX+this.margin[3],-bt+kt+this.ctx.prevPageLastElemOffset),z.call(this,"fill",!0),this.path=ys}var Te=JSON.parse(JSON.stringify(Ie));Te=S([Te],this.posX+this.margin[3],-bt+kt+this.ctx.prevPageLastElemOffset)[0];var Je=(Bt>Mt||Bt<At)&&b.call(this);Je&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],rs,$t,null).clip().discardPath()),this.pdf.addImage(U,"JPEG",Te.x,Te.y,Te.w,Te.h,null,null,xt),Je&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(U,"JPEG",Ie.x,Ie.y,Ie.w,Ie.h,null,null,xt)};var N=function(U,le,de){var G=[];le=le||this.pdf.internal.pageSize.width,de=de||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var je=this.posY+this.ctx.prevPageLastElemOffset;switch(U.type){default:case"mt":case"lt":G.push(Math.floor((U.y+je)/de)+1);break;case"arc":G.push(Math.floor((U.y+je-U.radius)/de)+1),G.push(Math.floor((U.y+je+U.radius)/de)+1);break;case"qct":var De=$(this.ctx.lastPoint.x,this.ctx.lastPoint.y,U.x1,U.y1,U.x,U.y);G.push(Math.floor((De.y+je)/de)+1),G.push(Math.floor((De.y+De.h+je)/de)+1);break;case"bct":var Pe=me(this.ctx.lastPoint.x,this.ctx.lastPoint.y,U.x1,U.y1,U.x2,U.y2,U.x,U.y);G.push(Math.floor((Pe.y+je)/de)+1),G.push(Math.floor((Pe.y+Pe.h+je)/de)+1);break;case"rect":G.push(Math.floor((U.y+je)/de)+1),G.push(Math.floor((U.y+U.h+je)/de)+1)}for(var ke=0;ke<G.length;ke+=1)for(;this.pdf.internal.getNumberOfPages()<G[ke];)v.call(this);return G},v=function(){var U=this.fillStyle,le=this.strokeStyle,de=this.font,G=this.lineCap,je=this.lineWidth,De=this.lineJoin;this.pdf.addPage(),this.fillStyle=U,this.strokeStyle=le,this.font=de,this.lineCap=G,this.lineWidth=je,this.lineJoin=De},S=function(U,le,de){for(var G=0;G<U.length;G++)switch(U[G].type){case"bct":U[G].x2+=le,U[G].y2+=de;case"qct":U[G].x1+=le,U[G].y1+=de;default:U[G].x+=le,U[G].y+=de}return U},E=function(U){return U.sort(function(le,de){return le-de})},L=function(U,le){for(var de,G,je=this.fillStyle,De=this.strokeStyle,Pe=this.lineCap,ke=this.lineWidth,Ye=Math.abs(ke*this.ctx.transform.scaleX),Qe=this.lineJoin,et=JSON.parse(JSON.stringify(this.path)),Xe=JSON.parse(JSON.stringify(this.path)),re=[],ne=0;ne<Xe.length;ne++)if(Xe[ne].x!==void 0)for(var Se=N.call(this,Xe[ne]),Ve=0;Ve<Se.length;Ve+=1)re.indexOf(Se[Ve])===-1&&re.push(Se[Ve]);for(var xt=0;xt<re.length;xt++)for(;this.pdf.internal.getNumberOfPages()<re[xt];)v.call(this);if(E(re),this.autoPaging)for(var ee=re[0],Ie=re[re.length-1],He=ee;He<Ie+1;He++){this.pdf.setPage(He),this.fillStyle=je,this.strokeStyle=De,this.lineCap=Pe,this.lineWidth=Ye,this.lineJoin=Qe;var Lt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Dt=He===1?this.posY+this.margin[0]:this.margin[0],Mt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],At=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Bt=He===1?0:Mt+(He-2)*At;if(this.ctx.clip_path.length!==0){var rs=this.path;de=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=S(de,this.posX+this.margin[3],-Bt+Dt+this.ctx.prevPageLastElemOffset),z.call(this,U,!0),this.path=rs}if(G=JSON.parse(JSON.stringify(et)),this.path=S(G,this.posX+this.margin[3],-Bt+Dt+this.ctx.prevPageLastElemOffset),le===!1||He===0){var kt=(He>ee||He<Ie)&&b.call(this);kt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Lt,At,null).clip().discardPath()),z.call(this,U,le),kt&&this.pdf.restoreGraphicsState()}this.lineWidth=ke}else this.lineWidth=Ye,z.call(this,U,le),this.lineWidth=ke;this.path=et},z=function(U,le){if((U!=="stroke"||le||!j.call(this))&&(U==="stroke"||le||!g.call(this))){for(var de,G,je=[],De=this.path,Pe=0;Pe<De.length;Pe++){var ke=De[Pe];switch(ke.type){case"begin":je.push({begin:!0});break;case"close":je.push({close:!0});break;case"mt":je.push({start:ke,deltas:[],abs:[]});break;case"lt":var Ye=je.length;if(De[Pe-1]&&!isNaN(De[Pe-1].x)&&(de=[ke.x-De[Pe-1].x,ke.y-De[Pe-1].y],Ye>0)){for(;Ye>=0;Ye--)if(je[Ye-1].close!==!0&&je[Ye-1].begin!==!0){je[Ye-1].deltas.push(de),je[Ye-1].abs.push(ke);break}}break;case"bct":de=[ke.x1-De[Pe-1].x,ke.y1-De[Pe-1].y,ke.x2-De[Pe-1].x,ke.y2-De[Pe-1].y,ke.x-De[Pe-1].x,ke.y-De[Pe-1].y],je[je.length-1].deltas.push(de);break;case"qct":var Qe=De[Pe-1].x+2/3*(ke.x1-De[Pe-1].x),et=De[Pe-1].y+2/3*(ke.y1-De[Pe-1].y),Xe=ke.x+2/3*(ke.x1-ke.x),re=ke.y+2/3*(ke.y1-ke.y),ne=ke.x,Se=ke.y;de=[Qe-De[Pe-1].x,et-De[Pe-1].y,Xe-De[Pe-1].x,re-De[Pe-1].y,ne-De[Pe-1].x,Se-De[Pe-1].y],je[je.length-1].deltas.push(de);break;case"arc":je.push({deltas:[],abs:[],arc:!0}),Array.isArray(je[je.length-1].abs)&&je[je.length-1].abs.push(ke)}}G=le?null:U==="stroke"?"stroke":"fill";for(var Ve=!1,xt=0;xt<je.length;xt++)if(je[xt].arc)for(var ee=je[xt].abs,Ie=0;Ie<ee.length;Ie++){var He=ee[Ie];He.type==="arc"?q.call(this,He.x,He.y,He.radius,He.startAngle,He.endAngle,He.counterclockwise,void 0,le,!Ve):H.call(this,He.x,He.y),Ve=!0}else if(je[xt].close===!0)this.pdf.internal.out("h"),Ve=!1;else if(je[xt].begin!==!0){var Lt=je[xt].start.x,Dt=je[xt].start.y;se.call(this,je[xt].deltas,Lt,Dt),Ve=!0}G&&B.call(this,G),le&&J.call(this)}},V=function(U){var le=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,de=le*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return U-de;case"top":return U+le-de;case"hanging":return U+le-2*de;case"middle":return U+le/2-de;default:return U}},te=function(U){return U+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};p.prototype.createLinearGradient=function(){var U=function(){};return U.colorStops=[],U.addColorStop=function(le,de){this.colorStops.push([le,de])},U.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},U.isCanvasGradient=!0,U},p.prototype.createPattern=function(){return this.createLinearGradient()},p.prototype.createRadialGradient=function(){return this.createLinearGradient()};var q=function(U,le,de,G,je,De,Pe,ke,Ye){for(var Qe=R.call(this,de,G,je,De),et=0;et<Qe.length;et++){var Xe=Qe[et];et===0&&(Ye?P.call(this,Xe.x1+U,Xe.y1+le):H.call(this,Xe.x1+U,Xe.y1+le)),X.call(this,U,le,Xe.x2,Xe.y2,Xe.x3,Xe.y3,Xe.x4,Xe.y4)}ke?J.call(this):B.call(this,Pe)},B=function(U){switch(U){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},J=function(){this.pdf.clip(),this.pdf.discardPath()},P=function(U,le){this.pdf.internal.out(a(U)+" "+n(le)+" m")},K=function(U){var le;switch(U.align){case"right":case"end":le="right";break;case"center":le="center";break;default:le="left"}var de=this.pdf.getTextDimensions(U.text),G=V.call(this,U.y),je=te.call(this,G)-de.h,De=this.ctx.transform.applyToPoint(new o(U.x,G)),Pe=this.ctx.transform.decompose(),ke=new u;ke=(ke=(ke=ke.multiply(Pe.translate)).multiply(Pe.skew)).multiply(Pe.scale);for(var Ye,Qe,et,Xe=this.ctx.transform.applyToRectangle(new c(U.x,G,de.w,de.h)),re=ke.applyToRectangle(new c(U.x,je,de.w,de.h)),ne=N.call(this,re),Se=[],Ve=0;Ve<ne.length;Ve+=1)Se.indexOf(ne[Ve])===-1&&Se.push(ne[Ve]);if(E(Se),this.autoPaging)for(var xt=Se[0],ee=Se[Se.length-1],Ie=xt;Ie<ee+1;Ie++){this.pdf.setPage(Ie);var He=Ie===1?this.posY+this.margin[0]:this.margin[0],Lt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Dt=this.pdf.internal.pageSize.height-this.margin[2],Mt=Dt-this.margin[0],At=this.pdf.internal.pageSize.width-this.margin[1],Bt=At-this.margin[3],rs=Ie===1?0:Lt+(Ie-2)*Mt;if(this.ctx.clip_path.length!==0){var kt=this.path;Ye=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=S(Ye,this.posX+this.margin[3],-1*rs+He),z.call(this,"fill",!0),this.path=kt}var zt=S([JSON.parse(JSON.stringify(re))],this.posX+this.margin[3],-rs+He+this.ctx.prevPageLastElemOffset)[0];U.scale>=.01&&(Qe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Qe*U.scale),et=this.lineWidth,this.lineWidth=et*U.scale);var $t=this.autoPaging!=="text";if($t||zt.y+zt.h<=Dt){if($t||zt.y>=He&&zt.x<=At){var bt=$t?U.text:this.pdf.splitTextToSize(U.text,U.maxWidth||At-zt.x)[0],ys=S([JSON.parse(JSON.stringify(Xe))],this.posX+this.margin[3],-rs+He+this.ctx.prevPageLastElemOffset)[0],Te=$t&&(Ie>xt||Ie<ee)&&b.call(this);Te&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Bt,Mt,null).clip().discardPath()),this.pdf.text(bt,ys.x,ys.y,{angle:U.angle,align:le,renderingMode:U.renderingMode}),Te&&this.pdf.restoreGraphicsState()}}else zt.y<Dt&&(this.ctx.prevPageLastElemOffset+=Dt-zt.y);U.scale>=.01&&(this.pdf.setFontSize(Qe),this.lineWidth=et)}else U.scale>=.01&&(Qe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Qe*U.scale),et=this.lineWidth,this.lineWidth=et*U.scale),this.pdf.text(U.text,De.x+this.posX,De.y+this.posY,{angle:U.angle,align:le,renderingMode:U.renderingMode,maxWidth:U.maxWidth}),U.scale>=.01&&(this.pdf.setFontSize(Qe),this.lineWidth=et)},H=function(U,le,de,G){de=de||0,G=G||0,this.pdf.internal.out(a(U+de)+" "+n(le+G)+" l")},se=function(U,le,de){return this.pdf.lines(U,le,de,null,null)},X=function(U,le,de,G,je,De,Pe,ke){this.pdf.internal.out([t(r(de+U)),t(i(G+le)),t(r(je+U)),t(i(De+le)),t(r(Pe+U)),t(i(ke+le)),"c"].join(" "))},R=function(U,le,de,G){for(var je=2*Math.PI,De=Math.PI/2;le>de;)le-=je;var Pe=Math.abs(de-le);Pe<je&&G&&(Pe=je-Pe);for(var ke=[],Ye=G?-1:1,Qe=le;Pe>1e-5;){var et=Qe+Ye*Math.min(Pe,De);ke.push(Q.call(this,U,Qe,et)),Pe-=Math.abs(et-Qe),Qe=et}return ke},Q=function(U,le,de){var G=(de-le)/2,je=U*Math.cos(G),De=U*Math.sin(G),Pe=je,ke=-De,Ye=Pe*Pe+ke*ke,Qe=Ye+Pe*je+ke*De,et=4/3*(Math.sqrt(2*Ye*Qe)-Qe)/(Pe*De-ke*je),Xe=Pe-et*ke,re=ke+et*Pe,ne=Xe,Se=-re,Ve=G+le,xt=Math.cos(Ve),ee=Math.sin(Ve);return{x1:U*Math.cos(le),y1:U*Math.sin(le),x2:Xe*xt-re*ee,y2:Xe*ee+re*xt,x3:ne*xt-Se*ee,y3:ne*ee+Se*xt,x4:U*Math.cos(de),y4:U*Math.sin(de)}},Y=function(U){return 180*U/Math.PI},$=function(U,le,de,G,je,De){var Pe=U+.5*(de-U),ke=le+.5*(G-le),Ye=je+.5*(de-je),Qe=De+.5*(G-De),et=Math.min(U,je,Pe,Ye),Xe=Math.max(U,je,Pe,Ye),re=Math.min(le,De,ke,Qe),ne=Math.max(le,De,ke,Qe);return new c(et,re,Xe-et,ne-re)},me=function(U,le,de,G,je,De,Pe,ke){var Ye,Qe,et,Xe,re,ne,Se,Ve,xt,ee,Ie,He,Lt,Dt,Mt=de-U,At=G-le,Bt=je-de,rs=De-G,kt=Pe-je,zt=ke-De;for(Qe=0;Qe<41;Qe++)xt=(Se=(et=U+(Ye=Qe/40)*Mt)+Ye*((re=de+Ye*Bt)-et))+Ye*(re+Ye*(je+Ye*kt-re)-Se),ee=(Ve=(Xe=le+Ye*At)+Ye*((ne=G+Ye*rs)-Xe))+Ye*(ne+Ye*(De+Ye*zt-ne)-Ve),Qe==0?(Ie=xt,He=ee,Lt=xt,Dt=ee):(Ie=Math.min(Ie,xt),He=Math.min(He,ee),Lt=Math.max(Lt,xt),Dt=Math.max(Dt,ee));return new c(Math.round(Ie),Math.round(He),Math.round(Lt-Ie),Math.round(Dt-He))},D=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var U,le,de=(U=this.ctx.lineDash,le=this.ctx.lineDashOffset,JSON.stringify({lineDash:U,lineDashOffset:le}));this.prevLineDash!==de&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=de)}}})(ts.API),(function(s){var t=function(o){var c,u,h,m,p,y,g,j,b,N;for(u=[],h=0,m=(o+=c="\0\0\0\0".slice(o.length%4||4)).length;m>h;h+=4)(p=(o.charCodeAt(h)<<24)+(o.charCodeAt(h+1)<<16)+(o.charCodeAt(h+2)<<8)+o.charCodeAt(h+3))!==0?(y=(p=((p=((p=((p=(p-(N=p%85))/85)-(b=p%85))/85)-(j=p%85))/85)-(g=p%85))/85)%85,u.push(y+33,g+33,j+33,b+33,N+33)):u.push(122);return(function(v,S){for(var E=S;E>0;E--)v.pop()})(u,c.length),String.fromCharCode.apply(String,u)+"~>"},a=function(o){var c,u,h,m,p,y=String,g="length",j=255,b="charCodeAt",N="slice",v="replace";for(o[N](-2),o=o[N](0,-2)[v](/\s/g,"")[v]("z","!!!!!"),h=[],m=0,p=(o+=c="uuuuu"[N](o[g]%5||5))[g];p>m;m+=5)u=52200625*(o[b](m)-33)+614125*(o[b](m+1)-33)+7225*(o[b](m+2)-33)+85*(o[b](m+3)-33)+(o[b](m+4)-33),h.push(j&u>>24,j&u>>16,j&u>>8,j&u);return(function(S,E){for(var L=E;L>0;L--)S.pop()})(h,c[g]),y.fromCharCode.apply(y,h)},n=function(o){return o.split("").map(function(c){return("0"+c.charCodeAt().toString(16)).slice(-2)}).join("")+">"},r=function(o){var c=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((o=o.replace(/\s/g,"")).indexOf(">")!==-1&&(o=o.substr(0,o.indexOf(">"))),o.length%2&&(o+="0"),c.test(o)===!1)return"";for(var u="",h=0;h<o.length;h+=2)u+=String.fromCharCode("0x"+(o[h]+o[h+1]));return u},i=function(o){for(var c=new Uint8Array(o.length),u=o.length;u--;)c[u]=o.charCodeAt(u);return(c=rv(c)).reduce(function(h,m){return h+String.fromCharCode(m)},"")};s.processDataByFilters=function(o,c){var u=0,h=o||"",m=[];for(typeof(c=c||[])=="string"&&(c=[c]),u=0;u<c.length;u+=1)switch(c[u]){case"ASCII85Decode":case"/ASCII85Decode":h=a(h),m.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":h=t(h),m.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":h=r(h),m.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":h=n(h),m.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":h=i(h),m.push("/FlateDecode");break;default:throw new Error('The filter: "'+c[u]+'" is not implemented')}return{data:h,reverseChain:m.reverse().join(" ")}}})(ts.API),(function(s){s.loadFile=function(t,a,n){return(function(r,i,o){i=i!==!1,o=typeof o=="function"?o:function(){};var c=void 0;try{c=(function(u,h,m){var p=new XMLHttpRequest,y=0,g=function(j){var b=j.length,N=[],v=String.fromCharCode;for(y=0;y<b;y+=1)N.push(v(255&j.charCodeAt(y)));return N.join("")};if(p.open("GET",u,!h),p.overrideMimeType("text/plain; charset=x-user-defined"),h===!1&&(p.onload=function(){p.status===200?m(g(this.responseText)):m(void 0)}),p.send(null),h&&p.status===200)return g(p.responseText)})(r,i,o)}catch{}return c})(t,a,n)},s.loadImageFile=s.loadFile})(ts.API),(function(s){function t(){return(js.html2canvas?Promise.resolve(js.html2canvas):og(()=>import("./html2canvas.esm-B0tyYwQk.js"),[])).catch(function(c){return Promise.reject(new Error("Could not load html2canvas: "+c))}).then(function(c){return c.default?c.default:c})}function a(){return(js.DOMPurify?Promise.resolve(js.DOMPurify):og(()=>import("./purify.es-B6FQ9oRL.js"),[])).catch(function(c){return Promise.reject(new Error("Could not load dompurify: "+c))}).then(function(c){return c.default?c.default:c})}var n=function(c){var u=va(c);return u==="undefined"?"undefined":u==="string"||c instanceof String?"string":u==="number"||c instanceof Number?"number":u==="function"||c instanceof Function?"function":c&&c.constructor===Array?"array":c&&c.nodeType===1?"element":u==="object"?"object":"unknown"},r=function(c,u){var h=document.createElement(c);for(var m in u.className&&(h.className=u.className),u.innerHTML&&u.dompurify&&(h.innerHTML=u.dompurify.sanitize(u.innerHTML)),u.style)h.style[m]=u.style[m];return h},i=function c(u,h){for(var m=u.nodeType===3?document.createTextNode(u.nodeValue):u.cloneNode(!1),p=u.firstChild;p;p=p.nextSibling)h!==!0&&p.nodeType===1&&p.nodeName==="SCRIPT"||m.appendChild(c(p,h));return u.nodeType===1&&(u.nodeName==="CANVAS"?(m.width=u.width,m.height=u.height,m.getContext("2d").drawImage(u,0,0)):u.nodeName!=="TEXTAREA"&&u.nodeName!=="SELECT"||(m.value=u.value),m.addEventListener("load",function(){m.scrollTop=u.scrollTop,m.scrollLeft=u.scrollLeft},!0)),m},o=function c(u){var h=Object.assign(c.convert(Promise.resolve()),JSON.parse(JSON.stringify(c.template))),m=c.convert(Promise.resolve(),h);return(m=m.setProgress(1,c,1,[c])).set(u)};(o.prototype=Object.create(Promise.prototype)).constructor=o,o.convert=function(c,u){return c.__proto__=u||o.prototype,c},o.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},o.prototype.from=function(c,u){return this.then(function(){switch(u=u||(function(h){switch(n(h)){case"string":return"string";case"element":return h.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(c),u){case"string":return this.then(a).then(function(h){return this.set({src:r("div",{innerHTML:c,dompurify:h})})});case"element":return this.set({src:c});case"canvas":return this.set({canvas:c});case"img":return this.set({img:c});default:return this.error("Unknown source type.")}})},o.prototype.to=function(c){switch(c){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},o.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var c={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},u=i(this.prop.src,this.opt.html2canvas.javascriptEnabled);u.tagName==="BODY"&&(c.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=r("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=r("div",{className:"html2pdf__container",style:c}),this.prop.container.appendChild(u),this.prop.container.firstChild.appendChild(r("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},o.prototype.toCanvas=function(){var c=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(c).then(t).then(function(u){var h=Object.assign({},this.opt.html2canvas);return delete h.onrendered,u(this.prop.container,h)}).then(function(u){(this.opt.html2canvas.onrendered||function(){})(u),this.prop.canvas=u,document.body.removeChild(this.prop.overlay)})},o.prototype.toContext2d=function(){var c=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(c).then(t).then(function(u){var h=this.opt.jsPDF,m=this.opt.fontFaces,p=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,y=Object.assign({async:!0,allowTaint:!0,scale:p,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete y.onrendered,h.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,h.context2d.posX=this.opt.x,h.context2d.posY=this.opt.y,h.context2d.margin=this.opt.margin,h.context2d.fontFaces=m,m)for(var g=0;g<m.length;++g){var j=m[g],b=j.src.find(function(N){return N.format==="truetype"});b&&h.addFont(b.url,j.ref.name,j.ref.style)}return y.windowHeight=y.windowHeight||0,y.windowHeight=y.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):y.windowHeight,h.context2d.save(!0),u(this.prop.container,y)}).then(function(u){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(u),this.prop.canvas=u,document.body.removeChild(this.prop.overlay)})},o.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var c=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=c})},o.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},o.prototype.output=function(c,u,h){return(h=h||"pdf").toLowerCase()==="img"||h.toLowerCase()==="image"?this.outputImg(c,u):this.outputPdf(c,u)},o.prototype.outputPdf=function(c,u){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(c,u)})},o.prototype.outputImg=function(c){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(c){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+c+'" is not supported.'}})},o.prototype.save=function(c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(c?{filename:c}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},o.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},o.prototype.set=function(c){if(n(c)!=="object")return this;var u=Object.keys(c||{}).map(function(h){if(h in o.template.prop)return function(){this.prop[h]=c[h]};switch(h){case"margin":return this.setMargin.bind(this,c.margin);case"jsPDF":return function(){return this.opt.jsPDF=c.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,c.pageSize);default:return function(){this.opt[h]=c[h]}}},this);return this.then(function(){return this.thenList(u)})},o.prototype.get=function(c,u){return this.then(function(){var h=c in o.template.prop?this.prop[c]:this.opt[c];return u?u(h):h})},o.prototype.setMargin=function(c){return this.then(function(){switch(n(c)){case"number":c=[c,c,c,c];case"array":if(c.length===2&&(c=[c[0],c[1],c[0],c[1]]),c.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=c}).then(this.setPageSize)},o.prototype.setPageSize=function(c){function u(h,m){return Math.floor(h*m/72*96)}return this.then(function(){(c=c||ts.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(c.inner={width:c.width-this.opt.margin[1]-this.opt.margin[3],height:c.height-this.opt.margin[0]-this.opt.margin[2]},c.inner.px={width:u(c.inner.width,c.k),height:u(c.inner.height,c.k)},c.inner.ratio=c.inner.height/c.inner.width),this.prop.pageSize=c})},o.prototype.setProgress=function(c,u,h,m){return c!=null&&(this.progress.val=c),u!=null&&(this.progress.state=u),h!=null&&(this.progress.n=h),m!=null&&(this.progress.stack=m),this.progress.ratio=this.progress.val/this.progress.state,this},o.prototype.updateProgress=function(c,u,h,m){return this.setProgress(c?this.progress.val+c:null,u||null,h?this.progress.n+h:null,m?this.progress.stack.concat(m):null)},o.prototype.then=function(c,u){var h=this;return this.thenCore(c,u,function(m,p){return h.updateProgress(null,null,1,[m]),Promise.prototype.then.call(this,function(y){return h.updateProgress(null,m),y}).then(m,p).then(function(y){return h.updateProgress(1),y})})},o.prototype.thenCore=function(c,u,h){h=h||Promise.prototype.then;var m=this;c&&(c=c.bind(m)),u&&(u=u.bind(m));var p=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?m:o.convert(Object.assign({},m),Promise.prototype),y=h.call(p,c,u);return o.convert(y,m.__proto__)},o.prototype.thenExternal=function(c,u){return Promise.prototype.then.call(this,c,u)},o.prototype.thenList=function(c){var u=this;return c.forEach(function(h){u=u.thenCore(h)}),u},o.prototype.catch=function(c){c&&(c=c.bind(this));var u=Promise.prototype.catch.call(this,c);return o.convert(u,this)},o.prototype.catchExternal=function(c){return Promise.prototype.catch.call(this,c)},o.prototype.error=function(c){return this.then(function(){throw new Error(c)})},o.prototype.using=o.prototype.set,o.prototype.saveAs=o.prototype.save,o.prototype.export=o.prototype.output,o.prototype.run=o.prototype.then,ts.getPageSize=function(c,u,h){if(va(c)==="object"){var m=c;c=m.orientation,u=m.unit||u,h=m.format||h}u=u||"mm",h=h||"a4",c=(""+(c||"P")).toLowerCase();var p,y=(""+h).toLowerCase(),g={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(u){case"pt":p=1;break;case"mm":p=72/25.4;break;case"cm":p=72/2.54;break;case"in":p=72;break;case"px":p=.75;break;case"pc":case"em":p=12;break;case"ex":p=6;break;default:throw"Invalid unit: "+u}var j,b=0,N=0;if(g.hasOwnProperty(y))b=g[y][1]/p,N=g[y][0]/p;else try{b=h[1],N=h[0]}catch{throw new Error("Invalid format: "+h)}if(c==="p"||c==="portrait")c="p",N>b&&(j=N,N=b,b=j);else{if(c!=="l"&&c!=="landscape")throw"Invalid orientation: "+c;c="l",b>N&&(j=N,N=b,b=j)}return{width:N,height:b,unit:u,k:p,orientation:c}},s.html=function(c,u){(u=u||{}).callback=u.callback||function(){},u.html2canvas=u.html2canvas||{},u.html2canvas.canvas=u.html2canvas.canvas||this.canvas,u.jsPDF=u.jsPDF||this,u.fontFaces=u.fontFaces?u.fontFaces.map(yy):null;var h=new o(u);return u.worker?h:h.from(c).doCallback()}})(ts.API),ts.API.addJS=function(s){return x_=s,this.internal.events.subscribe("postPutResources",function(){Qp=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Qp+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),g_=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+x_+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Qp!==void 0&&g_!==void 0&&this.internal.out("/Names <</JavaScript "+Qp+" 0 R>>")}),this},(function(s){var t;s.events.push(["postPutResources",function(){var a=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var r=a.outline.render().split(/\r\n/),i=0;i<r.length;i++){var o=r[i],c=n.exec(o);if(c!=null){var u=c[1];a.internal.newObjectDeferredBegin(u,!1)}a.internal.write(o)}if(this.outline.createNamedDestinations){var h=this.internal.pages.length,m=[];for(i=0;i<h;i++){var p=a.internal.newObject();m.push(p);var y=a.internal.getPageInfo(i+1);a.internal.write("<< /D["+y.objId+" 0 R /XYZ null null null]>> endobj")}var g=a.internal.newObject();for(a.internal.write("<< /Names [ "),i=0;i<m.length;i++)a.internal.write("(page_"+(i+1)+")"+m[i]+" 0 R");a.internal.write(" ] >>","endobj"),t=a.internal.newObject(),a.internal.write("<< /Dests "+g+" 0 R"),a.internal.write(">>","endobj")}}]),s.events.push(["putCatalog",function(){var a=this;a.outline.root.children.length>0&&(a.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&a.internal.write("/Names "+t+" 0 R"))}]),s.events.push(["initialized",function(){var a=this;a.outline={createNamedDestinations:!1,root:{children:[]}},a.outline.add=function(n,r,i){var o={title:r,options:i,children:[]};return n==null&&(n=this.root),n.children.push(o),o},a.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=a,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},a.outline.genIds_r=function(n){n.id=a.internal.newObjectDeferred();for(var r=0;r<n.children.length;r++)this.genIds_r(n.children[r])},a.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},a.outline.renderItems=function(n){for(var r=this.ctx.pdf.internal.getVerticalCoordinateString,i=0;i<n.children.length;i++){var o=n.children[i];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(n)),i>0&&this.line("/Prev "+this.makeRef(n.children[i-1])),i<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[i+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var c=this.count=this.count_r({count:0},o);if(c>0&&this.line("/Count "+c),o.options&&o.options.pageNumber){var u=a.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+u.objId+" 0 R /XYZ 0 "+r(0)+" 0]")}this.objEnd()}for(var h=0;h<n.children.length;h++)this.renderItems(n.children[h])},a.outline.line=function(n){this.ctx.val+=n+`\r
`},a.outline.makeRef=function(n){return n.id+" 0 R"},a.outline.makeString=function(n){return"("+a.internal.pdfEscape(n)+")"},a.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},a.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},a.outline.count_r=function(n,r){for(var i=0;i<r.children.length;i++)n.count++,this.count_r(n,r.children[i]);return n.count}}])})(ts.API),(function(s){var t=[192,193,194,195,196,197,198,199];s.processJPEG=function(a,n,r,i,o,c){var u,h=this.decode.DCT_DECODE,m=null;if(typeof a=="string"||this.__addimage__.isArrayBuffer(a)||this.__addimage__.isArrayBufferView(a)){switch(a=o||a,a=this.__addimage__.isArrayBuffer(a)?new Uint8Array(a):a,u=(function(p){for(var y,g=256*p.charCodeAt(4)+p.charCodeAt(5),j=p.length,b={width:0,height:0,numcomponents:1},N=4;N<j;N+=2){if(N+=g,t.indexOf(p.charCodeAt(N+1))!==-1){y=256*p.charCodeAt(N+5)+p.charCodeAt(N+6),b={width:256*p.charCodeAt(N+7)+p.charCodeAt(N+8),height:y,numcomponents:p.charCodeAt(N+9)};break}g=256*p.charCodeAt(N+2)+p.charCodeAt(N+3)}return b})(a=this.__addimage__.isArrayBufferView(a)?this.__addimage__.arrayBufferToBinaryString(a):a),u.numcomponents){case 1:c=this.color_spaces.DEVICE_GRAY;break;case 4:c=this.color_spaces.DEVICE_CMYK;break;case 3:c=this.color_spaces.DEVICE_RGB}m={data:a,width:u.width,height:u.height,colorSpace:c,bitsPerComponent:8,filter:h,index:n,alias:r}}return m}})(ts.API),ts.API.processPNG=function(s,t,a,n){if(this.__addimage__.isArrayBuffer(s)&&(s=new Uint8Array(s)),this.__addimage__.isArrayBufferView(s)){var r,i=az(s,{checkCrc:!0}),o=i.width,c=i.height,u=i.channels,h=i.palette,m=i.depth;r=h&&u===1?(function(q){for(var B=q.width,J=q.height,P=q.data,K=q.palette,H=q.depth,se=!1,X=[],R=[],Q=void 0,Y=!1,$=0,me=0;me<K.length;me++){var D=jw(K[me],4),U=D[0],le=D[1],de=D[2],G=D[3];X.push(U,le,de),G!=null&&(G===0?($++,R.length<1&&R.push(me)):G<255&&(Y=!0))}if(Y||$>1){se=!0,R=void 0;var je=B*J;Q=new Uint8Array(je);for(var De=new DataView(P.buffer),Pe=0;Pe<je;Pe++){var ke=jy(De,Pe,H),Ye=jw(K[ke],4)[3];Q[Pe]=Ye}}else $===0&&(R=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:se?8:void 0,colorBytes:P,alphaBytes:Q,needSMask:se,palette:X,mask:R}})(i):u===2||u===4?(function(q){for(var B=q.data,J=q.width,P=q.height,K=q.channels,H=q.depth,se=K===2?"DeviceGray":"DeviceRGB",X=K-1,R=J*P,Q=X,Y=R*Q,$=1*R,me=Math.ceil(Y*H/8),D=Math.ceil($*H/8),U=new Uint8Array(me),le=new Uint8Array(D),de=new DataView(B.buffer),G=new DataView(U.buffer),je=new DataView(le.buffer),De=!1,Pe=0;Pe<R;Pe++){for(var ke=Pe*K,Ye=0;Ye<Q;Ye++)C_(G,jy(de,ke+Ye,H),Pe*Q+Ye,H);var Qe=jy(de,ke+Q,H);Qe<(1<<H)-1&&(De=!0),C_(je,Qe,1*Pe,H)}return{colorSpace:se,colorsPerPixel:X,sMaskBitsPerComponent:De?H:void 0,colorBytes:U,alphaBytes:le,needSMask:De}})(i):(function(q){var B=q.data,J=q.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:J,colorsPerPixel:J==="DeviceGray"?1:3,colorBytes:B instanceof Uint16Array?(function(P){for(var K=P.length,H=new Uint8Array(2*K),se=new DataView(H.buffer,H.byteOffset,H.byteLength),X=0;X<K;X++)se.setUint16(2*X,P[X],!1);return H})(B):B,needSMask:!1}})(i);var p,y,g,j=r,b=j.colorSpace,N=j.colorsPerPixel,v=j.sMaskBitsPerComponent,S=j.colorBytes,E=j.alphaBytes,L=j.needSMask,z=j.palette,V=j.mask,te=null;return n!==ts.API.image_compression.NONE&&typeof rv=="function"?(te=(function(q){var B;switch(q){case ts.API.image_compression.FAST:B=11;break;case ts.API.image_compression.MEDIUM:B=13;break;case ts.API.image_compression.SLOW:B=14;break;default:B=12}return B})(n),p=this.decode.FLATE_DECODE,y="/Predictor ".concat(te," /Colors ").concat(N," /BitsPerComponent ").concat(m," /Columns ").concat(o),s=j_(S,Math.ceil(o*N*m/8),N,m,n),L&&(g=j_(E,Math.ceil(o*v/8),1,v,n))):(p=void 0,y=void 0,s=S,L&&(g=E)),(this.__addimage__.isArrayBuffer(s)||this.__addimage__.isArrayBufferView(s))&&(s=this.__addimage__.arrayBufferToBinaryString(s)),(g&&this.__addimage__.isArrayBuffer(g)||this.__addimage__.isArrayBufferView(g))&&(g=this.__addimage__.arrayBufferToBinaryString(g)),{alias:a,data:s,index:t,filter:p,decodeParameters:y,transparency:V,palette:z,sMask:g,predictor:te,width:o,height:c,bitsPerComponent:m,sMaskBitsPerComponent:v,colorSpace:b}}},(function(s){s.processGIF89A=function(t,a,n,r){var i=new _z(t),o=i.width,c=i.height,u=[];i.decodeAndBlitFrameRGBA(0,u);var h={data:u,width:o,height:c},m=new Ny(100).encode(h,100);return s.processJPEG.call(this,m,a,n,r)},s.processGIF87A=s.processGIF89A})(ts.API),xo.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var s=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(s);for(var t=0;t<s;t++){var a=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:r,green:n,blue:a,quad:i}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},xo.prototype.parseBGR=function(){this.pos=this.offset;try{var s="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[s]()}catch(a){Ta.log("bit decode error:"+a)}},xo.prototype.bit1=function(){var s,t=Math.ceil(this.width/8),a=t%4;for(s=this.height-1;s>=0;s--){for(var n=this.bottom_up?s:this.height-1-s,r=0;r<t;r++)for(var i=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+8*r*4,c=0;c<8&&8*r+c<this.width;c++){var u=this.palette[i>>7-c&1];this.data[o+4*c]=u.blue,this.data[o+4*c+1]=u.green,this.data[o+4*c+2]=u.red,this.data[o+4*c+3]=255}a!==0&&(this.pos+=4-a)}},xo.prototype.bit4=function(){for(var s=Math.ceil(this.width/2),t=s%4,a=this.height-1;a>=0;a--){for(var n=this.bottom_up?a:this.height-1-a,r=0;r<s;r++){var i=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+2*r*4,c=i>>4,u=15&i,h=this.palette[c];if(this.data[o]=h.blue,this.data[o+1]=h.green,this.data[o+2]=h.red,this.data[o+3]=255,2*r+1>=this.width)break;h=this.palette[u],this.data[o+4]=h.blue,this.data[o+4+1]=h.green,this.data[o+4+2]=h.red,this.data[o+4+3]=255}t!==0&&(this.pos+=4-t)}},xo.prototype.bit8=function(){for(var s=this.width%4,t=this.height-1;t>=0;t--){for(var a=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=a*this.width*4+4*n;if(r<this.palette.length){var o=this.palette[r];this.data[i]=o.red,this.data[i+1]=o.green,this.data[i+2]=o.blue,this.data[i+3]=255}else this.data[i]=255,this.data[i+1]=255,this.data[i+2]=255,this.data[i+3]=255}s!==0&&(this.pos+=4-s)}},xo.prototype.bit15=function(){for(var s=this.width%3,t=parseInt("11111",2),a=this.height-1;a>=0;a--){for(var n=this.bottom_up?a:this.height-1-a,r=0;r<this.width;r++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(i&t)/t*255|0,c=(i>>5&t)/t*255|0,u=(i>>10&t)/t*255|0,h=i>>15?255:0,m=n*this.width*4+4*r;this.data[m]=u,this.data[m+1]=c,this.data[m+2]=o,this.data[m+3]=h}this.pos+=s}},xo.prototype.bit16=function(){for(var s=this.width%3,t=parseInt("11111",2),a=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var c=(o&t)/t*255|0,u=(o>>5&a)/a*255|0,h=(o>>11)/t*255|0,m=r*this.width*4+4*i;this.data[m]=h,this.data[m+1]=u,this.data[m+2]=c,this.data[m+3]=255}this.pos+=s}},xo.prototype.bit24=function(){for(var s=this.height-1;s>=0;s--){for(var t=this.bottom_up?s:this.height-1-s,a=0;a<this.width;a++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*a;this.data[o]=i,this.data[o+1]=r,this.data[o+2]=n,this.data[o+3]=255}this.pos+=this.width%4}},xo.prototype.bit32=function(){for(var s=this.height-1;s>=0;s--)for(var t=this.bottom_up?s:this.height-1-s,a=0;a<this.width;a++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),c=t*this.width*4+4*a;this.data[c]=i,this.data[c+1]=r,this.data[c+2]=n,this.data[c+3]=o}},xo.prototype.getData=function(){return this.data},(function(s){s.processBMP=function(t,a,n,r){var i=new xo(t,!1),o=i.width,c=i.height,u={data:i.getData(),width:o,height:c},h=new Ny(100).encode(u,100);return s.processJPEG.call(this,h,a,n,r)}})(ts.API),k_.prototype.getData=function(){return this.data},(function(s){s.processWEBP=function(t,a,n,r){var i=new k_(t),o=i.width,c=i.height,u={data:i.getData(),width:o,height:c},h=new Ny(100).encode(u,100);return s.processJPEG.call(this,h,a,n,r)}})(ts.API),ts.API.processRGBA=function(s,t,a){for(var n=s.data,r=n.length,i=new Uint8Array(r/4*3),o=new Uint8Array(r/4),c=0,u=0,h=0;h<r;h+=4){var m=n[h],p=n[h+1],y=n[h+2],g=n[h+3];i[c++]=m,i[c++]=p,i[c++]=y,o[u++]=g}var j=this.__addimage__.arrayBufferToBinaryString(i);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:j,index:t,alias:a,colorSpace:"DeviceRGB",bitsPerComponent:8,width:s.width,height:s.height}},ts.API.setLanguage=function(s){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[s]!==void 0&&(this.internal.languageSettings.languageCode=s,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},bh=ts.API,Jp=bh.getCharWidthsArray=function(s,t){var a,n,r=(t=t||{}).font||this.internal.getFont(),i=t.fontSize||this.internal.getFontSize(),o=t.charSpace||this.internal.getCharSpace(),c=t.widths?t.widths:r.metadata.Unicode.widths,u=c.fof?c.fof:1,h=t.kerning?t.kerning:r.metadata.Unicode.kerning,m=h.fof?h.fof:1,p=t.doKerning!==!1,y=0,g=s.length,j=0,b=c[0]||u,N=[];for(a=0;a<g;a++)n=s.charCodeAt(a),typeof r.metadata.widthOfString=="function"?N.push((r.metadata.widthOfGlyph(r.metadata.characterToGlyph(n))+o*(1e3/i)||0)/1e3):(y=p&&va(h[n])==="object"&&!isNaN(parseInt(h[n][j],10))?h[n][j]/m:0,N.push((c[n]||b)/u+y)),j=n;return N},b_=bh.getStringUnitWidth=function(s,t){var a=(t=t||{}).fontSize||this.internal.getFontSize(),n=t.font||this.internal.getFont(),r=t.charSpace||this.internal.getCharSpace();return bh.processArabic&&(s=bh.processArabic(s)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(s,a,r)/a:Jp.apply(this,arguments).reduce(function(i,o){return i+o},0)},y_=function(s,t,a,n){for(var r=[],i=0,o=s.length,c=0;i!==o&&c+t[i]<a;)c+=t[i],i++;r.push(s.slice(0,i));var u=i;for(c=0;i!==o;)c+t[i]>n&&(r.push(s.slice(u,i)),c=0,u=i),c+=t[i],i++;return u!==i&&r.push(s.slice(u,i)),r},v_=function(s,t,a){a||(a={});var n,r,i,o,c,u,h,m=[],p=[m],y=a.textIndent||0,g=0,j=0,b=s.split(" "),N=Jp.apply(this,[" ",a])[0];if(u=a.lineIndent===-1?b[0].length+2:a.lineIndent||0){var v=Array(u).join(" "),S=[];b.map(function(L){(L=L.split(/\s*\n/)).length>1?S=S.concat(L.map(function(z,V){return(V&&z.length?`
`:"")+z})):S.push(L[0])}),b=S,u=b_.apply(this,[v,a])}for(i=0,o=b.length;i<o;i++){var E=0;if(n=b[i],u&&n[0]==`
`&&(n=n.substr(1),E=1),y+g+(j=(r=Jp.apply(this,[n,a])).reduce(function(L,z){return L+z},0))>t||E){if(j>t){for(c=y_.apply(this,[n,r,t-(y+g),t]),m.push(c.shift()),m=[c.pop()];c.length;)p.push([c.shift()]);j=r.slice(n.length-(m[0]?m[0].length:0)).reduce(function(L,z){return L+z},0)}else m=[n];p.push(m),y=j+u,g=N}else m.push(n),y+=g+j,g=N}return h=u?function(L,z){return(z?v:"")+L.join(" ")}:function(L){return L.join(" ")},p.map(h)},bh.splitTextToSize=function(s,t,a){var n,r=(a=a||{}).fontSize||this.internal.getFontSize(),i=(function(m){if(m.widths&&m.kerning)return{widths:m.widths,kerning:m.kerning};var p=this.internal.getFont(m.fontName,m.fontStyle),y="Unicode";return p.metadata[y]?{widths:p.metadata[y].widths||{0:1},kerning:p.metadata[y].kerning||{}}:{font:p.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,a);n=Array.isArray(s)?s:String(s).split(/\r?\n/);var o=1*this.internal.scaleFactor*t/r;i.textIndent=a.textIndent?1*a.textIndent*this.internal.scaleFactor/r:0,i.lineIndent=a.lineIndent;var c,u,h=[];for(c=0,u=n.length;c<u;c++)h=h.concat(v_.apply(this,[n[c],o,i]));return h},(function(s){s.__fontmetrics__=s.__fontmetrics__||{};for(var t="0123456789abcdef",a="klmnopqrstuvwxyz",n={},r={},i=0;i<16;i++)n[a[i]]=t[i],r[t[i]]=a[i];var o=function(y){return"0x"+parseInt(y,10).toString(16)},c=s.__fontmetrics__.compress=function(y){var g,j,b,N,v=["{"];for(var S in y){if(g=y[S],isNaN(parseInt(S,10))?j="'"+S+"'":(S=parseInt(S,10),j=(j=o(S).slice(2)).slice(0,-1)+r[j.slice(-1)]),typeof g=="number")g<0?(b=o(g).slice(3),N="-"):(b=o(g).slice(2),N=""),b=N+b.slice(0,-1)+r[b.slice(-1)];else{if(va(g)!=="object")throw new Error("Don't know what to do with value type "+va(g)+".");b=c(g)}v.push(j+b)}return v.push("}"),v.join("")},u=s.__fontmetrics__.uncompress=function(y){if(typeof y!="string")throw new Error("Invalid argument passed to uncompress.");for(var g,j,b,N,v={},S=1,E=v,L=[],z="",V="",te=y.length-1,q=1;q<te;q+=1)(N=y[q])=="'"?g?(b=g.join(""),g=void 0):g=[]:g?g.push(N):N=="{"?(L.push([E,b]),E={},b=void 0):N=="}"?((j=L.pop())[0][j[1]]=E,b=void 0,E=j[0]):N=="-"?S=-1:b===void 0?n.hasOwnProperty(N)?(z+=n[N],b=parseInt(z,16)*S,S=1,z=""):z+=N:n.hasOwnProperty(N)?(V+=n[N],E[b]=parseInt(V,16)*S,S=1,b=void 0,V=""):V+=N;return v},h={codePages:["WinAnsiEncoding"],WinAnsiEncoding:u("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},m={Unicode:{Courier:h,"Courier-Bold":h,"Courier-BoldOblique":h,"Courier-Oblique":h,Helvetica:h,"Helvetica-Bold":h,"Helvetica-BoldOblique":h,"Helvetica-Oblique":h,"Times-Roman":h,"Times-Bold":h,"Times-BoldItalic":h,"Times-Italic":h}},p={Unicode:{"Courier-Oblique":u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":u("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":u("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":u("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:u("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:u("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":u("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:u("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":u("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":u("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":u("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};s.events.push(["addFont",function(y){var g=y.font,j=p.Unicode[g.postScriptName];j&&(g.metadata.Unicode={},g.metadata.Unicode.widths=j.widths,g.metadata.Unicode.kerning=j.kerning);var b=m.Unicode[g.postScriptName];b&&(g.metadata.Unicode.encoding=b,g.encoding=b.codePages[0])}])})(ts.API),(function(s){var t=function(a){for(var n=a.length,r=new Uint8Array(n),i=0;i<n;i++)r[i]=a.charCodeAt(i);return r};s.API.events.push(["addFont",function(a){var n=void 0,r=a.font,i=a.instance;if(!r.isStandardFont){if(i===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+r.postScriptName+"').");if(typeof(n=i.existsFileInVFS(r.postScriptName)===!1?i.loadFile(r.postScriptName):i.getFileFromVFS(r.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+r.postScriptName+"').");(function(o,c){c=/^\x00\x01\x00\x00/.test(c)?t(c):t(dg(c)),o.metadata=s.API.TTFFont.open(c),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(r,n)}}])})(ts),ts.API.addSvgAsImage=function(s,t,a,n,r,i,o,c){if(isNaN(t)||isNaN(a))throw Ta.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(n)||isNaN(r))throw Ta.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var u=document.createElement("canvas");u.width=n,u.height=r;var h=u.getContext("2d");h.fillStyle="#fff",h.fillRect(0,0,u.width,u.height);var m={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},p=this;return(js.canvg?Promise.resolve(js.canvg):og(()=>import("./index.es-Ch3Smazy.js"),[])).catch(function(y){return Promise.reject(new Error("Could not load canvg: "+y))}).then(function(y){return y.default?y.default:y}).then(function(y){return y.fromString(h,s,m)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(y){return y.render(m)}).then(function(){p.addImage(u.toDataURL("image/jpeg",1),t,a,n,r,o,c)})},ts.API.putTotalPages=function(s){var t,a=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(s,"g"),a=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(s,this.internal.getFont()),"g"),a=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var r=0;r<this.internal.pages[n].length;r++)this.internal.pages[n][r]=this.internal.pages[n][r].replace(t,a);return this},ts.API.viewerPreferences=function(s,t){var a;s=s||{},t=t||!1;var n,r,i,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},c=Object.keys(o),u=[],h=0,m=0,p=0;function y(j,b){var N,v=!1;for(N=0;N<j.length;N+=1)j[N]===b&&(v=!0);return v}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),a=this.internal.viewerpreferences.configuration,s==="reset"||t===!0){var g=c.length;for(p=0;p<g;p+=1)a[c[p]].value=a[c[p]].defaultValue,a[c[p]].explicitSet=!1}if(va(s)==="object"){for(r in s)if(i=s[r],y(c,r)&&i!==void 0){if(a[r].type==="boolean"&&typeof i=="boolean")a[r].value=i;else if(a[r].type==="name"&&y(a[r].valueSet,i))a[r].value=i;else if(a[r].type==="integer"&&Number.isInteger(i))a[r].value=i;else if(a[r].type==="array"){for(h=0;h<i.length;h+=1)if(n=!0,i[h].length===1&&typeof i[h][0]=="number")u.push(String(i[h]-1));else if(i[h].length>1){for(m=0;m<i[h].length;m+=1)typeof i[h][m]!="number"&&(n=!1);n===!0&&u.push([i[h][0]-1,i[h][1]-1].join(" "))}a[r].value="["+u.join(" ")+"]"}else a[r].value=a[r].defaultValue;a[r].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var j,b=[];for(j in a)a[j].explicitSet===!0&&(a[j].type==="name"?b.push("/"+j+" /"+a[j].value):b.push("/"+j+" "+a[j].value));b.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+b.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=a,this},(function(s){var t=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',r=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),i=unescape(encodeURIComponent(n)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),c=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),u=unescape(encodeURIComponent("</x:xmpmeta>")),h=i.length+o.length+c.length+r.length+u.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+h+" >>"),this.internal.write("stream"),this.internal.write(r+i+o+c+u),this.internal.write("endstream"),this.internal.write("endobj")},a=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};s.addMetadata=function(n,r){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:r||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",a),this.internal.events.subscribe("postPutResources",t)),this}})(ts.API),(function(s){var t=s.API,a=t.pdfEscape16=function(i,o){for(var c,u=o.metadata.Unicode.widths,h=["","0","00","000","0000"],m=[""],p=0,y=i.length;p<y;++p){if(c=o.metadata.characterToGlyph(i.charCodeAt(p)),o.metadata.glyIdsUsed.push(c),o.metadata.toUnicode[c]=i.charCodeAt(p),u.indexOf(c)==-1&&(u.push(c),u.push([parseInt(o.metadata.widthOfGlyph(c),10)])),c=="0")return m.join("");c=c.toString(16),m.push(h[4-c.length],c)}return m.join("")},n=function(i){var o,c,u,h,m,p,y;for(m=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,u=[],p=0,y=(c=Object.keys(i).sort(function(g,j){return g-j})).length;p<y;p++)o=c[p],u.length>=100&&(m+=`
`+u.length+` beginbfchar
`+u.join(`
`)+`
endbfchar`,u=[]),i[o]!==void 0&&i[o]!==null&&typeof i[o].toString=="function"&&(h=("0000"+i[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),u.push("<"+o+"><"+h+">"));return u.length&&(m+=`
`+u.length+` beginbfchar
`+u.join(`
`)+`
endbfchar
`),m+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(i){(function(o){var c=o.font,u=o.out,h=o.newObject,m=o.putStream;if(c.metadata instanceof s.API.TTFFont&&c.encoding==="Identity-H"){for(var p=c.metadata.Unicode.widths,y=c.metadata.subset.encode(c.metadata.glyIdsUsed,1),g="",j=0;j<y.length;j++)g+=String.fromCharCode(y[j]);var b=h();m({data:g,addLength1:!0,objectId:b}),u("endobj");var N=h();m({data:n(c.metadata.toUnicode),addLength1:!0,objectId:N}),u("endobj");var v=h();u("<<"),u("/Type /FontDescriptor"),u("/FontName /"+Ch(c.fontName)),u("/FontFile2 "+b+" 0 R"),u("/FontBBox "+s.API.PDFObject.convert(c.metadata.bbox)),u("/Flags "+c.metadata.flags),u("/StemV "+c.metadata.stemV),u("/ItalicAngle "+c.metadata.italicAngle),u("/Ascent "+c.metadata.ascender),u("/Descent "+c.metadata.decender),u("/CapHeight "+c.metadata.capHeight),u(">>"),u("endobj");var S=h();u("<<"),u("/Type /Font"),u("/BaseFont /"+Ch(c.fontName)),u("/FontDescriptor "+v+" 0 R"),u("/W "+s.API.PDFObject.convert(p)),u("/CIDToGIDMap /Identity"),u("/DW 1000"),u("/Subtype /CIDFontType2"),u("/CIDSystemInfo"),u("<<"),u("/Supplement 0"),u("/Registry (Adobe)"),u("/Ordering ("+c.encoding+")"),u(">>"),u(">>"),u("endobj"),c.objectNumber=h(),u("<<"),u("/Type /Font"),u("/Subtype /Type0"),u("/ToUnicode "+N+" 0 R"),u("/BaseFont /"+Ch(c.fontName)),u("/Encoding /"+c.encoding),u("/DescendantFonts ["+S+" 0 R]"),u(">>"),u("endobj"),c.isAlreadyPutted=!0}})(i)}]),t.events.push(["putFont",function(i){(function(o){var c=o.font,u=o.out,h=o.newObject,m=o.putStream;if(c.metadata instanceof s.API.TTFFont&&c.encoding==="WinAnsiEncoding"){for(var p=c.metadata.rawData,y="",g=0;g<p.length;g++)y+=String.fromCharCode(p[g]);var j=h();m({data:y,addLength1:!0,objectId:j}),u("endobj");var b=h();m({data:n(c.metadata.toUnicode),addLength1:!0,objectId:b}),u("endobj");var N=h();u("<<"),u("/Descent "+c.metadata.decender),u("/CapHeight "+c.metadata.capHeight),u("/StemV "+c.metadata.stemV),u("/Type /FontDescriptor"),u("/FontFile2 "+j+" 0 R"),u("/Flags 96"),u("/FontBBox "+s.API.PDFObject.convert(c.metadata.bbox)),u("/FontName /"+Ch(c.fontName)),u("/ItalicAngle "+c.metadata.italicAngle),u("/Ascent "+c.metadata.ascender),u(">>"),u("endobj"),c.objectNumber=h();for(var v=0;v<c.metadata.hmtx.widths.length;v++)c.metadata.hmtx.widths[v]=parseInt(c.metadata.hmtx.widths[v]*(1e3/c.metadata.head.unitsPerEm));u("<</Subtype/TrueType/Type/Font/ToUnicode "+b+" 0 R/BaseFont/"+Ch(c.fontName)+"/FontDescriptor "+N+" 0 R/Encoding/"+c.encoding+" /FirstChar 29 /LastChar 255 /Widths "+s.API.PDFObject.convert(c.metadata.hmtx.widths)+">>"),u("endobj"),c.isAlreadyPutted=!0}})(i)}]);var r=function(i){var o,c=i.text||"",u=i.x,h=i.y,m=i.options||{},p=i.mutex||{},y=p.pdfEscape,g=p.activeFontKey,j=p.fonts,b=g,N="",v=0,S="",E=j[b].encoding;if(j[b].encoding!=="Identity-H")return{text:c,x:u,y:h,options:m,mutex:p};for(S=c,b=g,Array.isArray(c)&&(S=c[0]),v=0;v<S.length;v+=1)j[b].metadata.hasOwnProperty("cmap")&&(o=j[b].metadata.cmap.unicode.codeMap[S[v].charCodeAt(0)]),o||S[v].charCodeAt(0)<256&&j[b].metadata.hasOwnProperty("Unicode")?N+=S[v]:N+="";var L="";return parseInt(b.slice(1))<14||E==="WinAnsiEncoding"?L=y(N,b).split("").map(function(z){return z.charCodeAt(0).toString(16)}).join(""):E==="Identity-H"&&(L=a(N,j[b])),p.isHex=!0,{text:L,x:u,y:h,options:m,mutex:p}};t.events.push(["postProcessText",function(i){var o=i.text||"",c=[],u={text:o,x:i.x,y:i.y,options:i.options,mutex:i.mutex};if(Array.isArray(o)){var h=0;for(h=0;h<o.length;h+=1)Array.isArray(o[h])&&o[h].length===3?c.push([r(Object.assign({},u,{text:o[h][0]})).text,o[h][1],o[h][2]]):c.push(r(Object.assign({},u,{text:o[h]})).text);i.text=c}else i.text=r(Object.assign({},u,{text:o})).text}])})(ts),(function(s){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};s.existsFileInVFS=function(a){return t.call(this),this.internal.vFS[a]!==void 0},s.addFileToVFS=function(a,n){return t.call(this),this.internal.vFS[a]=n,this},s.getFileFromVFS=function(a){return t.call(this),this.internal.vFS[a]!==void 0?this.internal.vFS[a]:null}})(ts.API),(function(s){s.__bidiEngine__=s.prototype.__bidiEngine__=function(n){var r,i,o,c,u,h,m,p=t,y=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],g=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],j={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},b={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},N=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],v=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),S=!1,E=0;this.__bidiEngine__={};var L=function(P){var K=P.charCodeAt(),H=K>>8,se=b[H];return se!==void 0?p[256*se+(255&K)]:H===252||H===253?"AL":v.test(H)?"L":H===8?"R":"N"},z=function(P){for(var K,H=0;H<P.length;H++){if((K=L(P.charAt(H)))==="L")return!1;if(K==="R")return!0}return!1},V=function(P,K,H,se){var X,R,Q,Y,$=K[se];switch($){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":S=!1;break;case"N":case"AN":break;case"EN":S&&($="AN");break;case"AL":S=!0,$="R";break;case"WS":case"BN":$="N";break;case"CS":se<1||se+1>=K.length||(X=H[se-1])!=="EN"&&X!=="AN"||(R=K[se+1])!=="EN"&&R!=="AN"?$="N":S&&(R="AN"),$=R===X?R:"N";break;case"ES":$=(X=se>0?H[se-1]:"B")==="EN"&&se+1<K.length&&K[se+1]==="EN"?"EN":"N";break;case"ET":if(se>0&&H[se-1]==="EN"){$="EN";break}if(S){$="N";break}for(Q=se+1,Y=K.length;Q<Y&&K[Q]==="ET";)Q++;$=Q<Y&&K[Q]==="EN"?"EN":"N";break;case"NSM":if(o&&!c){for(Y=K.length,Q=se+1;Q<Y&&K[Q]==="NSM";)Q++;if(Q<Y){var me=P[se],D=me>=1425&&me<=2303||me===64286;if(X=K[Q],D&&(X==="R"||X==="AL")){$="R";break}}}$=se<1||(X=K[se-1])==="B"?"N":H[se-1];break;case"B":S=!1,r=!0,$=E;break;case"S":i=!0,$="N"}return $},te=function(P,K,H){var se=P.split("");return H&&q(se,H,{hiLevel:E}),se.reverse(),K&&K.reverse(),se.join("")},q=function(P,K,H){var se,X,R,Q,Y,$=-1,me=P.length,D=0,U=[],le=E?g:y,de=[];for(S=!1,r=!1,i=!1,X=0;X<me;X++)de[X]=L(P[X]);for(R=0;R<me;R++){if(Y=D,U[R]=V(P,de,U,R),se=240&(D=le[Y][j[U[R]]]),D&=15,K[R]=Q=le[D][5],se>0)if(se===16){for(X=$;X<R;X++)K[X]=1;$=-1}else $=-1;if(le[D][6])$===-1&&($=R);else if($>-1){for(X=$;X<R;X++)K[X]=Q;$=-1}de[R]==="B"&&(K[R]=0),H.hiLevel|=Q}i&&(function(G,je,De){for(var Pe=0;Pe<De;Pe++)if(G[Pe]==="S"){je[Pe]=E;for(var ke=Pe-1;ke>=0&&G[ke]==="WS";ke--)je[ke]=E}})(de,K,me)},B=function(P,K,H,se,X){if(!(X.hiLevel<P)){if(P===1&&E===1&&!r)return K.reverse(),void(H&&H.reverse());for(var R,Q,Y,$,me=K.length,D=0;D<me;){if(se[D]>=P){for(Y=D+1;Y<me&&se[Y]>=P;)Y++;for($=D,Q=Y-1;$<Q;$++,Q--)R=K[$],K[$]=K[Q],K[Q]=R,H&&(R=H[$],H[$]=H[Q],H[Q]=R);D=Y}D++}}},J=function(P,K,H){var se=P.split(""),X={hiLevel:E};return H||(H=[]),q(se,H,X),(function(R,Q,Y){if(Y.hiLevel!==0&&m)for(var $,me=0;me<R.length;me++)Q[me]===1&&($=N.indexOf(R[me]))>=0&&(R[me]=N[$+1])})(se,H,X),B(2,se,K,H,X),B(1,se,K,H,X),se.join("")};return this.__bidiEngine__.doBidiReorder=function(P,K,H){if((function(X,R){if(R)for(var Q=0;Q<X.length;Q++)R[Q]=Q;c===void 0&&(c=z(X)),h===void 0&&(h=z(X))})(P,K),o||!u||h)if(o&&u&&c^h)E=c?1:0,P=te(P,K,H);else if(!o&&u&&h)E=c?1:0,P=J(P,K,H),P=te(P,K);else if(!o||c||u||h){if(o&&!u&&c^h)P=te(P,K),c?(E=0,P=J(P,K,H)):(E=1,P=J(P,K,H),P=te(P,K));else if(o&&c&&!u&&h)E=1,P=J(P,K,H),P=te(P,K);else if(!o&&!u&&c^h){var se=m;c?(E=1,P=J(P,K,H),E=0,m=!1,P=J(P,K,H),m=se):(E=0,P=J(P,K,H),P=te(P,K),E=1,m=!1,P=J(P,K,H),m=se,P=te(P,K))}}else E=0,P=J(P,K,H);else E=c?1:0,P=J(P,K,H);return P},this.__bidiEngine__.setOptions=function(P){P&&(o=P.isInputVisual,u=P.isOutputVisual,c=P.isInputRtl,h=P.isOutputRtl,m=P.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],a=new s.__bidiEngine__({isInputVisual:!0});s.API.events.push(["postProcessText",function(n){var r=n.text;n.x,n.y;var i=n.options||{};n.mutex,i.lang;var o=[];if(i.isInputVisual=typeof i.isInputVisual!="boolean"||i.isInputVisual,a.setOptions(i),Object.prototype.toString.call(r)==="[object Array]"){var c=0;for(o=[],c=0;c<r.length;c+=1)Object.prototype.toString.call(r[c])==="[object Array]"?o.push([a.doBidiReorder(r[c][0]),r[c][1],r[c][2]]):o.push([a.doBidiReorder(r[c])]);n.text=o}else n.text=a.doBidiReorder(r);a.setOptions({isInputVisual:!0})}])})(ts),ts.API.TTFFont=(function(){function s(t){var a;if(this.rawData=t,a=this.contents=new Qd(t),this.contents.pos=4,a.readString(4)==="ttcf")throw new Error("TTCF not supported.");a.pos=0,this.parse(),this.subset=new Bz(this),this.registerTTF()}return s.open=function(t){return new s(t)},s.prototype.parse=function(){return this.directory=new Sz(this.contents),this.head=new Az(this),this.name=new Lz(this),this.cmap=new XA(this),this.toUnicode={},this.hhea=new kz(this),this.maxp=new Pz(this),this.hmtx=new Fz(this),this.post=new Ez(this),this.os2=new Dz(this),this.loca=new Rz(this),this.glyf=new Iz(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},s.prototype.registerTTF=function(){var t,a,n,r,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,c,u,h;for(h=[],o=0,c=(u=this.bbox).length;o<c;o++)t=u[o],h.push(Math.round(t*this.scaleFactor));return h}).call(this),this.stemV=0,this.post.exists?(n=255&(r=this.post.italic_angle),32768&(a=r>>16)&&(a=-(1+(65535^a))),this.italicAngle=+(a+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(i=this.familyClass)===1||i===2||i===3||i===4||i===5||i===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},s.prototype.characterToGlyph=function(t){var a;return((a=this.cmap.unicode)!=null?a.codeMap[t]:void 0)||0},s.prototype.widthOfGlyph=function(t){var a;return a=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*a},s.prototype.widthOfString=function(t,a,n){var r,i,o,c;for(o=0,i=0,c=(t=""+t).length;0<=c?i<c:i>c;i=0<=c?++i:--i)r=t.charCodeAt(i),o+=this.widthOfGlyph(this.characterToGlyph(r))+n*(1e3/a)||0;return o*(a/1e3)},s.prototype.lineHeight=function(t,a){var n;return a==null&&(a=!1),n=a?this.lineGap:0,(this.ascender+n-this.decender)/1e3*t},s})();var So,Qd=(function(){function s(t){this.data=t??[],this.pos=0,this.length=this.data.length}return s.prototype.readByte=function(){return this.data[this.pos++]},s.prototype.writeByte=function(t){return this.data[this.pos++]=t},s.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},s.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},s.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},s.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},s.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},s.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},s.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},s.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},s.prototype.readString=function(t){var a,n;for(n=[],a=0;0<=t?a<t:a>t;a=0<=t?++a:--a)n[a]=String.fromCharCode(this.readByte());return n.join("")},s.prototype.writeString=function(t){var a,n,r;for(r=[],a=0,n=t.length;0<=n?a<n:a>n;a=0<=n?++a:--a)r.push(this.writeByte(t.charCodeAt(a)));return r},s.prototype.readShort=function(){return this.readInt16()},s.prototype.writeShort=function(t){return this.writeInt16(t)},s.prototype.readLongLong=function(){var t,a,n,r,i,o,c,u;return t=this.readByte(),a=this.readByte(),n=this.readByte(),r=this.readByte(),i=this.readByte(),o=this.readByte(),c=this.readByte(),u=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^a)+1099511627776*(255^n)+4294967296*(255^r)+16777216*(255^i)+65536*(255^o)+256*(255^c)+(255^u)+1):72057594037927940*t+281474976710656*a+1099511627776*n+4294967296*r+16777216*i+65536*o+256*c+u},s.prototype.writeLongLong=function(t){var a,n;return a=Math.floor(t/4294967296),n=4294967295&t,this.writeByte(a>>24&255),this.writeByte(a>>16&255),this.writeByte(a>>8&255),this.writeByte(255&a),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},s.prototype.readInt=function(){return this.readInt32()},s.prototype.writeInt=function(t){return this.writeInt32(t)},s.prototype.read=function(t){var a,n;for(a=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)a.push(this.readByte());return a},s.prototype.write=function(t){var a,n,r,i;for(i=[],n=0,r=t.length;n<r;n++)a=t[n],i.push(this.writeByte(a));return i},s})(),Sz=(function(){var s;function t(a){var n,r,i;for(this.scalarType=a.readInt(),this.tableCount=a.readShort(),this.searchRange=a.readShort(),this.entrySelector=a.readShort(),this.rangeShift=a.readShort(),this.tables={},r=0,i=this.tableCount;0<=i?r<i:r>i;r=0<=i?++r:--r)n={tag:a.readString(4),checksum:a.readInt(),offset:a.readInt(),length:a.readInt()},this.tables[n.tag]=n}return t.prototype.encode=function(a){var n,r,i,o,c,u,h,m,p,y,g,j,b;for(b in g=Object.keys(a).length,u=Math.log(2),p=16*Math.floor(Math.log(g)/u),o=Math.floor(p/u),m=16*g-p,(r=new Qd).writeInt(this.scalarType),r.writeShort(g),r.writeShort(p),r.writeShort(o),r.writeShort(m),i=16*g,h=r.pos+i,c=null,j=[],a)for(y=a[b],r.writeString(b),r.writeInt(s(y)),r.writeInt(h),r.writeInt(y.length),j=j.concat(y),b==="head"&&(c=h),h+=y.length;h%4;)j.push(0),h++;return r.write(j),n=2981146554-s(r.data),r.pos=c+8,r.writeUInt32(n),r.data},s=function(a){var n,r,i,o;for(a=GA.call(a);a.length%4;)a.push(0);for(i=new Qd(a),r=0,n=0,o=a.length;n<o;n=n+=4)r+=i.readUInt32();return 4294967295&r},t})(),Cz={}.hasOwnProperty,ic=function(s,t){for(var a in t)Cz.call(t,a)&&(s[a]=t[a]);function n(){this.constructor=s}return n.prototype=t.prototype,s.prototype=new n,s.__super__=t.prototype,s};So=(function(){function s(t){var a;this.file=t,a=this.file.directory.tables[this.tag],this.exists=!!a,a&&(this.offset=a.offset,this.length=a.length,this.parse(this.file.contents))}return s.prototype.parse=function(){},s.prototype.encode=function(){},s.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},s})();var Az=(function(){function s(){return s.__super__.constructor.apply(this,arguments)}return ic(s,So),s.prototype.tag="head",s.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},s.prototype.encode=function(t){var a;return(a=new Qd).writeInt(this.version),a.writeInt(this.revision),a.writeInt(this.checkSumAdjustment),a.writeInt(this.magicNumber),a.writeShort(this.flags),a.writeShort(this.unitsPerEm),a.writeLongLong(this.created),a.writeLongLong(this.modified),a.writeShort(this.xMin),a.writeShort(this.yMin),a.writeShort(this.xMax),a.writeShort(this.yMax),a.writeShort(this.macStyle),a.writeShort(this.lowestRecPPEM),a.writeShort(this.fontDirectionHint),a.writeShort(t),a.writeShort(this.glyphDataFormat),a.data},s})(),D_=(function(){function s(t,a){var n,r,i,o,c,u,h,m,p,y,g,j,b,N,v,S,E;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=a+t.readInt(),p=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(u=0;u<256;++u)this.codeMap[u]=t.readByte();break;case 4:for(g=t.readUInt16(),y=g/2,t.pos+=6,i=(function(){var L,z;for(z=[],u=L=0;0<=y?L<y:L>y;u=0<=y?++L:--L)z.push(t.readUInt16());return z})(),t.pos+=2,b=(function(){var L,z;for(z=[],u=L=0;0<=y?L<y:L>y;u=0<=y?++L:--L)z.push(t.readUInt16());return z})(),h=(function(){var L,z;for(z=[],u=L=0;0<=y?L<y:L>y;u=0<=y?++L:--L)z.push(t.readUInt16());return z})(),m=(function(){var L,z;for(z=[],u=L=0;0<=y?L<y:L>y;u=0<=y?++L:--L)z.push(t.readUInt16());return z})(),r=(this.length-t.pos+this.offset)/2,c=(function(){var L,z;for(z=[],u=L=0;0<=r?L<r:L>r;u=0<=r?++L:--L)z.push(t.readUInt16());return z})(),u=v=0,E=i.length;v<E;u=++v)for(N=i[u],n=S=j=b[u];j<=N?S<=N:S>=N;n=j<=N?++S:--S)m[u]===0?o=n+h[u]:(o=c[m[u]/2+(n-j)-(y-u)]||0)!==0&&(o+=h[u]),this.codeMap[n]=65535&o}t.pos=p}return s.encode=function(t,a){var n,r,i,o,c,u,h,m,p,y,g,j,b,N,v,S,E,L,z,V,te,q,B,J,P,K,H,se,X,R,Q,Y,$,me,D,U,le,de,G,je,De,Pe,ke,Ye,Qe,et;switch(se=new Qd,o=Object.keys(t).sort(function(Xe,re){return Xe-re}),a){case"macroman":for(b=0,N=(function(){var Xe=[];for(j=0;j<256;++j)Xe.push(0);return Xe})(),S={0:0},i={},X=0,$=o.length;X<$;X++)S[ke=t[r=o[X]]]==null&&(S[ke]=++b),i[r]={old:t[r],new:S[t[r]]},N[r]=S[t[r]];return se.writeUInt16(1),se.writeUInt16(0),se.writeUInt32(12),se.writeUInt16(0),se.writeUInt16(262),se.writeUInt16(0),se.write(N),{charMap:i,subtable:se.data,maxGlyphID:b+1};case"unicode":for(K=[],p=[],E=0,S={},n={},v=h=null,R=0,me=o.length;R<me;R++)S[z=t[r=o[R]]]==null&&(S[z]=++E),n[r]={old:z,new:S[z]},c=S[z]-r,v!=null&&c===h||(v&&p.push(v),K.push(r),h=c),v=r;for(v&&p.push(v),p.push(65535),K.push(65535),J=2*(B=K.length),q=2*Math.pow(Math.log(B)/Math.LN2,2),y=Math.log(q/2)/Math.LN2,te=2*B-q,u=[],V=[],g=[],j=Q=0,D=K.length;Q<D;j=++Q){if(P=K[j],m=p[j],P===65535){u.push(0),V.push(0);break}if(P-(H=n[P].new)>=32768)for(u.push(0),V.push(2*(g.length+B-j)),r=Y=P;P<=m?Y<=m:Y>=m;r=P<=m?++Y:--Y)g.push(n[r].new);else u.push(H-P),V.push(0)}for(se.writeUInt16(3),se.writeUInt16(1),se.writeUInt32(12),se.writeUInt16(4),se.writeUInt16(16+8*B+2*g.length),se.writeUInt16(0),se.writeUInt16(J),se.writeUInt16(q),se.writeUInt16(y),se.writeUInt16(te),De=0,U=p.length;De<U;De++)r=p[De],se.writeUInt16(r);for(se.writeUInt16(0),Pe=0,le=K.length;Pe<le;Pe++)r=K[Pe],se.writeUInt16(r);for(Ye=0,de=u.length;Ye<de;Ye++)c=u[Ye],se.writeUInt16(c);for(Qe=0,G=V.length;Qe<G;Qe++)L=V[Qe],se.writeUInt16(L);for(et=0,je=g.length;et<je;et++)b=g[et],se.writeUInt16(b);return{charMap:n,subtable:se.data,maxGlyphID:E+1}}},s})(),XA=(function(){function s(){return s.__super__.constructor.apply(this,arguments)}return ic(s,So),s.prototype.tag="cmap",s.prototype.parse=function(t){var a,n,r;for(t.pos=this.offset,this.version=t.readUInt16(),r=t.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=r?n<r:n>r;n=0<=r?++n:--n)a=new D_(t,this.offset),this.tables.push(a),a.isUnicode&&this.unicode==null&&(this.unicode=a);return!0},s.encode=function(t,a){var n,r;return a==null&&(a="macroman"),n=D_.encode(t,a),(r=new Qd).writeUInt16(0),r.writeUInt16(1),n.table=r.data.concat(n.subtable),n},s})(),kz=(function(){function s(){return s.__super__.constructor.apply(this,arguments)}return ic(s,So),s.prototype.tag="hhea",s.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},s})(),Dz=(function(){function s(){return s.__super__.constructor.apply(this,arguments)}return ic(s,So),s.prototype.tag="OS/2",s.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=(function(){var a,n;for(n=[],a=0;a<10;++a)n.push(t.readByte());return n})(),this.charRange=(function(){var a,n;for(n=[],a=0;a<4;++a)n.push(t.readInt());return n})(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=(function(){var a,n;for(n=[],a=0;a<2;a=++a)n.push(t.readInt());return n})(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},s})(),Ez=(function(){function s(){return s.__super__.constructor.apply(this,arguments)}return ic(s,So),s.prototype.tag="post",s.prototype.parse=function(t){var a,n,r;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:case 196608:break;case 131072:var i;for(n=t.readUInt16(),this.glyphNameIndex=[],i=0;0<=n?i<n:i>n;i=0<=n?++i:--i)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],r=[];t.pos<this.offset+this.length;)a=t.readByte(),r.push(this.names.push(t.readString(a)));return r;case 151552:return n=t.readUInt16(),this.offsets=t.read(n);case 262144:return this.map=(function(){var o,c,u;for(u=[],i=o=0,c=this.file.maxp.numGlyphs;0<=c?o<c:o>c;i=0<=c?++o:--o)u.push(t.readUInt32());return u}).call(this)}},s})(),Tz=function(s,t){this.raw=s,this.length=s.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},Lz=(function(){function s(){return s.__super__.constructor.apply(this,arguments)}return ic(s,So),s.prototype.tag="name",s.prototype.parse=function(t){var a,n,r,i,o,c,u,h,m,p,y;for(t.pos=this.offset,t.readShort(),a=t.readShort(),c=t.readShort(),n=[],i=0;0<=a?i<a:i>a;i=0<=a?++i:--i)n.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+c+t.readShort()});for(u={},i=m=0,p=n.length;m<p;i=++m)r=n[i],t.pos=r.offset,h=t.readString(r.length),o=new Tz(h,r),u[y=r.nameID]==null&&(u[y]=[]),u[r.nameID].push(o);this.strings=u,this.copyright=u[0],this.fontFamily=u[1],this.fontSubfamily=u[2],this.uniqueSubfamily=u[3],this.fontName=u[4],this.version=u[5];try{this.postscriptName=u[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=u[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=u[7],this.manufacturer=u[8],this.designer=u[9],this.description=u[10],this.vendorUrl=u[11],this.designerUrl=u[12],this.license=u[13],this.licenseUrl=u[14],this.preferredFamily=u[15],this.preferredSubfamily=u[17],this.compatibleFull=u[18],this.sampleText=u[19]},s})(),Pz=(function(){function s(){return s.__super__.constructor.apply(this,arguments)}return ic(s,So),s.prototype.tag="maxp",s.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},s})(),Fz=(function(){function s(){return s.__super__.constructor.apply(this,arguments)}return ic(s,So),s.prototype.tag="hmtx",s.prototype.parse=function(t){var a,n,r,i,o,c,u;for(t.pos=this.offset,this.metrics=[],a=0,c=this.file.hhea.numberOfMetrics;0<=c?a<c:a>c;a=0<=c?++a:--a)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(r=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var h,m;for(m=[],a=h=0;0<=r?h<r:h>r;a=0<=r?++h:--h)m.push(t.readInt16());return m})(),this.widths=(function(){var h,m,p,y;for(y=[],h=0,m=(p=this.metrics).length;h<m;h++)i=p[h],y.push(i.advance);return y}).call(this),n=this.widths[this.widths.length-1],u=[],a=o=0;0<=r?o<r:o>r;a=0<=r?++o:--o)u.push(this.widths.push(n));return u},s.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},s})(),GA=[].slice,Iz=(function(){function s(){return s.__super__.constructor.apply(this,arguments)}return ic(s,So),s.prototype.tag="glyf",s.prototype.parse=function(){return this.cache={}},s.prototype.glyphFor=function(t){var a,n,r,i,o,c,u,h,m,p;return t in this.cache?this.cache[t]:(i=this.file.loca,a=this.file.contents,n=i.indexOf(t),(r=i.lengthOf(t))===0?this.cache[t]=null:(a.pos=this.offset+n,o=(c=new Qd(a.read(r))).readShort(),h=c.readShort(),p=c.readShort(),u=c.readShort(),m=c.readShort(),this.cache[t]=o===-1?new Mz(c,h,p,u,m):new Oz(c,o,h,p,u,m),this.cache[t]))},s.prototype.encode=function(t,a,n){var r,i,o,c,u;for(o=[],i=[],c=0,u=a.length;c<u;c++)r=t[a[c]],i.push(o.length),r&&(o=o.concat(r.encode(n)));return i.push(o.length),{table:o,offsets:i}},s})(),Oz=(function(){function s(t,a,n,r,i,o){this.raw=t,this.numberOfContours=a,this.xMin=n,this.yMin=r,this.xMax=i,this.yMax=o,this.compound=!1}return s.prototype.encode=function(){return this.raw.data},s})(),Mz=(function(){function s(t,a,n,r,i){var o,c;for(this.raw=t,this.xMin=a,this.yMin=n,this.xMax=r,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;c=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&c;)o.pos+=1&c?4:2,128&c?o.pos+=8:64&c?o.pos+=4:8&c&&(o.pos+=2)}return s.prototype.encode=function(){var t,a,n;for(a=new Qd(GA.call(this.raw.data)),t=0,n=this.glyphIDs.length;t<n;++t)a.pos=this.glyphOffsets[t];return a.data},s})(),Rz=(function(){function s(){return s.__super__.constructor.apply(this,arguments)}return ic(s,So),s.prototype.tag="loca",s.prototype.parse=function(t){var a,n;return t.pos=this.offset,a=this.file.head.indexToLocFormat,this.offsets=a===0?(function(){var r,i;for(i=[],n=0,r=this.length;n<r;n+=2)i.push(2*t.readUInt16());return i}).call(this):(function(){var r,i;for(i=[],n=0,r=this.length;n<r;n+=4)i.push(t.readUInt32());return i}).call(this)},s.prototype.indexOf=function(t){return this.offsets[t]},s.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},s.prototype.encode=function(t,a){for(var n=new Uint32Array(this.offsets.length),r=0,i=0,o=0;o<n.length;++o)if(n[o]=r,i<a.length&&a[i]==o){++i,n[o]=r;var c=this.offsets[o],u=this.offsets[o+1]-c;u>0&&(r+=u)}for(var h=new Array(4*n.length),m=0;m<n.length;++m)h[4*m+3]=255&n[m],h[4*m+2]=(65280&n[m])>>8,h[4*m+1]=(16711680&n[m])>>16,h[4*m]=(4278190080&n[m])>>24;return h},s})(),Bz=(function(){function s(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return s.prototype.generateCmap=function(){var t,a,n,r,i;for(a in r=this.font.cmap.tables[0].codeMap,t={},i=this.subset)n=i[a],t[a]=r[n];return t},s.prototype.glyphsFor=function(t){var a,n,r,i,o,c,u;for(r={},o=0,c=t.length;o<c;o++)r[i=t[o]]=this.font.glyf.glyphFor(i);for(i in a=[],r)(n=r[i])!=null&&n.compound&&a.push.apply(a,n.glyphIDs);if(a.length>0)for(i in u=this.glyphsFor(a))n=u[i],r[i]=n;return r},s.prototype.encode=function(t,a){var n,r,i,o,c,u,h,m,p,y,g,j,b,N,v;for(r in n=XA.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(t),g={0:0},v=n.charMap)g[(u=v[r]).old]=u.new;for(j in y=n.maxGlyphID,o)j in g||(g[j]=y++);return m=(function(S){var E,L;for(E in L={},S)L[S[E]]=E;return L})(g),p=Object.keys(m).sort(function(S,E){return S-E}),b=(function(){var S,E,L;for(L=[],S=0,E=p.length;S<E;S++)c=p[S],L.push(m[c]);return L})(),i=this.font.glyf.encode(o,b,g),h=this.font.loca.encode(i.offsets,b),N={cmap:this.font.cmap.raw(),glyf:i.table,loca:h,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(a)},this.font.os2.exists&&(N["OS/2"]=this.font.os2.raw()),this.font.directory.encode(N)},s})();ts.API.PDFObject=(function(){var s;function t(){}return s=function(a,n){return(Array(n+1).join("0")+a).slice(-n)},t.convert=function(a){var n,r,i,o;if(Array.isArray(a))return"["+(function(){var c,u,h;for(h=[],c=0,u=a.length;c<u;c++)n=a[c],h.push(t.convert(n));return h})().join(" ")+"]";if(typeof a=="string")return"/"+a;if(a?.isString)return"("+a+")";if(a instanceof Date)return"(D:"+s(a.getUTCFullYear(),4)+s(a.getUTCMonth(),2)+s(a.getUTCDate(),2)+s(a.getUTCHours(),2)+s(a.getUTCMinutes(),2)+s(a.getUTCSeconds(),2)+"Z)";if({}.toString.call(a)==="[object Object]"){for(r in i=["<<"],a)o=a[r],i.push("/"+r+" "+t.convert(o));return i.push(">>"),i.join(`
`)}return""+a},t})();function QA(s,t,a,n,r){n=n||{};var i=1.15,o=r.internal.scaleFactor,c=r.internal.getFontSize()/o,u=r.getLineHeightFactor?r.getLineHeightFactor():i,h=c*u,m=/\r\n|\r|\n/g,p="",y=1;if((n.valign==="middle"||n.valign==="bottom"||n.halign==="center"||n.halign==="right")&&(p=typeof s=="string"?s.split(m):s,y=p.length||1),a+=c*(2-i),n.valign==="middle"?a-=y/2*h:n.valign==="bottom"&&(a-=y*h),n.halign==="center"||n.halign==="right"){var g=c;if(n.halign==="center"&&(g*=.5),p&&y>=1){for(var j=0;j<p.length;j++)r.text(p[j],t-r.getStringUnitWidth(p[j])*g,a),a+=h;return r}t-=r.getStringUnitWidth(s)*g}return n.halign==="justify"?r.text(s,t,a,{maxWidth:n.maxWidth||100,align:"justify"}):r.text(s,t,a),r}var E_={},Mh=(function(){function s(t){this.jsPDFDocument=t,this.userStyles={textColor:t.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:t.internal.getFontSize(),fontStyle:t.internal.getFont().fontStyle,font:t.internal.getFont().fontName,lineWidth:t.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:t.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return s.setDefaults=function(t,a){a===void 0&&(a=null),a?a.__autoTableDocumentDefaults=t:E_=t},s.unifyColor=function(t){return Array.isArray(t)?t:typeof t=="number"?[t,t,t]:typeof t=="string"?[t]:null},s.prototype.applyStyles=function(t,a){var n,r,i;a===void 0&&(a=!1),t.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(t.fontStyle);var o=this.jsPDFDocument.internal.getFont(),c=o.fontStyle,u=o.fontName;if(t.font&&(u=t.font),t.fontStyle){c=t.fontStyle;var h=this.getFontList()[u];h&&h.indexOf(c)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(h[0]),c=h[0])}if(this.jsPDFDocument.setFont(u,c),t.fontSize&&this.jsPDFDocument.setFontSize(t.fontSize),!a){var m=s.unifyColor(t.fillColor);m&&(n=this.jsPDFDocument).setFillColor.apply(n,m),m=s.unifyColor(t.textColor),m&&(r=this.jsPDFDocument).setTextColor.apply(r,m),m=s.unifyColor(t.lineColor),m&&(i=this.jsPDFDocument).setDrawColor.apply(i,m),typeof t.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(t.lineWidth)}},s.prototype.splitTextToSize=function(t,a,n){return this.jsPDFDocument.splitTextToSize(t,a,n)},s.prototype.rect=function(t,a,n,r,i){return this.jsPDFDocument.rect(t,a,n,r,i)},s.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},s.prototype.getTextWidth=function(t){return this.jsPDFDocument.getTextWidth(t)},s.prototype.getDocument=function(){return this.jsPDFDocument},s.prototype.setPage=function(t){this.jsPDFDocument.setPage(t)},s.prototype.addPage=function(){return this.jsPDFDocument.addPage()},s.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},s.prototype.getGlobalOptions=function(){return E_||{}},s.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},s.prototype.pageSize=function(){var t=this.jsPDFDocument.internal.pageSize;return t.width==null&&(t={width:t.getWidth(),height:t.getHeight()}),t},s.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},s.prototype.getLineHeightFactor=function(){var t=this.jsPDFDocument;return t.getLineHeightFactor?t.getLineHeightFactor():1.15},s.prototype.getLineHeight=function(t){return t/this.scaleFactor()*this.getLineHeightFactor()},s.prototype.pageNumber=function(){var t=this.jsPDFDocument.internal.getCurrentPageInfo();return t?t.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},s})(),fv=function(s,t){return fv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,n){a.__proto__=n}||function(a,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(a[r]=n[r])},fv(s,t)};function JA(s,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");fv(s,t);function a(){this.constructor=s}s.prototype=t===null?Object.create(t):(a.prototype=t.prototype,new a)}var ZA=(function(s){JA(t,s);function t(a){var n=s.call(this)||this;return n._element=a,n}return t})(Array);function zz(s){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/s,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function qz(s){var t={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return t[s]}function Ug(s,t,a){a.applyStyles(t,!0);var n=Array.isArray(s)?s:[s],r=n.map(function(i){return a.getTextWidth(i)}).reduce(function(i,o){return Math.max(i,o)},0);return r}function ek(s,t,a,n){var r=t.settings.tableLineWidth,i=t.settings.tableLineColor;s.applyStyles({lineWidth:r,lineColor:i});var o=tk(r,!1);o&&s.rect(a.x,a.y,t.getWidth(s.pageSize().width),n.y-a.y,o)}function tk(s,t){var a=s>0,n=t||t===0;return a&&n?"DF":a?"S":n?"F":null}function px(s,t){var a,n,r,i;if(s=s||t,Array.isArray(s)){if(s.length>=4)return{top:s[0],right:s[1],bottom:s[2],left:s[3]};if(s.length===3)return{top:s[0],right:s[1],bottom:s[2],left:s[1]};if(s.length===2)return{top:s[0],right:s[1],bottom:s[0],left:s[1]};s.length===1?s=s[0]:s=t}return typeof s=="object"?(typeof s.vertical=="number"&&(s.top=s.vertical,s.bottom=s.vertical),typeof s.horizontal=="number"&&(s.right=s.horizontal,s.left=s.horizontal),{left:(a=s.left)!==null&&a!==void 0?a:t,top:(n=s.top)!==null&&n!==void 0?n:t,right:(r=s.right)!==null&&r!==void 0?r:t,bottom:(i=s.bottom)!==null&&i!==void 0?i:t}):(typeof s!="number"&&(s=t),{top:s,right:s,bottom:s,left:s})}function sk(s,t){var a=px(t.settings.margin,0);return s.pageSize().width-(a.left+a.right)}function Uz(s,t,a,n,r){var i={},o=1.3333333333333333,c=wy(t,function(E){return r.getComputedStyle(E).backgroundColor});c!=null&&(i.fillColor=c);var u=wy(t,function(E){return r.getComputedStyle(E).color});u!=null&&(i.textColor=u);var h=$z(n,a);h&&(i.cellPadding=h);var m="borderTopColor",p=o*a,y=n.borderTopWidth;if(n.borderBottomWidth===y&&n.borderRightWidth===y&&n.borderLeftWidth===y){var g=(parseFloat(y)||0)/p;g&&(i.lineWidth=g)}else i.lineWidth={top:(parseFloat(n.borderTopWidth)||0)/p,right:(parseFloat(n.borderRightWidth)||0)/p,bottom:(parseFloat(n.borderBottomWidth)||0)/p,left:(parseFloat(n.borderLeftWidth)||0)/p},i.lineWidth.top||(i.lineWidth.right?m="borderRightColor":i.lineWidth.bottom?m="borderBottomColor":i.lineWidth.left&&(m="borderLeftColor"));var j=wy(t,function(E){return r.getComputedStyle(E)[m]});j!=null&&(i.lineColor=j);var b=["left","right","center","justify"];b.indexOf(n.textAlign)!==-1&&(i.halign=n.textAlign),b=["middle","bottom","top"],b.indexOf(n.verticalAlign)!==-1&&(i.valign=n.verticalAlign);var N=parseInt(n.fontSize||"");isNaN(N)||(i.fontSize=N/o);var v=Hz(n);v&&(i.fontStyle=v);var S=(n.fontFamily||"").toLowerCase();return s.indexOf(S)!==-1&&(i.font=S),i}function Hz(s){var t="";return(s.fontWeight==="bold"||s.fontWeight==="bolder"||parseInt(s.fontWeight)>=700)&&(t="bold"),(s.fontStyle==="italic"||s.fontStyle==="oblique")&&(t+="italic"),t}function wy(s,t){var a=ak(s,t);if(!a)return null;var n=a.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!n||!Array.isArray(n))return null;var r=[parseInt(n[1]),parseInt(n[2]),parseInt(n[3])],i=parseInt(n[4]);return i===0||isNaN(r[0])||isNaN(r[1])||isNaN(r[2])?null:r}function ak(s,t){var a=t(s);return a==="rgba(0, 0, 0, 0)"||a==="transparent"||a==="initial"||a==="inherit"?s.parentElement==null?null:ak(s.parentElement,t):a}function $z(s,t){var a=[s.paddingTop,s.paddingRight,s.paddingBottom,s.paddingLeft],n=96/(72/t),r=(parseInt(s.lineHeight)-parseInt(s.fontSize))/t/2,i=a.map(function(c){return parseInt(c||"0")/n}),o=px(i,0);return r>o.top&&(o.top=r),r>o.bottom&&(o.bottom=r),o}function nk(s,t,a,n,r){var i,o;n===void 0&&(n=!1),r===void 0&&(r=!1);var c;typeof t=="string"?c=a.document.querySelector(t):c=t;var u=Object.keys(s.getFontList()),h=s.scaleFactor(),m=[],p=[],y=[];if(!c)return console.error("Html table could not be found with input: ",t),{head:m,body:p,foot:y};for(var g=0;g<c.rows.length;g++){var j=c.rows[g],b=(o=(i=j?.parentElement)===null||i===void 0?void 0:i.tagName)===null||o===void 0?void 0:o.toLowerCase(),N=Vz(u,h,a,j,n,r);N&&(b==="thead"?m.push(N):b==="tfoot"?y.push(N):p.push(N))}return{head:m,body:p,foot:y}}function Vz(s,t,a,n,r,i){for(var o=new ZA(n),c=0;c<n.cells.length;c++){var u=n.cells[c],h=a.getComputedStyle(u);if(r||h.display!=="none"){var m=void 0;i&&(m=Uz(s,u,t,h,a)),o.push({rowSpan:u.rowSpan,colSpan:u.colSpan,styles:m,_element:u,content:Wz(u)})}}var p=a.getComputedStyle(n);if(o.length>0&&(r||p.display!=="none"))return o}function Wz(s){var t=s.cloneNode(!0);return t.innerHTML=t.innerHTML.replace(/\n/g,"").replace(/ +/g," "),t.innerHTML=t.innerHTML.split(/<br.*?>/).map(function(a){return a.trim()}).join(`
`),t.innerText||t.textContent||""}function Yz(s,t,a){for(var n=0,r=[s,t,a];n<r.length;n++){var i=r[n];i&&typeof i!="object"&&console.error("The options parameter should be of type object, is: "+typeof i),i.startY&&typeof i.startY!="number"&&(console.error("Invalid value for startY option",i.startY),delete i.startY)}}function Zc(s,t,a,n,r){if(s==null)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(s),o=1;o<arguments.length;o++){var c=arguments[o];if(c!=null)for(var u in c)Object.prototype.hasOwnProperty.call(c,u)&&(i[u]=c[u])}return i}function rk(s,t){var a=new Mh(s),n=a.getDocumentOptions(),r=a.getGlobalOptions();Yz(r,n,t);var i=Zc({},r,n,t),o;typeof window<"u"&&(o=window);var c=Kz(r,n,t),u=Xz(r,n,t),h=Gz(a,i),m=Jz(a,i,o);return{id:t.tableId,content:m,hooks:u,styles:c,settings:h}}function Kz(s,t,a){for(var n={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},r=function(u){if(u==="columnStyles"){var h=s[u],m=t[u],p=a[u];n.columnStyles=Zc({},h,m,p)}else{var y=[s,t,a],g=y.map(function(j){return j[u]||{}});n[u]=Zc({},g[0],g[1],g[2])}},i=0,o=Object.keys(n);i<o.length;i++){var c=o[i];r(c)}return n}function Xz(s,t,a){for(var n=[s,t,a],r={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},i=0,o=n;i<o.length;i++){var c=o[i];c.didParseCell&&r.didParseCell.push(c.didParseCell),c.willDrawCell&&r.willDrawCell.push(c.willDrawCell),c.didDrawCell&&r.didDrawCell.push(c.didDrawCell),c.willDrawPage&&r.willDrawPage.push(c.willDrawPage),c.didDrawPage&&r.didDrawPage.push(c.didDrawPage)}return r}function Gz(s,t){var a,n,r,i,o,c,u,h,m,p,y,g,j=px(t.margin,40/s.scaleFactor()),b=(a=Qz(s,t.startY))!==null&&a!==void 0?a:j.top,N;t.showFoot===!0?N="everyPage":t.showFoot===!1?N="never":N=(n=t.showFoot)!==null&&n!==void 0?n:"everyPage";var v;t.showHead===!0?v="everyPage":t.showHead===!1?v="never":v=(r=t.showHead)!==null&&r!==void 0?r:"everyPage";var S=(i=t.useCss)!==null&&i!==void 0?i:!1,E=t.theme||(S?"plain":"striped"),L=!!t.horizontalPageBreak,z=(o=t.horizontalPageBreakRepeat)!==null&&o!==void 0?o:null;return{includeHiddenHtml:(c=t.includeHiddenHtml)!==null&&c!==void 0?c:!1,useCss:S,theme:E,startY:b,margin:j,pageBreak:(u=t.pageBreak)!==null&&u!==void 0?u:"auto",rowPageBreak:(h=t.rowPageBreak)!==null&&h!==void 0?h:"auto",tableWidth:(m=t.tableWidth)!==null&&m!==void 0?m:"auto",showHead:v,showFoot:N,tableLineWidth:(p=t.tableLineWidth)!==null&&p!==void 0?p:0,tableLineColor:(y=t.tableLineColor)!==null&&y!==void 0?y:200,horizontalPageBreak:L,horizontalPageBreakRepeat:z,horizontalPageBreakBehaviour:(g=t.horizontalPageBreakBehaviour)!==null&&g!==void 0?g:"afterAllRows"}}function Qz(s,t){var a=s.getLastAutoTable(),n=s.scaleFactor(),r=s.pageNumber(),i=!1;if(a&&a.startPageNumber){var o=a.startPageNumber+a.pageNumber-1;i=o===r}return typeof t=="number"?t:(t==null||t===!1)&&i&&a?.finalY!=null?a.finalY+20/n:null}function Jz(s,t,a){var n=t.head||[],r=t.body||[],i=t.foot||[];if(t.html){var o=t.includeHiddenHtml;if(a){var c=nk(s,t.html,a,o,t.useCss)||{};n=c.head||n,r=c.body||n,i=c.foot||n}else console.error("Cannot parse html in non browser environment")}var u=t.columns||Zz(n,r,i);return{columns:u,head:n,body:r,foot:i}}function Zz(s,t,a){var n=s[0]||t[0]||a[0]||[],r=[];return Object.keys(n).filter(function(i){return i!=="_element"}).forEach(function(i){var o=1,c;Array.isArray(n)?c=n[parseInt(i)]:c=n[i],typeof c=="object"&&!Array.isArray(c)&&(o=c?.colSpan||1);for(var u=0;u<o;u++){var h=void 0;Array.isArray(n)?h=r.length:h=i+(u>0?"_".concat(u):"");var m={dataKey:h};r.push(m)}}),r}var mv=(function(){function s(t,a,n){this.table=a,this.pageNumber=a.pageNumber,this.settings=a.settings,this.cursor=n,this.doc=t.getDocument()}return s})(),eq=(function(s){JA(t,s);function t(a,n,r,i,o,c){var u=s.call(this,a,n,c)||this;return u.cell=r,u.row=i,u.column=o,u.section=i.section,u}return t})(mv),tq=(function(){function s(t,a){this.pageNumber=1,this.id=t.id,this.settings=t.settings,this.styles=t.styles,this.hooks=t.hooks,this.columns=a.columns,this.head=a.head,this.body=a.body,this.foot=a.foot}return s.prototype.getHeadHeight=function(t){return this.head.reduce(function(a,n){return a+n.getMaxCellHeight(t)},0)},s.prototype.getFootHeight=function(t){return this.foot.reduce(function(a,n){return a+n.getMaxCellHeight(t)},0)},s.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},s.prototype.callCellHooks=function(t,a,n,r,i,o){for(var c=0,u=a;c<u.length;c++){var h=u[c],m=new eq(t,this,n,r,i,o),p=h(m)===!1;if(n.text=Array.isArray(n.text)?n.text:[n.text],p)return!1}return!0},s.prototype.callEndPageHooks=function(t,a){t.applyStyles(t.userStyles);for(var n=0,r=this.hooks.didDrawPage;n<r.length;n++){var i=r[n];i(new mv(t,this,a))}},s.prototype.callWillDrawPageHooks=function(t,a){for(var n=0,r=this.hooks.willDrawPage;n<r.length;n++){var i=r[n];i(new mv(t,this,a))}},s.prototype.getWidth=function(t){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var a=this.columns.reduce(function(r,i){return r+i.wrappedWidth},0);return a}else{var n=this.settings.margin;return t-n.left-n.right}},s})(),ik=(function(){function s(t,a,n,r,i){i===void 0&&(i=!1),this.height=0,this.raw=t,t instanceof ZA&&(this.raw=t._element,this.element=t._element),this.index=a,this.section=n,this.cells=r,this.spansMultiplePages=i}return s.prototype.getMaxCellHeight=function(t){var a=this;return t.reduce(function(n,r){var i;return Math.max(n,((i=a.cells[r.index])===null||i===void 0?void 0:i.height)||0)},0)},s.prototype.hasRowSpan=function(t){var a=this;return t.filter(function(n){var r=a.cells[n.index];return r?r.rowSpan>1:!1}).length>0},s.prototype.canEntireRowFit=function(t,a){return this.getMaxCellHeight(a)<=t},s.prototype.getMinimumRowHeight=function(t,a){var n=this;return t.reduce(function(r,i){var o=n.cells[i.index];if(!o)return 0;var c=a.getLineHeight(o.styles.fontSize),u=o.padding("vertical"),h=u+c;return h>r?h:r},0)},s})(),lk=(function(){function s(t,a,n){var r;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=a,this.section=n,this.raw=t;var i=t;t!=null&&typeof t=="object"&&!Array.isArray(t)?(this.rowSpan=t.rowSpan||1,this.colSpan=t.colSpan||1,i=(r=t.content)!==null&&r!==void 0?r:t,t._element&&(this.raw=t._element)):(this.rowSpan=1,this.colSpan=1);var o=i!=null?""+i:"",c=/\r\n|\r|\n/g;this.text=o.split(c)}return s.prototype.getTextPos=function(){var t;if(this.styles.valign==="top")t=this.y+this.padding("top");else if(this.styles.valign==="bottom")t=this.y+this.height-this.padding("bottom");else{var a=this.height-this.padding("vertical");t=this.y+a/2+this.padding("top")}var n;if(this.styles.halign==="right")n=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var r=this.width-this.padding("horizontal");n=this.x+r/2+this.padding("left")}else n=this.x+this.padding("left");return{x:n,y:t}},s.prototype.getContentHeight=function(t,a){a===void 0&&(a=1.15);var n=Array.isArray(this.text)?this.text.length:1,r=this.styles.fontSize/t*a,i=n*r+this.padding("vertical");return Math.max(i,this.styles.minCellHeight)},s.prototype.padding=function(t){var a=px(this.styles.cellPadding,0);return t==="vertical"?a.top+a.bottom:t==="horizontal"?a.left+a.right:a[t]},s})(),sq=(function(){function s(t,a,n){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=t,this.raw=a,this.index=n}return s.prototype.getMaxCustomCellWidth=function(t){for(var a=0,n=0,r=t.allRows();n<r.length;n++){var i=r[n],o=i.cells[this.index];o&&typeof o.styles.cellWidth=="number"&&(a=Math.max(a,o.styles.cellWidth))}return a},s})();function aq(s,t){nq(s,t);var a=[],n=0;t.columns.forEach(function(i){var o=i.getMaxCustomCellWidth(t);o?i.width=o:(i.width=i.wrappedWidth,a.push(i)),n+=i.width});var r=t.getWidth(s.pageSize().width)-n;r&&(r=pv(a,r,function(i){return Math.max(i.minReadableWidth,i.minWidth)})),r&&(r=pv(a,r,function(i){return i.minWidth})),r=Math.abs(r),!t.settings.horizontalPageBreak&&r>.1/s.scaleFactor()&&(r=r<1?r:Math.round(r),console.warn("Of the table content, ".concat(r," units width could not fit page"))),iq(t),lq(t,s),rq(t)}function nq(s,t){var a=s.scaleFactor(),n=t.settings.horizontalPageBreak,r=sk(s,t);t.allRows().forEach(function(i){for(var o=0,c=t.columns;o<c.length;o++){var u=c[o],h=i.cells[u.index];if(h){var m=t.hooks.didParseCell;t.callCellHooks(s,m,h,i,u,null);var p=h.padding("horizontal");h.contentWidth=Ug(h.text,h.styles,s)+p;var y=Ug(h.text.join(" ").split(/[^\S\u00A0]+/),h.styles,s);if(h.minReadableWidth=y+h.padding("horizontal"),typeof h.styles.cellWidth=="number")h.minWidth=h.styles.cellWidth,h.wrappedWidth=h.styles.cellWidth;else if(h.styles.cellWidth==="wrap"||n===!0)h.contentWidth>r?(h.minWidth=r,h.wrappedWidth=r):(h.minWidth=h.contentWidth,h.wrappedWidth=h.contentWidth);else{var g=10/a;h.minWidth=h.styles.minCellWidth||g,h.wrappedWidth=h.contentWidth,h.minWidth>h.wrappedWidth&&(h.wrappedWidth=h.minWidth)}}}}),t.allRows().forEach(function(i){for(var o=0,c=t.columns;o<c.length;o++){var u=c[o],h=i.cells[u.index];if(h&&h.colSpan===1)u.wrappedWidth=Math.max(u.wrappedWidth,h.wrappedWidth),u.minWidth=Math.max(u.minWidth,h.minWidth),u.minReadableWidth=Math.max(u.minReadableWidth,h.minReadableWidth);else{var m=t.styles.columnStyles[u.dataKey]||t.styles.columnStyles[u.index]||{},p=m.cellWidth||m.minCellWidth;p&&typeof p=="number"&&(u.minWidth=p,u.wrappedWidth=p)}h&&(h.colSpan>1&&!u.minWidth&&(u.minWidth=h.minWidth),h.colSpan>1&&!u.wrappedWidth&&(u.wrappedWidth=h.minWidth))}})}function pv(s,t,a){for(var n=t,r=s.reduce(function(g,j){return g+j.wrappedWidth},0),i=0;i<s.length;i++){var o=s[i],c=o.wrappedWidth/r,u=n*c,h=o.width+u,m=a(o),p=h<m?m:h;t-=p-o.width,o.width=p}if(t=Math.round(t*1e10)/1e10,t){var y=s.filter(function(g){return t<0?g.width>a(g):!0});y.length&&(t=pv(y,t,a))}return t}function rq(s){for(var t={},a=1,n=s.allRows(),r=0;r<n.length;r++)for(var i=n[r],o=0,c=s.columns;o<c.length;o++){var u=c[o],h=t[u.index];if(a>1)a--,delete i.cells[u.index];else if(h)h.cell.height+=i.height,a=h.cell.colSpan,delete i.cells[u.index],h.left--,h.left<=1&&delete t[u.index];else{var m=i.cells[u.index];if(!m)continue;if(m.height=i.height,m.rowSpan>1){var p=n.length-r,y=m.rowSpan>p?p:m.rowSpan;t[u.index]={cell:m,left:y,row:i}}}}}function iq(s){for(var t=s.allRows(),a=0;a<t.length;a++)for(var n=t[a],r=null,i=0,o=0,c=0;c<s.columns.length;c++){var u=s.columns[c];if(o-=1,o>1&&s.columns[c+1])i+=u.width,delete n.cells[u.index];else if(r){var h=r;delete n.cells[u.index],r=null,h.width=u.width+i}else{var h=n.cells[u.index];if(!h)continue;if(o=h.colSpan,i=0,h.colSpan>1){r=h,i+=u.width;continue}h.width=u.width+i}}}function lq(s,t){for(var a={count:0,height:0},n=0,r=s.allRows();n<r.length;n++){for(var i=r[n],o=0,c=s.columns;o<c.length;o++){var u=c[o],h=i.cells[u.index];if(h){t.applyStyles(h.styles,!0);var m=h.width-h.padding("horizontal");if(h.styles.overflow==="linebreak")h.text=t.splitTextToSize(h.text,m+1/t.scaleFactor(),{fontSize:h.styles.fontSize});else if(h.styles.overflow==="ellipsize")h.text=T_(h.text,m,h.styles,t,"...");else if(h.styles.overflow==="hidden")h.text=T_(h.text,m,h.styles,t,"");else if(typeof h.styles.overflow=="function"){var p=h.styles.overflow(h.text,m);typeof p=="string"?h.text=[p]:h.text=p}h.contentHeight=h.getContentHeight(t.scaleFactor(),t.getLineHeightFactor());var y=h.contentHeight/h.rowSpan;h.rowSpan>1&&a.count*a.height<y*h.rowSpan?a={height:y,count:h.rowSpan}:a&&a.count>0&&a.height>y&&(y=a.height),y>i.height&&(i.height=y)}}a.count--}}function T_(s,t,a,n,r){return s.map(function(i){return oq(i,t,a,n,r)})}function oq(s,t,a,n,r){var i=1e4*n.scaleFactor();if(t=Math.ceil(t*i)/i,t>=Ug(s,a,n))return s;for(;t<Ug(s+r,a,n)&&!(s.length<=1);)s=s.substring(0,s.length-1);return s.trim()+r}function ok(s,t){var a=new Mh(s),n=cq(t,a.scaleFactor()),r=new tq(t,n);return aq(a,r),a.applyStyles(a.userStyles),r}function cq(s,t){var a=s.content,n=uq(a.columns);if(a.head.length===0){var r=L_(n,"head");r&&a.head.push(r)}if(a.foot.length===0){var r=L_(n,"foot");r&&a.foot.push(r)}var i=s.settings.theme,o=s.styles;return{columns:n,head:_y("head",a.head,n,o,i,t),body:_y("body",a.body,n,o,i,t),foot:_y("foot",a.foot,n,o,i,t)}}function _y(s,t,a,n,r,i){var o={},c=t.map(function(u,h){for(var m=0,p={},y=0,g=0,j=0,b=a;j<b.length;j++){var N=b[j];if(o[N.index]==null||o[N.index].left===0)if(g===0){var v=void 0;Array.isArray(u)?v=u[N.index-y-m]:v=u[N.dataKey];var S={};typeof v=="object"&&!Array.isArray(v)&&(S=v?.styles||{});var E=hq(s,N,h,r,n,i,S),L=new lk(v,E,s);p[N.dataKey]=L,p[N.index]=L,g=L.colSpan-1,o[N.index]={left:L.rowSpan-1,times:g}}else g--,y++;else o[N.index].left--,g=o[N.index].times,m++}return new ik(u,h,s,p)});return c}function L_(s,t){var a={};return s.forEach(function(n){if(n.raw!=null){var r=dq(t,n.raw);r!=null&&(a[n.dataKey]=r)}}),Object.keys(a).length>0?a:null}function dq(s,t){if(s==="head"){if(typeof t=="object")return t.header||null;if(typeof t=="string"||typeof t=="number")return t}else if(s==="foot"&&typeof t=="object")return t.footer;return null}function uq(s){return s.map(function(t,a){var n,r;return typeof t=="object"?r=(n=t.dataKey)!==null&&n!==void 0?n:a:r=a,new sq(r,t,a)})}function hq(s,t,a,n,r,i,o){var c=qz(n),u;s==="head"?u=r.headStyles:s==="body"?u=r.bodyStyles:s==="foot"&&(u=r.footStyles);var h=Zc({},c.table,c[s],r.styles,u),m=r.columnStyles[t.dataKey]||r.columnStyles[t.index]||{},p=s==="body"?m:{},y=s==="body"&&a%2===0?Zc({},c.alternateRow,r.alternateRowStyles):{},g=zz(i),j=Zc({},g,h,y,p);return Zc(j,o)}function fq(s,t,a){var n;a===void 0&&(a={});var r=sk(s,t),i=new Map,o=[],c=[],u=[];Array.isArray(t.settings.horizontalPageBreakRepeat)?u=t.settings.horizontalPageBreakRepeat:(typeof t.settings.horizontalPageBreakRepeat=="string"||typeof t.settings.horizontalPageBreakRepeat=="number")&&(u=[t.settings.horizontalPageBreakRepeat]),u.forEach(function(y){var g=t.columns.find(function(j){return j.dataKey===y||j.index===y});g&&!i.has(g.index)&&(i.set(g.index,!0),o.push(g.index),c.push(t.columns[g.index]),r-=g.wrappedWidth)});for(var h=!0,m=(n=a?.start)!==null&&n!==void 0?n:0;m<t.columns.length;){if(i.has(m)){m++;continue}var p=t.columns[m].wrappedWidth;if(h||r>=p)h=!1,o.push(m),c.push(t.columns[m]),r-=p;else break;m++}return{colIndexes:o,columns:c,lastIndex:m-1}}function mq(s,t){for(var a=[],n=0;n<t.columns.length;n++){var r=fq(s,t,{start:n});r.columns.length&&(a.push(r),n=r.lastIndex)}return a}function ck(s,t){var a=t.settings,n=a.startY,r=a.margin,i={x:r.left,y:n},o=t.getHeadHeight(t.columns)+t.getFootHeight(t.columns),c=n+r.bottom+o;if(a.pageBreak==="avoid"){var u=t.body,h=u.reduce(function(y,g){return y+g.height},0);c+=h}var m=new Mh(s);(a.pageBreak==="always"||a.startY!=null&&c>m.pageSize().height)&&(uk(m),i.y=r.top),t.callWillDrawPageHooks(m,i);var p=Zc({},i);t.startPageNumber=m.pageNumber(),a.horizontalPageBreak?pq(m,t,p,i):(m.applyStyles(m.userStyles),(a.showHead==="firstPage"||a.showHead==="everyPage")&&t.head.forEach(function(y){return nd(m,t,y,i,t.columns)}),m.applyStyles(m.userStyles),t.body.forEach(function(y,g){var j=g===t.body.length-1;Hg(m,t,y,j,p,i,t.columns)}),m.applyStyles(m.userStyles),(a.showFoot==="lastPage"||a.showFoot==="everyPage")&&t.foot.forEach(function(y){return nd(m,t,y,i,t.columns)})),ek(m,t,p,i),t.callEndPageHooks(m,i),t.finalY=i.y,s.lastAutoTable=t,m.applyStyles(m.userStyles)}function pq(s,t,a,n){var r=mq(s,t),i=t.settings;if(i.horizontalPageBreakBehaviour==="afterAllRows")r.forEach(function(h,m){s.applyStyles(s.userStyles),m>0?sm(s,t,a,n,h.columns,!0):P_(s,t,n,h.columns),gq(s,t,a,n,h.columns),Sy(s,t,n,h.columns)});else for(var o=-1,c=r[0],u=function(){var h=o;if(c){s.applyStyles(s.userStyles);var m=c.columns;o>=0?sm(s,t,a,n,m,!0):P_(s,t,n,m),h=F_(s,t,o+1,n,m),Sy(s,t,n,m)}var p=h-o;r.slice(1).forEach(function(y){s.applyStyles(s.userStyles),sm(s,t,a,n,y.columns,!0),F_(s,t,o+1,n,y.columns,p),Sy(s,t,n,y.columns)}),o=h};o<t.body.length-1;)u()}function P_(s,t,a,n){var r=t.settings;s.applyStyles(s.userStyles),(r.showHead==="firstPage"||r.showHead==="everyPage")&&t.head.forEach(function(i){return nd(s,t,i,a,n)})}function gq(s,t,a,n,r){s.applyStyles(s.userStyles),t.body.forEach(function(i,o){var c=o===t.body.length-1;Hg(s,t,i,c,a,n,r)})}function F_(s,t,a,n,r,i){s.applyStyles(s.userStyles),i=i??t.body.length;var o=Math.min(a+i,t.body.length),c=-1;return t.body.slice(a,o).forEach(function(u,h){var m=a+h===t.body.length-1,p=dk(s,t,m,n);u.canEntireRowFit(p,r)&&(nd(s,t,u,n,r),c=a+h)}),c}function Sy(s,t,a,n){var r=t.settings;s.applyStyles(s.userStyles),(r.showFoot==="lastPage"||r.showFoot==="everyPage")&&t.foot.forEach(function(i){return nd(s,t,i,a,n)})}function xq(s,t,a){var n=a.getLineHeight(s.styles.fontSize),r=s.padding("vertical"),i=Math.floor((t-r)/n);return Math.max(0,i)}function bq(s,t,a,n){var r={};s.spansMultiplePages=!0,s.height=0;for(var i=0,o=0,c=a.columns;o<c.length;o++){var u=c[o],h=s.cells[u.index];if(h){Array.isArray(h.text)||(h.text=[h.text]);var m=new lk(h.raw,h.styles,h.section);m=Zc(m,h),m.text=[];var p=xq(h,t,n);h.text.length>p&&(m.text=h.text.splice(p,h.text.length));var y=n.scaleFactor(),g=n.getLineHeightFactor();h.contentHeight=h.getContentHeight(y,g),h.contentHeight>=t&&(h.contentHeight=t,m.styles.minCellHeight-=t),h.contentHeight>s.height&&(s.height=h.contentHeight),m.contentHeight=m.getContentHeight(y,g),m.contentHeight>i&&(i=m.contentHeight),r[u.index]=m}}var j=new ik(s.raw,-1,s.section,r,!0);j.height=i;for(var b=0,N=a.columns;b<N.length;b++){var u=N[b],m=j.cells[u.index];m&&(m.height=j.height);var h=s.cells[u.index];h&&(h.height=s.height)}return j}function yq(s,t,a,n){var r=s.pageSize().height,i=n.settings.margin,o=i.top+i.bottom,c=r-o;t.section==="body"&&(c-=n.getHeadHeight(n.columns)+n.getFootHeight(n.columns));var u=t.getMinimumRowHeight(n.columns,s),h=u<a;if(u>c)return console.error("Will not be able to print row ".concat(t.index," correctly since it's minimum height is larger than page height")),!0;if(!h)return!1;var m=t.hasRowSpan(n.columns),p=t.getMaxCellHeight(n.columns)>c;return p?(m&&console.error("The content of row ".concat(t.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(m||n.settings.rowPageBreak==="avoid")}function Hg(s,t,a,n,r,i,o){var c=dk(s,t,n,i);if(a.canEntireRowFit(c,o))nd(s,t,a,i,o);else if(yq(s,a,c,t)){var u=bq(a,c,t,s);nd(s,t,a,i,o),sm(s,t,r,i,o),Hg(s,t,u,n,r,i,o)}else sm(s,t,r,i,o),Hg(s,t,a,n,r,i,o)}function nd(s,t,a,n,r){n.x=t.settings.margin.left;for(var i=0,o=r;i<o.length;i++){var c=o[i],u=a.cells[c.index];if(!u){n.x+=c.width;continue}s.applyStyles(u.styles),u.x=n.x,u.y=n.y;var h=t.callCellHooks(s,t.hooks.willDrawCell,u,a,c,n);if(h===!1){n.x+=c.width;continue}vq(s,u,n);var m=u.getTextPos();QA(u.text,m.x,m.y,{halign:u.styles.halign,valign:u.styles.valign,maxWidth:Math.ceil(u.width-u.padding("left")-u.padding("right"))},s.getDocument()),t.callCellHooks(s,t.hooks.didDrawCell,u,a,c,n),n.x+=c.width}n.y+=a.height}function vq(s,t,a){var n=t.styles;if(s.getDocument().setFillColor(s.getDocument().getFillColor()),typeof n.lineWidth=="number"){var r=tk(n.lineWidth,n.fillColor);r&&s.rect(t.x,a.y,t.width,t.height,r)}else typeof n.lineWidth=="object"&&(n.fillColor&&s.rect(t.x,a.y,t.width,t.height,"F"),jq(s,t,a,n.lineWidth))}function jq(s,t,a,n){var r,i,o,c;n.top&&(r=a.x,i=a.y,o=a.x+t.width,c=a.y,n.right&&(o+=.5*n.right),n.left&&(r-=.5*n.left),u(n.top,r,i,o,c)),n.bottom&&(r=a.x,i=a.y+t.height,o=a.x+t.width,c=a.y+t.height,n.right&&(o+=.5*n.right),n.left&&(r-=.5*n.left),u(n.bottom,r,i,o,c)),n.left&&(r=a.x,i=a.y,o=a.x,c=a.y+t.height,n.top&&(i-=.5*n.top),n.bottom&&(c+=.5*n.bottom),u(n.left,r,i,o,c)),n.right&&(r=a.x+t.width,i=a.y,o=a.x+t.width,c=a.y+t.height,n.top&&(i-=.5*n.top),n.bottom&&(c+=.5*n.bottom),u(n.right,r,i,o,c));function u(h,m,p,y,g){s.getDocument().setLineWidth(h),s.getDocument().line(m,p,y,g,"S")}}function dk(s,t,a,n){var r=t.settings.margin.bottom,i=t.settings.showFoot;return(i==="everyPage"||i==="lastPage"&&a)&&(r+=t.getFootHeight(t.columns)),s.pageSize().height-n.y-r}function sm(s,t,a,n,r,i){r===void 0&&(r=[]),i===void 0&&(i=!1),s.applyStyles(s.userStyles),t.settings.showFoot==="everyPage"&&!i&&t.foot.forEach(function(c){return nd(s,t,c,n,r)}),t.callEndPageHooks(s,n);var o=t.settings.margin;ek(s,t,a,n),uk(s),t.pageNumber++,n.x=o.left,n.y=o.top,a.y=o.top,t.callWillDrawPageHooks(s,n),t.settings.showHead==="everyPage"&&(t.head.forEach(function(c){return nd(s,t,c,n,r)}),s.applyStyles(s.userStyles))}function uk(s){var t=s.pageNumber();s.setPage(t+1);var a=s.pageNumber();return a===t?(s.addPage(),!0):!1}function Nq(s){s.API.autoTable=function(){for(var t=[],a=0;a<arguments.length;a++)t[a]=arguments[a];var n=t[0],r=rk(this,n),i=ok(this,r);return ck(this,i),this},s.API.lastAutoTable=!1,s.API.autoTableText=function(t,a,n,r){QA(t,a,n,r,this)},s.API.autoTableSetDefaults=function(t){return Mh.setDefaults(t,this),this},s.autoTableSetDefaults=function(t,a){Mh.setDefaults(t,a)},s.API.autoTableHtmlToJson=function(t,a){var n;if(a===void 0&&(a=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var r=new Mh(this),i=nk(r,t,window,a,!1),o=i.head,c=i.body,u=((n=o[0])===null||n===void 0?void 0:n.map(function(h){return h.content}))||[];return{columns:u,rows:c,data:c}}}var Cy;function wq(s,t){var a=rk(s,t),n=ok(s,a);ck(s,n)}try{if(typeof window<"u"&&window){var I_=window,O_=I_.jsPDF||((Cy=I_.jspdf)===null||Cy===void 0?void 0:Cy.jsPDF);O_&&Nq(O_)}}catch(s){console.error("Could not apply autoTable plugin",s)}function _q(){const{id:s}=vv(),t=Vn(),[a,n]=A.useState(null),[r,i]=A.useState([]),[o,c]=A.useState(!1);A.useEffect(()=>{s&&u()},[s]);const u=async()=>{if(s){c(!0);try{const b=new FormData;b.append("companyID",s);const N=await Ne.post("/establishments/get-employees.php",b,{headers:{"Content-Type":"multipart/form-data"}});if(console.log("Employees API Response:",N.data),N.data&&N.data.success){const v=N.data;if(console.log("Parsed responseData:",v),console.log("Has company:",!!v.company),console.log("Has employees:",!!v.employees),console.log("Employees is array:",Array.isArray(v.employees)),v.company&&Array.isArray(v.employees))n(v.company),i(v.employees);else if(v.company)n(v.company),i(v.employees||[]);else if(Array.isArray(v.employees))i(v.employees);else if(v.data){const S=v.data;if(S.company&&Array.isArray(S.employees))n(S.company),i(S.employees);else{console.error("Unexpected nested structure:",S),W.fire("Error","Unexpected data structure. Check console for details.","error"),t("/establishments");return}}else{console.error("Unexpected response structure:",v),console.error("Available keys:",Object.keys(v)),console.error("Full response:",JSON.stringify(v,null,2)),W.fire("Error","Unexpected data structure. Check console for details.","error"),t("/establishments");return}}else{console.error("API returned error:",N.data),W.fire("Error",N.data?.message||"Failed to load employees","error"),t("/establishments");return}}catch(b){console.error("Error loading employees:",b),console.error("Error response:",b.response?.data),W.fire("Error",b.response?.data?.message||b.message||"Failed to load employees","error"),t("/establishments")}finally{c(!1)}}},h=async(b,N)=>{if((await W.fire({title:"Cancel Employee",text:`Are you sure you want to cancel ${N}?`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, cancel employee"})).isConfirmed)try{const S=new FormData;S.append("residenceID",b.toString());const E=await Ne.post("/establishments/cancel-employee.php",S,{headers:{"Content-Type":"multipart/form-data"}});E.data.success?(W.fire("Success","Employee cancelled successfully","success"),u()):W.fire("Error",E.data.message||"Failed to cancel employee","error")}catch(S){console.error("Error cancelling employee:",S),W.fire("Error",S.message||"Failed to cancel employee","error")}},m=b=>{if(!b)return"N/A";try{return new Date(b).toLocaleDateString("en-US",{year:"numeric",month:"2-digit",day:"2-digit"})}catch{return"N/A"}},p=b=>{if(!b)return!1;try{return new Date(b)<new Date}catch{return!1}},y=b=>b===10?"bg-success":"bg-indigo",g=b=>b/10*100,j=()=>{if(!a||r.length===0){W.fire("Info","No employees to export","info");return}try{const b=new ts;b.setFontSize(16),b.text(`Establishment Employees - ${a.company_name}`,14,20),b.setFontSize(10),b.text(`Generated on: ${new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}`,14,28);const N=r.map(L=>{const z=`${L.completedStep} / 10`,V=L.cancelled===1?"Cancelled":"Active";return[L.passenger_name||"N/A",L.countryName||"N/A",L.LabourCardNumber||"n/a",L.EmiratesIDNumber||"n/a",m(L.expiry_date),V,z]});wq(b,{startY:35,head:[["Name","Nationality","Labour Card #","Emirates ID #","Expiry Date","Status","Progress"]],body:N,theme:"grid",headStyles:{fillColor:[41,128,185],textColor:255,fontSize:10,fontStyle:"bold"},styles:{fontSize:8,cellPadding:2},columnStyles:{0:{cellWidth:40},1:{cellWidth:30},2:{cellWidth:25},3:{cellWidth:30},4:{cellWidth:25},5:{cellWidth:20},6:{cellWidth:20}},alternateRowStyles:{fillColor:[245,245,245]}});const S=b.getNumberOfPages();for(let L=1;L<=S;L++)b.setPage(L),b.setFontSize(8),b.text(`Page ${L} of ${S} | Generated on: ${new Date().toLocaleString()}`,14,b.internal.pageSize.height-10);const E=`employees_${a.company_name.replace(/[^a-z0-9]/gi,"_")}_${new Date().toISOString().split("T")[0]}.pdf`;b.save(E)}catch(b){console.error("Error generating PDF:",b),W.fire("Error",b.message||"Failed to generate PDF","error")}};return e.jsx("div",{className:"establishment-employees-page",children:e.jsxs("div",{className:"container-fluid",children:[e.jsx("div",{className:"row mb-4",children:e.jsxs("div",{className:"col-md-12",children:[e.jsxs("button",{className:"btn btn-secondary mb-3",onClick:()=>t("/establishments"),children:[e.jsx("i",{className:"fa fa-arrow-left"})," Back to Establishments"]}),e.jsxs("h3",{children:["Establishment Employees ",a&&`(${a.company_name})`]}),e.jsxs("button",{className:"btn btn-primary mb-2",onClick:j,disabled:!a||r.length===0,children:[e.jsx("i",{className:"fa fa-file-pdf"})," Export to PDF"]})]})}),o?e.jsxs("div",{className:"text-center py-5",children:[e.jsx("i",{className:"fa fa-spinner fa-spin fa-3x"}),e.jsx("p",{className:"mt-3",children:"Loading employees..."})]}):r.length===0?e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-md-12 text-center text-danger",children:"No employees found"})}):e.jsx("div",{className:"row",children:r.map(b=>e.jsx("div",{className:"col-md-6 mb-3",children:e.jsx("div",{className:"card",style:{opacity:b.cancelled===1?.4:1},children:e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"media d-flex",children:[e.jsx("img",{src:"/color_admin_v5.0/admin/template/assets/img/user/user-13.jpg",className:"me-3 rounded-circle",alt:b.countryName,height:"70"}),e.jsxs("div",{className:"media-body",children:[e.jsx("h5",{className:"mb-1",children:b.passenger_name}),e.jsxs("p",{className:"mb-1",children:[e.jsx("img",{height:"14",className:"border",src:`https://flagpedia.net/data/flags/h24/${b.countryCode?.toLowerCase()}.png`,alt:b.countryName})," ",b.countryName]}),b.cancelled===1&&e.jsx("span",{className:"badge bg-danger mt-1",children:"Cancelled"})]})]}),e.jsxs("div",{className:"row mt-3",children:[e.jsxs("div",{className:"col-md-3 mb-1",children:[e.jsx("strong",{children:"Passport #"}),e.jsx("br",{}),"n/a"]}),e.jsxs("div",{className:"col-md-3 mb-1",children:[e.jsx("strong",{children:"Labour Card #"}),e.jsx("br",{}),b.LabourCardNumber||"n/a"]}),e.jsxs("div",{className:"col-md-3 mb-1",children:[e.jsx("strong",{children:"Emirates ID Number"}),e.jsx("br",{}),b.EmiratesIDNumber||"n/a"]}),e.jsxs("div",{className:"col-md-3 mb-1",children:[e.jsx("strong",{children:"Expiry Date"}),e.jsx("br",{}),e.jsx("span",{className:p(b.expiry_date)?"text-danger":"text-success",children:m(b.expiry_date)})]})]}),e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-md-12 mt-2",children:e.jsx("div",{className:"progress rounded-pill",children:e.jsxs("div",{className:`progress-bar ${y(b.completedStep)} progress-bar-striped ${b.completedStep!==10?"progress-bar-animated":""} rounded-pill fs-10px fw-bold`,style:{width:`${g(b.completedStep)}%`},children:[b.completedStep," / 10"]})})})}),e.jsx("div",{className:"row mt-4",children:e.jsx("div",{className:"col-md-12",children:b.cancelled!==1&&e.jsx("button",{className:"btn btn-danger btn-cancel",onClick:()=>h(b.residenceID,b.passenger_name),children:"Cancel Employee"})})})]})})},b.residenceID))})]})})}function Sq({isOpen:s,onClose:t,onSuccess:a}){const[n,r]=A.useState({name:"",type:"",number:"",expiry:"",quota:"0",username:"",password:""}),[i,o]=A.useState([]),[c,u]=A.useState([{role:"",personId:""}]),[h,m]=A.useState({letterhead:null,stamp:null,signature:null,tradeLicense:null,establishmentCard:null}),[p,y]=A.useState([{name:"",file:null}]),[g,j]=A.useState(!1),[b,N]=A.useState({});A.useEffect(()=>{s&&v()},[s]);const v=async()=>{try{const P=new FormData;P.append("action","getPersons");const K=await Ne.post("/establishments/manage-establishments.php",P,{headers:{"Content-Type":"multipart/form-data"}});K.data&&K.data.success&&o(K.data.persons||[])}catch(P){console.error("Error loading persons:",P)}},S=P=>{const{name:K,value:H}=P.target;r(se=>({...se,[K]:H})),N(se=>({...se,[K]:""}))},E=(P,K)=>{const H=P.target.files?.[0]||null;m(se=>({...se,[K]:H})),N(se=>({...se,[K]:""}))},L=()=>{u(P=>[...P,{role:"",personId:""}])},z=P=>{u(K=>K.filter((H,se)=>se!==P))},V=(P,K,H)=>{u(se=>{const X=[...se];return X[P][K]=H,X})},te=()=>{y(P=>[...P,{name:"",file:null}])},q=P=>{y(K=>K.filter((H,se)=>se!==P))},B=(P,K,H)=>{y(se=>{const X=[...se];return X[P][K]=H,X})},J=async P=>{P.preventDefault(),j(!0),N({});try{const K=new FormData;K.append("action","addCompany"),K.append("nameAdd",n.name),K.append("typeAdd",n.type),K.append("numberAdd",n.number),K.append("expiryAdd",n.expiry),K.append("quotaAdd",n.quota),K.append("usernameAdd",n.username),K.append("passwordAdd",n.password),c.forEach((se,X)=>{K.append(`signatoryRoles[${X}]`,se.role),K.append(`signatoryPersons[${X}]`,se.personId)}),h.letterhead&&K.append("letterHeadAdd",h.letterhead),h.stamp&&K.append("stampAdd",h.stamp),h.signature&&K.append("signatureAdd",h.signature),h.tradeLicense&&K.append("tradeLicenseAdd",h.tradeLicense),h.establishmentCard&&K.append("establishmentCardAdd",h.establishmentCard),p.forEach((se,X)=>{se.name&&se.file&&(K.append(`fileNames[${X}]`,se.name),K.append(`additionalFiles[${X}]`,se.file))});const H=await Ne.post("/establishments/manage-establishments.php",K,{headers:{"Content-Type":"multipart/form-data"}});H.data&&H.data.success?(W.fire("Success",H.data.message||"Establishment added successfully","success"),a(),t(),r({name:"",type:"",number:"",expiry:"",quota:"0",username:"",password:""}),u([{role:"",personId:""}]),m({letterhead:null,stamp:null,signature:null,tradeLicense:null,establishmentCard:null}),y([{name:"",file:null}])):H.data&&H.data.message==="form_errors"?N(H.data.errors||{}):W.fire("Error",H.data?.message||"Failed to add establishment","error")}catch(K){console.error("Error adding establishment:",K),W.fire("Error",K.response?.data?.message||"Failed to add establishment","error")}finally{j(!1)}};return s?e.jsx("div",{className:"modal fade show",style:{display:"block",background:"rgba(0,0,0,0.5)"},children:e.jsx("div",{className:"modal-dialog modal-lg",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header bg-dark",children:[e.jsxs("h3",{className:"modal-title text-white",children:[e.jsx("i",{className:"fa fa-plus"})," Add New Establishment"]}),e.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:t})]}),e.jsxs("form",{onSubmit:J,children:[e.jsx("div",{className:"modal-body",style:{maxHeight:"70vh",overflowY:"auto"},children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-12 mb-3",children:[e.jsxs("h5",{children:[e.jsx("i",{className:"fa fa-info-circle"})," Basic Information"]}),e.jsx("hr",{})]}),e.jsxs("div",{className:"col-md-8 mb-2",children:[e.jsxs("label",{className:"form-label",children:["Establishment Name ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"text",name:"name",className:`form-control ${b.nameAdd?"is-invalid":""}`,value:n.name,onChange:S}),b.nameAdd&&e.jsx("div",{className:"invalid-feedback d-block",children:b.nameAdd})]}),e.jsxs("div",{className:"col-md-4 mb-2",children:[e.jsxs("label",{className:"form-label",children:["Type ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("select",{name:"type",className:`form-select ${b.typeAdd?"is-invalid":""}`,value:n.type,onChange:S,children:[e.jsx("option",{value:"",children:"Choose type"}),e.jsx("option",{value:"Mainland",children:"Mainland"}),e.jsx("option",{value:"Freezone",children:"Freezone"})]}),b.typeAdd&&e.jsx("div",{className:"invalid-feedback d-block",children:b.typeAdd})]}),e.jsxs("div",{className:"col-md-6 mb-2",children:[e.jsxs("label",{className:"form-label",children:["Company Number ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"text",name:"number",className:`form-control ${b.numberAdd?"is-invalid":""}`,value:n.number,onChange:S}),b.numberAdd&&e.jsx("div",{className:"invalid-feedback d-block",children:b.numberAdd})]}),e.jsxs("div",{className:"col-md-6 mb-2",children:[e.jsxs("label",{className:"form-label",children:["Expiry Date ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"date",name:"expiry",className:`form-control ${b.expiryAdd?"is-invalid":""}`,value:n.expiry,onChange:S}),b.expiryAdd&&e.jsx("div",{className:"invalid-feedback d-block",children:b.expiryAdd})]}),e.jsxs("div",{className:"col-md-6 mb-2",children:[e.jsxs("label",{className:"form-label",children:["Starting Quota ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"number",name:"quota",className:`form-control ${b.quotaAdd?"is-invalid":""}`,value:n.quota,onChange:S}),b.quotaAdd&&e.jsx("div",{className:"invalid-feedback d-block",children:b.quotaAdd})]}),e.jsxs("div",{className:"col-md-12 mb-2",children:[e.jsxs("label",{className:"form-label",children:["Authorized Signatories ",e.jsx("span",{className:"text-danger",children:"*"})]}),c.map((P,K)=>e.jsxs("div",{className:"row mb-2",children:[e.jsx("div",{className:"col-md-4",children:e.jsxs("select",{className:"form-select",value:P.role,onChange:H=>V(K,"role",H.target.value),children:[e.jsx("option",{value:"",children:"Select role"}),e.jsx("option",{value:"Manager",children:"Manager"}),e.jsx("option",{value:"Owner",children:"Owner"}),e.jsx("option",{value:"Partner",children:"Partner"}),e.jsx("option",{value:"Director",children:"Director"}),e.jsx("option",{value:"Authorized Signatory",children:"Authorized Signatory"}),e.jsx("option",{value:"Secretary",children:"Secretary"})]})}),e.jsx("div",{className:"col-md-6",children:e.jsxs("select",{className:"form-select",value:P.personId,onChange:H=>V(K,"personId",H.target.value),children:[e.jsx("option",{value:"",children:"Select person"}),i.map(H=>e.jsx("option",{value:H.person_id,children:H.person_name},H.person_id))]})}),e.jsx("div",{className:"col-md-2",children:K===c.length-1?e.jsx("button",{type:"button",className:"btn btn-success w-100",onClick:L,children:e.jsx("i",{className:"fa fa-plus"})}):e.jsx("button",{type:"button",className:"btn btn-danger w-100",onClick:()=>z(K),children:e.jsx("i",{className:"fa fa-minus"})})})]},K)),b.authorizedSignatoriesAdd&&e.jsx("div",{className:"text-danger small",children:b.authorizedSignatoriesAdd}),e.jsx("small",{className:"text-muted",children:"Add multiple authorized signatories with their roles"})]}),e.jsxs("div",{className:"col-md-12 mb-3 mt-3",children:[e.jsxs("h5",{children:[e.jsx("i",{className:"fa fa-lock"})," Login Credentials"]}),e.jsx("hr",{})]}),e.jsxs("div",{className:"col-md-6 mb-2",children:[e.jsx("label",{className:"form-label",children:"Username"}),e.jsx("input",{type:"text",name:"username",className:"form-control",value:n.username,onChange:S})]}),e.jsxs("div",{className:"col-md-6 mb-2",children:[e.jsx("label",{className:"form-label",children:"Password"}),e.jsx("input",{type:"text",name:"password",className:"form-control",value:n.password,onChange:S})]}),e.jsxs("div",{className:"col-md-12 mb-3 mt-3",children:[e.jsxs("h5",{children:[e.jsx("i",{className:"fa fa-file"})," Standard Documents"]}),e.jsx("hr",{})]}),e.jsx("div",{className:"col-md-12 mb-2",children:e.jsxs("small",{className:"text-muted",children:[e.jsx("i",{className:"fa fa-info-circle"})," Documents are optional. You can upload them later using the Attachments button."]})}),e.jsxs("div",{className:"col-md-4 mb-2",children:[e.jsx("label",{className:"form-label",children:"Letterhead"}),e.jsx("input",{type:"file",className:`form-control ${b.letterHeadAdd?"is-invalid":""}`,accept:"image/*",onChange:P=>E(P,"letterhead")}),b.letterHeadAdd&&e.jsx("div",{className:"invalid-feedback d-block",children:b.letterHeadAdd})]}),e.jsxs("div",{className:"col-md-4 mb-2",children:[e.jsx("label",{className:"form-label",children:"Stamp"}),e.jsx("input",{type:"file",className:`form-control ${b.stampAdd?"is-invalid":""}`,accept:"image/*",onChange:P=>E(P,"stamp")}),b.stampAdd&&e.jsx("div",{className:"invalid-feedback d-block",children:b.stampAdd})]}),e.jsxs("div",{className:"col-md-4 mb-2",children:[e.jsx("label",{className:"form-label",children:"Signature"}),e.jsx("input",{type:"file",className:`form-control ${b.signatureAdd?"is-invalid":""}`,accept:"image/*",onChange:P=>E(P,"signature")}),b.signatureAdd&&e.jsx("div",{className:"invalid-feedback d-block",children:b.signatureAdd})]}),e.jsxs("div",{className:"col-md-6 mb-2",children:[e.jsx("label",{className:"form-label",children:"Trade License Copy"}),e.jsx("input",{type:"file",className:`form-control ${b.tradeLicenseAdd?"is-invalid":""}`,accept:"image/*,.pdf",onChange:P=>E(P,"tradeLicense")}),b.tradeLicenseAdd&&e.jsx("div",{className:"invalid-feedback d-block",children:b.tradeLicenseAdd})]}),e.jsxs("div",{className:"col-md-6 mb-2",children:[e.jsx("label",{className:"form-label",children:"Establishment Card"}),e.jsx("input",{type:"file",className:`form-control ${b.establishmentCardAdd?"is-invalid":""}`,accept:"image/*,.pdf",onChange:P=>E(P,"establishmentCard")}),b.establishmentCardAdd&&e.jsx("div",{className:"invalid-feedback d-block",children:b.establishmentCardAdd})]}),e.jsxs("div",{className:"col-md-12 mb-3 mt-3",children:[e.jsxs("h5",{children:[e.jsx("i",{className:"fa fa-files-o"})," Additional Documents"]}),e.jsx("hr",{})]}),e.jsx("div",{className:"col-md-12 mb-2",children:p.map((P,K)=>e.jsxs("div",{className:"row mb-2",children:[e.jsx("div",{className:"col-md-5",children:e.jsx("input",{type:"text",className:"form-control",placeholder:"Document name",value:P.name,onChange:H=>B(K,"name",H.target.value)})}),e.jsx("div",{className:"col-md-5",children:e.jsx("input",{type:"file",className:"form-control",onChange:H=>B(K,"file",H.target.files?.[0]||null)})}),e.jsx("div",{className:"col-md-2",children:K===p.length-1?e.jsx("button",{type:"button",className:"btn btn-success w-100",onClick:te,children:e.jsx("i",{className:"fa fa-plus"})}):e.jsx("button",{type:"button",className:"btn btn-danger w-100",onClick:()=>q(K),children:e.jsx("i",{className:"fa fa-minus"})})})]},K))})]})}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:t,children:"Close"}),e.jsx("button",{type:"submit",className:"btn btn-success",disabled:g,children:g?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fa fa-spinner fa-spin"})," Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fa fa-save"})," Save Establishment"]})})]})]})]})})}):null}function Cq({isOpen:s,onClose:t,onSuccess:a}){const[n,r]=A.useState({fullName:"",role:"",passportNumber:"",emiratesId:"",phone:"",email:"",nationality:"",dateOfBirth:""}),[i,o]=A.useState({passportCopy:null,emiratesIdCopy:null,photo:null}),[c,u]=A.useState([{name:"",type:"",file:null}]),[h,m]=A.useState(!1),[p,y]=A.useState({}),g=E=>{const{name:L,value:z}=E.target;r(V=>({...V,[L]:z})),y(V=>({...V,[L]:""}))},j=(E,L)=>{const z=E.target.files?.[0]||null;o(V=>({...V,[L]:z})),y(V=>({...V,[L]:""}))},b=()=>{u(E=>[...E,{name:"",type:"",file:null}])},N=E=>{u(L=>L.filter((z,V)=>V!==E))},v=(E,L,z)=>{u(V=>{const te=[...V];return te[E][L]=z,te})},S=async E=>{E.preventDefault(),m(!0),y({});try{const L=new FormData;L.append("action","addPerson"),L.append("fullName",n.fullName),L.append("role",n.role),L.append("passportNumber",n.passportNumber),L.append("emiratesId",n.emiratesId),L.append("phone",n.phone),L.append("email",n.email),L.append("nationality",n.nationality),L.append("dateOfBirth",n.dateOfBirth),i.passportCopy&&L.append("passportCopy",i.passportCopy),i.emiratesIdCopy&&L.append("emiratesIdCopy",i.emiratesIdCopy),i.photo&&L.append("photo",i.photo),c.forEach((V,te)=>{V.name&&V.type&&V.file&&(L.append(`documentNames[${te}]`,V.name),L.append(`documentTypes[${te}]`,V.type),L.append(`additionalDocuments[${te}]`,V.file))});const z=await Ne.post("/establishments/manage-establishments.php",L,{headers:{"Content-Type":"multipart/form-data"}});z.data&&z.data.success?(W.fire("Success",z.data.message||"Person added successfully","success"),a(),t(),r({fullName:"",role:"",passportNumber:"",emiratesId:"",phone:"",email:"",nationality:"",dateOfBirth:""}),o({passportCopy:null,emiratesIdCopy:null,photo:null}),u([{name:"",type:"",file:null}])):z.data&&z.data.message==="form_errors"?y(z.data.errors||{}):W.fire("Error",z.data?.message||"Failed to add person","error")}catch(L){console.error("Error adding person:",L),W.fire("Error",L.response?.data?.message||"Failed to add person","error")}finally{m(!1)}};return s?e.jsx("div",{className:"modal fade show",style:{display:"block",background:"rgba(0,0,0,0.5)"},children:e.jsx("div",{className:"modal-dialog modal-lg",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header bg-info",children:[e.jsxs("h3",{className:"modal-title text-white",children:[e.jsx("i",{className:"fa fa-user-plus"})," Add New Person"]}),e.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:t})]}),e.jsxs("form",{onSubmit:S,children:[e.jsx("div",{className:"modal-body",style:{maxHeight:"70vh",overflowY:"auto"},children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-12 mb-3",children:[e.jsxs("h5",{children:[e.jsx("i",{className:"fa fa-user"})," Personal Information"]}),e.jsx("hr",{})]}),e.jsxs("div",{className:"col-md-6 mb-2",children:[e.jsxs("label",{className:"form-label",children:["Full Name ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"text",name:"fullName",className:`form-control ${p.fullName?"is-invalid":""}`,value:n.fullName,onChange:g}),p.fullName&&e.jsx("div",{className:"invalid-feedback d-block",children:p.fullName})]}),e.jsxs("div",{className:"col-md-6 mb-2",children:[e.jsx("label",{className:"form-label",children:"Role"}),e.jsxs("select",{name:"role",className:"form-select",value:n.role,onChange:g,children:[e.jsx("option",{value:"",children:"Select role"}),e.jsx("option",{value:"Manager",children:"Manager"}),e.jsx("option",{value:"Owner",children:"Owner"}),e.jsx("option",{value:"Partner",children:"Partner"}),e.jsx("option",{value:"Director",children:"Director"}),e.jsx("option",{value:"Shareholder",children:"Shareholder"})]})]}),e.jsxs("div",{className:"col-md-6 mb-2",children:[e.jsx("label",{className:"form-label",children:"Passport Number"}),e.jsx("input",{type:"text",name:"passportNumber",className:"form-control",value:n.passportNumber,onChange:g})]}),e.jsxs("div",{className:"col-md-6 mb-2",children:[e.jsx("label",{className:"form-label",children:"Emirates ID"}),e.jsx("input",{type:"text",name:"emiratesId",className:"form-control",value:n.emiratesId,onChange:g})]}),e.jsxs("div",{className:"col-md-6 mb-2",children:[e.jsx("label",{className:"form-label",children:"Phone"}),e.jsx("input",{type:"text",name:"phone",className:"form-control",value:n.phone,onChange:g})]}),e.jsxs("div",{className:"col-md-6 mb-2",children:[e.jsx("label",{className:"form-label",children:"Email"}),e.jsx("input",{type:"email",name:"email",className:"form-control",value:n.email,onChange:g})]}),e.jsxs("div",{className:"col-md-6 mb-2",children:[e.jsx("label",{className:"form-label",children:"Nationality"}),e.jsx("input",{type:"text",name:"nationality",className:"form-control",value:n.nationality,onChange:g})]}),e.jsxs("div",{className:"col-md-6 mb-2",children:[e.jsx("label",{className:"form-label",children:"Date of Birth"}),e.jsx("input",{type:"date",name:"dateOfBirth",className:"form-control",value:n.dateOfBirth,onChange:g})]}),e.jsxs("div",{className:"col-md-12 mb-3 mt-3",children:[e.jsxs("h5",{children:[e.jsx("i",{className:"fa fa-file"})," Documents"]}),e.jsx("hr",{})]}),e.jsxs("div",{className:"col-md-4 mb-2",children:[e.jsxs("label",{className:"form-label",children:["Passport Copy ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"file",className:`form-control ${p.passportCopy?"is-invalid":""}`,accept:"image/*,.pdf",onChange:E=>j(E,"passportCopy")}),p.passportCopy&&e.jsx("div",{className:"invalid-feedback d-block",children:p.passportCopy})]}),e.jsxs("div",{className:"col-md-4 mb-2",children:[e.jsxs("label",{className:"form-label",children:["Emirates ID Copy ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"file",className:`form-control ${p.emiratesIdCopy?"is-invalid":""}`,accept:"image/*,.pdf",onChange:E=>j(E,"emiratesIdCopy")}),p.emiratesIdCopy&&e.jsx("div",{className:"invalid-feedback d-block",children:p.emiratesIdCopy})]}),e.jsxs("div",{className:"col-md-4 mb-2",children:[e.jsxs("label",{className:"form-label",children:["Photo ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"file",className:`form-control ${p.photo?"is-invalid":""}`,accept:"image/*",onChange:E=>j(E,"photo")}),p.photo&&e.jsx("div",{className:"invalid-feedback d-block",children:p.photo})]}),e.jsxs("div",{className:"col-md-12 mb-3 mt-3",children:[e.jsxs("h5",{children:[e.jsx("i",{className:"fa fa-files-o"})," Additional Documents (Optional)"]}),e.jsx("hr",{})]}),e.jsx("div",{className:"col-md-12 mb-2",children:c.map((E,L)=>e.jsxs("div",{className:"row mb-2",children:[e.jsx("div",{className:"col-md-4",children:e.jsx("input",{type:"text",className:"form-control",placeholder:"Document name",value:E.name,onChange:z=>v(L,"name",z.target.value)})}),e.jsx("div",{className:"col-md-3",children:e.jsxs("select",{className:"form-select",value:E.type,onChange:z=>v(L,"type",z.target.value),children:[e.jsx("option",{value:"",children:"Document type"}),e.jsx("option",{value:"Visa",children:"Visa"}),e.jsx("option",{value:"License",children:"License"}),e.jsx("option",{value:"Certificate",children:"Certificate"}),e.jsx("option",{value:"Other",children:"Other"})]})}),e.jsx("div",{className:"col-md-3",children:e.jsx("input",{type:"file",className:"form-control",onChange:z=>v(L,"file",z.target.files?.[0]||null)})}),e.jsx("div",{className:"col-md-2",children:L===c.length-1?e.jsx("button",{type:"button",className:"btn btn-success w-100",onClick:b,children:e.jsx("i",{className:"fa fa-plus"})}):e.jsx("button",{type:"button",className:"btn btn-danger w-100",onClick:()=>N(L),children:e.jsx("i",{className:"fa fa-minus"})})})]},L))})]})}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:t,children:"Close"}),e.jsx("button",{type:"submit",className:"btn btn-info",disabled:h,children:h?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fa fa-spinner fa-spin"})," Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fa fa-save"})," Save Person"]})})]})]})]})})}):null}function Aq({isOpen:s,onClose:t,onSuccess:a,establishment:n}){const[r,i]=A.useState({name:"",type:"",number:"",expiry:"",quota:"0",username:"",password:""}),[o,c]=A.useState({letterhead:null,stamp:null,signature:null,tradeLicense:null,establishmentCard:null}),[u,h]=A.useState({letterhead:"",stamp:"",signature:"",tradeLicense:"",establishmentCard:""}),[m,p]=A.useState(!1),[y,g]=A.useState({});A.useEffect(()=>{s&&n&&(i({name:n.company_name||"",type:n.company_type||"",number:n.company_number||"",expiry:n.expiry_date||"",quota:n.quota?.toString()||"0",username:n.username||"",password:n.password||""}),h({letterhead:n.letterhead||"",stamp:n.stamp||"",signature:n.signature||"",tradeLicense:n.trade_license||"",establishmentCard:n.establishment_card||""}))},[s,n]);const j=v=>{const{name:S,value:E}=v.target;i(L=>({...L,[S]:E})),g(L=>({...L,[S]:""}))},b=(v,S)=>{const E=v.target.files?.[0]||null;c(L=>({...L,[S]:E}))},N=async v=>{if(v.preventDefault(),!!n){p(!0),g({});try{const S=new FormData;S.append("action","updateCompany"),S.append("idEdit",n.company_id.toString()),S.append("nameEdit",r.name),S.append("typeEdit",r.type),S.append("numberEdit",r.number),S.append("expiryEdit",r.expiry),S.append("quotaEdit",r.quota),S.append("usernameEdit",r.username),S.append("passwordEdit",r.password),o.letterhead&&S.append("letterHeadEdit",o.letterhead),o.stamp&&S.append("stampEdit",o.stamp),o.signature&&S.append("signatureEdit",o.signature),o.tradeLicense&&S.append("tradeLicenseEdit",o.tradeLicense),o.establishmentCard&&S.append("establishmentCardEdit",o.establishmentCard);const E=await Ne.post("/establishments/manage-establishments.php",S,{headers:{"Content-Type":"multipart/form-data"}});E.data&&E.data.success?(W.fire("Success",E.data.message||"Establishment updated successfully","success"),a(),t()):E.data&&E.data.message==="form_errors"?g(E.data.errors||{}):W.fire("Error",E.data?.message||"Failed to update establishment","error")}catch(S){console.error("Error updating establishment:",S),W.fire("Error",S.response?.data?.message||"Failed to update establishment","error")}finally{p(!1)}}};return!s||!n?null:e.jsx("div",{className:"modal fade show",style:{display:"block",background:"rgba(0,0,0,0.5)"},children:e.jsx("div",{className:"modal-dialog modal-lg",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header bg-warning",children:[e.jsxs("h3",{className:"modal-title text-white",children:[e.jsx("i",{className:"fa fa-edit"})," Edit Establishment"]}),e.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:t})]}),e.jsxs("form",{onSubmit:N,children:[e.jsx("div",{className:"modal-body",style:{maxHeight:"70vh",overflowY:"auto"},children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-12 mb-3",children:[e.jsxs("h5",{children:[e.jsx("i",{className:"fa fa-info-circle"})," Basic Information"]}),e.jsx("hr",{})]}),e.jsxs("div",{className:"col-md-8 mb-2",children:[e.jsxs("label",{className:"form-label",children:["Establishment Name ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"text",name:"name",className:`form-control ${y.nameEdit?"is-invalid":""}`,value:r.name,onChange:j}),y.nameEdit&&e.jsx("div",{className:"invalid-feedback d-block",children:y.nameEdit})]}),e.jsxs("div",{className:"col-md-4 mb-2",children:[e.jsxs("label",{className:"form-label",children:["Type ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("select",{name:"type",className:`form-select ${y.typeEdit?"is-invalid":""}`,value:r.type,onChange:j,children:[e.jsx("option",{value:"Mainland",children:"Mainland"}),e.jsx("option",{value:"Freezone",children:"Freezone"})]}),y.typeEdit&&e.jsx("div",{className:"invalid-feedback d-block",children:y.typeEdit})]}),e.jsxs("div",{className:"col-md-6 mb-2",children:[e.jsxs("label",{className:"form-label",children:["Company Number ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"text",name:"number",className:`form-control ${y.numberEdit?"is-invalid":""}`,value:r.number,onChange:j}),y.numberEdit&&e.jsx("div",{className:"invalid-feedback d-block",children:y.numberEdit})]}),e.jsxs("div",{className:"col-md-6 mb-2",children:[e.jsxs("label",{className:"form-label",children:["Expiry Date ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"date",name:"expiry",className:`form-control ${y.expiryEdit?"is-invalid":""}`,value:r.expiry,onChange:j}),y.expiryEdit&&e.jsx("div",{className:"invalid-feedback d-block",children:y.expiryEdit})]}),e.jsxs("div",{className:"col-md-6 mb-2",children:[e.jsxs("label",{className:"form-label",children:["Starting Quota ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"number",name:"quota",className:`form-control ${y.quotaEdit?"is-invalid":""}`,value:r.quota,onChange:j}),y.quotaEdit&&e.jsx("div",{className:"invalid-feedback d-block",children:y.quotaEdit})]}),e.jsxs("div",{className:"col-md-12 mb-3 mt-3",children:[e.jsxs("h5",{children:[e.jsx("i",{className:"fa fa-lock"})," Login Credentials"]}),e.jsx("hr",{})]}),e.jsxs("div",{className:"col-md-6 mb-2",children:[e.jsx("label",{className:"form-label",children:"Username"}),e.jsx("input",{type:"text",name:"username",className:"form-control",value:r.username,onChange:j})]}),e.jsxs("div",{className:"col-md-6 mb-2",children:[e.jsx("label",{className:"form-label",children:"Password"}),e.jsx("input",{type:"text",name:"password",className:"form-control",value:r.password,onChange:j})]}),e.jsxs("div",{className:"col-md-12 mb-3 mt-3",children:[e.jsxs("h5",{children:[e.jsx("i",{className:"fa fa-file"})," Standard Documents"]}),e.jsx("small",{className:"text-muted",children:"Upload new files only if you want to replace existing ones"}),e.jsx("hr",{})]}),e.jsxs("div",{className:"col-md-4 mb-2",children:[e.jsx("label",{className:"form-label",children:"Letterhead"}),e.jsx("input",{type:"file",className:"form-control",accept:"image/*",onChange:v=>b(v,"letterhead")}),u.letterhead&&e.jsxs("small",{className:"text-success",children:[e.jsx("i",{className:"fa fa-check"})," File exists"]})]}),e.jsxs("div",{className:"col-md-4 mb-2",children:[e.jsx("label",{className:"form-label",children:"Stamp"}),e.jsx("input",{type:"file",className:"form-control",accept:"image/*",onChange:v=>b(v,"stamp")}),u.stamp&&e.jsxs("small",{className:"text-success",children:[e.jsx("i",{className:"fa fa-check"})," File exists"]})]}),e.jsxs("div",{className:"col-md-4 mb-2",children:[e.jsx("label",{className:"form-label",children:"Signature"}),e.jsx("input",{type:"file",className:"form-control",accept:"image/*",onChange:v=>b(v,"signature")}),u.signature&&e.jsxs("small",{className:"text-success",children:[e.jsx("i",{className:"fa fa-check"})," File exists"]})]}),e.jsxs("div",{className:"col-md-6 mb-2",children:[e.jsx("label",{className:"form-label",children:"Trade License Copy"}),e.jsx("input",{type:"file",className:"form-control",accept:"image/*,.pdf",onChange:v=>b(v,"tradeLicense")}),u.tradeLicense&&e.jsxs("small",{className:"text-success",children:[e.jsx("i",{className:"fa fa-check"})," File exists"]})]}),e.jsxs("div",{className:"col-md-6 mb-2",children:[e.jsx("label",{className:"form-label",children:"Establishment Card"}),e.jsx("input",{type:"file",className:"form-control",accept:"image/*,.pdf",onChange:v=>b(v,"establishmentCard")}),u.establishmentCard&&e.jsxs("small",{className:"text-success",children:[e.jsx("i",{className:"fa fa-check"})," File exists"]})]})]})}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:t,children:"Close"}),e.jsx("button",{type:"submit",className:"btn btn-warning",disabled:m,children:m?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fa fa-spinner fa-spin"})," Updating..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fa fa-save"})," Update Establishment"]})})]})]})]})})})}function kq({isOpen:s,onClose:t,companyId:a,companyName:n}){const[r,i]=A.useState({}),[o,c]=A.useState([]),[u,h]=A.useState(!1),[m,p]=A.useState(!1),[y,g]=A.useState(""),[j,b]=A.useState(null),[N,v]=A.useState(!1),[S,E]=A.useState("");A.useEffect(()=>{s&&a&&L()},[s,a]);const L=async()=>{h(!0);try{const se=new FormData;se.append("action","getCompanyFiles"),se.append("companyId",a.toString());const X=await Ne.post("/establishments/manage-establishments.php",se,{headers:{"Content-Type":"multipart/form-data"}});X.data&&X.data.success&&(i(X.data.company||{}),c(X.data.additionalFiles||[]))}catch(se){console.error("Error loading files:",se),W.fire("Error","Failed to load attachments","error")}finally{h(!1)}},z=async se=>{if(se.preventDefault(),!y||!j){W.fire("Error","Please select file type and a file","error");return}p(!0);try{const X=new FormData;X.append("action","uploadCompanyFile"),X.append("companyId",a.toString()),X.append("fileName",y),X.append("file",j);const R=await Ne.post("/establishments/manage-establishments.php",X,{headers:{"Content-Type":"multipart/form-data"}});if(R.data&&R.data.success){W.fire("Success","File uploaded successfully","success"),g(""),b(null);const Q=document.querySelector('input[type="file"]');Q&&(Q.value=""),L()}else W.fire("Error",R.data?.message||"Failed to upload file","error")}catch(X){console.error("Error uploading file:",X),W.fire("Error",X.response?.data?.message||"Failed to upload file","error")}finally{p(!1)}},V=async(se,X)=>{v(!0),E(se);try{const R=new FormData;R.append("action","loadCompany"),R.append("companyId",a.toString());const Q=await Ne.post("/establishments/manage-establishments.php",R,{headers:{"Content-Type":"multipart/form-data"}});if(Q.data&&Q.data.success&&Q.data.company){const Y=Q.data.company,$=new FormData;$.append("action","updateCompany"),$.append("idEdit",a.toString()),$.append("nameEdit",Y.company_name),$.append("typeEdit",Y.company_type),$.append("numberEdit",Y.company_number),$.append("expiryEdit",Y.company_expiry||Y.expiry_date),$.append("quotaEdit",Y.starting_quota?.toString()||Y.quota?.toString()||"0"),$.append("usernameEdit",Y.username||""),$.append("passwordEdit",Y.password||"");const me={letterhead:"letterHeadEdit",stamp:"stampEdit",signature:"signatureEdit",trade_license_copy:"tradeLicenseEdit",establishment_card:"establishmentCardEdit"};$.append(me[se],X);const D=await Ne.post("/establishments/manage-establishments.php",$,{headers:{"Content-Type":"multipart/form-data"}});D.data&&D.data.success?(W.fire("Success","Document uploaded successfully","success"),L()):W.fire("Error",D.data?.message||"Failed to upload document","error")}else W.fire("Error","Failed to load company data","error")}catch(R){console.error("Error uploading standard document:",R),W.fire("Error",R.response?.data?.message||"Failed to upload document","error")}finally{v(!1),E("")}},te=async se=>{if((await W.fire({title:"Are you sure?",text:"This will delete the file permanently!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#dc3545",cancelButtonColor:"#6c757d",confirmButtonText:"Yes, delete it!"})).isConfirmed)try{const R=new FormData;R.append("action","deleteCompanyFile"),R.append("fileId",se.toString());const Q=await Ne.post("/establishments/manage-establishments.php",R,{headers:{"Content-Type":"multipart/form-data"}});Q.data&&Q.data.success?(W.fire("Deleted!","File has been deleted.","success"),L()):W.fire("Error",Q.data?.message||"Failed to delete file","error")}catch(R){console.error("Error deleting file:",R),W.fire("Error",R.response?.data?.message||"Failed to delete file","error")}},q=se=>{const X=se.toLowerCase();return["jpg","jpeg","png","gif","webp"].includes(X)?"fa-file-image":X==="pdf"?"fa-file-pdf":["doc","docx"].includes(X)?"fa-file-word":["xls","xlsx"].includes(X)?"fa-file-excel":"fa-file"},B=se=>{const X=se.toLowerCase();return["jpg","jpeg","png","gif","webp","bmp"].includes(X)},J=se=>se.toLowerCase()==="pdf",P=se=>`${Ct.baseUrl}/${se}`,K=(se,X)=>B(X)?P(se):null,H=se=>se>=1073741824?(se/1073741824).toFixed(2)+" GB":se>=1048576?(se/1048576).toFixed(2)+" MB":se>=1024?(se/1024).toFixed(2)+" KB":se+" bytes";return s?e.jsx("div",{className:"modal fade show",style:{display:"block",background:"rgba(0,0,0,0.5)"},children:e.jsx("div",{className:"modal-dialog modal-xl",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header bg-primary",children:[e.jsxs("h3",{className:"modal-title text-white",children:[e.jsx("i",{className:"fa fa-files-o"})," Attachments - ",n]}),e.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:t})]}),e.jsx("div",{className:"modal-body",style:{maxHeight:"70vh",overflowY:"auto"},children:u?e.jsx("div",{className:"text-center py-5",children:e.jsx("div",{className:"spinner-border text-primary"})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h5",{children:"Standard Documents"}),e.jsx("div",{className:"row",children:[{key:"letterhead",label:"Letterhead"},{key:"stamp",label:"Stamp"},{key:"signature",label:"Signature"},{key:"trade_license_copy",label:"Trade License"},{key:"establishment_card",label:"Establishment Card"}].map(se=>{const X=r[se.key]?r[se.key].split(".").pop():"",R=r[se.key]?`letters/${r[se.key]}`:"";return e.jsx("div",{className:"col-md-4 mb-3",children:e.jsxs("div",{className:"border rounded p-3",style:{minHeight:"200px"},children:[e.jsxs("strong",{className:"d-block mb-2",children:[se.label,":"]}),r[se.key]?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-2",style:{height:"120px",background:"#f5f5f5",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",border:"2px solid #dee2e6"},children:B(X)?e.jsx("img",{src:P(R),alt:se.label,style:{width:"100%",height:"100%",objectFit:"cover"},onError:Q=>{const Y=Q.target;Y.style.display="none";const $=Y.parentElement;$&&($.innerHTML='<i class="fa fa-file-image" style="font-size: 48px; color: #4CAF50"></i>')}}):J(X)?e.jsx("object",{data:`${P(R)}#page=1&zoom=50`,type:"application/pdf",style:{width:"100%",height:"100%",border:"none",pointerEvents:"none"},title:se.label,children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%"},children:[e.jsx("i",{className:"fa fa-file-pdf",style:{fontSize:"48px",color:"#F44336"}}),e.jsx("span",{style:{fontSize:"12px",color:"#666",marginTop:"10px"},children:"PDF Preview"})]})}):e.jsx("i",{className:`fa ${q(X)}`,style:{fontSize:"48px",color:"#2196F3"}})}),e.jsxs("div",{className:"d-flex gap-1 flex-wrap",children:[e.jsx("a",{href:P(R),target:"_blank",rel:"noopener noreferrer",className:"btn btn-sm btn-primary",style:{flex:"1"},children:e.jsx("i",{className:"fa fa-eye"})}),e.jsx("a",{href:P(R),download:!0,className:"btn btn-sm btn-info",children:e.jsx("i",{className:"fa fa-download"})}),e.jsxs("label",{className:"btn btn-sm btn-warning mb-0",style:{flex:"1"},children:[e.jsx("i",{className:"fa fa-upload"}),e.jsx("input",{type:"file",className:"d-none",accept:"image/*,.pdf",onChange:Q=>{const Y=Q.target.files?.[0];Y&&V(se.key,Y)},disabled:N&&S===se.key})]})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-2",style:{height:"120px",background:"#f8f9fa",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",border:"2px dashed #dee2e6"},children:e.jsxs("div",{className:"text-center",children:[e.jsx("i",{className:"fa fa-upload text-muted",style:{fontSize:"36px",opacity:.5}}),e.jsx("p",{className:"text-muted small mb-0 mt-2",children:"Not uploaded"})]})}),e.jsxs("label",{className:"btn btn-sm btn-success w-100 mb-0",children:[e.jsx("i",{className:"fa fa-upload"})," ",N&&S===se.key?"Uploading...":"Upload",e.jsx("input",{type:"file",className:"d-none",accept:"image/*,.pdf",onChange:Q=>{const Y=Q.target.files?.[0];Y&&V(se.key,Y)},disabled:N&&S===se.key})]})]})]})},se.key)})})]}),e.jsx("hr",{}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h5",{children:"Upload Additional Document"}),e.jsx("form",{onSubmit:z,children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-4 mb-2",children:e.jsxs("select",{className:"form-select",value:y,onChange:se=>g(se.target.value),required:!0,children:[e.jsx("option",{value:"",children:"Select document type"}),e.jsx("option",{value:"Contract",children:"Contract"}),e.jsx("option",{value:"Agreement",children:"Agreement"}),e.jsx("option",{value:"Invoice",children:"Invoice"}),e.jsx("option",{value:"Receipt",children:"Receipt"}),e.jsx("option",{value:"Certificate",children:"Certificate"}),e.jsx("option",{value:"License",children:"License"}),e.jsx("option",{value:"Permit",children:"Permit"}),e.jsx("option",{value:"Insurance",children:"Insurance"}),e.jsx("option",{value:"Other",children:"Other"})]})}),e.jsx("div",{className:"col-md-5 mb-2",children:e.jsx("input",{type:"file",className:"form-control",onChange:se=>b(se.target.files?.[0]||null),required:!0})}),e.jsx("div",{className:"col-md-3 mb-2",children:e.jsx("button",{type:"submit",className:"btn btn-success w-100",disabled:m,children:m?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fa fa-spinner fa-spin"})," Uploading..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fa fa-upload"})," Upload"]})})})]})})]}),e.jsx("hr",{}),e.jsxs("div",{children:[e.jsxs("h5",{children:["Additional Files (",o.length,")"]}),o.length===0?e.jsx("p",{className:"text-muted",children:"No additional files uploaded."}):e.jsx("div",{className:"row",children:o.map(se=>(K(se.file_path,se.file_extension),e.jsx("div",{className:"col-md-3 mb-3",children:e.jsxs("div",{className:"border rounded p-2",style:{minHeight:"250px"},children:[e.jsxs("div",{className:"position-relative",style:{height:"140px",background:B(se.file_extension)||J(se.file_extension)?"#f8f9fa":"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",cursor:"pointer"},onClick:()=>window.open(P(se.file_path),"_blank"),children:[B(se.file_extension)?e.jsx("img",{src:P(se.file_path),alt:se.display_name,style:{width:"100%",height:"100%",objectFit:"cover"},onError:X=>{const R=X.target;R.style.display="none";const Q=R.parentElement;if(Q){const Y=q(se.file_extension);Q.style.background="linear-gradient(135deg, #667eea 0%, #764ba2 100%)",Q.innerHTML=`<i class="fa ${Y}" style="font-size: 64px; color: white"></i>`}}}):J(se.file_extension)?e.jsx("object",{data:`${P(se.file_path)}#page=1&zoom=50`,type:"application/pdf",style:{width:"100%",height:"100%",border:"none",pointerEvents:"none"},title:se.display_name,children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%"},children:[e.jsx("i",{className:"fa fa-file-pdf",style:{fontSize:"64px",color:"#F44336",marginBottom:"10px"}}),e.jsx("span",{style:{fontSize:"12px",color:"#666"},children:"PDF Preview"})]})}):e.jsx("i",{className:`fa ${q(se.file_extension)}`,style:{fontSize:"64px",color:"white"}}),e.jsx("span",{className:"badge bg-primary position-absolute top-0 start-0 m-2",style:{fontSize:"10px"},children:se.display_name.toUpperCase()})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("strong",{className:"d-block text-truncate",title:se.display_name,style:{fontSize:"0.9rem"},children:se.display_name}),e.jsx("small",{className:"text-muted d-block",children:H(se.file_size)}),e.jsx("small",{className:"text-muted d-block",children:new Date(se.upload_date).toLocaleDateString()})]}),e.jsxs("div",{className:"d-flex gap-1",children:[e.jsx("a",{href:P(se.file_path),target:"_blank",rel:"noopener noreferrer",className:"btn btn-sm btn-primary flex-grow-1",children:e.jsx("i",{className:"fa fa-eye"})}),e.jsx("a",{href:P(se.file_path),download:!0,className:"btn btn-sm btn-info",children:e.jsx("i",{className:"fa fa-download"})}),e.jsx("button",{className:"btn btn-sm btn-danger",onClick:()=>te(se.file_id),children:e.jsx("i",{className:"fa fa-trash"})})]})]})},se.file_id)))})]})]})}),e.jsx("div",{className:"modal-footer",children:e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:t,children:"Close"})})]})})}):null}function Dq(){const s=Vn(),[t,a]=A.useState([]),[n,r]=A.useState([]),[i,o]=A.useState(!1),[c,u]=A.useState("all"),[h,m]=A.useState("manage"),[p,y]=A.useState(""),[g,j]=A.useState("name"),[b,N]=A.useState(1),[v,S]=A.useState(12),[E,L]=A.useState(1),[z,V]=A.useState(0),[te,q]=A.useState({all:0,mainland:0,freezone:0,missing:0,persons:0}),[B,J]=A.useState(!1),[P,K]=A.useState(!1),[H,se]=A.useState(!1),[X,R]=A.useState(!1),[Q,Y]=A.useState(null),[$,me]=A.useState(!1),[D,U]=A.useState(!1),[le,de]=A.useState(null),G=A.useCallback(async()=>{o(!0);try{const re=new FormData;re.append("action","searchCompanies"),re.append("filterType",c),re.append("search",p),re.append("sort",g),re.append("page",b.toString()),re.append("limit",v.toString());const ne=await Ne.post("/establishments/manage-establishments.php",re,{headers:{"Content-Type":"multipart/form-data"}});ne.data&&ne.data.success?(a(ne.data.companies||[]),L(ne.data.pagination?.totalPages||1),V(ne.data.pagination?.totalRecords||0)):W.fire("Error",ne.data?.message||"Failed to load establishments","error")}catch(re){console.error("Error loading establishments:",re),W.fire("Error",re.response?.data?.message||"Failed to load establishments","error")}finally{o(!1)}},[c,p,g,b,v]);A.useEffect(()=>{G()},[G]),A.useEffect(()=>{je(),De()},[]);const je=async()=>{try{const re=new FormData;re.append("action","getSidebarCounts");const ne=await Ne.post("/establishments/manage-establishments.php",re,{headers:{"Content-Type":"multipart/form-data"}});ne.data&&ne.data.success&&q(ne.data.counts||{all:0,mainland:0,freezone:0,missing:0,persons:0})}catch(re){console.error("Error loading sidebar counts:",re)}},De=async()=>{try{const re=new FormData;re.append("action","getPersons");const ne=await Ne.post("/establishments/manage-establishments.php",re,{headers:{"Content-Type":"multipart/form-data"}});if(ne.data&&ne.data.success){const Se=ne.data.persons||[];r(Se)}}catch(re){console.error("Error loading persons:",re)}},Pe=re=>{u(re),y(""),N(1)},ke=re=>{re.preventDefault(),N(1),G()},Ye=re=>{N(re),window.scrollTo({top:0,behavior:"smooth"})},Qe=re=>{S(parseInt(re.target.value)),N(1)},et=re=>{if(!re)return"N/A";try{return new Date(re).toLocaleDateString("en-US",{year:"numeric",month:"2-digit",day:"2-digit"})}catch{return"N/A"}},Xe=re=>{if(!re)return!1;try{return new Date(re)<new Date}catch{return!1}};return e.jsxs("div",{className:"manage-establishments-page",children:[e.jsxs("button",{className:"btn btn-primary d-md-none mb-3",onClick:()=>me(!$),style:{position:"fixed",top:"70px",left:"10px",zIndex:1030},children:[e.jsx("i",{className:"fa fa-bars"})," Filters"]}),$&&e.jsx("div",{className:"d-md-none",style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",zIndex:1019},onClick:()=>me(!1)}),e.jsxs("div",{className:"sidebar d-none d-md-block",children:[e.jsxs("div",{className:"sidebar-header",children:[e.jsxs("h4",{className:"sidebar-title",children:[e.jsx("i",{className:"fa fa-building"})," Establishments"]}),e.jsx("p",{className:"sidebar-subtitle",children:"Filter & Manage"})]}),e.jsxs("ul",{className:"sidebar-nav",children:[e.jsx("li",{className:"sidebar-nav-item",children:e.jsxs("a",{href:"#",className:`sidebar-nav-link ${h==="establishments"?"active":""}`,onClick:re=>{re.preventDefault(),m("establishments")},children:[e.jsx("i",{className:"fa fa-building"}),e.jsx("span",{children:"Establishment"})]})}),e.jsx("li",{className:"sidebar-nav-item",children:e.jsxs("a",{href:"#",className:`sidebar-nav-link ${h==="manage"&&c==="all"?"active":""}`,onClick:re=>{re.preventDefault(),m("manage"),Pe("all")},children:[e.jsx("i",{className:"fa fa-list"}),e.jsx("span",{children:"All Establishments"}),e.jsx("span",{className:"nav-count",children:te.all})]})}),e.jsx("li",{className:"sidebar-nav-item",children:e.jsxs("a",{href:"#",className:`sidebar-nav-link ${h==="manage"&&c==="Mainland"?"active":""}`,onClick:re=>{re.preventDefault(),m("manage"),Pe("Mainland")},children:[e.jsx("i",{className:"fa fa-building"}),e.jsx("span",{children:"Mainland"}),e.jsx("span",{className:"nav-count",children:te.mainland})]})}),e.jsx("li",{className:"sidebar-nav-item",children:e.jsxs("a",{href:"#",className:`sidebar-nav-link ${h==="manage"&&c==="Freezone"?"active":""}`,onClick:re=>{re.preventDefault(),m("manage"),Pe("Freezone")},children:[e.jsx("i",{className:"fa fa-globe"}),e.jsx("span",{children:"Freezone"}),e.jsx("span",{className:"nav-count",children:te.freezone})]})}),e.jsx("li",{className:"sidebar-nav-item",children:e.jsxs("a",{href:"#",className:`sidebar-nav-link ${h==="manage"&&c==="missing"?"active":""}`,onClick:re=>{re.preventDefault(),m("manage"),Pe("missing")},children:[e.jsx("i",{className:"fa fa-exclamation-triangle"}),e.jsx("span",{children:"Missing Documents"}),e.jsx("span",{className:"nav-count",children:te.missing})]})}),e.jsx("li",{className:"sidebar-nav-item",children:e.jsxs("a",{href:"#",className:`sidebar-nav-link ${h==="manage"&&c==="persons"?"active":""}`,onClick:re=>{re.preventDefault(),m("manage"),Pe("persons")},children:[e.jsx("i",{className:"fa fa-users"}),e.jsx("span",{children:"Persons"}),e.jsx("span",{className:"nav-count",children:te.persons})]})})]})]}),e.jsxs("div",{className:`sidebar d-md-none ${$?"mobile-open":""}`,style:{zIndex:1020},children:[e.jsx("div",{className:"sidebar-header",children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"sidebar-title",children:[e.jsx("i",{className:"fa fa-building"})," Establishments"]}),e.jsx("p",{className:"sidebar-subtitle",children:"Filter & Manage"})]}),e.jsx("button",{className:"btn btn-sm btn-link text-white",onClick:()=>me(!1),children:e.jsx("i",{className:"fa fa-times"})})]})}),e.jsxs("ul",{className:"sidebar-nav",children:[e.jsx("li",{className:"sidebar-nav-item",children:e.jsxs("a",{href:"#",className:`sidebar-nav-link ${h==="establishments"?"active":""}`,onClick:re=>{re.preventDefault(),m("establishments"),me(!1)},children:[e.jsx("i",{className:"fa fa-building"}),e.jsx("span",{children:"Establishment"})]})}),e.jsx("li",{className:"sidebar-nav-item",children:e.jsxs("a",{href:"#",className:`sidebar-nav-link ${h==="manage"&&c==="all"?"active":""}`,onClick:re=>{re.preventDefault(),m("manage"),Pe("all"),me(!1)},children:[e.jsx("i",{className:"fa fa-list"}),e.jsx("span",{children:"All Establishments"}),e.jsx("span",{className:"nav-count",children:te.all})]})}),e.jsx("li",{className:"sidebar-nav-item",children:e.jsxs("a",{href:"#",className:`sidebar-nav-link ${h==="manage"&&c==="Mainland"?"active":""}`,onClick:re=>{re.preventDefault(),m("manage"),Pe("Mainland"),me(!1)},children:[e.jsx("i",{className:"fa fa-building"}),e.jsx("span",{children:"Mainland"}),e.jsx("span",{className:"nav-count",children:te.mainland})]})}),e.jsx("li",{className:"sidebar-nav-item",children:e.jsxs("a",{href:"#",className:`sidebar-nav-link ${h==="manage"&&c==="Freezone"?"active":""}`,onClick:re=>{re.preventDefault(),m("manage"),Pe("Freezone"),me(!1)},children:[e.jsx("i",{className:"fa fa-globe"}),e.jsx("span",{children:"Freezone"}),e.jsx("span",{className:"nav-count",children:te.freezone})]})}),e.jsx("li",{className:"sidebar-nav-item",children:e.jsxs("a",{href:"#",className:`sidebar-nav-link ${h==="manage"&&c==="missing"?"active":""}`,onClick:re=>{re.preventDefault(),m("manage"),Pe("missing"),me(!1)},children:[e.jsx("i",{className:"fa fa-exclamation-triangle"}),e.jsx("span",{children:"Missing Documents"}),e.jsx("span",{className:"nav-count",children:te.missing})]})}),e.jsx("li",{className:"sidebar-nav-item",children:e.jsxs("a",{href:"#",className:`sidebar-nav-link ${h==="manage"&&c==="persons"?"active":""}`,onClick:re=>{re.preventDefault(),m("manage"),Pe("persons"),me(!1)},children:[e.jsx("i",{className:"fa fa-users"}),e.jsx("span",{children:"Persons"}),e.jsx("span",{className:"nav-count",children:te.persons})]})})]})]}),e.jsx("div",{className:"main-content",children:h==="establishments"?e.jsx("div",{className:"embedded-establishments-view",children:e.jsx(rA,{embedded:!0})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"row mb-4",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsxs("h3",{children:[e.jsx("i",{className:"fa fa-building"})," Manage Establishments"]}),e.jsx("p",{className:"text-muted",children:"Organize and manage your business establishments"})]}),e.jsx("div",{className:"col-md-6 text-end",children:e.jsxs("div",{className:"btn-group",role:"group",children:[e.jsxs("button",{className:"btn btn-info btn-lg",onClick:()=>K(!0),children:[e.jsx("i",{className:"fa fa-user-plus"})," Add New Person"]}),e.jsxs("button",{className:"btn btn-success btn-lg",onClick:()=>J(!0),children:[e.jsx("i",{className:"fa fa-plus"})," Add New Establishment"]}),e.jsxs("button",{className:"btn btn-purple btn-lg",onClick:()=>R(!0),children:[e.jsx("i",{className:"fa fa-magic"})," AI Design Generator"]})]})})]}),e.jsx("div",{className:"search-container",children:e.jsx("form",{onSubmit:ke,children:e.jsxs("div",{className:"row align-items-end",children:[e.jsxs("div",{className:"col-md-6 mb-2",children:[e.jsx("label",{htmlFor:"search",className:"form-label",children:"Search Establishments"}),e.jsx("input",{type:"text",id:"search",className:"form-control form-control-lg",placeholder:"Search by company name or number...",value:p,onChange:re=>y(re.target.value)})]}),e.jsxs("div",{className:"col-md-3 mb-2",children:[e.jsx("label",{htmlFor:"sort",className:"form-label",children:"Sort By"}),e.jsxs("select",{id:"sort",className:"form-select form-select-lg",value:g,onChange:re=>j(re.target.value),children:[e.jsx("option",{value:"name",children:"Company Name"}),e.jsx("option",{value:"expiry",children:"Expiry Date"}),e.jsx("option",{value:"quota",children:"Quota"})]})]}),e.jsx("div",{className:"col-md-3 mb-2",children:e.jsxs("button",{type:"submit",className:"btn btn-primary btn-lg w-100",children:[e.jsx("i",{className:"fa fa-search"})," Search"]})})]})})}),e.jsx("div",{className:"row",id:"establishmentsContainer",children:i?e.jsx("div",{className:"col-12 text-center py-5",children:e.jsx("div",{className:"spinner-border text-primary",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):c==="persons"?n.length===0?e.jsx("div",{className:"col-12 text-center py-5",children:e.jsx("p",{className:"text-muted",children:"No persons found."})}):n.map(re=>e.jsx("div",{className:"col-md-6 col-lg-4 mb-4",children:e.jsxs("div",{className:"establishment-card",children:[e.jsx("div",{className:"card-header-custom",children:e.jsx("h5",{className:"mb-0",children:re.person_name||re.full_name})}),e.jsxs("div",{className:"card-body-custom",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Role:"})," ",re.person_role||re.role||"Not specified"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Passport:"})," ",re.passport_number||"Not specified"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Emirates ID:"})," ",re.emirates_id||"Not specified"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Phone:"})," ",re.phone||"Not specified"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Email:"})," ",re.email||"Not specified"]}),re.nationality&&e.jsxs("p",{children:[e.jsx("strong",{children:"Nationality:"})," ",re.nationality]}),e.jsx("div",{className:"mt-3",children:e.jsxs("small",{className:"text-muted d-block mb-2",children:[e.jsx("i",{className:"fa fa-info-circle"}),' To add more details, use "Add New Person" with complete information']})})]})]})},re.person_id)):t.length===0?e.jsx("div",{className:"col-12 text-center py-5",children:e.jsx("p",{className:"text-muted",children:"No establishments found."})}):t.map(re=>e.jsx("div",{className:"col-md-6 col-lg-4 mb-4",children:e.jsxs("div",{className:`establishment-card ${re.missing_documents&&re.missing_documents.length>0?"missing-docs-card":""}`,children:[e.jsxs("div",{className:"card-header-custom",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsx("h5",{className:"mb-0",children:re.company_name}),re.missing_documents&&re.missing_documents.length>0&&e.jsx("div",{className:"missing-doc-indicator",children:re.missing_documents.length})]}),e.jsx("span",{className:`establishment-badge ${re.company_type==="Mainland"?"mainland-badge":"freezone-badge"}`,children:re.company_type})]}),e.jsxs("div",{className:"card-body-custom",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Company Number:"})," ",re.company_number]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Expiry Date:"}),e.jsxs("span",{className:Xe(re.expiry_date)?"text-danger":"",children:[" ",et(re.expiry_date)]})]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Quota:"})," ",re.quota||0]}),re.missing_documents&&re.missing_documents.length>0&&e.jsxs("div",{className:"missing-docs-list",children:[e.jsx("strong",{children:"Missing Documents:"}),re.missing_documents.map((ne,Se)=>e.jsx("span",{className:"missing-doc-item",children:ne},Se))]}),e.jsxs("div",{className:"action-buttons mt-3",children:[e.jsxs("button",{className:"btn btn-primary btn-action",onClick:()=>{Y(re),se(!0)},children:[e.jsx("i",{className:"fa fa-edit"})," Edit"]}),e.jsxs("button",{className:"btn btn-success btn-action",onClick:()=>{de(re),U(!0)},children:[e.jsx("i",{className:"fa fa-paperclip"})," Attachments"]}),e.jsxs("button",{className:"btn btn-info btn-action",onClick:()=>s(`/establishments/${re.company_id}/employees`),children:[e.jsx("i",{className:"fa fa-users"})," Employees"]}),e.jsxs("button",{className:"btn btn-danger btn-action",onClick:async()=>{if((await W.fire({title:"Are you sure?",text:"This will delete the establishment permanently!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#dc3545",cancelButtonColor:"#6c757d",confirmButtonText:"Yes, delete it!"})).isConfirmed)try{const Se=new FormData;Se.append("action","deleteCompany"),Se.append("companyId",re.company_id.toString());const Ve=await Ne.post("/establishments/manage-establishments.php",Se,{headers:{"Content-Type":"multipart/form-data"}});Ve.data&&Ve.data.success?(W.fire("Deleted!",Ve.data.message||"Establishment has been deleted.","success"),G(),je()):W.fire("Error",Ve.data?.message||"Failed to delete establishment","error")}catch(Se){W.fire("Error",Se.response?.data?.message||"Failed to delete establishment","error")}},children:[e.jsx("i",{className:"fa fa-trash"})," Delete"]})]})]})]})},re.company_id))}),!i&&t.length>0&&E>1&&e.jsx("div",{className:"row mt-4",children:e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center flex-wrap",children:[e.jsxs("div",{className:"d-flex align-items-center mb-2",children:[e.jsx("label",{htmlFor:"recordsPerPage",className:"me-2 mb-0",children:"Records per page:"}),e.jsxs("select",{id:"recordsPerPage",className:"form-select form-select-sm",style:{width:"auto"},value:v,onChange:Qe,children:[e.jsx("option",{value:"6",children:"6"}),e.jsx("option",{value:"12",children:"12"}),e.jsx("option",{value:"24",children:"24"}),e.jsx("option",{value:"48",children:"48"})]}),e.jsxs("span",{className:"ms-3 text-muted",children:["Showing ",(b-1)*v+1," to ",Math.min(b*v,z)," of ",z," records"]})]}),e.jsx("nav",{children:e.jsxs("ul",{className:"pagination mb-0",children:[e.jsx("li",{className:`page-item ${b===1?"disabled":""}`,children:e.jsxs("button",{className:"page-link",onClick:()=>Ye(b-1),disabled:b===1,children:[e.jsx("i",{className:"fa fa-chevron-left"})," Previous"]})}),Array.from({length:Math.min(5,E)},(re,ne)=>{let Se;return E<=5||b<=3?Se=ne+1:b>=E-2?Se=E-4+ne:Se=b-2+ne,e.jsx("li",{className:`page-item ${b===Se?"active":""}`,children:e.jsx("button",{className:"page-link",onClick:()=>Ye(Se),children:Se})},Se)}),e.jsx("li",{className:`page-item ${b===E?"disabled":""}`,children:e.jsxs("button",{className:"page-link",onClick:()=>Ye(b+1),disabled:b===E,children:["Next ",e.jsx("i",{className:"fa fa-chevron-right"})]})})]})})]})})})]})}),e.jsx(Sq,{isOpen:B,onClose:()=>J(!1),onSuccess:()=>{G(),je()}}),e.jsx(Cq,{isOpen:P,onClose:()=>K(!1),onSuccess:()=>{De(),je()}}),e.jsx(Aq,{isOpen:H,onClose:()=>{se(!1),Y(null)},onSuccess:()=>{G(),je()},establishment:Q}),e.jsx(kq,{isOpen:D,onClose:()=>{U(!1),de(null)},companyId:le?.company_id||0,companyName:le?.company_name||""})]})}const Go={getTransactions:async s=>{const t={action:"searchTransactions"};s?.start_date&&(t.start_date=s.start_date),s?.end_date&&(t.end_date=s.end_date),s?.customer&&(t.customer=s.customer.toString()),s?.type&&(t.type=s.type.toString()),s?.account&&(t.account=s.account.toString()),s?.status&&(t.status=s.status),s?.search&&(t.search=s.search);const a=await Ne.post("/amer/transactions.php",t);return console.log("Transactions response:",a.data),a.data.success&&a.data.data?Array.isArray(a.data.data)?a.data.data:[]:Array.isArray(a.data)?a.data:Array.isArray(a.data.data)?a.data.data:[]},getTransaction:async s=>(await Ne.post("/amer/transactions.php",{action:"getTransaction",id:s})).data.data,createTransaction:async s=>{await Ne.post("/amer/transactions.php",{action:"addTransaction",...s})},updateTransaction:async(s,t)=>{await Ne.post("/amer/transactions.php",{action:"updateTransaction",id:s,...t})},deleteTransaction:async s=>{await Ne.post("/amer/transactions.php",{action:"deleteTransaction",id:s})},changeStatus:async(s,t)=>{await Ne.post("/amer/transactions.php",{action:"changeStatus",id:s,status:t})},getTypes:async()=>(await Ne.get("/amer/types.php")).data.data||[],getType:async s=>(await Ne.post("/amer/types.php",{action:"getType",id:s})).data.data,createType:async s=>{await Ne.post("/amer/types.php",{action:"addType",...s})},updateType:async(s,t)=>{await Ne.post("/amer/types.php",{action:"updateType",id:s,...t})},deleteType:async s=>{await Ne.post("/amer/types.php",{action:"deleteType",id:s})},getDropdowns:async()=>{const s=await Ne.get("/amer/dropdowns.php");return console.log("Dropdowns response:",s.data),s.data.success&&s.data.data?s.data.data:s.data}},$g=()=>new Date().toISOString().split("T")[0],M_=()=>{const s=new Date;return new Date(s.getFullYear(),s.getMonth(),1).toISOString().split("T")[0]};function Eq(){const[s,t]=A.useState("transactions"),[a,n]=A.useState({start_date:M_(),end_date:$g()}),[r,i]=A.useState(""),[o,c]=A.useState({isOpen:!1,transaction:null}),[u,h]=A.useState({isOpen:!1,type:null}),[m,p]=A.useState({isOpen:!1,transaction:null}),y=Wa(),{data:g,isLoading:j,error:b}=Rt({queryKey:["amer-dropdowns"],queryFn:()=>Go.getDropdowns(),retry:2});A.useEffect(()=>{b&&(console.error("Error loading dropdowns:",b),W.fire("Error","Failed to load dropdown data. Please refresh the page.","error"))},[b]);const{data:N=[],isLoading:v,refetch:S}=Rt({queryKey:["amer-transactions",a],queryFn:()=>Go.getTransactions(a)}),{data:E=[],isLoading:L,refetch:z}=Rt({queryKey:["amer-types"],queryFn:()=>Go.getTypes()}),V=wt({mutationFn:G=>Go.createTransaction(G),onSuccess:()=>{y.invalidateQueries({queryKey:["amer-transactions"]}),c({isOpen:!1,transaction:null}),W.fire("Success","Transaction added successfully","success")},onError:G=>{W.fire("Error",G.response?.data?.message||"Failed to add transaction","error")}}),te=wt({mutationFn:({id:G,data:je})=>Go.updateTransaction(G,je),onSuccess:()=>{y.invalidateQueries({queryKey:["amer-transactions"]}),c({isOpen:!1,transaction:null}),W.fire("Success","Transaction updated successfully","success")},onError:G=>{W.fire("Error",G.response?.data?.message||"Failed to update transaction","error")}}),q=wt({mutationFn:G=>Go.deleteTransaction(G),onSuccess:()=>{y.invalidateQueries({queryKey:["amer-transactions"]}),W.fire("Success","Transaction deleted successfully","success")},onError:G=>{W.fire("Error",G.response?.data?.message||"Failed to delete transaction","error")}}),B=wt({mutationFn:({id:G,status:je})=>Go.changeStatus(G,je),onSuccess:()=>{y.invalidateQueries({queryKey:["amer-transactions"]}),p({isOpen:!1,transaction:null}),W.fire("Success","Status updated successfully","success")},onError:G=>{W.fire("Error",G.response?.data?.message||"Failed to update status","error")}}),J=wt({mutationFn:G=>Go.createType(G),onSuccess:()=>{y.invalidateQueries({queryKey:["amer-types"]}),h({isOpen:!1,type:null}),W.fire("Success","Type added successfully","success")},onError:G=>{W.fire("Error",G.response?.data?.message||"Failed to add type","error")}}),P=wt({mutationFn:({id:G,data:je})=>Go.updateType(G,je),onSuccess:()=>{y.invalidateQueries({queryKey:["amer-types"]}),h({isOpen:!1,type:null}),W.fire("Success","Type updated successfully","success")},onError:G=>{W.fire("Error",G.response?.data?.message||"Failed to update type","error")}}),K=wt({mutationFn:G=>Go.deleteType(G),onSuccess:()=>{y.invalidateQueries({queryKey:["amer-types"]}),W.fire("Success","Type deleted successfully","success")},onError:G=>{W.fire("Error",G.response?.data?.message||"Failed to delete type","error")}}),H=()=>{S()},se=()=>{n({start_date:M_(),end_date:$g()}),i("")},X=()=>{c({isOpen:!0,transaction:null})},R=async G=>{c({isOpen:!0,transaction:G})},Q=G=>{W.fire({title:"Are you sure?",text:"This will permanently delete this transaction",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"}).then(je=>{je.isConfirmed&&q.mutate(G)})},Y=G=>{p({isOpen:!0,transaction:G})},$=G=>{m.transaction&&B.mutate({id:m.transaction.id,status:G})},me=()=>{h({isOpen:!0,type:null})},D=G=>{h({isOpen:!0,type:G})},U=G=>{W.fire({title:"Are you sure?",text:"This will permanently delete this type",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"}).then(je=>{je.isConfirmed&&K.mutate(G)})},le=G=>({pending:"bg-warning",completed:"bg-success",rejected:"bg-danger",refunded:"bg-info",visit_required:"bg-warning"})[G]||"bg-secondary",de=N.filter(G=>{if(!r)return!0;const je=r.toLowerCase();return G.transaction_number.toLowerCase().includes(je)||G.application_number.toLowerCase().includes(je)||G.passenger_name.toLowerCase().includes(je)||G.customer_name&&G.customer_name.toLowerCase().includes(je)||G.iban&&G.iban.toLowerCase().includes(je)});return e.jsxs("div",{className:"amer-transactions-page",children:[e.jsxs("div",{className:"page-header",children:[e.jsx("h1",{children:"Amer Transactions"}),e.jsxs("div",{className:"tabs",children:[e.jsx("button",{className:`tab ${s==="transactions"?"active":""}`,onClick:()=>t("transactions"),children:"Transactions"}),e.jsx("button",{className:`tab ${s==="types"?"active":""}`,onClick:()=>t("types"),children:"Transaction Types"})]})]}),s==="transactions"&&e.jsxs("div",{className:"transactions-section",children:[e.jsxs("div",{className:"panel",children:[e.jsxs("div",{className:"panel-header",children:[e.jsx("h3",{children:"Search Transactions"}),e.jsx("button",{className:"btn btn-success",onClick:X,children:"Add Transaction"})]}),e.jsx("div",{className:"panel-body",children:e.jsx("div",{className:"search-filters",children:e.jsxs("div",{className:"filter-row",children:[e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"From Date"}),e.jsx("input",{type:"date",value:a.start_date||"",onChange:G=>n({...a,start_date:G.target.value}),className:"form-control"})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"To Date"}),e.jsx("input",{type:"date",value:a.end_date||"",onChange:G=>n({...a,end_date:G.target.value}),className:"form-control"})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"Customer"}),e.jsx(It,{options:[{value:"",label:"All"},...g?.customers?.map(G=>({value:G.customer_id,label:G.customer_name}))||[]],value:a.customer||"",onChange:G=>n({...a,customer:G?Number(G):void 0}),placeholder:"All"})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"Type"}),e.jsx(It,{options:[{value:"",label:"All"},...g?.types?.map(G=>({value:G.id,label:G.name}))||[]],value:a.type||"",onChange:G=>n({...a,type:G?Number(G):void 0}),placeholder:"All"})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"Account"}),e.jsx(It,{options:[{value:"",label:"All Accounts"},...g?.accounts?.map(G=>({value:G.account_ID,label:G.account_Name}))||[]],value:a.account||"",onChange:G=>n({...a,account:G?Number(G):void 0}),placeholder:"All Accounts"})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"Status"}),e.jsxs("select",{value:a.status||"",onChange:G=>n({...a,status:G.target.value||void 0}),className:"form-control",children:[e.jsx("option",{value:"",children:"All"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"rejected",children:"Rejected"}),e.jsx("option",{value:"refunded",children:"Refunded"}),e.jsx("option",{value:"visit_required",children:"Visit Required"})]})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"Search"}),e.jsx("input",{type:"text",value:r,onChange:G=>i(G.target.value),placeholder:"Search...",className:"form-control"})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:""}),e.jsxs("div",{className:"button-group",children:[e.jsxs("button",{className:"btn btn-primary",onClick:H,children:[e.jsx("i",{className:"fa fa-filter"})," Search"]}),e.jsx("button",{className:"btn btn-secondary",onClick:se,children:"Reset"})]})]})]})})})]}),e.jsxs("div",{className:"panel",children:[e.jsx("div",{className:"panel-header",children:e.jsx("h3",{children:"Transactions"})}),e.jsx("div",{className:"panel-body",children:v?e.jsx("div",{className:"text-center p-4",children:"Loading..."}):e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-striped table-bordered",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"ID"}),e.jsx("th",{children:"Customer / Passenger"}),e.jsx("th",{children:"Transaction Details"}),e.jsx("th",{children:"Account"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Net Cost"}),e.jsx("th",{children:"Sale Cost"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:de.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"text-center",children:"No transactions found"})}):de.map(G=>e.jsxs("tr",{children:[e.jsx("td",{children:G.id}),e.jsxs("td",{children:[e.jsx("strong",{children:G.customer_name}),e.jsx("br",{}),G.passenger_name]}),e.jsxs("td",{children:["Type: ",e.jsx("strong",{children:G.type_name}),e.jsx("br",{}),"Trx# ",G.transaction_number,e.jsx("br",{}),"App# ",G.application_number,e.jsx("br",{}),"Payment Date: ",new Date(G.payment_date).toLocaleDateString(),e.jsx("br",{}),"IBAN: ",G.iban||"N/A"]}),e.jsx("td",{children:e.jsx("strong",{children:G.account_Name||"No Account"})}),e.jsx("td",{children:e.jsx("span",{className:`badge ${le(G.status)}`,children:G.status})}),e.jsx("td",{children:G.cost_price}),e.jsx("td",{children:G.sale_price}),e.jsx("td",{children:e.jsxs("div",{className:"action-buttons",children:[e.jsx("button",{className:"btn btn-sm btn-warning",onClick:()=>R(G),children:"Edit"}),e.jsx("button",{className:"btn btn-sm btn-danger",onClick:()=>Q(G.id),children:"Delete"}),e.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>Y(G),children:"Change Status"})]})})]},G.id))})]})})})]})]}),s==="types"&&e.jsx("div",{className:"types-section",children:e.jsxs("div",{className:"panel",children:[e.jsxs("div",{className:"panel-header",children:[e.jsx("h3",{children:"Transaction Types"}),e.jsx("button",{className:"btn btn-success",onClick:me,children:"Add Type"})]}),e.jsx("div",{className:"panel-body",children:L?e.jsx("div",{className:"text-center p-4",children:"Loading..."}):e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-striped table-bordered",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"ID"}),e.jsx("th",{children:"Type"}),e.jsx("th",{children:"Cost Price"}),e.jsx("th",{children:"Sale Price"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:E.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"text-center",children:"No types found"})}):E.map(G=>e.jsxs("tr",{children:[e.jsx("td",{children:G.id}),e.jsx("td",{children:G.name}),e.jsx("td",{children:G.cost_price}),e.jsx("td",{children:G.sale_price}),e.jsxs("td",{children:[e.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>D(G),children:"Edit"}),e.jsx("button",{className:"btn btn-sm btn-danger",onClick:()=>U(G.id),children:"Delete"})]})]},G.id))})]})})})]})}),o.isOpen&&e.jsx(Tq,{transaction:o.transaction,dropdowns:g,onClose:()=>c({isOpen:!1,transaction:null}),onSubmit:G=>{o.transaction?te.mutate({id:o.transaction.id,data:G}):V.mutate(G)}}),u.isOpen&&e.jsx(Lq,{type:u.type,onClose:()=>h({isOpen:!1,type:null}),onSubmit:G=>{u.type?P.mutate({id:u.type.id,data:G}):J.mutate(G)}}),m.isOpen&&m.transaction&&e.jsx(Pq,{transaction:m.transaction,onClose:()=>p({isOpen:!1,transaction:null}),onSubmit:$})]})}function Tq({transaction:s,dropdowns:t,onClose:a,onSubmit:n}){const[r,i]=A.useState({customer_id:s?.customer_id||void 0,passenger_name:s?.passenger_name||"",type_id:s?.type_id||void 0,application_number:s?.application_number||"",transaction_number:s?.transaction_number||"",payment_date:s?.payment_date||$g(),cost_price:s?.cost_price||"",sale_price:s?.sale_price||"",iban:s?.iban||"",account_id:s?.account_id||void 0,created_by:s?.created_by||void 0,status:s?.status||"pending"}),[o,c]=A.useState({}),[u,h]=A.useState(""),m=A.useRef(null);A.useEffect(()=>{s?i({customer_id:s.customer_id,passenger_name:s.passenger_name,type_id:s.type_id,application_number:s.application_number,transaction_number:s.transaction_number,payment_date:s.payment_date,cost_price:s.cost_price,sale_price:s.sale_price,iban:s.iban||"",account_id:s.account_id,created_by:s.created_by,status:s.status}):(i({customer_id:void 0,passenger_name:"",type_id:void 0,application_number:"",transaction_number:"",payment_date:$g(),cost_price:"",sale_price:"",iban:"",account_id:void 0,created_by:void 0,status:"pending"}),h(""),m.current&&(m.current.value=""))},[s]),A.useEffect(()=>{if(window.pdfjsLib)window.pdfjsLib.GlobalWorkerOptions.workerSrc="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.9.359/pdf.worker.min.js";else{const b=document.createElement("script");b.src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.9.359/pdf.min.js",b.onload=()=>{window.pdfjsLib&&(window.pdfjsLib.GlobalWorkerOptions.workerSrc="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.9.359/pdf.worker.min.js")},document.head.appendChild(b)}},[]);const p=async b=>{if(!window.pdfjsLib){h("PDF.js library is loading. Please try again in a moment.");return}h("Processing PDF...");try{const N=await b.arrayBuffer(),v=await window.pdfjsLib.getDocument(N).promise,S=v.numPages;let E="";for(let te=1;te<=S;te++){const B=await(await v.getPage(te)).getTextContent();E+=B.items.map(J=>J.str).join(" ")+" "}console.log("Full Extracted Text (All Pages):",E);const L={passenger_name:/Name:\s+([A-Z][A-Z\s]+)(?=\s+[-])/i,transaction_type:/(?:New Work Entry Permit - Employee|Transaction Type:?\s*([\w\s]+))/i,application_number:/Application #:\s+(\d+)/i,transaction_number:/Trans\. #:\s+(\d+)/i,payment_date:/Payment Date:\s+(?:\d{2}:\d{2}:\d{2}\s+)?(\d{2}-\d{2}-\d{4})/i,grand_total:/Grand Total\s+([\d,]+\.?\d*)/i,iban:/IBAN #:\s+([A-Z0-9-\s]+|-)/i},z={};for(const[te,q]of Object.entries(L)){const B=E.match(q);B&&(z[te]=te==="transaction_type"?B[1]?B[1].trim():"New Work Entry Permit - Employee":B[1].trim(),console.log(`Matched ${te}: "${z[te]}"`))}if(z.payment_date){const[te,q,B]=z.payment_date.split("-");z.payment_date=`${B}-${q}-${te}`,console.log(`Converted payment_date: "${z.payment_date}"`)}const V={...r};if(z.passenger_name&&(V.passenger_name=z.passenger_name),z.transaction_type&&t?.types){const te=t.types.find(q=>q.name.trim().toLowerCase()===z.transaction_type.toLowerCase());te&&(V.type_id=te.id,V.sale_price=te.sale_price)}z.application_number&&(V.application_number=z.application_number),z.transaction_number&&(V.transaction_number=z.transaction_number),z.payment_date&&(V.payment_date=z.payment_date),z.grand_total&&(V.cost_price=z.grand_total.replace(/,/g,"")),z.iban&&(V.iban=z.iban==="-"?"":z.iban),i(V),z.passenger_name&&!z.application_number&&!z.transaction_number?h("Warning: Only passenger name was extracted. Please check the PDF format."):h("PDF data loaded successfully")}catch(N){console.error("Error processing PDF:",N),h("Error reading PDF file. Please check the file format.")}},y=b=>{const N=b.target.files?.[0];N&&N.type==="application/pdf"?p(N):N&&h("Please upload a valid PDF file")},g=b=>{const N=t?.types.find(v=>v.id===b);N&&i({...r,type_id:b,sale_price:N.sale_price})},j=b=>{b.preventDefault();const N={};if(r.customer_id||(N.customer_id="Customer is required"),r.passenger_name||(N.passenger_name="Passenger Name is required"),r.type_id||(N.type_id="Type is required"),r.application_number||(N.application_number="Application Number is required"),r.transaction_number||(N.transaction_number="Transaction Number is required"),r.payment_date||(N.payment_date="Payment Date is required"),r.cost_price||(N.cost_price="Net Cost is required"),r.sale_price||(N.sale_price="Sale Cost is required"),r.account_id||(N.account_id="Account is required"),r.created_by||(N.created_by="Staff Member is required"),Object.keys(N).length>0){c(N);return}n(r)};return e.jsx("div",{className:"modal-overlay",onClick:a,children:e.jsxs("div",{className:"modal-content",onClick:b=>b.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{children:s?"Edit Transaction":"New Transaction"}),e.jsx("button",{className:"btn-close",onClick:a,children:""})]}),e.jsxs("form",{onSubmit:j,children:[e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:["Customer Name ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx(It,{options:[{value:"",label:"Select"},...t?.customers?.map(b=>({value:b.customer_id,label:b.customer_name}))||[]],value:r.customer_id||"",onChange:b=>i({...r,customer_id:Number(b)}),placeholder:"Select Customer",required:!0}),o.customer_id&&e.jsx("div",{className:"invalid-feedback",style:{display:"block"},children:o.customer_id})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:["Account ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx(It,{options:[{value:"",label:"Select Account"},...t?.accounts?.map(b=>({value:b.account_ID,label:b.account_Name}))||[]],value:r.account_id||"",onChange:b=>i({...r,account_id:Number(b)}),placeholder:"Select Account",required:!0}),o.account_id&&e.jsx("div",{className:"invalid-feedback",style:{display:"block"},children:o.account_id})]})]}),e.jsx("div",{className:"form-row",children:e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:["Passenger Name ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"text",value:r.passenger_name,onChange:b=>i({...r,passenger_name:b.target.value}),className:`form-control ${o.passenger_name?"is-invalid":""}`}),o.passenger_name&&e.jsx("div",{className:"invalid-feedback",children:o.passenger_name})]})}),e.jsx("div",{className:"form-row",children:e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:["Transaction Type ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx(It,{options:[{value:"",label:"Select"},...t?.types?.map(b=>({value:b.id,label:b.name}))||[]],value:r.type_id||"",onChange:b=>g(Number(b)),placeholder:"Select Transaction Type",required:!0}),o.type_id&&e.jsx("div",{className:"invalid-feedback",style:{display:"block"},children:o.type_id})]})}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:["Application Number ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"text",value:r.application_number,onChange:b=>i({...r,application_number:b.target.value}),className:`form-control ${o.application_number?"is-invalid":""}`}),o.application_number&&e.jsx("div",{className:"invalid-feedback",children:o.application_number})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:["Transaction Number ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"text",value:r.transaction_number,onChange:b=>i({...r,transaction_number:b.target.value}),className:`form-control ${o.transaction_number?"is-invalid":""}`}),o.transaction_number&&e.jsx("div",{className:"invalid-feedback",children:o.transaction_number})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:["Payment Date ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"date",value:r.payment_date,onChange:b=>i({...r,payment_date:b.target.value}),className:`form-control ${o.payment_date?"is-invalid":""}`}),o.payment_date&&e.jsx("div",{className:"invalid-feedback",children:o.payment_date})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:["Cost Price ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"text",value:r.cost_price,onChange:b=>i({...r,cost_price:b.target.value}),className:`form-control ${o.cost_price?"is-invalid":""}`}),o.cost_price&&e.jsx("div",{className:"invalid-feedback",children:o.cost_price})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:["Sale Price ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"text",value:r.sale_price,onChange:b=>i({...r,sale_price:b.target.value}),className:`form-control ${o.sale_price?"is-invalid":""}`}),o.sale_price&&e.jsx("div",{className:"invalid-feedback",children:o.sale_price})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Upload Receipt (PDF)"}),e.jsx("input",{ref:m,type:"file",accept:"application/pdf",onChange:y,className:"form-control"}),u&&e.jsx("div",{className:`mt-2 ${u.includes("Error")||u.includes("Warning")?"text-danger":"text-success"}`,children:u})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"IBAN Info (optional)"}),e.jsx("input",{type:"text",value:r.iban,onChange:b=>i({...r,iban:b.target.value}),className:"form-control"})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:["Status ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("select",{value:r.status,onChange:b=>i({...r,status:b.target.value}),className:"form-control",children:[e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"rejected",children:"Rejected"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:["Staff Member ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx(It,{options:[{value:"",label:"Select Staff Member"},...t?.staff?.map(b=>({value:b.staff_id,label:b.staff_name}))||[]],value:r.created_by||"",onChange:b=>i({...r,created_by:Number(b)}),placeholder:"Select Staff Member",required:!0}),o.created_by&&e.jsx("div",{className:"invalid-feedback",style:{display:"block"},children:o.created_by})]})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:a,children:"Close"}),e.jsx("button",{type:"submit",className:"btn btn-success",children:"Save"})]})]})]})})}function Lq({type:s,onClose:t,onSubmit:a}){const[n,r]=A.useState({name:s?.name||"",cost_price:s?.cost_price||"",sale_price:s?.sale_price||""}),[i,o]=A.useState({});A.useEffect(()=>{s&&r({name:s.name,cost_price:s.cost_price,sale_price:s.sale_price})},[s]);const c=u=>{u.preventDefault();const h={};if(n.name||(h.name="Name is required"),n.cost_price||(h.cost_price="Cost Price is required"),n.sale_price||(h.sale_price="Sale Price is required"),Object.keys(h).length>0){o(h);return}a(n)};return e.jsx("div",{className:"modal-overlay",onClick:t,children:e.jsxs("div",{className:"modal-content",onClick:u=>u.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{children:s?"Update Transaction Type":"Add Transaction Type"}),e.jsx("button",{className:"btn-close",onClick:t,children:""})]}),e.jsxs("form",{onSubmit:c,children:[e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:["Transaction Type ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"text",value:n.name,onChange:u=>r({...n,name:u.target.value}),className:`form-control ${i.name?"is-invalid":""}`}),i.name&&e.jsx("div",{className:"invalid-feedback",children:i.name})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:["Cost Price ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"text",value:n.cost_price,onChange:u=>r({...n,cost_price:u.target.value}),className:`form-control ${i.cost_price?"is-invalid":""}`}),i.cost_price&&e.jsx("div",{className:"invalid-feedback",children:i.cost_price})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:["Sale Price ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"text",value:n.sale_price,onChange:u=>r({...n,sale_price:u.target.value}),className:`form-control ${i.sale_price?"is-invalid":""}`}),i.sale_price&&e.jsx("div",{className:"invalid-feedback",children:i.sale_price})]})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:t,children:"Close"}),e.jsx("button",{type:"submit",className:"btn btn-success",children:"Save"})]})]})]})})}function Pq({transaction:s,onClose:t,onSubmit:a}){const[n,r]=A.useState(s.status),i=o=>{o.preventDefault(),a(n)};return e.jsx("div",{className:"modal-overlay",onClick:t,children:e.jsxs("div",{className:"modal-content",onClick:o=>o.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{children:"Change Transaction Status"}),e.jsx("button",{className:"btn-close",onClick:t,children:""})]}),e.jsxs("form",{onSubmit:i,children:[e.jsx("div",{className:"modal-body",children:e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:["Status ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("select",{value:n,onChange:o=>r(o.target.value),className:"form-control",children:[e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"rejected",children:"Rejected"}),e.jsx("option",{value:"refunded",children:"Refunded"}),e.jsx("option",{value:"visit_required",children:"Visit Required"})]})]})}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:t,children:"Close"}),e.jsx("button",{type:"submit",className:"btn btn-success",children:"Save"})]})]})]})})}const yh={getLoans:async s=>{const t={action:"searchLoans",search_by_date:s?.search_by_date?"1":"0"};s?.start_date&&(t.start_date=s.start_date),s?.end_date&&(t.end_date=s.end_date),s?.customer&&(t.customer=s.customer.toString());const a=await Ne.post("/loan/loans.php",t);return console.log("Loans response:",a.data),a.data.success&&a.data.data?Array.isArray(a.data.data)?a.data.data:[]:Array.isArray(a.data)?a.data:Array.isArray(a.data.data)?a.data.data:[]},getTotal:async s=>{const t={action:"getTotal",search_by_date:s?.search_by_date?"1":"0"};return s?.start_date&&(t.start_date=s.start_date),s?.end_date&&(t.end_date=s.end_date),s?.customer&&(t.customer=s.customer.toString()),(await Ne.post("/loan/loans.php",t)).data.data||[]},getLoan:async s=>(await Ne.post("/loan/loans.php",{action:"getLoan",id:s})).data.data,createLoan:async s=>{await Ne.post("/loan/loans.php",{action:"addLoan",...s})},updateLoan:async(s,t)=>{await Ne.post("/loan/loans.php",{action:"updateLoan",id:s,...t})},deleteLoan:async s=>{await Ne.post("/loan/loans.php",{action:"deleteLoan",id:s})},getDropdowns:async()=>{const s=await Ne.get("/loan/dropdowns.php");return console.log("Loan dropdowns response:",s.data),s.data.success&&s.data.data?s.data.data:s.data}},R_=()=>new Date().toISOString().split("T")[0];function Fq(){const[s,t]=A.useState({start_date:R_(),end_date:R_(),search_by_date:!1}),[a,n]=A.useState({isOpen:!1,loan:null}),r=Wa(),{data:i,error:o}=Rt({queryKey:["loan-dropdowns"],queryFn:()=>yh.getDropdowns(),retry:2});A.useEffect(()=>{o&&(console.error("Error loading dropdowns:",o),W.fire("Error","Failed to load dropdown data. Please refresh the page.","error"))},[o]);const{data:c=[],isLoading:u,refetch:h}=Rt({queryKey:["loans",s],queryFn:()=>yh.getLoans(s),enabled:!!(s.search_by_date||s.customer)}),{data:m=[]}=Rt({queryKey:["loan-totals",s],queryFn:()=>yh.getTotal(s),enabled:!!(s.search_by_date||s.customer)&&c.length>0}),p=wt({mutationFn:S=>yh.createLoan(S),onSuccess:()=>{r.invalidateQueries({queryKey:["loans"]}),r.invalidateQueries({queryKey:["loan-totals"]}),n({isOpen:!1,loan:null}),W.fire("Success","Loan added successfully","success")},onError:S=>{W.fire("Error",S.response?.data?.message||"Failed to add loan","error")}}),y=wt({mutationFn:({id:S,data:E})=>yh.updateLoan(S,E),onSuccess:()=>{r.invalidateQueries({queryKey:["loans"]}),r.invalidateQueries({queryKey:["loan-totals"]}),n({isOpen:!1,loan:null}),W.fire("Success","Loan updated successfully","success")},onError:S=>{W.fire("Error",S.response?.data?.message||"Failed to update loan","error")}}),g=wt({mutationFn:S=>yh.deleteLoan(S),onSuccess:()=>{r.invalidateQueries({queryKey:["loans"]}),r.invalidateQueries({queryKey:["loan-totals"]}),W.fire("Success","Loan deleted successfully","success")},onError:S=>{W.fire("Error",S.response?.data?.message||"Failed to delete loan","error")}}),j=()=>{if(!s.search_by_date&&!s.customer){W.fire("Validation Error","Please select at least one search option","error");return}h()},b=()=>{n({isOpen:!0,loan:null})},N=async S=>{n({isOpen:!0,loan:S})},v=S=>{W.fire({title:"Delete Loan?",text:"Are you sure you want to delete this loan?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"}).then(E=>{E.isConfirmed&&g.mutate(S)})};return e.jsxs("div",{className:"loans-page",children:[e.jsxs("div",{className:"page-header",children:[e.jsxs("h1",{children:[e.jsx("i",{className:"fa fa-money-bill me-2"}),"Loan Management"]}),e.jsxs("button",{className:"btn btn-success",onClick:b,children:[e.jsx("i",{className:"fa fa-plus me-2"}),"Add Loan"]})]}),e.jsxs("div",{className:"panel",children:[e.jsx("div",{className:"panel-header",children:e.jsx("h3",{children:"Search Loans"})}),e.jsx("div",{className:"panel-body",children:e.jsx("div",{className:"search-filters",children:e.jsxs("div",{className:"filter-row",children:[e.jsx("div",{className:"filter-group",children:e.jsxs("div",{className:"form-check",children:[e.jsx("input",{className:"form-check-input",type:"checkbox",id:"dateSearch",checked:s.search_by_date||!1,onChange:S=>t({...s,search_by_date:S.target.checked})}),e.jsx("label",{className:"form-check-label",htmlFor:"dateSearch",children:"Search By Date"})]})}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"From Date"}),e.jsx("input",{type:"date",value:s.start_date||"",onChange:S=>t({...s,start_date:S.target.value}),className:"form-control",disabled:!s.search_by_date})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"To Date"}),e.jsx("input",{type:"date",value:s.end_date||"",onChange:S=>t({...s,end_date:S.target.value}),className:"form-control",disabled:!s.search_by_date})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"Customer"}),e.jsx(It,{options:[{value:"",label:"All Customers"},...i?.customers?.map(S=>({value:S.customer_id,label:S.customer_name}))||[]],value:s.customer||"",onChange:S=>t({...s,customer:S?Number(S):void 0}),placeholder:"All Customers"})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:""}),e.jsxs("button",{className:"btn btn-primary w-100",onClick:j,children:[e.jsx("i",{className:"fa fa-search me-2"}),"Search"]})]})]})})})]}),e.jsxs("div",{className:"panel",children:[e.jsx("div",{className:"panel-header",children:e.jsx("h3",{children:"Loan Report"})}),e.jsx("div",{className:"panel-body",children:u?e.jsxs("div",{className:"text-center p-4",children:[e.jsx("i",{className:"fa fa-spinner fa-spin fa-2x"}),e.jsx("p",{className:"mt-2",children:"Loading..."})]}):e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-striped table-bordered",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"S#"}),e.jsx("th",{children:"Customer Name"}),e.jsx("th",{children:"Amount"}),e.jsx("th",{children:"Account"}),e.jsx("th",{children:"Date Time"}),e.jsx("th",{children:"Remarks"}),e.jsx("th",{children:"Lend By"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:c.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"text-center",children:s.search_by_date||s.customer?"No loans found":"Please select search criteria and click Search"})}):e.jsxs(e.Fragment,{children:[c.map((S,E)=>e.jsxs("tr",{children:[e.jsx("td",{children:E+1}),e.jsx("td",{className:"text-capitalize",children:S.customer_name}),e.jsxs("td",{className:"text-capitalize",children:[S.amount.toLocaleString()," ",S.currencyName]}),e.jsx("td",{children:S.account_Name}),e.jsx("td",{children:new Date(S.datetime).toLocaleString()}),e.jsx("td",{children:S.remarks||"-"}),e.jsx("td",{className:"text-capitalize",children:S.staff_name}),e.jsx("td",{children:e.jsxs("div",{className:"action-buttons",children:[e.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>N(S),title:"Edit",children:e.jsx("i",{className:"fa fa-edit"})}),e.jsx("button",{className:"btn btn-sm btn-danger",onClick:()=>v(S.loan_id),title:"Delete",children:e.jsx("i",{className:"fa fa-trash"})})]})})]},S.loan_id)),m.length>0&&e.jsxs("tr",{className:"table-info fw-bold",children:[e.jsx("td",{children:"Total"}),e.jsx("td",{}),e.jsx("td",{children:m.map((S,E)=>e.jsxs("div",{children:[S.amount.toLocaleString()," ",S.currencyName]},E))}),e.jsx("td",{colSpan:5})]})]})})]})})})]}),a.isOpen&&e.jsx(Iq,{loan:a.loan,dropdowns:i,onClose:()=>n({isOpen:!1,loan:null}),onSubmit:S=>{a.loan?y.mutate({id:a.loan.loan_id,data:S}):p.mutate(S)}})]})}function Iq({loan:s,dropdowns:t,onClose:a,onSubmit:n}){const[r,i]=A.useState({customer_id:s?.customer_id||void 0,amount:s?.amount||0,currency_id:s?.currencyID||void 0,account_id:s?.accountID||void 0,remarks:s?.remarks||""}),[o,c]=A.useState({});A.useEffect(()=>{i(s?{customer_id:s.customer_id,amount:s.amount,currency_id:s.currencyID,account_id:s.accountID,remarks:s.remarks||""}:{customer_id:void 0,amount:0,currency_id:t?.currencies?.[0]?.currencyID||void 0,account_id:void 0,remarks:""})},[s,t]);const u=h=>{h.preventDefault();const m={};if(r.customer_id||(m.customer_id="Customer is required"),(!r.amount||r.amount<=0)&&(m.amount="Amount must be greater than 0"),r.currency_id||(m.currency_id="Currency is required"),r.account_id||(m.account_id="Account is required"),Object.keys(m).length>0){c(m);return}n(r)};return e.jsx("div",{className:"modal-overlay",onClick:a,children:e.jsxs("div",{className:"modal-content",onClick:h=>h.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{children:s?"Edit Loan":"Add New Loan"}),e.jsx("button",{className:"btn-close",onClick:a,children:""})]}),e.jsxs("form",{onSubmit:u,children:[e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"form-group mb-3",children:[e.jsxs("label",{children:[e.jsx("i",{className:"fa fa-user me-2"}),"Customer Name ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx(It,{options:[{value:"",label:"Select Customer"},...t?.customers?.map(h=>({value:h.customer_id,label:h.customer_name}))||[]],value:r.customer_id||"",onChange:h=>{i({...r,customer_id:Number(h)}),c({...o,customer_id:""})},placeholder:"Select Customer",required:!0}),o.customer_id&&e.jsx("div",{className:"invalid-feedback",style:{display:"block"},children:o.customer_id})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:[e.jsx("i",{className:"fa fa-dollar-sign me-2"}),"Amount ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"number",step:"0.01",value:r.amount,onChange:h=>{i({...r,amount:Number(h.target.value)}),c({...o,amount:""})},className:`form-control ${o.amount?"is-invalid":""}`,placeholder:"Amount"}),o.amount&&e.jsx("div",{className:"invalid-feedback",children:o.amount})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:[e.jsx("i",{className:"fa fa-money-bill me-2"}),"Currency ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx(It,{options:t?.currencies?.map(h=>({value:h.currencyID,label:h.currencyName}))||[],value:r.currency_id||"",onChange:h=>{i({...r,currency_id:Number(h)}),c({...o,currency_id:""})},placeholder:"Select Currency",required:!0}),o.currency_id&&e.jsx("div",{className:"invalid-feedback",style:{display:"block"},children:o.currency_id})]})]}),e.jsxs("div",{className:"form-group mb-3",children:[e.jsxs("label",{children:[e.jsx("i",{className:"fa fa-wallet me-2"}),"Account ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx(It,{options:[{value:"",label:"Select Account"},...t?.accounts?.map(h=>({value:h.account_ID,label:h.account_Name}))||[]],value:r.account_id||"",onChange:h=>{i({...r,account_id:Number(h)}),c({...o,account_id:""})},placeholder:"Select Account",required:!0}),o.account_id&&e.jsx("div",{className:"invalid-feedback",style:{display:"block"},children:o.account_id})]}),e.jsxs("div",{className:"form-group mb-3",children:[e.jsxs("label",{children:[e.jsx("i",{className:"fa fa-info-circle me-2"}),"Remarks (Optional)"]}),e.jsx("textarea",{value:r.remarks,onChange:h=>i({...r,remarks:h.target.value}),className:"form-control",rows:3,placeholder:"Enter remarks (optional)"})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:a,children:"Close"}),e.jsxs("button",{type:"submit",className:"btn btn-success",children:[e.jsx("i",{className:"fa fa-save me-2"}),s?"Update":"Save"]})]})]})]})})}const Uf={getHotels:async s=>{const t={action:"searchHotels",search_by_date:s?.search_by_date?"1":"0"};s?.customer&&(t.customer=s.customer.toString()),s?.start_date&&(t.start_date=s.start_date),s?.end_date&&(t.end_date=s.end_date);const a=await Ne.post("/hotel/hotels.php",t);return console.log("Hotels response:",a.data),a.data.success&&a.data.data?Array.isArray(a.data.data)?a.data.data:[]:Array.isArray(a.data)?a.data:Array.isArray(a.data.data)?a.data.data:[]},getHotel:async s=>(await Ne.post("/hotel/hotels.php",{action:"getHotel",id:s})).data.data,createHotel:async s=>{await Ne.post("/hotel/hotels.php",{action:"addHotel",...s})},updateHotel:async(s,t)=>{await Ne.post("/hotel/hotels.php",{action:"updateHotel",id:s,...t})},deleteHotel:async s=>{await Ne.post("/hotel/hotels.php",{action:"deleteHotel",id:s})},getDropdowns:async()=>{const s=await Ne.get("/hotel/dropdowns.php");return console.log("Hotel dropdowns response:",s.data),s.data.success&&s.data.data?s.data.data:s.data}},Dh=()=>new Date().toISOString().split("T")[0];function Oq(){const[s,t]=A.useState({start_date:Dh(),end_date:Dh(),search_by_date:!1}),[a,n]=A.useState({isOpen:!1,hotel:null}),r=Wa(),{data:i,error:o}=Rt({queryKey:["hotel-dropdowns"],queryFn:()=>Uf.getDropdowns(),retry:2});A.useEffect(()=>{o&&(console.error("Error loading dropdowns:",o),W.fire("Error","Failed to load dropdown data. Please refresh the page.","error"))},[o]);const{data:c=[],isLoading:u,refetch:h}=Rt({queryKey:["hotels",s],queryFn:()=>Uf.getHotels(s),enabled:!!(s.customer||s.search_by_date&&s.start_date&&s.end_date)}),m=wt({mutationFn:v=>Uf.createHotel(v),onSuccess:()=>{r.invalidateQueries({queryKey:["hotels"]}),n({isOpen:!1,hotel:null}),W.fire("Success","Hotel booking added successfully","success"),setTimeout(()=>h(),500)},onError:v=>{W.fire("Error",v.response?.data?.message||"Failed to add hotel booking","error")}}),p=wt({mutationFn:({id:v,data:S})=>Uf.updateHotel(v,S),onSuccess:()=>{r.invalidateQueries({queryKey:["hotels"]}),n({isOpen:!1,hotel:null}),W.fire("Success","Hotel booking updated successfully","success"),setTimeout(()=>h(),500)},onError:v=>{W.fire("Error",v.response?.data?.message||"Failed to update hotel booking","error")}}),y=wt({mutationFn:v=>Uf.deleteHotel(v),onSuccess:()=>{r.invalidateQueries({queryKey:["hotels"]}),W.fire("Success","Hotel booking deleted successfully","success"),setTimeout(()=>h(),500)},onError:v=>{W.fire("Error",v.response?.data?.message||"Failed to delete hotel booking","error")}}),g=()=>{if(!s.customer&&!s.search_by_date){W.fire("Validation Error","Please select at least one search option (Customer or Date Range)","error");return}if(s.search_by_date&&(!s.start_date||!s.end_date)){W.fire("Validation Error","Please select both start and end dates","error");return}h()},j=()=>{n({isOpen:!0,hotel:null})},b=async v=>{n({isOpen:!0,hotel:v})},N=v=>{W.fire({title:"Delete Hotel Booking?",text:"Are you sure you want to delete this hotel reservation?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"}).then(S=>{S.isConfirmed&&y.mutate(v)})};return e.jsxs("div",{className:"hotels-page",children:[e.jsxs("div",{className:"page-header",children:[e.jsxs("h1",{children:[e.jsx("i",{className:"fa fa-hotel me-2"}),"Hotel Reservations"]}),e.jsxs("button",{className:"btn btn-success",onClick:j,children:[e.jsx("i",{className:"fa fa-plus me-2"}),"Add Hotel Booking"]})]}),e.jsxs("div",{className:"panel",children:[e.jsx("div",{className:"panel-header",children:e.jsx("h3",{children:"Search Hotel Bookings"})}),e.jsx("div",{className:"panel-body",children:e.jsx("div",{className:"search-filters",children:e.jsxs("div",{className:"filter-row",children:[e.jsx("div",{className:"filter-group",children:e.jsxs("div",{className:"form-check",children:[e.jsx("input",{className:"form-check-input",type:"checkbox",id:"dateSearch",checked:s.search_by_date||!1,onChange:v=>t({...s,search_by_date:v.target.checked})}),e.jsx("label",{className:"form-check-label",htmlFor:"dateSearch",children:"Search By Date"})]})}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"From Date"}),e.jsx("input",{type:"date",value:s.start_date||"",onChange:v=>t({...s,start_date:v.target.value}),className:"form-control",disabled:!s.search_by_date})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"To Date"}),e.jsx("input",{type:"date",value:s.end_date||"",onChange:v=>t({...s,end_date:v.target.value}),className:"form-control",disabled:!s.search_by_date})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"Customer"}),e.jsx(It,{options:[{value:"",label:"All Customers"},...i?.customers?.map(v=>({value:v.customer_id,label:v.customer_name}))||[]],value:s.customer||"",onChange:v=>{t({...s,customer:v?Number(v):void 0})},placeholder:"All Customers"})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:""}),e.jsxs("button",{className:"btn btn-primary w-100",onClick:g,children:[e.jsx("i",{className:"fa fa-search me-2"}),"Search"]})]})]})})})]}),e.jsxs("div",{className:"panel",children:[e.jsx("div",{className:"panel-header",children:e.jsx("h3",{children:"Hotel Report"})}),e.jsx("div",{className:"panel-body",children:u?e.jsxs("div",{className:"text-center p-4",children:[e.jsx("i",{className:"fa fa-spinner fa-spin fa-2x"}),e.jsx("p",{className:"mt-2",children:"Loading..."})]}):e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-striped table-bordered",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"S#"}),e.jsx("th",{children:"Customer Name"}),e.jsx("th",{children:"Passenger Name"}),e.jsx("th",{children:"Hotel Name"}),e.jsx("th",{children:"Supplier"}),e.jsx("th",{children:"Check-In"}),e.jsx("th",{children:"Check-Out"}),e.jsx("th",{children:"Country"}),e.jsx("th",{children:"Date Time"}),e.jsx("th",{children:"Net Price"}),e.jsx("th",{children:"Sale Price"}),e.jsx("th",{children:"Reserved By"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:c.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:13,className:"text-center",children:s.customer||s.search_by_date?"No hotel bookings found":"Please select search criteria and click Search"})}):c.map((v,S)=>e.jsxs("tr",{children:[e.jsx("td",{children:S+1}),e.jsx("td",{className:"text-capitalize",children:v.customer_name}),e.jsx("td",{className:"text-capitalize",children:v.passenger_name}),e.jsx("td",{className:"text-capitalize",children:v.hotel_name}),e.jsx("td",{children:v.account_name||v.supp_name||"-"}),e.jsx("td",{children:new Date(v.checkin_date).toLocaleDateString()}),e.jsx("td",{children:new Date(v.checkout_date).toLocaleDateString()}),e.jsx("td",{className:"text-capitalize",children:v.country_names}),e.jsx("td",{children:new Date(v.datetime).toLocaleString()}),e.jsxs("td",{className:"text-capitalize",children:[v.net_price.toLocaleString()," ",v.netCurrency]}),e.jsxs("td",{className:"text-capitalize",children:[v.sale_price.toLocaleString()," ",v.saleCurrency]}),e.jsx("td",{className:"text-capitalize",children:v.staff_name}),e.jsx("td",{children:e.jsxs("div",{className:"action-buttons",children:[e.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>b(v),title:"Edit",children:e.jsx("i",{className:"fa fa-edit"})}),e.jsx("button",{className:"btn btn-sm btn-danger",onClick:()=>N(v.hotel_id),title:"Delete",children:e.jsx("i",{className:"fa fa-trash"})})]})})]},v.hotel_id))})]})})})]}),a.isOpen&&e.jsx(Mq,{hotel:a.hotel,dropdowns:i,onClose:()=>n({isOpen:!1,hotel:null}),onSubmit:v=>{a.hotel?p.mutate({id:a.hotel.hotel_id,data:v}):m.mutate(v)}})]})}function Mq({hotel:s,dropdowns:t,onClose:a,onSubmit:n}){const[r,i]=A.useState({customer_id:s?.customer_id||void 0,passenger_name:s?.passenger_name||"",hotel_name:s?.hotel_name||"",supplier_id:s?.supplier_id||void 0,checkin_date:s?.checkin_date||Dh(),checkout_date:s?.checkout_date||Dh(),net_price:s?.net_price||0,net_currency_id:s?.netCurrencyID||void 0,sale_price:s?.sale_price||0,sale_currency_id:s?.saleCurrencyID||void 0,country_id:s?.country_id||void 0,cus_payment:0,cus_payment_currency:void 0,account_id:void 0}),[o,c]=A.useState("supplier"),[u,h]=A.useState({});A.useEffect(()=>{if(s){const p=s.supplier_id&&s.supplier_id>0;c(p?"supplier":"account"),i({customer_id:s.customer_id,passenger_name:s.passenger_name,hotel_name:s.hotel_name,supplier_id:s.supplier_id,checkin_date:s.checkin_date,checkout_date:s.checkout_date,net_price:s.net_price,net_currency_id:s.netCurrencyID,sale_price:s.sale_price,sale_currency_id:s.saleCurrencyID,country_id:s.country_id,cus_payment:0,cus_payment_currency:t?.currencies?.[0]?.currencyID,account_id:void 0})}else{c("supplier");const p=t?.currencies?.[0]?.currencyID;i({customer_id:void 0,passenger_name:"",hotel_name:"",supplier_id:void 0,checkin_date:Dh(),checkout_date:Dh(),net_price:0,net_currency_id:p,sale_price:0,sale_currency_id:p,country_id:void 0,cus_payment:0,cus_payment_currency:p,account_id:void 0})}},[s,t]);const m=p=>{p.preventDefault();const y={};if(r.customer_id||(y.customer_id="Customer is required"),r.passenger_name||(y.passenger_name="Passenger name is required"),r.hotel_name||(y.hotel_name="Hotel name is required"),o==="supplier"&&!r.supplier_id&&(y.supplier_id="Supplier is required when paying through supplier"),o==="account"&&r.cus_payment&&r.cus_payment>0&&!r.account_id&&(y.account_id="Account is required when customer payment is provided"),r.checkin_date||(y.checkin_date="Check-in date is required"),r.checkout_date||(y.checkout_date="Check-out date is required"),(!r.net_price||r.net_price<=0)&&(y.net_price="Net price must be greater than 0"),(!r.sale_price||r.sale_price<=0)&&(y.sale_price="Sale price must be greater than 0"),r.country_id||(y.country_id="Country is required"),Object.keys(y).length>0){h(y);return}n(r)};return e.jsx("div",{className:"modal-overlay",onClick:a,children:e.jsxs("div",{className:"modal-content large",onClick:p=>p.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{children:s?"Edit Hotel Booking":"Add Hotel Booking"}),e.jsx("button",{className:"btn-close",onClick:a,children:""})]}),e.jsxs("form",{onSubmit:m,children:[e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:[e.jsx("i",{className:"fa fa-user me-2"}),"Customer Name ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx(It,{options:[{value:"",label:"Select Customer"},...t?.customers?.map(p=>({value:p.customer_id,label:p.customer_name}))||[]],value:r.customer_id||"",onChange:p=>{i({...r,customer_id:Number(p)}),h({...u,customer_id:""})},placeholder:"Select Customer",required:!0}),u.customer_id&&e.jsx("div",{className:"invalid-feedback",style:{display:"block"},children:u.customer_id})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:[e.jsx("i",{className:"fa fa-user-alt me-2"}),"Passenger Name ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"text",value:r.passenger_name,onChange:p=>{i({...r,passenger_name:p.target.value}),h({...u,passenger_name:""})},className:`form-control ${u.passenger_name?"is-invalid":""}`,placeholder:"Passenger Name"}),u.passenger_name&&e.jsx("div",{className:"invalid-feedback",children:u.passenger_name})]})]}),e.jsxs("div",{className:"form-group mb-3",children:[e.jsxs("label",{children:[e.jsx("i",{className:"fa fa-hotel me-2"}),"Hotel Name ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"text",value:r.hotel_name,onChange:p=>{i({...r,hotel_name:p.target.value}),h({...u,hotel_name:""})},className:`form-control ${u.hotel_name?"is-invalid":""}`,placeholder:"Hotel Name"}),u.hotel_name&&e.jsx("div",{className:"invalid-feedback",children:u.hotel_name})]}),e.jsxs("div",{className:"form-group mb-3",children:[e.jsxs("label",{className:"mb-2",children:[e.jsx("i",{className:"fa fa-credit-card me-2"}),"Payment Through ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("div",{className:"payment-type-selector mb-3",children:[e.jsxs("div",{className:"form-check form-check-inline",children:[e.jsx("input",{className:"form-check-input",type:"radio",id:"paymentTypeSupplier",checked:o==="supplier",onChange:()=>{c("supplier"),i({...r,account_id:void 0}),h({...u,account_id:"",supplier_id:""})}}),e.jsx("label",{className:"form-check-label",htmlFor:"paymentTypeSupplier",children:"Through Supplier"})]}),e.jsxs("div",{className:"form-check form-check-inline",children:[e.jsx("input",{className:"form-check-input",type:"radio",id:"paymentTypeAccount",checked:o==="account",onChange:()=>{c("account"),i({...r,supplier_id:void 0}),h({...u,account_id:"",supplier_id:""})}}),e.jsx("label",{className:"form-check-label",htmlFor:"paymentTypeAccount",children:"Direct Account Payment"})]})]}),o==="supplier"?e.jsxs(e.Fragment,{children:[e.jsx(It,{options:[{value:"",label:"Select Supplier"},...t?.suppliers?.map(p=>({value:p.supp_id,label:p.supp_name}))||[]],value:r.supplier_id||"",onChange:p=>{i({...r,supplier_id:Number(p)}),h({...u,supplier_id:""})},placeholder:"Select Supplier",required:!0}),u.supplier_id&&e.jsx("div",{className:"invalid-feedback",style:{display:"block"},children:u.supplier_id})]}):e.jsxs(e.Fragment,{children:[e.jsx(It,{options:[{value:"",label:"Select Account"},...t?.accounts?.map(p=>({value:p.account_ID,label:p.account_Name}))||[]],value:r.account_id||"",onChange:p=>{i({...r,account_id:p?Number(p):void 0}),h({...u,account_id:""})},placeholder:"Select Account"}),u.account_id&&e.jsx("div",{className:"invalid-feedback",style:{display:"block"},children:u.account_id})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:[e.jsx("i",{className:"fa fa-calendar-check me-2"}),"Check-In Date ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"date",value:r.checkin_date,onChange:p=>{i({...r,checkin_date:p.target.value}),h({...u,checkin_date:""})},className:`form-control ${u.checkin_date?"is-invalid":""}`}),u.checkin_date&&e.jsx("div",{className:"invalid-feedback",children:u.checkin_date})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:[e.jsx("i",{className:"fa fa-calendar-times me-2"}),"Check-Out Date ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"date",value:r.checkout_date,onChange:p=>{i({...r,checkout_date:p.target.value}),h({...u,checkout_date:""})},className:`form-control ${u.checkout_date?"is-invalid":""}`}),u.checkout_date&&e.jsx("div",{className:"invalid-feedback",children:u.checkout_date})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:[e.jsx("i",{className:"fa fa-dollar-sign me-2"}),"Net Price ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("div",{className:"price-currency-group",children:[e.jsx("input",{type:"number",step:"0.01",value:r.net_price,onChange:p=>{i({...r,net_price:Number(p.target.value)}),h({...u,net_price:""})},className:`form-control ${u.net_price?"is-invalid":""}`,placeholder:"Net Price"}),e.jsx(It,{options:t?.currencies?.map(p=>({value:p.currencyID,label:p.currencyName}))||[],value:r.net_currency_id||"",onChange:p=>i({...r,net_currency_id:Number(p)}),placeholder:"Currency"})]}),u.net_price&&e.jsx("div",{className:"invalid-feedback",style:{display:"block"},children:u.net_price})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:[e.jsx("i",{className:"fa fa-money-bill me-2"}),"Sale Price ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("div",{className:"price-currency-group",children:[e.jsx("input",{type:"number",step:"0.01",value:r.sale_price,onChange:p=>{i({...r,sale_price:Number(p.target.value)}),h({...u,sale_price:""})},className:`form-control ${u.sale_price?"is-invalid":""}`,placeholder:"Sale Price"}),e.jsx(It,{options:t?.currencies?.map(p=>({value:p.currencyID,label:p.currencyName}))||[],value:r.sale_currency_id||"",onChange:p=>i({...r,sale_currency_id:Number(p)}),placeholder:"Currency"})]}),u.sale_price&&e.jsx("div",{className:"invalid-feedback",style:{display:"block"},children:u.sale_price})]})]}),e.jsxs("div",{className:"form-group mb-3",children:[e.jsxs("label",{children:[e.jsx("i",{className:"fa fa-globe me-2"}),"Country ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx(It,{options:[{value:"",label:"Select Country"},...t?.countries?.map(p=>({value:p.country_id,label:p.country_names}))||[]],value:r.country_id||"",onChange:p=>{i({...r,country_id:Number(p)}),h({...u,country_id:""})},placeholder:"Select Country",required:!0}),u.country_id&&e.jsx("div",{className:"invalid-feedback",style:{display:"block"},children:u.country_id})]}),!s&&o==="account"&&e.jsxs(e.Fragment,{children:[e.jsx("hr",{className:"my-4"}),e.jsxs("h5",{className:"mb-3",children:[e.jsx("i",{className:"fa fa-money-check-alt me-2"}),"Customer Payment (Optional)"]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Payment Amount"}),e.jsxs("div",{className:"price-currency-group",children:[e.jsx("input",{type:"number",step:"0.01",value:r.cus_payment,onChange:p=>i({...r,cus_payment:Number(p.target.value)}),className:"form-control",placeholder:"Customer Payment (Optional)"}),e.jsx(It,{options:t?.currencies?.map(p=>({value:p.currencyID,label:p.currencyName}))||[],value:r.cus_payment_currency||"",onChange:p=>i({...r,cus_payment_currency:Number(p)}),placeholder:"Currency"})]})]})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:a,children:"Close"}),e.jsxs("button",{type:"submit",className:"btn btn-success",children:[e.jsx("i",{className:"fa fa-save me-2"}),s?"Update":"Save"]})]})]})]})})}const Id={async getServices(s){const t=await Ne.post("/service/services.php",{action:"searchServices",...s});if(t.data.success)return t.data.data||[];throw new Error(t.data.message||"Failed to fetch services")},async getService(s){const t=await Ne.post("/service/services.php",{action:"getService",id:s});if(t.data.success)return t.data.data;throw new Error(t.data.message||"Failed to fetch service")},async createService(s){const t=await Ne.post("/service/services.php",{action:"addService",...s});if(t.data.success)return t.data.data;throw new Error(t.data.message||"Failed to create service")},async updateService(s,t){const a=await Ne.post("/service/services.php",{action:"updateService",id:s,...t});if(!a.data.success)throw new Error(a.data.message||"Failed to update service")},async deleteService(s){const t=await Ne.post("/service/services.php",{action:"deleteService",id:s});if(!t.data.success)throw new Error(t.data.message||"Failed to delete service")},async getDropdowns(){const s=await Ne.get("/service/dropdowns.php");if(s.data.success)return s.data.data;throw new Error(s.data.message||"Failed to fetch dropdowns")},async addServiceType(s){const t=await Ne.post("/service/services.php",{action:"addServiceType",service_name:s});if(!t.data.success)throw new Error(t.data.message||"Failed to add service type")},async updateServiceCharge(s,t){const a=await Ne.post("/service/services.php",{action:"updateServiceCharge",id:s,...t});if(!a.data.success)throw new Error(a.data.message||"Failed to update service charge")}},Od=()=>new Date().toISOString().split("T")[0];function Rq(){const[s,t]=A.useState("records"),[a,n]=A.useState({start_date:Od(),end_date:Od()}),[r,i]=A.useState(!1),[o,c]=A.useState({isOpen:!1,service:null}),[u,h]=A.useState(!1),[m,p]=A.useState(""),[y,g]=A.useState({start_date:Od(),end_date:Od()}),[j,b]=A.useState(!1),[N,v]=A.useState({isOpen:!1,service:null}),S=Wa(),{data:E,error:L}=Rt({queryKey:["service-dropdowns"],queryFn:()=>Id.getDropdowns(),retry:2});A.useEffect(()=>{L&&(console.error("Error loading dropdowns:",L),W.fire("Error","Failed to load dropdown data. Please refresh the page.","error"))},[L]);const{data:z=[],isLoading:V,refetch:te}=Rt({queryKey:["services",a],queryFn:()=>Id.getServices(a),enabled:r||Object.keys(a).length>0}),{data:q=[],isLoading:B,refetch:J}=Rt({queryKey:["services-management",y],queryFn:()=>Id.getServices(y),enabled:j||Object.keys(y).length>0}),P=wt({mutationFn:G=>Id.createService(G),onSuccess:(G,je)=>{S.invalidateQueries({queryKey:["services"]}),c({isOpen:!1,service:null});const De={customer_id:je.customer_id,service_id:je.service_id};return n(De),i(!0),W.fire("Success","Service added successfully","success"),setTimeout(()=>{S.invalidateQueries({queryKey:["services",De]})},500),G},onError:G=>{W.fire("Error",G.response?.data?.message||"Failed to add service","error")}}),K=wt({mutationFn:({id:G,data:je})=>Id.updateService(G,je),onSuccess:()=>{S.invalidateQueries({queryKey:["services"]}),c({isOpen:!1,service:null}),W.fire("Success","Service updated successfully","success"),setTimeout(()=>te(),500)},onError:G=>{W.fire("Error",G.response?.data?.message||"Failed to update service","error")}}),H=wt({mutationFn:G=>Id.deleteService(G),onSuccess:()=>{S.invalidateQueries({queryKey:["services"]}),W.fire("Success","Service deleted successfully","success"),setTimeout(()=>te(),500)},onError:G=>{W.fire("Error",G.response?.data?.message||"Failed to delete service","error")}}),se=wt({mutationFn:G=>Id.addServiceType(G),onSuccess:()=>{S.invalidateQueries({queryKey:["service-dropdowns"]}),h(!1),p(""),W.fire("Success","Service type added successfully","success")},onError:G=>{W.fire("Error",G.response?.data?.message||"Failed to add service type","error")}}),X=wt({mutationFn:({id:G,data:je})=>Id.updateServiceCharge(G,je),onSuccess:()=>{S.invalidateQueries({queryKey:["services"]}),S.invalidateQueries({queryKey:["services-management"]}),v({isOpen:!1,service:null}),W.fire("Success","Service charge updated successfully","success"),setTimeout(()=>{J(),te()},500)},onError:G=>{W.fire("Error",G.response?.data?.message||"Failed to update service charge","error")}}),R=()=>{i(!0),te()},Q=()=>{n({start_date:Od(),end_date:Od()}),i(!1)},Y=()=>{c({isOpen:!0,service:null})},$=async G=>{c({isOpen:!0,service:G})},me=G=>{W.fire({title:"Delete Service?",text:"Are you sure you want to delete this service?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"}).then(je=>{je.isConfirmed&&H.mutate(G)})},D=()=>{if(!m.trim()){W.fire("Validation Error","Service name is required","error");return}se.mutate(m.trim())},U=()=>{b(!0),J()},le=()=>{g({start_date:Od(),end_date:Od()}),b(!1)},de=G=>{v({isOpen:!0,service:G})};return e.jsxs("div",{className:"services-page",children:[e.jsxs("div",{className:"page-header",children:[e.jsxs("h1",{children:[e.jsx("i",{className:"fab fa-servicestack me-2"}),"Services"]}),s==="records"&&e.jsxs("button",{className:"btn btn-success",onClick:Y,children:[e.jsx("i",{className:"fa fa-plus me-2"}),"Add Service"]})]}),e.jsx("div",{className:"tabs-container",children:e.jsxs("div",{className:"tabs",children:[e.jsxs("button",{className:`tab ${s==="records"?"active":""}`,onClick:()=>t("records"),children:[e.jsx("i",{className:"fa fa-list me-2"}),"Service Records"]}),e.jsxs("button",{className:`tab ${s==="other"?"active":""}`,onClick:()=>t("other"),children:[e.jsx("i",{className:"fa fa-cog me-2"}),"Service Management"]})]})}),s==="records"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"panel",children:[e.jsx("div",{className:"panel-header",children:e.jsx("h3",{children:"Search Services"})}),e.jsx("div",{className:"panel-body",children:e.jsxs("div",{className:"search-filters",children:[e.jsxs("div",{className:"filter-row",children:[e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"From Date"}),e.jsx("input",{type:"date",value:a.start_date||"",onChange:G=>n({...a,start_date:G.target.value}),className:"form-control"})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"To Date"}),e.jsx("input",{type:"date",value:a.end_date||"",onChange:G=>n({...a,end_date:G.target.value}),className:"form-control"})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"Service Type"}),e.jsx(It,{options:[{value:"",label:"-- Select Service --"},...E?.services?.map(G=>({value:G.serviceID,label:G.serviceName}))||[]],value:a.service_id||"",onChange:G=>{n({...a,service_id:G?Number(G):void 0})},placeholder:"-- Select Service --"})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"Customer"}),e.jsx(It,{options:[{value:"",label:"-- Customer --"},...E?.customers?.map(G=>({value:G.customer_id,label:G.customer_name}))||[]],value:a.customer_id||"",onChange:G=>{n({...a,customer_id:G?Number(G):void 0})},placeholder:"-- Customer --"})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"Passenger Name"}),e.jsx("input",{type:"text",value:a.passenger_name||"",onChange:G=>n({...a,passenger_name:G.target.value}),className:"form-control",placeholder:"Enter passenger name"})]})]}),e.jsxs("div",{className:"filter-row",children:[e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:""}),e.jsxs("button",{className:"btn btn-primary w-100",onClick:R,children:[e.jsx("i",{className:"fa fa-search me-2"}),"Search"]})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:""}),e.jsxs("button",{className:"btn btn-secondary w-100",onClick:Q,children:[e.jsx("i",{className:"fa fa-times me-2"}),"Clear"]})]})]}),e.jsx("div",{className:"mt-2",children:e.jsxs("small",{className:"text-muted",children:[e.jsx("i",{className:"fa fa-info-circle me-1"}),"Leave filters empty and click Search to view all records"]})})]})})]}),e.jsxs("div",{className:"panel",children:[e.jsx("div",{className:"panel-header",children:e.jsx("h3",{children:"Service Report"})}),e.jsx("div",{className:"panel-body",children:V?e.jsxs("div",{className:"text-center p-4",children:[e.jsx("i",{className:"fa fa-spinner fa-spin fa-2x"}),e.jsx("p",{className:"mt-2",children:"Loading..."})]}):e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-striped table-bordered",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"S#"}),e.jsx("th",{children:"Service Type"}),e.jsx("th",{children:"Customer Name"}),e.jsx("th",{children:"Passenger Name"}),e.jsx("th",{children:"Service Date"}),e.jsx("th",{children:"Service Detail"}),e.jsx("th",{children:"Sale Price"}),e.jsx("th",{children:"Net Price"}),e.jsx("th",{children:"Charged On"}),e.jsx("th",{children:"Provider"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:z.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:11,className:"text-center",children:r?"No services found":"Please click Search to view records"})}):z.map((G,je)=>e.jsxs("tr",{children:[e.jsx("td",{children:je+1}),e.jsx("td",{className:"text-capitalize",children:G.serviceName}),e.jsx("td",{className:"text-capitalize",children:G.customer_name}),e.jsx("td",{className:"text-capitalize",children:G.passenger_name}),e.jsx("td",{children:new Date(G.service_date).toLocaleDateString()}),e.jsx("td",{className:"text-capitalize",children:G.service_details}),e.jsxs("td",{children:[G.salePrice.toLocaleString()," ",G.currencyName]}),e.jsx("td",{children:G.netPrice>0?e.jsxs(e.Fragment,{children:[G.netPrice.toLocaleString()," ",G.currencyName]}):e.jsx("span",{className:"text-muted",children:"Not set"})}),e.jsx("td",{children:e.jsx("button",{className:`btn btn-sm btn-block ${G.chargeFlag==="bySupplier"?"bg-gradient-littleLeaf":"bg-graident-Lawrencium"} text-white`,style:{width:"100%"},children:G.ChargedEntity})}),e.jsx("td",{className:"text-capitalize",children:G.staff_name}),e.jsx("td",{children:e.jsxs("div",{className:"action-buttons",children:[e.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>$(G),title:"Edit",children:e.jsx("i",{className:"fa fa-edit"})}),e.jsx("button",{className:"btn btn-sm btn-danger",onClick:()=>me(G.serviceDetailsID),title:"Delete",children:e.jsx("i",{className:"fa fa-trash"})})]})})]},G.serviceDetailsID))})]})})})]})]}),s==="other"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"panel",children:[e.jsx("div",{className:"panel-header",children:e.jsx("h3",{children:"Search Services for Management"})}),e.jsx("div",{className:"panel-body",children:e.jsxs("div",{className:"search-filters",children:[e.jsxs("div",{className:"filter-row",children:[e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"From Date"}),e.jsx("input",{type:"date",value:y.start_date||"",onChange:G=>g({...y,start_date:G.target.value}),className:"form-control"})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"To Date"}),e.jsx("input",{type:"date",value:y.end_date||"",onChange:G=>g({...y,end_date:G.target.value}),className:"form-control"})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"Service Type"}),e.jsx(It,{options:[{value:"",label:"-- Select Service --"},...E?.services?.map(G=>({value:G.serviceID,label:G.serviceName}))||[]],value:y.service_id||"",onChange:G=>{g({...y,service_id:G?Number(G):void 0})},placeholder:"-- Select Service --"})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"Customer"}),e.jsx(It,{options:[{value:"",label:"-- Customer --"},...E?.customers?.map(G=>({value:G.customer_id,label:G.customer_name}))||[]],value:y.customer_id||"",onChange:G=>{g({...y,customer_id:G?Number(G):void 0})},placeholder:"-- Customer --"})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"Passenger Name"}),e.jsx("input",{type:"text",value:y.passenger_name||"",onChange:G=>g({...y,passenger_name:G.target.value}),className:"form-control",placeholder:"Enter passenger name"})]})]}),e.jsxs("div",{className:"filter-row",children:[e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:""}),e.jsxs("button",{className:"btn btn-primary w-100",onClick:U,children:[e.jsx("i",{className:"fa fa-search me-2"}),"Search"]})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:""}),e.jsxs("button",{className:"btn btn-secondary w-100",onClick:le,children:[e.jsx("i",{className:"fa fa-times me-2"}),"Clear"]})]})]})]})})]}),e.jsxs("div",{className:"panel",children:[e.jsx("div",{className:"panel-header",children:e.jsx("h3",{children:"Service Management"})}),e.jsx("div",{className:"panel-body",children:B?e.jsxs("div",{className:"text-center p-4",children:[e.jsx("i",{className:"fa fa-spinner fa-spin fa-2x"}),e.jsx("p",{className:"mt-2",children:"Loading..."})]}):e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-striped table-bordered",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"S#"}),e.jsx("th",{children:"Service Type"}),e.jsx("th",{children:"Customer Name"}),e.jsx("th",{children:"Passenger Name"}),e.jsx("th",{children:"Service Date"}),e.jsx("th",{children:"Service Detail"}),e.jsx("th",{children:"Sale Price"}),e.jsx("th",{children:"Net Price"}),e.jsx("th",{children:"Charged On"}),e.jsx("th",{children:"Provider"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:q.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:11,className:"text-center",children:j?"No services found":"Please click Search to view records"})}):q.map((G,je)=>e.jsxs("tr",{children:[e.jsx("td",{children:je+1}),e.jsx("td",{className:"text-capitalize",children:G.serviceName}),e.jsx("td",{className:"text-capitalize",children:G.customer_name}),e.jsx("td",{className:"text-capitalize",children:G.passenger_name}),e.jsx("td",{children:new Date(G.service_date).toLocaleDateString()}),e.jsx("td",{className:"text-capitalize",children:G.service_details}),e.jsxs("td",{children:[G.salePrice.toLocaleString()," ",G.currencyName]}),e.jsx("td",{children:G.netPrice>0?e.jsxs(e.Fragment,{children:[G.netPrice.toLocaleString()," ",G.currencyName]}):e.jsx("span",{className:"text-muted",children:"Not set"})}),e.jsx("td",{children:G.ChargedEntity?e.jsx("button",{className:`btn btn-sm btn-block ${G.chargeFlag==="bySupplier"?"bg-gradient-littleLeaf":"bg-graident-Lawrencium"} text-white`,style:{width:"100%"},children:G.ChargedEntity}):e.jsx("span",{className:"text-muted",children:"Not assigned"})}),e.jsx("td",{className:"text-capitalize",children:G.staff_name}),e.jsx("td",{children:e.jsx("button",{className:"btn btn-sm btn-warning",onClick:()=>de(G),title:"Assign Charge",children:e.jsx("i",{className:"fa fa-credit-card"})})})]},G.serviceDetailsID))})]})})})]})]}),o.isOpen&&e.jsx(Bq,{service:o.service,dropdowns:E,onClose:()=>c({isOpen:!1,service:null}),onSubmit:G=>{o.service?K.mutate({id:o.service.serviceDetailsID,data:G}):P.mutate(G)},onAddServiceType:()=>h(!0)}),N.isOpen&&N.service&&e.jsx(zq,{service:N.service,dropdowns:E,onClose:()=>v({isOpen:!1,service:null}),onSubmit:G=>{X.mutate({id:N.service.serviceDetailsID,data:G})}}),u&&e.jsx("div",{className:"modal-overlay",onClick:()=>h(!1),children:e.jsxs("div",{className:"modal-content",onClick:G=>G.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{children:"Add Service Type"}),e.jsx("button",{className:"btn-close",onClick:()=>h(!1),children:""})]}),e.jsx("div",{className:"modal-body",children:e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:["Service Name ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"text",value:m,onChange:G=>p(G.target.value),className:"form-control",placeholder:"Type service name here",autoFocus:!0})]})}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>h(!1),children:"Close"}),e.jsxs("button",{type:"button",className:"btn btn-success",onClick:D,children:[e.jsx("i",{className:"fa fa-save me-2"}),"Save"]})]})]})})]})}function Bq({service:s,dropdowns:t,onClose:a,onSubmit:n,onAddServiceType:r}){const[i,o]=A.useState({service_id:s?.serviceID||void 0,customer_id:s?.customer_id||void 0,passenger_name:s?.passenger_name||"",service_details:s?.service_details||"",sale_price:s?.salePrice||0,sale_currency_id:s?.saleCurrencyID||void 0}),[c,u]=A.useState({});A.useEffect(()=>{if(s)o({service_id:s.serviceID,customer_id:s.customer_id,passenger_name:s.passenger_name,service_details:s.service_details,sale_price:s.salePrice,sale_currency_id:s.saleCurrencyID});else{const p=t?.currencies?.[0]?.currencyID;o({service_id:void 0,customer_id:void 0,passenger_name:"",service_details:"",sale_price:0,sale_currency_id:p})}},[s,t]);const h=p=>{p.preventDefault();const y={};if(i.service_id||(y.service_id="Service type is required"),i.customer_id||(y.customer_id="Customer is required"),i.passenger_name||(y.passenger_name="Passenger name is required"),i.service_details||(y.service_details="Service detail is required"),(!i.sale_price||i.sale_price<=0)&&(y.sale_price="Sale price must be greater than 0"),Object.keys(y).length>0){u(y);return}n(i)},m=p=>{p==="-1"?(a(),r()):(o({...i,service_id:Number(p)}),u({...c,service_id:""}))};return e.jsx("div",{className:"modal-overlay",onClick:a,children:e.jsxs("div",{className:"modal-content large",onClick:p=>p.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{children:s?"Edit Service":"Add Service"}),e.jsx("button",{className:"btn-close",onClick:a,children:""})]}),e.jsxs("form",{onSubmit:h,children:[e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:[e.jsx("i",{className:"fab fa-servicestack me-2"}),"Service Type ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx(It,{options:[{value:"-1",label:"+ Add Service"},...t?.services?.map(p=>({value:p.serviceID,label:p.serviceName}))||[]],value:i.service_id||"",onChange:m,placeholder:"Select Service Type",required:!0}),c.service_id&&e.jsx("div",{className:"invalid-feedback",style:{display:"block"},children:c.service_id})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:[e.jsx("i",{className:"fa fa-user me-2"}),"Customer Name ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx(It,{options:[{value:"",label:"Select Customer"},...t?.customers?.map(p=>({value:p.customer_id,label:p.customer_name}))||[]],value:i.customer_id||"",onChange:p=>{o({...i,customer_id:Number(p)}),u({...c,customer_id:""})},placeholder:"Select Customer",required:!0}),c.customer_id&&e.jsx("div",{className:"invalid-feedback",style:{display:"block"},children:c.customer_id})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:[e.jsx("i",{className:"fa fa-user-alt me-2"}),"Passenger Name ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"text",value:i.passenger_name,onChange:p=>{o({...i,passenger_name:p.target.value}),u({...c,passenger_name:""})},className:`form-control ${c.passenger_name?"is-invalid":""}`,placeholder:"Enter passenger name"}),c.passenger_name&&e.jsx("div",{className:"invalid-feedback",children:c.passenger_name})]})]}),e.jsxs("div",{className:"form-group mb-3",children:[e.jsxs("label",{children:[e.jsx("i",{className:"fa fa-arrow-down me-2"}),"Service Detail ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("textarea",{value:i.service_details,onChange:p=>{o({...i,service_details:p.target.value}),u({...c,service_details:""})},className:`form-control ${c.service_details?"is-invalid":""}`,rows:3,placeholder:"Service detail is must"}),c.service_details&&e.jsx("div",{className:"invalid-feedback",children:c.service_details})]}),e.jsxs("div",{className:"form-group mb-3",children:[e.jsxs("label",{children:[e.jsx("i",{className:"fa fa-money-bill me-2"}),"Sale Price ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("div",{className:"price-currency-group",children:[e.jsx("input",{type:"number",step:"0.01",value:i.sale_price,onChange:p=>{o({...i,sale_price:Number(p.target.value)}),u({...c,sale_price:""})},className:`form-control ${c.sale_price?"is-invalid":""}`,placeholder:"Sale Price"}),e.jsx(It,{options:t?.currencies?.map(p=>({value:p.currencyID,label:p.currencyName}))||[],value:i.sale_currency_id||"",onChange:p=>o({...i,sale_currency_id:Number(p)}),placeholder:"Currency"})]}),c.sale_price&&e.jsx("div",{className:"invalid-feedback",style:{display:"block"},children:c.sale_price})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:a,children:"Close"}),e.jsxs("button",{type:"submit",className:"btn btn-success",children:[e.jsx("i",{className:"fa fa-save me-2"}),s?"Update":"Save"]})]})]})]})})}function zq({service:s,dropdowns:t,onClose:a,onSubmit:n}){const[r,i]=A.useState("supplier"),[o,c]=A.useState({supplier_id:s.Supplier_id||null,account_id:s.accoundID||null,net_price:s.netPrice||0,net_currency_id:s.netCurrencyID||t?.currencies?.[0]?.currencyID}),[u,h]=A.useState({});A.useEffect(()=>{s.Supplier_id?(i("supplier"),c(p=>({...p,supplier_id:s.Supplier_id,account_id:null}))):s.accoundID&&(i("account"),c(p=>({...p,supplier_id:null,account_id:s.accoundID}))),s.netPrice>0&&c(p=>({...p,net_price:s.netPrice,net_currency_id:s.netCurrencyID}))},[s,t]);const m=p=>{p.preventDefault();const y={};if(r==="supplier"&&(!o.supplier_id||o.supplier_id===-1)&&(y.supplier_id="Supplier is required"),r==="account"&&(!o.account_id||o.account_id===-1)&&(y.account_id="Account is required"),(!o.net_price||o.net_price<=0)&&(y.net_price="Net price must be greater than 0"),o.net_currency_id||(y.net_currency_id="Currency is required"),Object.keys(y).length>0){h(y);return}const g={supplier_id:r==="supplier"?o.supplier_id:null,account_id:r==="account"?o.account_id:null,net_price:o.net_price,net_currency_id:o.net_currency_id};n(g)};return e.jsx("div",{className:"modal-overlay",onClick:a,children:e.jsxs("div",{className:"modal-content large",onClick:p=>p.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{children:"Assign Service Charge"}),e.jsx("button",{className:"btn-close",onClick:a,children:""})]}),e.jsxs("form",{onSubmit:m,children:[e.jsxs("div",{className:"modal-body",children:[e.jsx("div",{className:"panel mb-3",children:e.jsx("div",{className:"panel-body",children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsx("strong",{children:"Service:"})," ",s.serviceName]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("strong",{children:"Customer:"})," ",s.customer_name]}),e.jsxs("div",{className:"col-md-6 mt-2",children:[e.jsx("strong",{children:"Passenger:"})," ",s.passenger_name]}),e.jsxs("div",{className:"col-md-6 mt-2",children:[e.jsx("strong",{children:"Sale Price:"})," ",s.salePrice.toLocaleString()," ",s.currencyName]})]})})}),e.jsxs("div",{className:"form-group mb-3",children:[e.jsxs("label",{className:"mb-2",children:["Charge Payment Type ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("div",{className:"payment-type-selector",children:[e.jsxs("div",{className:"form-check form-check-inline",children:[e.jsx("input",{className:"form-check-input",type:"radio",name:"paymentType",id:"paymentSupplier",value:"supplier",checked:r==="supplier",onChange:p=>{i("supplier"),c({...o,account_id:null}),h({...u,supplier_id:"",account_id:""})}}),e.jsx("label",{className:"form-check-label",htmlFor:"paymentSupplier",children:"Through Supplier"})]}),e.jsxs("div",{className:"form-check form-check-inline",children:[e.jsx("input",{className:"form-check-input",type:"radio",name:"paymentType",id:"paymentAccount",value:"account",checked:r==="account",onChange:p=>{i("account"),c({...o,supplier_id:null}),h({...u,supplier_id:"",account_id:""})}}),e.jsx("label",{className:"form-check-label",htmlFor:"paymentAccount",children:"Direct Account Payment"})]})]})]}),r==="supplier"&&e.jsxs("div",{className:"form-group mb-3",children:[e.jsxs("label",{children:[e.jsx("i",{className:"fa fa-truck me-2"}),"Supplier ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx(It,{options:[{value:"",label:"-- Select Supplier --"},...t?.suppliers?.map(p=>({value:p.supp_id,label:p.supp_name}))||[]],value:o.supplier_id||"",onChange:p=>{c({...o,supplier_id:p?Number(p):null}),h({...u,supplier_id:""})},placeholder:"Select Supplier",required:!0}),u.supplier_id&&e.jsx("div",{className:"invalid-feedback",style:{display:"block"},children:u.supplier_id})]}),r==="account"&&e.jsxs("div",{className:"form-group mb-3",children:[e.jsxs("label",{children:[e.jsx("i",{className:"fa fa-university me-2"}),"Account ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx(It,{options:[{value:"",label:"-- Select Account --"},...t?.accounts?.map(p=>({value:p.account_ID,label:p.account_Name}))||[]],value:o.account_id||"",onChange:p=>{c({...o,account_id:p?Number(p):null}),h({...u,account_id:""})},placeholder:"Select Account",required:!0}),u.account_id&&e.jsx("div",{className:"invalid-feedback",style:{display:"block"},children:u.account_id})]}),e.jsxs("div",{className:"form-group mb-3",children:[e.jsxs("label",{children:[e.jsx("i",{className:"fa fa-money-bill me-2"}),"Net Price ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("div",{className:"price-currency-group",children:[e.jsx("input",{type:"number",step:"0.01",value:o.net_price,onChange:p=>{c({...o,net_price:Number(p.target.value)}),h({...u,net_price:""})},className:`form-control ${u.net_price?"is-invalid":""}`,placeholder:"Net Price"}),e.jsx(It,{options:t?.currencies?.map(p=>({value:p.currencyID,label:p.currencyName}))||[],value:o.net_currency_id||"",onChange:p=>{c({...o,net_currency_id:Number(p)}),h({...u,net_currency_id:""})},placeholder:"Currency"})]}),u.net_price&&e.jsx("div",{className:"invalid-feedback",style:{display:"block"},children:u.net_price}),u.net_currency_id&&e.jsx("div",{className:"invalid-feedback",style:{display:"block"},children:u.net_currency_id})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:a,children:"Close"}),e.jsxs("button",{type:"submit",className:"btn btn-success",children:[e.jsx("i",{className:"fa fa-save me-2"}),"Assign Charge"]})]})]})]})})}const qi={async getSuppliers(){const s=await Ne.post("/supplier/suppliers.php",{action:"getSuppliers"});if(s.data.success)return s.data.data;throw new Error(s.data.message||"Failed to fetch suppliers")},async getSupplier(s){const t=await Ne.post("/supplier/suppliers.php",{action:"getSupplier",supplier_id:s});if(t.data.success)return t.data.data;throw new Error(t.data.message||"Failed to fetch supplier")},async createSupplier(s){const t=await Ne.post("/supplier/suppliers.php",{action:"createSupplier",...s});if(!t.data.success)throw new Error(t.data.message||"Failed to create supplier")},async updateSupplier(s){const t=await Ne.post("/supplier/suppliers.php",{action:"updateSupplier",...s});if(!t.data.success)throw new Error(t.data.message||"Failed to update supplier")},async deleteSupplier(s){const t=await Ne.post("/supplier/suppliers.php",{action:"deleteSupplier",supplier_id:s});if(!t.data.success)throw new Error(t.data.message||"Failed to delete supplier")},async getPendingSuppliers(s,t){const a=await Ne.post("/supplier/suppliers.php",{action:"getPendingSuppliers",supplier_id:s||"",currency_id:t});if(a.data.success)return a.data.data||[];throw new Error(a.data.message||"Failed to fetch pending suppliers")},async getSupplierPaymentDetails(s,t){const a=await Ne.post("/supplier/suppliers.php",{action:"getSupplierPaymentDetails",supplier_id:s,currency_id:t});if(a.data.success)return a.data.data;throw new Error(a.data.message||"Failed to fetch payment details")},async makePayment(s){const t=await Ne.post("/supplier/suppliers.php",{action:"makePayment",...s});if(!t.data.success)throw new Error(t.data.message||"Failed to record payment")},async getCurrencies(s){const t=await Ne.post("/supplier/suppliers.php",{action:"getCurrencies",supplier_id:s||""});if(t.data.success)return t.data.data;throw new Error(t.data.message||"Failed to fetch currencies")},async getDropdowns(){const s=await Ne.get("/supplier/dropdowns.php");if(s.data.success)return s.data.data;throw new Error(s.data.message||"Failed to fetch dropdowns")},async getSupplierInfo(s){const t=await Ne.post("/supplier/ledger.php",{action:"getSupplierInfo",supplier_id:s});if(t.data.success)return t.data.data;throw new Error(t.data.message||"Failed to fetch supplier info")},async getCurrencyName(s){const t=await Ne.post("/supplier/ledger.php",{action:"getCurrencyName",currency_id:s});if(t.data.success)return t.data.data;throw new Error(t.data.message||"Failed to fetch currency name")},async getLedger(s,t){const a=await Ne.post("/supplier/ledger.php",{action:"getLedger",supplier_id:s,currency_id:t});if(a.data.success)return a.data.data;throw new Error(a.data.message||"Failed to fetch ledger")}};function qq(){const[s,t]=A.useState("add"),[a,n]=A.useState(null),[r,i]=A.useState({isOpen:!1,supplier:null}),[o,c]=A.useState({supplier_name:"",supplier_email:"",supplier_address:"",supplier_phone:"",supplier_type_id:void 0}),[u,h]=A.useState({supplier_id:void 0,payment_amount:0,currency_id:void 0,remarks:"",account_id:void 0}),[m,p]=A.useState({}),y=Wa(),{data:g}=Rt({queryKey:["supplier-dropdowns"],queryFn:()=>qi.getDropdowns(),staleTime:6e4,refetchOnWindowFocus:!1});A.useEffect(()=>{if(s==="pending"&&g?.currencies&&!m.currency_id){const Y=g.currencies.find($=>$.currencyName.toUpperCase()==="AED"||$.currencyID===3);Y?p($=>({...$,currency_id:Y.currencyID})):g.currencies.length>0&&p($=>({...$,currency_id:g.currencies[0].currencyID}))}},[s,g?.currencies,m.currency_id]);const{data:j=[],isLoading:b,refetch:N}=Rt({queryKey:["suppliers"],queryFn:()=>qi.getSuppliers(),enabled:s==="view",staleTime:3e4,refetchOnWindowFocus:!1}),{data:v=[],refetch:S}=Rt({queryKey:["supplier-currencies",m.supplier_id],queryFn:()=>qi.getCurrencies(m.supplier_id),enabled:s==="pending",initialData:g?.currencies||[],staleTime:3e4,refetchOnWindowFocus:!1}),{data:E=[],isLoading:L,refetch:z}=Rt({queryKey:["pending-suppliers",m],queryFn:()=>qi.getPendingSuppliers(m.supplier_id,m.currency_id),enabled:s==="pending"&&!!m.currency_id,staleTime:1e4,refetchOnWindowFocus:!1}),V=wt({mutationFn:Y=>qi.createSupplier(Y),onSuccess:()=>{y.invalidateQueries({queryKey:["suppliers"]}),y.invalidateQueries({queryKey:["supplier-dropdowns"]}),c({supplier_name:"",supplier_email:"",supplier_address:"",supplier_phone:"",supplier_type_id:void 0}),W.fire("Success","Supplier created successfully","success")},onError:Y=>{W.fire("Error",Y.response?.data?.message||"Failed to create supplier","error")}}),te=wt({mutationFn:Y=>qi.updateSupplier(Y),onSuccess:()=>{y.invalidateQueries({queryKey:["suppliers"]}),y.invalidateQueries({queryKey:["supplier-dropdowns"]}),n(null),W.fire("Success","Supplier updated successfully","success")},onError:Y=>{W.fire("Error",Y.response?.data?.message||"Failed to update supplier","error")}}),q=wt({mutationFn:Y=>qi.deleteSupplier(Y),onSuccess:()=>{y.invalidateQueries({queryKey:["suppliers"]}),y.invalidateQueries({queryKey:["supplier-dropdowns"]}),W.fire("Success","Supplier deleted successfully","success")},onError:Y=>{W.fire("Error",Y.response?.data?.message||"Failed to delete supplier","error")}}),B=wt({mutationFn:Y=>qi.makePayment(Y),onSuccess:()=>{y.invalidateQueries({queryKey:["pending-suppliers"]}),y.invalidateQueries({queryKey:["supplier-dropdowns"]}),i({isOpen:!1,supplier:null}),h({supplier_id:void 0,payment_amount:0,currency_id:void 0,remarks:"",account_id:void 0}),W.fire("Success","Payment recorded successfully","success"),setTimeout(()=>z(),500)},onError:Y=>{W.fire("Error",Y.response?.data?.message||"Failed to record payment","error")}}),J=Y=>{if(Y.preventDefault(),!o.supplier_name||!o.supplier_email||!o.supplier_address||!o.supplier_phone||!o.supplier_type_id){W.fire("Validation Error","All fields are required","error");return}a?te.mutate({supplier_id:a.supp_id,...o}):V.mutate(o)},P=async Y=>{n(Y),c({supplier_name:Y.supp_name,supplier_email:Y.supp_email,supplier_address:Y.supp_add,supplier_phone:Y.supp_phone,supplier_type_id:Y.supp_type_id}),t("add")},K=Y=>{W.fire({title:"Are you sure?",text:`Delete supplier "${Y.supp_name}"?`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#dc2626",cancelButtonColor:"#6b7280",confirmButtonText:"Yes, delete it!"}).then($=>{$.isConfirmed&&q.mutate(Y.supp_id)})},H=async Y=>{if(!m.currency_id){W.fire("Error","Please select a currency first","error");return}try{const $=await qi.getSupplierPaymentDetails(Y.main_supp,m.currency_id);h({supplier_id:Y.main_supp,payment_amount:0,currency_id:m.currency_id,remarks:"",account_id:void 0}),i({isOpen:!0,supplier:{...Y,Pending:$.total}})}catch($){W.fire("Error",$.message||"Failed to load payment details","error")}},se=Y=>{if(Y.preventDefault(),!u.supplier_id||!u.payment_amount||u.payment_amount<=0||!u.currency_id||!u.account_id){W.fire("Validation Error","All fields are required and payment amount must be greater than 0","error");return}B.mutate(u)},X=Y=>{p({...m,currency_id:Y})},R=Y=>{p({...m,supplier_id:Y||void 0}),Y&&setTimeout(()=>S(),100)},Q=E.reduce((Y,$)=>Y+(parseFloat(String($.Pending))||0),0);return e.jsxs("div",{className:"suppliers-page",children:[e.jsx("div",{className:"page-header",children:e.jsxs("h1",{children:[e.jsx("i",{className:"fa fa-truck me-2"}),"Suppliers"]})}),e.jsx("div",{className:"tabs-container",children:e.jsxs("div",{className:"tabs",children:[e.jsxs("button",{className:`tab ${s==="add"?"active":""}`,onClick:()=>{t("add"),n(null),c({supplier_name:"",supplier_email:"",supplier_address:"",supplier_phone:"",supplier_type_id:void 0})},children:[e.jsx("i",{className:"fa fa-plus me-2"}),"Add Supplier"]}),e.jsxs("button",{className:`tab ${s==="view"?"active":""}`,onClick:()=>t("view"),children:[e.jsx("i",{className:"fa fa-list me-2"}),"View Suppliers"]}),e.jsxs("button",{className:`tab ${s==="pending"?"active":""}`,onClick:()=>t("pending"),children:[e.jsx("i",{className:"fa fa-money me-2"}),"Pending Payments & Ledger"]})]})}),s==="add"&&e.jsxs("div",{className:"panel",children:[e.jsx("div",{className:"panel-header",children:e.jsx("h3",{children:a?"Edit Supplier":"Supplier Entry Form"})}),e.jsx("div",{className:"panel-body",children:e.jsxs("form",{onSubmit:J,children:[e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:[e.jsx("i",{className:"fa fa-user me-2"}),"Supplier Name ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"text",value:o.supplier_name||"",onChange:Y=>c({...o,supplier_name:Y.target.value}),className:"form-control",placeholder:"Enter Supplier Name",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:[e.jsx("i",{className:"fa fa-envelope me-2"}),"Supplier Email ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"email",value:o.supplier_email||"",onChange:Y=>c({...o,supplier_email:Y.target.value}),className:"form-control",placeholder:"Enter Supplier Email",required:!0})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:[e.jsx("i",{className:"fa fa-map-marker-alt me-2"}),"Supplier Address ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"text",value:o.supplier_address||"",onChange:Y=>c({...o,supplier_address:Y.target.value}),className:"form-control",placeholder:"Enter Supplier Address",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:[e.jsx("i",{className:"fa fa-phone me-2"}),"Supplier Phone ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"text",value:o.supplier_phone||"",onChange:Y=>c({...o,supplier_phone:Y.target.value}),className:"form-control",placeholder:"Enter Supplier Phone",required:!0})]})]}),e.jsx("div",{className:"form-row",children:e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:[e.jsx("i",{className:"fa fa-tag me-2"}),"Supplier Type ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("select",{value:o.supplier_type_id||"",onChange:Y=>c({...o,supplier_type_id:Number(Y.target.value)}),className:"form-control",required:!0,children:[e.jsx("option",{value:"",children:"--Select Supplier Type--"}),e.jsx("option",{value:"1",children:"Travel"}),e.jsx("option",{value:"2",children:"Exchange"})]})]})}),e.jsxs("div",{className:"form-actions",children:[e.jsxs("button",{type:"submit",className:"btn btn-success",children:[e.jsx("i",{className:"fa fa-save me-2"}),a?"Update":"Save"," Record"]}),a&&e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>{n(null),c({supplier_name:"",supplier_email:"",supplier_address:"",supplier_phone:"",supplier_type_id:void 0})},children:"Cancel"}),e.jsxs("a",{href:"#view",onClick:Y=>{Y.preventDefault(),t("view")},className:"btn btn-link",children:[e.jsx("i",{className:"fa fa-info me-2"}),"View Report"]})]})]})})]}),s==="view"&&e.jsxs("div",{className:"panel",children:[e.jsx("div",{className:"panel-header",children:e.jsx("h3",{children:"Supplier Report"})}),e.jsx("div",{className:"panel-body",children:b?e.jsxs("div",{className:"text-center p-4",children:[e.jsx("i",{className:"fa fa-spinner fa-spin fa-2x"}),e.jsx("p",{className:"mt-2",children:"Loading..."})]}):e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-striped table-bordered",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"S#"}),e.jsx("th",{children:"Supplier Name"}),e.jsx("th",{children:"Supplier Email"}),e.jsx("th",{children:"Supplier Address"}),e.jsx("th",{children:"Supplier Phone"}),e.jsx("th",{children:"Supplier Type"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:j.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"text-center",children:"No suppliers found"})}):j.map((Y,$)=>e.jsxs("tr",{children:[e.jsx("td",{children:$+1}),e.jsx("td",{className:"text-capitalize",children:Y.supp_name}),e.jsx("td",{children:Y.supp_email}),e.jsx("td",{children:Y.supp_add}),e.jsx("td",{children:Y.supp_phone}),e.jsx("td",{className:"text-capitalize",children:Y.supp_type}),e.jsx("td",{children:e.jsxs("div",{className:"action-buttons",children:[e.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>P(Y),title:"Edit",children:e.jsx("i",{className:"fa fa-edit"})}),e.jsx("button",{className:"btn btn-sm btn-danger",onClick:()=>K(Y),title:"Delete",children:e.jsx("i",{className:"fa fa-trash"})})]})})]},Y.supp_id))})]})})})]}),s==="pending"&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"panel",children:[e.jsx("div",{className:"panel-header",children:e.jsx("h3",{children:"Supplier Payments & Ledger"})}),e.jsxs("div",{className:"panel-body",children:[e.jsxs("div",{className:"filter-row mb-3",children:[e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"Supplier"}),e.jsx(It,{options:[{value:"",label:"--Select Supplier--"},...g?.suppliers?.map(Y=>({value:Y.supp_id,label:Y.supp_name}))||[]],value:m.supplier_id||"",onChange:Y=>R(Number(Y)),placeholder:"Select Supplier (Optional)"})]}),e.jsxs("div",{className:"filter-group",children:[e.jsxs("label",{children:["Currency ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx(It,{options:[{value:"",label:"--Select Currency--"},...v.length>0?v.map(Y=>({value:Y.currencyID,label:Y.currencyName})):g?.currencies?.map(Y=>({value:Y.currencyID,label:Y.currencyName}))||[]],value:m.currency_id||"",onChange:Y=>X(Number(Y)),placeholder:"Select Currency",required:!0})]})]}),L?e.jsxs("div",{className:"text-center p-4",children:[e.jsx("i",{className:"fa fa-spinner fa-spin fa-2x"}),e.jsx("p",{className:"mt-2",children:"Loading..."})]}):m.currency_id?e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-striped table-bordered",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"#"}),e.jsx("th",{children:"Supplier Name"}),e.jsx("th",{children:"Supplier Email"}),e.jsx("th",{children:"Supplier Phone"}),e.jsx("th",{children:"Pending Amount"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:E.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"text-center",children:"No pending suppliers found"})}):e.jsxs(e.Fragment,{children:[E.map((Y,$)=>e.jsxs("tr",{children:[e.jsx("td",{children:$+1}),e.jsx("td",{className:"text-capitalize",children:Y.supp_name}),e.jsx("td",{children:Y.supp_email}),e.jsx("td",{children:Y.supp_phone}),e.jsx("td",{children:parseFloat(String(Y.Pending)).toLocaleString()}),e.jsxs("td",{children:[e.jsxs("a",{href:`/supplier/ledger?id=${Y.main_supp}&curID=${m.currency_id}`,className:"btn btn-sm btn-primary me-2",children:[e.jsx("i",{className:"fa fa-eye me-1"}),"View Ledger"]}),e.jsxs("button",{className:"btn btn-sm btn-danger",onClick:()=>H(Y),children:[e.jsx("i",{className:"fa fa-cc-paypal me-1"}),"Make Payment"]})]})]},Y.main_supp)),Q>0&&e.jsxs("tr",{className:"total-row",children:[e.jsx("td",{colSpan:4}),e.jsx("td",{className:"text-end",children:e.jsxs("strong",{children:["Total: ",Q.toLocaleString()]})}),e.jsx("td",{})]})]})})]})}):e.jsxs("div",{className:"alert alert-info",children:[e.jsx("i",{className:"fa fa-info-circle me-2"}),"Please select a currency to view pending suppliers"]})]})]})}),r.isOpen&&r.supplier&&e.jsx("div",{className:"modal-overlay",onClick:()=>i({isOpen:!1,supplier:null}),children:e.jsxs("div",{className:"modal-content",onClick:Y=>Y.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{children:"Supplier Make Payment"}),e.jsx("button",{className:"btn-close",onClick:()=>i({isOpen:!1,supplier:null}),children:""})]}),e.jsxs("form",{onSubmit:se,children:[e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"form-group mb-3",children:[e.jsxs("label",{children:[e.jsx("i",{className:"fa fa-user me-2"}),"Total Charges"]}),e.jsx("input",{type:"text",disabled:!0,className:"form-control",value:r.supplier.Pending.toLocaleString()})]}),e.jsxs("div",{className:"form-group mb-3",children:[e.jsxs("label",{children:[e.jsx("i",{className:"fa fa-money-bill me-2"}),"Payment Amount ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"number",step:"0.01",value:u.payment_amount||"",onChange:Y=>h({...u,payment_amount:Number(Y.target.value)}),className:"form-control",placeholder:"Enter payment amount",required:!0})]}),e.jsxs("div",{className:"form-group mb-3",children:[e.jsxs("label",{children:[e.jsx("i",{className:"fa fa-comment me-2"}),"Remarks"]}),e.jsx("textarea",{value:u.remarks||"",onChange:Y=>h({...u,remarks:Y.target.value}),className:"form-control",rows:5,placeholder:"Enter remarks"})]}),e.jsxs("div",{className:"form-group mb-3",children:[e.jsxs("label",{children:[e.jsx("i",{className:"fa fa-university me-2"}),"Account ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx(It,{options:[{value:"",label:"--Select Account--"},...g?.accounts?.map(Y=>({value:Y.account_ID,label:Y.account_Name}))||[]],value:u.account_id||"",onChange:Y=>h({...u,account_id:Number(Y)}),placeholder:"Select Account",required:!0})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>i({isOpen:!1,supplier:null}),children:"Close"}),e.jsxs("button",{type:"submit",className:"btn btn-success",children:[e.jsx("i",{className:"fa fa-save me-2"}),"Save Payment"]})]})]})]})})]})}function Uq(){const[s]=rc(),t=Vn(),a=Number(s.get("id")),n=Number(s.get("curID")),r=A.useRef(null),{data:i}=Rt({queryKey:["supplier-info",a],queryFn:()=>qi.getSupplierInfo(a),enabled:!!a}),{data:o}=Rt({queryKey:["currency-name",n],queryFn:()=>qi.getCurrencyName(n),enabled:!!n}),{data:c=[],isLoading:u}=Rt({queryKey:["supplier-ledger",a,n],queryFn:()=>qi.getLedger(a,n),enabled:!!a&&!!n}),h=c.reduce((j,b)=>(j.totalCharges+=parseFloat(String(b.Debit))||0,j.totalPaid+=parseFloat(String(b.Credit))||0,b.TRANSACTION_Type==="Refund"&&(j.totalRefund+=parseFloat(String(b.Credit))||0),j),{totalCharges:0,totalPaid:0,totalRefund:0}),m=h.totalCharges-h.totalPaid,p=c.map((j,b)=>{let N=0;for(let v=0;v<=b;v++)N+=parseFloat(String(c[v].Debit))||0,N-=parseFloat(String(c[v].Credit))||0;return{...j,runningBalance:N}}),y=()=>{if(!r.current)return;const j=window.open("","_blank");if(!j){alert("Please allow popups to print");return}const b=r.current.innerHTML;j.document.write(`
      <!DOCTYPE html>
      <html>
        <head>
          <title>Supplier Ledger</title>
          
      <style>
        @page {
          size: A4;
          margin: 15mm;
        }
        body {
          font-family: Arial, sans-serif;
          margin: 0;
          padding: 20px;
        }
        .ledger-header {
          display: flex;
          justify-content: space-between;
          margin-bottom: 30px;
        }
        .company-info {
          flex: 1;
        }
        .logo-section {
          display: inline-flex;
          align-items: center;
          justify-content: flex-start;
          margin-bottom: 20px;
          background: #000;
          padding: 15px 20px;
          border-radius: 8px;
        }
        .company-logo {
          height: auto;
          width: auto;
          max-height: 150px;
          max-width: 200px;
          margin-right: 0;
          object-fit: contain;
          display: block;
        }
        .company-details p {
          margin-bottom: 0;
          font-size: 15px;
        }
        .company-title {
          font-size: 20px;
          margin-top: 3px;
          margin-bottom: 0;
        }
        .supplier-info-box {
          width: 350px;
          margin-left: 20px;
        }
        .section-title {
          font-size: 18px;
          color: #dc2626;
          font-weight: bold;
          margin-left: 47px;
          margin-top: 20px;
        }
        .divider {
          border: none;
          width: 230px;
          border-bottom: 2px solid black;
          margin-left: 47px;
        }
        .supplier-info-box p {
          font-size: 15px;
          margin-bottom: 0;
          margin-left: 47px;
        }
        .date-text {
          font-size: 15px;
          margin-left: 47px;
        }
        .table-container {
          margin: 30px 0;
        }
        .ledger-table {
          width: 100%;
          border-collapse: collapse;
          font-size: 14px;
        }
        .ledger-table thead {
          background: #dc2626;
          color: #fff;
        }
        .ledger-table th {
          padding: 12px 8px;
          text-align: left;
          border: 1px solid #ddd;
        }
        .ledger-table tbody td {
          padding: 10px 8px;
          border: 1px solid #ddd;
        }
        .ledger-table tbody tr:nth-of-type(odd) {
          background-color: rgba(0, 0, 0, 0.05);
        }
        .ledger-table tbody tr.payment-row td {
          background-color: #6b7280;
          color: white;
        }
        .totals-section {
          margin-top: 30px;
          padding-left: 33.33%;
          background: #fff;
          color: #000;
        }
        .total-row {
          display: flex;
          justify-content: space-between;
          margin-bottom: 10px;
          background: #fff;
          padding: 5px 0;
        }
        .total-label {
          font-weight: bold;
          font-size: 20px;
          margin: 0;
          color: #000;
          background: #fff;
        }
        .total-value {
          font-size: 20px;
          margin: 0;
          color: #000;
          background: #fff;
          text-align: right;
        }
        .total-row.outstanding {
          background: #fff !important;
        }
        .total-row.outstanding .total-label,
        .total-row.outstanding .total-value {
          font-size: 30px;
          color: #000 !important;
          background: #fff !important;
        }
        .totals-section hr {
          border: none;
          border-top: 2px solid #000;
          margin: 10px 0;
        }
        .text-capitalize {
          text-transform: capitalize;
        }
        .text-center {
          text-align: center;
        }
      </style>
    
        </head>
        <body>
          ${b}
        </body>
      </html>
    `),j.document.close(),j.onload=()=>{j.print()}},g=()=>{t("/supplier")};return!a||!n?e.jsx("div",{className:"supplier-ledger-page",children:e.jsx("div",{className:"panel",children:e.jsx("div",{className:"panel-body",children:e.jsxs("div",{className:"alert alert-danger",children:[e.jsx("i",{className:"fa fa-exclamation-circle me-2"}),"Invalid parameters. Supplier ID and Currency ID are required."]})})})}):e.jsxs("div",{className:"supplier-ledger-page",children:[e.jsx("div",{className:"no-print",children:e.jsxs("div",{className:"print-actions",children:[e.jsxs("button",{className:"btn btn-secondary",onClick:g,children:[e.jsx("i",{className:"fa fa-arrow-left me-2"}),"Back to Supplier"]}),e.jsxs("button",{className:"btn btn-danger",onClick:y,children:[e.jsx("i",{className:"fa fa-print me-2"}),"Print Ledger"]})]})}),e.jsxs("div",{ref:r,className:"print-area",children:[e.jsxs("div",{className:"ledger-header",children:[e.jsxs("div",{className:"company-info",children:[e.jsx("div",{className:"logo-section",children:e.jsx("img",{src:"/assets/logo-white.png",alt:"Logo",className:"company-logo"})}),e.jsxs("div",{className:"company-details",children:[e.jsx("p",{className:"company-title",children:e.jsx("strong",{children:"Selab Nadiry Travel & Tourism"})}),e.jsx("p",{children:"Frij Murar Shop# 15, Deira, Dubai"}),e.jsx("p",{children:"Contact: +971 4 298 4564, +971 58 514 0764"})]})]}),e.jsxs("div",{className:"supplier-info-box",children:[e.jsx("h3",{className:"section-title",children:"Supplier Information"}),e.jsx("hr",{className:"divider"}),e.jsxs("p",{children:["Name: ",e.jsx("span",{className:"text-capitalize",children:i?.supp_name||"-"})]}),e.jsxs("p",{children:["Email: ",e.jsx("span",{children:i?.supp_email||"Nill"})]}),e.jsxs("p",{children:["Phone: ",e.jsx("span",{children:i?.supp_phone||"Nill"})]}),e.jsx("h3",{className:"section-title mt-4",children:"Date"}),e.jsx("hr",{className:"divider"}),e.jsx("h3",{className:"date-text",children:new Date().toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})})]})]}),e.jsx("div",{className:"table-container",children:u?e.jsxs("div",{className:"text-center p-4",children:[e.jsx("i",{className:"fa fa-spinner fa-spin fa-2x"}),e.jsx("p",{className:"mt-2",children:"Loading..."})]}):e.jsxs("table",{className:"ledger-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"S#"}),e.jsx("th",{children:"Transaction Type"}),e.jsx("th",{children:"Passenger Name"}),e.jsx("th",{children:"Date"}),e.jsx("th",{children:"Identification"}),e.jsx("th",{children:"Origin"}),e.jsx("th",{children:"Destination"}),e.jsx("th",{children:"Debit"}),e.jsx("th",{children:"Credit"}),e.jsx("th",{children:"Running Balance"})]})}),e.jsx("tbody",{children:p.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:10,className:"text-center",children:"No transactions found"})}):p.map((j,b)=>e.jsxs("tr",{className:j.TRANSACTION_Type==="Payment"?"payment-row":"",children:[e.jsx("td",{children:b+1}),e.jsx("td",{className:"text-capitalize",children:j.TRANSACTION_Type}),e.jsx("td",{className:"text-capitalize",children:j.TRANSACTION_Type==="Payment"?j.remarks:j.passenger_name||"-"}),e.jsx("td",{children:j.date}),e.jsx("td",{children:j.TRANSACTION_Type==="Payment"?`Payment Details: ${j.remarks}`:j.Identification||"-"}),e.jsx("td",{children:j.Orgin||"-"}),e.jsx("td",{children:j.Destination||"-"}),e.jsx("td",{children:parseFloat(String(j.Debit)).toLocaleString()}),e.jsx("td",{children:parseFloat(String(j.Credit)).toLocaleString()}),e.jsx("td",{children:j.runningBalance.toLocaleString()})]},b))})]})}),e.jsxs("div",{className:"totals-section",children:[e.jsxs("div",{className:"total-row",children:[e.jsx("p",{className:"total-label",children:"Total Charges:"}),e.jsxs("p",{className:"total-value",children:[h.totalCharges.toLocaleString()," ",o?.currencyName||""]})]}),e.jsx("hr",{}),e.jsxs("div",{className:"total-row",children:[e.jsx("p",{className:"total-label",children:"Total Paid:"}),e.jsxs("p",{className:"total-value",children:[h.totalPaid.toLocaleString()," ",o?.currencyName||""]})]}),e.jsxs("div",{className:"total-row",children:[e.jsx("p",{className:"total-label",children:"Total Refund:"}),e.jsxs("p",{className:"total-value",children:[h.totalRefund.toLocaleString()," ",o?.currencyName||""]})]}),e.jsx("hr",{}),e.jsxs("div",{className:"total-row outstanding",children:[e.jsx("p",{className:"total-label",children:e.jsx("strong",{children:"Outstanding Balance:"})}),e.jsx("p",{className:"total-value",children:e.jsxs("strong",{children:[m.toLocaleString()," ",o?.currencyName||""]})})]}),e.jsx("hr",{})]})]})]})}function Hq(){const s=Wa(),[t,a]=A.useState(""),[n,r]=A.useState(null),[i,o]=A.useState(!1),[c,u]=A.useState(null),[h,m]=A.useState(0),[p,y]=A.useState({payment_amount:0,payment_detail:"",account_id:void 0}),{data:g=[]}=Rt({queryKey:["supplier-ledger-suppliers"],queryFn:async()=>{const P=await Ne.post("/supplier/suppliers.php",{action:"getSuppliers"});return P.data.success?P.data.data:[]},staleTime:6e4,refetchOnWindowFocus:!1}),{data:j=[]}=Rt({queryKey:["supplier-ledger-currencies"],queryFn:async()=>{const P=await Ne.post("/supplier/dropdowns.php",{action:"getCurrencies"});return P.data.success&&P.data.data?.currencies?P.data.data.currencies:[]},staleTime:6e4,refetchOnWindowFocus:!1}),{data:b=[],refetch:N}=Rt({queryKey:["supplier-ledger-pending",t,n],queryFn:()=>qi.getPendingSuppliers(t,n),enabled:!!n,staleTime:1e4,refetchOnWindowFocus:!1}),{data:v=[]}=Rt({queryKey:["accounts-dropdown"],queryFn:async()=>{const P=await Ne.get("/payment/dropdowns.php?type=accounts");return P.data.success&&P.data.data?.accounts?P.data.data.accounts:[]},staleTime:6e4,refetchOnWindowFocus:!1});A.useEffect(()=>{if(j.length>0&&!n){const P=j.find(K=>K.currencyName.toUpperCase()==="AED");r(P?P.currencyID:j[0].currencyID)}},[j,n]);const S=wt({mutationFn:async P=>{const K=await Ne.post("/supplier/suppliers.php",{action:"makePayment",...P});if(!K.data.success)throw new Error(K.data.message||"Failed to add payment");return K.data},onSuccess:()=>{W.fire({icon:"success",title:"Success!",text:"Payment added successfully",timer:1500,showConfirmButton:!1}),o(!1),y({payment_amount:0,payment_detail:"",account_id:void 0}),s.invalidateQueries({queryKey:["supplier-ledger-pending"]})},onError:P=>{W.fire({icon:"error",title:"Error!",text:P.message||"Failed to add payment"})}}),E=P=>{a(P)},L=P=>{r(P?Number(P):null)},z=async P=>{u(P.main_supp),m(P.Pending||P.total||0),o(!0)},V=P=>{if(P.preventDefault(),!p.payment_amount||p.payment_amount<=0){W.fire({icon:"error",title:"Validation Error!",text:"Payment amount must be greater than zero"});return}if(!p.account_id){W.fire({icon:"error",title:"Validation Error!",text:"Account is required"});return}if(!c||!n){W.fire({icon:"error",title:"Error!",text:"Missing supplier or currency information"});return}S.mutate({supplier_id:c,payment_amount:p.payment_amount,currency_id:n,account_id:p.account_id,remarks:p.payment_detail||""})},te=P=>new Intl.NumberFormat("en-US").format(P),q=()=>{const P=window.open("","_blank");if(!P)return;const K=j.find(X=>X.currencyID===n)?.currencyName||"";new Date().toLocaleString("en-US",{day:"2-digit",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"});const H=b.map((X,R)=>`
      <tr>
        <td>${R+1}</td>
        <td class="text-capitalize">${X.supp_name}</td>
        <td>${X.supp_email||"-"}</td>
        <td>${X.supp_phone||"-"}</td>
        <td>${te(X.Pending||X.total||0)}</td>
      </tr>
    `).join(""),se=b.reduce((X,R)=>X+(R.Pending||R.total||0),0);P.document.write(`
      <!DOCTYPE html>
      <html>
      <head>
        <title>Supplier Ledger Report</title>
        <style>
          body { font-family: Arial, sans-serif; padding: 20px; }
          h1 { text-align: center; }
          h5 { text-align: center; margin-top: -10px; }
          table { width: 100%; border-collapse: collapse; margin-top: 20px; }
          th { background: linear-gradient(to right, #2563eb, #1e40af); color: white; padding: 12px; text-align: center; }
          td { padding: 12px; text-align: center; border-bottom: 1px solid #ddd; }
          .text-capitalize { text-transform: capitalize; }
          @media print {
            @page { margin: 1cm; }
            body { padding: 0; }
          }
        </style>
      </head>
      <body>
        <h1><i class="fa fa-building"></i> All Supplier Ledger Report</h1>
        <h5>Currency: ${K}</h5>
        <table>
          <thead>
            <tr>
              <th>#</th>
              <th>Supplier Name</th>
              <th>Supplier Email</th>
              <th>Supplier Phone</th>
              <th>Pending Amount</th>
            </tr>
          </thead>
          <tbody>
            ${H}
            <tr>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td><strong>${te(se)}</strong></td>
            </tr>
          </tbody>
        </table>
      </body>
      </html>
    `),P.document.close(),setTimeout(()=>{P.print()},250)},B=()=>{const P=j.find(Y=>Y.currencyID===n)?.currencyName||"",K=new Date().toLocaleString("en-US",{day:"2-digit",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"});let H=`Supplier Ledger Report
`;H+=`Currency: ${P}
`,H+=`Date: ${K}

`,H+=`#,Supplier Name,Supplier Email,Supplier Phone,Pending Amount
`,b.forEach((Y,$)=>{H+=`${$+1},"${Y.supp_name}","${Y.supp_email||""}","${Y.supp_phone||""}",${Y.Pending||Y.total||0}
`});const se=b.reduce((Y,$)=>Y+($.Pending||$.total||0),0);H+=`Total,,,,${se}
`;const X=new Blob([H],{type:"text/csv;charset=utf-8;"}),R=document.createElement("a"),Q=URL.createObjectURL(X);R.setAttribute("href",Q),R.setAttribute("download",`Supplier_Ledger_Report_${P}_${new Date().toISOString().split("T")[0]}.csv`),R.style.visibility="hidden",document.body.appendChild(R),R.click(),document.body.removeChild(R)},J=b.reduce((P,K)=>P+(K.Pending||K.total||0),0);return e.jsxs("div",{className:"supplier-pending-ledger-page",children:[e.jsx("div",{className:"page-header",children:e.jsxs("h1",{children:[e.jsx("i",{className:"fa fa-building me-2"}),"Supplier Payments & Ledger"]})}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("ul",{className:"nav nav-tabs card-header-tabs",children:e.jsx("li",{className:"nav-item",children:e.jsxs("a",{className:"nav-link active",children:[e.jsx("i",{className:"fa fa-money text-danger"})," All"]})})})}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"filter-row",children:[e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{htmlFor:"supplier_id",className:"form-label",children:"Supplier"}),e.jsx(It,{options:[{value:"",label:"--Select Supplier--"},...g.map(P=>({value:String(P.supp_id),label:P.supp_name}))],value:t,onChange:E,placeholder:"Select Supplier"})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{htmlFor:"currency_type",className:"form-label",children:"Currency"}),e.jsx(It,{options:j.map(P=>({value:String(P.currencyID),label:P.currencyName})),value:n?String(n):"",onChange:L,placeholder:"Select Currency"})]}),e.jsxs("div",{className:"filter-actions",children:[e.jsxs("button",{type:"button",className:"btn btn-danger btn-sm rounded-pill",onClick:q,children:[e.jsx("i",{className:"fa fa-print me-1"})," Print"]}),e.jsxs("button",{type:"button",className:"btn btn-customBlue btn-sm rounded-pill",onClick:B,children:[e.jsx("i",{className:"fa fa-file-excel-o me-1"})," Excel"]})]})]}),e.jsx("div",{className:"table-responsive mt-4",children:e.jsx("div",{id:"printThisArea",children:e.jsxs("table",{className:"table table-striped table-hover text-center",id:"mainTable",children:[e.jsx("thead",{className:"thead text-white",children:e.jsxs("tr",{children:[e.jsx("th",{children:"#"}),e.jsx("th",{children:"Supplier Name"}),e.jsx("th",{children:"Supplier Email"}),e.jsx("th",{children:"Supplier Phone"}),e.jsx("th",{children:"Pending Amount"}),e.jsx("th",{"data-exclude":"true",id:"actionArea",children:"Action"})]})}),e.jsx("tbody",{children:b.length===0?e.jsx("tr",{children:e.jsxs("td",{colSpan:6,className:"text-center",style:{padding:"50px 20px",color:"#64748b"},children:[e.jsx("i",{className:"fa fa-inbox",style:{fontSize:"48px",marginBottom:"15px",display:"block",opacity:.5}}),e.jsx("div",{style:{fontSize:"16px",fontWeight:500},children:"No pending suppliers found"}),e.jsx("div",{style:{fontSize:"14px",marginTop:"8px",opacity:.7},children:"Select a supplier and currency to view pending payments"})]})}):e.jsxs(e.Fragment,{children:[b.map((P,K)=>e.jsxs("tr",{children:[e.jsx("td",{children:K+1}),e.jsx("td",{className:"text-capitalize",children:P.supp_name}),e.jsx("td",{children:P.supp_email||"-"}),e.jsx("td",{children:P.supp_phone||"-"}),e.jsx("td",{children:te(P.Pending||P.total||0)}),e.jsxs("td",{"data-exclude":"true",className:"action-cell",children:[e.jsxs("a",{href:`/supplier/ledger?id=${P.main_supp}&curID=${n}`,className:"text-dark me-2",children:[e.jsx("i",{className:"fa fa-file"})," View Ledger"]}),e.jsx("span",{className:"me-2",children:"|"}),e.jsxs("a",{href:"#",onClick:H=>{H.preventDefault(),z(P)},className:"text-danger",children:[e.jsx("i",{className:"fa fa-cc-paypal"})," Make Payment"]})]})]},P.main_supp)),e.jsxs("tr",{children:[e.jsx("td",{}),e.jsx("td",{}),e.jsx("td",{}),e.jsx("td",{}),e.jsx("td",{children:e.jsx("strong",{children:te(J)})}),e.jsx("td",{"data-exclude":"true"})]})]})})]})})})]})]}),i&&e.jsx("div",{className:"modal-overlay",onClick:()=>{o(!1),y({payment_amount:0,payment_detail:"",account_id:void 0})},children:e.jsxs("div",{className:"modal-content",onClick:P=>P.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",children:"Supplier Make Payment"}),e.jsx("button",{type:"button",className:"btn-close",onClick:()=>{o(!1),y({payment_amount:0,payment_detail:"",account_id:void 0})},children:""})]}),e.jsx("div",{className:"modal-body",children:e.jsxs("form",{onSubmit:V,children:[e.jsxs("div",{className:"form-group row",children:[e.jsxs("label",{className:"col-sm-4 col-form-label",children:[e.jsx("i",{className:"fa fa-dollar"}),"Total Charges"]}),e.jsx("div",{className:"col-sm-8",children:e.jsx("input",{type:"text",disabled:!0,className:"form-control",value:te(h)})})]}),e.jsxs("div",{className:"form-group row",children:[e.jsxs("label",{className:"col-sm-4 col-form-label",children:[e.jsx("i",{className:"fa fa-money"}),"Payment Amount"]}),e.jsx("div",{className:"col-sm-8",children:e.jsx("input",{type:"number",className:"form-control",value:p.payment_amount||"",onChange:P=>y({...p,payment_amount:Number(P.target.value)}),required:!0,min:"0.01",step:"0.01",placeholder:"Enter payment amount"})})]}),e.jsxs("div",{className:"form-group row",children:[e.jsxs("label",{className:"col-sm-4 col-form-label",children:[e.jsx("i",{className:"fa fa-comment"}),"Payment Detail"]}),e.jsx("div",{className:"col-sm-8",children:e.jsx("textarea",{className:"form-control",rows:4,value:p.payment_detail||"",onChange:P=>y({...p,payment_detail:P.target.value}),placeholder:"Enter payment details (optional)"})})]}),e.jsxs("div",{className:"form-group row",children:[e.jsxs("label",{className:"col-sm-4 col-form-label",children:[e.jsx("i",{className:"fa fa-bank"}),"Account"]}),e.jsx("div",{className:"col-sm-8",children:e.jsx(It,{options:[{value:"",label:"--Select Account--"},...v.map(P=>({value:String(P.account_ID),label:P.account_Name}))],value:p.account_id?String(p.account_id):"",onChange:P=>y({...p,account_id:P?Number(P):void 0}),placeholder:"Select Account"})})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-danger",onClick:()=>{o(!1),y({payment_amount:0,payment_detail:"",account_id:void 0})},children:"Close"}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:S.isPending,children:S.isPending?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fa fa-spinner fa-spin me-1"})," Saving..."]}):"Save"})]})]})})]})})]})}const vh={async getExpenseTypes(){const s=await Ne.post("/expense/expenses.php",{action:"getExpenseTypes"});return s.data.success?s.data.data:[]},async createExpense(s){const t=new FormData;t.append("action","createExpense"),t.append("expense_type_id",String(s.expense_type_id)),t.append("expense_amount",String(s.expense_amount)),t.append("currency_id",String(s.currency_id)),t.append("account_id",String(s.account_id)),t.append("expense_remark",s.expense_remark),t.append("amount_type",s.amount_type||"fixed"),s.expense_document&&t.append("expense_document",s.expense_document);const a=await Ne.post("/expense/expenses.php",t,{headers:{"Content-Type":"multipart/form-data"}});return{success:a.data.success,message:a.data.message||"Expense created successfully"}},async getExpenses(s){const t={action:"getExpenses"};s&&(s.search_term&&(t.search_term=s.search_term),s.from_date&&(t.from_date=s.from_date),s.to_date&&(t.to_date=s.to_date),s.employee_id&&(t.employee_id=s.employee_id));const a=await Ne.post("/expense/expenses.php",t);return a.data.success?a.data.data:[]},async getExpenseTotals(s){const t={action:"getExpenseTotals"};s&&(s.search_term&&(t.search_term=s.search_term),s.from_date&&(t.from_date=s.from_date),s.to_date&&(t.to_date=s.to_date),s.employee_id&&(t.employee_id=s.employee_id));const a=await Ne.post("/expense/expenses.php",t);return a.data.success?a.data.data:[]},async deleteExpense(s){const t=await Ne.post("/expense/expenses.php",{action:"deleteExpense",expense_id:s});return{success:t.data.success,message:t.data.message||"Expense deleted successfully"}},async getExpense(s){const t=await Ne.post("/expense/expenses.php",{action:"getExpense",expense_id:s});if(t.data.success)return t.data.data;throw new Error(t.data.message||"Failed to fetch expense")},async updateExpense(s){const t=await Ne.post("/expense/expenses.php",{action:"updateExpense",...s});return{success:t.data.success,message:t.data.message||"Expense updated successfully"}},async getEmployees(){const s=await Ne.post("/expense/expenses.php",{action:"getEmployees"});return s.data.success?s.data.data:[]}},Zp={async getExpenseTypes(){const s=await Ne.post("/expense/expenseTypes.php",{action:"getExpenseTypes"});return s.data.success?s.data.data:[]},async createExpenseType(s){const t=await Ne.post("/expense/expenseTypes.php",{action:"createExpenseType",expense_type:s});return{success:t.data.success,message:t.data.message||"Expense type created successfully"}},async updateExpenseType(s,t){const a=await Ne.post("/expense/expenseTypes.php",{action:"updateExpenseType",expense_type_id:s,expense_type:t});return{success:a.data.success,message:a.data.message||"Expense type updated successfully"}},async deleteExpenseType(s){const t=await Ne.post("/expense/expenseTypes.php",{action:"deleteExpenseType",expense_type_id:s});return{success:t.data.success,message:t.data.message||"Expense type deleted successfully"}},async getExpenseType(s){const t=await Ne.post("/expense/expenseTypes.php",{action:"getExpenseType",expense_type_id:s});if(t.data.success)return t.data.data;throw new Error(t.data.message||"Failed to fetch expense type")}},Ay={async getDashboardStats(){const s=await Ne.post("/expense/dashboard.php",{action:"getDashboardStats"});if(s.data.success)return s.data.data;throw new Error(s.data.message||"Failed to fetch dashboard stats")},async getChartData(){const s=await Ne.post("/expense/dashboard.php",{action:"getChartData"});if(s.data.success)return s.data.data;throw new Error(s.data.message||"Failed to fetch chart data")},async getRecentActivities(){const s=await Ne.post("/expense/dashboard.php",{action:"getRecentActivities"});if(s.data.success)return s.data.data;throw new Error(s.data.message||"Failed to fetch recent activities")}};function $q(){const[s,t]=A.useState("dashboard"),[a,n]=A.useState({expense_type_id:void 0,expense_amount:void 0,currency_id:void 0,account_id:void 0,expense_remark:"",amount_type:"fixed"}),[r,i]=A.useState(null),[o,c]=A.useState({expense_type:""}),[u,h]=A.useState(null),[m,p]=A.useState(null),[y,g]=A.useState(!1),[j,b]=A.useState(!1),[N,v]=A.useState(!1),[S,E]=A.useState({search_term:"DateWise",from_date:new Date().toISOString().split("T")[0],to_date:new Date().toISOString().split("T")[0],employee_id:void 0}),[L,z]=A.useState(!1),V=Wa(),te=A.useRef(null),q=A.useRef(null),{data:B=[],refetch:J}=Rt({queryKey:["expense-types"],queryFn:()=>Zp.getExpenseTypes(),staleTime:6e4,refetchOnWindowFocus:!1}),{data:P}=Rt({queryKey:["supplier-dropdowns"],queryFn:()=>qi.getDropdowns(),staleTime:6e4,refetchOnWindowFocus:!1}),{data:K=[]}=Rt({queryKey:["employees"],queryFn:()=>vh.getEmployees(),staleTime:6e4,refetchOnWindowFocus:!1}),{data:H,refetch:se}=Rt({queryKey:["expense-dashboard-stats"],queryFn:()=>Ay.getDashboardStats(),enabled:s==="dashboard",staleTime:3e4,refetchOnWindowFocus:!1}),{data:X}=Rt({queryKey:["expense-chart-data"],queryFn:()=>Ay.getChartData(),enabled:s==="dashboard",staleTime:3e4,refetchOnWindowFocus:!1}),{data:R=[]}=Rt({queryKey:["expense-recent-activities"],queryFn:()=>Ay.getRecentActivities(),enabled:s==="dashboard",staleTime:3e4,refetchOnWindowFocus:!1}),{data:Q=[],refetch:Y}=Rt({queryKey:["expenses",S],queryFn:()=>vh.getExpenses(S),enabled:s==="view-expenses"&&(L||S.employee_id),staleTime:1e4,refetchOnWindowFocus:!1});A.useEffect(()=>{P?.currencies&&P.currencies.length>0&&!a.currency_id&&n(re=>({...re,currency_id:P.currencies[0].currencyID}))},[P?.currencies]),A.useEffect(()=>(s==="dashboard"&&X&&te.current&&og(async()=>{const{Chart:re}=await import("./auto-BYSoM6UH.js");return{Chart:re}},[]).then(({Chart:re})=>{q.current&&q.current.destroy();const ne=te.current.getContext("2d");ne&&(q.current=new re(ne,{type:"line",data:{labels:X.labels,datasets:[{label:"Expenses",data:X.values,borderColor:"rgb(23, 97, 135)",backgroundColor:"rgba(23, 97, 135, 0.1)",tension:.4,fill:!0}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0}}}}))}),()=>{q.current&&(q.current.destroy(),q.current=null)}),[s,X]);const $=wt({mutationFn:re=>vh.createExpense(re),onSuccess:()=>{W.fire({icon:"success",title:"Success!",text:"Expense created successfully",timer:2e3,showConfirmButton:!1}),n({expense_type_id:void 0,expense_amount:void 0,currency_id:void 0,account_id:void 0,expense_remark:"",amount_type:"fixed"}),i(null);const re=document.getElementById("expense_document");re&&(re.value=""),V.invalidateQueries({queryKey:["expenses"]}),se()},onError:re=>{W.fire({icon:"error",title:"Error!",text:re.response?.data?.message||re.message||"Failed to create expense",timer:3e3})}}),me=wt({mutationFn:re=>Zp.createExpenseType(re),onSuccess:()=>{W.fire({icon:"success",title:"Success!",text:"Expense type created successfully",timer:2e3,showConfirmButton:!1}),c({expense_type:""}),g(!1),J(),se()},onError:re=>{W.fire({icon:"error",title:"Error!",text:re.response?.data?.message||re.message||"Failed to create expense type",timer:3e3})}}),D=wt({mutationFn:({expense_type_id:re,expense_type:ne})=>Zp.updateExpenseType(re,ne),onSuccess:()=>{W.fire({icon:"success",title:"Success!",text:"Expense type updated successfully",timer:2e3,showConfirmButton:!1}),h(null),c({expense_type:""}),b(!1),J()},onError:re=>{W.fire({icon:"error",title:"Error!",text:re.response?.data?.message||re.message||"Failed to update expense type",timer:3e3})}}),U=wt({mutationFn:re=>Zp.deleteExpenseType(re),onSuccess:()=>{W.fire({icon:"success",title:"Success!",text:"Expense type deleted successfully",timer:2e3,showConfirmButton:!1}),J(),se()},onError:re=>{W.fire({icon:"error",title:"Error!",text:re.response?.data?.message||re.message||"Failed to delete expense type",timer:3e3})}}),le=wt({mutationFn:re=>vh.updateExpense(re),onSuccess:()=>{W.fire({icon:"success",title:"Success!",text:"Expense updated successfully",timer:2e3,showConfirmButton:!1}),p(null),v(!1),Y(),se()},onError:re=>{W.fire({icon:"error",title:"Error!",text:re.response?.data?.message||re.message||"Failed to update expense",timer:3e3})}}),de=wt({mutationFn:re=>vh.deleteExpense(re),onSuccess:()=>{W.fire({icon:"success",title:"Success!",text:"Expense deleted successfully",timer:2e3,showConfirmButton:!1}),Y(),se()},onError:re=>{W.fire({icon:"error",title:"Error!",text:re.response?.data?.message||re.message||"Failed to delete expense",timer:3e3})}}),G=async re=>{if(re.preventDefault(),!a.expense_type_id||a.expense_type_id===-1){W.fire({icon:"error",title:"Error!",text:"Expense Type is required"});return}if(!a.expense_amount||a.expense_amount<=0){W.fire({icon:"error",title:"Error!",text:"Expense Amount is required"});return}if(!a.expense_remark||a.expense_remark.trim()===""){W.fire({icon:"error",title:"Error!",text:"Remarks is required"});return}if(!a.account_id||a.account_id===-1){W.fire({icon:"error",title:"Error!",text:"Account is required"});return}if(!a.currency_id){W.fire({icon:"error",title:"Error!",text:"Currency is required"});return}if(!r){W.fire({icon:"error",title:"Error!",text:"Please upload file for expense"});return}if(r.size>3145728){W.fire({icon:"error",title:"Error!",text:"File size is greater than 3 MB. Make sure it should be less than 3 MB"});return}const ne={expense_type_id:a.expense_type_id,expense_amount:Number(a.expense_amount),currency_id:a.currency_id,account_id:a.account_id,expense_remark:a.expense_remark,amount_type:a.amount_type||"fixed",expense_document:r};$.mutate(ne)},je=re=>{re.target.files&&re.target.files[0]&&i(re.target.files[0])},De=()=>{if(!L&&!S.employee_id){W.fire({icon:"warning",title:"Warning!",text:"Please enable date search or select an employee"});return}const re={};L&&S.from_date&&S.to_date?S.employee_id?(re.search_term="DateAndEmpWise",re.from_date=S.from_date,re.to_date=S.to_date,re.employee_id=S.employee_id):(re.search_term="DateWise",re.from_date=S.from_date,re.to_date=S.to_date):S.employee_id&&(re.search_term="EmpWise",re.employee_id=S.employee_id),E(re),Y()},Pe=async re=>{h(re),c({expense_type:re.expense_type}),b(!0)},ke=async re=>{try{const ne=await vh.getExpense(re.expense_id);p({...re,expense_type_id:ne.expense_type_id,CurrencyID:ne.CurrencyID,accountID:ne.accountID}),v(!0)}catch(ne){W.fire({icon:"error",title:"Error!",text:ne.message||"Failed to load expense data"})}},Ye=re=>{W.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#dc2626",cancelButtonColor:"#6b7280",confirmButtonText:"Yes, delete it!"}).then(ne=>{ne.isConfirmed&&U.mutate(re)})},Qe=re=>{W.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#dc2626",cancelButtonColor:"#6b7280",confirmButtonText:"Yes, delete it!"}).then(ne=>{ne.isConfirmed&&de.mutate(re)})},et=re=>{if(re.preventDefault(),!u||!o.expense_type.trim()){W.fire({icon:"error",title:"Error!",text:"Expense type name is required"});return}D.mutate({expense_type_id:u.expense_type_id,expense_type:o.expense_type})},Xe=re=>{if(re.preventDefault(),!m)return;const ne={expense_id:m.expense_id,expense_type_id:m.expense_type_id,expense_amount:parseFloat(m.expense_amount),currency_id:m.CurrencyID,account_id:m.accountID,expense_remark:m.expense_remark};le.mutate(ne)};return e.jsxs("div",{className:"expenses-page",children:[e.jsx("div",{className:"page-header",children:e.jsxs("h1",{children:[e.jsx("i",{className:"fa fa-dollar me-2"}),"Expense Management Dashboard"]})}),s==="dashboard"&&H&&e.jsx("div",{className:"stats-container",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-3 col-sm-6 mb-4",children:e.jsx("div",{className:"stat-card primary",children:e.jsxs("div",{className:"card-body text-center",children:[e.jsx("i",{className:"fa fa-tags stat-icon text-primary"}),e.jsx("div",{className:"stat-number text-primary",children:H.totalExpenseTypes}),e.jsx("div",{className:"stat-label",children:"Expense Types"})]})})}),e.jsx("div",{className:"col-md-3 col-sm-6 mb-4",children:e.jsx("div",{className:"stat-card success",children:e.jsxs("div",{className:"card-body text-center",children:[e.jsx("i",{className:"fa fa-money-bill stat-icon text-success"}),e.jsx("div",{className:"stat-number text-success",children:H.totalExpenses}),e.jsx("div",{className:"stat-label",children:"Total Expenses"})]})})}),e.jsx("div",{className:"col-md-3 col-sm-6 mb-4",children:e.jsx("div",{className:"stat-card warning",children:e.jsxs("div",{className:"card-body text-center",children:[e.jsx("i",{className:"fa fa-calendar-check stat-icon text-warning"}),e.jsx("div",{className:"stat-number text-warning",children:H.thisMonthExpenses}),e.jsx("div",{className:"stat-label",children:"This Month"})]})})}),e.jsx("div",{className:"col-md-3 col-sm-6 mb-4",children:e.jsx("div",{className:"stat-card danger",children:e.jsxs("div",{className:"card-body text-center",children:[e.jsx("i",{className:"fa fa-exclamation-triangle stat-icon text-danger"}),e.jsx("div",{className:"stat-number text-danger",children:H.pendingDocuments}),e.jsx("div",{className:"stat-label",children:"Missing Documents"})]})})})]})}),e.jsx("div",{className:"tabs-container",children:e.jsxs("ul",{className:"nav nav-tabs tabs",children:[e.jsx("li",{className:"nav-item",children:e.jsxs("button",{className:`nav-link tab ${s==="dashboard"?"active":""}`,onClick:()=>t("dashboard"),children:[e.jsx("i",{className:"fa fa-chart-bar me-2"}),"Dashboard"]})}),e.jsx("li",{className:"nav-item",children:e.jsxs("button",{className:`nav-link tab ${s==="expense-types"?"active":""}`,onClick:()=>t("expense-types"),children:[e.jsx("i",{className:"fa fa-tags me-2"}),"Expense Types"]})}),e.jsx("li",{className:"nav-item",children:e.jsxs("button",{className:`nav-link tab ${s==="add-expense"?"active":""}`,onClick:()=>t("add-expense"),children:[e.jsx("i",{className:"fa fa-plus me-2"}),"Add Expense"]})}),e.jsx("li",{className:"nav-item",children:e.jsxs("button",{className:`nav-link tab ${s==="view-expenses"?"active":""}`,onClick:()=>t("view-expenses"),children:[e.jsx("i",{className:"fa fa-list me-2"}),"View Expenses"]})})]})}),e.jsxs("div",{className:"tab-content",children:[s==="dashboard"&&e.jsx("div",{className:"tab-pane active",children:e.jsxs("div",{className:"panel",children:[e.jsx("div",{className:"panel-header",children:e.jsxs("h3",{children:[e.jsx("i",{className:"fa fa-chart-line me-2"}),"Expense Overview"]})}),e.jsx("div",{className:"panel-body",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-8",children:e.jsx("canvas",{ref:te,id:"expenseChart",height:"100"})}),e.jsxs("div",{className:"col-md-4",children:[e.jsx("h6",{className:"mb-3",children:"Recent Activities"}),e.jsx("div",{className:"recent-activities",children:R.length===0?e.jsx("p",{className:"text-muted",children:"No recent activities"}):R.map(re=>e.jsxs("div",{className:"activity-item",children:[e.jsxs("div",{className:"activity-amount",children:[re.amount," ",re.currency]}),e.jsx("div",{className:"activity-type",children:re.type}),e.jsxs("div",{className:"activity-staff",children:[re.staff," - ",re.time]})]},re.id))})]})]})})]})}),s==="expense-types"&&e.jsx("div",{className:"tab-pane active",children:e.jsxs("div",{className:"panel",children:[e.jsx("div",{className:"panel-header",children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsxs("h3",{children:[e.jsx("i",{className:"fa fa-tags me-2"}),"Expense Types Management"]}),e.jsxs("button",{type:"button",className:"btn btn-primary",onClick:()=>{h(null),c({expense_type:""}),g(!0)},children:[e.jsx("i",{className:"fa fa-plus me-2"}),"Add Expense Type"]})]})}),e.jsx("div",{className:"panel-body",children:e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-striped table-bordered",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"S#"}),e.jsx("th",{children:"Expense Type"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:B.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:3,className:"text-center",children:"No expense types found"})}):B.map((re,ne)=>e.jsxs("tr",{children:[e.jsx("td",{children:ne+1}),e.jsx("td",{className:"text-capitalize",children:re.expense_type}),e.jsx("td",{children:e.jsxs("div",{className:"action-buttons",children:[e.jsx("button",{className:"btn btn-sm btn-warning me-2",onClick:()=>Pe(re),children:e.jsx("i",{className:"fa fa-edit"})}),e.jsx("button",{className:"btn btn-sm btn-danger",onClick:()=>Ye(re.expense_type_id),children:e.jsx("i",{className:"fa fa-trash"})})]})})]},re.expense_type_id))})]})})})]})}),s==="add-expense"&&e.jsx("div",{className:"tab-pane active",children:e.jsxs("div",{className:"panel",children:[e.jsx("div",{className:"panel-header",children:e.jsxs("h3",{children:[e.jsx("i",{className:"fa fa-plus me-2"}),"Add New Expense"]})}),e.jsx("div",{className:"panel-body",children:e.jsxs("form",{onSubmit:G,id:"addExpenseForm",children:[e.jsx("div",{className:"form-row",children:e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{htmlFor:"expense_type",children:[e.jsx("i",{className:"fa fa-user me-2"}),"Expense Type:"]}),e.jsx(It,{options:[{value:"-1",label:"--Expense Type--"},...B.map(re=>({value:String(re.expense_type_id),label:re.expense_type}))],value:a.expense_type_id?String(a.expense_type_id):"-1",onChange:re=>n({...a,expense_type_id:re==="-1"?void 0:Number(re)}),placeholder:"Select Expense Type",required:!0})]})}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{htmlFor:"amount",children:[e.jsx("i",{className:"fa fa-dollar me-2"}),"Expense Amount:"]}),e.jsx("input",{type:"number",id:"amount",name:"amount",className:"form-control",placeholder:"Expense Amount",value:a.expense_amount||"",onChange:re=>n({...a,expense_amount:re.target.value?Number(re.target.value):void 0}),step:"0.01",min:"0",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{htmlFor:"expCurrencyType",children:[e.jsx("i",{className:"fa fa-dollar me-2"}),"Currency:"]}),e.jsx(It,{options:[...P?.currencies?.map(re=>({value:String(re.currencyID),label:re.currencyName}))||[]],value:a.currency_id?String(a.currency_id):"",onChange:re=>n({...a,currency_id:re?Number(re):void 0}),placeholder:"Select Currency",required:!0})]})]}),e.jsx("div",{className:"form-row",children:e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{htmlFor:"addaccount_id",children:[e.jsx("i",{className:"fa fa-paypal me-2"}),"Account:"]}),e.jsx(It,{options:[{value:"-1",label:"--Account--"},...P?.accounts?.map(re=>({value:String(re.account_ID),label:re.account_Name}))||[]],value:a.account_id?String(a.account_id):"-1",onChange:re=>n({...a,account_id:re==="-1"?void 0:Number(re)}),placeholder:"Select Account",required:!0})]})}),e.jsx("div",{className:"form-row",children:e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{htmlFor:"remarks",children:[e.jsx("i",{className:"fa fa-info me-2"}),"Remarks:"]}),e.jsx("textarea",{id:"remarks",name:"remarks",className:"form-control",placeholder:"Enter Remarks (Optional)",rows:3,value:a.expense_remark||"",onChange:re=>n({...a,expense_remark:re.target.value}),required:!0})]})}),e.jsx("div",{className:"form-row",children:e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{htmlFor:"expense_document",children:[e.jsx("i",{className:"fa fa-file-o me-2"}),"Expense document:"]}),e.jsx("input",{type:"file",id:"expense_document",name:"expense_document",className:"form-control",onChange:je,accept:".txt,.pdf,.doc,.docx,.xls,.xlsx,.jpg,.jpeg,.png,.ppt,.zip",required:!0}),r&&e.jsxs("small",{className:"text-muted",children:["Selected: ",r.name," (",(r.size/1024).toFixed(2)," KB)"]})]})}),e.jsx("div",{className:"form-actions",children:e.jsx("button",{type:"submit",className:"btn btn-success",disabled:$.isPending,children:$.isPending?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fa fa-spinner fa-spin me-2"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fa fa-fw fa-save me-2"}),"Save Record"]})})})]})})]})}),s==="view-expenses"&&e.jsxs("div",{className:"tab-pane active",children:[e.jsxs("div",{className:"panel",children:[e.jsx("div",{className:"panel-header",children:e.jsxs("h3",{children:[e.jsx("i",{className:"fa fa-search me-2"}),"Search & Filter"]})}),e.jsx("div",{className:"panel-body",children:e.jsx("form",{id:"searchForm",onSubmit:re=>{re.preventDefault(),De()},children:e.jsxs("div",{className:"search-form-row",children:[e.jsx("div",{className:"search-form-group",children:e.jsxs("div",{className:"form-check",children:[e.jsx("input",{className:"form-check-input",type:"checkbox",id:"dateSearch",checked:L,onChange:re=>z(re.target.checked)}),e.jsx("label",{className:"form-check-label",htmlFor:"dateSearch",children:"Search By Date"})]})}),e.jsxs("div",{className:"search-form-group",children:[e.jsx("label",{htmlFor:"fromdate",className:"form-label",children:"From Date"}),e.jsx("input",{type:"date",className:"form-control",id:"fromdate",value:S.from_date||"",onChange:re=>E({...S,from_date:re.target.value}),disabled:!L})]}),e.jsxs("div",{className:"search-form-group",children:[e.jsx("label",{htmlFor:"todate",className:"form-label",children:"To Date"}),e.jsx("input",{type:"date",className:"form-control",id:"todate",value:S.to_date||"",onChange:re=>E({...S,to_date:re.target.value}),disabled:!L})]}),e.jsxs("div",{className:"search-form-group",children:[e.jsx("label",{htmlFor:"employee_id",className:"form-label",children:"Employee"}),e.jsx(It,{options:[{value:"",label:"--All Employees--"},...K.map(re=>({value:String(re.staff_id),label:re.staff_name}))],value:S.employee_id?String(S.employee_id):"",onChange:re=>E({...S,employee_id:re?Number(re):void 0}),placeholder:"Select Employee"})]}),e.jsx("div",{className:"search-form-group search-button-group",children:e.jsxs("button",{type:"submit",className:"btn btn-primary w-100",children:[e.jsx("i",{className:"fa fa-search me-2"}),e.jsx("span",{className:"search-text",children:"Search"})]})})]})})})]}),e.jsxs("div",{className:"panel",children:[e.jsx("div",{className:"panel-header",children:e.jsxs("h3",{children:[e.jsx("i",{className:"fa fa-list me-2"}),"Expense Records"]})}),e.jsx("div",{className:"panel-body",children:e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-striped table-bordered",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"S#"}),e.jsx("th",{children:"Expense Type"}),e.jsx("th",{children:"Amount"}),e.jsx("th",{children:"Account"}),e.jsx("th",{children:"Date"}),e.jsx("th",{children:"Remarks"}),e.jsx("th",{children:"Employee"}),e.jsx("th",{children:"Document"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:Q.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:9,className:"text-center",children:"Use the search filters above to view expense records"})}):Q.map((re,ne)=>e.jsxs("tr",{children:[e.jsx("td",{children:ne+1}),e.jsx("td",{children:re.expense_type}),e.jsxs("td",{children:[parseFloat(re.expense_amount).toLocaleString()," ",re.currencyName]}),e.jsx("td",{children:re.account_Name}),e.jsx("td",{children:new Date(re.time_creation).toLocaleDateString()}),e.jsx("td",{children:re.expense_remark}),e.jsx("td",{children:re.staff_name}),e.jsx("td",{children:re.expense_document?e.jsxs("a",{href:`/${re.expense_document}`,target:"_blank",rel:"noopener noreferrer",className:"btn btn-sm btn-info",children:[e.jsx("i",{className:"fa fa-file"})," View"]}):e.jsx("span",{className:"text-muted",children:"No document"})}),e.jsx("td",{children:e.jsxs("div",{className:"action-buttons",children:[e.jsx("button",{className:"btn btn-sm btn-warning me-2",onClick:()=>ke(re),children:e.jsx("i",{className:"fa fa-edit"})}),e.jsx("button",{className:"btn btn-sm btn-danger",onClick:()=>Qe(re.expense_id),children:e.jsx("i",{className:"fa fa-trash"})})]})})]},re.expense_id))})]})})})]})]})]}),y&&e.jsx("div",{className:"modal-overlay",onClick:()=>g(!1),children:e.jsxs("div",{className:"modal-content",onClick:re=>re.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h5",{className:"modal-title",children:[e.jsx("i",{className:"fa fa-plus me-2"}),"Add Expense Type"]}),e.jsx("button",{type:"button",className:"btn-close",onClick:()=>{g(!1),c({expense_type:""})},children:""})]}),e.jsx("div",{className:"modal-body",children:e.jsxs("form",{onSubmit:re=>{if(re.preventDefault(),!o.expense_type.trim()){W.fire({icon:"error",title:"Error!",text:"Expense type name is required"});return}me.mutate(o.expense_type)},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"expense_type_name",className:"form-label",children:"Expense Type Name *"}),e.jsx("input",{type:"text",className:"form-control",id:"expense_type_name",value:o.expense_type,onChange:re=>c({expense_type:re.target.value}),placeholder:"Enter expense type name",required:!0,autoFocus:!0})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>{g(!1),c({expense_type:""})},children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:me.isPending,children:me.isPending?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fa fa-spinner fa-spin me-2"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fa fa-save me-2"}),"Save"]})})]})]})})]})}),j&&u&&e.jsx("div",{className:"modal-overlay",onClick:()=>{b(!1),h(null),c({expense_type:""})},children:e.jsxs("div",{className:"modal-content",onClick:re=>re.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h5",{className:"modal-title",children:[e.jsx("i",{className:"fa fa-edit me-2"}),"Update Expense Type"]}),e.jsx("button",{type:"button",className:"btn-close",onClick:()=>{b(!1),h(null),c({expense_type:""})},children:""})]}),e.jsx("div",{className:"modal-body",children:e.jsxs("form",{onSubmit:et,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"update_expense_type_name",className:"form-label",children:"Expense Type Name *"}),e.jsx("input",{type:"text",className:"form-control",id:"update_expense_type_name",value:o.expense_type,onChange:re=>c({expense_type:re.target.value}),placeholder:"Enter expense type name",required:!0,autoFocus:!0})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>{b(!1),h(null),c({expense_type:""})},children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-success",disabled:D.isPending,children:D.isPending?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fa fa-spinner fa-spin me-2"}),"Updating..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fa fa-save me-2"}),"Update"]})})]})]})})]})}),N&&m&&e.jsx("div",{className:"modal-overlay",onClick:()=>{v(!1),p(null)},children:e.jsxs("div",{className:"modal-content large",onClick:re=>re.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h5",{className:"modal-title",children:[e.jsx("i",{className:"fa fa-edit me-2"}),"Update Expense"]}),e.jsx("button",{type:"button",className:"btn-close",onClick:()=>{v(!1),p(null)},children:""})]}),e.jsx("div",{className:"modal-body",children:e.jsxs("form",{onSubmit:Xe,children:[e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"update_expense_type",className:"form-label",children:"Expense Type *"}),e.jsx(It,{options:[{value:"",label:"--Select Expense Type--"},...B.map(re=>({value:String(re.expense_type_id),label:re.expense_type}))],value:m.expense_type_id?String(m.expense_type_id):"",onChange:re=>p({...m,expense_type_id:re?Number(re):void 0}),placeholder:"Select Expense Type",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"update_amount",className:"form-label",children:"Amount *"}),e.jsx("input",{type:"number",step:"0.01",className:"form-control",id:"update_amount",value:m.expense_amount,onChange:re=>p({...m,expense_amount:re.target.value}),required:!0})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"update_currency_type",className:"form-label",children:"Currency *"}),e.jsx(It,{options:[{value:"",label:"--Select Currency--"},...P?.currencies?.map(re=>({value:String(re.currencyID),label:re.currencyName}))||[]],value:m.CurrencyID?String(m.CurrencyID):"",onChange:re=>p({...m,CurrencyID:re?Number(re):void 0}),placeholder:"Select Currency",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"update_account_id",className:"form-label",children:"Account *"}),e.jsx(It,{options:[{value:"",label:"--Select Account--"},...P?.accounts?.map(re=>({value:String(re.account_ID),label:re.account_Name}))||[]],value:m.accountID?String(m.accountID):"",onChange:re=>p({...m,accountID:re?Number(re):void 0}),placeholder:"Select Account",required:!0})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"update_remarks",className:"form-label",children:"Remarks *"}),e.jsx("textarea",{className:"form-control",id:"update_remarks",rows:3,value:m.expense_remark,onChange:re=>p({...m,expense_remark:re.target.value}),required:!0})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>{v(!1),p(null)},children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-success",disabled:le.isPending,children:le.isPending?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fa fa-spinner fa-spin me-2"}),"Updating..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fa fa-save me-2"}),"Update"]})})]})]})})]})})]})}function Vq(){const[s]=rc(),[t,a]=A.useState(""),[n,r]=A.useState(!0),[i,o]=A.useState("");return A.useEffect(()=>{(async()=>{try{const u=s.get("id"),h=s.get("type"),m=s.get("bank_id");if(!u||!h){o("Missing required parameters: id and type"),r(!1);return}const p=parseInt(u),y=m?parseInt(m):void 0,g=await Ft.generateLetter(p,h,y);g&&g.html?a(g.html):o("Failed to generate letter")}catch(u){console.error("Error loading letter:",u),o(u.response?.data?.message||"Failed to load letter")}finally{r(!1)}})()},[s]),n?e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",fontFamily:"Arial, sans-serif"},children:e.jsx("div",{children:"Loading letter..."})}):i?e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",fontFamily:"Arial, sans-serif"},children:e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("h2",{children:"Error"}),e.jsx("p",{children:i})]})}):e.jsx("div",{dangerouslySetInnerHTML:{__html:t}})}const Hf={async searchPayments(s){const t=await Ne.post("/payment/customerPayments.php",{action:"searchPayments",...s});return{data:t.data.success?t.data.data:[],pagination:t.data.pagination}},async addPayment(s){const t=await Ne.post("/payment/customerPayments.php",{action:"addPayment",customer_id:s.customer_id,payment_amount:s.payment_amount,account_id:s.account_id,currency_id:s.currency_id,remarks:s.remarks||"",staff_id:s.staff_id});return{success:t.data.success,message:t.data.message||"Payment added successfully"}},async updatePayment(s){const t=await Ne.post("/payment/customerPayments.php",{action:"updatePayment",pay_id:s.pay_id,customer_id:s.customer_id,payment_amount:s.payment_amount,account_id:s.account_id,currency_id:s.currency_id,remarks:s.remarks||"",staff_id:s.staff_id});return{success:t.data.success,message:t.data.message||"Payment updated successfully"}},async getPayment(s){const t=await Ne.post("/payment/customerPayments.php",{action:"getPayment",pay_id:s});if(t.data.success)return t.data.data;throw new Error(t.data.message||"Failed to fetch payment")},async deletePayment(s){const t=await Ne.post("/payment/customerPayments.php",{action:"deletePayment",pay_id:s});return{success:t.data.success,message:t.data.message||"Payment deleted successfully"}},async getAccountCurrency(s){const t=await Ne.post("/payment/customerPayments.php",{action:"getAccountCurrency",account_id:s});if(t.data.success)return t.data.data;throw new Error(t.data.message||"Failed to fetch account currency")}},jh={async searchPayments(s){const t=await Ne.post("/payment/supplierPayments.php",{action:"searchPayments",...s});return{data:t.data.success?t.data.data:[],pagination:t.data.pagination}},async addPayment(s){const t=await Ne.post("/payment/supplierPayments.php",{action:"addPayment",supplier_id:s.supplier_id,payment_amount:s.payment_amount,currency_id:s.currency_id,payment_detail:s.payment_detail||"",account_id:s.account_id});return{success:t.data.success,message:t.data.message||"Payment added successfully"}},async updatePayment(s){const t=await Ne.post("/payment/supplierPayments.php",{action:"updatePayment",payment_id:s.payment_id,supplier_id:s.supplier_id,payment_amount:s.payment_amount,currency_id:s.currency_id,payment_detail:s.payment_detail||"",account_id:s.account_id});return{success:t.data.success,message:t.data.message||"Payment updated successfully"}},async getPayment(s){const t=await Ne.post("/payment/supplierPayments.php",{action:"getPayment",payment_id:s});if(t.data.success)return t.data.data;throw new Error(t.data.message||"Failed to fetch payment")},async deletePayment(s){const t=await Ne.post("/payment/supplierPayments.php",{action:"deletePayment",payment_id:s});return{success:t.data.success,message:t.data.message||"Payment deleted successfully"}},async getTotalCharges(s){const t=await Ne.post("/payment/supplierPayments.php",{action:"getTotalCharges",supplier_id:s});return t.data.success?t.data.data:[]}};function Wq(){const[s,t]=A.useState({start_date:new Date(new Date().getFullYear(),new Date().getMonth(),1).toISOString().split("T")[0],end_date:new Date().toISOString().split("T")[0],page:1,per_page:20}),[a,n]=A.useState(""),[r,i]=A.useState(!1),[o,c]=A.useState(null),[u,h]=A.useState({customer_id:void 0,payment_amount:void 0,account_id:void 0,currency_id:void 0,remarks:"",staff_id:void 0}),[m,p]=A.useState(!1),y=Wa(),{data:g}=Rt({queryKey:["payment-dropdowns"],queryFn:async()=>{const X=await Ne.get("/payment/dropdowns.php?type=all");return X.data.success?X.data.data:{customers:[],accounts:[],currencies:[],staff:[]}},staleTime:6e4,refetchOnWindowFocus:!1}),{data:j,refetch:b}=Rt({queryKey:["customer-payments",s],queryFn:()=>Hf.searchPayments(s),staleTime:1e4,refetchOnWindowFocus:!1}),N=j?.data||[],v=j?.pagination,S=wt({mutationFn:X=>Hf.addPayment(X),onSuccess:()=>{W.fire({icon:"success",title:"Success!",text:"Payment added successfully",timer:1500,showConfirmButton:!1}),y.invalidateQueries({queryKey:["customer-payments"]}),i(!1),V()},onError:X=>{W.fire({icon:"error",title:"Error!",text:X.response?.data?.message||"Failed to add payment"})}}),E=wt({mutationFn:X=>Hf.updatePayment(X),onSuccess:()=>{W.fire({icon:"success",title:"Success!",text:"Payment updated successfully",timer:1500,showConfirmButton:!1}),y.invalidateQueries({queryKey:["customer-payments"]}),c(null),V()},onError:X=>{W.fire({icon:"error",title:"Error!",text:X.response?.data?.message||"Failed to update payment"})}}),L=wt({mutationFn:X=>Hf.deletePayment(X),onSuccess:()=>{W.fire({icon:"success",title:"Success!",text:"Payment deleted successfully",timer:1500,showConfirmButton:!1}),y.invalidateQueries({queryKey:["customer-payments"]})},onError:X=>{W.fire({icon:"error",title:"Error!",text:X.response?.data?.message||"Failed to delete payment"})}}),z=async X=>{try{const R=await Hf.getAccountCurrency(X);R.currency_id?(h(Q=>({...Q,currency_id:R.currency_id})),p(!0)):p(!1)}catch{p(!1)}},V=()=>{h({customer_id:void 0,payment_amount:void 0,account_id:void 0,currency_id:void 0,remarks:"",staff_id:void 0}),p(!1)},te=()=>{V(),i(!0)},q=async X=>{h({customer_id:X.customer_id,payment_amount:X.payment_amount,account_id:X.accountID,currency_id:X.currencyID,remarks:X.remarks||"",staff_id:X.staff_id}),X.accountID&&await z(X.accountID),c(X)},B=X=>{W.fire({title:"Are you sure?",text:"You want to delete this payment?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#dc2626",cancelButtonColor:"#6b7280",confirmButtonText:"Yes, delete it!"}).then(R=>{R.isConfirmed&&L.mutate(X)})},J=X=>{if(X.preventDefault(),!u.customer_id||!u.payment_amount||!u.account_id||!u.currency_id||!u.staff_id){W.fire({icon:"error",title:"Error!",text:"Please fill all required fields"});return}o?E.mutate({...u,pay_id:o.pay_id}):S.mutate(u)},P=X=>{if(h(R=>({...R,account_id:X})),X){const R=g?.accounts?.find(Q=>Q.account_ID===X);R&&R.account_Name.toLowerCase()==="cash"?(p(!1),h(Q=>({...Q,currency_id:void 0}))):z(X)}else p(!1),h(R=>({...R,currency_id:void 0}))},K=()=>{t(X=>({...X,search:a||void 0,page:1}))},H=X=>{t(R=>({...R,page:X}))},se=X=>{t(R=>({...R,per_page:X,page:1}))};return A.useEffect(()=>{b()},[s]),e.jsxs("div",{className:"customer-payments-page",children:[e.jsxs("div",{className:"page-header",children:[e.jsxs("h1",{children:[e.jsx("i",{className:"fa fa-money me-2"}),"Customer Payments"]}),e.jsxs("button",{className:"btn btn-success",onClick:te,children:[e.jsx("i",{className:"fa fa-plus me-2"}),"Add Payment"]})]}),e.jsxs("div",{className:"panel",children:[e.jsx("div",{className:"panel-header",children:e.jsxs("h3",{children:[e.jsx("i",{className:"fa fa-search me-2"}),"Search Payments"]})}),e.jsx("div",{className:"panel-body",children:e.jsx("form",{onSubmit:X=>{X.preventDefault(),b()},children:e.jsxs("div",{className:"search-form-row",children:[e.jsxs("div",{className:"search-form-group",children:[e.jsx("label",{htmlFor:"start_date",className:"form-label",children:"From Date"}),e.jsx("input",{type:"date",className:"form-control",id:"start_date",value:s.start_date||"",onChange:X=>t({...s,start_date:X.target.value})})]}),e.jsxs("div",{className:"search-form-group",children:[e.jsx("label",{htmlFor:"end_date",className:"form-label",children:"To Date"}),e.jsx("input",{type:"date",className:"form-control",id:"end_date",value:s.end_date||"",onChange:X=>t({...s,end_date:X.target.value})})]}),e.jsxs("div",{className:"search-form-group",children:[e.jsx("label",{htmlFor:"customer",className:"form-label",children:"Customer"}),e.jsx(It,{options:[{value:"",label:"All Customers"},...g?.customers?.map(X=>({value:String(X.customer_id),label:X.customer_name}))||[]],value:s.customer?String(s.customer):"",onChange:X=>t({...s,customer:X?Number(X):void 0}),placeholder:"Select Customer"})]}),e.jsxs("div",{className:"search-form-group",children:[e.jsx("label",{htmlFor:"account",className:"form-label",children:"Account"}),e.jsx(It,{options:[{value:"",label:"All Accounts"},...g?.accounts?.map(X=>({value:String(X.account_ID),label:X.account_Name}))||[]],value:s.account?String(s.account):"",onChange:X=>t({...s,account:X?Number(X):void 0}),placeholder:"Select Account"})]}),e.jsxs("div",{className:"search-form-group",children:[e.jsx("label",{htmlFor:"search",className:"form-label",children:"Search"}),e.jsx("input",{type:"text",className:"form-control",id:"search",placeholder:"Search customer, remarks, staff, amount...",value:a,onChange:X=>n(X.target.value),onKeyPress:X=>{X.key==="Enter"&&(X.preventDefault(),K())}})]}),e.jsx("div",{className:"search-form-group search-button-group",children:e.jsxs("button",{type:"button",onClick:K,className:"btn btn-primary w-100",children:[e.jsx("i",{className:"fa fa-search me-2"}),e.jsx("span",{className:"search-text",children:"Search"})]})})]})})})]}),e.jsxs("div",{className:"panel",children:[e.jsx("div",{className:"panel-header",children:e.jsxs("h3",{children:[e.jsx("i",{className:"fa fa-list me-2"}),"Customer Payments"]})}),e.jsxs("div",{className:"panel-body",children:[e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-striped table-bordered",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"ID"}),e.jsx("th",{children:"Customer Name"}),e.jsx("th",{children:"Date Time"}),e.jsx("th",{children:"Payment Amount"}),e.jsx("th",{children:"Currency"}),e.jsx("th",{children:"Account"}),e.jsx("th",{children:"Employee Name"}),e.jsx("th",{children:"Remarks"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:N.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:9,className:"text-center",children:"No payments found"})}):N.map((X,R)=>e.jsxs("tr",{children:[e.jsx("td",{children:((v?.page||1)-1)*(v?.per_page||20)+R+1}),e.jsx("td",{children:X.customer_name||"N/A"}),e.jsx("td",{children:new Date(X.datetime).toLocaleString()}),e.jsx("td",{children:parseFloat(String(X.payment_amount)).toLocaleString()}),e.jsx("td",{children:X.currencyName||"N/A"}),e.jsx("td",{children:X.account_Name||"N/A"}),e.jsx("td",{children:X.staff_name||"N/A"}),e.jsx("td",{children:X.remarks||""}),e.jsx("td",{children:e.jsxs("div",{className:"action-buttons",children:[e.jsx("button",{className:"btn btn-sm btn-warning me-2",onClick:()=>q(X),children:e.jsx("i",{className:"fa fa-edit"})}),e.jsx("button",{className:"btn btn-sm btn-danger",onClick:()=>B(X.pay_id),children:e.jsx("i",{className:"fa fa-trash"})})]})})]},X.pay_id))})]})}),v&&v.total>0&&e.jsxs("div",{className:"pagination-container",children:[e.jsxs("div",{className:"pagination-info",children:["Showing ",(v.page-1)*v.per_page+1," to ",Math.min(v.page*v.per_page,v.total)," of ",v.total," entries"]}),e.jsxs("div",{className:"pagination-controls",children:[e.jsxs("select",{className:"form-control per-page-select",value:s.per_page||20,onChange:X=>se(Number(X.target.value)),children:[e.jsx("option",{value:"10",children:"10 per page"}),e.jsx("option",{value:"20",children:"20 per page"}),e.jsx("option",{value:"50",children:"50 per page"}),e.jsx("option",{value:"100",children:"100 per page"})]}),e.jsxs("div",{className:"pagination-buttons",children:[e.jsxs("button",{className:"btn btn-sm btn-secondary",onClick:()=>H(v.page-1),disabled:v.page<=1,children:[e.jsx("i",{className:"fa fa-chevron-left"})," Previous"]}),e.jsxs("span",{className:"page-info",children:["Page ",v.page," of ",v.total_pages]}),e.jsxs("button",{className:"btn btn-sm btn-secondary",onClick:()=>H(v.page+1),disabled:v.page>=v.total_pages,children:["Next ",e.jsx("i",{className:"fa fa-chevron-right"})]})]})]})]})]})]}),(r||o)&&e.jsx("div",{className:"modal-overlay",onClick:()=>{i(!1),c(null),V()},children:e.jsxs("div",{className:"modal-content",onClick:X=>X.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h5",{className:"modal-title",children:[e.jsx("i",{className:"fa fa-money me-2"}),o?"Update Payment":"Add Payment"]}),e.jsx("button",{type:"button",className:"btn-close",onClick:()=>{i(!1),c(null),V()},children:""})]}),e.jsx("div",{className:"modal-body",children:e.jsxs("form",{onSubmit:J,children:[e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"customer_id",className:"form-label",children:"Customer Name *"}),e.jsx(It,{options:[{value:"",label:"Select Customer"},...g?.customers?.map(X=>({value:String(X.customer_id),label:X.customer_name}))||[]],value:u.customer_id?String(u.customer_id):"",onChange:X=>h({...u,customer_id:X?Number(X):void 0}),placeholder:"Select Customer",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"payment_amount",className:"form-label",children:"Payment Amount *"}),e.jsx("input",{type:"number",step:"0.01",className:"form-control",id:"payment_amount",value:u.payment_amount||"",onChange:X=>h({...u,payment_amount:parseFloat(X.target.value)}),required:!0})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"account_id",className:"form-label",children:"Account *"}),e.jsx(It,{options:[{value:"",label:"Select Account"},...g?.accounts?.map(X=>({value:String(X.account_ID),label:X.account_Name}))||[]],value:u.account_id?String(u.account_id):"",onChange:X=>P(X?Number(X):0),placeholder:"Select Account",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"currency_id",className:"form-label",children:"Currency *"}),e.jsx(It,{options:[{value:"",label:"Select Currency"},...g?.currencies?.map(X=>({value:String(X.currencyID),label:X.currencyName}))||[]],value:u.currency_id?String(u.currency_id):"",onChange:X=>h({...u,currency_id:X?Number(X):void 0}),placeholder:"Select Currency",disabled:m,required:!0})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"remarks",className:"form-label",children:"Remarks"}),e.jsx("textarea",{className:"form-control",id:"remarks",rows:3,value:u.remarks||"",onChange:X=>h({...u,remarks:X.target.value})})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"staff_id",className:"form-label",children:"Staff Member *"}),e.jsx(It,{options:[{value:"",label:"Select Staff Member"},...g?.staff?.map(X=>({value:String(X.staff_id),label:X.staff_name}))||[]],value:u.staff_id?String(u.staff_id):"",onChange:X=>h({...u,staff_id:X?Number(X):void 0}),placeholder:"Select Staff Member",required:!0})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>{i(!1),c(null),V()},children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-success",disabled:S.isPending||E.isPending,children:S.isPending||E.isPending?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fa fa-spinner fa-spin me-2"}),o?"Updating...":"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fa fa-save me-2"}),o?"Update":"Save"," Payment"]})})]})]})})]})})]})}function Yq(){const[s,t]=A.useState({date_search_enabled:!1,page:1,per_page:20}),[a,n]=A.useState(""),[r,i]=A.useState(!1),[o,c]=A.useState(null),[u,h]=A.useState({supplier_id:void 0,payment_amount:void 0,currency_id:void 0,payment_detail:"",account_id:void 0}),[m,p]=A.useState([]),y=Wa(),{data:g,isLoading:j,error:b}=Rt({queryKey:["supplier-payment-dropdowns"],queryFn:async()=>{try{const $=await Ne.get("/payment/dropdowns.php?type=suppliers,accounts,currencies");return console.log("Dropdowns response:",$.data),$.data.success&&$.data.data?$.data.data:(console.warn("Dropdowns API returned unsuccessful response:",$.data),{suppliers:[],accounts:[],currencies:[]})}catch($){return console.error("Error loading dropdowns:",$),console.error("Error details:",$.response?.data),{suppliers:[],accounts:[],currencies:[]}}},staleTime:6e4,refetchOnWindowFocus:!1});A.useEffect(()=>{g&&(console.log("Dropdowns loaded:",g),console.log("Suppliers count:",g.suppliers?.length||0),console.log("Accounts count:",g.accounts?.length||0),console.log("Currencies count:",g.currencies?.length||0)),b&&console.error("Dropdowns error:",b)},[g,b]);const{data:N,refetch:v,error:S,isLoading:E}=Rt({queryKey:["supplier-payments",s],queryFn:async()=>{try{console.log("Fetching supplier payments with filters:",s);const $=await jh.searchPayments(s);return console.log("Supplier Payments Result:",$),console.log("Payments data:",$.data),console.log("Pagination:",$.pagination),$}catch($){throw console.error("Error fetching supplier payments:",$),console.error("Error details:",$.response?.data),$}},enabled:!0,staleTime:1e4,refetchOnWindowFocus:!1}),L=N?.data||[],z=N?.pagination;A.useEffect(()=>{N&&(console.log("Supplier Payments Loaded:",L),console.log("Pagination:",z)),S&&console.error("Supplier Payments Error:",S)},[N,S,L,z]);const V=wt({mutationFn:$=>jh.addPayment($),onSuccess:()=>{W.fire({icon:"success",title:"Success!",text:"Payment added successfully",timer:1500,showConfirmButton:!1}),y.invalidateQueries({queryKey:["supplier-payments"]}),i(!1),J()},onError:$=>{W.fire({icon:"error",title:"Error!",text:$.response?.data?.message||"Failed to add payment"})}}),te=wt({mutationFn:$=>jh.updatePayment($),onSuccess:()=>{W.fire({icon:"success",title:"Success!",text:"Payment updated successfully",timer:1500,showConfirmButton:!1}),y.invalidateQueries({queryKey:["supplier-payments"]}),c(null),J()},onError:$=>{W.fire({icon:"error",title:"Error!",text:$.response?.data?.message||"Failed to update payment"})}}),q=wt({mutationFn:$=>jh.deletePayment($),onSuccess:()=>{W.fire({icon:"success",title:"Success!",text:"Payment deleted successfully",timer:1500,showConfirmButton:!1}),y.invalidateQueries({queryKey:["supplier-payments"]})},onError:$=>{W.fire({icon:"error",title:"Error!",text:$.response?.data?.message||"Failed to delete payment"})}}),B=async $=>{try{const me=await jh.getTotalCharges($);p(me)}catch{p([])}},J=()=>{h({supplier_id:void 0,payment_amount:void 0,currency_id:void 0,payment_detail:"",account_id:void 0}),p([])},P=()=>{J(),i(!0)},K=async $=>{try{const me=await jh.getPayment($.payment_id);h({supplier_id:me.supp_id||$.supp_id,payment_amount:me.payment_amount||$.payment_amount,currency_id:me.currencyID||$.currencyID,payment_detail:me.payment_detail||$.payment_detail||"",account_id:me.accountID||$.accountID}),(me.supp_id||$.supp_id)&&await B(me.supp_id||$.supp_id),c($)}catch(me){console.error("Error fetching payment details:",me),h({supplier_id:$.supp_id,payment_amount:$.payment_amount,currency_id:$.currencyID,payment_detail:$.payment_detail||"",account_id:$.accountID}),$.supp_id&&await B($.supp_id),c($)}},H=$=>{W.fire({title:"Are you sure?",text:"You want to delete this payment?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#dc2626",cancelButtonColor:"#6b7280",confirmButtonText:"Yes, delete it!"}).then(me=>{me.isConfirmed&&q.mutate($)})},se=$=>{if($.preventDefault(),!u.supplier_id||!u.payment_amount||!u.currency_id||!u.account_id){W.fire({icon:"error",title:"Error!",text:"Please fill all required fields"});return}o?te.mutate({...u,payment_id:o.payment_id}):V.mutate(u)},X=async $=>{h(me=>({...me,supplier_id:$})),$?await B($):p([])},R=()=>{t($=>({...$,search:a||void 0,page:1}))},Q=$=>{t(me=>({...me,page:$}))},Y=$=>{t(me=>({...me,per_page:$,page:1}))};return A.useEffect(()=>{v()},[s]),e.jsxs("div",{className:"supplier-payments-page",children:[e.jsxs("div",{className:"page-header",children:[e.jsxs("h1",{children:[e.jsx("i",{className:"fa fa-money me-2"}),"Supplier Payment Report"]}),e.jsxs("button",{className:"btn btn-success",onClick:P,children:[e.jsx("i",{className:"fa fa-plus me-2"}),"Add Supplier Payment"]})]}),e.jsxs("div",{className:"panel",children:[e.jsx("div",{className:"panel-header",children:e.jsxs("h3",{children:[e.jsx("i",{className:"fa fa-search me-2"}),"Search & Filter"]})}),e.jsx("div",{className:"panel-body",children:e.jsx("form",{onSubmit:$=>{$.preventDefault(),t(me=>({...me,page:1})),v()},children:e.jsxs("div",{className:"search-form-row",children:[e.jsx("div",{className:"search-form-group",children:e.jsxs("div",{className:"form-check",children:[e.jsx("input",{className:"form-check-input",type:"checkbox",id:"dateSearch",checked:s.date_search_enabled||!1,onChange:$=>t({...s,date_search_enabled:$.target.checked})}),e.jsx("label",{className:"form-check-label",htmlFor:"dateSearch",children:"Search By Date"})]})}),e.jsxs("div",{className:"search-form-group",children:[e.jsx("label",{htmlFor:"from_date",className:"form-label",children:"From Date"}),e.jsx("input",{type:"date",className:"form-control",id:"from_date",value:s.from_date||"",onChange:$=>t({...s,from_date:$.target.value}),disabled:!s.date_search_enabled})]}),e.jsxs("div",{className:"search-form-group",children:[e.jsx("label",{htmlFor:"to_date",className:"form-label",children:"To Date"}),e.jsx("input",{type:"date",className:"form-control",id:"to_date",value:s.to_date||"",onChange:$=>t({...s,to_date:$.target.value}),disabled:!s.date_search_enabled})]}),e.jsxs("div",{className:"search-form-group",children:[e.jsx("label",{htmlFor:"supplier_id",className:"form-label",children:"Supplier"}),e.jsx(It,{options:[{value:"",label:"--All Suppliers--"},...g?.suppliers?.map($=>({value:String($.supp_id),label:$.supp_name}))||[]],value:s.supplier_id?String(s.supplier_id):"",onChange:$=>t({...s,supplier_id:$?Number($):void 0}),placeholder:"Select Supplier"})]}),e.jsxs("div",{className:"search-form-group",children:[e.jsx("label",{htmlFor:"search",className:"form-label",children:"Search"}),e.jsx("input",{type:"text",className:"form-control",id:"search",placeholder:"Search supplier, detail, staff, amount...",value:a,onChange:$=>n($.target.value),onKeyPress:$=>{$.key==="Enter"&&($.preventDefault(),R())}})]}),e.jsx("div",{className:"search-form-group search-button-group",children:e.jsxs("button",{type:"button",onClick:R,className:"btn btn-primary w-100",children:[e.jsx("i",{className:"fa fa-search me-2"}),e.jsx("span",{className:"search-text",children:"Search"})]})})]})})})]}),e.jsxs("div",{className:"panel",children:[e.jsx("div",{className:"panel-header",children:e.jsxs("h3",{children:[e.jsx("i",{className:"fa fa-list me-2"}),"Supplier Payments"]})}),e.jsxs("div",{className:"panel-body",children:[E&&e.jsxs("div",{className:"text-center p-4",children:[e.jsx("i",{className:"fa fa-spinner fa-spin fa-2x"}),e.jsx("p",{className:"mt-2",children:"Loading payments..."})]}),S&&e.jsxs("div",{className:"alert alert-danger",children:[e.jsx("strong",{children:"Error loading payments:"})," ",S instanceof Error?S.message:"Unknown error"]}),!E&&!S&&e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-striped table-bordered",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"S#"}),e.jsx("th",{children:"Supplier Name"}),e.jsx("th",{children:"Payment Detail"}),e.jsx("th",{children:"Date Time"}),e.jsx("th",{children:"Payment Amount"}),e.jsx("th",{children:"Employee Name"}),e.jsx("th",{children:"Account/Cash"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:L.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"text-center",children:"No payments found"})}):L.map(($,me)=>e.jsxs("tr",{children:[e.jsx("td",{children:((z?.page||1)-1)*(z?.per_page||20)+me+1}),e.jsx("td",{children:$.supp_name||"N/A"}),e.jsx("td",{children:$.payment_detail||""}),e.jsx("td",{children:new Date($.time_creation).toLocaleString()}),e.jsxs("td",{children:[parseFloat(String($.payment_amount)).toLocaleString()," ",$.currencyName||""]}),e.jsx("td",{children:$.staff_name||"N/A"}),e.jsx("td",{children:$.account_Name||"N/A"}),e.jsx("td",{children:e.jsxs("div",{className:"action-buttons",children:[e.jsx("button",{className:"btn btn-sm btn-warning me-2",onClick:()=>K($),children:e.jsx("i",{className:"fa fa-edit"})}),e.jsx("button",{className:"btn btn-sm btn-danger",onClick:()=>H($.payment_id),children:e.jsx("i",{className:"fa fa-trash"})})]})})]},$.payment_id))})]})}),!E&&!S&&z&&z.total>0&&e.jsxs("div",{className:"pagination-container",children:[e.jsxs("div",{className:"pagination-info",children:["Showing ",(z.page-1)*z.per_page+1," to ",Math.min(z.page*z.per_page,z.total)," of ",z.total," entries"]}),e.jsxs("div",{className:"pagination-controls",children:[e.jsxs("select",{className:"form-control per-page-select",value:s.per_page||20,onChange:$=>Y(Number($.target.value)),children:[e.jsx("option",{value:"10",children:"10 per page"}),e.jsx("option",{value:"20",children:"20 per page"}),e.jsx("option",{value:"50",children:"50 per page"}),e.jsx("option",{value:"100",children:"100 per page"})]}),e.jsxs("div",{className:"pagination-buttons",children:[e.jsxs("button",{className:"btn btn-sm btn-secondary",onClick:()=>Q(z.page-1),disabled:z.page<=1,children:[e.jsx("i",{className:"fa fa-chevron-left"})," Previous"]}),e.jsxs("span",{className:"page-info",children:["Page ",z.page," of ",z.total_pages]}),e.jsxs("button",{className:"btn btn-sm btn-secondary",onClick:()=>Q(z.page+1),disabled:z.page>=z.total_pages,children:["Next ",e.jsx("i",{className:"fa fa-chevron-right"})]})]})]})]})]})]}),(r||o)&&e.jsx("div",{className:"modal-overlay",onClick:()=>{i(!1),c(null),J()},children:e.jsxs("div",{className:"modal-content large",onClick:$=>$.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h5",{className:"modal-title",children:[e.jsx("i",{className:"fa fa-money me-2"}),o?"Update Supplier Payment":"Add Supplier Payment"]}),e.jsx("button",{type:"button",className:"btn-close",onClick:()=>{i(!1),c(null),J()},children:""})]}),e.jsx("div",{className:"modal-body",children:e.jsxs("form",{onSubmit:se,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"supplier_id",className:"form-label",children:"Supplier Name *"}),j?e.jsxs("div",{className:"form-control",style:{padding:"10px"},children:[e.jsx("i",{className:"fa fa-spinner fa-spin me-2"}),"Loading suppliers..."]}):b?e.jsx("div",{className:"alert alert-danger",children:"Error loading suppliers. Please refresh the page."}):e.jsx(It,{options:[{value:"",label:"Select Supplier"},...g?.suppliers?.map($=>({value:String($.supp_id),label:$.supp_name}))||[]],value:u.supplier_id?String(u.supplier_id):"",onChange:$=>X($?Number($):0),placeholder:"Select Supplier",required:!0})]}),u.supplier_id&&m.length>0&&e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Total Charges"}),e.jsx("div",{className:"total-charges-display",children:m.map(($,me)=>e.jsx("div",{className:"charge-item",children:e.jsxs("strong",{children:[parseFloat(String($.total)).toLocaleString()," ",$.curName]})},me))})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"payment_amount",className:"form-label",children:"Payment Amount *"}),e.jsx("input",{type:"number",step:"0.01",className:"form-control",id:"payment_amount",value:u.payment_amount||"",onChange:$=>h({...u,payment_amount:parseFloat($.target.value)}),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"currency_id",className:"form-label",children:"Currency *"}),j?e.jsxs("div",{className:"form-control",style:{padding:"10px"},children:[e.jsx("i",{className:"fa fa-spinner fa-spin me-2"}),"Loading currencies..."]}):e.jsx(It,{options:[{value:"",label:"Select Currency"},...g?.currencies?.map($=>({value:String($.currencyID),label:$.currencyName}))||[]],value:u.currency_id?String(u.currency_id):"",onChange:$=>h({...u,currency_id:$?Number($):void 0}),placeholder:"Select Currency",required:!0})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"payment_detail",className:"form-label",children:"Payment Detail"}),e.jsx("input",{type:"text",className:"form-control",id:"payment_detail",value:u.payment_detail||"",onChange:$=>h({...u,payment_detail:$.target.value}),placeholder:"Payment Detail"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"account_id",className:"form-label",children:"Account *"}),j?e.jsxs("div",{className:"form-control",style:{padding:"10px"},children:[e.jsx("i",{className:"fa fa-spinner fa-spin me-2"}),"Loading accounts..."]}):e.jsx(It,{options:[{value:"",label:"Select Account"},...g?.accounts?.map($=>({value:String($.account_ID),label:$.account_Name}))||[]],value:u.account_id?String(u.account_id):"",onChange:$=>h({...u,account_id:$?Number($):void 0}),placeholder:"Select Account",required:!0})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>{i(!1),c(null),J()},children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-success",disabled:V.isPending||te.isPending,children:V.isPending||te.isPending?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fa fa-spinner fa-spin me-2"}),o?"Updating...":"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fa fa-save me-2"}),o?"Update":"Save"," Payment"]})})]})]})})]})})]})}const $f={async searchAgents(s){const t=await Ne.post("/agent/agents.php",{action:"searchAgents",...s});return{data:t.data.success?t.data.data:[],pagination:t.data.pagination}},async addAgent(s){const t=await Ne.post("/agent/agents.php",{action:"addAgent",...s});return{success:t.data.success,message:t.data.message||"Agent added successfully",errors:t.data.errors}},async updateAgent(s){const t=await Ne.post("/agent/agents.php",{action:"updateAgent",...s});return{success:t.data.success,message:t.data.message||"Agent updated successfully",errors:t.data.errors}},async deleteAgent(s){const t=await Ne.post("/agent/agents.php",{action:"deleteAgent",id:s});return{success:t.data.success,message:t.data.message||"Agent deleted successfully"}},async getAgent(s){const t=await Ne.post("/agent/agents.php",{action:"getAgent",id:s});if(t.data.success&&t.data.data)return t.data.data;throw new Error(t.data.message||"Agent not found")}};function Kq(){const[s,t]=A.useState({page:1,per_page:20}),[a,n]=A.useState(""),[r,i]=A.useState(!1),[o,c]=A.useState(null),[u,h]=A.useState({company:"",customer_id:void 0,email:""}),[m,p]=A.useState({}),y=Wa(),{data:g}=Rt({queryKey:["customers-dropdown"],queryFn:async()=>{try{const H=await Ne.post("/customer/customers.php",{action:"getCustomers",page:1,per_page:1e3});return H.data.success?H.data.data:[]}catch{return[]}},staleTime:6e4,refetchOnWindowFocus:!1}),{data:j,refetch:b}=Rt({queryKey:["agents",s],queryFn:()=>$f.searchAgents(s),staleTime:1e4,refetchOnWindowFocus:!1}),N=j?.data||[],v=j?.pagination,S=wt({mutationFn:H=>$f.addAgent(H),onSuccess:H=>{H.success?(W.fire({icon:"success",title:"Success!",text:H.message,timer:1500,showConfirmButton:!1}),y.invalidateQueries({queryKey:["agents"]}),i(!1),z()):H.errors&&p(H.errors)},onError:H=>{H.response?.data?.errors?p(H.response.data.errors):W.fire({icon:"error",title:"Error!",text:H.response?.data?.message||"Failed to add agent"})}}),E=wt({mutationFn:H=>$f.updateAgent(H),onSuccess:H=>{H.success?(W.fire({icon:"success",title:"Success!",text:H.message,timer:1500,showConfirmButton:!1}),y.invalidateQueries({queryKey:["agents"]}),c(null),z()):H.errors&&p(H.errors)},onError:H=>{H.response?.data?.errors?p(H.response.data.errors):W.fire({icon:"error",title:"Error!",text:H.response?.data?.message||"Failed to update agent"})}}),L=wt({mutationFn:H=>$f.deleteAgent(H),onSuccess:()=>{W.fire({icon:"success",title:"Success!",text:"Agent deleted successfully",timer:1500,showConfirmButton:!1}),y.invalidateQueries({queryKey:["agents"]})},onError:H=>{W.fire({icon:"error",title:"Error!",text:H.response?.data?.message||"Failed to delete agent"})}}),z=()=>{h({company:"",customer_id:void 0,email:""}),p({})},V=()=>{z(),i(!0)},te=async H=>{try{const se=await $f.getAgent(H.id);h({company:se.company||"",customer_id:se.customer_id,email:se.email||""}),p({}),c(H)}catch(se){console.error("Error fetching agent:",se),h({company:H.company||"",customer_id:H.customer_id,email:H.email||""}),p({}),c(H)}},q=H=>{W.fire({title:"Are you sure?",text:"Are you sure you want to delete this agent record?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#dc2626",cancelButtonColor:"#6b7280",confirmButtonText:"Yes, delete it!"}).then(se=>{se.isConfirmed&&L.mutate(H)})},B=H=>{if(H.preventDefault(),p({}),!u.company||!u.customer_id||!u.email){const se={};u.company||(se.company="Company name is required"),u.customer_id||(se.customer_id="Customer is required"),u.email||(se.email="Email is required"),p(se);return}o?E.mutate({...u,id:o.id}):S.mutate(u)},J=()=>{t(H=>({...H,search:a||void 0,page:1}))},P=H=>{t(se=>({...se,page:H}))},K=H=>{t(se=>({...se,per_page:H,page:1}))};return A.useEffect(()=>{b()},[s]),e.jsxs("div",{className:"agents-page",children:[e.jsxs("div",{className:"page-header",children:[e.jsxs("h1",{children:[e.jsx("i",{className:"fa fa-users me-2"}),"Manage Agents"]}),e.jsxs("button",{className:"btn btn-success",onClick:V,children:[e.jsx("i",{className:"fa fa-plus me-2"}),"Add Agent"]})]}),e.jsxs("div",{className:"panel",children:[e.jsx("div",{className:"panel-header",children:e.jsxs("h3",{children:[e.jsx("i",{className:"fa fa-search me-2"}),"Search Agents"]})}),e.jsx("div",{className:"panel-body",children:e.jsxs("div",{className:"search-form-row",children:[e.jsxs("div",{className:"search-form-group",children:[e.jsx("label",{htmlFor:"search",className:"form-label",children:"Search"}),e.jsx("input",{type:"text",className:"form-control",id:"search",placeholder:"Search by company or email",value:a,onChange:H=>n(H.target.value),onKeyPress:H=>{H.key==="Enter"&&(H.preventDefault(),J())}})]}),e.jsxs("div",{className:"search-form-group",children:[e.jsx("label",{htmlFor:"status",className:"form-label",children:"Status"}),e.jsxs("select",{className:"form-control",id:"status",value:s.status||"",onChange:H=>t({...s,status:H.target.value||void 0,page:1}),children:[e.jsx("option",{value:"",children:"All"}),e.jsx("option",{value:"1",children:"Active"}),e.jsx("option",{value:"0",children:"Suspended"})]})]}),e.jsx("div",{className:"search-button-group",children:e.jsxs("button",{type:"button",onClick:J,className:"btn btn-primary",children:[e.jsx("i",{className:"fa fa-filter me-2"}),"Search"]})})]})})]}),e.jsxs("div",{className:"panel",children:[e.jsx("div",{className:"panel-header",children:e.jsxs("h3",{children:[e.jsx("i",{className:"fa fa-list me-2"}),"Agents"]})}),e.jsxs("div",{className:"panel-body",children:[e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-striped table-bordered",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"ID"}),e.jsx("th",{children:"Agency / Company Name / Customer"}),e.jsx("th",{children:"Email"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:N.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"text-center",children:"No agents found"})}):N.map((H,se)=>e.jsxs("tr",{children:[e.jsx("td",{children:H.id}),e.jsxs("td",{children:[e.jsx("strong",{children:H.company}),e.jsx("br",{}),e.jsxs("small",{className:"text-muted",children:["Customer: ",H.customer_name||"N/A"]})]}),e.jsx("td",{children:H.email}),e.jsx("td",{children:e.jsx("span",{className:`badge ${H.status==1?"badge-active":"badge-inactive"} rounded-pill`,children:H.status==1?"Active":"Suspended"})}),e.jsx("td",{children:e.jsxs("div",{className:"action-buttons",children:[e.jsxs("button",{type:"button",onClick:()=>te(H),className:"btn btn-sm btn-primary me-2",children:[e.jsx("i",{className:"fa fa-edit"})," Edit"]}),e.jsxs("button",{type:"button",onClick:()=>q(H.id),className:"btn btn-sm btn-danger",children:[e.jsx("i",{className:"fa fa-trash"})," Delete"]})]})})]},H.id))})]})}),v&&v.total>0&&e.jsxs("div",{className:"pagination-container",children:[e.jsxs("div",{className:"pagination-info",children:["Showing ",(v.page-1)*v.per_page+1," to ",Math.min(v.page*v.per_page,v.total)," of ",v.total," entries"]}),e.jsxs("div",{className:"pagination-controls",children:[e.jsxs("select",{className:"form-control per-page-select",value:s.per_page||20,onChange:H=>K(Number(H.target.value)),children:[e.jsx("option",{value:"10",children:"10 per page"}),e.jsx("option",{value:"20",children:"20 per page"}),e.jsx("option",{value:"50",children:"50 per page"}),e.jsx("option",{value:"100",children:"100 per page"})]}),e.jsxs("div",{className:"pagination-buttons",children:[e.jsxs("button",{className:"btn btn-sm btn-secondary",onClick:()=>P(v.page-1),disabled:v.page<=1,children:[e.jsx("i",{className:"fa fa-chevron-left"})," Previous"]}),e.jsxs("span",{className:"page-info",children:["Page ",v.page," of ",v.total_pages]}),e.jsxs("button",{className:"btn btn-sm btn-secondary",onClick:()=>P(v.page+1),disabled:v.page>=v.total_pages,children:["Next ",e.jsx("i",{className:"fa fa-chevron-right"})]})]})]})]})]})]}),(r||o)&&e.jsx("div",{className:"modal-overlay",onClick:()=>{i(!1),c(null),z()},children:e.jsxs("div",{className:"modal-content",onClick:H=>H.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h3",{className:"modal-title",children:[e.jsx("i",{className:"fa fa-users me-2"}),o?"Edit Agent":"New Agent"]}),e.jsx("button",{type:"button",className:"btn-close",onClick:()=>{i(!1),c(null),z()},children:""})]}),e.jsxs("div",{className:"modal-body",children:[(S.isError&&S.error?.response?.data?.errors||E.isError&&E.error?.response?.data?.errors||Object.keys(m).length>0)&&e.jsx("div",{className:"alert alert-danger",children:"Please fix the errors below"}),e.jsxs("form",{onSubmit:B,children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Agent / Company Name ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"text",className:`form-control ${m.company?"is-invalid":""}`,name:"company",value:u.company||"",onChange:H=>{h({...u,company:H.target.value}),m.company&&p({...m,company:""})},placeholder:"Agent / Company Name",required:!0}),m.company&&e.jsx("div",{className:"invalid-feedback",children:m.company})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Select Customer Account ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx(It,{options:[{value:"",label:"Select"},...g?.map(H=>({value:String(H.customer_id),label:H.customer_name}))||[]],value:u.customer_id?String(u.customer_id):"",onChange:H=>{h({...u,customer_id:H?Number(H):void 0}),m.customer_id&&p({...m,customer_id:""})},placeholder:"Select Customer"}),m.customer_id&&e.jsx("div",{className:"invalid-feedback",style:{display:"block"},children:m.customer_id})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:["Email ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"email",className:`form-control ${m.email?"is-invalid":""}`,name:"email",value:u.email||"",onChange:H=>{h({...u,email:H.target.value}),m.email&&p({...m,email:""})},placeholder:"Email",required:!0}),m.email&&e.jsx("div",{className:"invalid-feedback",children:m.email})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>{i(!1),c(null),z()},children:"Close"}),e.jsx("button",{type:"submit",className:"btn btn-success",disabled:S.isPending||E.isPending,children:S.isPending||E.isPending?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fa fa-spinner fa-spin me-2"}),o?"Updating...":"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fa fa-save me-2"}),o?"Update":"Save"]})})]})]})]})]})})]})}function Xq(){const[s,t]=A.useState(""),[a,n]=A.useState(null),{data:r=[]}=Rt({queryKey:["affiliate-customers"],queryFn:async()=>{const g=await Ne.post("/affiliate/affiliateLedger.php",{action:"getCustomers"});return g.data.success?g.data.data:[]},staleTime:6e4,refetchOnWindowFocus:!1}),{data:i=[]}=Rt({queryKey:["affiliate-currencies",s],queryFn:async()=>{const g=await Ne.post("/affiliate/affiliateLedger.php",{action:"getCurrencies",customer_id:s,type:s?"customer":"all"});return g.data.success?g.data.data:[]},enabled:!0,staleTime:6e4,refetchOnWindowFocus:!1}),{data:o=[]}=Rt({queryKey:["affiliate-pending",s,a],queryFn:async()=>{const g=await Ne.post("/affiliate/affiliateLedger.php",{action:"getPendingCustomers",customer_id:s,currency_id:a});return g.data.success?g.data.data:[]},enabled:!!a,staleTime:1e4,refetchOnWindowFocus:!1});A.useEffect(()=>{i.length>0&&!a&&n(i[0].currencyID)},[i,a]);const c=g=>{t(g),n(null)},u=g=>{n(g?Number(g):null)},h=g=>new Intl.NumberFormat("en-US").format(g),m=()=>{const g=window.open("","_blank");if(!g)return;const j=i.find(v=>v.currencyID===a)?.currencyName||"",b=o.map((v,S)=>`
      <tr>
        <td>${S+1}</td>
        <td class="text-capitalize">${v.customer_name}</td>
        <td>${v.customer_email||"-"}</td>
        <td>${v.customer_phone||"-"}</td>
        <td>${h(v.total)}</td>
      </tr>
    `).join(""),N=o.reduce((v,S)=>v+S.total,0);g.document.write(`
      <!DOCTYPE html>
      <html>
      <head>
        <title>Affiliate Business Report</title>
        <style>
          body { font-family: Arial, sans-serif; padding: 20px; }
          h1 { text-align: center; }
          h5 { text-align: center; margin-top: -10px; }
          table { width: 100%; border-collapse: collapse; margin-top: 20px; }
          th { background: linear-gradient(to right, #2563eb, #1e40af); color: white; padding: 12px; text-align: center; }
          td { padding: 12px; text-align: center; border-bottom: 1px solid #ddd; }
          .text-capitalize { text-transform: capitalize; }
          @media print {
            @page { margin: 1cm; }
            body { padding: 0; }
          }
        </style>
      </head>
      <body>
        <h1><i class="fa fa-handshake"></i> Affiliate Business Report</h1>
        <h5>Currency: ${j}</h5>
        <table>
          <thead>
            <tr>
              <th>#</th>
              <th>Customer Name</th>
              <th>Customer Email</th>
              <th>Customer Phone</th>
              <th>Pending Amount</th>
            </tr>
          </thead>
          <tbody>
            ${b}
            <tr>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td><strong>${h(N)}</strong></td>
            </tr>
          </tbody>
        </table>
      </body>
      </html>
    `),g.document.close(),setTimeout(()=>{g.print()},250)},p=()=>{const g=i.find(E=>E.currencyID===a)?.currencyName||"";let j=`Affiliate Business Report
`;j+=`Currency: ${g}

`,j+=`#,Customer Name,Customer Email,Customer Phone,Pending Amount
`,o.forEach((E,L)=>{j+=`${L+1},"${E.customer_name}","${E.customer_email||""}","${E.customer_phone||""}",${E.total}
`});const b=o.reduce((E,L)=>E+L.total,0);j+=`Total,,,,${b}
`;const N=new Blob([j],{type:"text/csv;charset=utf-8;"}),v=document.createElement("a"),S=URL.createObjectURL(N);v.setAttribute("href",S),v.setAttribute("download",`Affiliate_Business_Report_${g}_${new Date().toISOString().split("T")[0]}.csv`),v.style.visibility="hidden",document.body.appendChild(v),v.click(),document.body.removeChild(v)},y=o.reduce((g,j)=>g+j.total,0);return e.jsxs("div",{className:"affiliate-ledger-page",children:[e.jsx("div",{className:"page-header",children:e.jsxs("h1",{children:[e.jsx("i",{className:"fa fa-handshake me-2"}),"Affiliate Business Payments & Ledger"]})}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("ul",{className:"nav nav-tabs card-header-tabs",children:e.jsx("li",{className:"nav-item",children:e.jsxs("a",{className:"nav-link active",children:[e.jsx("i",{className:"fa fa-money text-danger"})," All"]})})})}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"filter-row",children:[e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{htmlFor:"customer_id",className:"form-label",children:"Customer"}),e.jsx(It,{options:[{value:"",label:"--Select Customer--"},...r.map(g=>({value:String(g.customer_id),label:g.customer_name}))],value:s,onChange:c,placeholder:"Select Customer"})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{htmlFor:"currency_type",className:"form-label",children:"Currency"}),e.jsx(It,{options:i.map(g=>({value:String(g.currencyID),label:g.currencyName})),value:a?String(a):"",onChange:u,placeholder:"Select Currency"})]}),e.jsxs("div",{className:"filter-actions",children:[e.jsxs("button",{type:"button",className:"btn btn-danger btn-sm rounded-pill",onClick:m,children:[e.jsx("i",{className:"fa fa-print me-1"})," Print"]}),e.jsxs("button",{type:"button",className:"btn btn-customBlue btn-sm rounded-pill",onClick:p,children:[e.jsx("i",{className:"fa fa-file-excel-o me-1"})," Excel"]})]})]}),e.jsx("div",{className:"table-responsive mt-4",children:e.jsx("div",{id:"printThisArea",children:e.jsxs("table",{className:"table table-striped table-hover text-center",id:"mainTable",children:[e.jsx("thead",{className:"thead text-white",children:e.jsxs("tr",{children:[e.jsx("th",{children:"#"}),e.jsx("th",{children:"Customer Name"}),e.jsx("th",{children:"Customer Email"}),e.jsx("th",{children:"Customer Phone"}),e.jsx("th",{children:"Pending Amount"}),e.jsx("th",{"data-exclude":"true",id:"actionArea",children:"Action"})]})}),e.jsx("tbody",{children:o.length===0?e.jsx("tr",{children:e.jsxs("td",{colSpan:6,className:"text-center",style:{padding:"50px 20px",color:"#64748b"},children:[e.jsx("i",{className:"fa fa-inbox",style:{fontSize:"48px",marginBottom:"15px",display:"block",opacity:.5}}),e.jsx("div",{style:{fontSize:"16px",fontWeight:500},children:"No affiliate customers found"}),e.jsx("div",{style:{fontSize:"14px",marginTop:"8px",opacity:.7},children:"Select a customer and currency to view affiliate business"})]})}):e.jsxs(e.Fragment,{children:[o.map((g,j)=>e.jsxs("tr",{children:[e.jsx("td",{children:j+1}),e.jsx("td",{className:"text-capitalize",children:g.customer_name}),e.jsx("td",{children:g.customer_email||"-"}),e.jsx("td",{children:g.customer_phone||"-"}),e.jsx("td",{children:h(g.total)}),e.jsx("td",{"data-exclude":"true",className:"action-cell",children:e.jsxs("a",{href:`/ledger/affiliate/view?id=${g.main_customer}&curID=${a}&affID=${g.affliate_supp_id}`,className:"text-primary",children:[e.jsx("i",{className:"fa fa-eye"})," View Ledger"]})})]},g.main_customer)),e.jsxs("tr",{children:[e.jsx("td",{}),e.jsx("td",{}),e.jsx("td",{}),e.jsx("td",{}),e.jsx("td",{children:e.jsx("strong",{children:h(y)})}),e.jsx("td",{"data-exclude":"true"})]})]})})]})})})]})]})]})}function Gq(){const[s]=rc(),t=Vn(),a=Number(s.get("id")),n=Number(s.get("curID")),r=Number(s.get("affID")),i=A.useRef(null),{data:o}=Rt({queryKey:["affiliate-customer-info",a],queryFn:async()=>{const E=await Ne.post("/affiliate/affiliateLedgerView.php",{action:"getCustomerInfo",customer_id:a});if(E.data.success&&E.data.data)return E.data.data;throw new Error(E.data.message||"Customer not found")},enabled:!!a}),{data:c}=Rt({queryKey:["affiliate-currency-name",n],queryFn:async()=>{const E=await Ne.post("/affiliate/affiliateLedgerView.php",{action:"getCurrencyName",currency_id:n});if(E.data.success&&E.data.data)return E.data.data;throw new Error(E.data.message||"Currency not found")},enabled:!!n}),{data:u=[],isLoading:h}=Rt({queryKey:["affiliate-ledger-view",a,n,r],queryFn:async()=>{const E=await Ne.post("/affiliate/affiliateLedgerView.php",{action:"getLedger",customer_id:a,currency_id:n,affiliate_id:r});return E.data.success?E.data.data:[]},enabled:!!a&&!!n&&!!r}),m=u.map((E,L)=>{parseFloat(String(E.Debit)),parseFloat(String(E.Credit));let z=0;for(let V=0;V<=L;V++){const te=parseFloat(String(u[V].Debit))||0,q=parseFloat(String(u[V].Credit))||0;z+=te-q}return{...E,runningBalance:z}}),p=u.reduce((E,L)=>{const z=parseFloat(String(L.Debit))||0,V=parseFloat(String(L.Credit))||0,te=L.TRANSACTION_Type==="Payment",q=L.TRANSACTION_Type==="Refund";return L.customer_name==="SN Trips"?te&&z>0?E.totalBusinessPaid+=z:q&&z>0?E.totalBusinessRefund+=z:!te&&V>0&&(E.totalBusinessCharges+=V):te&&V>0?E.totalCustomerPaid+=V:q&&V>0?E.totalCustomerRefund+=V:z>0&&(E.totalCustomerCharges+=z),E},{totalCustomerCharges:0,totalCustomerPaid:0,totalCustomerRefund:0,totalBusinessCharges:0,totalBusinessPaid:0,totalBusinessRefund:0}),y=p.totalCustomerCharges-p.totalCustomerPaid-p.totalCustomerRefund,g=p.totalBusinessCharges-p.totalBusinessPaid-p.totalBusinessRefund,j=y-g,b=E=>new Intl.NumberFormat("en-US").format(E),N=()=>{const E=window.open("","_blank");if(!E){alert("Please allow popups to print");return}const L=i.current?.innerHTML||"";E.document.write(`
      <!DOCTYPE html>
      <html>
        <head>
          <title>Affiliate Business Ledger</title>
          
      <style>
        @page {
          size: A4;
          margin: 12mm;
        }
        body {
          font-family: Arial, sans-serif;
          margin: 0;
          padding: 15px;
          font-size: 11px;
        }
        .ledger-header {
          display: flex;
          justify-content: space-between;
          margin-bottom: 20px;
        }
        .company-info { flex: 1; }
        .logo-section {
          display: inline-flex;
          align-items: center;
          margin-bottom: 12px;
          background: #000;
          padding: 10px 15px;
          border-radius: 5px;
        }
        .company-logo {
          max-height: 80px;
          max-width: 140px;
          object-fit: contain;
          display: block;
        }
        .company-details p {
          font-size: 10px;
          margin-bottom: 3px;
          line-height: 1.4;
        }
        .company-title {
          font-size: 13px;
          font-weight: bold;
          margin-bottom: 4px;
        }
        .customer-info-box {
          width: 280px;
          margin-left: 18px;
        }
        .section-title {
          font-size: 11px;
          color: #dc2626;
          font-weight: bold;
          margin-left: 20px;
          margin-top: 12px;
          margin-bottom: 4px;
        }
        .divider {
          border: none;
          width: 200px;
          border-bottom: 1px solid black;
          margin-left: 20px;
          margin-bottom: 6px;
        }
        .customer-info-box p {
          font-size: 10px;
          margin-bottom: 3px;
          margin-left: 20px;
          line-height: 1.5;
        }
        .date-text {
          font-size: 10px;
          margin-left: 20px;
          font-weight: bold;
        }
        .ledger-table {
          width: 100%;
          border-collapse: collapse;
          font-size: 10px;
          margin: 15px 0;
        }
        .ledger-table thead {
          background: #dc2626;
          color: #fff;
        }
        .ledger-table th {
          padding: 6px 5px;
          text-align: center;
          border: 1px solid #ddd;
          font-size: 10px;
          font-weight: 600;
        }
        .ledger-table tbody td {
          padding: 5px 4px;
          border: 1px solid #ddd;
          font-size: 10px;
        }
        .ledger-table tbody tr:nth-of-type(odd) {
          background-color: rgba(0, 0, 0, 0.05);
        }
        .ledger-table tbody tr.payment-row td {
          background-color: #6b7280;
          color: white;
        }
        .totals-section {
          margin-top: 15px;
          padding-left: 33.33%;
        }
        .total-row {
          display: flex;
          justify-content: space-between;
          margin-bottom: 4px;
          padding: 3px 0;
        }
        .total-label {
          font-weight: bold;
          font-size: 11px;
          color: #000;
        }
        .total-value {
          font-size: 11px;
          color: #000;
          font-weight: 600;
        }
        .total-row.outstanding .total-label,
        .total-row.outstanding .total-value {
          font-size: 13px;
          font-weight: 700;
        }
        .totals-section hr {
          border: none;
          border-top: 1px solid #000;
          margin: 4px 0;
        }
        .text-capitalize { text-transform: capitalize; }
        .text-center { text-align: center; }
      </style>
    
        </head>
        <body>
          ${L}
        </body>
      </html>
    `),E.document.close(),E.onload=()=>{E.print()}},v=()=>{t("/ledger/affiliate")};if(!a||!n||!r)return e.jsx("div",{className:"affiliate-ledger-view-page",children:e.jsx("div",{className:"panel",children:e.jsx("div",{className:"panel-body",children:e.jsx("div",{className:"alert alert-danger",children:"Invalid customer, currency, or affiliate ID"})})})});if(h)return e.jsx("div",{className:"affiliate-ledger-view-page",children:e.jsx("div",{className:"panel",children:e.jsx("div",{className:"panel-body text-center",children:e.jsx("div",{className:"spinner-border text-primary",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Loading..."})})})})});const S=new Date().toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"});return e.jsxs("div",{className:"affiliate-ledger-view-page",children:[e.jsxs("div",{className:"print-actions",children:[e.jsxs("button",{className:"btn btn-secondary",onClick:v,children:[e.jsx("i",{className:"fa fa-arrow-left me-2"}),"Back to Affiliate Ledger"]}),e.jsxs("button",{className:"btn btn-danger",onClick:N,children:[e.jsx("i",{className:"fa fa-print me-2"}),"Print Ledger"]})]}),e.jsxs("div",{className:"print-area",ref:i,children:[e.jsxs("div",{className:"ledger-header",children:[e.jsxs("div",{className:"company-info",children:[e.jsx("div",{className:"logo-section",children:e.jsx("img",{src:"/assets/logo-white.png",alt:"Company Logo",className:"company-logo"})}),e.jsxs("div",{className:"company-details",children:[e.jsx("p",{className:"company-title",children:e.jsx("b",{children:"Selab Nadiry Travel & Tourism"})}),e.jsx("p",{children:"Address: Frij Murar Shop# 15, Deira, Dubai"}),e.jsx("p",{children:"Contact: +971 4 298 4564, +971 58 514 0764"})]})]}),e.jsxs("div",{className:"customer-info-box",children:[e.jsx("h3",{className:"section-title",children:"Affiliate Information"}),e.jsx("hr",{className:"divider"}),e.jsxs("p",{children:["Name: ",e.jsx("span",{className:"text-capitalize",children:o?.customer_name||"N/A"})]}),e.jsxs("p",{children:["Email: ",e.jsx("span",{children:o?.customer_email||"Nill"})]}),e.jsxs("p",{children:["Phone: ",e.jsx("span",{children:o?.customer_phone||"Nill"})]}),e.jsxs("p",{children:["Currency: ",e.jsx("span",{children:c?.currencyName||"N/A"})]}),e.jsx("h3",{className:"section-title",children:"Date"}),e.jsx("hr",{className:"divider"}),e.jsx("h3",{className:"date-text",children:S})]})]}),e.jsx("div",{className:"table-container",children:e.jsxs("table",{className:"ledger-table table-striped table-hover table-bordered",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"S#"}),e.jsx("th",{children:"Transaction Type"}),e.jsx("th",{children:"Customer"}),e.jsx("th",{children:"Passenger"}),e.jsx("th",{children:"Date"}),e.jsx("th",{children:"Identification"}),e.jsx("th",{children:"Origin"}),e.jsx("th",{children:"Destination"}),e.jsx("th",{children:"Debit"}),e.jsx("th",{children:"Credit"}),e.jsx("th",{children:"Running Balance"})]})}),e.jsx("tbody",{children:m.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:11,className:"text-center",children:"No transactions found"})}):m.map((E,L)=>{const z=E.TRANSACTION_Type==="Payment";return E.customer_name,e.jsxs("tr",{className:z?"payment-row":"",children:[e.jsx("td",{className:"text-center",children:L+1}),e.jsx("td",{className:"text-capitalize",children:E.TRANSACTION_Type}),e.jsx("td",{className:"text-capitalize",children:E.customer_name||""}),e.jsx("td",{className:"text-capitalize",children:E.Passenger_Name||""}),e.jsx("td",{className:"text-center",children:E.date||""}),e.jsx("td",{children:E.Identification||""}),e.jsx("td",{className:"text-center",children:E.Orgin||""}),e.jsx("td",{className:"text-center",children:E.Destination||""}),e.jsx("td",{className:"text-center",children:b(E.Debit||0)}),e.jsx("td",{className:"text-center",children:b(E.Credit||0)}),e.jsx("td",{className:"text-center",children:b(E.runningBalance||0)})]},L)})})]})}),e.jsxs("div",{className:"totals-section",children:[e.jsxs("div",{className:"total-row",children:[e.jsx("p",{className:"total-label",children:"Total Affiliate Charges:"}),e.jsxs("p",{className:"total-value",children:[b(p.totalCustomerCharges)," ",c?.currencyName||""]})]}),e.jsxs("div",{className:"total-row",children:[e.jsx("p",{className:"total-label",children:"Total Affiliate Paid:"}),e.jsxs("p",{className:"total-value",children:[b(p.totalCustomerPaid)," ",c?.currencyName||""]})]}),e.jsxs("div",{className:"total-row",children:[e.jsx("p",{className:"total-label",children:"Total Affiliate Refund:"}),e.jsxs("p",{className:"total-value",children:[b(p.totalCustomerRefund)," ",c?.currencyName||""]})]}),e.jsx("hr",{}),e.jsxs("div",{className:"total-row",children:[e.jsx("p",{className:"total-label",children:"Affiliate SubTotal:"}),e.jsxs("p",{className:"total-value",children:[b(y)," ",c?.currencyName||""]})]}),e.jsx("hr",{}),e.jsxs("div",{className:"total-row",children:[e.jsx("p",{className:"total-label",children:"Total Business Charges:"}),e.jsxs("p",{className:"total-value",children:[b(p.totalBusinessCharges)," ",c?.currencyName||""]})]}),e.jsxs("div",{className:"total-row",children:[e.jsx("p",{className:"total-label",children:"Total Business Paid:"}),e.jsxs("p",{className:"total-value",children:[b(p.totalBusinessPaid)," ",c?.currencyName||""]})]}),e.jsxs("div",{className:"total-row",children:[e.jsx("p",{className:"total-label",children:"Total Business Refund:"}),e.jsxs("p",{className:"total-value",children:[b(p.totalBusinessRefund)," ",c?.currencyName||""]})]}),e.jsx("hr",{}),e.jsxs("div",{className:"total-row",children:[e.jsx("p",{className:"total-label",children:"Business SubTotal:"}),e.jsxs("p",{className:"total-value",children:[b(g)," ",c?.currencyName||""]})]}),e.jsx("hr",{}),e.jsxs("div",{className:"total-row outstanding",children:[e.jsx("p",{className:"total-label",children:e.jsx("b",{children:"Outstanding Balance:"})}),e.jsx("p",{className:"total-value",children:e.jsxs("b",{children:[b(j)," ",c?.currencyName||""]})})]}),e.jsx("hr",{})]})]})]})}const ju={async getStaff(){const s=await Ne.post("/staff/staff.php",{action:"getStaff"});return s.data.success?s.data.data:[]},async getStaffById(s){const t=await Ne.post("/staff/staff.php",{action:"getStaffById",staff_id:s});if(t.data.success)return t.data.data;throw new Error(t.data.message||"Failed to fetch staff")},async addStaff(s){const t=new FormData;t.append("action","addStaff"),t.append("staff_name",s.staff_name),t.append("staff_phone",s.staff_phone),t.append("staff_email",s.staff_email),t.append("staff_address",s.staff_address),t.append("branch_id",String(s.branch_id)),t.append("role_id",String(s.role_id)),t.append("salary",String(s.salary)),t.append("currency_id",String(s.currency_id)),t.append("status",String(s.status)),t.append("password",s.password),s.photo&&t.append("photo",s.photo);const a=await Ne.post("/staff/staff.php",t,{headers:{"Content-Type":"multipart/form-data"}});if(!a.data.success)throw new Error(a.data.message||"Failed to add staff")},async updateStaff(s){const t=new FormData;t.append("action","updateStaff"),t.append("staff_id",String(s.staff_id)),t.append("staff_name",s.staff_name),t.append("staff_phone",s.staff_phone),t.append("staff_email",s.staff_email),t.append("staff_address",s.staff_address),t.append("branch_id",String(s.branch_id)),t.append("role_id",String(s.role_id)),t.append("salary",String(s.salary)),t.append("currency_id",String(s.currency_id)),t.append("status",String(s.status)),s.password&&t.append("password",s.password),s.photo&&t.append("photo",s.photo);const a=await Ne.post("/staff/staff.php",t,{headers:{"Content-Type":"multipart/form-data"}});if(!a.data.success)throw new Error(a.data.message||"Failed to update staff")},async deleteStaff(s){const t=await Ne.post("/staff/staff.php",{action:"deleteStaff",staff_id:s});if(!t.data.success)throw new Error(t.data.message||"Failed to delete staff")},async getBranches(){const s=await Ne.post("/staff/staff.php",{action:"getBranches"});return s.data.success?s.data.data:[]},async getRoles(){const s=await Ne.post("/staff/staff.php",{action:"getRoles"});return s.data.success?s.data.data:[]},async getCurrencies(){const s=await Ne.post("/staff/staff.php",{action:"getCurrencies"});return s.data.success?s.data.data:[]}};function Qq(){const s=Wa(),[t,a]=A.useState(!1),[n,r]=A.useState(!1),[i,o]=A.useState(null),[c,u]=A.useState(null),[h,m]=A.useState(null),[p,y]=A.useState(Date.now()),[g,j]=A.useState({staff_name:"",staff_phone:"",staff_email:"",staff_address:"",branch_id:void 0,role_id:void 0,salary:0,currency_id:void 0,status:1,password:"",photo:void 0}),[b,N]=A.useState({staff_id:0,staff_name:"",staff_phone:"",staff_email:"",staff_address:"",branch_id:void 0,role_id:void 0,salary:0,currency_id:void 0,status:1,password:"",photo:void 0}),{data:v=[],isLoading:S}=Rt({queryKey:["staff"],queryFn:()=>ju.getStaff(),staleTime:0,refetchOnWindowFocus:!0}),{data:E=[]}=Rt({queryKey:["branches"],queryFn:()=>ju.getBranches(),staleTime:3e5}),{data:L=[]}=Rt({queryKey:["roles"],queryFn:()=>ju.getRoles(),staleTime:3e5}),{data:z=[]}=Rt({queryKey:["currencies-staff"],queryFn:()=>ju.getCurrencies(),staleTime:3e5});A.useEffect(()=>{z.length>0&&j(Q=>Q.currency_id?Q:{...Q,currency_id:z[0].currencyID})},[z.length]);const V=wt({mutationFn:Q=>ju.addStaff(Q),onSuccess:()=>{W.fire({icon:"success",title:"Success!",text:"Staff added successfully",timer:1500,showConfirmButton:!1}),a(!1),B(),y(Date.now()),s.invalidateQueries({queryKey:["staff"]}),s.refetchQueries({queryKey:["staff"]})},onError:Q=>{W.fire({icon:"error",title:"Error!",text:Q.message||"Failed to add staff"})}}),te=wt({mutationFn:Q=>ju.updateStaff(Q),onSuccess:()=>{W.fire({icon:"success",title:"Success!",text:"Staff updated successfully",timer:1500,showConfirmButton:!1}),r(!1),J(),y(Date.now()),s.invalidateQueries({queryKey:["staff"]}),s.refetchQueries({queryKey:["staff"]})},onError:Q=>{W.fire({icon:"error",title:"Error!",text:Q.message||"Failed to update staff"})}}),q=wt({mutationFn:Q=>ju.deleteStaff(Q),onSuccess:()=>{W.fire({icon:"success",title:"Success!",text:"Staff deleted successfully",timer:1500,showConfirmButton:!1}),s.invalidateQueries({queryKey:["staff"]})},onError:Q=>{W.fire({icon:"error",title:"Error!",text:Q.message||"Failed to delete staff"})}}),B=()=>{j({staff_name:"",staff_phone:"",staff_email:"",staff_address:"",branch_id:void 0,role_id:void 0,salary:0,currency_id:z.length>0?z[0].currencyID:void 0,status:1,password:"",photo:void 0}),u(null)},J=()=>{N({staff_id:0,staff_name:"",staff_phone:"",staff_email:"",staff_address:"",branch_id:void 0,role_id:void 0,salary:0,currency_id:void 0,status:1,password:"",photo:void 0}),m(null),o(null)},P=Q=>{const Y=Q.target.files?.[0];if(Y){if(Y.size>2097152){W.fire({icon:"error",title:"File Too Large!",text:"File size must be less than 2 MB"}),Q.target.value="";return}j({...g,photo:Y}),u(URL.createObjectURL(Y))}},K=Q=>{const Y=Q.target.files?.[0];if(Y){if(Y.size>2097152){W.fire({icon:"error",title:"File Too Large!",text:"File size must be less than 2 MB"}),Q.target.value="";return}N({...b,photo:Y}),m(URL.createObjectURL(Y))}},H=Q=>{if(Q.preventDefault(),!g.staff_name||g.staff_name.trim()===""){W.fire("Validation Error!","Staff name is required","error");return}if(!g.staff_phone||g.staff_phone.trim()===""){W.fire("Validation Error!","Phone is required","error");return}if(!g.staff_email||g.staff_email.trim()===""){W.fire("Validation Error!","Email is required","error");return}if(!g.staff_address||g.staff_address.trim()===""){W.fire("Validation Error!","Address is required","error");return}if(!g.branch_id||g.branch_id===-1){W.fire("Validation Error!","Branch is required","error");return}if(!g.role_id||g.role_id===-1){W.fire("Validation Error!","Role is required","error");return}if(!g.salary||g.salary<=0){W.fire("Validation Error!","Salary is required","error");return}if(!g.currency_id){W.fire("Validation Error!","Currency is required","error");return}if(!g.password||g.password.trim()===""){W.fire("Validation Error!","Password is required","error");return}const Y={staff_name:g.staff_name,staff_phone:g.staff_phone,staff_email:g.staff_email,staff_address:g.staff_address,branch_id:g.branch_id,role_id:g.role_id,salary:g.salary,currency_id:g.currency_id,status:g.status,password:g.password,photo:g.photo};V.mutate(Y)},se=Q=>{if(Q.preventDefault(),!b.staff_name||String(b.staff_name).trim()===""){W.fire("Validation Error!","Staff name is required","error");return}if(!b.staff_phone||String(b.staff_phone).trim()===""){W.fire("Validation Error!","Phone is required","error");return}if(!b.staff_email||String(b.staff_email).trim()===""){W.fire("Validation Error!","Email is required","error");return}if(!b.staff_address||String(b.staff_address).trim()===""){W.fire("Validation Error!","Address is required","error");return}if(!b.branch_id||b.branch_id===-1){W.fire("Validation Error!","Branch is required","error");return}if(!b.role_id||b.role_id===-1){W.fire("Validation Error!","Role is required","error");return}if(!b.salary||b.salary<=0){W.fire("Validation Error!","Salary is required","error");return}if(!b.currency_id){W.fire("Validation Error!","Currency is required","error");return}const Y={staff_id:b.staff_id,staff_name:String(b.staff_name),staff_phone:String(b.staff_phone),staff_email:String(b.staff_email),staff_address:String(b.staff_address),branch_id:b.branch_id,role_id:b.role_id,salary:b.salary,currency_id:b.currency_id,status:b.status,password:b.password?String(b.password):void 0,photo:b.photo};te.mutate(Y)},X=Q=>{o(Q),N({staff_id:Q.staff_id,staff_name:Q.staff_name,staff_phone:Q.staff_phone,staff_email:Q.staff_email,staff_address:Q.staff_address,branch_id:Q.Branch_ID,role_id:Q.role_id,salary:Q.salary,currency_id:Q.currencyID,status:Q.status,password:"",photo:void 0}),m(Q.staff_pic?`${Ct.baseUrl}/${Q.staff_pic}`:null),r(!0)},R=(Q,Y)=>{W.fire({title:"Delete!",text:`Do you want to delete ${Y}?`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#ef4444",cancelButtonColor:"#6b7280",confirmButtonText:"Yes, delete it!"}).then($=>{$.isConfirmed&&q.mutate(Q)})};return S?e.jsx("div",{className:"staff-management-page",children:e.jsx("div",{className:"text-center p-5",children:e.jsx("div",{className:"spinner-border text-primary",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Loading..."})})})}):e.jsxs("div",{className:"staff-management-page",children:[e.jsx("div",{className:"page-header",children:e.jsxs("h2",{children:[e.jsx("i",{className:"fa fa-user me-2"}),e.jsx("i",{children:"Staff Report"})]})}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("div",{className:"d-flex justify-content-end",children:e.jsxs("button",{type:"button",className:"btn btn-primary",onClick:()=>a(!0),children:[e.jsx("i",{className:"fa fa-plus me-2"}),"Add Employee"]})})}),e.jsx("div",{className:"card-body",children:e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-striped table-hover",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"S#"}),e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Phone"}),e.jsx("th",{children:"Email"}),e.jsx("th",{children:"Address"}),e.jsx("th",{children:"Salary"}),e.jsx("th",{children:"Role"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Branch"}),e.jsx("th",{children:"Photo"}),e.jsx("th",{children:"Action"})]})}),e.jsx("tbody",{children:v.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:11,className:"text-center",children:"No staff found"})}):v.map((Q,Y)=>e.jsxs("tr",{children:[e.jsx("td",{children:Y+1}),e.jsx("td",{className:"text-capitalize",children:Q.staff_name}),e.jsx("td",{children:Q.staff_phone}),e.jsx("td",{children:Q.staff_email}),e.jsx("td",{children:Q.staff_address}),e.jsxs("td",{children:[Q.salary," ",Q.currencyName]}),e.jsx("td",{children:Q.role_name}),e.jsx("td",{children:e.jsx("span",{className:`badge ${Q.status===1?"badge-success":"badge-secondary"}`,children:Q.status_text})}),e.jsx("td",{children:Q.Branch_Name}),e.jsx("td",{children:Q.staff_pic?e.jsx("img",{src:`${Ct.baseUrl}/${Q.staff_pic}?v=${p}`,alt:"Staff",className:"staff-photo",onError:$=>{const me=$.target;me.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNzAiIGhlaWdodD0iNzAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHJlY3Qgd2lkdGg9IjcwIiBoZWlnaHQ9IjcwIiBmaWxsPSIjZjhmYWZjIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtc2l6ZT0iMTAiIGZpbGw9IiM5NGEzYjgiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIj5ObyBJbWFnZTwvdGV4dD48L3N2Zz4=",me.style.display="block"}},`staff-photo-${Q.staff_id}-${p}`):e.jsx("span",{className:"text-muted",style:{fontSize:"12px"},children:"No Image"})}),e.jsxs("td",{className:"action-cell",children:[e.jsx("button",{className:"btn btn-sm btn-outline-dark me-2",onClick:()=>X(Q),children:e.jsx("i",{className:"fa fa-edit"})}),e.jsx("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>R(Q.staff_id,Q.staff_name),children:e.jsx("i",{className:"fa fa-trash"})})]})]},Q.staff_id))})]})})})]}),t&&e.jsx("div",{className:"modal-overlay",onClick:()=>{a(!1),B()},children:e.jsxs("div",{className:"modal-content",onClick:Q=>Q.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",children:e.jsx("i",{children:"Add Staff"})}),e.jsx("button",{className:"btn-close",onClick:()=>{a(!1),B()},children:""})]}),e.jsx("div",{className:"modal-body",children:e.jsxs("form",{onSubmit:H,children:[e.jsxs("div",{className:"form-group row",children:[e.jsx("label",{className:"col-form-label",children:"Employee Name:"}),e.jsx("div",{className:"col-sm-9",children:e.jsx("input",{type:"text",className:"form-control",value:g.staff_name,onChange:Q=>j({...g,staff_name:Q.target.value}),placeholder:"Employee Name",required:!0})})]}),e.jsxs("div",{className:"form-group row",children:[e.jsx("label",{className:"col-form-label",children:"Phone:"}),e.jsx("div",{className:"col-sm-9",children:e.jsx("input",{type:"text",className:"form-control",value:g.staff_phone,onChange:Q=>j({...g,staff_phone:Q.target.value}),placeholder:"Employee Phone",required:!0})})]}),e.jsxs("div",{className:"form-group row",children:[e.jsx("label",{className:"col-form-label",children:"Email:"}),e.jsx("div",{className:"col-sm-9",children:e.jsx("input",{type:"email",className:"form-control",value:g.staff_email,onChange:Q=>j({...g,staff_email:Q.target.value}),placeholder:"Employee Email",required:!0})})]}),e.jsxs("div",{className:"form-group row",children:[e.jsx("label",{className:"col-form-label",children:"Address:"}),e.jsx("div",{className:"col-sm-9",children:e.jsx("input",{type:"text",className:"form-control",value:g.staff_address,onChange:Q=>j({...g,staff_address:Q.target.value}),placeholder:"Employee Address",required:!0})})]}),e.jsxs("div",{className:"form-group row",children:[e.jsx("label",{className:"col-form-label",children:"Branch:"}),e.jsx("div",{className:"col-sm-9",children:e.jsx(It,{options:[{value:"",label:"--Select Branch--"},...E.map(Q=>({value:String(Q.Branch_ID),label:Q.Branch_Name}))],value:g.branch_id?String(g.branch_id):"",onChange:Q=>{const Y=Q&&Q!=="-1"?Number(Q):void 0;j({...g,branch_id:Y})},placeholder:"Select Branch"})})]}),e.jsxs("div",{className:"form-group row salary-row",children:[e.jsx("label",{className:"col-form-label",children:"Salary:"}),e.jsx("div",{className:"col-lg-6",children:e.jsx("input",{type:"number",className:"form-control",value:g.salary||"",onChange:Q=>j({...g,salary:Number(Q.target.value)}),placeholder:"Employee Salary",required:!0,min:"0",step:"0.01"})}),e.jsx("div",{className:"col-lg-3",children:e.jsx(It,{options:z.map(Q=>({value:String(Q.currencyID),label:Q.currencyName})),value:g.currency_id?String(g.currency_id):"",onChange:Q=>{const Y=Q?Number(Q):void 0;j({...g,currency_id:Y})},placeholder:"Currency"})})]}),e.jsxs("div",{className:"form-group row",children:[e.jsx("label",{className:"col-form-label",children:"Role:"}),e.jsx("div",{className:"col-sm-9",children:e.jsx(It,{options:[{value:"",label:"--Select Role--"},...L.map(Q=>({value:String(Q.role_id),label:Q.role_name}))],value:g.role_id?String(g.role_id):"",onChange:Q=>{const Y=Q&&Q!=="-1"?Number(Q):void 0;j({...g,role_id:Y})},placeholder:"Select Role"})})]}),e.jsxs("div",{className:"form-group row",children:[e.jsx("label",{className:"col-form-label",children:"Status:"}),e.jsx("div",{className:"col-sm-9",children:e.jsxs("select",{className:"form-control",value:g.status,onChange:Q=>j({...g,status:Number(Q.target.value)}),children:[e.jsx("option",{value:"1",children:"Active"}),e.jsx("option",{value:"2",children:"Deactive"})]})})]}),e.jsxs("div",{className:"form-group row",children:[e.jsx("label",{className:"col-form-label",children:"Password:"}),e.jsx("div",{className:"col-sm-9",children:e.jsx("input",{type:"password",className:"form-control",value:g.password,onChange:Q=>j({...g,password:Q.target.value}),placeholder:"Employee Password",required:!0,autoComplete:"new-password"})})]}),e.jsxs("div",{className:"form-group row",children:[e.jsx("label",{className:"col-form-label",children:"Photo:"}),e.jsxs("div",{className:"col-sm-9",children:[e.jsx("input",{type:"file",className:"form-control",onChange:P,accept:"image/*"}),c&&e.jsx("img",{src:c,alt:"Preview",className:"photo-preview mt-2"})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>{a(!1),B()},children:"Close"}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:V.isPending,children:V.isPending?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fa fa-spinner fa-spin me-1"})," Saving..."]}):"Save"})]})]})})]})}),n&&e.jsx("div",{className:"modal-overlay",onClick:()=>{r(!1),J()},children:e.jsxs("div",{className:"modal-content",onClick:Q=>Q.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",children:e.jsx("i",{children:"Update Staff"})}),e.jsx("button",{className:"btn-close",onClick:()=>{r(!1),J()},children:""})]}),e.jsx("div",{className:"modal-body",children:e.jsxs("form",{onSubmit:se,children:[e.jsxs("div",{className:"form-group row",children:[e.jsx("label",{className:"col-form-label",children:"Employee Name:"}),e.jsx("div",{className:"col-sm-9",children:e.jsx("input",{type:"text",className:"form-control",value:b.staff_name,onChange:Q=>N({...b,staff_name:Q.target.value}),placeholder:"Employee Name",required:!0})})]}),e.jsxs("div",{className:"form-group row",children:[e.jsx("label",{className:"col-form-label",children:"Phone:"}),e.jsx("div",{className:"col-sm-9",children:e.jsx("input",{type:"text",className:"form-control",value:b.staff_phone,onChange:Q=>N({...b,staff_phone:Q.target.value}),placeholder:"Employee Phone",required:!0})})]}),e.jsxs("div",{className:"form-group row",children:[e.jsx("label",{className:"col-form-label",children:"Email:"}),e.jsx("div",{className:"col-sm-9",children:e.jsx("input",{type:"email",className:"form-control",value:b.staff_email,onChange:Q=>N({...b,staff_email:Q.target.value}),placeholder:"Employee Email",required:!0})})]}),e.jsxs("div",{className:"form-group row",children:[e.jsx("label",{className:"col-form-label",children:"Address:"}),e.jsx("div",{className:"col-sm-9",children:e.jsx("input",{type:"text",className:"form-control",value:b.staff_address,onChange:Q=>N({...b,staff_address:Q.target.value}),placeholder:"Employee Address",required:!0})})]}),e.jsxs("div",{className:"form-group row",children:[e.jsx("label",{className:"col-form-label",children:"Branch:"}),e.jsx("div",{className:"col-sm-9",children:e.jsx(It,{options:[{value:"",label:"--Select Branch--"},...E.map(Q=>({value:String(Q.Branch_ID),label:Q.Branch_Name}))],value:b.branch_id?String(b.branch_id):"",onChange:Q=>N({...b,branch_id:Q?Number(Q):void 0}),placeholder:"Select Branch"})})]}),e.jsxs("div",{className:"form-group row salary-row",children:[e.jsx("label",{className:"col-form-label",children:"Salary:"}),e.jsx("div",{className:"col-lg-6",children:e.jsx("input",{type:"number",className:"form-control",value:b.salary||"",onChange:Q=>N({...b,salary:Number(Q.target.value)}),placeholder:"Employee Salary",required:!0,min:"0",step:"0.01"})}),e.jsx("div",{className:"col-lg-3",children:e.jsx(It,{options:z.map(Q=>({value:String(Q.currencyID),label:Q.currencyName})),value:b.currency_id?String(b.currency_id):"",onChange:Q=>N({...b,currency_id:Q?Number(Q):void 0}),placeholder:"Currency"})})]}),e.jsxs("div",{className:"form-group row",children:[e.jsx("label",{className:"col-form-label",children:"Role:"}),e.jsx("div",{className:"col-sm-9",children:e.jsx(It,{options:[{value:"",label:"--Select Role--"},...L.map(Q=>({value:String(Q.role_id),label:Q.role_name}))],value:b.role_id?String(b.role_id):"",onChange:Q=>N({...b,role_id:Q?Number(Q):void 0}),placeholder:"Select Role"})})]}),e.jsxs("div",{className:"form-group row",children:[e.jsx("label",{className:"col-form-label",children:"Status:"}),e.jsx("div",{className:"col-sm-9",children:e.jsxs("select",{className:"form-control",value:b.status,onChange:Q=>N({...b,status:Number(Q.target.value)}),children:[e.jsx("option",{value:"1",children:"Active"}),e.jsx("option",{value:"2",children:"Deactive"})]})})]}),e.jsxs("div",{className:"form-group row",children:[e.jsx("label",{className:"col-form-label",children:"Password:"}),e.jsx("div",{className:"col-sm-9",children:e.jsx("input",{type:"password",className:"form-control",value:b.password,onChange:Q=>N({...b,password:Q.target.value}),placeholder:"Leave blank to keep current password",autoComplete:"new-password"})})]}),e.jsxs("div",{className:"form-group row",children:[e.jsx("label",{className:"col-form-label",children:"Photo:"}),e.jsxs("div",{className:"col-sm-9",children:[e.jsx("input",{type:"file",className:"form-control",onChange:K,accept:"image/*"}),h&&e.jsx("img",{src:h,alt:"Preview",className:"photo-preview mt-2"})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>{r(!1),J()},children:"Close"}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:te.isPending,children:te.isPending?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fa fa-spinner fa-spin me-1"})," Saving..."]}):"Save"})]})]})})]})})]})}function Jq(){const s=Wa(),[t,a]=A.useState(""),{data:n=[],isLoading:r}=Rt({queryKey:["roles-management"],queryFn:async()=>{const h=await Ne.post("/role/roles.php",{action:"getRoles"});return h.data.success?h.data.data:[]},staleTime:3e4}),i=wt({mutationFn:async h=>{const m=await Ne.post("/role/roles.php",{action:"addRole",role_name:h});if(!m.data.success)throw new Error(m.data.message||"Failed to add role")},onSuccess:()=>{W.fire({icon:"success",title:"Success!",text:"Role added successfully",timer:1500,showConfirmButton:!1}),a(""),s.invalidateQueries({queryKey:["roles-management"]})},onError:h=>{W.fire({icon:"error",title:"Error!",text:h.message||"Failed to add role"})}}),o=wt({mutationFn:async h=>{const m=await Ne.post("/role/roles.php",{action:"deleteRole",role_id:h});if(!m.data.success)throw new Error(m.data.message||"Failed to delete role")},onSuccess:()=>{W.fire({icon:"success",title:"Success!",text:"Role deleted successfully",timer:1500,showConfirmButton:!1}),s.invalidateQueries({queryKey:["roles-management"]})},onError:h=>{W.fire({icon:"error",title:"Error!",text:h.message||"Failed to delete role"})}}),c=h=>{if(h.preventDefault(),!t||t.trim()===""){W.fire("Validation Error!","Role name is required","error");return}i.mutate(t)},u=(h,m)=>{W.fire({title:"Delete!",text:`Do you want to delete role "${m}"?`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#ef4444",cancelButtonColor:"#6b7280",confirmButtonText:"Yes, delete it!"}).then(p=>{p.isConfirmed&&o.mutate(h)})};return r?e.jsx("div",{className:"role-management-page",children:e.jsx("div",{className:"text-center p-5",children:e.jsx("div",{className:"spinner-border text-primary",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Loading..."})})})}):e.jsx("div",{className:"role-management-page",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h1",{className:"text-center",children:e.jsx("i",{children:"Role"})})}),e.jsxs("div",{className:"card-body",children:[e.jsx("form",{onSubmit:c,children:e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"input-group",children:[e.jsx("div",{className:"input-group-prepend",children:e.jsx("span",{className:"input-group-text",children:e.jsx("i",{className:"fa fa-user"})})}),e.jsx("input",{type:"text",className:"form-control",value:t,onChange:h=>a(h.target.value),placeholder:"Role Name",autoFocus:!0})]}),e.jsx("button",{type:"submit",className:"btn btn-dark",disabled:i.isPending,children:i.isPending?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fa fa-spinner fa-spin me-1"})," Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fa fa-plus me-1"})," Save"]})})]})}),e.jsx("div",{className:"table-section",children:e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-striped table-hover",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"S#"}),e.jsx("th",{children:"Role ID"}),e.jsx("th",{children:"Role Name"}),e.jsx("th",{children:"Action"})]})}),e.jsx("tbody",{children:n.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"text-center",children:"No roles found"})}):n.map((h,m)=>e.jsxs("tr",{children:[e.jsx("th",{scope:"row",children:m+1}),e.jsx("td",{className:"text-capitalize",children:h.role_id}),e.jsx("td",{className:"text-capitalize",children:h.role_name}),e.jsx("td",{children:e.jsx("button",{className:"btn btn-sm",onClick:()=>u(h.role_id,h.role_name),children:e.jsx("i",{className:"fa fa-trash text-danger fa-2x"})})})]},h.role_id))})]})})})]})]})})}const eg=["Dashboard","Ticket","Visa","Loan","Hotel","Rental Car","Hawala","Supplier","Expense","Customer","Residence","Service","Staff","Role","Permission","Customer Ledger","Supplier Ledger","Customer Payment","Supplier Payment","Customer Visa Prices","Supplier Visa Prices","Salary","Accounts","Deposit","Cheques","Currency","Company Documents","Pending Tasks","Reminder"];function Zq(){const s=Wa(),[t,a]=A.useState(""),[n,r]=A.useState({});A.useEffect(()=>{const y={};eg.forEach(g=>{y[g]={page_name:g,select:0,insert:0,update:0,delete:0}}),r(y)},[]);const{data:i=[]}=Rt({queryKey:["roles-permissions"],queryFn:async()=>{const y=await Ne.post("/permission/permissions.php",{action:"getRoles"});return y.data.success?y.data.data:[]},staleTime:3e4}),{data:o=[]}=Rt({queryKey:["permissions",t],queryFn:async()=>{const y=await Ne.post("/permission/permissions.php",{action:"getPermissions",role_id:t});return y.data.success?y.data.data:[]},enabled:!!t,staleTime:1e4});A.useEffect(()=>{if(o.length>0){const y={};o.forEach(g=>{y[g.page_name]=g}),eg.forEach(g=>{y[g]||(y[g]={page_name:g,select:0,insert:0,update:0,delete:0})}),r(y)}},[o]);const c=wt({mutationFn:async y=>{const g=await Ne.post("/permission/permissions.php",{action:"savePermissions",role_id:y.role_id,permissions:y.permissions});if(!g.data.success)throw new Error(g.data.message||"Failed to save permissions")},onSuccess:()=>{W.fire({icon:"success",title:"Success!",text:"Permissions saved successfully",timer:1500,showConfirmButton:!1}),s.invalidateQueries({queryKey:["permissions"]})},onError:y=>{W.fire({icon:"error",title:"Error!",text:y.message||"Failed to save permissions"})}}),u=(y,g,j)=>{r(b=>({...b,[y]:{...b[y],[g]:j?1:0}}))},h=()=>{const y={};Object.keys(n).forEach(g=>{y[g]={page_name:g,select:1,insert:1,update:1,delete:1}}),r(y)},m=()=>{if(!t){W.fire("Validation Error!","Please select a role","error");return}const y=Object.values(n);c.mutate({role_id:Number(t),permissions:y})},p=y=>{if(a(y),!y){const g={};eg.forEach(j=>{g[j]={page_name:j,select:0,insert:0,update:0,delete:0}}),r(g)}};return e.jsx("div",{className:"permission-management-page",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h1",{className:"text-center",children:e.jsx("i",{children:"Permission"})})}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"filter-row",children:[e.jsx("div",{className:"select-role",children:e.jsx(It,{options:[{value:"",label:"--Select Role--"},...i.map(y=>({value:String(y.role_id),label:y.role_name}))],value:t,onChange:p,placeholder:"Select Role"})}),e.jsxs("div",{className:"button-group",children:[e.jsx("button",{type:"button",className:"btn btn-danger",onClick:h,disabled:!t,children:"Select All"}),e.jsx("button",{type:"button",className:"btn btn-primary",onClick:m,disabled:!t||c.isPending,children:c.isPending?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fa fa-spinner fa-spin me-1"})," Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fa fa-save me-1"})," Save Permissions"]})})]})]}),e.jsx("div",{className:"table-section",children:e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-striped table-hover",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"S#"}),e.jsx("th",{children:"Page Name"}),e.jsx("th",{children:"Select"}),e.jsx("th",{children:"Insert"}),e.jsx("th",{children:"Update"}),e.jsx("th",{children:"Delete"})]})}),e.jsx("tbody",{children:eg.map((y,g)=>{const j=n[y]||{select:0,insert:0,update:0,delete:0},b=y==="Dashboard";return e.jsxs("tr",{children:[e.jsx("th",{scope:"row",children:g+1}),e.jsx("td",{children:y}),e.jsx("td",{children:e.jsx("div",{className:"form-check",children:e.jsx("input",{type:"checkbox",className:"form-check-input",checked:j.select===1,onChange:N=>u(y,"select",N.target.checked),disabled:!t})})}),e.jsx("td",{children:e.jsx("div",{className:`form-check ${b?"hidden":""}`,children:e.jsx("input",{type:"checkbox",className:"form-check-input",checked:j.insert===1,onChange:N=>u(y,"insert",N.target.checked),disabled:!t||b})})}),e.jsx("td",{children:e.jsx("div",{className:`form-check ${b?"hidden":""}`,children:e.jsx("input",{type:"checkbox",className:"form-check-input",checked:j.update===1,onChange:N=>u(y,"update",N.target.checked),disabled:!t||b})})}),e.jsx("td",{children:e.jsx("div",{className:`form-check ${b?"hidden":""}`,children:e.jsx("input",{type:"checkbox",className:"form-check-input",checked:j.delete===1,onChange:N=>u(y,"delete",N.target.checked),disabled:!t||b})})})]},y)})})]})})})]})]})})}class e9{async getAccounts(){try{const t=await gs.get(`${Ct.baseUrl}/api/accounts.php`,{withCredentials:!0,headers:{"Content-Type":"application/json"}});return t.data&&Array.isArray(t.data)?(vs.debug("Accounts fetched successfully:",t.data.length,"accounts"),t.data):t.data&&t.data.error?(vs.error("Accounts API error:",t.data.error),[]):[]}catch(t){vs.error("Error fetching accounts:",t),vs.error("Error response:",t.response?.data),vs.error("Error status:",t.response?.status);try{const a=await gs.post(`${Ct.baseUrl}/accountsReportController.php`,new URLSearchParams({action:"getAccounts"}),{withCredentials:!0,headers:{"Content-Type":"application/x-www-form-urlencoded"}}),n=a.data?.accounts||a.data||[];return vs.debug("Accounts fetched from fallback:",n.length,"accounts"),Array.isArray(n)?n:[]}catch(a){return vs.error("Fallback also failed:",a),[]}}}async getCurrencies(){try{const t=await gs.get(`${Ct.baseUrl}/api/currencies.php`,{withCredentials:!0,headers:{"Content-Type":"application/json"}});return t.data&&Array.isArray(t.data)?(vs.debug("Currencies fetched successfully:",t.data.length,"currencies"),t.data):t.data&&t.data.error?(vs.error("Currencies API error:",t.data.error),[]):[]}catch(t){vs.error("Error fetching currencies:",t),vs.error("Error response:",t.response?.data),vs.error("Error status:",t.response?.status);try{const a=await gs.post(`${Ct.baseUrl}/accountsReportController.php`,new URLSearchParams({action:"getCurrencies"}),{withCredentials:!0,headers:{"Content-Type":"application/x-www-form-urlencoded"}}),n=a.data?.currencies||a.data||[];return vs.debug("Currencies fetched from fallback:",n.length,"currencies"),Array.isArray(n)?n:[]}catch(a){return vs.error("Fallback also failed:",a),[]}}}async getDetailedTransactions(t){const a=new FormData;return a.append("action","getDetailedTransactions"),a.append("fromDate",t.fromDate),a.append("toDate",t.toDate),a.append("accountFilter",t.accountFilter),a.append("typeFilter",t.typeFilter),a.append("resetDate",t.resetDate),(await gs.post(`${Ct.baseUrl}/accountsReportController.php`,a,{withCredentials:!0,headers:{"Content-Type":"multipart/form-data"}})).data}async getAccountBalances(t){const a=new FormData;return a.append("action","getAccountBalances"),a.append("resetDate",t),(await gs.post(`${Ct.baseUrl}/accountsReportController.php`,a,{withCredentials:!0,headers:{"Content-Type":"multipart/form-data"}})).data}async addDeposit(t){const a=new FormData;a.append("AddSalary","addSalary"),a.append("Deposit_Amount",t.depositAmount.toString()),a.append("Addaccount_ID",t.depositAccount.toString()),a.append("Remarks",t.depositRemarks),a.append("Currency_Type",t.depositCurrency.toString());const n=await gs.post(`${Ct.baseUrl}/depositController.php`,a,{withCredentials:!0,headers:{"Content-Type":"multipart/form-data"}});if(n.data==="Success"||n.data.trim?.()==="Success")return{status:"success",message:"Deposit added successfully"};throw new Error(n.data||"Failed to add deposit")}async addWithdrawal(t){const a=new FormData;a.append("AddSalary","addSalary"),a.append("Withdrawal_Amount",t.withdrawAmount.toString()),a.append("Addaccount_ID",t.withdrawAccount.toString()),a.append("Remarks",t.withdrawRemarks),a.append("Currency_Type",t.withdrawCurrency.toString());const n=await gs.post(`${Ct.baseUrl}/withdrawalController.php`,a,{withCredentials:!0,headers:{"Content-Type":"multipart/form-data"}});if(n.data==="Success"||n.data.trim?.()==="Success")return{status:"success",message:"Withdrawal added successfully"};throw new Error(n.data||"Failed to add withdrawal")}async addTransfer(t){const a=new FormData;return a.append("action","addTransaction"),a.append("dateAdd",t.transferDate),a.append("fromAccountAdd",t.transferFromAccount.toString()),a.append("toAccountAdd",t.transferToAccount.toString()),a.append("remarksAdd",t.transferRemarks||""),a.append("trxNumberAdd",t.transferTrxNumber||""),a.append("amountAdd",t.transferAmount.toString()),a.append("amountConfirmAdd",t.transferAmountConfirm.toString()),a.append("chargesAdd",t.transferCharges.toString()),a.append("exchangeRateAdd",t.transferExchangeRate.toString()),(await gs.post(`${Ct.baseUrl}/transfersController.php`,a,{withCredentials:!0,headers:{"Content-Type":"multipart/form-data"}})).data}async getAccountStatement(t,a,n){const r=new FormData;return r.append("GetAccountStatement","detailed"),r.append("accountId",t.toString()),r.append("fromDate",a),r.append("toDate",n),(await gs.post(`${Ct.baseUrl}/accountsReportController.php`,r,{withCredentials:!0,headers:{"Content-Type":"multipart/form-data"}})).data}async validateTables(){const t=new FormData;return t.append("action","validateTables"),(await gs.post(`${Ct.baseUrl}/accountsReportController.php`,t,{withCredentials:!0,headers:{"Content-Type":"multipart/form-data"}})).data}async getAccountBalance(t){const a=new FormData;return a.append("id",t.toString()),(await gs.post(`${Ct.baseUrl}/getAccountBalance.php`,a,{withCredentials:!0,headers:{"Content-Type":"multipart/form-data"}})).data}exportToExcel(t){const a=`${Ct.baseUrl}/accountsReportController.php?action=exportExcel&fromDate=${t.fromDate}&toDate=${t.toDate}&accountFilter=${t.accountFilter}&typeFilter=${t.typeFilter}`;window.open(a,"_blank")}}const yo=new e9;function t9(){const s=new Date().toISOString().split("T")[0],t="2025-10-01",[a,n]=A.useState(t),[r,i]=A.useState(s),[o,c]=A.useState(""),[u,h]=A.useState(""),[m,p]=A.useState(!1),[y,g]=A.useState([]),[j,b]=A.useState([]),[N,v]=A.useState({totalCredits:"0.00",totalDebits:"0.00",totalTransfers:"0.00",netBalance:"0.00"}),[S,E]=A.useState(1),[L,z]=A.useState(1),[V,te]=A.useState(50),[q,B]=A.useState(20),[J,P]=A.useState(!1),[K,H]=A.useState(null),[se,X]=A.useState(""),[R,Q]=A.useState(t),[Y,$]=A.useState(s),[me,D]=A.useState(null),[U,le]=A.useState(!1),[de,G]=A.useState(!1),[je,De]=A.useState(!1),[Pe,ke]=A.useState(!1),[Ye,Qe]=A.useState(!1),[et,Xe]=A.useState({}),[re,ne]=A.useState({}),[Se,Ve]=A.useState({transferDate:s,transferCharges:0,transferExchangeRate:1}),[xt,ee]=A.useState(""),[Ie,He]=A.useState(""),{data:Lt=[],isLoading:Dt,error:Mt}=Rt({queryKey:["accounts"],queryFn:async()=>{console.log("Fetching accounts...");const Ce=await yo.getAccounts();return console.log("Accounts received:",Ce),Ce},staleTime:6e4,retry:2});A.useEffect(()=>{Dt&&console.log("Accounts are loading..."),Mt&&console.error("Accounts error:",Mt),Lt&&Lt.length>0?console.log("Accounts loaded successfully:",Lt.length,"accounts"):Lt&&Lt.length===0&&!Dt&&console.warn("No accounts found or accounts array is empty")},[Lt,Dt,Mt]);const{data:At=[],isLoading:Bt,error:rs}=Rt({queryKey:["currencies"],queryFn:async()=>{console.log("Fetching currencies...");const Ce=await yo.getCurrencies();return console.log("Currencies received:",Ce),Ce},staleTime:6e4,retry:2});A.useEffect(()=>{Bt&&console.log("Currencies are loading..."),rs&&console.error("Currencies error:",rs),At&&At.length>0?console.log("Currencies loaded successfully:",At.length,"currencies"):At&&At.length===0&&!Bt&&console.warn("No currencies found or currencies array is empty")},[At,Bt,rs]);const kt=wt({mutationFn:()=>yo.getDetailedTransactions({fromDate:a,toDate:r,accountFilter:o,typeFilter:u,resetDate:t}),onSuccess:Ce=>{console.log("Transactions data received:",Ce),g(Ce.transactions||[]),E(1),Ce.summary&&v({totalCredits:Ce.summary.totalCredits||"0.00 AED",totalDebits:Ce.summary.totalDebits||"0.00 AED",totalTransfers:Ce.summary.totalTransfers||"0.00 AED",netBalance:Ce.summary.netBalance||"0.00 AED"})},onError:Ce=>{console.error("Error loading transactions:",Ce),W.fire("Error",Ce.response?.data?.error||Ce.message||"Failed to load transactions","error")}}),zt=wt({mutationFn:()=>yo.getAccountBalances(t),onSuccess:Ce=>{console.log("Balances data received:",Ce),b(Ce.balances||[]),z(1)},onError:Ce=>{console.error("Error loading balances:",Ce),W.fire("Error",Ce.response?.data?.error||Ce.message||"Failed to load account balances","error")}}),$t=wt({mutationFn:Ce=>yo.addDeposit(Ce),onSuccess:()=>{W.fire("Success","Deposit added successfully","success"),G(!1),Xe({}),kt.mutate()},onError:Ce=>{W.fire("Error",Ce.message||"Failed to add deposit","error")}}),bt=wt({mutationFn:Ce=>yo.addWithdrawal(Ce),onSuccess:()=>{W.fire("Success","Withdrawal added successfully","success"),De(!1),ne({}),kt.mutate()},onError:Ce=>{W.fire("Error",Ce.message||"Failed to add withdrawal","error")}}),ys=wt({mutationFn:Ce=>yo.addTransfer(Ce),onSuccess:()=>{W.fire("Success","Transfer completed successfully","success"),ke(!1),Ve({transferDate:s,transferCharges:0,transferExchangeRate:1}),kt.mutate()},onError:Ce=>{W.fire("Error",Ce.response?.data?.message||"Failed to process transfer","error")}});A.useEffect(()=>{kt.mutate()},[]);const Te=()=>{m||zt.mutate(),p(!m)},Je=Ce=>{if(Ce.preventDefault(),!et.depositAccount||!et.depositAmount||!et.depositRemarks||!et.depositCurrency){W.fire("Error","Please fill all required fields","error");return}$t.mutate(et)},be=Ce=>{if(Ce.preventDefault(),!re.withdrawAccount||!re.withdrawAmount||!re.withdrawRemarks||!re.withdrawCurrency){W.fire("Error","Please fill all required fields","error");return}bt.mutate(re)},Re=Ce=>{Ce.preventDefault();const ve=Se;if(!ve.transferFromAccount||!ve.transferToAccount||!ve.transferAmount||!ve.transferAmountConfirm){W.fire("Error","Please fill all required fields","error");return}if(ve.transferFromAccount===ve.transferToAccount){W.fire("Error","From Account and To Account cannot be the same","error");return}if(ve.transferAmount!==ve.transferAmountConfirm){W.fire("Error","Amount and Confirm Amount must be the same","error");return}ys.mutate(ve)},lt=async(Ce,ve)=>{try{const Ze=await yo.getAccountBalance(Ce);if(Ze.status==="success"){const Wt=`${Ze.account.Account_Balance} (from ${t})`;ve==="from"?ee(Wt):He(Wt)}}catch(Ze){console.error("Error loading account balance:",Ze)}},tt=()=>{yo.exportToExcel({fromDate:a,toDate:r,accountFilter:o,typeFilter:u,resetDate:t})},Et=Ce=>(typeof Ce=="string"?parseFloat(Ce):Ce).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,","),is=Math.ceil(y.length/V),qt=Math.ceil(j.length/q),Pt=y.slice((S-1)*V,S*V),Tt=j.slice((L-1)*q,L*q),Ue=(Ce,ve)=>{H(Ce),X(ve),Q(t),$(s),D(null),P(!0)},yt=async()=>{if(K){le(!0);try{const Ce=await yo.getAccountStatement(K,R,Y);D(Ce)}catch(Ce){W.fire("Error",Ce.response?.data?.message||Ce.message||"Failed to load statement","error")}finally{le(!1)}}},vt=({currentPage:Ce,totalPages:ve,onPageChange:Ze,itemsPerPage:Wt,onItemsPerPageChange:Fs,totalItems:Ts,label:aa})=>{const Os=(Ce-1)*Wt+1,$s=Math.min(Ce*Wt,Ts);return e.jsxs("div",{className:"pagination-controls",children:[e.jsxs("div",{className:"pagination-info",children:["Showing ",Os," to ",$s," of ",Ts," ",aa]}),e.jsxs("div",{className:"pagination-items-per-page",children:[e.jsx("label",{children:"Items per page:"}),e.jsxs("select",{value:Wt,onChange:ja=>{Fs(Number(ja.target.value)),Ze(1)},className:"form-control form-control-sm",style:{width:"80px",display:"inline-block",marginLeft:"10px"},children:[e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:20,children:"20"}),e.jsx("option",{value:50,children:"50"}),e.jsx("option",{value:100,children:"100"})]})]}),e.jsxs("div",{className:"pagination-buttons",children:[e.jsxs("button",{className:"btn btn-sm btn-secondary",onClick:()=>Ze(1),disabled:Ce===1,children:[e.jsx("i",{className:"fa fa-angle-double-left"})," First"]}),e.jsxs("button",{className:"btn btn-sm btn-secondary",onClick:()=>Ze(Ce-1),disabled:Ce===1,children:[e.jsx("i",{className:"fa fa-angle-left"})," Prev"]}),e.jsxs("span",{className:"pagination-page-info",children:["Page ",Ce," of ",ve]}),e.jsxs("button",{className:"btn btn-sm btn-secondary",onClick:()=>Ze(Ce+1),disabled:Ce>=ve,children:["Next ",e.jsx("i",{className:"fa fa-angle-right"})]}),e.jsxs("button",{className:"btn btn-sm btn-secondary",onClick:()=>Ze(ve),disabled:Ce>=ve,children:["Last ",e.jsx("i",{className:"fa fa-angle-double-right"})]})]})]})};return e.jsxs("div",{className:"accounts-report-container",children:[e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header bg-gradient",children:e.jsxs("h2",{children:[e.jsx("i",{className:"fa fa-fw fa-money"})," Accounts Report - Detailed Transactions"]})}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"alert alert-info mb-4",children:[e.jsxs("h5",{children:[e.jsx("i",{className:"fa fa-info-circle"})," System Calculation Status"]}),e.jsxs("div",{className:"alert alert-info-content",children:[e.jsx("i",{className:"fa fa-calendar"})," ",e.jsx("strong",{children:"PERMANENT SETTING:"}),"All account balances and calculations are computed from ",e.jsx("strong",{children:"01 October 2025"})," onwards only. Transactions before this date are permanently excluded from all calculations."]})]}),e.jsxs("div",{className:"filters-row",children:[e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"From Date:"}),e.jsx("input",{type:"date",className:"form-control",value:a,onChange:Ce=>n(Ce.target.value),min:t}),e.jsx("small",{className:"text-muted",children:"Cannot be before 2025-10-01"})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"To Date:"}),e.jsx("input",{type:"date",className:"form-control",value:r,onChange:Ce=>i(Ce.target.value)})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"Account:"}),e.jsxs("select",{className:"form-control",value:o,onChange:Ce=>c(Ce.target.value),children:[e.jsx("option",{value:"",children:"All Accounts"}),Lt.map(Ce=>e.jsx("option",{value:Ce.account_ID,children:Ce.account_Name},Ce.account_ID))]})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"Transaction Type:"}),e.jsxs("select",{className:"form-control",value:u,onChange:Ce=>h(Ce.target.value),children:[e.jsx("option",{value:"",children:"All Types"}),e.jsx("option",{value:"credit",children:"Credits (Money In)"}),e.jsx("option",{value:"debit",children:"Debits (Money Out)"}),e.jsx("option",{value:"transfer",children:"Transfers"}),e.jsx("option",{value:"salary",children:"Salaries"}),e.jsx("option",{value:"cheque",children:"Cheques"}),e.jsx("option",{value:"refund",children:"Refunds"}),e.jsxs("optgroup",{label:"Residence Payments (Credits)",children:[e.jsx("option",{value:"tawjeeh_payment",children:"Tawjeeh Payments"}),e.jsx("option",{value:"insurance_payment",children:"Insurance Payments (ILOE)"}),e.jsx("option",{value:"residence_fine",children:"Residence Fine Payments"}),e.jsx("option",{value:"cancellation",children:"Cancellation Payments"})]}),e.jsxs("optgroup",{label:"Residence Operations (Debits)",children:[e.jsx("option",{value:"tawjeeh_operation",children:"Tawjeeh Operations"}),e.jsx("option",{value:"iloe_operation",children:"ILOE Insurance Operations"}),e.jsx("option",{value:"evisa_charge",children:"eVisa Charges"})]}),e.jsxs("optgroup",{label:"Other Operations (Debits)",children:[e.jsx("option",{value:"amer_transaction",children:"Amer Transactions"}),e.jsx("option",{value:"tasheel_transaction",children:"Tasheel Transactions"}),e.jsx("option",{value:"cancellation_transaction",children:"Cancellation Transactions"})]})]})]})]}),e.jsxs("div",{className:"action-buttons",children:[e.jsxs("button",{className:"btn btn-primary",onClick:()=>kt.mutate(),disabled:kt.isPending,children:[e.jsx("i",{className:"fa fa-search"})," ",kt.isPending?"Loading...":"Load Transactions"]}),e.jsxs("button",{className:"btn btn-info",onClick:Te,children:[e.jsx("i",{className:"fa fa-balance-scale"})," ",m?"Hide":"Show"," Account Balances"]}),e.jsxs("button",{className:"btn btn-success",onClick:tt,children:[e.jsx("i",{className:"fa fa-file-excel-o"})," Export to Excel"]}),e.jsxs("button",{className:"btn btn-warning",onClick:()=>Qe(!0),children:[e.jsx("i",{className:"fa fa-table"})," View Credit/Debit Tables"]}),e.jsxs("button",{className:"btn btn-success",onClick:()=>G(!0),children:[e.jsx("i",{className:"fa fa-plus-circle"})," Deposit"]}),e.jsxs("button",{className:"btn btn-danger",onClick:()=>De(!0),children:[e.jsx("i",{className:"fa fa-minus-circle"})," Withdraw"]}),e.jsxs("button",{className:"btn btn-info",onClick:()=>ke(!0),children:[e.jsx("i",{className:"fa fa-exchange"})," Transfer"]})]})]}),m&&e.jsxs("div",{className:"card-body",children:[e.jsxs("h4",{children:[e.jsx("i",{className:"fa fa-balance-scale"})," Current Account Balances"]}),e.jsxs("div",{className:"alert alert-warning",children:[e.jsx("i",{className:"fa fa-exclamation-triangle"})," ",e.jsx("strong",{children:"Note:"}),"Account balances shown here are in original currencies (not converted). For AED-converted totals, refer to the summary cards."]}),e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-striped",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Account ID"}),e.jsx("th",{children:"Account Name"}),e.jsx("th",{children:"Total Credits"}),e.jsx("th",{children:"Total Debits"}),e.jsx("th",{children:"Current Balance"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:zt.isPending?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"text-center",children:"Loading..."})}):j.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"text-center",children:"No balances found"})}):Tt.map(Ce=>e.jsxs("tr",{children:[e.jsx("td",{children:Ce.account_ID}),e.jsx("td",{children:Ce.account_Name}),e.jsxs("td",{className:"text-success",children:[Et(Ce.total_credits)," ",Ce.currency]}),e.jsxs("td",{className:"text-danger",children:[Et(Ce.total_debits)," ",Ce.currency]}),e.jsx("td",{className:Ce.balance>=0?"text-success":"text-danger",children:e.jsxs("strong",{children:[Et(Ce.balance)," ",Ce.currency]})}),e.jsx("td",{children:e.jsx("span",{className:`badge ${Ce.balance>=0?"badge-success":"badge-danger"}`,children:Ce.status})}),e.jsx("td",{children:e.jsxs("button",{className:"btn btn-sm btn-primary",onClick:()=>Ue(Ce.account_ID,Ce.account_Name),children:[e.jsx("i",{className:"fa fa-file-text"})," Statement"]})})]},Ce.account_ID))})]})}),j.length>0&&e.jsx(vt,{currentPage:L,totalPages:qt,onPageChange:z,itemsPerPage:q,onItemsPerPageChange:B,totalItems:j.length,label:"accounts"})]}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"alert alert-info",children:[e.jsx("i",{className:"fa fa-info-circle"})," ",e.jsx("strong",{children:"Currency Conversion Notice:"}),"All amounts are automatically converted to AED using the latest exchange rates."]}),e.jsxs("div",{className:"summary-cards",children:[e.jsxs("div",{className:"summary-card bg-success",children:[e.jsxs("h5",{children:["Total Credits ",e.jsx("small",{children:"(AED)"})]}),e.jsx("h3",{children:N.totalCredits})]}),e.jsxs("div",{className:"summary-card bg-danger",children:[e.jsxs("h5",{children:["Total Debits ",e.jsx("small",{children:"(AED)"})]}),e.jsx("h3",{children:N.totalDebits})]}),e.jsxs("div",{className:"summary-card bg-warning",children:[e.jsxs("h5",{children:["Total Transfers ",e.jsx("small",{children:"(AED)"})]}),e.jsx("h3",{children:N.totalTransfers})]}),e.jsxs("div",{className:"summary-card bg-info",children:[e.jsxs("h5",{children:["Net Balance ",e.jsx("small",{children:"(AED)"})]}),e.jsx("h3",{children:N.netBalance})]})]})]}),e.jsxs("div",{className:"card-body",children:[e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table transactions-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Date"}),e.jsx("th",{children:"Transaction Type"}),e.jsx("th",{children:"Account"}),e.jsx("th",{children:"Description"}),e.jsx("th",{children:"Reference"}),e.jsxs("th",{children:["Credit (+) ",e.jsx("small",{children:"AED"})]}),e.jsxs("th",{children:["Debit (-) ",e.jsx("small",{children:"AED"})]}),e.jsx("th",{children:"Currency Info"}),e.jsx("th",{children:"Staff Name"}),e.jsx("th",{children:"Remarks"})]})}),e.jsx("tbody",{children:kt.isPending?e.jsx("tr",{children:e.jsx("td",{colSpan:10,className:"text-center",children:"Loading transactions..."})}):y.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:10,className:"text-center",children:'Click "Load Transactions" to view data'})}):Pt.map((Ce,ve)=>{const Ze=Ce.type_category||(Ce.transaction_type.toLowerCase().includes("transfer")?"transfer":Ce.credit>0?"credit":"debit"),Wt=`${Ze}-row`;return e.jsxs("tr",{className:Wt,children:[e.jsx("td",{children:new Date(Ce.date).toLocaleDateString()}),e.jsx("td",{children:e.jsx("span",{className:`transaction-type ${Ze}`,children:Ce.transaction_type})}),e.jsx("td",{children:Ce.account}),e.jsx("td",{children:Ce.description}),e.jsx("td",{children:Ce.reference}),e.jsx("td",{className:"text-success credit-cell",children:Ce.credit>0?Et(Ce.credit):"-"}),e.jsx("td",{className:"text-danger debit-cell",children:Ce.debit>0?Et(Ce.debit):"-"}),e.jsx("td",{children:Ce.currency_info}),e.jsx("td",{children:Ce.staff_name}),e.jsx("td",{children:Ce.remarks})]},ve)})})]})}),y.length>0&&e.jsx(vt,{currentPage:S,totalPages:is,onPageChange:E,itemsPerPage:V,onItemsPerPageChange:te,totalItems:y.length,label:"transactions"})]})]}),J&&e.jsx("div",{className:"modal-overlay",onClick:()=>P(!1),children:e.jsxs("div",{className:"modal-content modal-large",onClick:Ce=>Ce.stopPropagation(),children:[e.jsxs("div",{className:"modal-header bg-info",children:[e.jsxs("h5",{children:[e.jsx("i",{className:"fa fa-file-text"})," Account Statement - ",se]}),e.jsx("button",{className:"close-btn",onClick:()=>P(!1),children:""})]}),e.jsxs("div",{className:"modal-body",children:[e.jsx("div",{className:"statement-filters mb-4",children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-4",children:[e.jsx("label",{children:"From Date:"}),e.jsx("input",{type:"date",className:"form-control",value:R,onChange:Ce=>Q(Ce.target.value),min:t})]}),e.jsxs("div",{className:"col-md-4",children:[e.jsx("label",{children:"To Date:"}),e.jsx("input",{type:"date",className:"form-control",value:Y,onChange:Ce=>$(Ce.target.value),max:s})]}),e.jsxs("div",{className:"col-md-4",children:[e.jsx("label",{children:""}),e.jsx("button",{className:"btn btn-primary btn-block",onClick:yt,disabled:U,children:U?"Loading...":"Load Statement"})]})]})}),me&&e.jsxs("div",{children:[e.jsx("div",{className:"statement-summary mb-4",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-3",children:e.jsxs("div",{className:"summary-box bg-success",children:[e.jsx("h6",{children:"Total Credits"}),e.jsxs("h4",{children:[Et(me.totalCredits||0)," ",me.currency||"AED"]})]})}),e.jsx("div",{className:"col-md-3",children:e.jsxs("div",{className:"summary-box bg-danger",children:[e.jsx("h6",{children:"Total Debits"}),e.jsxs("h4",{children:[Et(me.totalDebits||0)," ",me.currency||"AED"]})]})}),e.jsx("div",{className:"col-md-3",children:e.jsxs("div",{className:"summary-box bg-info",children:[e.jsx("h6",{children:"Balance"}),e.jsxs("h4",{children:[Et(me.balance||0)," ",me.currency||"AED"]})]})}),e.jsx("div",{className:"col-md-3",children:e.jsxs("div",{className:"summary-box bg-secondary",children:[e.jsx("h6",{children:"Transactions"}),e.jsx("h4",{children:me.transactions?.length||0})]})})]})}),e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-striped",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Date"}),e.jsx("th",{children:"Type"}),e.jsx("th",{children:"Description"}),e.jsx("th",{children:"Credit"}),e.jsx("th",{children:"Debit"}),e.jsx("th",{children:"Balance"})]})}),e.jsx("tbody",{children:me.transactions&&me.transactions.length>0?me.transactions.map((Ce,ve)=>e.jsxs("tr",{children:[e.jsx("td",{children:new Date(Ce.date).toLocaleDateString()}),e.jsx("td",{children:Ce.transaction_type}),e.jsx("td",{children:Ce.description||"-"}),e.jsx("td",{className:"text-success",children:Ce.credit&&Ce.credit>0?Et(Ce.credit):"-"}),e.jsx("td",{className:"text-danger",children:Ce.debit&&Ce.debit>0?Et(Ce.debit):"-"}),e.jsx("td",{className:Ce.running_balance>=0?"text-success":"text-danger",children:e.jsx("strong",{children:Et(Ce.running_balance||0)})})]},ve)):e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"text-center",children:"No transactions found"})})})]})})]}),!me&&!U&&e.jsxs("div",{className:"alert alert-info text-center",children:[e.jsx("i",{className:"fa fa-info-circle"}),' Select date range and click "Load Statement" to view account statement']})]}),e.jsx("div",{className:"modal-footer",children:e.jsx("button",{className:"btn btn-secondary",onClick:()=>P(!1),children:"Close"})})]})}),de&&e.jsx("div",{className:"modal-overlay",onClick:()=>G(!1),children:e.jsxs("div",{className:"modal-content",onClick:Ce=>Ce.stopPropagation(),children:[e.jsxs("div",{className:"modal-header bg-success",children:[e.jsxs("h5",{children:[e.jsx("i",{className:"fa fa-plus-circle"})," Deposit Money"]}),e.jsx("button",{className:"close-btn",onClick:()=>G(!1),children:""})]}),e.jsxs("form",{onSubmit:Je,children:[e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:["Account: ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("select",{className:"form-control",value:et.depositAccount||"",onChange:Ce=>Xe({...et,depositAccount:Number(Ce.target.value)}),required:!0,disabled:Dt,children:[e.jsx("option",{value:"",children:"--Select Account--"}),Dt?e.jsx("option",{value:"",disabled:!0,children:"Loading accounts..."}):Mt?e.jsx("option",{value:"",disabled:!0,children:"Error loading accounts"}):Lt.length===0?e.jsx("option",{value:"",disabled:!0,children:"No accounts available"}):Lt.map(Ce=>e.jsx("option",{value:Ce.account_ID,children:Ce.account_Name},Ce.account_ID))]}),Mt&&e.jsx("small",{className:"text-danger",children:"Error loading accounts. Please refresh the page."})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group col-md-8",children:[e.jsxs("label",{children:["Deposit Amount: ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"number",step:"0.01",className:"form-control",value:et.depositAmount||"",onChange:Ce=>Xe({...et,depositAmount:Number(Ce.target.value)}),required:!0})]}),e.jsxs("div",{className:"form-group col-md-4",children:[e.jsxs("label",{children:["Currency: ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("select",{className:"form-control",value:et.depositCurrency||"",onChange:Ce=>Xe({...et,depositCurrency:Number(Ce.target.value)}),required:!0,disabled:Bt,children:[e.jsx("option",{value:"",children:"Select"}),Bt?e.jsx("option",{value:"",disabled:!0,children:"Loading currencies..."}):rs?e.jsx("option",{value:"",disabled:!0,children:"Error loading currencies"}):At.length===0?e.jsx("option",{value:"",disabled:!0,children:"No currencies available"}):At.map(Ce=>e.jsx("option",{value:Ce.currencyID,children:Ce.currencyName},Ce.currencyID))]}),rs&&e.jsx("small",{className:"text-danger",children:"Error loading currencies. Please refresh the page."})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:["Remarks: ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("textarea",{className:"form-control",value:et.depositRemarks||"",onChange:Ce=>Xe({...et,depositRemarks:Ce.target.value}),required:!0})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>G(!1),children:"Close"}),e.jsx("button",{type:"submit",className:"btn btn-success",disabled:$t.isPending,children:$t.isPending?"Saving...":"Save Deposit"})]})]})]})}),je&&e.jsx("div",{className:"modal-overlay",onClick:()=>De(!1),children:e.jsxs("div",{className:"modal-content",onClick:Ce=>Ce.stopPropagation(),children:[e.jsxs("div",{className:"modal-header bg-danger",children:[e.jsxs("h5",{children:[e.jsx("i",{className:"fa fa-minus-circle"})," Withdraw Money"]}),e.jsx("button",{className:"close-btn",onClick:()=>De(!1),children:""})]}),e.jsxs("form",{onSubmit:be,children:[e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:["Account: ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("select",{className:"form-control",value:re.withdrawAccount||"",onChange:Ce=>ne({...re,withdrawAccount:Number(Ce.target.value)}),required:!0,disabled:Dt,children:[e.jsx("option",{value:"",children:"--Select Account--"}),Dt?e.jsx("option",{value:"",disabled:!0,children:"Loading accounts..."}):Mt?e.jsx("option",{value:"",disabled:!0,children:"Error loading accounts"}):Lt.length===0?e.jsx("option",{value:"",disabled:!0,children:"No accounts available"}):Lt.map(Ce=>e.jsx("option",{value:Ce.account_ID,children:Ce.account_Name},Ce.account_ID))]}),Mt&&e.jsx("small",{className:"text-danger",children:"Error loading accounts. Please refresh the page."})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group col-md-8",children:[e.jsxs("label",{children:["Withdrawal Amount: ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"number",step:"0.01",className:"form-control",value:re.withdrawAmount||"",onChange:Ce=>ne({...re,withdrawAmount:Number(Ce.target.value)}),required:!0})]}),e.jsxs("div",{className:"form-group col-md-4",children:[e.jsxs("label",{children:["Currency: ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("select",{className:"form-control",value:re.withdrawCurrency||"",onChange:Ce=>ne({...re,withdrawCurrency:Number(Ce.target.value)}),required:!0,disabled:Bt,children:[e.jsx("option",{value:"",children:"Select"}),Bt?e.jsx("option",{value:"",disabled:!0,children:"Loading currencies..."}):rs?e.jsx("option",{value:"",disabled:!0,children:"Error loading currencies"}):At.length===0?e.jsx("option",{value:"",disabled:!0,children:"No currencies available"}):At.map(Ce=>e.jsx("option",{value:Ce.currencyID,children:Ce.currencyName},Ce.currencyID))]}),rs&&e.jsx("small",{className:"text-danger",children:"Error loading currencies. Please refresh the page."})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:["Remarks: ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("textarea",{className:"form-control",value:re.withdrawRemarks||"",onChange:Ce=>ne({...re,withdrawRemarks:Ce.target.value}),required:!0})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>De(!1),children:"Close"}),e.jsx("button",{type:"submit",className:"btn btn-danger",disabled:bt.isPending,children:bt.isPending?"Saving...":"Save Withdrawal"})]})]})]})}),Pe&&e.jsx("div",{className:"modal-overlay",onClick:()=>ke(!1),children:e.jsxs("div",{className:"modal-content modal-lg",onClick:Ce=>Ce.stopPropagation(),children:[e.jsxs("div",{className:"modal-header bg-info",children:[e.jsxs("h5",{children:[e.jsx("i",{className:"fa fa-exchange"})," Transfer Money"]}),e.jsx("button",{className:"close-btn",onClick:()=>ke(!1),children:""})]}),e.jsxs("form",{onSubmit:Re,children:[e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group col-md-6",children:[e.jsxs("label",{children:["Date: ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"date",className:"form-control",value:Se.transferDate||s,onChange:Ce=>Ve({...Se,transferDate:Ce.target.value}),required:!0})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsx("label",{children:"Transaction No.:"}),e.jsx("input",{type:"text",className:"form-control",value:Se.transferTrxNumber||"",onChange:Ce=>Ve({...Se,transferTrxNumber:Ce.target.value}),placeholder:"Optional Transaction Number"})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group col-md-8",children:[e.jsxs("label",{children:["From Account: ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("select",{className:"form-control",value:Se.transferFromAccount||"",onChange:Ce=>{const ve=Number(Ce.target.value);Ve({...Se,transferFromAccount:ve}),ve&&lt(ve,"from")},required:!0,disabled:Dt,children:[e.jsx("option",{value:"",children:"Select Account"}),Dt?e.jsx("option",{value:"",disabled:!0,children:"Loading accounts..."}):Mt?e.jsx("option",{value:"",disabled:!0,children:"Error loading accounts"}):Lt.length===0?e.jsx("option",{value:"",disabled:!0,children:"No accounts available"}):Lt.map(Ce=>e.jsx("option",{value:Ce.account_ID,children:Ce.account_Name},Ce.account_ID))]}),Mt&&e.jsx("small",{className:"text-danger",children:"Error loading accounts. Please refresh the page."})]}),e.jsxs("div",{className:"form-group col-md-4",children:[e.jsx("label",{children:"Balance:"}),e.jsx("input",{type:"text",className:"form-control",value:xt,disabled:!0})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group col-md-8",children:[e.jsxs("label",{children:["To Account: ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("select",{className:"form-control",value:Se.transferToAccount||"",onChange:Ce=>{const ve=Number(Ce.target.value);Ve({...Se,transferToAccount:ve}),ve&&lt(ve,"to")},required:!0,disabled:Dt,children:[e.jsx("option",{value:"",children:"Select Account"}),Dt?e.jsx("option",{value:"",disabled:!0,children:"Loading accounts..."}):Mt?e.jsx("option",{value:"",disabled:!0,children:"Error loading accounts"}):Lt.length===0?e.jsx("option",{value:"",disabled:!0,children:"No accounts available"}):Lt.map(Ce=>e.jsx("option",{value:Ce.account_ID,children:Ce.account_Name},Ce.account_ID))]}),Mt&&e.jsx("small",{className:"text-danger",children:"Error loading accounts. Please refresh the page."})]}),e.jsxs("div",{className:"form-group col-md-4",children:[e.jsx("label",{children:"Balance:"}),e.jsx("input",{type:"text",className:"form-control",value:Ie,disabled:!0})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Remarks:"}),e.jsx("textarea",{className:"form-control",value:Se.transferRemarks||"",onChange:Ce=>Ve({...Se,transferRemarks:Ce.target.value}),rows:2})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group col-md-6",children:[e.jsxs("label",{children:["Amount: ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"number",step:"0.01",className:"form-control",value:Se.transferAmount||"",onChange:Ce=>Ve({...Se,transferAmount:Number(Ce.target.value)}),required:!0})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsxs("label",{children:["Confirm Amount: ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"number",step:"0.01",className:"form-control",value:Se.transferAmountConfirm||"",onChange:Ce=>Ve({...Se,transferAmountConfirm:Number(Ce.target.value)}),required:!0})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group col-md-6",children:[e.jsxs("label",{children:["Charges: ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"number",step:"0.01",className:"form-control",value:Se.transferCharges||0,onChange:Ce=>Ve({...Se,transferCharges:Number(Ce.target.value)})})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsxs("label",{children:["Exchange Rate: ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"number",step:"0.01",className:"form-control",value:Se.transferExchangeRate||1,onChange:Ce=>Ve({...Se,transferExchangeRate:Number(Ce.target.value)})})]})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>ke(!1),children:"Close"}),e.jsx("button",{type:"submit",className:"btn btn-info",disabled:ys.isPending,children:ys.isPending?"Processing...":"Save Transfer"})]})]})]})}),Ye&&e.jsx("div",{className:"modal-overlay",onClick:()=>Qe(!1),children:e.jsxs("div",{className:"modal-content modal-xl",onClick:Ce=>Ce.stopPropagation(),children:[e.jsxs("div",{className:"modal-header bg-info",children:[e.jsxs("h5",{children:[e.jsx("i",{className:"fa fa-table"})," Database Tables - Credit & Debit Operations"]}),e.jsx("button",{className:"close-btn",onClick:()=>Qe(!1),children:""})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"alert alert-info",children:[e.jsx("i",{className:"fa fa-info-circle"})," ",e.jsx("strong",{children:"Purpose:"})," This overview helps developers and administrators understand which database tables contribute to credit and debit calculations."]}),e.jsx("p",{className:"text-muted",children:"Please refer to the PHP documentation for detailed table information."})]}),e.jsx("div",{className:"modal-footer",children:e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>Qe(!1),children:"Close"})})]})})]})}class s9{baseUrl=`${Ct.baseUrl}`;async getAccounts(){const t=new FormData;return t.append("GetAccountsReport","getAccountsReport"),(await gs.post(`${this.baseUrl}/accountsController.php`,t,{withCredentials:!0,headers:{"Content-Type":"multipart/form-data"}})).data}async getAccount(t){const a=new FormData;a.append("GetDataForUpdate","GetDataForUpdate"),a.append("ID",t.toString());const n=await gs.post(`${this.baseUrl}/accountsController.php`,a,{withCredentials:!0,headers:{"Content-Type":"multipart/form-data"}});if(n.data&&Array.isArray(n.data)&&n.data.length>0)return n.data[0];throw new Error("Account not found")}async addAccount(t){const a=new FormData;return a.append("Insert_CountryName","Insert_CountryName"),a.append("account_name",t.account_name),a.append("account_number",t.account_number||""),a.append("accountType",t.accountType.toString()),a.append("currency_type",t.currency_type.toString()),(await gs.post(`${this.baseUrl}/accountsController.php`,a,{withCredentials:!0,headers:{"Content-Type":"multipart/form-data"}})).data}async updateAccount(t){const a=new FormData;return a.append("Update_CountryName","Update_CountryName"),a.append("accountID",t.accountID.toString()),a.append("updaccount_name",t.updaccount_name),a.append("updaccount_number",t.updaccount_number||""),a.append("updaccountType",t.updaccountType.toString()),a.append("updcurrency_type",t.updcurrency_type.toString()),(await gs.post(`${this.baseUrl}/accountsController.php`,a,{withCredentials:!0,headers:{"Content-Type":"multipart/form-data"}})).data}async deleteAccount(t){const a=new FormData;return a.append("Delete","Delete"),a.append("ID",t.toString()),(await gs.post(`${this.baseUrl}/accountsController.php`,a,{withCredentials:!0,headers:{"Content-Type":"multipart/form-data"}})).data}async getCurrencies(){const t=new FormData;return t.append("CurrencyTypes","currencyTypes"),(await gs.post(`${this.baseUrl}/accountsController.php`,t,{withCredentials:!0,headers:{"Content-Type":"multipart/form-data"}})).data}}const Nh=new s9;function a9(){Wa();const[s,t]=A.useState(!1),[a,n]=A.useState(!1),[r,i]=A.useState(null),[o,c]=A.useState({account_name:"",account_number:"",accountType:1,currency_type:0}),[u,h]=A.useState({accountID:0,updaccount_name:"",updaccount_number:"",updaccountType:1,updcurrency_type:0}),{data:m=[],isLoading:p,refetch:y}=Rt({queryKey:["account-management"],queryFn:()=>Nh.getAccounts()}),{data:g=[]}=Rt({queryKey:["account-currencies"],queryFn:()=>Nh.getCurrencies(),staleTime:3e5}),j=wt({mutationFn:B=>Nh.addAccount(B),onSuccess:B=>{B==="Success"||B.trim()==="Success"?(W.fire("Success","Account added successfully","success"),t(!1),v(),y()):W.fire("Error",B,"error")},onError:B=>{W.fire("Error",B.response?.data?.message||"Failed to add account","error")}}),b=wt({mutationFn:B=>Nh.updateAccount(B),onSuccess:B=>{B==="Success"||B.trim()==="Success"?(W.fire("Success","Account updated successfully","success"),n(!1),S(),y()):W.fire("Error",B,"error")},onError:B=>{W.fire("Error",B.response?.data?.message||"Failed to update account","error")}}),N=wt({mutationFn:B=>Nh.deleteAccount(B),onSuccess:B=>{B==="Success"||B.trim()==="Success"?(W.fire("Success","Account deleted successfully","success"),y()):W.fire("Error",B,"error")},onError:B=>{W.fire("Error",B.response?.data?.message||"Failed to delete account","error")}}),v=()=>{c({account_name:"",account_number:"",accountType:1,currency_type:g.length>0?g[0].currencyID:0})},S=()=>{h({accountID:0,updaccount_name:"",updaccount_number:"",updaccountType:1,updcurrency_type:0})},E=()=>{v(),t(!0)},L=async B=>{try{const J=await Nh.getAccount(B);h({accountID:J.account_ID,updaccount_name:J.account_Name,updaccount_number:J.accountNum||"",updaccountType:J.accountType,updcurrency_type:J.curID}),i(B),n(!0)}catch(J){W.fire("Error",J.message||"Failed to fetch account","error")}},z=(B,J)=>{W.fire({title:"Delete Account?",text:`Do you want to delete account: ${J}`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#dc3545",cancelButtonColor:"#6c757d",confirmButtonText:"Yes, delete it!"}).then(P=>{P.isConfirmed&&N.mutate(B)})},V=B=>{if(B.preventDefault(),!o.account_name){W.fire("Validation Error","Account name is required","error");return}if(o.accountType===-1||o.accountType===0){W.fire("Validation Error","Account type is required","error");return}if(o.currency_type===-1||o.currency_type===0){W.fire("Validation Error","Currency is required","error");return}j.mutate(o)},te=B=>{if(B.preventDefault(),!u.updaccount_name){W.fire("Validation Error","Account name is required","error");return}if(u.updaccountType===-1||u.updaccountType===0){W.fire("Validation Error","Account type is required","error");return}if(u.updcurrency_type===-1||u.updcurrency_type===0){W.fire("Validation Error","Currency is required","error");return}b.mutate(u)},q=B=>{switch(B){case 1:return"Personal";case 2:return"Business";case 3:return"Cash";default:return"Unknown"}};return e.jsxs("div",{className:"account-management-container",children:[e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header-custom",children:e.jsxs("h2",{children:[e.jsx("i",{className:"fa fa-fw fa-paypal"})," Account Management"]})}),e.jsxs("div",{className:"card-body",children:[e.jsx("div",{className:"actions-row",children:e.jsxs("button",{className:"btn btn-primary",onClick:E,children:[e.jsx("i",{className:"fa fa-plus"})," Add Account"]})}),e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-striped table-hover",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"S#"}),e.jsx("th",{children:"Account Name"}),e.jsx("th",{children:"Account Number"}),e.jsx("th",{children:"Account Type"}),e.jsx("th",{children:"Currency"}),e.jsx("th",{children:"Action"})]})}),e.jsx("tbody",{children:p?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"text-center",children:"Loading..."})}):m.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"text-center",children:"No accounts found"})}):m.map((B,J)=>e.jsxs("tr",{children:[e.jsx("td",{className:"text-center",children:J+1}),e.jsx("td",{className:"text-capitalize",children:B.account_Name}),e.jsx("td",{className:"text-center",children:B.accountNum||"-"}),e.jsx("td",{className:"text-capitalize text-center",children:B.accountTypeName&&B.accountTypeName!=="Unknown"?B.accountTypeName:q(B.accountType)}),e.jsx("td",{className:"text-capitalize text-center",children:B.currencyName||"-"}),e.jsxs("td",{className:"text-center",children:[e.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>L(B.account_ID),title:"Edit",children:e.jsx("i",{className:"fa fa-edit"})}),"",e.jsx("button",{className:"btn btn-sm btn-danger",onClick:()=>z(B.account_ID,B.account_Name),title:"Delete",children:e.jsx("i",{className:"fa fa-trash"})})]})]},B.account_ID))})]})})]})]}),s&&e.jsx("div",{className:"modal-overlay",onClick:()=>t(!1),children:e.jsxs("div",{className:"modal-content",onClick:B=>B.stopPropagation(),children:[e.jsxs("div",{className:"modal-header bg-dark",children:[e.jsx("h5",{children:"Add Account"}),e.jsx("button",{className:"close-btn",onClick:()=>t(!1),children:""})]}),e.jsxs("form",{onSubmit:V,children:[e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Account Name:"}),e.jsx("input",{type:"text",className:"form-control",value:o.account_name,onChange:B=>c({...o,account_name:B.target.value}),placeholder:"Account Name",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Account Number:"}),e.jsx("input",{type:"text",className:"form-control",value:o.account_number,onChange:B=>c({...o,account_number:B.target.value}),placeholder:"Account Number"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Account Type:"}),e.jsxs("select",{className:"form-control",value:o.accountType,onChange:B=>c({...o,accountType:Number(B.target.value)}),required:!0,children:[e.jsx("option",{value:"-1",children:"--Select Account Type--"}),e.jsx("option",{value:"1",children:"Personal"}),e.jsx("option",{value:"2",children:"Business"}),e.jsx("option",{value:"3",children:"Cash"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Currency:"}),e.jsxs("select",{className:"form-control",value:o.currency_type,onChange:B=>c({...o,currency_type:Number(B.target.value)}),required:!0,children:[e.jsx("option",{value:"-1",children:"--Select Currency--"}),g.map(B=>e.jsx("option",{value:B.currencyID,children:B.currencyName},B.currencyID))]})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>t(!1),children:"Close"}),e.jsx("button",{type:"submit",className:"btn btn-primary",children:"Save"})]})]})]})}),a&&e.jsx("div",{className:"modal-overlay",onClick:()=>n(!1),children:e.jsxs("div",{className:"modal-content",onClick:B=>B.stopPropagation(),children:[e.jsxs("div",{className:"modal-header bg-dark",children:[e.jsx("h5",{children:"Update Account"}),e.jsx("button",{className:"close-btn",onClick:()=>n(!1),children:""})]}),e.jsxs("form",{onSubmit:te,children:[e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Account Name:"}),e.jsx("input",{type:"text",className:"form-control",value:u.updaccount_name,onChange:B=>h({...u,updaccount_name:B.target.value}),placeholder:"Account Name",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Account Number:"}),e.jsx("input",{type:"text",className:"form-control",value:u.updaccount_number,onChange:B=>h({...u,updaccount_number:B.target.value}),placeholder:"Account Number"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Account Type:"}),e.jsxs("select",{className:"form-control",value:u.updaccountType,onChange:B=>h({...u,updaccountType:Number(B.target.value)}),required:!0,children:[e.jsx("option",{value:"-1",children:"--Select Account Type--"}),e.jsx("option",{value:"1",children:"Personal"}),e.jsx("option",{value:"2",children:"Business"}),e.jsx("option",{value:"3",children:"Cash"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Currency:"}),e.jsxs("select",{className:"form-control",value:u.updcurrency_type,onChange:B=>h({...u,updcurrency_type:Number(B.target.value)}),required:!0,children:[e.jsx("option",{value:"-1",children:"--Select Currency--"}),g.map(B=>e.jsx("option",{value:B.currencyID,children:B.currencyName},B.currencyID))]})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>n(!1),children:"Close"}),e.jsx("button",{type:"submit",className:"btn btn-danger",children:"Update"})]})]})]})})]})}const $c={async searchTransactions(s){const t=new FormData;return t.append("action","searchTransactions"),t.append("status_filter",s.status_filter||"in_process"),s.company&&t.append("company",s.company),s.type&&t.append("type",s.type),s.search&&t.append("search",s.search),s.mohrestatus&&t.append("mohrestatus",s.mohrestatus),s.page&&t.append("page",s.page.toString()),(await Ne.post(`${Ct.baseUrl}/api/tasheel/transactions.php`,t,{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0})).data},async getTransaction(s){const t=new FormData;t.append("action","getTransaction"),t.append("id",s.toString());const a=await Ne.post(`${Ct.baseUrl}/api/tasheel/transactions.php`,t,{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0});if(a.data.status==="success"||a.data.success)return a.data.data;throw new Error(a.data.message||"Failed to fetch transaction")},async addTransaction(s){const t=new FormData;return t.append("action","addTransaction"),s.company_id&&t.append("company_id",s.company_id.toString()),t.append("transaction_type_id",s.transaction_type_id.toString()),t.append("transaction_number",s.transaction_number),s.cost&&t.append("cost",s.cost.toString()),s.mohrestatus&&t.append("mohrestatus",s.mohrestatus),s.status&&t.append("status",s.status),s.attachment&&t.append("attachment",s.attachment),(await Ne.post(`${Ct.baseUrl}/api/tasheel/transactions.php`,t,{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0})).data},async updateTransaction(s){const t=new FormData;return t.append("action","updateTransaction"),t.append("id",s.id.toString()),s.company_id&&t.append("company_id",s.company_id.toString()),t.append("transaction_type_id",s.transaction_type_id.toString()),t.append("transaction_number",s.transaction_number),s.cost&&t.append("cost",s.cost.toString()),s.mohrestatus&&t.append("mohrestatus",s.mohrestatus),s.status&&t.append("status",s.status),(await Ne.post(`${Ct.baseUrl}/api/tasheel/transactions.php`,t,{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0})).data},async deleteTransaction(s){const t=new FormData;return t.append("action","deleteTransaction"),t.append("id",s.toString()),(await Ne.post(`${Ct.baseUrl}/api/tasheel/transactions.php`,t,{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0})).data},async changeStatus(s){const t=new FormData;return t.append("action","changeStatus"),t.append("id",s.id.toString()),t.append("mohrestatus",s.mohrestatus),(await Ne.post(`${Ct.baseUrl}/api/tasheel/transactions.php`,t,{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0})).data},async markAsCompleted(s){const t=new FormData;return t.append("action","markAsCompleted"),t.append("id",s.toString()),(await Ne.post(`${Ct.baseUrl}/api/tasheel/transactions.php`,t,{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0})).data},async addTransactionType(s){const t=new FormData;return t.append("action","addTransactionType"),t.append("name",s),(await Ne.post(`${Ct.baseUrl}/api/tasheel/transactions.php`,t,{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0})).data},async getDropdowns(){const s=await Ne.get(`${Ct.baseUrl}/api/tasheel/dropdowns.php`,{withCredentials:!0});return s.data.data||s.data}};function n9(){const s=Wa(),[t,a]=A.useState("in_process"),[n,r]=A.useState({company:"",type:"",search:"",mohrestatus:""}),[i,o]=A.useState(1),[c,u]=A.useState([]),[h,m]=A.useState({currentPage:1,totalPages:1,totalRecords:0,recordsPerPage:10}),[p,y]=A.useState(!1),[g,j]=A.useState(!1),[b,N]=A.useState(!1),[v,S]=A.useState(!1),[E,L]=A.useState(!1),[z,V]=A.useState(null),[te,q]=A.useState({company_id:void 0,transaction_type_id:0,transaction_number:"",cost:void 0,mohrestatus:"",status:"in_process"}),[B,J]=A.useState(null),[P,K]=A.useState(""),[H,se]=A.useState({id:0,mohrestatus:""}),[X,R]=A.useState(0),[Q,Y]=A.useState(""),{data:$}=Rt({queryKey:["tasheel-dropdowns"],queryFn:()=>$c.getDropdowns(),staleTime:3e5}),me=$?.companies||[],D=$?.types||[],U=wt({mutationFn:()=>$c.searchTransactions({...n,status_filter:t,page:i}),onSuccess:ee=>{console.log("Search response:",ee);const Ie=ee.data||ee;Array.isArray(Ie)?(u(Ie),m({currentPage:ee.currentPage||1,totalPages:ee.totalPages||1,totalRecords:ee.totalRecords||0,recordsPerPage:ee.recordsPerPage||10})):ee.status==="success"&&(u([]),m({currentPage:ee.currentPage||1,totalPages:ee.totalPages||0,totalRecords:ee.totalRecords||0,recordsPerPage:ee.recordsPerPage||10}))},onError:ee=>{console.error("Search error:",ee),ee?.status!=="success"&&W.fire("Error",ee.response?.data?.message||"Failed to fetch transactions","error")}}),le=wt({mutationFn:ee=>$c.addTransaction(ee),onSuccess:ee=>{if(ee.status==="success")W.fire("Success",ee.message,"success"),y(!1),ke(),U.mutate(),s.invalidateQueries({queryKey:["tasheel-dropdowns"]});else if(ee.message==="form_errors"&&ee.errors){let Ie=`Validation errors:
`;Object.values(ee.errors).forEach(He=>{Ie+=He+`
`}),W.fire("Validation Error",Ie,"error")}else W.fire("Error",ee.message,"error")},onError:ee=>{W.fire("Error",ee.response?.data?.message||"Failed to add transaction","error")}}),de=wt({mutationFn:ee=>$c.updateTransaction(ee),onSuccess:ee=>{if(ee.status==="success")W.fire("Success",ee.message,"success"),y(!1),ke(),U.mutate();else if(ee.message==="form_errors"&&ee.errors){let Ie=`Validation errors:
`;Object.values(ee.errors).forEach(He=>{Ie+=He+`
`}),W.fire("Validation Error",Ie,"error")}else W.fire("Error",ee.message,"error")},onError:ee=>{W.fire("Error",ee.response?.data?.message||"Failed to update transaction","error")}}),G=wt({mutationFn:ee=>$c.deleteTransaction(ee),onSuccess:ee=>{ee.status==="success"?(W.fire("Success",ee.message,"success"),U.mutate()):W.fire("Error",ee.message,"error")}}),je=wt({mutationFn:ee=>$c.changeStatus(ee),onSuccess:ee=>{ee.status==="success"?(W.fire("Success",ee.message,"success"),j(!1),U.mutate()):W.fire("Error",ee.message,"error")}}),De=wt({mutationFn:ee=>$c.markAsCompleted(ee),onSuccess:ee=>{ee.status==="success"?(W.fire("Success",ee.message,"success"),N(!1),a("completed"),U.mutate()):W.fire("Error",ee.message,"error")}}),Pe=wt({mutationFn:ee=>$c.addTransactionType(ee),onSuccess:ee=>{ee.status==="success"?(W.fire("Success",ee.message,"success"),S(!1),Y(""),s.invalidateQueries({queryKey:["tasheel-dropdowns"]})):W.fire("Error",ee.message,"error")}});A.useEffect(()=>{U.mutate()},[t,i]);const ke=()=>{q({company_id:void 0,transaction_type_id:0,transaction_number:"",cost:void 0,mohrestatus:"",status:"in_process"}),J(null),K(""),L(!1),V(null)},Ye=()=>{ke(),y(!0)},Qe=async ee=>{try{const Ie=await $c.getTransaction(ee);q({company_id:Ie.company_id||void 0,transaction_type_id:Ie.transaction_type_id,transaction_number:Ie.transaction_number,cost:Ie.cost||void 0,mohrestatus:Ie.mohrestatus||"",status:Ie.status}),V(ee),L(!0),y(!0)}catch(Ie){W.fire("Error",Ie.message||"Failed to fetch transaction","error")}},et=ee=>{W.fire({title:"Are you sure?",text:"You want to delete this transaction?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#dc3545",cancelButtonColor:"#6c757d",confirmButtonText:"Yes, delete it!"}).then(Ie=>{Ie.isConfirmed&&G.mutate(ee)})},Xe=(ee,Ie)=>{se({id:ee,mohrestatus:Ie||""}),j(!0)},re=ee=>{R(ee),N(!0)},ne=ee=>{if(ee.preventDefault(),!te.transaction_type_id||!te.transaction_number){W.fire("Validation Error","Transaction Type and Transaction Number are required","error");return}E&&z?de.mutate({id:z,...te}):le.mutate({...te,attachment:B||void 0})},Se=ee=>{ee.preventDefault(),o(1),U.mutate()},Ve=ee=>{const Ie=ee.target.files?.[0];Ie&&(J(Ie),K("Processing file..."),K("File selected. Please enter the application number manually for now."))},xt=ee=>{if(!ee)return"badge-secondary";const Ie=ee.toLowerCase();return Ie.includes("complete")||Ie.includes("approved")||Ie.includes("success")?"badge-success":Ie.includes("reject")||Ie.includes("fail")||Ie.includes("error")?"badge-danger":Ie.includes("process")||Ie.includes("under")||Ie.includes("pending")?"badge-warning":"badge-info"};return e.jsxs("div",{className:"tasheel-container",children:[e.jsxs("div",{className:"page-header",children:[e.jsx("h3",{children:"Tasheel Transactions"}),e.jsxs("button",{className:"btn btn-success",onClick:Ye,children:[e.jsx("i",{className:"fa fa-plus"})," Add Transaction"]})]}),e.jsxs("div",{className:"panel",children:[e.jsx("div",{className:"panel-heading",children:e.jsx("h4",{children:"Search Transactions"})}),e.jsx("div",{className:"panel-body",children:e.jsx("form",{onSubmit:Se,children:e.jsxs("div",{className:"search-filters",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Company"}),e.jsxs("select",{className:"form-control",value:n.company,onChange:ee=>r({...n,company:ee.target.value}),children:[e.jsx("option",{value:"",children:"Select"}),me.map(ee=>e.jsx("option",{value:ee.company_id,children:ee.company_name},ee.company_id))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Transaction Type"}),e.jsxs("div",{className:"input-group",children:[e.jsxs("select",{className:"form-control",value:n.type,onChange:ee=>r({...n,type:ee.target.value}),children:[e.jsx("option",{value:"",children:"All"}),D.map(ee=>e.jsx("option",{value:ee.id,children:ee.name},ee.id))]}),e.jsx("button",{type:"button",className:"btn btn-success btn-sm",onClick:()=>S(!0),children:e.jsx("i",{className:"fa fa-plus"})})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Search"}),e.jsx("input",{type:"text",className:"form-control",placeholder:"Search",value:n.search,onChange:ee=>r({...n,search:ee.target.value})})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Moher Status"}),e.jsx("input",{type:"text",className:"form-control",placeholder:"Moher Status",value:n.mohrestatus,onChange:ee=>r({...n,mohrestatus:ee.target.value})})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:""}),e.jsxs("button",{type:"submit",className:"btn btn-primary w-100",children:[e.jsx("i",{className:"fa fa-filter"})," Filter"]})]})]})})})]}),e.jsxs("div",{className:"panel",children:[e.jsx("div",{className:"panel-heading",children:e.jsx("h4",{children:"Transactions"})}),e.jsxs("div",{className:"tabs-container",children:[e.jsxs("ul",{className:"nav nav-tabs",children:[e.jsx("li",{className:"nav-item",children:e.jsx("button",{className:`nav-link ${t==="in_process"?"active":""}`,onClick:()=>{a("in_process"),o(1)},children:"In Process"})}),e.jsx("li",{className:"nav-item",children:e.jsx("button",{className:`nav-link ${t==="completed"?"active":""}`,onClick:()=>{a("completed"),o(1)},children:"Completed"})})]}),e.jsxs("div",{className:"tab-content",children:[e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-striped table-bordered",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"ID"}),e.jsx("th",{children:"Company"}),e.jsx("th",{children:"Transaction"}),e.jsx("th",{children:"Moher Status"}),e.jsx("th",{children:"Cost"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:U.isPending?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"text-center",children:"Loading..."})}):c.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"text-center",children:"No transactions found"})}):c.map(ee=>e.jsxs("tr",{children:[e.jsx("td",{children:ee.id}),e.jsx("td",{children:ee.company_name||"-"}),e.jsxs("td",{children:[e.jsx("strong",{children:ee.transaction_number}),e.jsx("br",{}),e.jsx("small",{className:"text-muted",children:ee.transaction_type_name}),ee.api_transaction_type&&e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsxs("small",{className:"text-muted",children:["API Type: ",ee.api_transaction_type]})]})]}),e.jsx("td",{children:e.jsx("span",{className:`badge ${xt(ee.mohrestatus)}`,children:ee.mohrestatus||"No Status"})}),e.jsx("td",{children:ee.cost?`${ee.cost} AED`:"-"}),e.jsx("td",{children:e.jsxs("div",{className:"btn-group",children:[e.jsx("button",{className:"btn btn-sm btn-info",onClick:()=>Xe(ee.id,ee.mohrestatus||""),title:"Change Status",children:e.jsx("i",{className:"fa fa-edit"})}),t==="in_process"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"btn btn-sm btn-warning",onClick:()=>Qe(ee.id),title:"Edit",children:e.jsx("i",{className:"fa fa-pencil"})}),e.jsx("button",{className:"btn btn-sm btn-success",onClick:()=>re(ee.id),title:"Mark as Completed",children:e.jsx("i",{className:"fa fa-check"})}),e.jsx("button",{className:"btn btn-sm btn-danger",onClick:()=>et(ee.id),title:"Delete",children:e.jsx("i",{className:"fa fa-trash"})})]})]})})]},ee.id))})]})}),h.totalPages>1&&e.jsxs("div",{className:"pagination-container",children:[e.jsxs("div",{className:"pagination-info",children:["Showing ",(h.currentPage-1)*h.recordsPerPage+1," to"," ",Math.min(h.currentPage*h.recordsPerPage,h.totalRecords)," of"," ",h.totalRecords," entries"]}),e.jsxs("ul",{className:"pagination",children:[e.jsx("li",{className:`page-item ${i===1?"disabled":""}`,children:e.jsx("button",{className:"page-link",onClick:()=>o(i-1),disabled:i===1,children:"Previous"})}),Array.from({length:h.totalPages},(ee,Ie)=>Ie+1).map(ee=>e.jsx("li",{className:`page-item ${i===ee?"active":""}`,children:e.jsx("button",{className:"page-link",onClick:()=>o(ee),children:ee})},ee)),e.jsx("li",{className:`page-item ${i===h.totalPages?"disabled":""}`,children:e.jsx("button",{className:"page-link",onClick:()=>o(i+1),disabled:i===h.totalPages,children:"Next"})})]})]})]})]})]}),p&&e.jsx("div",{className:"modal-overlay",onClick:()=>y(!1),children:e.jsxs("div",{className:"modal-content",onClick:ee=>ee.stopPropagation(),children:[e.jsxs("div",{className:"modal-header bg-dark",children:[e.jsx("h5",{children:E?"Edit Transaction":"New Transaction"}),e.jsx("button",{className:"close-btn",onClick:()=>y(!1),children:""})]}),e.jsxs("form",{onSubmit:ne,children:[e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Company Name"}),e.jsxs("select",{className:"form-control",value:te.company_id||"",onChange:ee=>q({...te,company_id:Number(ee.target.value)||void 0}),children:[e.jsx("option",{value:"",children:"Select"}),me.map(ee=>e.jsx("option",{value:ee.company_id,children:ee.company_name},ee.company_id))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:["Transaction Type ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("div",{className:"input-group",children:[e.jsxs("select",{className:"form-control",value:te.transaction_type_id||"",onChange:ee=>q({...te,transaction_type_id:Number(ee.target.value)}),required:!0,children:[e.jsx("option",{value:"",children:"Select"}),D.map(ee=>e.jsx("option",{value:ee.id,children:ee.name},ee.id))]}),e.jsx("button",{type:"button",className:"btn btn-success btn-sm",onClick:()=>S(!0),children:e.jsx("i",{className:"fa fa-plus"})})]})]}),!E&&e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Upload PDF/Image (to extract application number)"}),e.jsx("input",{type:"file",className:"form-control",accept:".pdf,.jpg,.jpeg,.png",onChange:Ve}),P&&e.jsx("div",{className:"alert alert-info mt-2",children:P})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:["Transaction Number ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"text",className:"form-control",value:te.transaction_number,onChange:ee=>q({...te,transaction_number:ee.target.value}),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Cost"}),e.jsx("input",{type:"number",step:"0.01",className:"form-control",value:te.cost||"",onChange:ee=>q({...te,cost:Number(ee.target.value)||void 0}),placeholder:"Cost"})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>y(!1),children:"Close"}),e.jsx("button",{type:"submit",className:"btn btn-success",children:"Save"})]})]})]})}),g&&e.jsx("div",{className:"modal-overlay",onClick:()=>j(!1),children:e.jsxs("div",{className:"modal-content modal-sm",onClick:ee=>ee.stopPropagation(),children:[e.jsxs("div",{className:"modal-header bg-dark",children:[e.jsx("h5",{children:"Change Moher Status"}),e.jsx("button",{className:"close-btn",onClick:()=>j(!1),children:""})]}),e.jsxs("form",{onSubmit:ee=>{ee.preventDefault(),je.mutate(H)},children:[e.jsx("div",{className:"modal-body",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Moher Status"}),e.jsx("input",{type:"text",className:"form-control",value:H.mohrestatus,onChange:ee=>se({...H,mohrestatus:ee.target.value}),placeholder:"Moher Status"})]})}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>j(!1),children:"Close"}),e.jsx("button",{type:"submit",className:"btn btn-success",children:"Save"})]})]})]})}),b&&e.jsx("div",{className:"modal-overlay",onClick:()=>N(!1),children:e.jsxs("div",{className:"modal-content modal-sm",onClick:ee=>ee.stopPropagation(),children:[e.jsxs("div",{className:"modal-header bg-dark",children:[e.jsx("h5",{children:"Mark Transaction as Completed"}),e.jsx("button",{className:"close-btn",onClick:()=>N(!1),children:""})]}),e.jsxs("div",{className:"modal-body",children:[e.jsx("p",{children:"Are you sure you want to mark this transaction as completed?"}),e.jsx("p",{children:"Once marked as completed, this transaction will not be updated by automatic processes."})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>N(!1),children:"Cancel"}),e.jsx("button",{type:"button",className:"btn btn-success",onClick:()=>{De.mutate(X)},children:"Confirm"})]})]})}),v&&e.jsx("div",{className:"modal-overlay",onClick:()=>S(!1),children:e.jsxs("div",{className:"modal-content modal-sm",onClick:ee=>ee.stopPropagation(),children:[e.jsxs("div",{className:"modal-header bg-dark",children:[e.jsx("h5",{children:"Add Transaction Type"}),e.jsx("button",{className:"close-btn",onClick:()=>S(!1),children:""})]}),e.jsxs("form",{onSubmit:ee=>{if(ee.preventDefault(),!Q.trim()){W.fire("Error","Type name is required","error");return}Pe.mutate(Q)},children:[e.jsx("div",{className:"modal-body",children:e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:["Type Name ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"text",className:"form-control",value:Q,onChange:ee=>Y(ee.target.value),required:!0})]})}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>S(!1),children:"Close"}),e.jsx("button",{type:"submit",className:"btn btn-success",children:"Save"})]})]})]})})]})}class r9{baseUrl=`${Ct.baseUrl}`;async searchCheques(t){const a=new FormData;a.append("action","searchCheques"),t.startDate&&a.append("startDate",t.startDate),t.endDate&&a.append("endDate",t.endDate),t.search&&a.append("search",t.search),t.type&&a.append("type",t.type),t.account&&a.append("account_id",t.account);const n=await gs.post(`${this.baseUrl}/api/cheque/search.php`,a,{withCredentials:!0,headers:{"Content-Type":"multipart/form-data"}});if(n.data.success||n.data.status==="success")return n.data.data||[];throw new Error(n.data.message||"Failed to fetch cheques")}async getCheque(t){const a=new FormData;a.append("action","getCheque"),a.append("id",t.toString());const n=await gs.post(`${this.baseUrl}/api/cheque/manage.php`,a,{withCredentials:!0,headers:{"Content-Type":"multipart/form-data"}});if(n.data.success||n.data.status==="success")return n.data.data;throw new Error(n.data.message||"Failed to fetch cheque")}async addCheque(t){const a=new FormData;return a.append("action","addCheque"),a.append("dateAdd",t.date),a.append("numberAdd",t.number),a.append("typeAdd",t.type),a.append("payeeAdd",t.payee),a.append("amountAdd",t.amount.toString()),a.append("amountConfirmAdd",t.amountConfirm.toString()),t.type==="payable"&&t.account_id?a.append("accountIDAdd",t.account_id.toString()):t.type==="receivable"&&t.bank&&a.append("bankAdd",t.bank),a.append("filename",t.file),(await gs.post(`${this.baseUrl}/api/cheque/manage.php`,a,{withCredentials:!0,headers:{"Content-Type":"multipart/form-data"}})).data}async updateCheque(t){const a=new FormData;return a.append("action","updateCheque"),a.append("idEdit",t.id.toString()),a.append("dateEdit",t.date),a.append("numberEdit",t.number),a.append("typeEdit",t.type),a.append("payeeEdit",t.payee),a.append("amountEdit",t.amount.toString()),a.append("amountConfirmEdit",t.amountConfirm.toString()),t.type==="payable"&&t.account_id?a.append("accountIDEdit",t.account_id.toString()):t.type==="receivable"&&t.bank&&a.append("bankEdit",t.bank),t.file&&a.append("filename",t.file),(await gs.post(`${this.baseUrl}/api/cheque/manage.php`,a,{withCredentials:!0,headers:{"Content-Type":"multipart/form-data"}})).data}async deleteCheque(t){const a=new FormData;return a.append("action","deleteCheque"),a.append("id",t.toString()),(await gs.post(`${this.baseUrl}/api/cheque/manage.php`,a,{withCredentials:!0,headers:{"Content-Type":"multipart/form-data"}})).data}async payCheque(t){const a=new FormData;return a.append("action","payCheque"),a.append("id",t.toString()),(await gs.post(`${this.baseUrl}/api/cheque/manage.php`,a,{withCredentials:!0,headers:{"Content-Type":"multipart/form-data"}})).data}async getAccounts(){return(await gs.get(`${this.baseUrl}/api/accounts.php`,{withCredentials:!0,headers:{"Content-Type":"application/json"}})).data}}const Nu=new r9;function i9(){Wa();const s=new Date().toISOString().split("T")[0],t=new Date(new Date().getFullYear(),new Date().getMonth(),1).toISOString().split("T")[0],[a,n]=A.useState({startDate:t,endDate:s,search:"",type:"",account:""}),[r,i]=A.useState([]),[o,c]=A.useState(!1),[u,h]=A.useState(!1),[m,p]=A.useState(!1),[y,g]=A.useState(null),[j,b]=A.useState({date:s,number:"",type:"payable",payee:"",amount:0,amountConfirm:0,account_id:void 0,bank:""}),[N,v]=A.useState({id:0,date:s,number:"",type:"payable",payee:"",amount:0,amountConfirm:0,account_id:void 0,bank:""}),[S,E]=A.useState(null),[L,z]=A.useState(null),{data:V=[]}=Rt({queryKey:["cheque-accounts"],queryFn:()=>Nu.getAccounts(),staleTime:3e5}),te=wt({mutationFn:D=>Nu.searchCheques(D),onSuccess:D=>{i(D)},onError:D=>{console.error("Search error:",D),W.fire("Error",D.response?.data?.message||"Failed to fetch cheques","error")}}),q=wt({mutationFn:D=>Nu.addCheque(D),onSuccess:D=>{if(D.status==="success")W.fire("Success",D.message,"success"),c(!1),K(),te.mutate(a);else if(D.message==="form_errors"&&D.errors){let U="";Object.values(D.errors).forEach(le=>{U+=le+`
`}),W.fire("Validation Error",U,"error")}else W.fire("Error",D.message,"error")},onError:D=>{W.fire("Error",D.response?.data?.message||"Failed to add cheque","error")}}),B=wt({mutationFn:D=>Nu.updateCheque(D),onSuccess:D=>{if(D.status==="success")W.fire("Success",D.message,"success"),h(!1),H(),te.mutate(a);else if(D.message==="form_errors"&&D.errors){let U="";Object.values(D.errors).forEach(le=>{U+=le+`
`}),W.fire("Validation Error",U,"error")}else W.fire("Error",D.message,"error")},onError:D=>{W.fire("Error",D.response?.data?.message||"Failed to update cheque","error")}}),J=wt({mutationFn:D=>Nu.deleteCheque(D),onSuccess:D=>{D.status==="success"?(W.fire("Success",D.message,"success"),te.mutate(a)):W.fire("Error",D.message,"error")}}),P=wt({mutationFn:D=>Nu.payCheque(D),onSuccess:D=>{D.status==="success"?(W.fire("Success",D.message,"success"),te.mutate(a)):W.fire("Error",D.message,"error")}});A.useEffect(()=>{te.mutate(a)},[]);const K=()=>{b({date:s,number:"",type:"payable",payee:"",amount:0,amountConfirm:0,account_id:void 0,bank:""}),E(null)},H=()=>{v({id:0,date:s,number:"",type:"payable",payee:"",amount:0,amountConfirm:0,account_id:void 0,bank:""}),z(null)},se=()=>{K(),c(!0)},X=async D=>{try{const U=await Nu.getCheque(D);v({id:U.id,date:U.date,number:U.number,type:U.type,payee:U.payee,amount:U.amount,amountConfirm:U.amount,account_id:U.account_id||void 0,bank:U.bank||""}),h(!0)}catch(U){W.fire("Error",U.message||"Failed to fetch cheque","error")}},R=D=>{W.fire({title:"Are you sure?",text:"You want to delete this cheque record?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#dc3545",cancelButtonColor:"#6c757d",confirmButtonText:"Yes, delete it!"}).then(U=>{U.isConfirmed&&J.mutate(D)})},Q=(D,U,le)=>{W.fire({title:"Mark this cheque as PAID?",html:`
        <div style="text-align: left; margin: 20px;">
          <p><strong>Payee:</strong> ${le}</p>
          <p><strong>Amount:</strong> ${U} AED</p>
          <p class="text-danger mt-3">This action cannot be undone.</p>
        </div>
      `,icon:"question",showCancelButton:!0,confirmButtonColor:"#28a745",cancelButtonColor:"#6c757d",confirmButtonText:"Yes, mark as paid"}).then(de=>{de.isConfirmed&&P.mutate(D)})},Y=D=>{if(D.preventDefault(),!S){W.fire("Error","Please upload a cheque photo","error");return}if(j.amount!==j.amountConfirm){W.fire("Error","Amount and Confirm Amount must match","error");return}if(j.type==="payable"&&!j.account_id){W.fire("Error","Please select an account for payable cheque","error");return}if(j.type==="receivable"&&!j.bank){W.fire("Error","Please enter bank name for receivable cheque","error");return}q.mutate({...j,file:S})},$=D=>{if(D.preventDefault(),N.amount!==N.amountConfirm){W.fire("Error","Amount and Confirm Amount must match","error");return}if(N.type==="payable"&&!N.account_id){W.fire("Error","Please select an account for payable cheque","error");return}if(N.type==="receivable"&&!N.bank){W.fire("Error","Please enter bank name for receivable cheque","error");return}B.mutate({...N,file:L||void 0})},me=D=>{D.preventDefault(),te.mutate(a)};return e.jsxs("div",{className:"cheques-container",children:[e.jsxs("div",{className:"page-header",children:[e.jsx("h3",{children:"Cheques"}),e.jsxs("button",{className:"btn btn-success",onClick:se,children:[e.jsx("i",{className:"fa fa-plus"})," Add Cheque"]})]}),e.jsxs("div",{className:"panel",children:[e.jsx("div",{className:"panel-heading",children:e.jsx("h4",{children:"Search Cheques"})}),e.jsx("div",{className:"panel-body",children:e.jsx("form",{onSubmit:me,children:e.jsxs("div",{className:"search-filters",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"From Date"}),e.jsx("input",{type:"date",className:"form-control",value:a.startDate||"",onChange:D=>n({...a,startDate:D.target.value})})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"To Date"}),e.jsx("input",{type:"date",className:"form-control",value:a.endDate||"",onChange:D=>n({...a,endDate:D.target.value})})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Search"}),e.jsx("input",{type:"text",className:"form-control",placeholder:"Search",value:a.search,onChange:D=>n({...a,search:D.target.value})})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Type"}),e.jsxs("select",{className:"form-control",value:a.type,onChange:D=>n({...a,type:D.target.value}),children:[e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"payable",children:"Payable"}),e.jsx("option",{value:"receivable",children:"Receivable"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Account"}),e.jsxs("select",{className:"form-control",value:a.account,onChange:D=>n({...a,account:D.target.value}),children:[e.jsx("option",{value:"",children:"Select"}),V.map(D=>e.jsx("option",{value:D.account_ID,children:D.account_Name},D.account_ID))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:""}),e.jsxs("button",{type:"submit",className:"btn btn-primary w-100",children:[e.jsx("i",{className:"fa fa-filter"})," Filter"]})]})]})})})]}),e.jsxs("div",{className:"panel",children:[e.jsx("div",{className:"panel-heading",children:e.jsx("h4",{children:"Cheques"})}),e.jsx("div",{className:"panel-body",children:e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-striped table-bordered",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"ID"}),e.jsx("th",{children:"Date"}),e.jsx("th",{children:"Number"}),e.jsx("th",{children:"Type"}),e.jsx("th",{children:"Payee"}),e.jsx("th",{children:"Account / Bank"}),e.jsx("th",{children:"Amount"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:te.isPending?e.jsx("tr",{children:e.jsx("td",{colSpan:9,className:"text-center",children:"Loading..."})}):r.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:9,className:"text-center",children:"No cheques found"})}):r.map(D=>e.jsxs("tr",{children:[e.jsx("td",{children:D.id}),e.jsx("td",{children:new Date(D.date).toLocaleDateString()}),e.jsx("td",{children:D.number}),e.jsx("td",{children:e.jsx("span",{className:`badge ${D.type==="payable"?"badge-danger":"badge-success"}`,children:D.type==="payable"?"Payable":"Receivable"})}),e.jsx("td",{children:D.payee}),e.jsx("td",{children:D.type==="payable"?D.account:D.bank}),e.jsxs("td",{children:[D.amount," AED"]}),e.jsx("td",{children:D.cheque_status==="paid"?e.jsxs("div",{children:[e.jsx("span",{className:"badge badge-success",children:"Paid"}),D.paid_date&&e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsxs("small",{className:"text-muted",children:["Paid: ",new Date(D.paid_date).toLocaleString()]})]})]}):e.jsx("span",{className:"badge badge-warning",children:"Pending"})}),e.jsx("td",{children:e.jsxs("div",{className:"btn-group",children:[D.type==="payable"&&D.cheque_status!=="paid"&&e.jsx("button",{className:"btn btn-sm btn-success",onClick:()=>Q(D.id,D.amount,D.payee),title:"Mark as Paid",children:e.jsx("i",{className:"fa fa-credit-card"})}),D.filename&&e.jsx("a",{href:`${Ct.baseUrl}/attachment/cheques/${D.filename}`,className:"btn btn-sm btn-info",target:"_blank",rel:"noopener noreferrer",title:"View Photo",children:e.jsx("i",{className:"fa fa-photo"})}),e.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>X(D.id),title:"Edit",children:e.jsx("i",{className:"fa fa-edit"})}),e.jsx("button",{className:"btn btn-sm btn-danger",onClick:()=>R(D.id),title:"Delete",children:e.jsx("i",{className:"fa fa-trash"})})]})})]},D.id))})]})})})]}),o&&e.jsx("div",{className:"modal-overlay",onClick:()=>c(!1),children:e.jsxs("div",{className:"modal-content",onClick:D=>D.stopPropagation(),children:[e.jsxs("div",{className:"modal-header bg-dark",children:[e.jsx("h5",{children:"New Cheque"}),e.jsx("button",{className:"close-btn",onClick:()=>c(!1),children:""})]}),e.jsxs("form",{onSubmit:Y,children:[e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group col-md-4",children:[e.jsxs("label",{children:["Date ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"date",className:"form-control",value:j.date,onChange:D=>b({...j,date:D.target.value}),required:!0})]}),e.jsxs("div",{className:"form-group col-md-8",children:[e.jsxs("label",{children:["Number ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"text",className:"form-control",value:j.number,onChange:D=>b({...j,number:D.target.value}),required:!0})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group col-md-4",children:[e.jsxs("label",{children:["Type ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("select",{className:"form-control",value:j.type,onChange:D=>b({...j,type:D.target.value}),required:!0,children:[e.jsx("option",{value:"",children:"Choose type"}),e.jsx("option",{value:"payable",children:"Payable"}),e.jsx("option",{value:"receivable",children:"Receivable"})]})]}),j.type==="payable"&&e.jsxs("div",{className:"form-group col-md-8",children:[e.jsxs("label",{children:["From Account ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("select",{className:"form-control",value:j.account_id||"",onChange:D=>b({...j,account_id:Number(D.target.value)}),required:!0,children:[e.jsx("option",{value:"",children:"Select Account"}),V.map(D=>e.jsx("option",{value:D.account_ID,children:D.account_Name},D.account_ID))]})]}),j.type==="receivable"&&e.jsxs("div",{className:"form-group col-md-8",children:[e.jsx("label",{children:"Bank Name"}),e.jsx("input",{type:"text",className:"form-control",value:j.bank,onChange:D=>b({...j,bank:D.target.value})})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Payee"}),e.jsx("input",{type:"text",className:"form-control",value:j.payee,onChange:D=>b({...j,payee:D.target.value})})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group col-md-6",children:[e.jsxs("label",{children:["Amount ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"number",step:"0.01",className:"form-control",value:j.amount||"",onChange:D=>b({...j,amount:Number(D.target.value)}),required:!0})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsxs("label",{children:["Confirm Amount ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"number",step:"0.01",className:"form-control",value:j.amountConfirm||"",onChange:D=>b({...j,amountConfirm:Number(D.target.value)}),required:!0})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:["Cheque Photo ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"file",className:"form-control",accept:"image/*",onChange:D=>E(D.target.files?.[0]||null),required:!0})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>c(!1),children:"Close"}),e.jsx("button",{type:"submit",className:"btn btn-success",children:"Save"})]})]})]})}),u&&e.jsx("div",{className:"modal-overlay",onClick:()=>h(!1),children:e.jsxs("div",{className:"modal-content",onClick:D=>D.stopPropagation(),children:[e.jsxs("div",{className:"modal-header bg-dark",children:[e.jsx("h5",{children:"Edit Cheque"}),e.jsx("button",{className:"close-btn",onClick:()=>h(!1),children:""})]}),e.jsxs("form",{onSubmit:$,children:[e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group col-md-4",children:[e.jsxs("label",{children:["Date ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"date",className:"form-control",value:N.date,onChange:D=>v({...N,date:D.target.value}),required:!0})]}),e.jsxs("div",{className:"form-group col-md-8",children:[e.jsxs("label",{children:["Number ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"text",className:"form-control",value:N.number,onChange:D=>v({...N,number:D.target.value}),required:!0})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group col-md-4",children:[e.jsxs("label",{children:["Type ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("select",{className:"form-control",value:N.type,onChange:D=>v({...N,type:D.target.value}),required:!0,children:[e.jsx("option",{value:"payable",children:"Payable"}),e.jsx("option",{value:"receivable",children:"Receivable"})]})]}),N.type==="payable"&&e.jsxs("div",{className:"form-group col-md-8",children:[e.jsxs("label",{children:["From Account ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("select",{className:"form-control",value:N.account_id||"",onChange:D=>v({...N,account_id:Number(D.target.value)}),required:!0,children:[e.jsx("option",{value:"",children:"Select Account"}),V.map(D=>e.jsx("option",{value:D.account_ID,children:D.account_Name},D.account_ID))]})]}),N.type==="receivable"&&e.jsxs("div",{className:"form-group col-md-8",children:[e.jsx("label",{children:"Bank Name"}),e.jsx("input",{type:"text",className:"form-control",value:N.bank,onChange:D=>v({...N,bank:D.target.value})})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Payee"}),e.jsx("input",{type:"text",className:"form-control",value:N.payee,onChange:D=>v({...N,payee:D.target.value})})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group col-md-6",children:[e.jsxs("label",{children:["Amount ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"number",step:"0.01",className:"form-control",value:N.amount||"",onChange:D=>v({...N,amount:Number(D.target.value)}),required:!0})]}),e.jsxs("div",{className:"form-group col-md-6",children:[e.jsxs("label",{children:["Confirm Amount ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"number",step:"0.01",className:"form-control",value:N.amountConfirm||"",onChange:D=>v({...N,amountConfirm:Number(D.target.value)}),required:!0})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:["Cheque Photo ",e.jsx("span",{className:"text-danger",children:"(if you wish to update)"})]}),e.jsx("input",{type:"file",className:"form-control",accept:"image/*",onChange:D=>z(D.target.files?.[0]||null)})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>h(!1),children:"Close"}),e.jsx("button",{type:"submit",className:"btn btn-success",children:"Update"})]})]})]})})]})}const ol={async getSalaryReport(s){const t=new FormData;return t.append("GetSalaryReport","getSalaryReport"),s.searchTerm&&t.append("SearchTerm",s.searchTerm),s.searchemployee_id!==void 0&&t.append("Searchemployee_id",s.searchemployee_id.toString()),s.searchMonth&&t.append("SearchMonth",s.searchMonth),s.searchYear&&t.append("SearchYear",s.searchYear),(await Ne.post(`${Ct.baseUrl}/salaryController.php`,t,{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0})).data},async getEmployees(){const s=new FormData;return s.append("Select_Employee","select_employee"),(await Ne.post(`${Ct.baseUrl}/salaryController.php`,s,{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0})).data},async getEmployeesWithSalary(){const s=new FormData;return s.append("GetEmployeeWithSalary","true"),(await Ne.post(`${Ct.baseUrl}/salaryController.php`,s,{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0})).data},async getEmployeeSalarySummary(s,t){const a=new FormData;return a.append("GetEmployeeSalarySummary","true"),s&&a.append("SummaryMonth",s),t&&a.append("SummaryYear",t),(await Ne.post(`${Ct.baseUrl}/salaryController.php`,a,{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0})).data},async addSalary(s){const t=new FormData;return t.append("AddSalary","addSalary"),t.append("Addemployee_ID",s.Addemployee_ID.toString()),t.append("Salary_Amount",s.Salary_Amount),t.append("Addaccount_ID",s.Addaccount_ID.toString()),(await Ne.post(`${Ct.baseUrl}/salaryController.php`,t,{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0})).data},async updateSalary(s){const t=new FormData;return t.append("UpdSalary","updSalary"),t.append("SalaryID",s.SalaryID.toString()),t.append("Updemployee_id",s.Updemployee_id.toString()),t.append("Updsalary_Amount",s.Updsalary_Amount),t.append("Updaccount_ID",s.Updaccount_ID.toString()),(await Ne.post(`${Ct.baseUrl}/salaryController.php`,t,{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0})).data},async deleteSalary(s){const t=new FormData;return t.append("Delete","Delete"),t.append("ID",s.toString()),(await Ne.post(`${Ct.baseUrl}/salaryController.php`,t,{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0})).data},async getSalaryForUpdate(s){const t=new FormData;return t.append("GetDataForUpdate","GetDataForUpdate"),t.append("ID",s.toString()),(await Ne.post(`${Ct.baseUrl}/salaryController.php`,t,{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0})).data},async saveSalaryAdjustment(s){const t=new FormData;return t.append("SalaryAdjustment","true"),t.append("EmployeeId",s.EmployeeId.toString()),t.append("EffectiveDate",s.EffectiveDate),t.append("AdjustmentType",s.AdjustmentType),t.append("CurrentSalary",s.CurrentSalary),t.append("NewSalary",s.NewSalary),s.Reason&&t.append("Reason",s.Reason),(await Ne.post(`${Ct.baseUrl}/salaryController.php`,t,{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0})).data},async getPaymentSchedules(){const s=new FormData;return s.append("GetPaymentSchedules","true"),(await Ne.post(`${Ct.baseUrl}/salaryController.php`,s,{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0})).data},async updatePaymentSchedule(s,t){const a=new FormData;return a.append("UpdatePaymentSchedule","true"),a.append("EmployeeId",s.toString()),a.append("PaymentDay",t.toString()),(await Ne.post(`${Ct.baseUrl}/salaryController.php`,a,{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0})).data},async getSalaryHistory(){const s=new FormData;return s.append("GetSalaryHistory","true"),(await Ne.post(`${Ct.baseUrl}/salaryController.php`,s,{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0})).data},async getPrintReport(s,t){const a=new FormData;return a.append("GetPrintReport","true"),a.append("ReportMonth",s),a.append("ReportYear",t),(await Ne.post(`${Ct.baseUrl}/salaryController.php`,a,{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0})).data}};function l9(){const s=Wa(),[t,a]=A.useState(!1),[n,r]=A.useState(""),[i,o]=A.useState(""),[c,u]=A.useState("-1"),[h,m]=A.useState([]),[p,y]=A.useState([]),[g,j]=A.useState({totalSalary:0,employeesPaid:0,pendingPayments:0,averageSalary:0}),[b,N]=A.useState(!1),[v,S]=A.useState(!1),[E,L]=A.useState(!1),[z,V]=A.useState(!1),[te,q]=A.useState(!1),[B,J]=A.useState({Addemployee_ID:0,Salary_Amount:"",Addaccount_ID:0}),[P,K]=A.useState({SalaryID:0,Updemployee_id:0,Updsalary_Amount:"",Updaccount_ID:0}),[H,se]=A.useState({EmployeeId:0,EffectiveDate:new Date().toISOString().split("T")[0],AdjustmentType:"increase",CurrentSalary:"",NewSalary:"",Reason:""}),[X,R]=A.useState("amount"),[Q,Y]=A.useState(""),[$,me]=A.useState(""),[D,U]=A.useState([]),[le,de]=A.useState({}),{data:G=[]}=Rt({queryKey:["salary-employees"],queryFn:()=>ol.getEmployees(),staleTime:3e5}),{data:je=[]}=Rt({queryKey:["salary-employees-with-salary"],queryFn:()=>ol.getEmployeesWithSalary(),staleTime:3e5}),{data:De=[]}=Rt({queryKey:["salary-accounts"],queryFn:()=>yo.getAccounts(),staleTime:3e5});A.useEffect(()=>{const ve=new Date,Ze=(ve.getMonth()+1).toString().padStart(2,"0"),Wt=ve.getFullYear().toString();r(Ze),o(Wt),Pe(Ze,Wt)},[]);const Pe=async(ve,Ze)=>{try{const Wt=ve||n,Fs=Ze||i;if(!Wt||!Fs)return;const Ts=await ol.getEmployeeSalarySummary(Wt,Fs);y(Ts);const aa=Ts.reduce((Ln,La)=>Ln+parseFloat(La.monthly_salary_due.toString()),0),Os=Ts.filter(Ln=>Ln.payment_status==="paid").length,$s=Ts.filter(Ln=>Ln.payment_status==="pending").length,ja=Ts.length>0?aa/Ts.length:0;j({totalSalary:aa,employeesPaid:Os,pendingPayments:$s,averageSalary:ja})}catch(Wt){console.error("Error loading salary summary:",Wt)}},ke=wt({mutationFn:ve=>ol.getSalaryReport(ve),onSuccess:ve=>{m(Array.isArray(ve)?ve:[]),t&&n&&i&&Pe(n,i)},onError:ve=>{W.fire("Error",ve.response?.data?.message||"Failed to fetch salary report","error")}}),Ye=wt({mutationFn:ve=>ol.addSalary(ve),onSuccess:ve=>{ve==="Success"||ve.trim()==="Success"?(W.fire("Success","Salary added successfully","success"),N(!1),Re(),xt(),Pe()):W.fire("Error",ve,"error")},onError:ve=>{W.fire("Error",ve.response?.data?.message||"Failed to add salary","error")}}),Qe=wt({mutationFn:ve=>ol.updateSalary(ve),onSuccess:ve=>{ve==="Success"||ve.trim()==="Success"?(W.fire("Success","Salary updated successfully","success"),S(!1),lt(),xt(),Pe()):W.fire("Error",ve,"error")},onError:ve=>{W.fire("Error",ve.response?.data?.message||"Failed to update salary","error")}}),et=wt({mutationFn:ve=>ol.deleteSalary(ve),onSuccess:ve=>{ve==="Success"||ve.trim()==="Success"?(W.fire("Success","Salary deleted successfully","success"),xt(),Pe()):W.fire("Error",ve,"error")},onError:ve=>{W.fire("Error",ve.response?.data?.message||"Failed to delete salary","error")}}),Xe=wt({mutationFn:ve=>ol.saveSalaryAdjustment(ve),onSuccess:ve=>{ve==="Success"||ve.trim()==="Success"?(W.fire("Success","Salary adjustment saved successfully","success"),L(!1),tt(),s.invalidateQueries({queryKey:["salary-employees-with-salary"]}),Pe()):W.fire("Error",ve,"error")},onError:ve=>{W.fire("Error",ve.response?.data?.message||"Failed to save adjustment","error")}}),re=wt({mutationFn:()=>ol.getPaymentSchedules(),onSuccess:ve=>{U(ve)}}),ne=wt({mutationFn:({employeeId:ve,paymentDay:Ze})=>ol.updatePaymentSchedule(ve,Ze),onSuccess:ve=>{ve==="Success"||ve.trim()==="Success"?(W.fire("Success","Payment schedule updated successfully","success"),re.mutate(),Pe()):W.fire("Error",ve,"error")}}),Se=wt({mutationFn:()=>ol.getSalaryHistory(),onSuccess:ve=>{}}),Ve=wt({mutationFn:({month:ve,year:Ze})=>ol.getPrintReport(ve,Ze),onSuccess:ve=>{$t(ve)}}),xt=()=>{let ve;if(t&&c!=="-1")ve="MonthYearAndEmpWise";else if(t&&c==="-1")ve="MonthYearWise";else if(!t&&c!=="-1")ve="EmpWise";else{W.fire("Validation Error","You have to select one option at least to perform search","error");return}if(t&&(!n||!i)){W.fire("Validation Error","Please select both month and year when searching by month","error");return}ke.mutate({searchTerm:ve,searchemployee_id:c,searchMonth:t?n:void 0,searchYear:t?i:void 0})},ee=()=>{if(!B.Addemployee_ID||B.Addemployee_ID===0){W.fire("Validation Error","Employee name is required","error");return}if(!B.Salary_Amount){W.fire("Validation Error","Salary amount is required","error");return}if(!B.Addaccount_ID||B.Addaccount_ID===0){W.fire("Validation Error","Account is required","error");return}Ye.mutate(B)},Ie=()=>{if(!P.Updemployee_id||P.Updemployee_id===0){W.fire("Validation Error","Employee name is required","error");return}if(!P.Updsalary_Amount){W.fire("Validation Error","Salary amount is required","error");return}if(!P.Updaccount_ID||P.Updaccount_ID===0){W.fire("Validation Error","Account is required","error");return}Qe.mutate(P)},He=ve=>{W.fire({title:"Delete!",text:"Do you want to delete this salary?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes"}).then(Ze=>{Ze.isConfirmed&&et.mutate(ve)})},Lt=async ve=>{try{const Ze=await ol.getSalaryForUpdate(ve);Ze&&Ze.length>0&&(K({SalaryID:ve,Updemployee_id:Ze[0].employee_id||0,Updsalary_Amount:Ze[0].salary_amount.toString(),Updaccount_ID:Ze[0].paymentType||0}),S(!0))}catch{W.fire("Error","Failed to load salary data","error")}},Dt=ve=>{const Ze=je.find(Wt=>Wt.staff_id.toString()===ve);if(Ze){const Wt=Ze.current_salary||Ze.salary||0;se(Fs=>({...Fs,EmployeeId:parseInt(ve),CurrentSalary:Wt.toString()})),Mt(Wt.toString())}},Mt=ve=>{const Ze=parseFloat(ve||H.CurrentSalary)||0,Wt=H.AdjustmentType;let Fs=Ze;if(X==="amount"){const Ts=parseFloat(Q)||0;Wt==="increase"?Fs=Ze+Ts:Fs=Ze-Ts}else{const Ts=parseFloat($)||0,aa=Ze*Ts/100;Wt==="increase"?Fs=Ze+aa:Fs=Ze-aa}se(Ts=>({...Ts,NewSalary:Fs.toFixed(2)}))},At=()=>{if(!H.EmployeeId){W.fire("Validation Error","Please select an employee","error");return}if(!H.EffectiveDate){W.fire("Validation Error","Please select effective date","error");return}if(parseFloat(H.NewSalary)<0){W.fire("Validation Error","New salary cannot be negative","error");return}Xe.mutate(H)},Bt=()=>{V(!0),re.mutate()},rs=(ve,Ze)=>{ne.mutate({employeeId:ve,paymentDay:Ze})},kt=()=>{q(!0),Se.mutate()},zt=()=>{if(!n||!i){W.fire("Info","Please select month and year first","info");return}Ve.mutate({month:n,year:i})},$t=ve=>{const Wt=["January","February","March","April","May","June","July","August","September","October","November","December"][parseInt(n)-1],Fs=window.open("","_blank");if(!Fs)return;let Ts=`
      <!DOCTYPE html>
      <html>
      <head>
        <title>Salary Report - ${Wt} ${i}</title>
        <style>
          body { font-family: Arial, sans-serif; margin: 20px; }
          .header { text-align: center; margin-bottom: 30px; }
          .company-name { font-size: 24px; font-weight: bold; margin-bottom: 10px; }
          .report-title { font-size: 18px; margin-bottom: 5px; }
          .report-period { font-size: 14px; color: #666; }
          table { width: 100%; border-collapse: collapse; margin-top: 20px; }
          th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
          th { background-color: #f2f2f2; font-weight: bold; }
          .text-right { text-align: right; }
          .total-row { font-weight: bold; background-color: #f9f9f9; }
          .summary { margin-top: 30px; }
          .summary-item { margin-bottom: 10px; }
          @media print {
            body { margin: 0; }
            .no-print { display: none; }
          }
        </style>
      </head>
      <body>
        <div class="header">
          <div class="company-name">SN Travels</div>
          <div class="report-title">Monthly Salary Report</div>
          <div class="report-period">${Wt} ${i}</div>
        </div>
        <table>
          <thead>
            <tr>
              <th>S#</th>
              <th>Employee Name</th>
              <th>Monthly Salary</th>
              <th>Amount Paid</th>
              <th>Payment Date</th>
              <th>Status</th>
            </tr>
          </thead>
          <tbody>
    `,aa=0,Os=0;ve.employees.forEach(($s,ja)=>{aa+=parseFloat($s.monthly_salary.toString()),Os+=parseFloat($s.amount_paid.toString()),Ts+=`
        <tr>
          <td>${ja+1}</td>
          <td>${$s.staff_name}</td>
          <td class="text-right">${bt($s.monthly_salary)}</td>
          <td class="text-right">${bt($s.amount_paid)}</td>
          <td>${$s.payment_date||"Not Paid"}</td>
          <td>${$s.status}</td>
        </tr>
      `}),Ts+=`
          </tbody>
          <tfoot>
            <tr class="total-row">
              <td colspan="2">TOTAL</td>
              <td class="text-right">${bt(aa)}</td>
              <td class="text-right">${bt(Os)}</td>
              <td colspan="2">Remaining: ${bt(aa-Os)}</td>
            </tr>
          </tfoot>
        </table>
        <div class="summary">
          <h3>Summary</h3>
          <div class="summary-item">Total Employees: ${ve.summary.total_employees}</div>
          <div class="summary-item">Employees Paid: ${ve.summary.paid_count}</div>
          <div class="summary-item">Employees Pending: ${ve.summary.pending_count}</div>
          <div class="summary-item">Total Salary Obligation: ${bt(aa)} AED</div>
          <div class="summary-item">Total Amount Paid: ${bt(Os)} AED</div>
          <div class="summary-item">Remaining to Pay: ${bt(aa-Os)} AED</div>
        </div>
        <button onclick="window.print()" class="no-print" style="margin-top: 20px; padding: 10px 20px;">Print Report</button>
      </body>
      </html>
    `,Fs.document.write(Ts),Fs.document.close()},bt=ve=>new Intl.NumberFormat("en-US").format(ve),ys=ve=>{if(ve>=11&&ve<=13)return"th";switch(ve%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},Te=(ve,Ze)=>{if(!Ze)return!0;const Wt=new Date;if(Wt.getDate()>ve){const Ts=new Date(Ze);return!(Ts.getMonth()===Wt.getMonth()&&Ts.getFullYear()===Wt.getFullYear())}return!1},Je=ve=>{u(ve.toString()),a(!1),setTimeout(()=>{xt()},500)},be=ve=>{J(Ze=>({...Ze,Addemployee_ID:ve})),N(!0)},Re=()=>{J({Addemployee_ID:0,Salary_Amount:"",Addaccount_ID:0})},lt=()=>{K({SalaryID:0,Updemployee_id:0,Updsalary_Amount:"",Updaccount_ID:0})},tt=()=>{se({EmployeeId:0,EffectiveDate:new Date().toISOString().split("T")[0],AdjustmentType:"increase",CurrentSalary:"",NewSalary:"",Reason:""}),Y(""),me(""),R("amount")},is=new Date().getFullYear(),qt=[];for(let ve=2020;ve<=is+2;ve++)qt.push(ve);const Pt=["January","February","March","April","May","June","July","August","September","October","November","December"],Tt=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Ue=parseInt(n)-1,yt=Ue>=0?Pt[Ue]:"",vt=Ue>=0?Tt[Ue]:"",Ce=h.reduce((ve,Ze)=>ve+parseFloat(Ze.salary_amount.toString()),0);return e.jsxs("div",{className:"salary-container",children:[e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header-custom",children:e.jsxs("h2",{children:[e.jsx("i",{className:"fa fa-fw fa-dollar"})," Add Salary Report"]})}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-1",style:{marginTop:"40px"},children:[e.jsx("input",{className:"form-check-input",type:"checkbox",id:"monthYearSearch",checked:t,onChange:ve=>a(ve.target.checked)}),e.jsx("label",{className:"form-check-label",htmlFor:"monthYearSearch",children:"Search By Month"})]}),e.jsxs("div",{className:"col-md-2",children:[e.jsx("label",{className:"col-form-label",children:"Month:"}),e.jsxs("select",{className:"form-control",value:n,onChange:ve=>{r(ve.target.value),ve.target.value&&i&&Pe(ve.target.value,i)},children:[e.jsx("option",{value:"",children:"Select Month"}),Pt.map((ve,Ze)=>e.jsx("option",{value:(Ze+1).toString().padStart(2,"0"),children:ve},Ze))]})]}),e.jsxs("div",{className:"col-md-2",children:[e.jsx("label",{className:"col-form-label",children:"Year:"}),e.jsxs("select",{className:"form-control",value:i,onChange:ve=>{o(ve.target.value),n&&ve.target.value&&Pe(n,ve.target.value)},children:[e.jsx("option",{value:"",children:"Select Year"}),qt.map(ve=>e.jsx("option",{value:ve.toString(),children:ve},ve))]})]}),e.jsxs("div",{className:"col-md-3",children:[e.jsx("label",{className:"col-form-label",children:"Employee Name:"}),e.jsxs("select",{className:"form-control",value:c,onChange:ve=>u(ve.target.value),children:[e.jsx("option",{value:"-1",children:"-- Select Employee --"}),G.map(ve=>e.jsx("option",{value:ve.staff_id.toString(),children:ve.staff_name},ve.staff_id))]})]}),e.jsxs("div",{className:"col-md-2",children:[e.jsx("label",{className:"col-form-label",children:"Action:"}),e.jsxs("button",{type:"button",onClick:xt,className:"btn btn-dark btn-block text-white",style:{width:"100%"},children:[e.jsx("i",{className:"fa fa-fw fa-search"})," Search"]})]}),e.jsx("div",{className:"col-md-1",style:{marginTop:"35px"},children:e.jsxs("button",{type:"button",className:"btn custom-btn",style:{width:"100%"},onClick:()=>N(!0),children:[e.jsx("i",{className:"fa fa-plus"})," Add salary"]})}),e.jsx("div",{className:"col-md-1",style:{marginTop:"35px"},children:e.jsxs("button",{type:"button",className:"btn btn-warning",style:{width:"100%"},onClick:()=>L(!0),children:[e.jsx("i",{className:"fa fa-edit"})," Adjust Salary"]})})]})}),e.jsx("br",{}),e.jsx("div",{className:"row mb-4",children:e.jsx("div",{className:"col-md-12",children:e.jsxs("div",{className:"card border-0 shadow-sm",children:[e.jsx("div",{className:"card-header bg-light",children:e.jsxs("h5",{className:"mb-0",children:[e.jsx("i",{className:"fa fa-cogs me-2"}),"Salary Management Actions"]})}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-3",children:e.jsxs("button",{className:"btn btn-success btn-lg w-100",onClick:()=>L(!0),children:[e.jsx("i",{className:"fa fa-trending-up"}),e.jsx("br",{}),e.jsx("span",{children:"Adjust Salaries"}),e.jsx("br",{}),e.jsx("small",{children:"Increase/Decrease"})]})}),e.jsx("div",{className:"col-md-3",children:e.jsxs("button",{className:"btn btn-info btn-lg w-100",onClick:Bt,children:[e.jsx("i",{className:"fa fa-calendar"}),e.jsx("br",{}),e.jsx("span",{children:"Payment Schedule"}),e.jsx("br",{}),e.jsx("small",{children:"Set Pay Dates"})]})}),e.jsx("div",{className:"col-md-3",children:e.jsxs("button",{className:"btn btn-purple btn-lg w-100",onClick:kt,children:[e.jsx("i",{className:"fa fa-history"}),e.jsx("br",{}),e.jsx("span",{children:"Salary History"}),e.jsx("br",{}),e.jsx("small",{children:"View Changes"})]})}),e.jsx("div",{className:"col-md-3",children:e.jsxs("button",{className:"btn btn-primary btn-lg w-100",onClick:zt,children:[e.jsx("i",{className:"fa fa-print"}),e.jsx("br",{}),e.jsx("span",{children:"Print Report"}),e.jsx("br",{}),e.jsx("small",{children:"Monthly Report"})]})})]})})]})})}),e.jsxs("div",{className:"row mb-4",children:[e.jsx("div",{className:"col-md-6",children:e.jsx("div",{className:"card border-0 shadow-lg bg-gradient-primary text-white",children:e.jsxs("div",{className:"card-body text-center py-4",children:[e.jsx("div",{className:"mb-3",children:e.jsx("i",{className:"fa fa-money fa-3x opacity-75"})}),e.jsx("h2",{className:"mb-2",children:bt(g.totalSalary)}),e.jsx("h5",{className:"mb-1",children:"Total Salary Expenses"}),e.jsxs("p",{className:"mb-0 opacity-75",children:["All employees for ",yt," ",i]})]})})}),e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-6 mb-3",children:e.jsx("div",{className:"card border-0 shadow-sm h-100",children:e.jsxs("div",{className:"card-body text-center",children:[e.jsx("div",{className:"text-success mb-2",children:e.jsx("i",{className:"fa fa-users fa-2x"})}),e.jsx("h4",{className:"mb-1",children:g.employeesPaid}),e.jsx("p",{className:"text-muted mb-0",children:"Employees Paid"}),e.jsxs("small",{className:"text-muted",children:["in ",yt," ",i]})]})})}),e.jsx("div",{className:"col-md-6 mb-3",children:e.jsx("div",{className:"card border-0 shadow-sm h-100",children:e.jsxs("div",{className:"card-body text-center",children:[e.jsx("div",{className:"text-warning mb-2",children:e.jsx("i",{className:"fa fa-exclamation-triangle fa-2x"})}),e.jsx("h4",{className:"mb-1",children:g.pendingPayments}),e.jsx("p",{className:"text-muted mb-0",children:"Not Paid"}),e.jsxs("small",{className:"text-muted",children:["in ",yt," ",i]})]})})}),e.jsx("div",{className:"col-md-6",children:e.jsx("div",{className:"card border-0 shadow-sm h-100",children:e.jsxs("div",{className:"card-body text-center",children:[e.jsx("div",{className:"text-info mb-2",children:e.jsx("i",{className:"fa fa-calendar fa-2x"})}),e.jsx("h4",{className:"mb-1",children:vt}),e.jsx("p",{className:"text-muted mb-0",children:"Selected Period"}),e.jsx("small",{className:"text-muted",children:i})]})})}),e.jsx("div",{className:"col-md-6",children:e.jsx("div",{className:"card border-0 shadow-sm h-100",children:e.jsxs("div",{className:"card-body text-center",children:[e.jsx("div",{className:"text-secondary mb-2",children:e.jsx("i",{className:"fa fa-calculator fa-2x"})}),e.jsx("h4",{className:"mb-1",children:bt(g.averageSalary)}),e.jsx("p",{className:"text-muted mb-0",children:"Average"}),e.jsx("small",{className:"text-muted",children:"per employee"})]})})})]})})]}),e.jsx("div",{className:"row mb-4",children:e.jsx("div",{className:"col-md-12",children:e.jsxs("div",{className:"card border-0 shadow-sm",children:[e.jsx("div",{className:"card-header bg-white border-bottom",children:e.jsxs("div",{className:"row align-items-center",children:[e.jsxs("div",{className:"col",children:[e.jsxs("h5",{className:"mb-0 text-dark",children:[e.jsx("i",{className:"fa fa-table me-2"}),"Employee Salary Overview"]}),e.jsxs("small",{className:"text-muted",children:[yt," ",i," salary status with individual payment dates"]})]}),e.jsx("div",{className:"col-auto",children:e.jsxs("button",{className:"btn btn-sm btn-outline-primary",onClick:()=>Pe(),children:[e.jsx("i",{className:"fa fa-refresh"})," Refresh"]})})]})}),e.jsx("div",{className:"card-body p-0",children:e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-hover mb-0",children:[e.jsx("thead",{className:"bg-light",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border-0 ps-4",children:"Employee"}),e.jsx("th",{className:"border-0 text-center",children:"Monthly Salary"}),e.jsxs("th",{className:"border-0 text-center",children:["Paid in ",yt," ",i]}),e.jsx("th",{className:"border-0 text-center",children:"Salary Date"}),e.jsx("th",{className:"border-0 text-center",children:"Last Paid Date"}),e.jsx("th",{className:"border-0 text-center",children:"Status"}),e.jsx("th",{className:"border-0 text-center",children:"Actions"})]})}),e.jsx("tbody",{children:p.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"text-center py-4 text-muted",children:"No employee records found"})}):p.map(ve=>{const Ze=ve.last_salary_date?new Date(ve.last_salary_date).toLocaleDateString("en-GB"):"Never",Wt=Te(ve.payment_day,ve.last_salary_date),Fs=ve.payment_status==="paid"?e.jsx("span",{className:"badge bg-success",children:"Fully Paid"}):parseFloat(ve.current_month_paid.toString())>0?e.jsx("span",{className:"badge bg-warning",children:"Partially Paid"}):e.jsx("span",{className:"badge bg-danger",children:"Not Paid"});return e.jsxs("tr",{className:ve.payment_status==="paid"?"":parseFloat(ve.current_month_paid.toString())>0?"table-warning":"table-danger",children:[e.jsx("td",{className:"ps-4",children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("div",{className:"avatar-sm bg-light rounded-circle d-flex align-items-center justify-content-center me-3",children:e.jsx("i",{className:"fa fa-user text-muted"})}),e.jsxs("div",{children:[e.jsx("h6",{className:"mb-0",children:ve.staff_name}),e.jsxs("small",{className:"text-muted",children:["ID: ",ve.staff_id]})]})]})}),e.jsxs("td",{className:"text-center",children:[e.jsx("div",{className:"fw-bold",children:bt(parseFloat(ve.monthly_salary_due.toString()))}),e.jsx("small",{className:"text-muted",children:"AED due"})]}),e.jsxs("td",{className:"text-center",children:[e.jsx("div",{className:"fw-bold text-success",children:bt(parseFloat(ve.current_month_paid.toString()))}),e.jsx("small",{className:"text-muted",children:"AED paid"})]}),e.jsxs("td",{className:"text-center",children:[e.jsxs("div",{className:`fw-bold ${Wt?"text-danger":"text-info"}`,children:[ve.payment_day,ys(ve.payment_day)]}),e.jsx("small",{className:`text-muted ${Wt?"text-danger":""}`,children:Wt?"Payment Due!":"of each month"})]}),e.jsxs("td",{className:"text-center",children:[e.jsx("div",{children:Ze}),ve.days_since_last_salary!==null?e.jsxs("small",{className:"text-muted",children:[ve.days_since_last_salary," days ago"]}):e.jsx("small",{className:"text-muted",children:"-"})]}),e.jsx("td",{className:"text-center",children:Fs}),e.jsx("td",{className:"text-center",children:e.jsxs("div",{className:"btn-group btn-group-sm",children:[e.jsx("button",{className:"btn btn-outline-primary",onClick:()=>Je(ve.staff_id),title:"View History",children:e.jsx("i",{className:"fa fa-history"})}),e.jsx("button",{className:"btn btn-outline-success",onClick:()=>be(ve.staff_id),title:"Add Salary",children:e.jsx("i",{className:"fa fa-plus"})})]})})]},ve.staff_id)})})]})})})]})})}),e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-md-12",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header bg-graident-lightcrimson text-white",children:e.jsxs("h4",{children:[e.jsx("i",{className:"fa fa-list"})," Detailed Salary Records"]})}),e.jsx("div",{className:"card-body",children:e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-striped table-hover",children:[e.jsx("thead",{className:"text-white bg-graident-lightcrimson",children:e.jsxs("tr",{className:"text-center",style:{fontSize:"14px"},children:[e.jsx("th",{children:"S#"}),e.jsx("th",{children:"Employee Name"}),e.jsx("th",{children:"Date Time"}),e.jsx("th",{children:"Salary Paid"}),e.jsx("th",{children:"Account"}),e.jsx("th",{children:"Paid By"}),e.jsx("th",{children:"Action"})]})}),e.jsx("tbody",{children:h.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"text-center",children:"Record Not Found"})}):e.jsxs(e.Fragment,{children:[h.map((ve,Ze)=>e.jsxs("tr",{children:[e.jsx("th",{scope:"row",className:"text-center",children:Ze+1}),e.jsx("td",{className:"text-capitalize text-center",children:ve.paidToEmployee}),e.jsx("td",{className:"text-center",children:new Date(ve.datetime).toLocaleString()}),e.jsx("td",{className:"text-center",children:bt(parseFloat(ve.salary_amount.toString()))}),e.jsx("td",{className:"text-center",children:ve.account_Name}),e.jsx("td",{className:"text-capitalize text-center",children:ve.paidbyEmployee}),e.jsxs("td",{className:"text-center",children:[e.jsx("button",{type:"button",onClick:()=>Lt(ve.salary_id),className:"btn",title:"Edit",children:e.jsx("i",{className:"fa fa-edit text-dark fa-2x"})}),e.jsx("button",{type:"button",onClick:()=>He(ve.salary_id),className:"btn",title:"Delete",children:e.jsx("i",{className:"fa fa-trash text-graident-lightcrimson fa-2x"})})]})]},ve.salary_id)),Ce>0&&e.jsxs("tr",{children:[e.jsx("td",{className:"text-center",children:e.jsx("b",{children:"Total"})}),e.jsx("td",{}),e.jsx("td",{}),e.jsx("td",{className:"text-center",children:e.jsx("b",{children:bt(Ce)})}),e.jsx("td",{}),e.jsx("td",{}),e.jsx("td",{})]})]})})]})})})]})})})]}),e.jsx("div",{className:`modal fade ${b?"show":""}`,style:{display:b?"block":"none"},children:e.jsx("div",{className:"modal-dialog",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header bg-dark",children:[e.jsx("h3",{className:"modal-title text-white",children:e.jsx("b",{children:e.jsx("i",{children:"Add Salary"})})}),e.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>N(!1)})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"form-group row mb-2",children:[e.jsx("label",{className:"col-sm-3 col-form-label",children:"Employee Name:"}),e.jsx("div",{className:"col-sm-9",children:e.jsxs("select",{className:"form-control",value:B.Addemployee_ID,onChange:ve=>J({...B,Addemployee_ID:parseInt(ve.target.value)}),children:[e.jsx("option",{value:"0",children:"-- Select Employee --"}),G.map(ve=>e.jsx("option",{value:ve.staff_id,children:ve.staff_name},ve.staff_id))]})})]}),e.jsxs("div",{className:"form-group row mb-2",children:[e.jsx("label",{className:"col-sm-3 col-form-label",children:"Salary Amount:"}),e.jsx("div",{className:"col-sm-9",children:e.jsx("input",{type:"text",className:"form-control",value:B.Salary_Amount,onChange:ve=>J({...B,Salary_Amount:ve.target.value}),placeholder:"Salary Amount"})})]}),e.jsxs("div",{className:"form-group row mb-2",children:[e.jsx("label",{className:"col-sm-3 col-form-label",children:"Account:"}),e.jsx("div",{className:"col-sm-9",children:e.jsxs("select",{className:"form-control",value:B.Addaccount_ID,onChange:ve=>J({...B,Addaccount_ID:parseInt(ve.target.value)}),children:[e.jsx("option",{value:"0",children:"-- Select Account --"}),De.map(ve=>e.jsx("option",{value:ve.account_ID,children:ve.account_Name},ve.account_ID))]})})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>N(!1),children:"Close"}),e.jsx("button",{type:"button",onClick:ee,className:"btn text-white bg-graident-lightcrimson",children:"Save"})]})]})})}),b&&e.jsx("div",{className:"modal-backdrop fade show",onClick:()=>N(!1)}),e.jsx("div",{className:`modal fade ${v?"show":""}`,style:{display:v?"block":"none"},children:e.jsx("div",{className:"modal-dialog",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header bg-dark",children:[e.jsx("h3",{className:"modal-title text-white",children:e.jsx("b",{children:e.jsx("i",{children:"Update Salary"})})}),e.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>S(!1)})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"form-group row mb-2",children:[e.jsx("label",{className:"col-sm-3 col-form-label",children:"Employee Name:"}),e.jsx("div",{className:"col-sm-9",children:e.jsxs("select",{className:"form-control",value:P.Updemployee_id,onChange:ve=>K({...P,Updemployee_id:parseInt(ve.target.value)}),children:[e.jsx("option",{value:"0",children:"-- Select Employee --"}),G.map(ve=>e.jsx("option",{value:ve.staff_id,children:ve.staff_name},ve.staff_id))]})})]}),e.jsxs("div",{className:"form-group row mb-2",children:[e.jsx("label",{className:"col-sm-3 col-form-label",children:"Salary Amount:"}),e.jsx("div",{className:"col-sm-9",children:e.jsx("input",{type:"text",className:"form-control",value:P.Updsalary_Amount,onChange:ve=>K({...P,Updsalary_Amount:ve.target.value}),placeholder:"Salary Amount"})})]}),e.jsxs("div",{className:"form-group row mb-2",children:[e.jsx("label",{className:"col-sm-3 col-form-label",children:"Account:"}),e.jsx("div",{className:"col-sm-9",children:e.jsxs("select",{className:"form-control",value:P.Updaccount_ID,onChange:ve=>K({...P,Updaccount_ID:parseInt(ve.target.value)}),children:[e.jsx("option",{value:"0",children:"-- Select Account --"}),De.map(ve=>e.jsx("option",{value:ve.account_ID,children:ve.account_Name},ve.account_ID))]})})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>S(!1),children:"Close"}),e.jsx("button",{type:"button",onClick:Ie,className:"btn text-white bg-danger",children:"Save"})]})]})})}),v&&e.jsx("div",{className:"modal-backdrop fade show",onClick:()=>S(!1)}),e.jsx("div",{className:`modal fade ${E?"show":""}`,style:{display:E?"block":"none"},children:e.jsx("div",{className:"modal-dialog modal-lg",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header bg-success text-white",children:[e.jsx("h3",{className:"modal-title",children:e.jsxs("b",{children:[e.jsx("i",{className:"fa fa-trending-up"})," Salary Adjustment"]})}),e.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>L(!1)})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"form-group mb-3",children:[e.jsx("label",{className:"form-label",children:"Employee:"}),e.jsxs("select",{className:"form-control",value:H.EmployeeId,onChange:ve=>Dt(ve.target.value),required:!0,children:[e.jsx("option",{value:"0",children:"-- Select Employee --"}),je.map(ve=>e.jsxs("option",{value:ve.staff_id.toString(),children:[ve.staff_name," (Current: ",bt(ve.current_salary||ve.salary||0)," AED)"]},ve.staff_id))]})]})}),e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"form-group mb-3",children:[e.jsx("label",{className:"form-label",children:"Effective Date:"}),e.jsx("input",{type:"date",className:"form-control",value:H.EffectiveDate,onChange:ve=>se({...H,EffectiveDate:ve.target.value}),required:!0})]})})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-4",children:e.jsxs("div",{className:"form-group mb-3",children:[e.jsx("label",{className:"form-label",children:"Current Salary:"}),e.jsx("input",{type:"text",className:"form-control",value:H.CurrentSalary,readOnly:!0})]})}),e.jsx("div",{className:"col-md-4",children:e.jsxs("div",{className:"form-group mb-3",children:[e.jsx("label",{className:"form-label",children:"Adjustment Type:"}),e.jsxs("select",{className:"form-control",value:H.AdjustmentType,onChange:ve=>{se({...H,AdjustmentType:ve.target.value}),Mt()},required:!0,children:[e.jsx("option",{value:"increase",children:"Increase"}),e.jsx("option",{value:"decrease",children:"Decrease"})]})]})}),e.jsx("div",{className:"col-md-4",children:e.jsxs("div",{className:"form-group mb-3",children:[e.jsx("label",{className:"form-label",children:"Method:"}),e.jsxs("select",{className:"form-control",value:X,onChange:ve=>{R(ve.target.value),Mt()},children:[e.jsx("option",{value:"amount",children:"Fixed Amount"}),e.jsx("option",{value:"percentage",children:"Percentage"})]})]})})]}),e.jsxs("div",{className:"row",children:[X==="amount"?e.jsx("div",{className:"col-md-4",children:e.jsxs("div",{className:"form-group mb-3",children:[e.jsx("label",{className:"form-label",children:"Amount:"}),e.jsx("input",{type:"number",className:"form-control",value:Q,onChange:ve=>{Y(ve.target.value),Mt()},step:"0.01"})]})}):e.jsx("div",{className:"col-md-4",children:e.jsxs("div",{className:"form-group mb-3",children:[e.jsx("label",{className:"form-label",children:"Percentage (%):"}),e.jsx("input",{type:"number",className:"form-control",value:$,onChange:ve=>{me(ve.target.value),Mt()},step:"0.01"})]})}),e.jsx("div",{className:"col-md-4",children:e.jsxs("div",{className:"form-group mb-3",children:[e.jsx("label",{className:"form-label",children:"New Salary:"}),e.jsx("input",{type:"text",className:"form-control",value:H.NewSalary,readOnly:!0})]})})]}),e.jsxs("div",{className:"form-group mb-3",children:[e.jsx("label",{className:"form-label",children:"Reason for Adjustment:"}),e.jsx("textarea",{className:"form-control",value:H.Reason,onChange:ve=>se({...H,Reason:ve.target.value}),rows:3,placeholder:"Enter reason for salary adjustment..."})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>L(!1),children:"Cancel"}),e.jsxs("button",{type:"button",onClick:At,className:"btn btn-success",children:[e.jsx("i",{className:"fa fa-save"})," Save Adjustment"]})]})]})})}),E&&e.jsx("div",{className:"modal-backdrop fade show",onClick:()=>L(!1)}),e.jsx("div",{className:`modal fade ${z?"show":""}`,style:{display:z?"block":"none"},children:e.jsx("div",{className:"modal-dialog modal-lg",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header bg-info text-white",children:[e.jsx("h3",{className:"modal-title",children:e.jsxs("b",{children:[e.jsx("i",{className:"fa fa-calendar"})," Payment Schedule Management"]})}),e.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>V(!1)})]}),e.jsx("div",{className:"modal-body",children:e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-striped",children:[e.jsx("thead",{className:"bg-light",children:e.jsxs("tr",{children:[e.jsx("th",{children:"Employee Name"}),e.jsx("th",{children:"Current Payment Day"}),e.jsx("th",{children:"New Payment Day"}),e.jsx("th",{children:"Action"})]})}),e.jsx("tbody",{children:D.map(ve=>e.jsxs("tr",{children:[e.jsx("td",{children:ve.staff_name}),e.jsx("td",{children:ve.payment_day}),e.jsx("td",{children:e.jsx("select",{className:"form-control",value:le[ve.staff_id]||ve.payment_day,onChange:Ze=>de({...le,[ve.staff_id]:parseInt(Ze.target.value)}),children:Array.from({length:31},(Ze,Wt)=>Wt+1).map(Ze=>e.jsx("option",{value:Ze,children:Ze},Ze))})}),e.jsx("td",{children:e.jsxs("button",{className:"btn btn-sm btn-primary",onClick:()=>rs(ve.staff_id,le[ve.staff_id]||ve.payment_day),children:[e.jsx("i",{className:"fa fa-save"})," Update"]})})]},ve.staff_id))})]})})}),e.jsx("div",{className:"modal-footer",children:e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>V(!1),children:"Close"})})]})})}),z&&e.jsx("div",{className:"modal-backdrop fade show",onClick:()=>V(!1)}),e.jsx("div",{className:`modal fade ${te?"show":""}`,style:{display:te?"block":"none"},children:e.jsx("div",{className:"modal-dialog modal-xl",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header bg-purple text-white",children:[e.jsx("h3",{className:"modal-title",children:e.jsxs("b",{children:[e.jsx("i",{className:"fa fa-history"})," Salary Adjustment History"]})}),e.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>q(!1)})]}),e.jsx("div",{className:"modal-body",children:e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-striped",children:[e.jsx("thead",{className:"bg-light",children:e.jsxs("tr",{children:[e.jsx("th",{children:"Date"}),e.jsx("th",{children:"Employee"}),e.jsx("th",{children:"Previous Salary"}),e.jsx("th",{children:"New Salary"}),e.jsx("th",{children:"Change"}),e.jsx("th",{children:"Type"}),e.jsx("th",{children:"Reason"}),e.jsx("th",{children:"Created By"})]})}),e.jsx("tbody",{children:Se.data&&Se.data.length>0?Se.data.map(ve=>{const Ze=parseFloat(ve.new_salary.toString())-parseFloat(ve.previous_salary.toString()),Wt=Ze>0?"text-success":"text-danger",Fs=Ze>0?"fa-arrow-up":"fa-arrow-down";return e.jsxs("tr",{children:[e.jsx("td",{children:new Date(ve.effective_date).toLocaleDateString()}),e.jsx("td",{children:ve.employee_name}),e.jsx("td",{children:bt(parseFloat(ve.previous_salary.toString()))}),e.jsx("td",{children:bt(parseFloat(ve.new_salary.toString()))}),e.jsxs("td",{className:Wt,children:[e.jsx("i",{className:`fa ${Fs}`})," ",bt(Math.abs(Ze))]}),e.jsx("td",{children:e.jsx("span",{className:`badge ${Ze>0?"bg-success":"bg-danger"}`,children:ve.adjustment_type})}),e.jsx("td",{children:ve.reason||"N/A"}),e.jsx("td",{children:ve.created_by_name})]},ve.adjustment_id)}):e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"text-center",children:"No history records found"})})})]})})}),e.jsx("div",{className:"modal-footer",children:e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>q(!1),children:"Close"})})]})})}),te&&e.jsx("div",{className:"modal-backdrop fade show",onClick:()=>q(!1)})]})}class o9{baseUrl=`${Ct.baseUrl}`;async getDocuments(){try{const t=new FormData;t.append("GetDocuments","getDocuments");const a=await gs.post(`${this.baseUrl}/company_documentsController.php`,t,{withCredentials:!0,headers:{"Content-Type":"multipart/form-data"}});return vs.debug("Documents fetched:",a.data),Array.isArray(a.data)?a.data:[]}catch(t){throw vs.error("Error fetching documents:",t),t}}async createFolder(t){try{const a=new FormData;a.append("CreateFolder","createFolder"),a.append("Foler_Name",t.Foler_Name),t.isPublic!==void 0&&a.append("isPublic",t.isPublic);const n=await gs.post(`${this.baseUrl}/company_documentsController.php`,a,{withCredentials:!0,headers:{"Content-Type":"multipart/form-data"}});return vs.debug("Create folder response:",n.data),n.data}catch(a){throw vs.error("Error creating folder:",a),a}}async uploadFile(t){try{const a=new FormData;a.append("uploadCompanyFiles","uploadCompanyFiles");const n=t.uploadFile;if(vs.debug("uploadFile service called with:",{file:n,fileName:n?.name,fileSize:n?.size,fileType:n?.type,fileConstructor:n?.constructor?.name,isFile:n instanceof File,isBlob:n instanceof Blob,fileKeys:n?Object.keys(n):[]}),!n)throw new Error("No file provided");if(!n.name)throw vs.error("File missing name:",n),new Error("File is missing name property");if(n.size===void 0||n.size===null)throw vs.error("File missing size:",n),new Error("File is missing size property");a.append("uploadFile",n,n.name),a.append("DID",t.DID.toString()),t.Agree!==void 0&&a.append("Agree",t.Agree.toString()),vs.debug("Uploading file:",{fileName:n.name,fileSize:n.size,fileType:n.type||"unknown",directoryId:t.DID,fileConstructor:n.constructor.name});const r=await gs.post(`${this.baseUrl}/company_documentsController.php`,a,{withCredentials:!0,maxContentLength:1/0,maxBodyLength:1/0});return vs.debug("Upload file response:",r.data),r.data}catch(a){throw vs.error("Error uploading file:",a),a.response&&vs.error("Error response data:",a.response.data),a}}async deleteItem(t){try{const a=new FormData;a.append("DELETE_VAR","delete_var"),a.append("CustomID",t.CustomID.toString()),a.append("IsFile",t.IsFile),t.ParentCustomID!==void 0&&a.append("ParentCustomID",t.ParentCustomID.toString());const n=await gs.post(`${this.baseUrl}/company_documentsController.php`,a,{withCredentials:!0,headers:{"Content-Type":"multipart/form-data"}});return vs.debug("Delete response:",n.data),n.data}catch(a){throw vs.error("Error deleting item:",a),a}}downloadFile(t,a){window.open(`${this.baseUrl}/downloadCompanyFiles.php?CustomID=${t}&ParentCustomID=${a}`,"_blank")}}const Vf=new o9;function c9(){const s=Wa(),[t,a]=A.useState([{id:"root",folderId:null,items:[],selectedId:null}]),[n,r]=A.useState([{id:null,name:"All Folders"}]),[i,o]=A.useState("all"),[c,u]=A.useState(""),[h,m]=A.useState(!1),[p,y]=A.useState(!1),[g,j]=A.useState(!1),[b,N]=A.useState(""),[v,S]=A.useState(!1),[E,L]=A.useState(""),[z,V]=A.useState(null),[te,q]=A.useState(null),[B,J]=A.useState(null),[P,K]=A.useState(null),[H,se]=A.useState(null),[X,R]=A.useState(null),[Q,Y]=A.useState(null),[$,me]=A.useState(null),[D,U]=A.useState(!1),le=A.useRef(null),de=A.useRef(null),G=A.useCallback(be=>{const Re=be.split(".").pop()?.toLowerCase()||"",lt=["jpg","jpeg","png","gif","webp","svg"],tt=["pdf"],Et=["doc","docx","xls","xlsx","ppt","pptx"],is=["zip","rar","7z","tar","gz"];let qt="file";return lt.includes(Re)?qt="image":tt.includes(Re)?qt="pdf":Et.includes(Re)?qt="document":is.includes(Re)?qt="archive":Re==="txt"&&(qt="text"),{extension:Re,mimeType:qt}},[]),je=A.useCallback(be=>{const{extension:Re,mimeType:lt}=G(be);return{image:"fa-file-image",pdf:"fa-file-pdf",document:Re==="doc"||Re==="docx"?"fa-file-word":Re==="xls"||Re==="xlsx"?"fa-file-excel":Re==="ppt"||Re==="pptx"?"fa-file-powerpoint":"fa-file-alt",archive:"fa-file-archive",text:"fa-file-alt",file:"fa-file"}[lt]||"fa-file"},[G]),De=A.useCallback(be=>{const Re=[],lt=[];return be.forEach(tt=>{const Et=tt.isFile==="true",is=Et?G(tt.text):{extension:"",mimeType:"folder"},qt=tt.parent==="#"?null:typeof tt.parent=="number"?tt.parent:null,Pt=Et&&(is.mimeType==="image"||is.mimeType==="pdf")?`${Ct.baseUrl}/generateThumbnail.php?CustomID=${tt.customID}&ParentCustomID=${qt||0}`:void 0,Tt={id:tt.customID,name:tt.text,type:Et?"file":"folder",parentId:qt,children:tt.children?.map(Ue=>{const yt=Ue.isFile==="true"?G(Ue.text):{extension:"",mimeType:"folder"},vt=tt.customID,Ce=Ue.isFile==="true"&&(yt.mimeType==="image"||yt.mimeType==="pdf")?`${Ct.baseUrl}/generateThumbnail.php?CustomID=${Ue.customID}&ParentCustomID=${vt}`:void 0;return{id:Ue.customID,name:Ue.text,type:Ue.isFile==="true"?"file":"folder",parentId:tt.customID,extension:Ue.isFile==="true"?yt.extension:void 0,mimeType:Ue.isFile==="true"?yt.mimeType:void 0,thumbnailUrl:Ce}}),isPublic:tt.text==="Public"||tt.is_public===1||tt.user_id===null,extension:Et?is.extension:void 0,mimeType:Et?is.mimeType:void 0,thumbnailUrl:Pt};Tt.isPublic||Tt.name==="Public"?Re.push(Tt):lt.push(Tt)}),{public:Re,private:lt}},[]),Pe=A.useCallback((be,Re)=>{for(const lt of Re){if(lt.customID===be)return lt;if(lt.children){const tt=Pe(be,lt.children);if(tt)return tt}}return null},[]),{data:ke=[],isLoading:Ye}=Rt({queryKey:["companyDocuments"],queryFn:()=>Vf.getDocuments(),refetchOnWindowFocus:!1}),Qe=A.useCallback((be,Re)=>{if(Re.length===1&&Re[0].id===null){const{public:qt,private:Pt}=De(be);let Tt=[];return i==="all"?Tt=[...qt,...Pt]:i==="public"?Tt=qt:Tt=Pt,[{id:"root",folderId:null,items:Tt,selectedId:null}]}const{public:lt,private:tt}=De(be);let Et=[];i==="all"?Et=[...lt,...tt]:i==="public"?Et=lt:Et=tt;const is=[{id:"root",folderId:null,items:Et,selectedId:null}];for(let qt=1;qt<Re.length;qt++){const Pt=Re[qt];if(Pt.id===null)continue;const Tt=is[is.length-1],Ue=Tt.items.find(yt=>yt.id===Pt.id);if(Ue&&Ue.type==="folder"){Tt.selectedId=Ue.id;const vt=Pe(Ue.id,be)?.children?.map(Ce=>{const ve=Ce.isFile==="true"?G(Ce.text):{extension:"",mimeType:"folder"},Ze=Ce.isFile==="true"&&(ve.mimeType==="image"||ve.mimeType==="pdf")?`${Ct.baseUrl}/generateThumbnail.php?CustomID=${Ce.customID}&ParentCustomID=${Ue.id}`:void 0;return{id:Ce.customID,name:Ce.text,type:Ce.isFile==="true"?"file":"folder",parentId:Ue.id,isPublic:Ce.text==="Public"||Ce.is_public===1||Ce.user_id===null,extension:Ce.isFile==="true"?ve.extension:void 0,mimeType:Ce.isFile==="true"?ve.mimeType:void 0,thumbnailUrl:Ze,children:Ce.children?.map(Wt=>({id:Wt.customID,name:Wt.text,type:Wt.isFile==="true"?"file":"folder",parentId:Ce.customID}))}})||[];is.push({id:`col-${Ue.id}`,folderId:Ue.id,items:vt,selectedId:null})}}return is},[De,i,Pe,G]);A.useEffect(()=>{if(ke.length>0){const be=Qe(ke,n);a(be)}},[ke,Qe,n]);const et=wt({mutationFn:be=>Vf.createFolder({Foler_Name:be.folderName,isPublic:be.isPublic?"1":"0"}),onSuccess:be=>{be.msg==="success"?(W.fire("Success","Folder created successfully","success"),N(""),S(!1),m(!1),s.invalidateQueries({queryKey:["companyDocuments"]})):W.fire("Error",be.msgDetails||"Failed to create folder","error")},onError:be=>{W.fire("Error",be.response?.data?.msgDetails||"Failed to create folder","error")}}),Xe=wt({mutationFn:async be=>{const Re=be.file;if(vs.debug("mutationFn received:",{file:Re,fileName:Re?.name,fileSize:Re?.size,fileType:Re?.type,directoryId:be.directoryId,fileConstructor:Re?.constructor?.name,isFile:Re instanceof File,isBlob:Re instanceof Blob}),!Re||!Re.name||Re.size===void 0)throw vs.error("Invalid file in mutationFn:",Re),new Error("Invalid file object passed to mutation");return Vf.uploadFile({uploadFile:Re,DID:be.directoryId,Agree:be.agree})},onSuccess:be=>{be.msg==="success"?(W.fire("Success",be.msgDetails||"File uploaded successfully","success"),q(null),J(null),y(!1),U(!1),me(null),le.current&&(le.current.value=""),s.invalidateQueries({queryKey:["companyDocuments"]})):be.msg==="info"?W.fire({title:"File Exists",text:be.msgDetails||"File already exists. Do you want to replace it?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, replace it",cancelButtonText:"Cancel"}).then(Re=>{Re.isConfirmed&&te&&B&&Xe.mutate({file:te,directoryId:B,agree:1})}):W.fire("Error",be.msgDetails||"Failed to upload file","error")},onError:be=>{let Re="Failed to upload file";be.response?.data?.msgDetails?Re=be.response.data.msgDetails:be.message&&(Re=be.message),vs.error("Upload error details:",{message:Re,status:be.response?.status,statusText:be.response?.statusText,data:be.response?.data,error:be}),W.fire({title:"Upload Failed",text:Re,icon:"error",confirmButtonText:"OK"})}}),re=wt({mutationFn:be=>Vf.deleteItem({CustomID:be.customID,ParentCustomID:be.parentCustomID,IsFile:be.isFile}),onSuccess:be=>{be.msg==="success"?(W.fire("Success",be.msgDetails||"Item deleted successfully","success"),s.invalidateQueries({queryKey:["companyDocuments"]}),a([{id:"root",folderId:null,items:De(ke),selectedId:null}]),r([{id:null,name:"All Folders"}])):W.fire("Error",be.msgDetails||"Failed to delete item","error")},onError:be=>{W.fire("Error",be.response?.data?.msgDetails||"Failed to delete item","error")}}),ne=(be,Re)=>{const lt=t.slice(0,Re+1);lt[Re].selectedId=be.id;const Et=Pe(be.id,ke)?.children?.map(qt=>{const Pt=qt.isFile==="true"?G(qt.text):{extension:"",mimeType:"folder"},Tt=qt.isFile==="true"&&(Pt.mimeType==="image"||Pt.mimeType==="pdf")?`${Ct.baseUrl}/generateThumbnail.php?CustomID=${qt.customID}&ParentCustomID=${be.id}`:void 0;return{id:qt.customID,name:qt.text,type:qt.isFile==="true"?"file":"folder",parentId:be.id,isPublic:qt.text==="Public"||qt.is_public===1||qt.user_id===null,extension:qt.isFile==="true"?Pt.extension:void 0,mimeType:qt.isFile==="true"?Pt.mimeType:void 0,thumbnailUrl:Tt,children:qt.children?.map(Ue=>({id:Ue.customID,name:Ue.text,type:Ue.isFile==="true"?"file":"folder",parentId:qt.customID}))}})||[];lt.push({id:`col-${be.id}`,folderId:be.id,items:Et,selectedId:null}),a(lt);const is=n.slice(0,Re+1);is.push({id:be.id,name:be.name}),r(is)},Se=be=>{if(be===0){const{public:Re,private:lt}=De(ke);let tt=[];i==="all"?tt=[...Re,...lt]:i==="public"?tt=Re:tt=lt,a([{id:"root",folderId:null,items:tt,selectedId:null}]),r([{id:null,name:"All Folders"}])}else{n[be];const{public:Re,private:lt}=De(ke);let tt=[];i==="all"?tt=[...Re,...lt]:i==="public"?tt=Re:tt=lt;const Et=[{id:"root",folderId:null,items:tt,selectedId:null}],is=[{id:null,name:"All Folders"}];for(let qt=1;qt<=be;qt++){const Pt=n[qt],Tt=Et[Et.length-1],Ue=Pe(Pt.id,ke);if(Ue){Tt.selectedId=Pt.id;const yt=Ue.children?.map(vt=>({id:vt.customID,name:vt.text,type:vt.isFile==="true"?"file":"folder",parentId:Pt.id,isPublic:vt.text==="Public"||vt.is_public===1}))||[];Et.push({id:`col-${Pt.id}`,folderId:Pt.id,items:yt,selectedId:null}),is.push(Pt)}}a(Et),r(is)}},Ve=be=>{if(be.type==="file"){const{mimeType:Re}=G(be.name);if(Re==="image"||Re==="pdf"){const lt=t[t.length-1].folderId||be.parentId||0,tt=`${Ct.baseUrl}/downloadCompanyFiles.php?CustomID=${be.id}&ParentCustomID=${lt}&preview=1`;R(be),Y(tt)}else xt(be)}},xt=be=>{if(be.type==="file"){const Re=t[t.length-1].folderId||be.parentId||0;Vf.downloadFile(be.id,Re)}},ee=be=>{be.type==="file"&&Ve(be)},Ie=(be,Re)=>{be.preventDefault(),K({x:be.clientX,y:be.clientY,item:Re})};A.useEffect(()=>{const be=()=>K(null);if(P)return document.addEventListener("click",be),()=>document.removeEventListener("click",be)},[P]);const He=()=>{if(!b.trim()){W.fire("Error","Please enter folder name","error");return}et.mutate({folderName:b.trim(),isPublic:v})},Lt=be=>{const Re=be.target.files?.[0];if(Re){if(Re.size>10485760){W.fire("Error","File size is greater than 10 MB. Please select a file less than 10 MB","error");return}q(Re)}},Dt=(be,Re)=>{const lt=be||te,tt=Re!==void 0?Re:B;if(vs.debug("handleUpload called:",{fileProvided:!!be,selectedFile:!!te,fileToUpload:lt,fileName:lt?.name,fileSize:lt?.size,directoryIdProvided:Re,selectedDirectoryId:B,finalDirId:tt}),!lt){W.fire("Error","Please select a file","error");return}if(!lt.name){vs.error("File missing name in handleUpload:",lt),W.fire("Error","File is missing name property","error");return}if(lt.size===void 0||lt.size===null){vs.error("File missing size in handleUpload:",lt),W.fire("Error","File is missing size property","error");return}if(tt==null){W.fire("Error",'Please select a folder first. Right-click on a folder and select "Upload File Here"',"error");return}if(lt.size>10485760){W.fire("Error","File size is greater than 10 MB. Please select a file less than 10 MB","error");return}vs.debug("Calling uploadFileMutation with:",{fileName:lt.name,fileSize:lt.size,fileType:lt.type,directoryId:tt,fileConstructor:lt.constructor.name}),Xe.mutate({file:lt,directoryId:tt})},Mt=(be,Re)=>{be.preventDefault(),be.stopPropagation(),be.dataTransfer.types.includes("Files")&&(U(!0),Re!==null&&me(Re))},At=(be,Re)=>{be.preventDefault(),be.stopPropagation(),be.dataTransfer.types.includes("Files")&&(be.dataTransfer.dropEffect="copy",Re!==null&&me(Re))},Bt=be=>{be.preventDefault(),be.stopPropagation();const Re=be.currentTarget.getBoundingClientRect(),lt=be.clientX,tt=be.clientY;(lt<Re.left||lt>Re.right||tt<Re.top||tt>Re.bottom)&&me(null)},rs=(be,Re)=>{if(be.preventDefault(),be.stopPropagation(),U(!1),me(null),Re===null){W.fire("Info","Please drop files on a specific folder","info");return}const lt=Array.from(be.dataTransfer.files);if(lt.length===0){W.fire("Error","No files detected in drop event","error");return}const tt=lt[0];if(vs.debug("File dropped - raw file object:",{file:tt,fileName:tt?.name,fileSize:tt?.size,fileType:tt?.type,folderId:Re,fileKeys:tt?Object.keys(tt):[],fileConstructor:tt?.constructor?.name,isFile:tt instanceof File,isBlob:tt instanceof Blob}),!tt){W.fire("Error","No file selected","error");return}if(!tt.name){vs.error("File missing name property:",tt),W.fire("Error","File is missing name property","error");return}if(tt.size===void 0||tt.size===null){vs.error("File missing size property:",tt),W.fire("Error","File is missing size property","error");return}if(tt.size>10485760){W.fire("Error","File size is greater than 10 MB. Please select a file less than 10 MB","error");return}vs.debug("File validated successfully, uploading:",{fileName:tt.name,fileSize:tt.size,fileType:tt.type,folderId:Re}),Dt(tt,Re)},kt=be=>{be.preventDefault(),be.stopPropagation(),be.dataTransfer.types.includes("Files")&&(U(!0),be.dataTransfer.dropEffect="copy")},zt=be=>{be.preventDefault(),be.stopPropagation();const Re=be.currentTarget.getBoundingClientRect(),lt=be.clientX,tt=be.clientY;(lt<Re.left||lt>Re.right||tt<Re.top||tt>Re.bottom)&&(U(!1),me(null))},$t=be=>{be.preventDefault(),be.stopPropagation(),U(!1),me(null);const Re=t[t.length-1].folderId;if(Re===null){W.fire({title:"Select a Folder",text:"Please drop files on a specific folder, or navigate into a folder first",icon:"info",confirmButtonText:"OK"});return}const lt=Array.from(be.dataTransfer.files);if(lt.length===0){W.fire("Error","No files detected in drop event","error");return}const tt=lt[0];if(vs.debug("File dropped on container - raw file object:",{file:tt,fileName:tt?.name,fileSize:tt?.size,fileType:tt?.type,currentFolderId:Re,fileKeys:tt?Object.keys(tt):[],fileConstructor:tt?.constructor?.name,isFile:tt instanceof File,isBlob:tt instanceof Blob}),!tt){W.fire("Error","No file selected","error");return}if(!tt.name){vs.error("File missing name property:",tt),W.fire("Error","File is missing name property","error");return}if(tt.size===void 0||tt.size===null){vs.error("File missing size property:",tt),W.fire("Error","File is missing size property","error");return}if(tt.size>10485760){W.fire("Error","File size is greater than 10 MB. Please select a file less than 10 MB","error");return}vs.debug("File validated successfully, uploading:",{fileName:tt.name,fileSize:tt.size,fileType:tt.type,currentFolderId:Re}),Dt(tt,Re)},bt=be=>{W.fire({title:"Are you sure?",text:be.type==="file"?`Delete "${be.name}"?`:`Delete folder "${be.name}" and all its contents?`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel"}).then(Re=>{if(Re.isConfirmed){const lt=be.parentId||t[t.length-1].folderId;re.mutate({customID:be.id,parentCustomID:lt||void 0,isFile:be.type==="file"?"true":"false"})}})},ys=()=>{if(!E.trim()||!z){W.fire("Error","Please enter a new name","error");return}W.fire("Info","Rename functionality will be implemented soon","info"),j(!1),L(""),V(null)},Te=be=>{if(!c)return be;const Re=c.toLowerCase();return be.filter(lt=>lt.name.toLowerCase().includes(Re))},Je=t.length>0?Te(t[t.length-1].items):[];return e.jsxs("div",{className:"file-manager",ref:de,children:[e.jsxs("div",{className:"file-manager-header",children:[e.jsxs("div",{className:"file-manager-title",children:[e.jsx("i",{className:"fa fa-folder-open"}),e.jsx("span",{children:"Company Documents"})]}),e.jsxs("div",{className:"file-manager-actions",children:[e.jsxs("div",{className:"view-toggle",children:[e.jsxs("button",{className:`view-btn ${i==="all"?"active":""}`,onClick:()=>o("all"),title:"All Folders",children:[e.jsx("i",{className:"fa fa-th"}),e.jsx("span",{children:"All"})]}),e.jsxs("button",{className:`view-btn ${i==="public"?"active":""}`,onClick:()=>o("public"),title:"Public Folders",children:[e.jsx("i",{className:"fa fa-globe"}),e.jsx("span",{children:"Public"})]}),e.jsxs("button",{className:`view-btn ${i==="private"?"active":""}`,onClick:()=>o("private"),title:"My Folders",children:[e.jsx("i",{className:"fa fa-user"}),e.jsx("span",{children:"My Files"})]})]}),e.jsxs("div",{className:"search-box",children:[e.jsx("i",{className:"fa fa-search"}),e.jsx("input",{type:"text",placeholder:"Search files and folders...",value:c,onChange:be=>u(be.target.value)})]}),e.jsxs("button",{className:"btn-action",onClick:()=>{const be=t[t.length-1].folderId;if(be===null){W.fire({title:"Select Folder",text:'Please right-click on a folder and select "Upload File Here", or double-click to open a folder first.',icon:"info",confirmButtonText:"OK"});return}J(be),y(!0)},title:"Upload File (Select a folder first)",children:[e.jsx("i",{className:"fa fa-upload"}),e.jsx("span",{children:"Upload"})]}),e.jsxs("button",{className:"btn-action btn-primary",onClick:()=>{S(!1),m(!0)},title:"New Folder",children:[e.jsx("i",{className:"fa fa-folder-plus"}),e.jsx("span",{children:"New Folder"})]})]})]}),e.jsx("div",{className:"breadcrumb-nav",children:n.map((be,Re)=>e.jsxs("span",{className:"breadcrumb-item",children:[Re>0&&e.jsx("i",{className:"fa fa-chevron-right"}),e.jsx("button",{onClick:()=>Se(Re),className:Re===n.length-1?"active":"",children:be.name})]},Re))}),e.jsx("div",{className:`file-manager-columns ${D?"drag-over-active":""}`,"data-drop-message":t[t.length-1].folderId!==null?"Drop files here to upload to current folder":"Drop files on a folder to upload",onDragOver:kt,onDragLeave:zt,onDrop:$t,children:Ye?e.jsxs("div",{className:"loading-state",children:[e.jsx("i",{className:"fa fa-spinner fa-spin fa-2x"}),e.jsx("p",{children:"Loading documents..."})]}):Je.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("i",{className:"fa fa-folder-open fa-3x"}),e.jsx("p",{children:c?"No files match your search":"This folder is empty"}),!c&&e.jsxs("button",{className:"btn-action btn-primary",onClick:()=>m(!0),children:[e.jsx("i",{className:"fa fa-folder-plus"}),"Create Folder"]})]}):e.jsx("div",{className:"file-grid",children:Je.map(be=>e.jsxs("div",{className:`file-item ${be.type} ${be.isPublic?"public-folder":""} ${$===be.id?"drag-over-folder":""}`,onDoubleClick:()=>{be.type==="folder"?ne(be,t.length-1):ee(be)},onClick:Re=>{be.type==="folder"&&Re.detail},onContextMenu:Re=>Ie(Re,be),draggable:be.type==="folder",onDragStart:Re=>{be.type==="folder"&&(se(be),Re.dataTransfer.effectAllowed="move")},onDragEnter:Re=>{be.type==="folder"&&D?Mt(Re,be.id):be.type==="folder"&&(Re.preventDefault(),Re.currentTarget.classList.add("drag-over"))},onDragOver:Re=>{be.type==="folder"&&D?At(Re,be.id):be.type==="folder"&&(Re.preventDefault(),Re.currentTarget.classList.add("drag-over"))},onDragLeave:Re=>{be.type==="folder"&&D?Bt(Re):Re.currentTarget.classList.remove("drag-over")},onDrop:Re=>{Re.preventDefault(),Re.stopPropagation(),Re.currentTarget.classList.remove("drag-over"),D&&be.type==="folder"?rs(Re,be.id):H&&be.type==="folder"&&H.id!==be.id&&W.fire("Info","Move functionality will be implemented soon","info")},children:[e.jsx("div",{className:"file-icon-container",children:be.type==="folder"?e.jsx("div",{className:"file-icon",children:e.jsx("i",{className:`fa fa-folder ${be.isPublic?"public":""}`})}):be.thumbnailUrl&&(be.mimeType==="image"||be.mimeType==="pdf")?e.jsxs("div",{className:"file-thumbnail",children:[e.jsx("img",{src:be.thumbnailUrl,alt:be.name,className:"thumbnail-image",onError:Re=>{const lt=Re.target;lt.style.display="none";const tt=document.createElement("div");tt.className="file-icon",tt.innerHTML=`<i class="fa ${je(be.name)}"></i>`,lt.parentElement?.appendChild(tt)}}),e.jsx("div",{className:"thumbnail-overlay",children:e.jsx("i",{className:`fa ${je(be.name)}`})})]}):e.jsx("div",{className:"file-icon",children:e.jsx("i",{className:`fa ${je(be.name)}`})})}),e.jsxs("div",{className:"file-name",title:be.name,children:[be.name,be.isPublic&&e.jsx("span",{className:"public-badge",title:"Public Folder - Visible to all staff",children:e.jsx("i",{className:"fa fa-globe"})})]})]},be.id))})}),P&&e.jsxs("div",{className:"context-menu",style:{left:P.x,top:P.y},onClick:be=>be.stopPropagation(),children:[P.item.type==="folder"&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>{J(P.item.id),y(!0),K(null)},children:[e.jsx("i",{className:"fa fa-upload"})," Upload File Here"]}),e.jsxs("button",{onClick:()=>{V(P.item),L(P.item.name),j(!0),K(null)},children:[e.jsx("i",{className:"fa fa-edit"})," Rename"]})]}),P.item.type==="file"&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>{Ve(P.item),K(null)},children:[e.jsx("i",{className:"fa fa-eye"})," Preview"]}),e.jsxs("button",{onClick:()=>{xt(P.item),K(null)},children:[e.jsx("i",{className:"fa fa-download"})," Download"]}),e.jsxs("button",{onClick:()=>{V(P.item),L(P.item.name),j(!0),K(null)},children:[e.jsx("i",{className:"fa fa-edit"})," Rename"]})]}),e.jsx("div",{className:"context-menu-divider"}),e.jsxs("button",{className:"danger",onClick:()=>{bt(P.item),K(null)},children:[e.jsx("i",{className:"fa fa-trash"})," Delete"]})]}),h&&e.jsx("div",{className:"modal-overlay",onClick:()=>m(!1),children:e.jsxs("div",{className:"modal-content",onClick:be=>be.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{children:"Create New Folder"}),e.jsx("button",{className:"modal-close",onClick:()=>m(!1),children:e.jsx("i",{className:"fa fa-times"})})]}),e.jsxs("div",{className:"modal-body",children:[e.jsx("label",{children:"Folder Name"}),e.jsx("input",{type:"text",value:b,onChange:be=>N(be.target.value),placeholder:"Enter folder name",autoFocus:!0,onKeyPress:be=>{be.key==="Enter"&&He()}}),e.jsxs("div",{className:"folder-type-selector",children:[e.jsxs("label",{className:"folder-type-label",children:[e.jsx("input",{type:"radio",name:"folderType",checked:!v,onChange:()=>S(!1)}),e.jsxs("span",{children:[e.jsx("i",{className:"fa fa-user"})," Private Folder (Only you can see)"]})]}),e.jsxs("label",{className:"folder-type-label",children:[e.jsx("input",{type:"radio",name:"folderType",checked:v,onChange:()=>S(!0)}),e.jsxs("span",{children:[e.jsx("i",{className:"fa fa-globe"})," Public Folder (All staff can see)"]})]})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn-secondary",onClick:()=>m(!1),children:"Cancel"}),e.jsx("button",{className:"btn-primary",onClick:He,disabled:et.isPending,children:et.isPending?"Creating...":"Create"})]})]})}),p&&e.jsx("div",{className:"modal-overlay",onClick:()=>y(!1),children:e.jsxs("div",{className:"modal-content",onClick:be=>be.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{children:"Upload File"}),e.jsx("button",{className:"modal-close",onClick:()=>y(!1),children:e.jsx("i",{className:"fa fa-times"})})]}),e.jsxs("div",{className:"modal-body",children:[e.jsx("label",{children:"Select File"}),e.jsx("input",{ref:le,type:"file",onChange:Lt,accept:".txt,.pdf,.doc,.docx,.xls,.xlsx,.jpg,.jpeg,.png,.ppt,.zip"}),e.jsx("small",{children:"Max file size: 10MB"})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn-secondary",onClick:()=>y(!1),children:"Cancel"}),e.jsx("button",{className:"btn-primary",onClick:be=>{be.preventDefault(),Dt()},disabled:Xe.isPending||!te,children:Xe.isPending?"Uploading...":"Upload"})]})]})}),g&&z&&e.jsx("div",{className:"modal-overlay",onClick:()=>j(!1),children:e.jsxs("div",{className:"modal-content",onClick:be=>be.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h3",{children:["Rename ",z.type==="folder"?"Folder":"File"]}),e.jsx("button",{className:"modal-close",onClick:()=>j(!1),children:e.jsx("i",{className:"fa fa-times"})})]}),e.jsxs("div",{className:"modal-body",children:[e.jsx("label",{children:"New Name"}),e.jsx("input",{type:"text",value:E,onChange:be=>L(be.target.value),placeholder:"Enter new name",autoFocus:!0,onKeyPress:be=>{be.key==="Enter"&&ys()}})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn-secondary",onClick:()=>j(!1),children:"Cancel"}),e.jsx("button",{className:"btn-primary",onClick:ys,children:"Rename"})]})]})}),X&&Q&&e.jsx("div",{className:"preview-modal-overlay",onClick:()=>{R(null),Y(null)},children:e.jsxs("div",{className:"preview-modal",onClick:be=>be.stopPropagation(),children:[e.jsxs("div",{className:"preview-modal-header",children:[e.jsxs("h3",{children:[e.jsx("i",{className:`fa ${je(X.name)}`}),X.name]}),e.jsx("button",{className:"modal-close",onClick:()=>{R(null),Y(null)},children:e.jsx("i",{className:"fa fa-times"})})]}),e.jsx("div",{className:"preview-modal-body",children:X.mimeType==="image"?e.jsx("img",{src:Q,alt:X.name,className:"preview-image"}):X.mimeType==="pdf"?e.jsx("iframe",{src:Q,className:"preview-iframe",title:X.name}):e.jsxs("div",{className:"preview-unsupported",children:[e.jsx("i",{className:"fa fa-file fa-4x"}),e.jsx("p",{children:"Preview not available for this file type"}),e.jsxs("button",{className:"btn-action btn-primary",onClick:()=>{xt(X),R(null),Y(null)},children:[e.jsx("i",{className:"fa fa-download"})," Download File"]})]})}),e.jsxs("div",{className:"preview-modal-footer",children:[e.jsx("button",{className:"btn-secondary",onClick:()=>{R(null),Y(null)},children:"Close"}),e.jsxs("button",{className:"btn-action btn-primary",onClick:()=>{xt(X)},children:[e.jsx("i",{className:"fa fa-download"})," Download"]})]})]})})]})}const wh={baseUrl:`${Ct.baseUrl}`,async getCategories(){try{return(await Ne.get(`${this.baseUrl}/notesController.php?action=getCategories`)).data}catch(s){throw s}},async addCategory(s){try{return(await Ne.post(`${this.baseUrl}/notesController.php?action=addCategory`,{name:s})).data}catch(t){throw t}},async loadNotes(s){try{return(await Ne.get(`${this.baseUrl}/notesController.php?action=load&category_id=${s}`)).data}catch(t){throw t}},async saveNotes(s,t){try{return(await Ne.post(`${this.baseUrl}/notesController.php?action=save`,{notes:s,category_id:t})).data}catch(a){throw a}}};function d9(){const s=Wa(),t=A.useRef(null),[a,n]=A.useState(null),[r,i]=A.useState(""),[o,c]=A.useState("idle"),[u,h]=A.useState(!1),[m,p]=A.useState(""),y=A.useRef(null),g=A.useRef(!1),j=A.useRef(null),{data:b,isLoading:N}=Rt({queryKey:["notesCategories"],queryFn:()=>wh.getCategories(),select:H=>H.categories||[]}),v=b||[];A.useEffect(()=>{v.length>0&&a===null&&n(v[0].id)},[v,a]);const{data:S,isLoading:E}=Rt({queryKey:["notes",a],queryFn:()=>{if(!a)throw new Error("No category selected");return wh.loadNotes(a)},enabled:!!a,select:H=>H.notes||"",refetchOnWindowFocus:!1,staleTime:0});A.useEffect(()=>{a&&t.current&&(j.current!==a?!E&&S!==void 0&&(t.current.innerHTML=S,i(S),j.current=a,g.current=!1):j.current===a&&!E&&S!==void 0&&!g.current&&t.current.innerHTML!==S&&(t.current.innerHTML=S,i(S)))},[S,a,E]);const L=wt({mutationFn:({content:H,categoryId:se})=>wh.saveNotes(H,se),onSuccess:(H,se)=>{c("saved"),s.invalidateQueries({queryKey:["notes",se.categoryId]}),setTimeout(()=>{c("idle")},2e3)},onError:()=>{c("error"),setTimeout(()=>{c("idle")},3e3)}}),z=A.useCallback(()=>{if(!t.current||!a)return;const H=t.current.innerHTML;L.mutate({content:H,categoryId:a})},[a,L]),V=A.useCallback(()=>{if(!t.current||!a)return;g.current=!0;const H=t.current.innerHTML;i(H),y.current&&clearTimeout(y.current),c("saving"),y.current=setTimeout(()=>{L.mutate({content:H,categoryId:a}),g.current=!1},1e3)},[a,L]),te=A.useCallback(()=>{if(!t.current||!a)return;const H=t.current.innerHTML;H!==r&&(y.current&&clearTimeout(y.current),L.mutate({content:H,categoryId:a})),g.current=!1},[a,r,L]);A.useEffect(()=>()=>{if(t.current&&a&&g.current){const H=t.current.innerHTML;H&&H!==r&&wh.saveNotes(H,a).catch(()=>{})}y.current&&clearTimeout(y.current)},[a,r]);const q=wt({mutationFn:H=>wh.addCategory(H),onSuccess:H=>{H.success&&H.category?(s.invalidateQueries({queryKey:["notesCategories"]}),n(H.category.id),h(!1),p(""),W.fire("Success","Category added successfully","success")):W.fire("Error",H.message||"Failed to add category","error")},onError:H=>{W.fire("Error",H.response?.data?.message||"Failed to add category","error")}}),B=()=>{const H=m.trim();if(!H){W.fire("Error","Please enter a category name","error");return}q.mutate(H)},J=(H,se)=>{document.execCommand(H,!1,se),t.current?.focus(),V()},P=()=>{switch(o){case"saving":return"Saving...";case"saved":return"Saved";case"error":return"Error saving";default:return"Start typing..."}},K=()=>{switch(o){case"saving":return"status-saving";case"saved":return"status-saved";case"error":return"status-error";default:return""}};return e.jsxs("div",{className:"notes-container",children:[e.jsx("div",{className:"notes-header",children:e.jsxs("div",{className:"notes-header-content",children:[e.jsxs("h1",{className:"notes-title",children:[e.jsx("i",{className:"fa fa-sticky-note"})," Notes"]}),e.jsxs("div",{className:"header-actions",children:[e.jsxs("button",{className:"btn-save-now",onClick:z,disabled:L.isPending||!a,title:"Save Now",children:[e.jsx("i",{className:"fa fa-save"})," Save Now"]}),e.jsxs("div",{className:`save-status ${K()}`,children:[e.jsx("i",{className:`fa ${o==="saved"?"fa-check-circle":o==="saving"?"fa-spinner fa-spin":o==="error"?"fa-exclamation-circle":"fa-circle"}`}),P()]})]})]})}),e.jsxs("div",{className:"notes-layout",children:[e.jsxs("div",{className:"notes-sidebar",children:[e.jsxs("div",{className:"sidebar-header",children:[e.jsx("h3",{children:"Categories"}),e.jsx("button",{className:"btn-add-category",onClick:()=>h(!0),title:"Add Category",children:e.jsx("i",{className:"fa fa-plus"})})]}),e.jsx("div",{className:"categories-list",children:N?e.jsxs("div",{className:"loading-state",children:[e.jsx("i",{className:"fa fa-spinner fa-spin"})," Loading categories..."]}):v.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("i",{className:"fa fa-folder-open"}),e.jsx("p",{children:"No categories yet"}),e.jsx("button",{className:"btn-primary-small",onClick:()=>h(!0),children:"Create Category"})]}):v.map(H=>e.jsxs("div",{className:`category-item ${a===H.id?"active":""}`,onClick:async()=>{if(H.id!==a){if(t.current&&a){const se=t.current.innerHTML;if(se.trim()!=="")try{await wh.saveNotes(se,a),s.invalidateQueries({queryKey:["notes",a]})}catch{}}g.current=!1,j.current=a,n(H.id)}},children:[e.jsx("i",{className:"fa fa-folder"}),e.jsx("span",{children:H.name})]},H.id))})]}),e.jsx("div",{className:"notes-editor-area",children:a?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"editor-toolbar",children:[e.jsxs("div",{className:"toolbar-group",children:[e.jsx("button",{className:"toolbar-btn",onClick:()=>J("bold"),title:"Bold",children:e.jsx("i",{className:"fa fa-bold"})}),e.jsx("button",{className:"toolbar-btn",onClick:()=>J("italic"),title:"Italic",children:e.jsx("i",{className:"fa fa-italic"})}),e.jsx("button",{className:"toolbar-btn",onClick:()=>J("underline"),title:"Underline",children:e.jsx("i",{className:"fa fa-underline"})})]}),e.jsx("div",{className:"toolbar-divider"}),e.jsxs("div",{className:"toolbar-group",children:[e.jsx("button",{className:"toolbar-btn",onClick:()=>J("justifyLeft"),title:"Align Left",children:e.jsx("i",{className:"fa fa-align-left"})}),e.jsx("button",{className:"toolbar-btn",onClick:()=>J("justifyCenter"),title:"Align Center",children:e.jsx("i",{className:"fa fa-align-center"})}),e.jsx("button",{className:"toolbar-btn",onClick:()=>J("justifyRight"),title:"Align Right",children:e.jsx("i",{className:"fa fa-align-right"})})]}),e.jsx("div",{className:"toolbar-divider"}),e.jsxs("div",{className:"toolbar-group",children:[e.jsx("button",{className:"toolbar-btn",onClick:()=>J("insertUnorderedList"),title:"Bullet List",children:e.jsx("i",{className:"fa fa-list-ul"})}),e.jsx("button",{className:"toolbar-btn",onClick:()=>J("insertOrderedList"),title:"Numbered List",children:e.jsx("i",{className:"fa fa-list-ol"})})]}),e.jsx("div",{className:"toolbar-divider"}),e.jsx("div",{className:"toolbar-group",children:e.jsx("button",{className:"toolbar-btn",onClick:()=>J("removeFormat"),title:"Clear Formatting",children:e.jsx("i",{className:"fa fa-remove-format"})})})]}),e.jsxs("div",{className:"editor-wrapper",children:[e.jsx("div",{ref:t,className:`notes-editor ${E?"loading":""}`,contentEditable:!E,onInput:V,onBlur:te,onPaste:H=>{H.preventDefault();const se=H.clipboardData.getData("text/plain");document.execCommand("insertText",!1,se),V()},placeholder:"Start typing your notes here..."}),E&&e.jsxs("div",{className:"editor-loading-overlay",children:[e.jsx("i",{className:"fa fa-spinner fa-spin"})," Loading notes..."]})]})]}):e.jsxs("div",{className:"empty-editor-state",children:[e.jsx("i",{className:"fa fa-sticky-note"}),e.jsx("h3",{children:"Select a category to start"}),e.jsx("p",{children:"Choose a category from the sidebar or create a new one"})]})})]}),u&&e.jsx("div",{className:"modal-overlay",onClick:()=>h(!1),children:e.jsxs("div",{className:"modal-content",onClick:H=>H.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{children:"Add New Category"}),e.jsx("button",{className:"modal-close",onClick:()=>h(!1),children:e.jsx("i",{className:"fa fa-times"})})]}),e.jsx("div",{className:"modal-body",children:e.jsx("input",{type:"text",className:"form-input",placeholder:"Category name",value:m,onChange:H=>p(H.target.value),onKeyPress:H=>{H.key==="Enter"&&B()},autoFocus:!0})}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn-secondary",onClick:()=>h(!1),children:"Cancel"}),e.jsx("button",{className:"btn-primary",onClick:B,disabled:q.isPending,children:q.isPending?"Adding...":"Add Category"})]})]})})]})}const Md={baseUrl:`${Ct.baseUrl}`,async getFolders(s){try{const t=s?`${this.baseUrl}/attachmentsController.php?get_folders=1&parent_id=${s}`:`${this.baseUrl}/attachmentsController.php?get_folders=1`;return(await Ne.get(t)).data}catch(t){throw t}},async createFolder(s,t){try{const a=new FormData;return a.append("create_folder","1"),a.append("folder_name",s),t&&a.append("parent_id",t.toString()),(await Ne.post(`${this.baseUrl}/attachmentsController.php`,a)).data}catch(a){throw a}},async renameFolder(s,t){try{const a=new FormData;return a.append("rename_folder","1"),a.append("folder_id",s.toString()),a.append("new_name",t),(await Ne.post(`${this.baseUrl}/attachmentsController.php`,a)).data}catch(a){throw a}},async deleteFolder(s,t){try{const a=new FormData;return a.append("delete_folder",s.toString()),t&&a.append("force","1"),(await Ne.post(`${this.baseUrl}/attachmentsController.php`,a)).data}catch(a){throw a}},async getFiles(s){try{const t=s?`${this.baseUrl}/attachmentsController.php?folder_id=${s}`:`${this.baseUrl}/attachmentsController.php?root_folder=1`;return(await Ne.get(t)).data}catch(t){throw t}},async uploadFile(s,t,a){try{const n=new FormData;return n.append("file",s),t&&n.append("folder_id",t.toString()),a&&n.append("description",a),(await Ne.post(`${this.baseUrl}/attachmentsController.php`,n,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(n){throw n}},async deleteFile(s){try{const t=new URLSearchParams;return t.append("delete",s.toString()),(await Ne.post(`${this.baseUrl}/attachmentsController.php`,t.toString(),{headers:{"Content-Type":"application/x-www-form-urlencoded"}})).data}catch(t){throw t}},async deleteMultipleFiles(s){try{const t=new FormData;return t.append("delete_multiple","1"),s.forEach(n=>{t.append("file_ids[]",n.toString())}),(await Ne.post(`${this.baseUrl}/attachmentsController.php`,t)).data}catch(t){throw t}},downloadFile(s){window.open(`${this.baseUrl}/attachmentsController.php?download=${s}`,"_blank")},async getStaff(){try{return(await Ne.get(`${this.baseUrl}/attachmentsController.php?get_staff=1`)).data}catch(s){throw s}},async getFolderShares(s){try{return(await Ne.get(`${this.baseUrl}/attachmentsController.php?get_folder_shares=${s}`)).data}catch(t){throw t}},async addFolderShare(s,t,a){try{const n=new FormData;return n.append("add_share","1"),n.append("folder_id",s.toString()),n.append("staff_id",t.toString()),n.append("permission",a),(await Ne.post(`${this.baseUrl}/attachmentsController.php`,n)).data}catch(n){throw n}},async removeFolderShare(s){try{const t=new FormData;return t.append("remove_share",s.toString()),(await Ne.post(`${this.baseUrl}/attachmentsController.php`,t)).data}catch(t){throw t}},async processOCR(s){try{const t=new FormData;return t.append("process_ocr","1"),t.append("file_id",s.toString()),(await Ne.post(`${this.baseUrl}/attachmentsController.php`,t)).data}catch(t){throw t}}};function u9(){const s=Wa(),[t,a]=A.useState(null),[n,r]=A.useState([{id:null,name:"Home"}]),[i,o]=A.useState(""),[c,u]=A.useState([]),[h,m]=A.useState(!1),[p,y]=A.useState(""),[g,j]=A.useState(!1),[b,N]=A.useState([]),[v,S]=A.useState(""),[E,L]=A.useState(null),[z,V]=A.useState(null),[te,q]=A.useState(!1),B=A.useRef(null),J=A.useRef(null),{data:P=[],isLoading:K,error:H}=Rt({queryKey:["attachmentsFolders",t],queryFn:()=>Md.getFolders(t||void 0),refetchOnWindowFocus:!1,retry:1}),{data:se=[],isLoading:X,error:R}=Rt({queryKey:["attachmentsFiles",t],queryFn:()=>Md.getFiles(t||void 0),refetchOnWindowFocus:!1,retry:1}),Q=se.filter(Se=>Se.original_name.toLowerCase().includes(i.toLowerCase())||Se.description&&Se.description.toLowerCase().includes(i.toLowerCase())),Y=wt({mutationFn:Se=>Md.createFolder(Se,t||void 0),onSuccess:()=>{W.fire("Success","Folder created successfully","success"),m(!1),y(""),s.invalidateQueries({queryKey:["attachmentsFolders"]})},onError:Se=>{W.fire("Error",Se.response?.data?.error||"Failed to create folder","error")}}),$=wt({mutationFn:async({files:Se,folderId:Ve,description:xt})=>{const ee=[];for(const Ie of Se)try{const He=await Md.uploadFile(Ie,Ve,xt);ee.push({success:!0,file:Ie.name,result:He})}catch(He){ee.push({success:!1,file:Ie.name,error:He.message})}return ee},onSuccess:Se=>{const Ve=Se.filter(ee=>ee.success).length,xt=Se.filter(ee=>!ee.success).length;Ve>0?(W.fire("Success",`${Ve} file(s) uploaded successfully${xt>0?`, ${xt} failed`:""}`,"success"),s.invalidateQueries({queryKey:["attachmentsFiles"]}),N([]),S(""),j(!1)):W.fire("Error","All uploads failed","error")},onError:()=>{W.fire("Error","Upload failed","error")}}),me=wt({mutationFn:Se=>Md.deleteFile(Se),onSuccess:()=>{W.fire("Success","File deleted successfully","success"),s.invalidateQueries({queryKey:["attachmentsFiles"]}),u([])},onError:Se=>{W.fire("Error",Se.response?.data?.error||"Failed to delete file","error")}}),D=wt({mutationFn:Se=>Md.deleteMultipleFiles(Se),onSuccess:Se=>{W.fire("Success",`${Se.deleted||c.length} file(s) deleted successfully`,"success"),s.invalidateQueries({queryKey:["attachmentsFiles"]}),u([])},onError:Se=>{W.fire("Error",Se.response?.data?.error||"Failed to delete files","error")}}),U=wt({mutationFn:({folderId:Se,force:Ve})=>Md.deleteFolder(Se,Ve),onSuccess:()=>{W.fire("Success","Folder deleted successfully","success"),s.invalidateQueries({queryKey:["attachmentsFolders"]}),s.invalidateQueries({queryKey:["attachmentsFiles"]})},onError:Se=>{const Ve=Se.response?.data;Ve?.needs_confirmation?W.fire({title:"Folder Contains Files",text:`This folder contains ${Ve.file_count} file(s). Do you want to delete it anyway?`,icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete",cancelButtonText:"Cancel"}).then(xt=>{xt.isConfirmed&&U.mutate({folderId:Se.response?.config?.data?.get("delete_folder")||0,force:!0})}):W.fire("Error",Ve?.error||"Failed to delete folder","error")}}),le=Se=>{a(Se.folder_id),r(Ve=>[...Ve,{id:Se.folder_id,name:Se.folder_name}]),u([])},de=Se=>{if(Se===0)a(null),r([{id:null,name:"Home"}]);else{const Ve=n[Se];a(Ve.id),r(n.slice(0,Se+1))}u([])},G=Se=>{u(Ve=>Ve.includes(Se)?Ve.filter(xt=>xt!==Se):[...Ve,Se])},je=()=>{c.length===Q.length?u([]):u(Q.map(Se=>Se.id))},De=Se=>{Se&&Se.length>0&&(N(Array.from(Se)),j(!0))},Pe=Se=>{Se.preventDefault(),q(!0)},ke=Se=>{Se.preventDefault(),q(!1)},Ye=Se=>{Se.preventDefault(),q(!1);const Ve=Se.dataTransfer.files;Ve.length>0&&De(Ve)},Qe=Se=>{L(Se);const Ve=`${Ct.baseUrl}/attachmentsController.php?download=${Se.id}`;V(Ve)},et=Se=>{Md.downloadFile(Se)},Xe=Se=>{const Ve=Se.split(".").pop()?.toLowerCase()||"";return{pdf:"fa-file-pdf",jpg:"fa-file-image",jpeg:"fa-file-image",png:"fa-file-image",gif:"fa-file-image",doc:"fa-file-word",docx:"fa-file-word",xls:"fa-file-excel",xlsx:"fa-file-excel",ppt:"fa-file-powerpoint",pptx:"fa-file-powerpoint",zip:"fa-file-archive",rar:"fa-file-archive",txt:"fa-file-alt"}[Ve]||"fa-file"},re=Se=>Se||"Unknown",ne=Se=>new Date(Se).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return e.jsxs("div",{className:"attachments-container",children:[e.jsxs("div",{className:"attachments-header",children:[e.jsxs("h1",{className:"attachments-title",children:[e.jsx("i",{className:"fa fa-paperclip"})," Attachments"]}),e.jsxs("div",{className:"header-actions",children:[e.jsxs("button",{className:"btn-primary",onClick:()=>j(!0),children:[e.jsx("i",{className:"fa fa-upload"})," Upload Files"]}),e.jsxs("button",{className:"btn-secondary",onClick:()=>m(!0),children:[e.jsx("i",{className:"fa fa-folder-plus"})," New Folder"]})]})]}),e.jsx("div",{className:"breadcrumbs",children:n.map((Se,Ve)=>e.jsxs("span",{className:"breadcrumb-item",children:[Ve>0&&e.jsx("i",{className:"fa fa-chevron-right"}),e.jsx("button",{onClick:()=>de(Ve),className:Ve===n.length-1?"active":"",children:Se.name})]},Ve))}),e.jsx("div",{className:"search-container",children:e.jsx("input",{type:"text",className:"search-input",placeholder:"Search files...",value:i,onChange:Se=>o(Se.target.value)})}),c.length>0&&e.jsxs("div",{className:"multi-select-bar",children:[e.jsxs("span",{children:[c.length," file(s) selected"]}),e.jsxs("div",{className:"multi-select-actions",children:[e.jsxs("button",{className:"btn-danger",onClick:()=>{W.fire({title:"Delete Files?",text:`Are you sure you want to delete ${c.length} file(s)?`,icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete",cancelButtonText:"Cancel"}).then(Se=>{Se.isConfirmed&&D.mutate(c)})},children:[e.jsx("i",{className:"fa fa-trash"})," Delete Selected"]}),e.jsx("button",{className:"btn-secondary",onClick:()=>u([]),children:"Cancel"})]})]}),e.jsxs("div",{ref:J,className:`dropzone ${te?"dragging":""}`,onDragOver:Pe,onDragLeave:ke,onDrop:Ye,onClick:()=>B.current?.click(),children:[e.jsx("input",{ref:B,type:"file",multiple:!0,className:"hidden",onChange:Se=>De(Se.target.files)}),e.jsx("i",{className:"fa fa-cloud-upload-alt"}),e.jsx("p",{children:"Drag and drop files here or click to browse"}),e.jsx("small",{children:"Maximum file size: 10MB"})]}),P.length>0&&e.jsxs("div",{className:"folders-section",children:[e.jsx("h3",{children:"Folders"}),e.jsx("div",{className:"folders-grid",children:P.map(Se=>e.jsxs("div",{className:"folder-card",onClick:()=>le(Se),children:[e.jsx("div",{className:"folder-icon",children:e.jsx("i",{className:"fa fa-folder"})}),e.jsx("div",{className:"folder-name",children:Se.folder_name}),e.jsxs("div",{className:"folder-meta",children:[Se.created_by&&e.jsxs("span",{children:["By ",Se.created_by]}),Se.is_shared===1&&e.jsx("span",{className:"shared-badge",children:"Shared"})]})]},Se.folder_id))})]}),e.jsxs("div",{className:"files-section",children:[e.jsxs("div",{className:"files-header",children:[e.jsx("h3",{children:"Files"}),Q.length>0&&e.jsx("button",{className:"btn-link",onClick:je,children:c.length===Q.length?"Deselect All":"Select All"})]}),R?e.jsxs("div",{className:"error-state",children:[e.jsx("i",{className:"fa fa-exclamation-triangle"}),e.jsx("p",{children:"Error loading files"}),e.jsx("small",{children:R?.response?.data?.error||R?.message||"Unknown error"})]}):X?e.jsxs("div",{className:"loading-state",children:[e.jsx("i",{className:"fa fa-spinner fa-spin"})," Loading files..."]}):Q.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx("i",{className:"fa fa-file"}),e.jsx("p",{children:"No files found"})]}):e.jsx("div",{className:"files-grid",children:Q.map(Se=>e.jsxs("div",{className:`file-card ${c.includes(Se.id)?"selected":""}`,children:[e.jsx("input",{type:"checkbox",className:"file-checkbox",checked:c.includes(Se.id),onChange:()=>G(Se.id),onClick:Ve=>Ve.stopPropagation()}),e.jsx("div",{className:"file-thumbnail",onClick:()=>Qe(Se),children:Se.thumbnail_url&&(Se.mimeType==="image"||Se.mimeType==="pdf")?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:Se.thumbnail_url,alt:Se.original_name,className:"thumbnail-image",onError:Ve=>{const xt=Ve.target;xt.style.display="none";const ee=document.createElement("div");ee.className="file-icon",ee.innerHTML=`<i class="fa ${Xe(Se.original_name)}"></i>`,xt.parentElement?.appendChild(ee)}}),e.jsx("div",{className:"thumbnail-overlay",children:e.jsx("i",{className:`fa ${Xe(Se.original_name)}`})})]}):e.jsx("div",{className:"file-icon",children:e.jsx("i",{className:`fa ${Xe(Se.original_name)}`})})}),e.jsxs("div",{className:"file-info",children:[e.jsx("div",{className:"file-name",title:Se.original_name,children:Se.original_name}),e.jsxs("div",{className:"file-meta",children:[re(Se.file_size),"  ",ne(Se.upload_date)]}),Se.description&&e.jsx("div",{className:"file-description",children:Se.description})]}),e.jsxs("div",{className:"file-actions",children:[e.jsx("button",{className:"btn-icon",onClick:()=>Qe(Se),title:"Preview",children:e.jsx("i",{className:"fa fa-eye"})}),e.jsx("button",{className:"btn-icon",onClick:()=>et(Se.id),title:"Download",children:e.jsx("i",{className:"fa fa-download"})}),e.jsx("button",{className:"btn-icon btn-danger",onClick:()=>{W.fire({title:"Delete File?",text:"Are you sure you want to delete this file?",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete",cancelButtonText:"Cancel"}).then(Ve=>{Ve.isConfirmed&&me.mutate(Se.id)})},title:"Delete",children:e.jsx("i",{className:"fa fa-trash"})})]})]},Se.id))})]}),h&&e.jsx("div",{className:"modal-overlay",onClick:()=>m(!1),children:e.jsxs("div",{className:"modal-content",onClick:Se=>Se.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{children:"Create New Folder"}),e.jsx("button",{className:"modal-close",onClick:()=>m(!1),children:e.jsx("i",{className:"fa fa-times"})})]}),e.jsx("div",{className:"modal-body",children:e.jsx("input",{type:"text",className:"form-input",placeholder:"Folder name",value:p,onChange:Se=>y(Se.target.value),onKeyPress:Se=>{Se.key==="Enter"&&p.trim()&&Y.mutate(p.trim())},autoFocus:!0})}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn-secondary",onClick:()=>m(!1),children:"Cancel"}),e.jsx("button",{className:"btn-primary",onClick:()=>{p.trim()&&Y.mutate(p.trim())},disabled:Y.isPending||!p.trim(),children:Y.isPending?"Creating...":"Create"})]})]})}),g&&e.jsx("div",{className:"modal-overlay",onClick:()=>j(!1),children:e.jsxs("div",{className:"modal-content modal-large",onClick:Se=>Se.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{children:"Upload Files"}),e.jsx("button",{className:"modal-close",onClick:()=>j(!1),children:e.jsx("i",{className:"fa fa-times"})})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Files"}),e.jsx("input",{type:"file",multiple:!0,onChange:Se=>N(Array.from(Se.target.files||[]))}),b.length>0&&e.jsx("div",{className:"upload-files-list",children:b.map((Se,Ve)=>e.jsxs("div",{className:"upload-file-item",children:[e.jsx("i",{className:`fa ${Xe(Se.name)}`}),e.jsx("span",{children:Se.name}),e.jsxs("span",{className:"file-size",children:["(",(Se.size/1024/1024).toFixed(2)," MB)"]})]},Ve))})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Description (optional)"}),e.jsx("textarea",{className:"form-textarea",placeholder:"Add a description...",value:v,onChange:Se=>S(Se.target.value),rows:3})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn-secondary",onClick:()=>j(!1),children:"Cancel"}),e.jsx("button",{className:"btn-primary",onClick:()=>{b.length>0&&$.mutate({files:b,folderId:t,description:v||void 0})},disabled:$.isPending||b.length===0,children:$.isPending?"Uploading...":"Upload"})]})]})}),E&&z&&e.jsx("div",{className:"modal-overlay",onClick:()=>L(null),children:e.jsxs("div",{className:"modal-content modal-large",onClick:Se=>Se.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{children:E.original_name}),e.jsx("button",{className:"modal-close",onClick:()=>L(null),children:e.jsx("i",{className:"fa fa-times"})})]}),e.jsx("div",{className:"modal-body",children:e.jsx("iframe",{src:z,className:"preview-iframe"})}),e.jsxs("div",{className:"modal-footer",children:[e.jsxs("button",{className:"btn-primary",onClick:()=>et(E.id),children:[e.jsx("i",{className:"fa fa-download"})," Download"]}),e.jsx("button",{className:"btn-secondary",onClick:()=>L(null),children:"Close"})]})]})})]})}const bo={baseUrl:`${Ct.baseUrl}`,async getStaffMembers(){try{return(await Ne.get(`${this.baseUrl}/chatroomController.php?action=getStaff`)).data}catch(s){throw s}},async getMessages(s){try{const t=await Ne.get(`${this.baseUrl}/get_messages.php?chat=${s}`);return console.log("API response for chat",s,":",t.data),console.log("Response type:",typeof t.data,"Is array:",Array.isArray(t.data)),t.data||[]}catch(t){throw console.error("Error fetching messages:",t),t}},async sendMessage(s,t){try{const a=new URLSearchParams;a.append("chat_id",s),a.append("message",t),console.log("Sending params:",{chat_id:s,message:t});const n=await Ne.post(`${this.baseUrl}/send_message.php`,a.toString(),{headers:{"Content-Type":"application/x-www-form-urlencoded"}});return console.log("Server response:",n.data),n.data}catch(a){throw console.error("Send message error:",a),a}},async sendAttachments(s,t){try{const a=new FormData;a.append("chat_id",s),t.forEach((r,i)=>{console.log(`Appending file ${i}:`,r.name,r.size,r.type),a.append("attachments[]",r,r.name)}),console.log("Sending attachments to chat:",s);const n=await Ne.post(`${this.baseUrl}/send_message.php`,a);return console.log("Attachment upload response:",n.data),n.data}catch(a){throw console.error("Attachment upload error:",a),a}},async sendVoiceMessage(s,t,a){try{const n=new FormData;n.append("chat_id",s),n.append("voice_message",t,"voice.webm"),n.append("voice_duration",a.toString()),console.log("Sending voice message:",{chatId:s,duration:a,blobSize:t.size,blobType:t.type});const r=await Ne.post(`${this.baseUrl}/send_message.php`,n);return console.log("Voice message response:",r.data),r.data}catch(n){throw console.error("Voice message error:",n),n}},async sendBotCommand(s,t,a){try{const n=new FormData;return n.append("chat_id",s),n.append("bot_command",t),a&&n.append("bot_params",JSON.stringify(a)),(await Ne.post(`${this.baseUrl}/send_message.php`,n)).data}catch(n){throw n}},async getUnreadCounts(){try{return(await Ne.get(`${this.baseUrl}/get_unread_messages.php`)).data}catch(s){throw s}},async markAsRead(s){try{await Ne.get(`${this.baseUrl}/get_unread_messages.php?mark_read=${s}`)}catch(t){throw t}},async searchMessages(s,t){try{const a=t?`${this.baseUrl}/chatroomController.php?action=search&query=${encodeURIComponent(s)}&chat_id=${t}`:`${this.baseUrl}/chatroomController.php?action=search&query=${encodeURIComponent(s)}`;return(await Ne.get(a)).data}catch(a){throw a}},async updateTypingStatus(s,t){try{const a=new FormData;a.append("chat_id",s),a.append("typing",t?"1":"0"),await Ne.post(`${this.baseUrl}/typing_status.php`,a)}catch(a){console.error("Typing status error:",a)}}},h9=()=>{const{user:s}=Gh(),t=s?.id||s?.staff_id||0,[a,n]=A.useState("main"),[r,i]=A.useState(""),[o,c]=A.useState({}),[u,h]=A.useState([]),[m,p]=A.useState(!1),[y,g]=A.useState(!1),[j,b]=A.useState(!1),[N,v]=A.useState(!1),[S,E]=A.useState(0),L=A.useRef(null),z=A.useRef(null),V=A.useRef(null),te=A.useRef(null),q=A.useRef([]),B=A.useRef(null),J=A.useRef(null);A.useRef(null);const P=Wa(),{data:K=[]}=Rt({queryKey:["chatStaff"],queryFn:()=>bo.getStaffMembers(),refetchOnWindowFocus:!1}),{data:H=[],isLoading:se}=Rt({queryKey:["chatMessages",a],queryFn:async()=>{const ne=await bo.getMessages(a);return console.log("Fetched messages for chat",a,":",ne),ne},refetchInterval:2e3,refetchOnWindowFocus:!0}),{data:X={}}=Rt({queryKey:["chatUnreadCounts"],queryFn:()=>bo.getUnreadCounts(),refetchInterval:5e3}),R=wt({mutationFn:ne=>(console.log("Sending message:",ne,"to chat:",a),bo.sendMessage(a,ne)),onSuccess:async ne=>{console.log("Message sent successfully:",ne),i(""),c(Ve=>{const xt={...Ve};return delete xt[a],xt}),await P.invalidateQueries({queryKey:["chatMessages",a]}),await P.refetchQueries({queryKey:["chatMessages",a]}),P.invalidateQueries({queryKey:["chatUnreadCounts"]}),bo.updateTypingStatus(a,!1);const Se=()=>{L.current&&(L.current.scrollTop=L.current.scrollHeight)};requestAnimationFrame(Se),setTimeout(Se,50),setTimeout(Se,150),console.log("Queries invalidated and refetched")},onError:ne=>{console.error("Send message error:",ne),W.fire({icon:"error",title:"Failed to send message",text:ne?.response?.data?.message||ne?.message||"Please try again"})}}),Q=wt({mutationFn:ne=>bo.sendAttachments(a,ne),onSuccess:async()=>{h([]),z.current&&(z.current.value=""),await P.invalidateQueries({queryKey:["chatMessages",a]}),await P.refetchQueries({queryKey:["chatMessages",a]});const ne=()=>{L.current&&(L.current.scrollTop=L.current.scrollHeight)};requestAnimationFrame(ne),setTimeout(ne,50),setTimeout(ne,150)},onError:ne=>{W.fire({icon:"error",title:"Failed to upload files",text:ne?.response?.data?.message||"Please try again"})}}),Y=wt({mutationFn:({audioBlob:ne,duration:Se})=>bo.sendVoiceMessage(a,ne,Se),onSuccess:async()=>{await P.invalidateQueries({queryKey:["chatMessages",a]}),await P.refetchQueries({queryKey:["chatMessages",a]});const ne=()=>{L.current&&(L.current.scrollTop=L.current.scrollHeight)};requestAnimationFrame(ne),setTimeout(ne,50),setTimeout(ne,150)},onError:ne=>{W.fire({icon:"error",title:"Failed to send voice message",text:ne?.response?.data?.message||"Please try again"})}}),$=wt({mutationFn:({command:ne,params:Se})=>bo.sendBotCommand(a,ne,Se),onSuccess:async()=>{await P.invalidateQueries({queryKey:["chatMessages",a]}),await P.refetchQueries({queryKey:["chatMessages",a]});const ne=()=>{L.current&&(L.current.scrollTop=L.current.scrollHeight)};requestAnimationFrame(ne),setTimeout(ne,50),setTimeout(ne,150)}}),me=A.useRef(0);A.useEffect(()=>{if(H.length>0){const ne=H.length>me.current;me.current=H.length,ne&&L.current&&requestAnimationFrame(()=>{L.current&&(L.current.scrollTop=L.current.scrollHeight)})}},[H]),A.useEffect(()=>{const ne=a;return()=>{r.trim()!==""?c(Se=>({...Se,[ne]:r})):c(Se=>{const Ve={...Se};return delete Ve[ne],Ve})}},[a]),A.useEffect(()=>{bo.markAsRead(a).catch(Ve=>{console.error("Error marking as read:",Ve)});const ne=o[a]||"";i(ne),me.current=0;const Se=()=>{L.current&&(L.current.scrollTop=L.current.scrollHeight)};setTimeout(Se,50),setTimeout(Se,150),setTimeout(Se,300),setTimeout(()=>{V.current?.focus()},100)},[a]);const D=A.useCallback(()=>{N||(v(!0),bo.updateTypingStatus(a,!0)),B.current&&clearTimeout(B.current),B.current=setTimeout(()=>{v(!1),bo.updateTypingStatus(a,!1)},3e3)},[a,N]),U=ne=>{ne.preventDefault(),r.trim()&&R.mutate(r.trim())},le=ne=>{if(ne.target.files&&ne.target.files.length>0){const Se=Array.from(ne.target.files);console.log("Files selected:",Se.map(Ve=>({name:Ve.name,size:Ve.size,type:Ve.type}))),h(Se),Q.mutate(Se)}},de=async()=>{try{console.log("Starting voice recording...");const ne=await navigator.mediaDevices.getUserMedia({audio:!0});let Se="audio/webm";MediaRecorder.isTypeSupported("audio/webm")||(MediaRecorder.isTypeSupported("audio/mp4")?Se="audio/mp4":MediaRecorder.isTypeSupported("audio/ogg")?Se="audio/ogg":Se="");const Ve=new MediaRecorder(ne,Se?{mimeType:Se}:void 0);q.current=[],Ve.ondataavailable=ee=>{ee.data.size>0&&q.current.push(ee.data)};const xt=Date.now();Ve.onstop=()=>{console.log("Recording stopped, chunks:",q.current.length);const ee=Date.now(),Ie=(ee-xt)/1e3;console.log("Recording duration:",Ie,"seconds"),console.log("Start time:",xt,"End time:",ee);const He=new Blob(q.current,{type:Se||"audio/webm"});console.log("Audio blob size:",He.size,"bytes, type:",He.type),He.size>100?(console.log("Sending voice message..."),Y.mutate({audioBlob:He,duration:Ie>0?Ie:1})):(console.error("Recording too small or invalid:",He.size,"bytes"),W.fire({icon:"error",title:"Recording Failed",text:"Recording was too short or failed. Please try again."})),ne.getTracks().forEach(Lt=>Lt.stop()),E(0)},te.current=Ve,Ve.start(100),p(!0),E(Date.now()),console.log("Recording started")}catch(ne){console.error("Error starting recording:",ne),p(!1),W.fire({icon:"error",title:"Microphone Access Denied",text:"Please allow microphone access to record voice messages."})}},G=()=>{te.current&&m&&(console.log("Stopping recording..."),te.current.stop(),p(!1))},je=async()=>{m?G():await de()},De=ne=>{i(Se=>Se+ne),g(!1)},Pe=ne=>{const Se={"/weather":{location:"Dubai"},"/time":{},"/joke":{},"/quote":{},"/help":{}};$.mutate({command:ne,params:Se[ne]||{}}),b(!1)},ke=ne=>!ne||ne===""?`${Ct.baseUrl}/assets/default-avatar.png`:ne.startsWith("http")?ne:ne.startsWith("/")?`${Ct.baseUrl}${ne}`:ne.startsWith("assets/")||ne.startsWith("Uploads/")?`${Ct.baseUrl}/${ne}`:`${Ct.baseUrl}/${ne}`,Ye=ne=>ne?ne.startsWith("http")?ne:ne.startsWith("/")?`${Ct.baseUrl}${ne}`:`${Ct.baseUrl}/${ne}`:"",Qe=()=>a==="main"?"Main Hall":K.find(Se=>Se.staff_id.toString()===a)?.staff_name||"Unknown",et=()=>{if(a==="main")return`${Ct.baseUrl}/assets/default-avatar.png`;const ne=K.find(Se=>Se.staff_id.toString()===a);return ke(ne?.staff_pic)},Xe=ne=>{const Se=new Date(ne),Ve=new Date,xt=Ve.getTime()-Se.getTime(),ee=Math.floor(xt/6e4);return ee<1?"Just now":ee<60?`${ee}m ago`:Se.toDateString()===Ve.toDateString()?Se.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):Se.toLocaleDateString([],{month:"short",day:"numeric"})+" "+Se.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})},re=ne=>{const Se=ne.staff_id===t,Ve=ne.type==="bot",xt=ne.type||(ne.voice_message&&ne.voice_message!==""?"voice":ne.attachment&&ne.attachment!==""&&ne.attachment!==null?"attachment":ne.bot_name&&ne.bot_name!==""?"bot":"text");return console.log("Rendering message:",{id:ne.id,type:xt,message:ne.message,staff_id:ne.staff_id,attachment:ne.attachment,hasMessage:!!ne.message}),e.jsxs("div",{className:`message ${Se?"sent":"received"} ${Ve?"bot-message":""}`,children:[!Se&&!Ve&&e.jsxs("div",{className:"message-header",children:[e.jsx("img",{src:ke(ne.staff_pic),alt:ne.staff_name,className:"message-avatar",onError:ee=>{ee.target.src=`${Ct.baseUrl}/assets/default-avatar.png`}}),e.jsx("span",{className:"message-sender",children:ne.staff_name})]}),Ve&&e.jsxs("div",{className:"message-header",children:[e.jsx("i",{className:"fa fa-robot"}),e.jsx("span",{className:"message-sender",children:ne.bot_name||"ChatBot"})]}),e.jsxs("div",{className:"message-bubble",children:[ne.message&&ne.message.trim()!==""&&e.jsx("div",{className:"message-text",children:ne.message}),ne.attachment&&ne.attachment!==""&&ne.attachment!==null&&e.jsxs("div",{className:"message-attachment",children:[ne.attachment.match(/\.(jpeg|jpg|png|gif|webp)$/i)?e.jsx("img",{src:Ye(ne.attachment),alt:ne.filename,className:"attachment-image",onError:ee=>{ee.target.style.display="none"}}):ne.attachment.match(/\.pdf$/i)?e.jsxs("div",{className:"attachment-file",children:[e.jsx("i",{className:"fa fa-file-pdf"}),e.jsx("span",{children:ne.filename})]}):e.jsxs("div",{className:"attachment-file",children:[e.jsx("i",{className:"fa fa-file"}),e.jsx("span",{children:ne.filename})]}),e.jsxs("a",{href:Ye(ne.attachment),download:ne.filename,className:"download-btn",children:[e.jsx("i",{className:"fa fa-download"})," Download"]})]}),ne.voice_message&&ne.voice_message!==""&&ne.voice_message!==null&&e.jsxs("div",{className:"message-voice",children:[e.jsx("audio",{controls:!0,src:Ye(ne.voice_message),className:"voice-player",children:"Your browser does not support the audio element."}),ne.voice_duration&&e.jsxs("span",{className:"voice-duration",children:[Math.round(ne.voice_duration),"s"]})]})]}),e.jsx("div",{className:"message-time",children:Xe(ne.timestamp)})]},ne.id)};return e.jsx("div",{className:"chatroom-wrapper",children:e.jsxs("div",{className:"chatroom-container",children:[e.jsxs("div",{className:"chatroom-sidebar",children:[e.jsxs("div",{className:"sidebar-header",children:[e.jsx("i",{className:"fa fa-comments"}),e.jsx("span",{children:"Staff Chat"})]}),e.jsxs("div",{className:"sidebar-content",children:[e.jsxs("div",{className:`chat-item ${a==="main"?"active":""}`,onClick:()=>n("main"),children:[e.jsx("div",{className:"chat-avatar main-hall",children:e.jsx("i",{className:"fa fa-users"})}),e.jsxs("div",{className:"chat-info",children:[e.jsx("div",{className:"chat-name",children:"Main Hall"}),e.jsx("div",{className:"chat-preview",children:"Group chat for all staff"})]}),X.main>0&&e.jsx("div",{className:"unread-badge",children:X.main})]}),K.map(ne=>{const Se=ne.staff_id.toString();return e.jsxs("div",{className:`chat-item ${a===Se?"active":""}`,onClick:()=>n(Se),children:[e.jsx("img",{src:ke(ne.staff_pic),alt:ne.staff_name,className:"chat-avatar",onError:Ve=>{Ve.target.src=`${Ct.baseUrl}/assets/default-avatar.png`}}),e.jsxs("div",{className:"chat-info",children:[e.jsx("div",{className:"chat-name",children:ne.staff_name}),e.jsx("div",{className:"chat-preview",children:"Private chat"})]}),X[Se]>0&&e.jsx("div",{className:"unread-badge",children:X[Se]})]},ne.staff_id)})]})]}),e.jsxs("div",{className:"chatroom-main",children:[e.jsxs("div",{className:"chat-header",children:[e.jsxs("div",{className:"header-info",children:[e.jsx("img",{src:et(),alt:Qe(),className:"header-avatar",onError:ne=>{ne.target.src=`${Ct.baseUrl}/assets/default-avatar.png`}}),e.jsxs("div",{children:[e.jsx("div",{className:"header-name",children:Qe()}),e.jsx("div",{className:"header-status",children:a==="main"?"Group Chat":"Private Chat"})]})]}),e.jsxs("div",{className:"header-actions",children:[e.jsx("button",{className:`header-btn ${j?"active":""}`,onClick:()=>b(!j),title:"Bot Commands",children:e.jsx("i",{className:"fa fa-robot"})}),e.jsx("button",{className:"header-btn",title:"Search",children:e.jsx("i",{className:"fa fa-search"})})]})]}),j&&e.jsxs("div",{className:"bot-commands-panel",children:[e.jsxs("div",{className:"bot-commands-header",children:[e.jsx("span",{children:"Bot Commands"}),e.jsx("button",{onClick:()=>b(!1),children:e.jsx("i",{className:"fa fa-times"})})]}),e.jsxs("div",{className:"bot-commands-list",children:[e.jsxs("button",{onClick:()=>Pe("/weather"),children:[e.jsx("i",{className:"fa fa-cloud-sun"})," Weather"]}),e.jsxs("button",{onClick:()=>Pe("/time"),children:[e.jsx("i",{className:"fa fa-clock"})," Current Time"]}),e.jsxs("button",{onClick:()=>Pe("/joke"),children:[e.jsx("i",{className:"fa fa-laugh"})," Random Joke"]}),e.jsxs("button",{onClick:()=>Pe("/quote"),children:[e.jsx("i",{className:"fa fa-quote-left"})," Inspirational Quote"]}),e.jsxs("button",{onClick:()=>Pe("/help"),children:[e.jsx("i",{className:"fa fa-question-circle"})," Help"]})]})]}),e.jsx("div",{className:"chat-messages",ref:L,children:se?e.jsxs("div",{className:"loading-messages",children:[e.jsx("i",{className:"fa fa-spinner fa-spin"}),e.jsx("span",{children:"Loading messages..."})]}):e.jsxs(e.Fragment,{children:[H.length===0?e.jsxs("div",{className:"empty-messages",children:[e.jsx("i",{className:"fa fa-comments"}),e.jsx("p",{children:"No messages yet. Start the conversation!"})]}):e.jsxs("div",{className:"messages-list",children:[console.log("Rendering",H.length,"messages"),H.map((ne,Se)=>(console.log(`Message ${Se}:`,ne),re(ne)))]}),e.jsx("div",{ref:J})]})}),y&&e.jsx("div",{className:"emoji-picker-container",children:e.jsxs("div",{className:"emoji-picker",children:[e.jsxs("div",{className:"emoji-picker-header",children:[e.jsx("span",{children:"Select Emoji"}),e.jsx("button",{onClick:()=>g(!1),children:e.jsx("i",{className:"fa fa-times"})})]}),e.jsx("div",{className:"emoji-grid",children:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""].map(ne=>e.jsx("button",{className:"emoji-btn",onClick:()=>De(ne),children:ne},ne))})]})}),e.jsx("div",{className:"chat-input-container",children:e.jsxs("form",{onSubmit:U,className:"chat-input-form",children:[e.jsxs("div",{className:"input-actions",children:[e.jsx("button",{type:"button",className:`action-btn ${y?"active":""}`,onClick:()=>g(!y),title:"Emojis",children:e.jsx("i",{className:"fa fa-smile"})}),e.jsx("button",{type:"button",className:"action-btn",onClick:()=>z.current?.click(),title:"Attach File",children:e.jsx("i",{className:"fa fa-paperclip"})}),e.jsx("input",{ref:z,type:"file",multiple:!0,accept:"image/*,.pdf,.doc,.docx",onChange:le,style:{display:"none"}}),e.jsx("button",{type:"button",className:`action-btn voice-btn ${m?"recording":""}`,onClick:je,title:m?"Stop Recording":"Record Voice",children:e.jsx("i",{className:`fa ${m?"fa-stop":"fa-microphone"}`})})]}),e.jsx("input",{ref:V,type:"text",className:"message-input",placeholder:"Type a message...",value:r,onChange:ne=>{i(ne.target.value),D()},onKeyPress:ne=>{ne.key==="Enter"&&!ne.shiftKey&&(ne.preventDefault(),U(ne))},autoFocus:!0}),e.jsx("button",{type:"submit",className:"send-btn",disabled:!r.trim()||R.isPending,children:R.isPending?e.jsx("i",{className:"fa fa-spinner fa-spin"}):e.jsx("i",{className:"fa fa-paper-plane"})})]})})]})]})})};function f9(){return e.jsx(CE,{client:gT,children:e.jsx(mT,{children:e.jsx(pT,{children:e.jsx(Y3,{children:e.jsxs(w3,{children:[e.jsx(Vt,{path:"/login",element:e.jsx(HT,{})}),e.jsxs(Vt,{path:"/",element:e.jsx(UT,{children:e.jsx(qT,{})}),children:[e.jsx(Vt,{index:!0,element:e.jsx(X_,{to:"/dashboard",replace:!0})}),e.jsx(Vt,{path:"dashboard",element:e.jsx(FP,{})}),e.jsx(Vt,{path:"dashboard/analytics",element:e.jsx(J8,{})}),e.jsx(Vt,{path:"customers/payments",element:e.jsxs("div",{className:"p-6 bg-white rounded-xl shadow-lg",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Customer Payments"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Customer payments module coming soon..."})]})}),e.jsx(Vt,{path:"customers",element:e.jsx(Z8,{})}),e.jsx(Vt,{path:"ledger/customer",element:e.jsx(eR,{})}),e.jsx(Vt,{path:"ledger/customer/view",element:e.jsx(tR,{})}),e.jsx(Vt,{path:"ledger/supplier",element:e.jsx(Hq,{})}),e.jsx(Vt,{path:"ledger/affiliate",element:e.jsx(Xq,{})}),e.jsx(Vt,{path:"ledger/affiliate/view",element:e.jsx(Gq,{})}),e.jsx(Vt,{path:"agents",element:e.jsx(Kq,{})}),e.jsx(Vt,{path:"residence",element:e.jsx(fR,{})}),e.jsx(Vt,{path:"residence/report",element:e.jsx(mR,{})}),e.jsx(Vt,{path:"residence/list",element:e.jsx(aR,{})}),e.jsx(Vt,{path:"residence/create",element:e.jsx(vR,{})}),e.jsx(Vt,{path:"residence/ledger/:id",element:e.jsx(pR,{})}),e.jsx(Vt,{path:"residence/tasks",element:e.jsx(SR,{})}),e.jsx(Vt,{path:"residence/family",element:e.jsx(CR,{})}),e.jsx(Vt,{path:"residence/:id",element:e.jsx(yR,{})}),e.jsx(Vt,{path:"ticket/report",element:e.jsx(LR,{})}),e.jsx(Vt,{path:"ticket/new",element:e.jsx(PR,{})}),e.jsx(Vt,{path:"visa/report",element:e.jsx(FR,{})}),e.jsx(Vt,{path:"visa/new",element:e.jsx(IR,{})}),e.jsx(Vt,{path:"visa-tasks/emirates-id",element:e.jsx(BR,{})}),e.jsx(Vt,{path:"visa-tasks/freezone",element:e.jsx(KR,{})}),e.jsx(Vt,{path:"visa/prices",element:e.jsxs("div",{className:"p-6 bg-white rounded-xl shadow-lg",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Visa Prices"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Visa prices module coming soon..."})]})}),e.jsx(Vt,{path:"visa/dependents",element:e.jsxs("div",{className:"p-6 bg-white rounded-xl shadow-lg",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Dependents Visa"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Dependents visa module coming soon..."})]})}),e.jsx(Vt,{path:"payment/customer",element:e.jsx(Wq,{})}),e.jsx(Vt,{path:"payment/supplier",element:e.jsx(Yq,{})}),e.jsx(Vt,{path:"payments",element:e.jsxs("div",{className:"p-6 bg-white rounded-xl shadow-lg",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"All Payments"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Payments module coming soon..."})]})}),e.jsx(Vt,{path:"payments/pending",element:e.jsxs("div",{className:"p-6 bg-white rounded-xl shadow-lg",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Pending Payments"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Pending payments module coming soon..."})]})}),e.jsx(Vt,{path:"payments/receipts",element:e.jsxs("div",{className:"p-6 bg-white rounded-xl shadow-lg",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Receipts"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Receipts module coming soon..."})]})}),e.jsx(Vt,{path:"expenses",element:e.jsx($q,{})}),e.jsx(Vt,{path:"bookings/hotels",element:e.jsxs("div",{className:"p-6 bg-white rounded-xl shadow-lg",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Hotels"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Hotels module coming soon..."})]})}),e.jsx(Vt,{path:"bookings/car-rental",element:e.jsxs("div",{className:"p-6 bg-white rounded-xl shadow-lg",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Car Rental"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Car rental module coming soon..."})]})}),e.jsx(Vt,{path:"bookings/tickets",element:e.jsxs("div",{className:"p-6 bg-white rounded-xl shadow-lg",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Tickets"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Tickets module coming soon..."})]})}),e.jsx(Vt,{path:"accounts",element:e.jsx(a9,{})}),e.jsx(Vt,{path:"accounts/report",element:e.jsx(t9,{})}),e.jsx(Vt,{path:"accounts/statement",element:e.jsxs("div",{className:"p-6 bg-white rounded-xl shadow-lg",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Account Statement"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Account statement module coming soon..."})]})}),e.jsx(Vt,{path:"accounts/profit-loss",element:e.jsxs("div",{className:"p-6 bg-white rounded-xl shadow-lg",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Profit & Loss"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Profit & Loss module coming soon..."})]})}),e.jsx(Vt,{path:"staff",element:e.jsx(Qq,{})}),e.jsx(Vt,{path:"staff/attendance",element:e.jsxs("div",{className:"p-6 bg-white rounded-xl shadow-lg",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Staff Attendance"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Staff attendance module coming soon..."})]})}),e.jsx(Vt,{path:"staff/salary",element:e.jsxs("div",{className:"p-6 bg-white rounded-xl shadow-lg",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Staff Salary"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Staff salary module coming soon..."})]})}),e.jsx(Vt,{path:"establishments",element:e.jsx(rA,{})}),e.jsx(Vt,{path:"establishments/manage",element:e.jsx(Dq,{})}),e.jsx(Vt,{path:"establishments/:id/employees",element:e.jsx(_q,{})}),e.jsx(Vt,{path:"amer/transactions",element:e.jsx(Eq,{})}),e.jsx(Vt,{path:"tasheel",element:e.jsx(n9,{})}),e.jsx(Vt,{path:"cheques",element:e.jsx(i9,{})}),e.jsx(Vt,{path:"salary",element:e.jsx(l9,{})}),e.jsx(Vt,{path:"loan/new",element:e.jsx(Fq,{})}),e.jsx(Vt,{path:"hotel/new",element:e.jsx(Oq,{})}),e.jsx(Vt,{path:"service",element:e.jsx(Rq,{})}),e.jsx(Vt,{path:"supplier",element:e.jsx(qq,{})}),e.jsx(Vt,{path:"supplier/ledger",element:e.jsx(Uq,{})}),e.jsx(Vt,{path:"print-letter",element:e.jsx(Vq,{})}),e.jsx(Vt,{path:"reports/receipts",element:e.jsxs("div",{className:"p-6 bg-white rounded-xl shadow-lg",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Receipt Report"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Receipt report module coming soon..."})]})}),e.jsx(Vt,{path:"reports/expenses",element:e.jsxs("div",{className:"p-6 bg-white rounded-xl shadow-lg",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Expense Report"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Expense report module coming soon..."})]})}),e.jsx(Vt,{path:"reports/accounts",element:e.jsxs("div",{className:"p-6 bg-white rounded-xl shadow-lg",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Account Report"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Account report module coming soon..."})]})}),e.jsx(Vt,{path:"role",element:e.jsx(Jq,{})}),e.jsx(Vt,{path:"permission",element:e.jsx(Zq,{})}),e.jsx(Vt,{path:"company-documents",element:e.jsx(c9,{})}),e.jsx(Vt,{path:"notes",element:e.jsx(d9,{})}),e.jsx(Vt,{path:"attachments",element:e.jsx(u9,{})}),e.jsx(Vt,{path:"chatroom",element:e.jsx(h9,{})}),e.jsx(Vt,{path:"settings",element:e.jsxs("div",{className:"p-6 bg-white rounded-xl shadow-lg",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Settings"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Settings module coming soon..."})]})}),e.jsx(Vt,{path:"profile",element:e.jsxs("div",{className:"p-6 bg-white rounded-xl shadow-lg",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"My Profile"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Profile module coming soon..."})]})})]}),e.jsx(Vt,{path:"*",element:e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-6xl font-bold text-red-600",children:"404"}),e.jsx("p",{className:"text-xl text-gray-600 mt-4",children:"Page not found"})]})})})]})})})})})}var pg={exports:{}};/*!
  * Bootstrap v5.3.8 (https://getbootstrap.com/)
  * Copyright 2011-2025 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */var m9=pg.exports,B_;function p9(){return B_||(B_=1,(function(s,t){(function(a,n){s.exports=n()})(m9,function(){const a=new Map,n={set(O,_,I){a.has(O)||a.set(O,new Map);const ie=a.get(O);ie.has(_)||ie.size===0?ie.set(_,I):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(ie.keys())[0]}.`)},get:(O,_)=>a.has(O)&&a.get(O).get(_)||null,remove(O,_){if(!a.has(O))return;const I=a.get(O);I.delete(_),I.size===0&&a.delete(O)}},r="transitionend",i=O=>(O&&window.CSS&&window.CSS.escape&&(O=O.replace(/#([^\s"#']+)/g,(_,I)=>`#${CSS.escape(I)}`)),O),o=O=>O==null?`${O}`:Object.prototype.toString.call(O).match(/\s([a-z]+)/i)[1].toLowerCase(),c=O=>{O.dispatchEvent(new Event(r))},u=O=>!(!O||typeof O!="object")&&(O.jquery!==void 0&&(O=O[0]),O.nodeType!==void 0),h=O=>u(O)?O.jquery?O[0]:O:typeof O=="string"&&O.length>0?document.querySelector(i(O)):null,m=O=>{if(!u(O)||O.getClientRects().length===0)return!1;const _=getComputedStyle(O).getPropertyValue("visibility")==="visible",I=O.closest("details:not([open])");if(!I)return _;if(I!==O){const ie=O.closest("summary");if(ie&&ie.parentNode!==I||ie===null)return!1}return _},p=O=>!O||O.nodeType!==Node.ELEMENT_NODE||!!O.classList.contains("disabled")||(O.disabled!==void 0?O.disabled:O.hasAttribute("disabled")&&O.getAttribute("disabled")!=="false"),y=O=>{if(!document.documentElement.attachShadow)return null;if(typeof O.getRootNode=="function"){const _=O.getRootNode();return _ instanceof ShadowRoot?_:null}return O instanceof ShadowRoot?O:O.parentNode?y(O.parentNode):null},g=()=>{},j=O=>{O.offsetHeight},b=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,N=[],v=()=>document.documentElement.dir==="rtl",S=O=>{var _;_=()=>{const I=b();if(I){const ie=O.NAME,fe=I.fn[ie];I.fn[ie]=O.jQueryInterface,I.fn[ie].Constructor=O,I.fn[ie].noConflict=()=>(I.fn[ie]=fe,O.jQueryInterface)}},document.readyState==="loading"?(N.length||document.addEventListener("DOMContentLoaded",()=>{for(const I of N)I()}),N.push(_)):_()},E=(O,_=[],I=O)=>typeof O=="function"?O.call(..._):I,L=(O,_,I=!0)=>{if(!I)return void E(O);const ie=(Ae=>{if(!Ae)return 0;let{transitionDuration:Oe,transitionDelay:Be}=window.getComputedStyle(Ae);const it=Number.parseFloat(Oe),nt=Number.parseFloat(Be);return it||nt?(Oe=Oe.split(",")[0],Be=Be.split(",")[0],1e3*(Number.parseFloat(Oe)+Number.parseFloat(Be))):0})(_)+5;let fe=!1;const ye=({target:Ae})=>{Ae===_&&(fe=!0,_.removeEventListener(r,ye),E(O))};_.addEventListener(r,ye),setTimeout(()=>{fe||c(_)},ie)},z=(O,_,I,ie)=>{const fe=O.length;let ye=O.indexOf(_);return ye===-1?!I&&ie?O[fe-1]:O[0]:(ye+=I?1:-1,ie&&(ye=(ye+fe)%fe),O[Math.max(0,Math.min(ye,fe-1))])},V=/[^.]*(?=\..*)\.|.*/,te=/\..*/,q=/::\d+$/,B={};let J=1;const P={mouseenter:"mouseover",mouseleave:"mouseout"},K=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function H(O,_){return _&&`${_}::${J++}`||O.uidEvent||J++}function se(O){const _=H(O);return O.uidEvent=_,B[_]=B[_]||{},B[_]}function X(O,_,I=null){return Object.values(O).find(ie=>ie.callable===_&&ie.delegationSelector===I)}function R(O,_,I){const ie=typeof _=="string",fe=ie?I:_||I;let ye=me(O);return K.has(ye)||(ye=O),[ie,fe,ye]}function Q(O,_,I,ie,fe){if(typeof _!="string"||!O)return;let[ye,Ae,Oe]=R(_,I,ie);_ in P&&(Ae=(Ut=>function(jt){if(!jt.relatedTarget||jt.relatedTarget!==jt.delegateTarget&&!jt.delegateTarget.contains(jt.relatedTarget))return Ut.call(this,jt)})(Ae));const Be=se(O),it=Be[Oe]||(Be[Oe]={}),nt=X(it,Ae,ye?I:null);if(nt)return void(nt.oneOff=nt.oneOff&&fe);const dt=H(Ae,_.replace(V,"")),gt=ye?(function(St,Ut,jt){return function ht(pt){const os=St.querySelectorAll(Ut);for(let{target:Nt}=pt;Nt&&Nt!==this;Nt=Nt.parentNode)for(const Ot of os)if(Ot===Nt)return U(pt,{delegateTarget:Nt}),ht.oneOff&&D.off(St,pt.type,Ut,jt),jt.apply(Nt,[pt])}})(O,I,Ae):(function(St,Ut){return function jt(ht){return U(ht,{delegateTarget:St}),jt.oneOff&&D.off(St,ht.type,Ut),Ut.apply(St,[ht])}})(O,Ae);gt.delegationSelector=ye?I:null,gt.callable=Ae,gt.oneOff=fe,gt.uidEvent=dt,it[dt]=gt,O.addEventListener(Oe,gt,ye)}function Y(O,_,I,ie,fe){const ye=X(_[I],ie,fe);ye&&(O.removeEventListener(I,ye,!!fe),delete _[I][ye.uidEvent])}function $(O,_,I,ie){const fe=_[I]||{};for(const[ye,Ae]of Object.entries(fe))ye.includes(ie)&&Y(O,_,I,Ae.callable,Ae.delegationSelector)}function me(O){return O=O.replace(te,""),P[O]||O}const D={on(O,_,I,ie){Q(O,_,I,ie,!1)},one(O,_,I,ie){Q(O,_,I,ie,!0)},off(O,_,I,ie){if(typeof _!="string"||!O)return;const[fe,ye,Ae]=R(_,I,ie),Oe=Ae!==_,Be=se(O),it=Be[Ae]||{},nt=_.startsWith(".");if(ye===void 0){if(nt)for(const dt of Object.keys(Be))$(O,Be,dt,_.slice(1));for(const[dt,gt]of Object.entries(it)){const St=dt.replace(q,"");Oe&&!_.includes(St)||Y(O,Be,Ae,gt.callable,gt.delegationSelector)}}else{if(!Object.keys(it).length)return;Y(O,Be,Ae,ye,fe?I:null)}},trigger(O,_,I){if(typeof _!="string"||!O)return null;const ie=b();let fe=null,ye=!0,Ae=!0,Oe=!1;_!==me(_)&&ie&&(fe=ie.Event(_,I),ie(O).trigger(fe),ye=!fe.isPropagationStopped(),Ae=!fe.isImmediatePropagationStopped(),Oe=fe.isDefaultPrevented());const Be=U(new Event(_,{bubbles:ye,cancelable:!0}),I);return Oe&&Be.preventDefault(),Ae&&O.dispatchEvent(Be),Be.defaultPrevented&&fe&&fe.preventDefault(),Be}};function U(O,_={}){for(const[I,ie]of Object.entries(_))try{O[I]=ie}catch{Object.defineProperty(O,I,{configurable:!0,get:()=>ie})}return O}function le(O){if(O==="true")return!0;if(O==="false")return!1;if(O===Number(O).toString())return Number(O);if(O===""||O==="null")return null;if(typeof O!="string")return O;try{return JSON.parse(decodeURIComponent(O))}catch{return O}}function de(O){return O.replace(/[A-Z]/g,_=>`-${_.toLowerCase()}`)}const G={setDataAttribute(O,_,I){O.setAttribute(`data-bs-${de(_)}`,I)},removeDataAttribute(O,_){O.removeAttribute(`data-bs-${de(_)}`)},getDataAttributes(O){if(!O)return{};const _={},I=Object.keys(O.dataset).filter(ie=>ie.startsWith("bs")&&!ie.startsWith("bsConfig"));for(const ie of I){let fe=ie.replace(/^bs/,"");fe=fe.charAt(0).toLowerCase()+fe.slice(1),_[fe]=le(O.dataset[ie])}return _},getDataAttribute:(O,_)=>le(O.getAttribute(`data-bs-${de(_)}`))};class je{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(_){return _=this._mergeConfigObj(_),_=this._configAfterMerge(_),this._typeCheckConfig(_),_}_configAfterMerge(_){return _}_mergeConfigObj(_,I){const ie=u(I)?G.getDataAttribute(I,"config"):{};return{...this.constructor.Default,...typeof ie=="object"?ie:{},...u(I)?G.getDataAttributes(I):{},...typeof _=="object"?_:{}}}_typeCheckConfig(_,I=this.constructor.DefaultType){for(const[ie,fe]of Object.entries(I)){const ye=_[ie],Ae=u(ye)?"element":o(ye);if(!new RegExp(fe).test(Ae))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${ie}" provided type "${Ae}" but expected type "${fe}".`)}}}class De extends je{constructor(_,I){super(),(_=h(_))&&(this._element=_,this._config=this._getConfig(I),n.set(this._element,this.constructor.DATA_KEY,this))}dispose(){n.remove(this._element,this.constructor.DATA_KEY),D.off(this._element,this.constructor.EVENT_KEY);for(const _ of Object.getOwnPropertyNames(this))this[_]=null}_queueCallback(_,I,ie=!0){L(_,I,ie)}_getConfig(_){return _=this._mergeConfigObj(_,this._element),_=this._configAfterMerge(_),this._typeCheckConfig(_),_}static getInstance(_){return n.get(h(_),this.DATA_KEY)}static getOrCreateInstance(_,I={}){return this.getInstance(_)||new this(_,typeof I=="object"?I:null)}static get VERSION(){return"5.3.8"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(_){return`${_}${this.EVENT_KEY}`}}const Pe=O=>{let _=O.getAttribute("data-bs-target");if(!_||_==="#"){let I=O.getAttribute("href");if(!I||!I.includes("#")&&!I.startsWith("."))return null;I.includes("#")&&!I.startsWith("#")&&(I=`#${I.split("#")[1]}`),_=I&&I!=="#"?I.trim():null}return _?_.split(",").map(I=>i(I)).join(","):null},ke={find:(O,_=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(_,O)),findOne:(O,_=document.documentElement)=>Element.prototype.querySelector.call(_,O),children:(O,_)=>[].concat(...O.children).filter(I=>I.matches(_)),parents(O,_){const I=[];let ie=O.parentNode.closest(_);for(;ie;)I.push(ie),ie=ie.parentNode.closest(_);return I},prev(O,_){let I=O.previousElementSibling;for(;I;){if(I.matches(_))return[I];I=I.previousElementSibling}return[]},next(O,_){let I=O.nextElementSibling;for(;I;){if(I.matches(_))return[I];I=I.nextElementSibling}return[]},focusableChildren(O){const _=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(I=>`${I}:not([tabindex^="-"])`).join(",");return this.find(_,O).filter(I=>!p(I)&&m(I))},getSelectorFromElement(O){const _=Pe(O);return _&&ke.findOne(_)?_:null},getElementFromSelector(O){const _=Pe(O);return _?ke.findOne(_):null},getMultipleElementsFromSelector(O){const _=Pe(O);return _?ke.find(_):[]}},Ye=(O,_="hide")=>{const I=`click.dismiss${O.EVENT_KEY}`,ie=O.NAME;D.on(document,I,`[data-bs-dismiss="${ie}"]`,function(fe){if(["A","AREA"].includes(this.tagName)&&fe.preventDefault(),p(this))return;const ye=ke.getElementFromSelector(this)||this.closest(`.${ie}`);O.getOrCreateInstance(ye)[_]()})},Qe=".bs.alert",et=`close${Qe}`,Xe=`closed${Qe}`;class re extends De{static get NAME(){return"alert"}close(){if(D.trigger(this._element,et).defaultPrevented)return;this._element.classList.remove("show");const _=this._element.classList.contains("fade");this._queueCallback(()=>this._destroyElement(),this._element,_)}_destroyElement(){this._element.remove(),D.trigger(this._element,Xe),this.dispose()}static jQueryInterface(_){return this.each(function(){const I=re.getOrCreateInstance(this);if(typeof _=="string"){if(I[_]===void 0||_.startsWith("_")||_==="constructor")throw new TypeError(`No method named "${_}"`);I[_](this)}})}}Ye(re,"close"),S(re);const ne='[data-bs-toggle="button"]';class Se extends De{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(_){return this.each(function(){const I=Se.getOrCreateInstance(this);_==="toggle"&&I[_]()})}}D.on(document,"click.bs.button.data-api",ne,O=>{O.preventDefault();const _=O.target.closest(ne);Se.getOrCreateInstance(_).toggle()}),S(Se);const Ve=".bs.swipe",xt=`touchstart${Ve}`,ee=`touchmove${Ve}`,Ie=`touchend${Ve}`,He=`pointerdown${Ve}`,Lt=`pointerup${Ve}`,Dt={endCallback:null,leftCallback:null,rightCallback:null},Mt={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class At extends je{constructor(_,I){super(),this._element=_,_&&At.isSupported()&&(this._config=this._getConfig(I),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return Dt}static get DefaultType(){return Mt}static get NAME(){return"swipe"}dispose(){D.off(this._element,Ve)}_start(_){this._supportPointerEvents?this._eventIsPointerPenTouch(_)&&(this._deltaX=_.clientX):this._deltaX=_.touches[0].clientX}_end(_){this._eventIsPointerPenTouch(_)&&(this._deltaX=_.clientX-this._deltaX),this._handleSwipe(),E(this._config.endCallback)}_move(_){this._deltaX=_.touches&&_.touches.length>1?0:_.touches[0].clientX-this._deltaX}_handleSwipe(){const _=Math.abs(this._deltaX);if(_<=40)return;const I=_/this._deltaX;this._deltaX=0,I&&E(I>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(D.on(this._element,He,_=>this._start(_)),D.on(this._element,Lt,_=>this._end(_)),this._element.classList.add("pointer-event")):(D.on(this._element,xt,_=>this._start(_)),D.on(this._element,ee,_=>this._move(_)),D.on(this._element,Ie,_=>this._end(_)))}_eventIsPointerPenTouch(_){return this._supportPointerEvents&&(_.pointerType==="pen"||_.pointerType==="touch")}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const Bt=".bs.carousel",rs=".data-api",kt="ArrowLeft",zt="ArrowRight",$t="next",bt="prev",ys="left",Te="right",Je=`slide${Bt}`,be=`slid${Bt}`,Re=`keydown${Bt}`,lt=`mouseenter${Bt}`,tt=`mouseleave${Bt}`,Et=`dragstart${Bt}`,is=`load${Bt}${rs}`,qt=`click${Bt}${rs}`,Pt="carousel",Tt="active",Ue=".active",yt=".carousel-item",vt=Ue+yt,Ce={[kt]:Te,[zt]:ys},ve={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},Ze={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class Wt extends De{constructor(_,I){super(_,I),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=ke.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===Pt&&this.cycle()}static get Default(){return ve}static get DefaultType(){return Ze}static get NAME(){return"carousel"}next(){this._slide($t)}nextWhenVisible(){!document.hidden&&m(this._element)&&this.next()}prev(){this._slide(bt)}pause(){this._isSliding&&c(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?D.one(this._element,be,()=>this.cycle()):this.cycle())}to(_){const I=this._getItems();if(_>I.length-1||_<0)return;if(this._isSliding)return void D.one(this._element,be,()=>this.to(_));const ie=this._getItemIndex(this._getActive());if(ie===_)return;const fe=_>ie?$t:bt;this._slide(fe,I[_])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(_){return _.defaultInterval=_.interval,_}_addEventListeners(){this._config.keyboard&&D.on(this._element,Re,_=>this._keydown(_)),this._config.pause==="hover"&&(D.on(this._element,lt,()=>this.pause()),D.on(this._element,tt,()=>this._maybeEnableCycle())),this._config.touch&&At.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const I of ke.find(".carousel-item img",this._element))D.on(I,Et,ie=>ie.preventDefault());const _={leftCallback:()=>this._slide(this._directionToOrder(ys)),rightCallback:()=>this._slide(this._directionToOrder(Te)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),500+this._config.interval))}};this._swipeHelper=new At(this._element,_)}_keydown(_){if(/input|textarea/i.test(_.target.tagName))return;const I=Ce[_.key];I&&(_.preventDefault(),this._slide(this._directionToOrder(I)))}_getItemIndex(_){return this._getItems().indexOf(_)}_setActiveIndicatorElement(_){if(!this._indicatorsElement)return;const I=ke.findOne(Ue,this._indicatorsElement);I.classList.remove(Tt),I.removeAttribute("aria-current");const ie=ke.findOne(`[data-bs-slide-to="${_}"]`,this._indicatorsElement);ie&&(ie.classList.add(Tt),ie.setAttribute("aria-current","true"))}_updateInterval(){const _=this._activeElement||this._getActive();if(!_)return;const I=Number.parseInt(_.getAttribute("data-bs-interval"),10);this._config.interval=I||this._config.defaultInterval}_slide(_,I=null){if(this._isSliding)return;const ie=this._getActive(),fe=_===$t,ye=I||z(this._getItems(),ie,fe,this._config.wrap);if(ye===ie)return;const Ae=this._getItemIndex(ye),Oe=dt=>D.trigger(this._element,dt,{relatedTarget:ye,direction:this._orderToDirection(_),from:this._getItemIndex(ie),to:Ae});if(Oe(Je).defaultPrevented||!ie||!ye)return;const Be=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(Ae),this._activeElement=ye;const it=fe?"carousel-item-start":"carousel-item-end",nt=fe?"carousel-item-next":"carousel-item-prev";ye.classList.add(nt),j(ye),ie.classList.add(it),ye.classList.add(it),this._queueCallback(()=>{ye.classList.remove(it,nt),ye.classList.add(Tt),ie.classList.remove(Tt,nt,it),this._isSliding=!1,Oe(be)},ie,this._isAnimated()),Be&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return ke.findOne(vt,this._element)}_getItems(){return ke.find(yt,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(_){return v()?_===ys?bt:$t:_===ys?$t:bt}_orderToDirection(_){return v()?_===bt?ys:Te:_===bt?Te:ys}static jQueryInterface(_){return this.each(function(){const I=Wt.getOrCreateInstance(this,_);if(typeof _!="number"){if(typeof _=="string"){if(I[_]===void 0||_.startsWith("_")||_==="constructor")throw new TypeError(`No method named "${_}"`);I[_]()}}else I.to(_)})}}D.on(document,qt,"[data-bs-slide], [data-bs-slide-to]",function(O){const _=ke.getElementFromSelector(this);if(!_||!_.classList.contains(Pt))return;O.preventDefault();const I=Wt.getOrCreateInstance(_),ie=this.getAttribute("data-bs-slide-to");return ie?(I.to(ie),void I._maybeEnableCycle()):G.getDataAttribute(this,"slide")==="next"?(I.next(),void I._maybeEnableCycle()):(I.prev(),void I._maybeEnableCycle())}),D.on(window,is,()=>{const O=ke.find('[data-bs-ride="carousel"]');for(const _ of O)Wt.getOrCreateInstance(_)}),S(Wt);const Fs=".bs.collapse",Ts=`show${Fs}`,aa=`shown${Fs}`,Os=`hide${Fs}`,$s=`hidden${Fs}`,ja=`click${Fs}.data-api`,Ln="show",La="collapse",Zs="collapsing",Sa=`:scope .${La} .${La}`,cn='[data-bs-toggle="collapse"]',yr={parent:null,toggle:!0},Ar={parent:"(null|element)",toggle:"boolean"};class kr extends De{constructor(_,I){super(_,I),this._isTransitioning=!1,this._triggerArray=[];const ie=ke.find(cn);for(const fe of ie){const ye=ke.getSelectorFromElement(fe),Ae=ke.find(ye).filter(Oe=>Oe===this._element);ye!==null&&Ae.length&&this._triggerArray.push(fe)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return yr}static get DefaultType(){return Ar}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let _=[];if(this._config.parent&&(_=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter(fe=>fe!==this._element).map(fe=>kr.getOrCreateInstance(fe,{toggle:!1}))),_.length&&_[0]._isTransitioning||D.trigger(this._element,Ts).defaultPrevented)return;for(const fe of _)fe.hide();const I=this._getDimension();this._element.classList.remove(La),this._element.classList.add(Zs),this._element.style[I]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const ie=`scroll${I[0].toUpperCase()+I.slice(1)}`;this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(Zs),this._element.classList.add(La,Ln),this._element.style[I]="",D.trigger(this._element,aa)},this._element,!0),this._element.style[I]=`${this._element[ie]}px`}hide(){if(this._isTransitioning||!this._isShown()||D.trigger(this._element,Os).defaultPrevented)return;const _=this._getDimension();this._element.style[_]=`${this._element.getBoundingClientRect()[_]}px`,j(this._element),this._element.classList.add(Zs),this._element.classList.remove(La,Ln);for(const I of this._triggerArray){const ie=ke.getElementFromSelector(I);ie&&!this._isShown(ie)&&this._addAriaAndCollapsedClass([I],!1)}this._isTransitioning=!0,this._element.style[_]="",this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(Zs),this._element.classList.add(La),D.trigger(this._element,$s)},this._element,!0)}_isShown(_=this._element){return _.classList.contains(Ln)}_configAfterMerge(_){return _.toggle=!!_.toggle,_.parent=h(_.parent),_}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const _=this._getFirstLevelChildren(cn);for(const I of _){const ie=ke.getElementFromSelector(I);ie&&this._addAriaAndCollapsedClass([I],this._isShown(ie))}}_getFirstLevelChildren(_){const I=ke.find(Sa,this._config.parent);return ke.find(_,this._config.parent).filter(ie=>!I.includes(ie))}_addAriaAndCollapsedClass(_,I){if(_.length)for(const ie of _)ie.classList.toggle("collapsed",!I),ie.setAttribute("aria-expanded",I)}static jQueryInterface(_){const I={};return typeof _=="string"&&/show|hide/.test(_)&&(I.toggle=!1),this.each(function(){const ie=kr.getOrCreateInstance(this,I);if(typeof _=="string"){if(ie[_]===void 0)throw new TypeError(`No method named "${_}"`);ie[_]()}})}}D.on(document,ja,cn,function(O){(O.target.tagName==="A"||O.delegateTarget&&O.delegateTarget.tagName==="A")&&O.preventDefault();for(const _ of ke.getMultipleElementsFromSelector(this))kr.getOrCreateInstance(_,{toggle:!1}).toggle()}),S(kr);var pa="top",Ca="bottom",Ya="right",ga="left",ir="auto",Dr=[pa,Ca,Ya,ga],Pn="start",ua="end",Co="clippingParents",Wn="viewport",Fn="popper",hi="reference",Wl=Dr.reduce(function(O,_){return O.concat([_+"-"+Pn,_+"-"+ua])},[]),Yl=[].concat(Dr,[ir]).reduce(function(O,_){return O.concat([_,_+"-"+Pn,_+"-"+ua])},[]),Ao="beforeRead",lc="read",fi="afterRead",Kl="beforeMain",ta="main",In="afterMain",ko="beforeWrite",mi="write",pi="afterWrite",vr=[Ao,lc,fi,Kl,ta,In,ko,mi,pi];function an(O){return O?(O.nodeName||"").toLowerCase():null}function zs(O){if(O==null)return window;if(O.toString()!=="[object Window]"){var _=O.ownerDocument;return _&&_.defaultView||window}return O}function Pa(O){return O instanceof zs(O).Element||O instanceof Element}function On(O){return O instanceof zs(O).HTMLElement||O instanceof HTMLElement}function Do(O){return typeof ShadowRoot<"u"&&(O instanceof zs(O).ShadowRoot||O instanceof ShadowRoot)}const Xl={name:"applyStyles",enabled:!0,phase:"write",fn:function(O){var _=O.state;Object.keys(_.elements).forEach(function(I){var ie=_.styles[I]||{},fe=_.attributes[I]||{},ye=_.elements[I];On(ye)&&an(ye)&&(Object.assign(ye.style,ie),Object.keys(fe).forEach(function(Ae){var Oe=fe[Ae];Oe===!1?ye.removeAttribute(Ae):ye.setAttribute(Ae,Oe===!0?"":Oe)}))})},effect:function(O){var _=O.state,I={popper:{position:_.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(_.elements.popper.style,I.popper),_.styles=I,_.elements.arrow&&Object.assign(_.elements.arrow.style,I.arrow),function(){Object.keys(_.elements).forEach(function(ie){var fe=_.elements[ie],ye=_.attributes[ie]||{},Ae=Object.keys(_.styles.hasOwnProperty(ie)?_.styles[ie]:I[ie]).reduce(function(Oe,Be){return Oe[Be]="",Oe},{});On(fe)&&an(fe)&&(Object.assign(fe.style,Ae),Object.keys(ye).forEach(function(Oe){fe.removeAttribute(Oe)}))})}},requires:["computeStyles"]};function Na(O){return O.split("-")[0]}var si=Math.max,bl=Math.min,dn=Math.round;function Gl(){var O=navigator.userAgentData;return O!=null&&O.brands&&Array.isArray(O.brands)?O.brands.map(function(_){return _.brand+"/"+_.version}).join(" "):navigator.userAgent}function oc(){return!/^((?!chrome|android).)*safari/i.test(Gl())}function Ki(O,_,I){_===void 0&&(_=!1),I===void 0&&(I=!1);var ie=O.getBoundingClientRect(),fe=1,ye=1;_&&On(O)&&(fe=O.offsetWidth>0&&dn(ie.width)/O.offsetWidth||1,ye=O.offsetHeight>0&&dn(ie.height)/O.offsetHeight||1);var Ae=(Pa(O)?zs(O):window).visualViewport,Oe=!oc()&&I,Be=(ie.left+(Oe&&Ae?Ae.offsetLeft:0))/fe,it=(ie.top+(Oe&&Ae?Ae.offsetTop:0))/ye,nt=ie.width/fe,dt=ie.height/ye;return{width:nt,height:dt,top:it,right:Be+nt,bottom:it+dt,left:Be,x:Be,y:it}}function Ql(O){var _=Ki(O),I=O.offsetWidth,ie=O.offsetHeight;return Math.abs(_.width-I)<=1&&(I=_.width),Math.abs(_.height-ie)<=1&&(ie=_.height),{x:O.offsetLeft,y:O.offsetTop,width:I,height:ie}}function Eo(O,_){var I=_.getRootNode&&_.getRootNode();if(O.contains(_))return!0;if(I&&Do(I)){var ie=_;do{if(ie&&O.isSameNode(ie))return!0;ie=ie.parentNode||ie.host}while(ie)}return!1}function Yn(O){return zs(O).getComputedStyle(O)}function ai(O){return["table","td","th"].indexOf(an(O))>=0}function un(O){return((Pa(O)?O.ownerDocument:O.document)||window.document).documentElement}function Er(O){return an(O)==="html"?O:O.assignedSlot||O.parentNode||(Do(O)?O.host:null)||un(O)}function yl(O){return On(O)&&Yn(O).position!=="fixed"?O.offsetParent:null}function es(O){for(var _=zs(O),I=yl(O);I&&ai(I)&&Yn(I).position==="static";)I=yl(I);return I&&(an(I)==="html"||an(I)==="body"&&Yn(I).position==="static")?_:I||(function(ie){var fe=/firefox/i.test(Gl());if(/Trident/i.test(Gl())&&On(ie)&&Yn(ie).position==="fixed")return null;var ye=Er(ie);for(Do(ye)&&(ye=ye.host);On(ye)&&["html","body"].indexOf(an(ye))<0;){var Ae=Yn(ye);if(Ae.transform!=="none"||Ae.perspective!=="none"||Ae.contain==="paint"||["transform","perspective"].indexOf(Ae.willChange)!==-1||fe&&Ae.willChange==="filter"||fe&&Ae.filter&&Ae.filter!=="none")return ye;ye=ye.parentNode}return null})(O)||_}function gi(O){return["top","bottom"].indexOf(O)>=0?"x":"y"}function vl(O,_,I){return si(O,bl(_,I))}function To(O){return Object.assign({},{top:0,right:0,bottom:0,left:0},O)}function cc(O,_){return _.reduce(function(I,ie){return I[ie]=O,I},{})}const lr={name:"arrow",enabled:!0,phase:"main",fn:function(O){var _,I=O.state,ie=O.name,fe=O.options,ye=I.elements.arrow,Ae=I.modifiersData.popperOffsets,Oe=Na(I.placement),Be=gi(Oe),it=[ga,Ya].indexOf(Oe)>=0?"height":"width";if(ye&&Ae){var nt=(function(as,cs){return To(typeof(as=typeof as=="function"?as(Object.assign({},cs.rects,{placement:cs.placement})):as)!="number"?as:cc(as,Dr))})(fe.padding,I),dt=Ql(ye),gt=Be==="y"?pa:ga,St=Be==="y"?Ca:Ya,Ut=I.rects.reference[it]+I.rects.reference[Be]-Ae[Be]-I.rects.popper[it],jt=Ae[Be]-I.rects.reference[Be],ht=es(ye),pt=ht?Be==="y"?ht.clientHeight||0:ht.clientWidth||0:0,os=Ut/2-jt/2,Nt=nt[gt],Ot=pt-dt[it]-nt[St],Ht=pt/2-dt[it]/2+os,ss=vl(Nt,Ht,Ot),bs=Be;I.modifiersData[ie]=((_={})[bs]=ss,_.centerOffset=ss-Ht,_)}},effect:function(O){var _=O.state,I=O.options.element,ie=I===void 0?"[data-popper-arrow]":I;ie!=null&&(typeof ie!="string"||(ie=_.elements.popper.querySelector(ie)))&&Eo(_.elements.popper,ie)&&(_.elements.arrow=ie)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Fa(O){return O.split("-")[1]}var dc={top:"auto",right:"auto",bottom:"auto",left:"auto"};function jl(O){var _,I=O.popper,ie=O.popperRect,fe=O.placement,ye=O.variation,Ae=O.offsets,Oe=O.position,Be=O.gpuAcceleration,it=O.adaptive,nt=O.roundOffsets,dt=O.isFixed,gt=Ae.x,St=gt===void 0?0:gt,Ut=Ae.y,jt=Ut===void 0?0:Ut,ht=typeof nt=="function"?nt({x:St,y:jt}):{x:St,y:jt};St=ht.x,jt=ht.y;var pt=Ae.hasOwnProperty("x"),os=Ae.hasOwnProperty("y"),Nt=ga,Ot=pa,Ht=window;if(it){var ss=es(I),bs="clientHeight",as="clientWidth";ss===zs(I)&&Yn(ss=un(I)).position!=="static"&&Oe==="absolute"&&(bs="scrollHeight",as="scrollWidth"),(fe===pa||(fe===ga||fe===Ya)&&ye===ua)&&(Ot=Ca,jt-=(dt&&ss===Ht&&Ht.visualViewport?Ht.visualViewport.height:ss[bs])-ie.height,jt*=Be?1:-1),fe!==ga&&(fe!==pa&&fe!==Ca||ye!==ua)||(Nt=Ya,St-=(dt&&ss===Ht&&Ht.visualViewport?Ht.visualViewport.width:ss[as])-ie.width,St*=Be?1:-1)}var cs,Is=Object.assign({position:Oe},it&&dc),Ys=nt===!0?(function(ds,fs){var Rs=ds.x,Ns=ds.y,_s=fs.devicePixelRatio||1;return{x:dn(Rs*_s)/_s||0,y:dn(Ns*_s)/_s||0}})({x:St,y:jt},zs(I)):{x:St,y:jt};return St=Ys.x,jt=Ys.y,Be?Object.assign({},Is,((cs={})[Ot]=os?"0":"",cs[Nt]=pt?"0":"",cs.transform=(Ht.devicePixelRatio||1)<=1?"translate("+St+"px, "+jt+"px)":"translate3d("+St+"px, "+jt+"px, 0)",cs)):Object.assign({},Is,((_={})[Ot]=os?jt+"px":"",_[Nt]=pt?St+"px":"",_.transform="",_))}const Kn={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(O){var _=O.state,I=O.options,ie=I.gpuAcceleration,fe=ie===void 0||ie,ye=I.adaptive,Ae=ye===void 0||ye,Oe=I.roundOffsets,Be=Oe===void 0||Oe,it={placement:Na(_.placement),variation:Fa(_.placement),popper:_.elements.popper,popperRect:_.rects.popper,gpuAcceleration:fe,isFixed:_.options.strategy==="fixed"};_.modifiersData.popperOffsets!=null&&(_.styles.popper=Object.assign({},_.styles.popper,jl(Object.assign({},it,{offsets:_.modifiersData.popperOffsets,position:_.options.strategy,adaptive:Ae,roundOffsets:Be})))),_.modifiersData.arrow!=null&&(_.styles.arrow=Object.assign({},_.styles.arrow,jl(Object.assign({},it,{offsets:_.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:Be})))),_.attributes.popper=Object.assign({},_.attributes.popper,{"data-popper-placement":_.placement})},data:{}};var xi={passive:!0};const Tr={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(O){var _=O.state,I=O.instance,ie=O.options,fe=ie.scroll,ye=fe===void 0||fe,Ae=ie.resize,Oe=Ae===void 0||Ae,Be=zs(_.elements.popper),it=[].concat(_.scrollParents.reference,_.scrollParents.popper);return ye&&it.forEach(function(nt){nt.addEventListener("scroll",I.update,xi)}),Oe&&Be.addEventListener("resize",I.update,xi),function(){ye&&it.forEach(function(nt){nt.removeEventListener("scroll",I.update,xi)}),Oe&&Be.removeEventListener("resize",I.update,xi)}},data:{}};var Jl={left:"right",right:"left",bottom:"top",top:"bottom"};function Lr(O){return O.replace(/left|right|bottom|top/g,function(_){return Jl[_]})}var Lo={start:"end",end:"start"};function Zl(O){return O.replace(/start|end/g,function(_){return Lo[_]})}function Ka(O){var _=zs(O);return{scrollLeft:_.pageXOffset,scrollTop:_.pageYOffset}}function Xn(O){return Ki(un(O)).left+Ka(O).scrollLeft}function Pr(O){var _=Yn(O),I=_.overflow,ie=_.overflowX,fe=_.overflowY;return/auto|scroll|overlay|hidden/.test(I+fe+ie)}function bi(O){return["html","body","#document"].indexOf(an(O))>=0?O.ownerDocument.body:On(O)&&Pr(O)?O:bi(Er(O))}function yi(O,_){var I;_===void 0&&(_=[]);var ie=bi(O),fe=ie===((I=O.ownerDocument)==null?void 0:I.body),ye=zs(ie),Ae=fe?[ye].concat(ye.visualViewport||[],Pr(ie)?ie:[]):ie,Oe=_.concat(Ae);return fe?Oe:Oe.concat(yi(Er(Ae)))}function Xi(O){return Object.assign({},O,{left:O.x,top:O.y,right:O.x+O.width,bottom:O.y+O.height})}function vi(O,_,I){return _===Wn?Xi((function(ie,fe){var ye=zs(ie),Ae=un(ie),Oe=ye.visualViewport,Be=Ae.clientWidth,it=Ae.clientHeight,nt=0,dt=0;if(Oe){Be=Oe.width,it=Oe.height;var gt=oc();(gt||!gt&&fe==="fixed")&&(nt=Oe.offsetLeft,dt=Oe.offsetTop)}return{width:Be,height:it,x:nt+Xn(ie),y:dt}})(O,I)):Pa(_)?(function(ie,fe){var ye=Ki(ie,!1,fe==="fixed");return ye.top=ye.top+ie.clientTop,ye.left=ye.left+ie.clientLeft,ye.bottom=ye.top+ie.clientHeight,ye.right=ye.left+ie.clientWidth,ye.width=ie.clientWidth,ye.height=ie.clientHeight,ye.x=ye.left,ye.y=ye.top,ye})(_,I):Xi((function(ie){var fe,ye=un(ie),Ae=Ka(ie),Oe=(fe=ie.ownerDocument)==null?void 0:fe.body,Be=si(ye.scrollWidth,ye.clientWidth,Oe?Oe.scrollWidth:0,Oe?Oe.clientWidth:0),it=si(ye.scrollHeight,ye.clientHeight,Oe?Oe.scrollHeight:0,Oe?Oe.clientHeight:0),nt=-Ae.scrollLeft+Xn(ie),dt=-Ae.scrollTop;return Yn(Oe||ye).direction==="rtl"&&(nt+=si(ye.clientWidth,Oe?Oe.clientWidth:0)-Be),{width:Be,height:it,x:nt,y:dt}})(un(O)))}function Gi(O){var _,I=O.reference,ie=O.element,fe=O.placement,ye=fe?Na(fe):null,Ae=fe?Fa(fe):null,Oe=I.x+I.width/2-ie.width/2,Be=I.y+I.height/2-ie.height/2;switch(ye){case pa:_={x:Oe,y:I.y-ie.height};break;case Ca:_={x:Oe,y:I.y+I.height};break;case Ya:_={x:I.x+I.width,y:Be};break;case ga:_={x:I.x-ie.width,y:Be};break;default:_={x:I.x,y:I.y}}var it=ye?gi(ye):null;if(it!=null){var nt=it==="y"?"height":"width";switch(Ae){case Pn:_[it]=_[it]-(I[nt]/2-ie[nt]/2);break;case ua:_[it]=_[it]+(I[nt]/2-ie[nt]/2)}}return _}function Fr(O,_){_===void 0&&(_={});var I=_,ie=I.placement,fe=ie===void 0?O.placement:ie,ye=I.strategy,Ae=ye===void 0?O.strategy:ye,Oe=I.boundary,Be=Oe===void 0?Co:Oe,it=I.rootBoundary,nt=it===void 0?Wn:it,dt=I.elementContext,gt=dt===void 0?Fn:dt,St=I.altBoundary,Ut=St!==void 0&&St,jt=I.padding,ht=jt===void 0?0:jt,pt=To(typeof ht!="number"?ht:cc(ht,Dr)),os=gt===Fn?hi:Fn,Nt=O.rects.popper,Ot=O.elements[Ut?os:gt],Ht=(function(fs,Rs,Ns,_s){var Ks=Rs==="clippingParents"?(function(ps){var Bs=yi(Er(ps)),Ds=["absolute","fixed"].indexOf(Yn(ps).position)>=0&&On(ps)?es(ps):ps;return Pa(Ds)?Bs.filter(function(Ss){return Pa(Ss)&&Eo(Ss,Ds)&&an(Ss)!=="body"}):[]})(fs):[].concat(Rs),ws=[].concat(Ks,[Ns]),fa=ws[0],ms=ws.reduce(function(ps,Bs){var Ds=vi(fs,Bs,_s);return ps.top=si(Ds.top,ps.top),ps.right=bl(Ds.right,ps.right),ps.bottom=bl(Ds.bottom,ps.bottom),ps.left=si(Ds.left,ps.left),ps},vi(fs,fa,_s));return ms.width=ms.right-ms.left,ms.height=ms.bottom-ms.top,ms.x=ms.left,ms.y=ms.top,ms})(Pa(Ot)?Ot:Ot.contextElement||un(O.elements.popper),Be,nt,Ae),ss=Ki(O.elements.reference),bs=Gi({reference:ss,element:Nt,placement:fe}),as=Xi(Object.assign({},Nt,bs)),cs=gt===Fn?as:ss,Is={top:Ht.top-cs.top+pt.top,bottom:cs.bottom-Ht.bottom+pt.bottom,left:Ht.left-cs.left+pt.left,right:cs.right-Ht.right+pt.right},Ys=O.modifiersData.offset;if(gt===Fn&&Ys){var ds=Ys[fe];Object.keys(Is).forEach(function(fs){var Rs=[Ya,Ca].indexOf(fs)>=0?1:-1,Ns=[pa,Ca].indexOf(fs)>=0?"y":"x";Is[fs]+=ds[Ns]*Rs})}return Is}function ji(O,_){_===void 0&&(_={});var I=_,ie=I.placement,fe=I.boundary,ye=I.rootBoundary,Ae=I.padding,Oe=I.flipVariations,Be=I.allowedAutoPlacements,it=Be===void 0?Yl:Be,nt=Fa(ie),dt=nt?Oe?Wl:Wl.filter(function(Ut){return Fa(Ut)===nt}):Dr,gt=dt.filter(function(Ut){return it.indexOf(Ut)>=0});gt.length===0&&(gt=dt);var St=gt.reduce(function(Ut,jt){return Ut[jt]=Fr(O,{placement:jt,boundary:fe,rootBoundary:ye,padding:Ae})[Na(jt)],Ut},{});return Object.keys(St).sort(function(Ut,jt){return St[Ut]-St[jt]})}const Ni={name:"flip",enabled:!0,phase:"main",fn:function(O){var _=O.state,I=O.options,ie=O.name;if(!_.modifiersData[ie]._skip){for(var fe=I.mainAxis,ye=fe===void 0||fe,Ae=I.altAxis,Oe=Ae===void 0||Ae,Be=I.fallbackPlacements,it=I.padding,nt=I.boundary,dt=I.rootBoundary,gt=I.altBoundary,St=I.flipVariations,Ut=St===void 0||St,jt=I.allowedAutoPlacements,ht=_.options.placement,pt=Na(ht),os=Be||(pt!==ht&&Ut?(function(ps){if(Na(ps)===ir)return[];var Bs=Lr(ps);return[Zl(ps),Bs,Zl(Bs)]})(ht):[Lr(ht)]),Nt=[ht].concat(os).reduce(function(ps,Bs){return ps.concat(Na(Bs)===ir?ji(_,{placement:Bs,boundary:nt,rootBoundary:dt,padding:it,flipVariations:Ut,allowedAutoPlacements:jt}):Bs)},[]),Ot=_.rects.reference,Ht=_.rects.popper,ss=new Map,bs=!0,as=Nt[0],cs=0;cs<Nt.length;cs++){var Is=Nt[cs],Ys=Na(Is),ds=Fa(Is)===Pn,fs=[pa,Ca].indexOf(Ys)>=0,Rs=fs?"width":"height",Ns=Fr(_,{placement:Is,boundary:nt,rootBoundary:dt,altBoundary:gt,padding:it}),_s=fs?ds?Ya:ga:ds?Ca:pa;Ot[Rs]>Ht[Rs]&&(_s=Lr(_s));var Ks=Lr(_s),ws=[];if(ye&&ws.push(Ns[Ys]<=0),Oe&&ws.push(Ns[_s]<=0,Ns[Ks]<=0),ws.every(function(ps){return ps})){as=Is,bs=!1;break}ss.set(Is,ws)}if(bs)for(var fa=function(ps){var Bs=Nt.find(function(Ds){var Ss=ss.get(Ds);if(Ss)return Ss.slice(0,ps).every(function(rn){return rn})});if(Bs)return as=Bs,"break"},ms=Ut?3:1;ms>0&&fa(ms)!=="break";ms--);_.placement!==as&&(_.modifiersData[ie]._skip=!0,_.placement=as,_.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function uc(O,_,I){return I===void 0&&(I={x:0,y:0}),{top:O.top-_.height-I.y,right:O.right-_.width+I.x,bottom:O.bottom-_.height+I.y,left:O.left-_.width-I.x}}function hc(O){return[pa,Ya,Ca,ga].some(function(_){return O[_]>=0})}const wi={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(O){var _=O.state,I=O.name,ie=_.rects.reference,fe=_.rects.popper,ye=_.modifiersData.preventOverflow,Ae=Fr(_,{elementContext:"reference"}),Oe=Fr(_,{altBoundary:!0}),Be=uc(Ae,ie),it=uc(Oe,fe,ye),nt=hc(Be),dt=hc(it);_.modifiersData[I]={referenceClippingOffsets:Be,popperEscapeOffsets:it,isReferenceHidden:nt,hasPopperEscaped:dt},_.attributes.popper=Object.assign({},_.attributes.popper,{"data-popper-reference-hidden":nt,"data-popper-escaped":dt})}},fc={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(O){var _=O.state,I=O.options,ie=O.name,fe=I.offset,ye=fe===void 0?[0,0]:fe,Ae=Yl.reduce(function(nt,dt){return nt[dt]=(function(gt,St,Ut){var jt=Na(gt),ht=[ga,pa].indexOf(jt)>=0?-1:1,pt=typeof Ut=="function"?Ut(Object.assign({},St,{placement:gt})):Ut,os=pt[0],Nt=pt[1];return os=os||0,Nt=(Nt||0)*ht,[ga,Ya].indexOf(jt)>=0?{x:Nt,y:os}:{x:os,y:Nt}})(dt,_.rects,ye),nt},{}),Oe=Ae[_.placement],Be=Oe.x,it=Oe.y;_.modifiersData.popperOffsets!=null&&(_.modifiersData.popperOffsets.x+=Be,_.modifiersData.popperOffsets.y+=it),_.modifiersData[ie]=Ae}},F={name:"popperOffsets",enabled:!0,phase:"read",fn:function(O){var _=O.state,I=O.name;_.modifiersData[I]=Gi({reference:_.rects.reference,element:_.rects.popper,placement:_.placement})},data:{}},oe={name:"preventOverflow",enabled:!0,phase:"main",fn:function(O){var _=O.state,I=O.options,ie=O.name,fe=I.mainAxis,ye=fe===void 0||fe,Ae=I.altAxis,Oe=Ae!==void 0&&Ae,Be=I.boundary,it=I.rootBoundary,nt=I.altBoundary,dt=I.padding,gt=I.tether,St=gt===void 0||gt,Ut=I.tetherOffset,jt=Ut===void 0?0:Ut,ht=Fr(_,{boundary:Be,rootBoundary:it,padding:dt,altBoundary:nt}),pt=Na(_.placement),os=Fa(_.placement),Nt=!os,Ot=gi(pt),Ht=Ot==="x"?"y":"x",ss=_.modifiersData.popperOffsets,bs=_.rects.reference,as=_.rects.popper,cs=typeof jt=="function"?jt(Object.assign({},_.rects,{placement:_.placement})):jt,Is=typeof cs=="number"?{mainAxis:cs,altAxis:cs}:Object.assign({mainAxis:0,altAxis:0},cs),Ys=_.modifiersData.offset?_.modifiersData.offset[_.placement]:null,ds={x:0,y:0};if(ss){if(ye){var fs,Rs=Ot==="y"?pa:ga,Ns=Ot==="y"?Ca:Ya,_s=Ot==="y"?"height":"width",Ks=ss[Ot],ws=Ks+ht[Rs],fa=Ks-ht[Ns],ms=St?-as[_s]/2:0,ps=os===Pn?bs[_s]:as[_s],Bs=os===Pn?-as[_s]:-bs[_s],Ds=_.elements.arrow,Ss=St&&Ds?Ql(Ds):{width:0,height:0},rn=_.modifiersData["arrow#persistent"]?_.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},ka=rn[Rs],Zt=rn[Ns],Jt=vl(0,bs[_s],Ss[_s]),Xs=Nt?bs[_s]/2-ms-Jt-ka-Is.mainAxis:ps-Jt-ka-Is.mainAxis,hr=Nt?-bs[_s]/2+ms+Jt+Zt+Is.mainAxis:Bs+Jt+Zt+Is.mainAxis,fr=_.elements.arrow&&es(_.elements.arrow),tr=fr?Ot==="y"?fr.clientTop||0:fr.clientLeft||0:0,Ua=(fs=Ys?.[Ot])!=null?fs:0,Tl=Ks+hr-Ua,sl=vl(St?bl(ws,Ks+Xs-Ua-tr):ws,Ks,St?si(fa,Tl):fa);ss[Ot]=sl,ds[Ot]=sl-Ks}if(Oe){var Cc,ma=Ot==="x"?pa:ga,du=Ot==="x"?Ca:Ya,al=ss[Ht],uo=Ht==="y"?"height":"width",Fi=al+ht[ma],Xu=al-ht[du],Ac=[pa,ga].indexOf(pt)!==-1,gd=(Cc=Ys?.[Ht])!=null?Cc:0,kc=Ac?Fi:al-bs[uo]-as[uo]-gd+Is.altAxis,ln=Ac?al+bs[uo]+as[uo]-gd-Is.altAxis:Xu,Da=St&&Ac?(function(Dc,Ll,Pl){var Fl=vl(Dc,Ll,Pl);return Fl>Pl?Pl:Fl})(kc,al,ln):vl(St?kc:Fi,al,St?ln:Xu);ss[Ht]=Da,ds[Ht]=Da-al}_.modifiersData[ie]=ds}},requiresIfExists:["offset"]};function _e(O,_,I){I===void 0&&(I=!1);var ie,fe,ye=On(_),Ae=On(_)&&(function(dt){var gt=dt.getBoundingClientRect(),St=dn(gt.width)/dt.offsetWidth||1,Ut=dn(gt.height)/dt.offsetHeight||1;return St!==1||Ut!==1})(_),Oe=un(_),Be=Ki(O,Ae,I),it={scrollLeft:0,scrollTop:0},nt={x:0,y:0};return(ye||!ye&&!I)&&((an(_)!=="body"||Pr(Oe))&&(it=(ie=_)!==zs(ie)&&On(ie)?{scrollLeft:(fe=ie).scrollLeft,scrollTop:fe.scrollTop}:Ka(ie)),On(_)?((nt=Ki(_,!0)).x+=_.clientLeft,nt.y+=_.clientTop):Oe&&(nt.x=Xn(Oe))),{x:Be.left+it.scrollLeft-nt.x,y:Be.top+it.scrollTop-nt.y,width:Be.width,height:Be.height}}function Le(O){var _=new Map,I=new Set,ie=[];function fe(ye){I.add(ye.name),[].concat(ye.requires||[],ye.requiresIfExists||[]).forEach(function(Ae){if(!I.has(Ae)){var Oe=_.get(Ae);Oe&&fe(Oe)}}),ie.push(ye)}return O.forEach(function(ye){_.set(ye.name,ye)}),O.forEach(function(ye){I.has(ye.name)||fe(ye)}),ie}var ze={placement:"bottom",modifiers:[],strategy:"absolute"};function ot(){for(var O=arguments.length,_=new Array(O),I=0;I<O;I++)_[I]=arguments[I];return!_.some(function(ie){return!(ie&&typeof ie.getBoundingClientRect=="function")})}function mt(O){O===void 0&&(O={});var _=O,I=_.defaultModifiers,ie=I===void 0?[]:I,fe=_.defaultOptions,ye=fe===void 0?ze:fe;return function(Ae,Oe,Be){Be===void 0&&(Be=ye);var it,nt,dt={placement:"bottom",orderedModifiers:[],options:Object.assign({},ze,ye),modifiersData:{},elements:{reference:Ae,popper:Oe},attributes:{},styles:{}},gt=[],St=!1,Ut={state:dt,setOptions:function(ht){var pt=typeof ht=="function"?ht(dt.options):ht;jt(),dt.options=Object.assign({},ye,dt.options,pt),dt.scrollParents={reference:Pa(Ae)?yi(Ae):Ae.contextElement?yi(Ae.contextElement):[],popper:yi(Oe)};var os,Nt,Ot=(function(Ht){var ss=Le(Ht);return vr.reduce(function(bs,as){return bs.concat(ss.filter(function(cs){return cs.phase===as}))},[])})((os=[].concat(ie,dt.options.modifiers),Nt=os.reduce(function(Ht,ss){var bs=Ht[ss.name];return Ht[ss.name]=bs?Object.assign({},bs,ss,{options:Object.assign({},bs.options,ss.options),data:Object.assign({},bs.data,ss.data)}):ss,Ht},{}),Object.keys(Nt).map(function(Ht){return Nt[Ht]})));return dt.orderedModifiers=Ot.filter(function(Ht){return Ht.enabled}),dt.orderedModifiers.forEach(function(Ht){var ss=Ht.name,bs=Ht.options,as=bs===void 0?{}:bs,cs=Ht.effect;if(typeof cs=="function"){var Is=cs({state:dt,name:ss,instance:Ut,options:as});gt.push(Is||function(){})}}),Ut.update()},forceUpdate:function(){if(!St){var ht=dt.elements,pt=ht.reference,os=ht.popper;if(ot(pt,os)){dt.rects={reference:_e(pt,es(os),dt.options.strategy==="fixed"),popper:Ql(os)},dt.reset=!1,dt.placement=dt.options.placement,dt.orderedModifiers.forEach(function(cs){return dt.modifiersData[cs.name]=Object.assign({},cs.data)});for(var Nt=0;Nt<dt.orderedModifiers.length;Nt++)if(dt.reset!==!0){var Ot=dt.orderedModifiers[Nt],Ht=Ot.fn,ss=Ot.options,bs=ss===void 0?{}:ss,as=Ot.name;typeof Ht=="function"&&(dt=Ht({state:dt,options:bs,name:as,instance:Ut})||dt)}else dt.reset=!1,Nt=-1}}},update:(it=function(){return new Promise(function(ht){Ut.forceUpdate(),ht(dt)})},function(){return nt||(nt=new Promise(function(ht){Promise.resolve().then(function(){nt=void 0,ht(it())})})),nt}),destroy:function(){jt(),St=!0}};if(!ot(Ae,Oe))return Ut;function jt(){gt.forEach(function(ht){return ht()}),gt=[]}return Ut.setOptions(Be).then(function(ht){!St&&Be.onFirstUpdate&&Be.onFirstUpdate(ht)}),Ut}}var Yt=mt(),Gt=mt({defaultModifiers:[Tr,F,Kn,Xl]}),ls=mt({defaultModifiers:[Tr,F,Kn,Xl,fc,Ni,oe,lr,wi]});const xs=Object.freeze(Object.defineProperty({__proto__:null,afterMain:In,afterRead:fi,afterWrite:pi,applyStyles:Xl,arrow:lr,auto:ir,basePlacements:Dr,beforeMain:Kl,beforeRead:Ao,beforeWrite:ko,bottom:Ca,clippingParents:Co,computeStyles:Kn,createPopper:ls,createPopperBase:Yt,createPopperLite:Gt,detectOverflow:Fr,end:ua,eventListeners:Tr,flip:Ni,hide:wi,left:ga,main:ta,modifierPhases:vr,offset:fc,placements:Yl,popper:Fn,popperGenerator:mt,popperOffsets:F,preventOverflow:oe,read:lc,reference:hi,right:Ya,start:Pn,top:pa,variationPlacements:Wl,viewport:Wn,write:mi},Symbol.toStringTag,{value:"Module"})),Vs="dropdown",sa=".bs.dropdown",Aa=".data-api",ha="ArrowUp",Xa="ArrowDown",Ga=`hide${sa}`,xn=`hidden${sa}`,Ir=`show${sa}`,or=`shown${sa}`,mc=`click${sa}${Aa}`,eo=`keydown${sa}${Aa}`,to=`keyup${sa}${Aa}`,Gn="show",bn='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',so=`${bn}.${Gn}`,ni=".dropdown-menu",yn=v()?"top-end":"top-start",Nl=v()?"top-start":"top-end",wl=v()?"bottom-end":"bottom-start",Po=v()?"bottom-start":"bottom-end",_i=v()?"left-start":"right-start",Ia=v()?"right-start":"left-start",Qi={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},Fo={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class Qn extends De{constructor(_,I){super(_,I),this._popper=null,this._parent=this._element.parentNode,this._menu=ke.next(this._element,ni)[0]||ke.prev(this._element,ni)[0]||ke.findOne(ni,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return Qi}static get DefaultType(){return Fo}static get NAME(){return Vs}toggle(){return this._isShown()?this.hide():this.show()}show(){if(p(this._element)||this._isShown())return;const _={relatedTarget:this._element};if(!D.trigger(this._element,Ir,_).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const I of[].concat(...document.body.children))D.on(I,"mouseover",g);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Gn),this._element.classList.add(Gn),D.trigger(this._element,or,_)}}hide(){if(p(this._element)||!this._isShown())return;const _={relatedTarget:this._element};this._completeHide(_)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(_){if(!D.trigger(this._element,Ga,_).defaultPrevented){if("ontouchstart"in document.documentElement)for(const I of[].concat(...document.body.children))D.off(I,"mouseover",g);this._popper&&this._popper.destroy(),this._menu.classList.remove(Gn),this._element.classList.remove(Gn),this._element.setAttribute("aria-expanded","false"),G.removeDataAttribute(this._menu,"popper"),D.trigger(this._element,xn,_)}}_getConfig(_){if(typeof(_=super._getConfig(_)).reference=="object"&&!u(_.reference)&&typeof _.reference.getBoundingClientRect!="function")throw new TypeError(`${Vs.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return _}_createPopper(){if(xs===void 0)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org/docs/v2/)");let _=this._element;this._config.reference==="parent"?_=this._parent:u(this._config.reference)?_=h(this._config.reference):typeof this._config.reference=="object"&&(_=this._config.reference);const I=this._getPopperConfig();this._popper=ls(_,this._menu,I)}_isShown(){return this._menu.classList.contains(Gn)}_getPlacement(){const _=this._parent;if(_.classList.contains("dropend"))return _i;if(_.classList.contains("dropstart"))return Ia;if(_.classList.contains("dropup-center"))return"top";if(_.classList.contains("dropdown-center"))return"bottom";const I=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return _.classList.contains("dropup")?I?Nl:yn:I?Po:wl}_detectNavbar(){return this._element.closest(".navbar")!==null}_getOffset(){const{offset:_}=this._config;return typeof _=="string"?_.split(",").map(I=>Number.parseInt(I,10)):typeof _=="function"?I=>_(I,this._element):_}_getPopperConfig(){const _={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(G.setDataAttribute(this._menu,"popper","static"),_.modifiers=[{name:"applyStyles",enabled:!1}]),{..._,...E(this._config.popperConfig,[void 0,_])}}_selectMenuItem({key:_,target:I}){const ie=ke.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(fe=>m(fe));ie.length&&z(ie,I,_===Xa,!ie.includes(I)).focus()}static jQueryInterface(_){return this.each(function(){const I=Qn.getOrCreateInstance(this,_);if(typeof _=="string"){if(I[_]===void 0)throw new TypeError(`No method named "${_}"`);I[_]()}})}static clearMenus(_){if(_.button===2||_.type==="keyup"&&_.key!=="Tab")return;const I=ke.find(so);for(const ie of I){const fe=Qn.getInstance(ie);if(!fe||fe._config.autoClose===!1)continue;const ye=_.composedPath(),Ae=ye.includes(fe._menu);if(ye.includes(fe._element)||fe._config.autoClose==="inside"&&!Ae||fe._config.autoClose==="outside"&&Ae||fe._menu.contains(_.target)&&(_.type==="keyup"&&_.key==="Tab"||/input|select|option|textarea|form/i.test(_.target.tagName)))continue;const Oe={relatedTarget:fe._element};_.type==="click"&&(Oe.clickEvent=_),fe._completeHide(Oe)}}static dataApiKeydownHandler(_){const I=/input|textarea/i.test(_.target.tagName),ie=_.key==="Escape",fe=[ha,Xa].includes(_.key);if(!fe&&!ie||I&&!ie)return;_.preventDefault();const ye=this.matches(bn)?this:ke.prev(this,bn)[0]||ke.next(this,bn)[0]||ke.findOne(bn,_.delegateTarget.parentNode),Ae=Qn.getOrCreateInstance(ye);if(fe)return _.stopPropagation(),Ae.show(),void Ae._selectMenuItem(_);Ae._isShown()&&(_.stopPropagation(),Ae.hide(),ye.focus())}}D.on(document,eo,bn,Qn.dataApiKeydownHandler),D.on(document,eo,ni,Qn.dataApiKeydownHandler),D.on(document,mc,Qn.clearMenus),D.on(document,to,Qn.clearMenus),D.on(document,mc,bn,function(O){O.preventDefault(),Qn.getOrCreateInstance(this).toggle()}),S(Qn);const cr="backdrop",Or="show",Si=`mousedown.bs.${cr}`,pc={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},ri={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class Ji extends je{constructor(_){super(),this._config=this._getConfig(_),this._isAppended=!1,this._element=null}static get Default(){return pc}static get DefaultType(){return ri}static get NAME(){return cr}show(_){if(!this._config.isVisible)return void E(_);this._append();const I=this._getElement();this._config.isAnimated&&j(I),I.classList.add(Or),this._emulateAnimation(()=>{E(_)})}hide(_){this._config.isVisible?(this._getElement().classList.remove(Or),this._emulateAnimation(()=>{this.dispose(),E(_)})):E(_)}dispose(){this._isAppended&&(D.off(this._element,Si),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const _=document.createElement("div");_.className=this._config.className,this._config.isAnimated&&_.classList.add("fade"),this._element=_}return this._element}_configAfterMerge(_){return _.rootElement=h(_.rootElement),_}_append(){if(this._isAppended)return;const _=this._getElement();this._config.rootElement.append(_),D.on(_,Si,()=>{E(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(_){L(_,this._getElement(),this._config.isAnimated)}}const vn=".bs.focustrap",Jn=`focusin${vn}`,Ci=`keydown.tab${vn}`,ii="backward",Zi={autofocus:!0,trapElement:null},Io={autofocus:"boolean",trapElement:"element"};class ao extends je{constructor(_){super(),this._config=this._getConfig(_),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return Zi}static get DefaultType(){return Io}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),D.off(document,vn),D.on(document,Jn,_=>this._handleFocusin(_)),D.on(document,Ci,_=>this._handleKeydown(_)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,D.off(document,vn))}_handleFocusin(_){const{trapElement:I}=this._config;if(_.target===document||_.target===I||I.contains(_.target))return;const ie=ke.focusableChildren(I);ie.length===0?I.focus():this._lastTabNavDirection===ii?ie[ie.length-1].focus():ie[0].focus()}_handleKeydown(_){_.key==="Tab"&&(this._lastTabNavDirection=_.shiftKey?ii:"forward")}}const Oa=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",gc=".sticky-top",jr="padding-right",li="margin-right";class nn{constructor(){this._element=document.body}getWidth(){const _=document.documentElement.clientWidth;return Math.abs(window.innerWidth-_)}hide(){const _=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,jr,I=>I+_),this._setElementAttributes(Oa,jr,I=>I+_),this._setElementAttributes(gc,li,I=>I-_)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,jr),this._resetElementAttributes(Oa,jr),this._resetElementAttributes(gc,li)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(_,I,ie){const fe=this.getWidth();this._applyManipulationCallback(_,ye=>{if(ye!==this._element&&window.innerWidth>ye.clientWidth+fe)return;this._saveInitialAttribute(ye,I);const Ae=window.getComputedStyle(ye).getPropertyValue(I);ye.style.setProperty(I,`${ie(Number.parseFloat(Ae))}px`)})}_saveInitialAttribute(_,I){const ie=_.style.getPropertyValue(I);ie&&G.setDataAttribute(_,I,ie)}_resetElementAttributes(_,I){this._applyManipulationCallback(_,ie=>{const fe=G.getDataAttribute(ie,I);fe!==null?(G.removeDataAttribute(ie,I),ie.style.setProperty(I,fe)):ie.style.removeProperty(I)})}_applyManipulationCallback(_,I){if(u(_))I(_);else for(const ie of ke.find(_,this._element))I(ie)}}const Qa=".bs.modal",Oo=`hide${Qa}`,Mo=`hidePrevented${Qa}`,Ai=`hidden${Qa}`,ki=`show${Qa}`,Di=`shown${Qa}`,no=`resize${Qa}`,Nr=`click.dismiss${Qa}`,el=`mousedown.dismiss${Qa}`,Mn=`keydown.dismiss${Qa}`,Mr=`click${Qa}.data-api`,Ws="modal-open",Ms="show",na="modal-static",za={backdrop:!0,focus:!0,keyboard:!0},Ei={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class jn extends De{constructor(_,I){super(_,I),this._dialog=ke.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new nn,this._addEventListeners()}static get Default(){return za}static get DefaultType(){return Ei}static get NAME(){return"modal"}toggle(_){return this._isShown?this.hide():this.show(_)}show(_){this._isShown||this._isTransitioning||D.trigger(this._element,ki,{relatedTarget:_}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(Ws),this._adjustDialog(),this._backdrop.show(()=>this._showElement(_)))}hide(){this._isShown&&!this._isTransitioning&&(D.trigger(this._element,Oo).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(Ms),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated())))}dispose(){D.off(window,Qa),D.off(this._dialog,Qa),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Ji({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new ao({trapElement:this._element})}_showElement(_){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const I=ke.findOne(".modal-body",this._dialog);I&&(I.scrollTop=0),j(this._element),this._element.classList.add(Ms),this._queueCallback(()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,D.trigger(this._element,Di,{relatedTarget:_})},this._dialog,this._isAnimated())}_addEventListeners(){D.on(this._element,Mn,_=>{_.key==="Escape"&&(this._config.keyboard?this.hide():this._triggerBackdropTransition())}),D.on(window,no,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),D.on(this._element,el,_=>{D.one(this._element,Nr,I=>{this._element===_.target&&this._element===I.target&&(this._config.backdrop!=="static"?this._config.backdrop&&this.hide():this._triggerBackdropTransition())})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(Ws),this._resetAdjustments(),this._scrollBar.reset(),D.trigger(this._element,Ai)})}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(D.trigger(this._element,Mo).defaultPrevented)return;const _=this._element.scrollHeight>document.documentElement.clientHeight,I=this._element.style.overflowY;I==="hidden"||this._element.classList.contains(na)||(_||(this._element.style.overflowY="hidden"),this._element.classList.add(na),this._queueCallback(()=>{this._element.classList.remove(na),this._queueCallback(()=>{this._element.style.overflowY=I},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const _=this._element.scrollHeight>document.documentElement.clientHeight,I=this._scrollBar.getWidth(),ie=I>0;if(ie&&!_){const fe=v()?"paddingLeft":"paddingRight";this._element.style[fe]=`${I}px`}if(!ie&&_){const fe=v()?"paddingRight":"paddingLeft";this._element.style[fe]=`${I}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(_,I){return this.each(function(){const ie=jn.getOrCreateInstance(this,_);if(typeof _=="string"){if(ie[_]===void 0)throw new TypeError(`No method named "${_}"`);ie[_](I)}})}}D.on(document,Mr,'[data-bs-toggle="modal"]',function(O){const _=ke.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&O.preventDefault(),D.one(_,ki,ie=>{ie.defaultPrevented||D.one(_,Ai,()=>{m(this)&&this.focus()})});const I=ke.findOne(".modal.show");I&&jn.getInstance(I).hide(),jn.getOrCreateInstance(_).toggle(this)}),Ye(jn),S(jn);const Zn=".bs.offcanvas",Ro=".data-api",eu=`load${Zn}${Ro}`,tu="show",su="showing",au="hiding",id=".offcanvas.show",nu=`show${Zn}`,ro=`shown${Zn}`,Rr=`hide${Zn}`,Bo=`hidePrevented${Zn}`,dr=`hidden${Zn}`,io=`resize${Zn}`,ld=`click${Zn}${Ro}`,xc=`keydown.dismiss${Zn}`,bc={backdrop:!0,keyboard:!0,scroll:!1},od={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Nn extends De{constructor(_,I){super(_,I),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return bc}static get DefaultType(){return od}static get NAME(){return"offcanvas"}toggle(_){return this._isShown?this.hide():this.show(_)}show(_){this._isShown||D.trigger(this._element,nu,{relatedTarget:_}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||new nn().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(su),this._queueCallback(()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add(tu),this._element.classList.remove(su),D.trigger(this._element,ro,{relatedTarget:_})},this._element,!0))}hide(){this._isShown&&(D.trigger(this._element,Rr).defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(au),this._backdrop.hide(),this._queueCallback(()=>{this._element.classList.remove(tu,au),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new nn().reset(),D.trigger(this._element,dr)},this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const _=!!this._config.backdrop;return new Ji({className:"offcanvas-backdrop",isVisible:_,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:_?()=>{this._config.backdrop!=="static"?this.hide():D.trigger(this._element,Bo)}:null})}_initializeFocusTrap(){return new ao({trapElement:this._element})}_addEventListeners(){D.on(this._element,xc,_=>{_.key==="Escape"&&(this._config.keyboard?this.hide():D.trigger(this._element,Bo))})}static jQueryInterface(_){return this.each(function(){const I=Nn.getOrCreateInstance(this,_);if(typeof _=="string"){if(I[_]===void 0||_.startsWith("_")||_==="constructor")throw new TypeError(`No method named "${_}"`);I[_](this)}})}}D.on(document,ld,'[data-bs-toggle="offcanvas"]',function(O){const _=ke.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&O.preventDefault(),p(this))return;D.one(_,dr,()=>{m(this)&&this.focus()});const I=ke.findOne(id);I&&I!==_&&Nn.getInstance(I).hide(),Nn.getOrCreateInstance(_).toggle(this)}),D.on(window,eu,()=>{for(const O of ke.find(id))Nn.getOrCreateInstance(O).show()}),D.on(window,io,()=>{for(const O of ke.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(O).position!=="fixed"&&Nn.getOrCreateInstance(O).hide()}),Ye(Nn),S(Nn);const zo={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},Rn=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),wn=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,cd=(O,_)=>{const I=O.nodeName.toLowerCase();return _.includes(I)?!Rn.has(I)||!!wn.test(O.nodeValue):_.filter(ie=>ie instanceof RegExp).some(ie=>ie.test(I))},Bn={allowList:zo,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},dd={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},Br={entry:"(string|element|function|null)",selector:"(string|element)"};class yc extends je{constructor(_){super(),this._config=this._getConfig(_)}static get Default(){return Bn}static get DefaultType(){return dd}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map(_=>this._resolvePossibleFunction(_)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(_){return this._checkContent(_),this._config.content={...this._config.content,..._},this}toHtml(){const _=document.createElement("div");_.innerHTML=this._maybeSanitize(this._config.template);for(const[fe,ye]of Object.entries(this._config.content))this._setContent(_,ye,fe);const I=_.children[0],ie=this._resolvePossibleFunction(this._config.extraClass);return ie&&I.classList.add(...ie.split(" ")),I}_typeCheckConfig(_){super._typeCheckConfig(_),this._checkContent(_.content)}_checkContent(_){for(const[I,ie]of Object.entries(_))super._typeCheckConfig({selector:I,entry:ie},Br)}_setContent(_,I,ie){const fe=ke.findOne(ie,_);fe&&((I=this._resolvePossibleFunction(I))?u(I)?this._putElementInTemplate(h(I),fe):this._config.html?fe.innerHTML=this._maybeSanitize(I):fe.textContent=I:fe.remove())}_maybeSanitize(_){return this._config.sanitize?(function(I,ie,fe){if(!I.length)return I;if(fe&&typeof fe=="function")return fe(I);const ye=new window.DOMParser().parseFromString(I,"text/html"),Ae=[].concat(...ye.body.querySelectorAll("*"));for(const Oe of Ae){const Be=Oe.nodeName.toLowerCase();if(!Object.keys(ie).includes(Be)){Oe.remove();continue}const it=[].concat(...Oe.attributes),nt=[].concat(ie["*"]||[],ie[Be]||[]);for(const dt of it)cd(dt,nt)||Oe.removeAttribute(dt.nodeName)}return ye.body.innerHTML})(_,this._config.allowList,this._config.sanitizeFn):_}_resolvePossibleFunction(_){return E(_,[void 0,this])}_putElementInTemplate(_,I){if(this._config.html)return I.innerHTML="",void I.append(_);I.textContent=_.textContent}}const qo=new Set(["sanitize","allowList","sanitizeFn"]),Ti="fade",_l="show",ud=".tooltip-inner",lo=".modal",vc="hide.bs.modal",zn="hover",Sl="focus",tl="click",hd={AUTO:"auto",TOP:"top",RIGHT:v()?"left":"right",BOTTOM:"bottom",LEFT:v()?"right":"left"},jc={allowList:zo,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},zr={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class hn extends De{constructor(_,I){if(xs===void 0)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org/docs/v2/)");super(_,I),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return jc}static get DefaultType(){return zr}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),D.off(this._element.closest(lo),vc,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const _=D.trigger(this._element,this.constructor.eventName("show")),I=(y(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(_.defaultPrevented||!I)return;this._disposePopper();const ie=this._getTipElement();this._element.setAttribute("aria-describedby",ie.getAttribute("id"));const{container:fe}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(fe.append(ie),D.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(ie),ie.classList.add(_l),"ontouchstart"in document.documentElement)for(const ye of[].concat(...document.body.children))D.on(ye,"mouseover",g);this._queueCallback(()=>{D.trigger(this._element,this.constructor.eventName("shown")),this._isHovered===!1&&this._leave(),this._isHovered=!1},this.tip,this._isAnimated())}hide(){if(this._isShown()&&!D.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented){if(this._getTipElement().classList.remove(_l),"ontouchstart"in document.documentElement)for(const _ of[].concat(...document.body.children))D.off(_,"mouseover",g);this._activeTrigger[tl]=!1,this._activeTrigger[Sl]=!1,this._activeTrigger[zn]=!1,this._isHovered=null,this._queueCallback(()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),D.trigger(this._element,this.constructor.eventName("hidden")))},this.tip,this._isAnimated())}}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(_){const I=this._getTemplateFactory(_).toHtml();if(!I)return null;I.classList.remove(Ti,_l),I.classList.add(`bs-${this.constructor.NAME}-auto`);const ie=(fe=>{do fe+=Math.floor(1e6*Math.random());while(document.getElementById(fe));return fe})(this.constructor.NAME).toString();return I.setAttribute("id",ie),this._isAnimated()&&I.classList.add(Ti),I}setContent(_){this._newContent=_,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(_){return this._templateFactory?this._templateFactory.changeContent(_):this._templateFactory=new yc({...this._config,content:_,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[ud]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(_){return this.constructor.getOrCreateInstance(_.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(Ti)}_isShown(){return this.tip&&this.tip.classList.contains(_l)}_createPopper(_){const I=E(this._config.placement,[this,_,this._element]),ie=hd[I.toUpperCase()];return ls(this._element,_,this._getPopperConfig(ie))}_getOffset(){const{offset:_}=this._config;return typeof _=="string"?_.split(",").map(I=>Number.parseInt(I,10)):typeof _=="function"?I=>_(I,this._element):_}_resolvePossibleFunction(_){return E(_,[this._element,this._element])}_getPopperConfig(_){const I={placement:_,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:ie=>{this._getTipElement().setAttribute("data-popper-placement",ie.state.placement)}}]};return{...I,...E(this._config.popperConfig,[void 0,I])}}_setListeners(){const _=this._config.trigger.split(" ");for(const I of _)if(I==="click")D.on(this._element,this.constructor.eventName("click"),this._config.selector,ie=>{const fe=this._initializeOnDelegatedTarget(ie);fe._activeTrigger[tl]=!(fe._isShown()&&fe._activeTrigger[tl]),fe.toggle()});else if(I!=="manual"){const ie=I===zn?this.constructor.eventName("mouseenter"):this.constructor.eventName("focusin"),fe=I===zn?this.constructor.eventName("mouseleave"):this.constructor.eventName("focusout");D.on(this._element,ie,this._config.selector,ye=>{const Ae=this._initializeOnDelegatedTarget(ye);Ae._activeTrigger[ye.type==="focusin"?Sl:zn]=!0,Ae._enter()}),D.on(this._element,fe,this._config.selector,ye=>{const Ae=this._initializeOnDelegatedTarget(ye);Ae._activeTrigger[ye.type==="focusout"?Sl:zn]=Ae._element.contains(ye.relatedTarget),Ae._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},D.on(this._element.closest(lo),vc,this._hideModalHandler)}_fixTitle(){const _=this._element.getAttribute("title");_&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",_),this._element.setAttribute("data-bs-original-title",_),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(_,I){clearTimeout(this._timeout),this._timeout=setTimeout(_,I)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(_){const I=G.getDataAttributes(this._element);for(const ie of Object.keys(I))qo.has(ie)&&delete I[ie];return _={...I,...typeof _=="object"&&_?_:{}},_=this._mergeConfigObj(_),_=this._configAfterMerge(_),this._typeCheckConfig(_),_}_configAfterMerge(_){return _.container=_.container===!1?document.body:h(_.container),typeof _.delay=="number"&&(_.delay={show:_.delay,hide:_.delay}),typeof _.title=="number"&&(_.title=_.title.toString()),typeof _.content=="number"&&(_.content=_.content.toString()),_}_getDelegateConfig(){const _={};for(const[I,ie]of Object.entries(this._config))this.constructor.Default[I]!==ie&&(_[I]=ie);return _.selector=!1,_.trigger="manual",_}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(_){return this.each(function(){const I=hn.getOrCreateInstance(this,_);if(typeof _=="string"){if(I[_]===void 0)throw new TypeError(`No method named "${_}"`);I[_]()}})}}S(hn);const Cl=".popover-header",qr=".popover-body",Ur={...hn.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},wr={...hn.DefaultType,content:"(null|string|element|function)"};class Nc extends hn{static get Default(){return Ur}static get DefaultType(){return wr}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[Cl]:this._getTitle(),[qr]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(_){return this.each(function(){const I=Nc.getOrCreateInstance(this,_);if(typeof _=="string"){if(I[_]===void 0)throw new TypeError(`No method named "${_}"`);I[_]()}})}}S(Nc);const wc=".bs.scrollspy",fd=`activate${wc}`,ru=`click${wc}`,_n=`load${wc}.data-api`,ea="active",Ls="[href]",qn=".nav-link",Ma=`${qn}, .nav-item > ${qn}, .list-group-item`,oi={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},Al={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class oo extends De{constructor(_,I){super(_,I),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return oi}static get DefaultType(){return Al}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const _ of this._observableSections.values())this._observer.observe(_)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(_){return _.target=h(_.target)||document.body,_.rootMargin=_.offset?`${_.offset}px 0px -30%`:_.rootMargin,typeof _.threshold=="string"&&(_.threshold=_.threshold.split(",").map(I=>Number.parseFloat(I))),_}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(D.off(this._config.target,ru),D.on(this._config.target,ru,Ls,_=>{const I=this._observableSections.get(_.target.hash);if(I){_.preventDefault();const ie=this._rootElement||window,fe=I.offsetTop-this._element.offsetTop;if(ie.scrollTo)return void ie.scrollTo({top:fe,behavior:"smooth"});ie.scrollTop=fe}}))}_getNewObserver(){const _={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(I=>this._observerCallback(I),_)}_observerCallback(_){const I=Ae=>this._targetLinks.get(`#${Ae.target.id}`),ie=Ae=>{this._previousScrollData.visibleEntryTop=Ae.target.offsetTop,this._process(I(Ae))},fe=(this._rootElement||document.documentElement).scrollTop,ye=fe>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=fe;for(const Ae of _){if(!Ae.isIntersecting){this._activeTarget=null,this._clearActiveClass(I(Ae));continue}const Oe=Ae.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(ye&&Oe){if(ie(Ae),!fe)return}else ye||Oe||ie(Ae)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const _=ke.find(Ls,this._config.target);for(const I of _){if(!I.hash||p(I))continue;const ie=ke.findOne(decodeURI(I.hash),this._element);m(ie)&&(this._targetLinks.set(decodeURI(I.hash),I),this._observableSections.set(I.hash,ie))}}_process(_){this._activeTarget!==_&&(this._clearActiveClass(this._config.target),this._activeTarget=_,_.classList.add(ea),this._activateParents(_),D.trigger(this._element,fd,{relatedTarget:_}))}_activateParents(_){if(_.classList.contains("dropdown-item"))ke.findOne(".dropdown-toggle",_.closest(".dropdown")).classList.add(ea);else for(const I of ke.parents(_,".nav, .list-group"))for(const ie of ke.prev(I,Ma))ie.classList.add(ea)}_clearActiveClass(_){_.classList.remove(ea);const I=ke.find(`${Ls}.${ea}`,_);for(const ie of I)ie.classList.remove(ea)}static jQueryInterface(_){return this.each(function(){const I=oo.getOrCreateInstance(this,_);if(typeof _=="string"){if(I[_]===void 0||_.startsWith("_")||_==="constructor")throw new TypeError(`No method named "${_}"`);I[_]()}})}}D.on(window,_n,()=>{for(const O of ke.find('[data-bs-spy="scroll"]'))oo.getOrCreateInstance(O)}),S(oo);const er=".bs.tab",Sn=`hide${er}`,co=`hidden${er}`,iu=`show${er}`,Uo=`shown${er}`,md=`click${er}`,kl=`keydown${er}`,Li=`load${er}`,Dl="ArrowLeft",_r="ArrowRight",Ho="ArrowUp",El="ArrowDown",Pi="Home",_c="End",ur="active",fn="fade",$o="show",lu=".dropdown-toggle",ou=`:not(${lu})`,Ku='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',cu=`.nav-link${ou}, .list-group-item${ou}, [role="tab"]${ou}, ${Ku}`,qa=`.${ur}[data-bs-toggle="tab"], .${ur}[data-bs-toggle="pill"], .${ur}[data-bs-toggle="list"]`;class Hr extends De{constructor(_){super(_),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),D.on(this._element,kl,I=>this._keydown(I)))}static get NAME(){return"tab"}show(){const _=this._element;if(this._elemIsActive(_))return;const I=this._getActiveElem(),ie=I?D.trigger(I,Sn,{relatedTarget:_}):null;D.trigger(_,iu,{relatedTarget:I}).defaultPrevented||ie&&ie.defaultPrevented||(this._deactivate(I,_),this._activate(_,I))}_activate(_,I){_&&(_.classList.add(ur),this._activate(ke.getElementFromSelector(_)),this._queueCallback(()=>{_.getAttribute("role")==="tab"?(_.removeAttribute("tabindex"),_.setAttribute("aria-selected",!0),this._toggleDropDown(_,!0),D.trigger(_,Uo,{relatedTarget:I})):_.classList.add($o)},_,_.classList.contains(fn)))}_deactivate(_,I){_&&(_.classList.remove(ur),_.blur(),this._deactivate(ke.getElementFromSelector(_)),this._queueCallback(()=>{_.getAttribute("role")==="tab"?(_.setAttribute("aria-selected",!1),_.setAttribute("tabindex","-1"),this._toggleDropDown(_,!1),D.trigger(_,co,{relatedTarget:I})):_.classList.remove($o)},_,_.classList.contains(fn)))}_keydown(_){if(![Dl,_r,Ho,El,Pi,_c].includes(_.key))return;_.stopPropagation(),_.preventDefault();const I=this._getChildren().filter(fe=>!p(fe));let ie;if([Pi,_c].includes(_.key))ie=I[_.key===Pi?0:I.length-1];else{const fe=[_r,El].includes(_.key);ie=z(I,_.target,fe,!0)}ie&&(ie.focus({preventScroll:!0}),Hr.getOrCreateInstance(ie).show())}_getChildren(){return ke.find(cu,this._parent)}_getActiveElem(){return this._getChildren().find(_=>this._elemIsActive(_))||null}_setInitialAttributes(_,I){this._setAttributeIfNotExists(_,"role","tablist");for(const ie of I)this._setInitialAttributesOnChild(ie)}_setInitialAttributesOnChild(_){_=this._getInnerElement(_);const I=this._elemIsActive(_),ie=this._getOuterElement(_);_.setAttribute("aria-selected",I),ie!==_&&this._setAttributeIfNotExists(ie,"role","presentation"),I||_.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(_,"role","tab"),this._setInitialAttributesOnTargetPanel(_)}_setInitialAttributesOnTargetPanel(_){const I=ke.getElementFromSelector(_);I&&(this._setAttributeIfNotExists(I,"role","tabpanel"),_.id&&this._setAttributeIfNotExists(I,"aria-labelledby",`${_.id}`))}_toggleDropDown(_,I){const ie=this._getOuterElement(_);if(!ie.classList.contains("dropdown"))return;const fe=(ye,Ae)=>{const Oe=ke.findOne(ye,ie);Oe&&Oe.classList.toggle(Ae,I)};fe(lu,ur),fe(".dropdown-menu",$o),ie.setAttribute("aria-expanded",I)}_setAttributeIfNotExists(_,I,ie){_.hasAttribute(I)||_.setAttribute(I,ie)}_elemIsActive(_){return _.classList.contains(ur)}_getInnerElement(_){return _.matches(cu)?_:ke.findOne(cu,_)}_getOuterElement(_){return _.closest(".nav-item, .list-group-item")||_}static jQueryInterface(_){return this.each(function(){const I=Hr.getOrCreateInstance(this);if(typeof _=="string"){if(I[_]===void 0||_.startsWith("_")||_==="constructor")throw new TypeError(`No method named "${_}"`);I[_]()}})}}D.on(document,md,Ku,function(O){["A","AREA"].includes(this.tagName)&&O.preventDefault(),p(this)||Hr.getOrCreateInstance(this).show()}),D.on(window,Li,()=>{for(const O of ke.find(qa))Hr.getOrCreateInstance(O)}),S(Hr);const $r=".bs.toast",Sc=`mouseover${$r}`,pd=`mouseout${$r}`,w=`focusin${$r}`,k=`focusout${$r}`,M=`hide${$r}`,Z=`hidden${$r}`,ce=`show${$r}`,ue=`shown${$r}`,he="hide",ge="show",xe="showing",we={animation:"boolean",autohide:"boolean",delay:"number"},Fe={animation:!0,autohide:!0,delay:5e3};class $e extends De{constructor(_,I){super(_,I),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return Fe}static get DefaultType(){return we}static get NAME(){return"toast"}show(){D.trigger(this._element,ce).defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove(he),j(this._element),this._element.classList.add(ge,xe),this._queueCallback(()=>{this._element.classList.remove(xe),D.trigger(this._element,ue),this._maybeScheduleHide()},this._element,this._config.animation))}hide(){this.isShown()&&(D.trigger(this._element,M).defaultPrevented||(this._element.classList.add(xe),this._queueCallback(()=>{this._element.classList.add(he),this._element.classList.remove(xe,ge),D.trigger(this._element,Z)},this._element,this._config.animation)))}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(ge),super.dispose()}isShown(){return this._element.classList.contains(ge)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(_,I){switch(_.type){case"mouseover":case"mouseout":this._hasMouseInteraction=I;break;case"focusin":case"focusout":this._hasKeyboardInteraction=I}if(I)return void this._clearTimeout();const ie=_.relatedTarget;this._element===ie||this._element.contains(ie)||this._maybeScheduleHide()}_setListeners(){D.on(this._element,Sc,_=>this._onInteraction(_,!0)),D.on(this._element,pd,_=>this._onInteraction(_,!1)),D.on(this._element,w,_=>this._onInteraction(_,!0)),D.on(this._element,k,_=>this._onInteraction(_,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(_){return this.each(function(){const I=$e.getOrCreateInstance(this,_);if(typeof _=="string"){if(I[_]===void 0)throw new TypeError(`No method named "${_}"`);I[_](this)}})}}return Ye($e),S($e),{Alert:re,Button:Se,Carousel:Wt,Collapse:kr,Dropdown:Qn,Modal:jn,Offcanvas:Nn,Popover:Nc,ScrollSpy:oo,Tab:Hr,Toast:$e,Tooltip:hn}})})(pg)),pg.exports}p9();ED.createRoot(document.getElementById("root")).render(e.jsx(Wg.StrictMode,{children:e.jsx(f9,{})}));export{_I as A,m5 as B,dx as C,Zd as D,rd as E,JI as F,Vc as G,QI as H,aO as I,tn as J,kM as K,p5 as L,Zr as M,v8 as N,Zo as O,KI as P,W8 as Q,XI as R,Vu as S,rx as T,g9 as U,va as V,gv as W,_O as _,u5 as a,fM as b,E5 as c,y5 as d,uO as e,WI as f,q5 as g,BM as h,wO as i,o0 as j,r8 as k,M5 as l,Em as m,U5 as n,A8 as o,IM as p,k5 as q,R9 as r,g5 as s,q8 as t,GI as u,h8 as v,tv as w,V8 as x,R5 as y,z5 as z};
